(self.webpackChunkpp_labeling_frontend=self.webpackChunkpp_labeling_frontend||[]).push([[540],{54777:function(D){D.exports={segment:"segment___1YMcl",mainStage:"mainStage___2otee",rightSideBar:"rightSideBar___2X7jK",determinOutline:"determinOutline___2ls57"}},47e3:function(D,B,a){"use strict";a.r(B),a.d(B,{default:function(){return _}});var en=a(57663),X=a(71577),m=a(2824),g=a(67294),Y=a(54777),j=a.n(Y),F=a(8088),c=a(61541),K=a(44434),O=a(58967),k=a(5041),H=a(57436),W=a(14836),t=a(85893),G=function(e){return(0,t.jsx)(c.Z,{active:e.active,imgSrc:e.imgSrc||"./pics/buttons/polygon.png",onClick:e.onClick,children:e.children})},J=G,Q=a(43801),V=a(91220),z=a(65031);function p(o){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}function U(o,e){if(console.log(o,e),!(!o||!e)){var u=p(o);if(!!u){var i=void 0,l=[];return e.forEach(function(v){if(!i){i=v;return}l.push((0,t.jsx)(z.Cd,{x:i,y:v,radius:5,fill:o})),i=void 0}),console.log(u),console.log(l),{color:o,points:e,element:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(z.x1,{stroke:o,strokeWidth:2,globalCompositeOperation:"source-over",lineCap:"round",points:e,tension:.01,closed:!0,fill:"rgba(".concat(u.r,", ").concat(u.g,", ").concat(u.b,", 0.5)")}),l]})}}}}function w(o){var e=0,u=(0,V.Z)(o),i;try{for(u.s();!(i=u.n()).done;){var l=i.value;!l||l.annotationId>e&&(e=l.annotationId)}}catch(v){u.e(v)}finally{u.f()}return e}function $(o){var e=(0,g.useState)(o.currentTool),u=(0,m.Z)(e,2),i=u[0],l=u[1];(0,g.useEffect)(function(){l(o.currentTool)},[o.currentTool]);var v=function(h){if(console.log(i),i=="polygon")if(o.currentAnnotation){var f,M,C,P=((f=o.currentAnnotation)===null||f===void 0?void 0:f.lines)||[],s=U((M=o.currentLabel)===null||M===void 0?void 0:M.color,(C=P[0])===null||C===void 0?void 0:C.points.concat([h.evt.offsetX,h.evt.offsetY]));if(!s)return;var S={annotationId:o.currentAnnotation.annotationId,label:o.currentAnnotation.label,lines:[s]};o.onAnnotationModify(S),console.log(S)}else{var A,x=U((A=o.currentLabel)===null||A===void 0?void 0:A.color,[h.evt.offsetX,h.evt.offsetY]);if(!x)return;o.onAnnotationAdd({annotationId:w(o.annotations)+1,label:o.currentLabel,lines:[x]})}},y=function(){i=="polygon"};return{onMouseDown:v,onMouseMove:function(){},onMouseUp:y}}var q=function(){var e=(0,g.useState)(void 0),u=(0,m.Z)(e,2),i=u[0],l=u[1],v=(0,g.useState)({color:"",name:""}),y=(0,m.Z)(v,2),b=y[0],h=y[1],A=(0,g.useState)(),x=(0,m.Z)(A,2),f=x[0],M=x[1],C=(0,g.useState)([]),P=(0,m.Z)(C,2),s=P[0],S=P[1],nn=(0,g.useState)(10),R=(0,m.Z)(nn,2),I=R[0],E=R[1],d=function(n){M(n),n!=null&&n.label&&h(n.label)},N=function(n){for(var Z=[],L=0;L<s.length;L++)s[L].annotationId==n.annotationId?Z.push(n):Z.push(s[L]);d(n),S(Z)},tn=(0,Q.Z)({currentLabel:b,brushSize:I,currentTool:i,annotations:s,currentAnnotation:f,onAnnotationAdd:function(n){S(s.concat([n])),f||d(n)},onAnnotationModify:N}),on=$({currentLabel:b,brushSize:I,currentTool:i,annotations:s,currentAnnotation:f,onAnnotationAdd:function(n){S(s.concat([n])),f||d(n)},onAnnotationModify:N}),T=i=="polygon"?on:tn;return(0,t.jsxs)(F.Z,{className:j().segment,children:[(0,t.jsxs)(K.Z,{children:[(0,t.jsx)(c.Z,{imgSrc:"./pics/buttons/intelligent_interaction.png",children:"Intelligent Interaction"}),(0,t.jsx)(J,{active:i=="polygon",onClick:function(){l("polygon"),d(void 0)},children:"Polygon"}),(0,t.jsx)(O.Z,{size:I,active:i=="brush",onClick:function(){i!="rubber"&&i!="brush"&&d(void 0),l("brush")},onChange:function(n){E(n)},children:"Brush"}),(0,t.jsx)(O.Z,{size:I,active:i=="rubber",onClick:function(){i!="rubber"&&i!="brush"&&d(void 0),l("rubber")},onChange:function(n){E(n)},imgSrc:"./pics/buttons/rubber.png",children:"Rubber"}),(0,t.jsx)(c.Z,{imgSrc:"./pics/buttons/zoom_in.png",children:"Zoom in"}),(0,t.jsx)(c.Z,{imgSrc:"./pics/buttons/zoom_out.png",children:"Zoom out"}),(0,t.jsx)(c.Z,{imgSrc:"./pics/buttons/save.png",children:"Save"}),(0,t.jsx)(c.Z,{imgSrc:"./pics/buttons/move.png",children:"Move"}),(0,t.jsx)(c.Z,{imgSrc:"./pics/buttons/export.png",children:"Export"}),(0,t.jsx)(c.Z,{imgSrc:"./pics/buttons/data_division.png",children:"Divide Data"}),(0,t.jsx)(c.Z,{imgSrc:"./pics/buttons/prev.png",children:"Undo"}),(0,t.jsx)(c.Z,{imgSrc:"./pics/buttons/next.png",children:"Redo"}),(0,t.jsx)(c.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:"Clear Mark"})]}),(0,t.jsx)("div",{className:j().mainStage,children:(0,t.jsx)(H.Z,{annotations:s,onMouseDown:T.onMouseDown,onMouseMove:T.onMouseMove,onMouseUp:T.onMouseUp})}),(0,t.jsxs)("div",{className:j().rightSideBar,children:[(0,t.jsx)("div",{className:j().determinOutline,children:(0,t.jsx)(X.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",block:!0,onClick:function(){d(void 0)},children:"Determine Outline"})}),(0,t.jsx)(k.Z,{selectedLabel:b,onLabelSelect:function(n){h(n),d(void 0)},onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}}),(0,t.jsx)(W.Z,{selectedAnnotation:f,annotations:s,onAnnotationSelect:function(n){n!=null&&n.delete||d(n)},onAnnotationAdd:function(){},onAnnotationModify:function(){},onAnnotationDelete:function(n){S(s.filter(function(Z){return Z.annotationId!=n.annotationId})),d(void 0)}})]})]})},_=q}}]);
