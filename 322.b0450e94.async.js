(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[322],{64322:function(le,J,M){"use strict";M.d(J,{gu:function(){return X},_D:function(){return q},Gd:function(){return x},jL:function(){return ee},iA:function(){return re},CV:function(){return ae},A5:function(){return ne}});var W=M(86582),B=M(91220),E=M(3182),te=M(34792),b=M(48086),y=M(2824),V=M(94043),u=M.n(V),S=M(37071),R=M(81139),H=localStorage.getItem("basePath"),$=new R.VK(H?{basePath:H}:void 0),j=new R.U($),z=new R.sD($),Q=new R.W6($),N=new R.Cl($),G=new R.vb($),X=function(f){return JSON.parse(JSON.stringify(f))};function se(D){return D&&(D.toLowerCase().replace(/([-_][a-z])/g,function(f){return f.toUpperCase().replace("-","").replace("_","")}),D)}var Y=function(f,v,d){if(!!d){for(var c=0;c<v.length;c++)if(f[d]==v[c][d])return c}},q=function(f){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[.1,3],d=f(1),c=(0,y.Z)(d,2),k=c[0],C=c[1],O=function(m){var o=k;o+=m,o<v[0]&&(o=v[0],b.default.error("Smallest scale is "+v[0])),o>v[1]&&(o=v[1],b.default.error("Largest scale is "+v[1])),C(o)};return{curr:k,change:O}},x=function(f){var v=f([]),d=(0,y.Z)(v,2),c=d[0],k=d[1],C=f(),O=(0,y.Z)(C,2),s=O[0],m=O[1],o=function(){var _=(0,E.Z)(u().mark(function l(){var i;return u().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,j.getAll();case 3:return i=n.sent,k(i),n.abrupt("return",i);case 8:n.prev=8,n.t0=n.catch(0),console.log("project getAll err",n.t0),S.Z.parseError(n.t0,b.default);case 12:case"end":return n.stop()}},l,null,[[0,8]])}));return function(){return _.apply(this,arguments)}}(),g=function(){var _=(0,E.Z)(u().mark(function l(i){var a;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i!=null){e.next=2;break}return e.abrupt("return",void 0);case 2:if(!(c.length>1)){e.next=5;break}return b.default.error("Currently have multiple projects stored, use turnTo instead"),e.abrupt("return");case 5:return e.prev=5,e.next=8,j.get(i);case 8:return a=e.sent,k([a]),m(0),e.abrupt("return",a);case 14:e.prev=14,e.t0=e.catch(5),console.log("prject getcurr err",e.t0),S.Z.parseError(e.t0,b.default);case 18:case"end":return e.stop()}},l,null,[[5,14]])}));return function(i){return _.apply(this,arguments)}}(),w=function(){var _=(0,E.Z)(u().mark(function l(i){return u().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log("remove project",i),typeof i!="number"){n.next=6;break}return n.next=4,j.remove(i);case 4:n.next=8;break;case 6:return n.next=8,j.remove(i.projectId);case 8:o();case 9:case"end":return n.stop()}},l)}));return function(i){return _.apply(this,arguments)}}(),P=function(){var _=(0,E.Z)(u().mark(function l(i){var a;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.create(i);case 3:return a=e.sent,console.log(a),e.abrupt("return",a);case 8:e.prev=8,e.t0=e.catch(0),console.log("project create err",e.t0),S.Z.parseError(e.t0,b.default);case 12:case"end":return e.stop()}},l,null,[[0,8]])}));return function(i){return _.apply(this,arguments)}}(),r=function(){var _=(0,E.Z)(u().mark(function l(i,a){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:j.update(i,a).then(function(A){console.log("project update res",A)}).catch(function(A){console.log("project update err ",A),S.Z.parseError(A,b.default)});case 1:case"end":return e.stop()}},l)}));return function(i,a){return _.apply(this,arguments)}}();return{all:c,getAll:o,getCurr:g,remove:w,create:P,update:r,get curr(){if(s!=null)return c[s]}}},ee=function(f,v){var d=v.oneHot,c=d===void 0?!0:d,k=v.pageOnSelect,C=f(),O=(0,y.Z)(C,2),s=O[0],m=O[1],o=f(),g=(0,y.Z)(o,2),w=g[0],P=g[1],r=f(c),_=(0,y.Z)(r,2),l=_[0],i=_[1],a=function(){var T=(0,E.Z)(u().mark(function I(Z){var L,p,h,F;return u().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.prev=0,U.next=3,j.getLabels(Z);case 3:L=U.sent,p=(0,B.Z)(L);try{for(p.s();!(h=p.n()).done;)F=h.value,F.active=!1}catch(ue){p.e(ue)}finally{p.f()}return m(L),U.abrupt("return",L);case 10:U.prev=10,U.t0=U.catch(0),console.log("label getall err ",U.t0),S.Z.parseError(U.t0,b.default);case 14:case"end":return U.stop()}},I,null,[[0,10]])}));return function(Z){return T.apply(this,arguments)}}(),n=function(I){var Z=Y(I,s,"labelId");if(P(Z),console.log("onehot",l),l){var L=(0,B.Z)(s),p;try{for(L.s();!(p=L.n()).done;){var h=p.value;h.active=!1}}catch(F){L.e(F)}finally{L.f()}s[Z].active=!0,console.log("all",s)}else s[Z].active=!s[Z].active;k(s[Z]),m((0,W.Z)(s))},e=function(){var T=(0,E.Z)(u().mark(function I(Z){var L;return u().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.prev=0,h.next=3,G.create(Z);case 3:return L=h.sent,L.active=!1,m([].concat((0,W.Z)(s),[L])),h.abrupt("return",L);case 9:h.prev=9,h.t0=h.catch(0),console.log("label create err",h.t0),S.Z.parseError(h.t0,b.default);case 13:case"end":return h.stop()}},I,null,[[0,9]])}));return function(Z){return T.apply(this,arguments)}}(),A=function(){var T=(0,E.Z)(u().mark(function I(Z){return u().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return console.log("remove label",Z),p.prev=1,p.next=4,G.remove(Z.labelId);case 4:m(s.filter(function(h){return h.labelId!=Z.labelId})),p.next=11;break;case 7:p.prev=7,p.t0=p.catch(1),console.log("label remove err",p.t0),S.Z.parseError(p.t0,b.default);case 11:case"end":return p.stop()}},I,null,[[1,7]])}));return function(Z){return T.apply(this,arguments)}}(),K=function(){},t=function(){i(!l)};return{all:s,getAll:a,setAll:m,onSelect:n,create:e,remove:A,onModify:K,toggleOneHot:t,get curr(){if(w!=null)return s[w]}}},re=function(f){var v=f(),d=(0,y.Z)(v,2),c=d[0],k=d[1],C=f(),O=(0,y.Z)(C,2),s=O[0],m=O[1],o=f(),g=(0,y.Z)(o,2),w=g[0],P=g[1],r=function(a){if(a<0){b.default.error("This is the first image. No previous image.");return}if(a==c.length){b.default.error("This is the final image. No next image.");return}console.log("turning to",a),m(a)},_=function(){var i=(0,E.Z)(u().mark(function a(n,e){var A;return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j.getTasks(n);case 3:if(A=t.sent,k(A),e==null){t.next=9;break}return console.log("getall turnto"),r(e),t.abrupt("return",[A,A[e]]);case 9:return t.abrupt("return",A);case 12:t.prev=12,t.t0=t.catch(0),console.log("task getall err ",t.t0),S.Z.parseError(t.t0,b.default);case 16:case"end":return t.stop()}},a,null,[[0,12]])}));return function(n,e){return i.apply(this,arguments)}}(),l=function(){var i=(0,E.Z)(u().mark(function a(n){var e,A;return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j.getProgress(n);case 3:return e=t.sent,A=Math.ceil(e.finished/e.total*100),console.log("progress",e,A),P(A),t.abrupt("return",A);case 10:return t.prev=10,t.t0=t.catch(0),console.log("get progress err",t.t0),S.Z.parseError(t.t0,b.default),t.abrupt("return",0);case 15:case"end":return t.stop()}},a,null,[[0,10]])}));return function(n){return i.apply(this,arguments)}}();return{currIdx:s,all:c,turnTo:r,getAll:_,getProgress:l,progress:w,get curr(){if(!(s==null||c==null))return console.log("task.curr",c[s]),c[s]}}},ae=function(f){var v=f(),d=(0,y.Z)(v,2),c=d[0],k=d[1],C=function(){var m=(0,E.Z)(u().mark(function o(g){var w;return u().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Q.getAnnotations(g);case 3:return w=r.sent,r.next=6,k(w);case 6:return r.abrupt("return",w);case 9:r.prev=9,r.t0=r.catch(0),console.log("ann getAll err",r.t0),S.Z.parseError(r.t0,b.default);case 13:case"end":return r.stop()}},o,null,[[0,9]])}));return function(g){return m.apply(this,arguments)}}(),O=function(){var m=(0,E.Z)(u().mark(function o(g){var w;return u().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("create",g),r.prev=1,r.next=4,N.create(g);case 4:return w=r.sent,C(g.dataId),r.abrupt("return",w);case 9:r.prev=9,r.t0=r.catch(1),console.log("annotation create err",r.t0),S.Z.parseError(r.t0,b.default);case 13:case"end":return r.stop()}},o,null,[[1,9]])}));return function(g){return m.apply(this,arguments)}}(),s=function(){var m=(0,E.Z)(u().mark(function o(g){return u().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:try{N.remove(g)}catch(r){console.log("annotation remove err",r),S.Z.parseError(r,b.default)}case 1:case"end":return P.stop()}},o)}));return function(g){return m.apply(this,arguments)}}();return{all:c,getAll:C,create:O,remove:s}},ne=function(f){var v=f(),d=(0,y.Z)(v,2),c=d[0],k=d[1],C=f([]),O=(0,y.Z)(C,2),s=O[0],m=O[1],o=function(){var w=(0,E.Z)(u().mark(function P(r){return u().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:k(r);case 1:case"end":return l.stop()}},P)}));return function(r){return w.apply(this,arguments)}}(),g=function(){var w=(0,E.Z)(u().mark(function P(r,_){var l;return u().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,z.getDatas(r);case 3:if(l=a.sent,m(l),_==null){a.next=8;break}return o(_),a.abrupt("return",[l,l[_]]);case 8:return a.abrupt("return",l);case 11:a.prev=11,a.t0=a.catch(0),console.log("data getall err ",a.t0),S.Z.parseError(a.t0,b.default);case 15:case"end":return a.stop()}},P,null,[[0,11]])}));return function(r,_){return w.apply(this,arguments)}}();return{all:s,getAll:g,turnTo:o,get curr(){if(!(c==null||s==null))return s[c]}}}}}]);
