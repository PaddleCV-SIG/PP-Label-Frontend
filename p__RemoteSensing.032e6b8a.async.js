(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[333],{41435:function(P,D,e){"use strict";e.d(D,{Z:function(){return n}});var A=e(94663),g=e(80112);function S(m){return Function.toString.call(m).indexOf("[native code]")!==-1}var x=e(18597);function M(m,a,W){return(0,x.Z)()?M=Reflect.construct:M=function(v,p,I){var u=[null];u.push.apply(u,p);var c=Function.bind.apply(v,u),h=new c;return I&&(0,g.Z)(h,I.prototype),h},M.apply(null,arguments)}function n(m){var a=typeof Map=="function"?new Map:void 0;return n=function(f){if(f===null||!S(f))return f;if(typeof f!="function")throw new TypeError("Super expression must either be null or a function");if(typeof a!="undefined"){if(a.has(f))return a.get(f);a.set(f,v)}function v(){return M(f,arguments,(0,A.Z)(this).constructor)}return v.prototype=Object.create(f.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),(0,g.Z)(v,f)},n(m)}},26647:function(P){P.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1FTWb",toolBarButtonContainer:"toolBarButtonContainer___1Vahn",toolBarButton:"toolBarButton___3mR2H",buttonText:"buttonText___Y0WDm",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3lRZ8",popover:"popover___3zzu2",slider:"slider___ALra-",popoverLeft:"popoverLeft___15lGe"}},52822:function(P){P.exports={roundBall:"roundBall___1pqu1",popover:"popover___1-PR6"}},32495:function(P){P.exports={listItem:"listItem___1MXXF",eye:"eye___3nddM",delete:"delete___y9u-D",roundBall:"roundBall___DMczd",popover:"popover___E0HLD",annotationId:"annotationId___1ks8N",labelName:"labelName___130ie",listItemActive:"listItemActive___1rNB-"}},38670:function(P){P.exports={labelList:"labelList___3uLRO",listHeader:"listHeader___1ZPcO",eye:"eye___2yUvw",roundBall:"roundBall___1xKCU"}},5882:function(P){P.exports={listItem:"listItem___vtDXn",eye:"eye___AsLBS",roundBall:"roundBall___1J_R3",popover:"popover___1x-2R",delete:"delete___WHPf2",listItemActive:"listItemActive___3FRb7"}},56131:function(P){P.exports={labelList:"labelList___jvD05",listHeader:"listHeader___UM5UF",eye:"eye___II3Po",roundBall:"roundBall___j752J"}},78677:function(P){P.exports={container:"container___G0FNe"}},80961:function(P){P.exports={leftToolbar:"leftToolbar___1xi4t",rightToolbar:"rightToolbar___3dNSB"}},82499:function(P){P.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1SHWL",toolBarButtonContainer:"toolBarButtonContainer___1jKUz",toolBarButton:"toolBarButton___3Ouq1",buttonText:"buttonText___10ls7",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AA28"}},72869:function(P){P.exports={map:"map___92VPN",customControlIcon:"customControlIcon___3Ki2y"}},20474:function(P){P.exports={RSPop1:"RSPop1___vz5Me",RSPop2:"RSPop2___34pQA"}},87610:function(P){P.exports={RSPop1:"RSPop1___1iBEf",RSPop2:"RSPop2___1W841",RSPop3:"RSPop3___1Whcp"}},55252:function(P){P.exports={RSPop1:"RSPop1___17x8k",RSPop2:"RSPop2___27kK5"}},75513:function(P){P.exports={segment:"segment___3WmPw",mainStage:"mainStage___2kT1s",draw:"draw___Ff0QW",pblock:"pblock___3sGxC",progress:"progress___KQyBx",rightSideBar:"rightSideBar___11FX3",determinOutline:"determinOutline___1g1YI"}},57719:function(){},27992:function(P,D,e){"use strict";var A=e(20136),g=e(55241),S=e(13062),x=e(71230),M=e(77883),n=e(70507),m=e(89032),a=e(15746),W=e(66126),f=e(75454),v=e(2824),p=e(67294),I=e(61541),u=e(26647),c=e.n(u),h=e(85893),U=0,O=100,ae=10,ie=function(C){var T=(0,p.useState)(y(C.size)),K=(0,v.Z)(T,2),b=K[0],r=K[1];function d(s){r(y(s))}var R=C.minSize==null?U:C.minSize,i=C.maxSize==null?O:C.maxSize;function y(s){return s==null?ae:s<=R?R:s>=i?i:s}return(0,p.useEffect)(function(){d(C.size)},[C.size]),(0,h.jsxs)(g.Z,{overlayClassName:"".concat(c().popover," ").concat(C.disLoc=="left"?c().popoverLeft:""),placement:C.disLoc||"right",content:(0,h.jsxs)(x.Z,{children:[(0,h.jsx)(a.Z,{span:16,children:(0,h.jsx)(f.Z,{className:c().slider,value:b,max:i,min:R,onChange:function(j){var L;(L=C.onChange)===null||L===void 0||L.call(0,j)},tooltipVisible:!1})}),(0,h.jsx)(a.Z,{span:8,children:(0,h.jsx)(n.Z,{min:R,max:i,value:b,onChange:function(j){var L;(L=C.onChange)===null||L===void 0||L.call(0,j)},step:10})})]}),trigger:"hover",children:[" ",(0,h.jsx)(I.Z,{imgSrc:C.imgSrc||"",onClick:C.onClick,active:C.active,children:C.children})]})};D.Z=ie},63097:function(P,D,e){"use strict";var A=e(20136),g=e(55241),S=e(2824),x=e(67294),M=e(52822),n=e.n(M),m=e(63144),a=e(85893),W=function(v){var p=(0,x.useState)(v.color||"#FFF"),I=(0,S.Z)(p,2),u=I[0],c=I[1];return(0,x.useEffect)(function(){c(v.color||"#FFF")},[v]),v.changeable?(0,a.jsx)(g.Z,{getPopupContainer:function(U){return U.parentElement||document.body},overlayClassName:n().popover,openClassName:n().popoverOpenClassName,placement:"bottom",content:(0,a.jsx)(m.xS,{disableAlpha:!0,color:u,onChange:function(U){c(U.hex)},onChangeComplete:v.onChange}),trigger:"click",children:(0,a.jsx)("div",{className:n().roundBall,style:{backgroundColor:u}})}):(0,a.jsx)("div",{className:n().roundBall,style:{backgroundColor:u}})};D.Z=W},51327:function(P,D,e){"use strict";e.d(D,{Z:function(){return ae}});var A=e(54421),g=e(38272),S=e(57663),x=e(71577),M=e(67294),n=e(38670),m=e.n(n),a=e(49111),W=e(19650),f=e(8870),v=e(32495),p=e.n(v),I=e(63097),u=e(85893),c=function(l){var C=(0,f.Z)({},l.annotation),T=!1,K=(0,u.jsxs)(g.ZP.Item,{className:"".concat(p().listItem," ").concat(l.active?p().listItemActive:""),unselectable:"on",onClick:function(){console.log("click List.Item"),l.onClick(C)},children:[(0,u.jsxs)(W.Z,{align:"center",size:5,children:[(0,u.jsx)("a",{className:p().eye,style:{backgroundImage:T?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(r){r.stopPropagation(),l.onAnnotationModify(C)}})," ",(0,u.jsx)("span",{className:p().annotationId,children:C.properties.annotationId}),(0,u.jsx)("span",{className:p().labelName,children:C.properties.labelName}),(0,u.jsx)(I.Z,{color:C.properties.stroke})]}),(0,u.jsx)("a",{className:p().delete,onClick:function(r){console.log("click List.Item.delete"),r.stopPropagation(),l.onAnnotationDelete(C)}})]});return K},h=c,U=e(48971),O=function(l){var C=(0,U.YB)(),T=C.formatMessage({id:"component.PPAnnotationList.annotationList"}),K=C.formatMessage({id:"component.PPAnnotationList.addAnnotation"});return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(g.ZP,{className:m().labelList,size:"large",header:(0,u.jsx)("div",{className:m().listHeader,children:T}),bordered:!0,dataSource:l.annotations.features,renderItem:function(r){return(0,u.jsx)(h,{onClick:l.onAnnotationSelect,annotation:r,active:!1,onAnnotationDelete:l.onAnnotationDelete,onAnnotationModify:l.onAnnotationModify})},footer:(0,u.jsx)("div",{children:(0,u.jsx)(x.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){l.onAnnotationSelect(void 0)},block:!0,children:K})})})})},ae=O},5041:function(P,D,e){"use strict";e.d(D,{Z:function(){return i}});var A=e(54421),g=e(38272),S=e(57663),x=e(71577),M=e(2824),n=e(67294),m=e(56131),a=e.n(m),W=e(49111),f=e(19650),v=e(8870),p=e(5882),I=e.n(p),u=e(63097),c=e(85893),h=function(s){var j=(0,v.Z)({},s.label),L=(0,n.useState)(j.invisible),V=(0,M.Z)(L,2),F=V[0],z=V[1],t=(0,n.useState)(0),oe=(0,M.Z)(t,2),B=oe[0],se=oe[1],$=s.hideEye?" ":(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("a",{className:I().eye,style:{backgroundImage:F?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(ee){ee.stopPropagation(),z(!F),s.onLabelModify(j)}})," "]}),G=s.hideColorPicker?(0,c.jsx)(c.Fragment,{}):(0,c.jsx)(u.Z,{color:j.color,changeable:!0,onChange:function(ee){j.color=ee.hex,s.onLabelModify(j)}}),de=(0,c.jsxs)(g.ZP.Item,{className:"".concat(I().listItem," ").concat(s.active?I().listItemActive:""),unselectable:"on",onClick:function(){s.onClick(j)},children:[(0,c.jsxs)(f.Z,{align:"center",size:5,children:[$,j.name,G]}),(0,c.jsx)("a",{className:I().delete,onClick:function(ee){ee.stopPropagation();var me=new Date().getTime();me-B<300||(se(me),s.onLabelDelete(j))}})]});return de},U=h,O=e(71194),ae=e(50146),ie=e(47673),l=e(24044),C=e(9715),T=e(93766),K=e(48971),b=["#FF0000","#008000","#0000FF","#FFFF00","#FFA500","#00FFFF","#8B00FF","#FFC0CB","#7CFC00","#007FFF","#800080","#36BF36","#DAA520","#800000","#008B8B","#B22222","#E6D933","#000080","#FF00FF","#FFFF99","#87CEEB","#5C50E6","#CD5C5C","#20B2AA","#E680FF","#4D1F00","#006374","#B399FF","#8B4513","#BA55D3","#C0C0C0","#808080","#000000"],r=function(s){var j,L,V=(0,K.YB)(),F=V.formatMessage({id:"component.PPAddLabelModal.selectColor"}),z=V.formatMessage({id:"component.PPAddLabelModal.addLabel"}),t=V.formatMessage({id:"component.PPAddLabelModal.labelName"}),oe=V.formatMessage({id:"component.PPCreater.cancel"}),B=V.formatMessage({id:"component.PPSegMode.ok"}),se=(0,n.useState)(((j=s.defaultLabel)===null||j===void 0?void 0:j.color)||b[s.order||0]),$=(0,M.Z)(se,2),G=$[0],de=$[1];(0,n.useEffect)(function(){var te;de(((te=s.defaultLabel)===null||te===void 0?void 0:te.color)||b[s.order||0])},[s]);var ce=s.hideColorPicker?(0,c.jsx)(c.Fragment,{}):(0,c.jsx)(T.Z.Item,{label:F,name:"color",children:(0,c.jsx)(u.Z,{color:G,onChange:function(ve){de(ve.hex)}})}),ee=T.Z.useForm(),me=(0,M.Z)(ee,1),H=me[0];return(0,c.jsx)(ae.Z,{title:z,visible:s.visible,onCancel:s.onCancel,footer:null,children:(0,c.jsxs)(T.Z,{form:H,name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!1,labelname:(L=s.defaultLabel)===null||L===void 0?void 0:L.name},onFinish:function(ve){var Ie={name:ve.labelname,color:G};s.onLabelAdd(Ie),H.resetFields()},autoComplete:"off",children:[(0,c.jsx)(T.Z.Item,{label:t,name:"labelname",rules:[{required:!0,message:"Please input label name!"}],children:(0,c.jsx)(l.Z,{})}),ce,(0,c.jsx)(T.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,c.jsxs)(f.Z,{children:[(0,c.jsx)(x.Z,{onClick:function(){var ve;(ve=s.onCancel)===null||ve===void 0||ve.call(0),H.resetFields()},children:oe}),(0,c.jsx)(x.Z,{type:"primary",htmlType:"submit",children:B})]})})]})})},d=r,R=function(s){var j,L=(0,K.YB)(),V=L.formatMessage({id:"component.PPLabelList.addLabel"}),F=L.formatMessage({id:"component.PPLabelList.labelList"}),z=(0,n.useState)(!1),t=(0,M.Z)(z,2),oe=t[0],B=t[1];return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(g.ZP,{className:a().labelList,size:"large",header:(0,c.jsx)("div",{className:a().listHeader,children:F}),footer:(0,c.jsx)("div",{children:(0,c.jsx)(x.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){B(!0)},block:!0,children:V})}),bordered:!0,dataSource:s.labels,renderItem:function($){var G;return(0,c.jsx)(U,{hideColorPicker:s.hideColorPicker,hideEye:s.hideEye,onClick:s.onLabelSelect,label:$,active:(G=s.activeIds)===null||G===void 0?void 0:G.has($.labelId),onLabelDelete:s.onLabelDelete,onLabelModify:s.onLabelModify})}}),(0,c.jsx)(d,{hideColorPicker:s.hideColorPicker,order:(j=s.labels)===null||j===void 0?void 0:j.length,visible:oe,onLabelAdd:function($){s.onLabelAdd($),B(!1)},onCancel:function(){B(!1)}})]})},i=R},8088:function(P,D,e){"use strict";var A=e(67294),g=e(78677),S=e.n(g),x=e(85893),M=function(m){return(0,x.jsx)("div",{className:"".concat(S().container," ").concat(m.className),children:m.children})};D.Z=M},44434:function(P,D,e){"use strict";var A=e(67294),g=e(80961),S=e.n(g),x=e(85893),M=function(m){var a=S().leftToolbar;return m.disLoc=="right"&&(a=S().rightToolbar),(0,x.jsx)("div",{className:a,children:m.children})};D.Z=M},61541:function(P,D,e){"use strict";var A=e(49111),g=e(19650),S=e(67294),x=e(82499),M=e.n(x),n=e(85893),m=function(W){return(0,n.jsx)("div",{unselectable:"on",className:"".concat(M().toolBarButtonContainerWrapper," ").concat(W.active&&M().toolBarButtonContainerWrapperActive),onClick:W.onClick,children:(0,n.jsx)(g.Z,{align:"center",className:M().toolBarButtonContainer,size:0,children:(0,n.jsxs)(g.Z,{align:"center",direction:"vertical",className:M().toolBarButton,size:0,children:[(0,n.jsx)("img",{src:W.imgSrc}),(0,n.jsx)("div",{className:M().buttonText,children:W.children})]})})})};D.Z=m},37233:function(P,D,e){"use strict";e.d(D,{Z:function(){return h}});var A=e(67294),g=e(8870),S=e(93224),x=e(41004),M=e(72869),n=e.n(M),m=e(74607),a=e(85893),W=function(O){var ae=O.children,ie=O.leafletMapRef,l=O.displayTools,C=(0,S.Z)(O,["children","leafletMapRef","displayTools"]);return A.useEffect(function(){if(ie.current){var T=ie.current.leafletElement;T.pm.addControls({drawMarker:!1,drawCircle:!1,drawCircleMarker:!1,drawPolyline:!1,drawRectangle:!1,drawPolygon:!1,editMode:!1,dragMode:!1,cutPolygon:!0,rotateMode:!1,removalMode:!1}),T.pm.setGlobalOptions({pmIgnore:!1}),O.displayTools&&T.pm.Toolbar.createCustomControl({name:"StoreShapes",title:"Store all shapes",block:"custom",className:n().customControlIcon,toggle:!1,afterClick:function(){var b=JSON.stringify(T.pm.getGeomanDrawLayers(!0).toGeoJSON()),r="data.geojson",d=document.createElement("a");d.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(b)),d.setAttribute("download",r),d.style.display="none",document.body.appendChild(d),d.click(),console.log(b)}}),T.on("pm:create",function(K){O.onShapeCreate(K)}),T.on("pm:edit",function(K){O.onShapeEdit(K)})}},[]),(0,a.jsx)(x.Z,(0,g.Z)((0,g.Z)({ref:ie},C),{},{children:ae}))},f=W,v=e(88014),p=e(16072),I=e(18836),u={lat:0,lng:0,zoom:2},c=function(O){var ae=[u.lat,u.lng];return(0,a.jsx)(f,{leafletMapRef:O.leafletMapRef,displayTools:O.displayTools,className:n().map,center:ae,zoom:u.zoom,onShapeCreate:O.onShapeCreate,onShapeEdit:O.onShapeEdit,zoomControl:!1,children:(0,a.jsxs)(v.Z,{position:"topright",children:[(0,a.jsx)(v.Z.BaseLayer,{checked:!0,name:"TianDiTu.Vector",children:(0,a.jsxs)(p.Z,{attribution:'\xA9 <a href="https://www.tianditu.gov.cn/">TianDiTu</a> GS(2021)3715',children:[(0,a.jsx)(I.Z,{url:"https://t2.tianditu.gov.cn/DataServer?T=vec_w&X={x}&Y={y}&L={z}&tk=8e879a4cad078fd3ce7456f2737fc4cc"}),(0,a.jsx)(I.Z,{url:"https://t2.tianditu.gov.cn/DataServer?T=cva_w&X={x}&Y={y}&L={z}&tk=8e879a4cad078fd3ce7456f2737fc4cc"})]})}),(0,a.jsx)(v.Z.Overlay,{name:"Esri.WorldImagery",children:(0,a.jsx)(I.Z,{attribution:"Tiles \xA9 Esri \u2014 Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"})})]})})},h=c},49813:function(P,D,e){"use strict";var A=e(47673),g=e(24044),S=e(13062),x=e(71230),M=e(59250),n=e(13013),m=e(57663),a=e(71577),W=e(89032),f=e(15746),v=e(30887),p=e(54689),I=e(34792),u=e(48086),c=e(89366),h=e(57254),U=e(20474),O=e.n(U),ae=e(67294),ie=e(48971),l=e(85893);function C(b){u.default.info("Click on menu item."),console.log("click",b)}var T=(0,l.jsxs)(p.Z,{onClick:C,children:[(0,l.jsx)(p.Z.Item,{icon:(0,l.jsx)(c.Z,{}),children:"1st menu item"},"1"),(0,l.jsx)(p.Z.Item,{icon:(0,l.jsx)(c.Z,{}),children:"2nd menu item"},"2"),(0,l.jsx)(p.Z.Item,{icon:(0,l.jsx)(c.Z,{}),children:"3rd menu item"},"3")]}),K=function(){var r=(0,ie.YB)(),d=r.formatMessage({id:"component.PPRS.pdParameter"}),R=r.formatMessage({id:"component.PPRS.simplifiedDistance"}),i=r.formatMessage({id:"component.PPRS.simplifiedAngle"}),y=r.formatMessage({id:"component.PPRS.threshold"});return(0,l.jsxs)("div",{children:[(0,l.jsxs)(x.Z,{children:[(0,l.jsx)(f.Z,{span:12,className:O().RSPop1,children:(0,l.jsx)("span",{children:d})}),(0,l.jsx)(f.Z,{span:12,className:O().RSPop2,children:(0,l.jsx)(n.Z,{overlay:T,children:(0,l.jsxs)(a.Z,{style:{width:"100%"},children:["Dropdown ",(0,l.jsx)(h.Z,{})]})})})]}),(0,l.jsxs)(x.Z,{children:[(0,l.jsx)(f.Z,{span:12,className:O().RSPop1,children:(0,l.jsx)("span",{children:R})}),(0,l.jsx)(f.Z,{span:12,className:O().RSPop2,children:(0,l.jsx)(g.Z,{placeholder:"Basic usage"})})]}),(0,l.jsxs)(x.Z,{children:[(0,l.jsx)(f.Z,{span:12,className:O().RSPop1,children:(0,l.jsx)("span",{children:i})}),(0,l.jsx)(f.Z,{span:12,className:O().RSPop2,children:(0,l.jsx)(g.Z,{placeholder:"Basic usage"})})]}),(0,l.jsxs)(x.Z,{children:[(0,l.jsx)(f.Z,{span:12,className:O().RSPop1,children:(0,l.jsx)("span",{children:y})}),(0,l.jsx)(f.Z,{span:12,className:O().RSPop2,children:(0,l.jsx)(g.Z,{placeholder:"Basic usage"})})]})]})};D.Z=K},97927:function(P,D,e){"use strict";var A=e(13062),g=e(71230),S=e(47673),x=e(24044),M=e(89032),n=e(15746),m=e(87610),a=e.n(m),W=e(67294),f=e(48971),v=e(85893),p=function(){var u=(0,f.YB)(),c=u.formatMessage({id:"component.PPRS.gridSize"}),h=u.formatMessage({id:"component.PPRS.overlap"}),U=u.formatMessage({id:"component.PPRS.completed"},{show:1,total:16});return(0,v.jsxs)("div",{children:[(0,v.jsxs)(g.Z,{children:[(0,v.jsx)(n.Z,{span:12,className:a().RSPop1,children:(0,v.jsx)("span",{children:c})}),(0,v.jsx)(n.Z,{span:12,className:a().RSPop2,children:(0,v.jsx)(x.Z,{placeholder:"Basic usage"})})]}),(0,v.jsxs)(g.Z,{children:[(0,v.jsx)(n.Z,{span:12,className:a().RSPop1,children:(0,v.jsx)("span",{children:h})}),(0,v.jsx)(n.Z,{span:12,className:a().RSPop2,children:(0,v.jsx)(x.Z,{placeholder:"Basic usage"})})]}),(0,v.jsx)(g.Z,{children:(0,v.jsx)("span",{className:a().RSPop3,children:U})})]})};D.Z=p},91861:function(P,D,e){"use strict";e.d(D,{Ad:function(){return g},k3:function(){return S},Vd:function(){return x},td:function(){return M}});var A=40;function g(){localStorage.removeItem("history"),S([])}function S(n){var m=localStorage.getItem("history"),a=m?JSON.parse(m):{index:-1,items:[]};if(JSON.stringify(a.items[a.index])!=JSON.stringify(n)){var W=a.index>A?a.index-A:0,f=a.items.splice(W,a.index==0?1:a.index+1);a.items=f.concat([n]),a.index<=A?a.index++:a.index=A+1,localStorage.setItem("history",JSON.stringify(a))}}function x(){var n=localStorage.getItem("history");if(!!n){var m=JSON.parse(n);if(!!m&&!(m.index>=m.items.length-1))return m.index++,localStorage.setItem("history",JSON.stringify(m)),m.items[m.index]}}function M(){var n=localStorage.getItem("history");if(!!n){var m=JSON.parse(n);if(!(!m||!m.index)&&!(m.index<=0))return m.index--,localStorage.setItem("history",JSON.stringify(m)),m.items[m.index]}}},47712:function(P,D,e){"use strict";e.r(D),e.d(D,{default:function(){return be}});var A=e(34669),g=e(54458),S=e(20136),x=e(55241),M=e(49111),n=e(19650),m=e(62350),a=e(75443),W=e(57663),f=e(71577),v=e(2824),p=e(67294),I=e(75513),u=e.n(I),c=e(8088),h=e(61541),U=e(44434),O=e(5041),ae=e(49813),ie=e(98858),l=e(4914),C=e(13062),T=e(71230),K=e(59250),b=e(13013),r=e(89032),d=e(15746),R=e(30887),i=e(54689),y=e(34792),s=e(48086),j=e(89366),L=e(57254),V=e(55252),F=e.n(V),z=e(48971),t=e(85893);function oe(_){s.default.info("Click on menu item."),console.log("click",_)}var B=(0,t.jsxs)(i.Z,{onClick:oe,children:[(0,t.jsx)(i.Z.Item,{icon:(0,t.jsx)(j.Z,{}),children:"band_1"},"1"),(0,t.jsx)(i.Z.Item,{icon:(0,t.jsx)(j.Z,{}),children:"band_2"},"2"),(0,t.jsx)(i.Z.Item,{icon:(0,t.jsx)(j.Z,{}),children:"band_3"},"3")]}),se=function(){var Y=(0,z.YB)(),Q=Y.formatMessage({id:"component.PPRS.r"}),k=Y.formatMessage({id:"component.PPRS.g"}),je=Y.formatMessage({id:"component.PPRS.b"}),Me=Y.formatMessage({id:"component.PPRS.dataInformation"}),Se=Y.formatMessage({id:"component.PPRS.fileName"}),Oe=Y.formatMessage({id:"component.PPRS.row"}),ne=Y.formatMessage({id:"component.PPRS.column"}),le=Y.formatMessage({id:"component.PPRS.bands"}),ge=Y.formatMessage({id:"component.PPRS.dataType"}),De=Y.formatMessage({id:"component.PPRS.EPSG"}),Ee=Y.formatMessage({id:"component.PPRS.unit"});return(0,t.jsxs)("div",{children:[(0,t.jsxs)(T.Z,{children:[(0,t.jsx)(d.Z,{className:F().RSPop1,children:(0,t.jsx)("span",{children:Q})}),(0,t.jsx)(d.Z,{className:F().RSPop2,children:(0,t.jsx)(b.Z,{overlay:B,children:(0,t.jsxs)(f.Z,{style:{width:"100%"},children:["Band ",(0,t.jsx)(L.Z,{})]})})}),(0,t.jsx)(d.Z,{className:F().RSPop1,children:(0,t.jsx)("span",{children:k})}),(0,t.jsx)(d.Z,{className:F().RSPop2,children:(0,t.jsx)(b.Z,{overlay:B,children:(0,t.jsxs)(f.Z,{style:{width:"100%"},children:["Band ",(0,t.jsx)(L.Z,{})]})})}),(0,t.jsx)(d.Z,{className:F().RSPop1,children:(0,t.jsx)("span",{children:je})}),(0,t.jsx)(d.Z,{className:F().RSPop2,children:(0,t.jsx)(b.Z,{overlay:B,children:(0,t.jsxs)(f.Z,{style:{width:"100%"},children:["Band ",(0,t.jsx)(L.Z,{})]})})})]}),(0,t.jsxs)(l.Z,{title:Me,column:1,bordered:!0,children:[(0,t.jsx)(l.Z.Item,{label:Se,children:"A/XXX.tif"}),(0,t.jsx)(l.Z.Item,{label:Oe,children:"1234"}),(0,t.jsx)(l.Z.Item,{label:ne,children:"897"}),(0,t.jsx)(l.Z.Item,{label:le,children:"7"}),(0,t.jsx)(l.Z.Item,{label:ge,children:"UInt16"}),(0,t.jsx)(l.Z.Item,{label:De,children:"7030"}),(0,t.jsx)(l.Z.Item,{label:Ee,children:"m"})]})]})},$=se,G=e(97927),de=e(37233),ce=e(51327),ee=e(8870);function me(_){var Y=(0,p.useState)(0),Q=(0,v.Z)(Y,2),k=Q[0],je=Q[1],Me=(0,p.useState)(!1),Se=(0,v.Z)(Me,2),Oe=Se[0],ne=Se[1];(0,p.useEffect)(function(){localStorage.setItem("currentLabel",JSON.stringify(_.currentLabel||{}))},[_.currentLabel]),(0,p.useEffect)(function(){localStorage.setItem("annotations",JSON.stringify(_.annotations||{}))},[_.annotations]);var le=function(){var o,Z=(o=_.leafletMapRef.current)===null||o===void 0?void 0:o.leafletElement.pm.globalDrawModeEnabled();console.log(Z)},ge=function(o){var Z=localStorage.getItem("currentLabel");if(Z!="{}"){var E,ue;ne(!0);var re=JSON.parse(Z||"{}");(E=_.leafletMapRef.current)===null||E===void 0||E.leafletElement.pm.enableDraw(o),(ue=_.leafletMapRef.current)===null||ue===void 0||ue.leafletElement.pm.setPathOptions({color:re==null?void 0:re.color,fillColor:re==null?void 0:re.color,fillOpacity:.4})}else{var he;alert("Test"),(he=_.leafletMapRef.current)===null||he===void 0||he.leafletElement.pm.disableDraw(o),ne(!1)}},De=function(o){var Z;(Z=_.leafletMapRef.current)===null||Z===void 0||Z.leafletElement.pm.disableDraw(o),ne(!1),le()},Ee=function(){var o;return(o=_.leafletMapRef.current)===null||o===void 0?void 0:o.leafletElement.pm.Draw.getActiveShape()},Ze=function(){if(Ee()=="Polygon"){var o;(o=_.leafletMapRef.current)===null||o===void 0||o.leafletElement.pm.Draw.Polygon._removeLastVertex(),le()}else le(),ne(!1)},ye=function(){var o;(o=_.leafletMapRef.current)===null||o===void 0||o.leafletElement.pm.toggleGlobalDragMode(),le()},Ne=function(){if(Ee()=="Polygon"){var o;(o=_.leafletMapRef.current)===null||o===void 0||o.leafletElement.pm.Draw.Polygon._finishShape(),le(),ne(!1)}else le(),ne(!1)},We=function(){var o;(o=_.leafletMapRef.current)===null||o===void 0||o.leafletElement.pm.enableGlobalRemovalMode(),le()},Re=function(){var o;(o=_.leafletMapRef.current)===null||o===void 0||o.leafletElement.pm.toggleGlobalEditMode(),le(),ne(!1)},Le=function(){ne(!1)},Ae=function(o){var Z=o.toGeoJSON(),E=JSON.parse(localStorage.getItem("currentLabel")||"{}");je(k+1),Z.properties={labelName:E==null?void 0:E.name,stroke:E==null?void 0:E.color,annotationId:k+1};var ue=JSON.parse(localStorage.getItem("annotations")||"{}"),re=(0,ee.Z)((0,ee.Z)({},ue),{},{features:ue.features.concat(Z)});console.log(re),_.setAnnotations(re),_.recordHistory(re)};function w(J){ne(!1),Ae(J.layer)}var Pe=function(o){console.log(o)},Ce=function(){var o;(o=_.leafletMapRef.current)===null||o===void 0||o.leafletElement.zoomIn(),le()},pe=function(){var o;(o=_.leafletMapRef.current)===null||o===void 0||o.leafletElement.zoomOut(),le()};return{polyVisable:Oe,RSDraw:ge,RSDrawDisable:De,removeLastVertex:Ze,moveShape:ye,finishShape:Ne,removeShape:We,editMode:Re,saveGeoJson:Le,storeOnDb:Ae,onShapeCreate:w,onShapeEdit:Pe,toolZoomIn:Ce,toolZoomOut:pe,currentShape:Ee}}var H=e(27992),te=e(91861),ve=e(19424),Ie=function(){var Y=(0,ve.$L)(p.useState,p.useEffect,{label:{oneHot:!1},tool:{defaultTool:"mover"},effectTrigger:{}}),Q=(0,v.Z)(Y,10),k=Q[0],je=Q[1],Me=Q[2],Se=Q[3],Oe=Q[4],ne=Q[5],le=Q[6],ge=Q[7],De=Q[8],Ee=Q[9],Ze=(0,p.useState)(!1),ye=(0,v.Z)(Ze,2),Ne=ye[0],We=ye[1],Re=(0,p.useState)(!1),Le=(0,v.Z)(Re,2),Ae=Le[0],w=Le[1],Pe=(0,p.useState)({type:"FeatureCollection",features:[]}),Ce=(0,v.Z)(Pe,2),pe=Ce[0],J=Ce[1];(0,p.useEffect)(function(){(0,te.Ad)()},[]),console.log("rs is re-rendering! label.curr: ".concat(JSON.stringify(ge.curr)));var o=p.useRef(null),Z=me({leafletMapRef:o,currentLabel:ge.curr,setAnnotations:J,annotations:pe,recordHistory:te.k3}),E=(0,z.YB)(),ue=E.formatMessage({id:"pages.Maps.finished"}),re=E.formatMessage({id:"pages.Maps.removeLastVertex"}),he=E.formatMessage({id:"pages.Maps.cancel"}),Ke=E.formatMessage({id:"pages.Maps.boundary"}),Te=E.formatMessage({id:"pages.Maps.remoteSensing"}),Ue=E.formatMessage({id:"pages.Maps.grids"}),Fe=E.formatMessage({id:"pages.toolBar.polygon"}),Be=E.formatMessage({id:"pages.toolBar.rubber"}),ze=E.formatMessage({id:"pages.toolBar.zoomIn"}),q=E.formatMessage({id:"pages.toolBar.zoomOut"}),X=E.formatMessage({id:"pages.toolBar.move"}),xe=E.formatMessage({id:"pages.toolBar.unDo"}),fe=E.formatMessage({id:"pages.toolBar.reDo"}),Ge=E.formatMessage({id:"pages.toolBar.save"}),Je=E.formatMessage({id:"pages.toolBar.edit"}),Ve=E.formatMessage({id:"pages.toolBar.clearMark"}),$e=E.formatMessage({id:"pages.toolBar.interactor"}),He=E.formatMessage({id:"pages.toolBar.segmentThreshold"}),Ye=E.formatMessage({id:"pages.toolBar.transparency"}),Xe=E.formatMessage({id:"pages.toolBar.visualRadius"}),Qe=E.formatMessage({id:"pages.toolBar.determineOutline"}),ke=E.formatMessage({id:"pages.toolBar.divideData"}),we=E.formatMessage({id:"pages.toolBar.export"});return(0,t.jsxs)(c.Z,{className:u().segment,children:[(0,t.jsxs)(U.Z,{children:[(0,t.jsx)(x.Z,{placement:"rightTop",visible:Z.polyVisable,content:(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(n.Z,{children:[(0,t.jsx)(f.Z,{type:"primary",onClick:function(){Z.finishShape()},children:ue}),(0,t.jsx)(f.Z,{type:"primary",onClick:function(){Z.removeLastVertex()},children:re}),(0,t.jsx)(a.Z,{title:"Are you sure cancel this task?",okText:"Yes",cancelText:"No",children:(0,t.jsx)(f.Z,{type:"primary",onClick:function(){Z.RSDrawDisable(Z.currentShape())},children:he})})]})}),trigger:k.curr=="Polygon"?"hover":"click",children:(0,t.jsx)(h.Z,{active:k.curr=="Polygon",imgSrc:"./pics/buttons/polygon.png",onClick:function(){k.setCurr("Polygon"),Z.RSDraw("Polygon")},children:Fe})}),(0,t.jsx)(h.Z,{onClick:function(){Z.editMode()},imgSrc:"./pics/buttons/edit.png",children:Je}),(0,t.jsxs)(x.Z,{placement:"rightTop",title:"title",content:"content",trigger:k.curr=="rubber"?"hover":"click",children:[" ",(0,t.jsx)(h.Z,{imgSrc:"./pics/buttons/rubber.png",onClick:function(){Z.removeShape()},children:Be})]}),(0,t.jsx)(h.Z,{onClick:function(){Z.toolZoomIn()},imgSrc:"./pics/buttons/zoom_in.png",children:ze}),(0,t.jsx)(h.Z,{onClick:function(){Z.toolZoomOut()},imgSrc:"./pics/buttons/zoom_out.png",children:q}),(0,t.jsx)(h.Z,{onClick:function(){Z.saveGeoJson()},imgSrc:"./pics/buttons/save.png",children:Ge}),(0,t.jsx)(h.Z,{imgSrc:"./pics/buttons/move.png",onClick:function(){return Z.moveShape()},children:X}),(0,t.jsx)(h.Z,{onClick:function(){var _e=(0,te.td)()},imgSrc:"./pics/buttons/prev.png",children:xe}),(0,t.jsx)(h.Z,{onClick:function(){var _e=(0,te.Vd)()},imgSrc:"./pics/buttons/next.png",children:fe}),(0,t.jsx)(h.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:Ve})]}),(0,t.jsxs)("div",{className:u().mainStage,children:[(0,t.jsx)("div",{className:u().draw,children:(0,t.jsx)(de.Z,{leafletMapRef:o,onShapeCreate:Z.onShapeCreate,onShapeEdit:Z.onShapeEdit})}),(0,t.jsx)("div",{className:u().pblock,children:(0,t.jsx)("div",{className:u().progress,children:(0,t.jsx)(g.Z,{percent:50,status:"active"})})})]}),(0,t.jsxs)(U.Z,{disLoc:"right",children:[(0,t.jsx)(h.Z,{imgSrc:"./pics/buttons/intelligent_interaction.png",children:$e}),(0,t.jsx)(H.Z,{imgSrc:"./pics/buttons/threshold.png",disLoc:"left",children:He}),(0,t.jsx)(H.Z,{imgSrc:"./pics/buttons/alpha.png",disLoc:"left",children:Ye}),(0,t.jsx)(H.Z,{imgSrc:"./pics/buttons/radius.png",disLoc:"left",children:Xe}),(0,t.jsxs)(x.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Setting of boundary simplification",content:(0,t.jsx)(ae.Z,{}),trigger:k.curr=="boundry"?"click":"hover",children:[" ",(0,t.jsx)(h.Z,{imgSrc:"./pics/buttons/border_simplify.png",onClick:function(){k.setCurr("boundry")},children:Ke})]}),(0,t.jsxs)(x.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Setting of remote sensing",content:(0,t.jsx)($,{}),trigger:k.curr=="colorgun"?"click":"hover",children:[" ",(0,t.jsx)(h.Z,{imgSrc:"./pics/buttons/remote_sensing_setting.png",onClick:function(){k.setCurr("colorgun")},children:Te})]}),(0,t.jsxs)(x.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Switch grids",content:(0,t.jsx)(G.Z,{}),trigger:k.curr=="grid"?"click":"hover",children:[" ",(0,t.jsx)(h.Z,{imgSrc:"./pics/buttons/switch_grid.png",onClick:function(){k.setCurr("grid")},children:Ue})]}),(0,t.jsx)(h.Z,{imgSrc:"./pics/buttons/data_division.png",children:ke}),(0,t.jsx)(h.Z,{imgSrc:"./pics/buttons/export.png",children:we})]}),(0,t.jsxs)("div",{className:u().rightSideBar,children:[(0,t.jsx)("div",{className:u().determinOutline,children:(0,t.jsx)(f.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",block:!0,children:Qe})}),(0,t.jsx)(O.Z,{selectedLabel:ge.curr,onLabelSelect:function(_e){ge.setCurr(_e),console.log(_e)},onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}}),(0,t.jsx)(ce.Z,{annotations:pe,onAnnotationSelect:function(){},onAnnotationAdd:function(){},onAnnotationModify:function(){},onAnnotationDelete:function(){}})]})]})},be=Ie},38272:function(P,D,e){"use strict";e.d(D,{ZM:function(){return C},ZP:function(){return b}});var A=e(85061),g=e(22122),S=e(96156),x=e(28481),M=e(90484),n=e(67294),m=e(94184),a=e.n(m),W=e(11382),f=e(25378),v=e(24308),p=e(65632),I=e(40308),u=e(92820),c=e(21584),h=e(96159),U=function(r,d){var R={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&d.indexOf(i)<0&&(R[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var y=0,i=Object.getOwnPropertySymbols(r);y<i.length;y++)d.indexOf(i[y])<0&&Object.prototype.propertyIsEnumerable.call(r,i[y])&&(R[i[y]]=r[i[y]]);return R},O=function(d){var R=d.prefixCls,i=d.className,y=d.avatar,s=d.title,j=d.description,L=U(d,["prefixCls","className","avatar","title","description"]),V=n.useContext(p.E_),F=V.getPrefixCls,z=F("list",R),t=a()("".concat(z,"-item-meta"),i),oe=n.createElement("div",{className:"".concat(z,"-item-meta-content")},s&&n.createElement("h4",{className:"".concat(z,"-item-meta-title")},s),j&&n.createElement("div",{className:"".concat(z,"-item-meta-description")},j));return n.createElement("div",(0,g.Z)({},L,{className:t}),y&&n.createElement("div",{className:"".concat(z,"-item-meta-avatar")},y),(s||j)&&oe)},ae=function(d){var R=d.prefixCls,i=d.children,y=d.actions,s=d.extra,j=d.className,L=d.colStyle,V=U(d,["prefixCls","children","actions","extra","className","colStyle"]),F=n.useContext(C),z=F.grid,t=F.itemLayout,oe=n.useContext(p.E_),B=oe.getPrefixCls,se=function(){var H;return n.Children.forEach(i,function(te){typeof te=="string"&&(H=!0)}),H&&n.Children.count(i)>1},$=function(){return t==="vertical"?!!s:!se()},G=B("list",R),de=y&&y.length>0&&n.createElement("ul",{className:"".concat(G,"-item-action"),key:"actions"},y.map(function(me,H){return n.createElement("li",{key:"".concat(G,"-item-action-").concat(H)},me,H!==y.length-1&&n.createElement("em",{className:"".concat(G,"-item-action-split")}))})),ce=z?"div":"li",ee=n.createElement(ce,(0,g.Z)({},V,{className:a()("".concat(G,"-item"),(0,S.Z)({},"".concat(G,"-item-no-flex"),!$()),j)}),t==="vertical"&&s?[n.createElement("div",{className:"".concat(G,"-item-main"),key:"content"},i,de),n.createElement("div",{className:"".concat(G,"-item-extra"),key:"extra"},s)]:[i,de,(0,h.Tm)(s,{key:"extra"})]);return z?n.createElement(c.Z,{flex:1,style:L},ee):ee};ae.Meta=O;var ie=ae,l=function(r,d){var R={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&d.indexOf(i)<0&&(R[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var y=0,i=Object.getOwnPropertySymbols(r);y<i.length;y++)d.indexOf(i[y])<0&&Object.prototype.propertyIsEnumerable.call(r,i[y])&&(R[i[y]]=r[i[y]]);return R},C=n.createContext({}),T=C.Consumer;function K(r){var d,R=r.pagination,i=R===void 0?!1:R,y=r.prefixCls,s=r.bordered,j=s===void 0?!1:s,L=r.split,V=L===void 0?!0:L,F=r.className,z=r.children,t=r.itemLayout,oe=r.loadMore,B=r.grid,se=r.dataSource,$=se===void 0?[]:se,G=r.size,de=r.header,ce=r.footer,ee=r.loading,me=ee===void 0?!1:ee,H=r.rowKey,te=r.renderItem,ve=r.locale,Ie=l(r,["pagination","prefixCls","bordered","split","className","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]),be=i&&(0,M.Z)(i)==="object"?i:{},_=n.useState(be.defaultCurrent||1),Y=(0,x.Z)(_,2),Q=Y[0],k=Y[1],je=n.useState(be.defaultPageSize||10),Me=(0,x.Z)(je,2),Se=Me[0],Oe=Me[1],ne=n.useContext(p.E_),le=ne.getPrefixCls,ge=ne.renderEmpty,De=ne.direction,Ee={current:1,total:0},Ze={},ye=function(X){return function(xe,fe){k(xe),Oe(fe),i&&i[X]&&i[X](xe,fe)}},Ne=ye("onChange"),We=ye("onShowSizeChange"),Re=function(X,xe){if(!te)return null;var fe;return typeof H=="function"?fe=H(X):H?fe=X[H]:fe=X.key,fe||(fe="list-item-".concat(xe)),Ze[xe]=fe,te(X,xe)},Le=function(){return!!(oe||i||ce)},Ae=function(X,xe){return n.createElement("div",{className:"".concat(X,"-empty-text")},ve&&ve.emptyText||xe("List"))},w=le("list",y),Pe=me;typeof Pe=="boolean"&&(Pe={spinning:Pe});var Ce=Pe&&Pe.spinning,pe="";switch(G){case"large":pe="lg";break;case"small":pe="sm";break;default:break}var J=a()(w,(d={},(0,S.Z)(d,"".concat(w,"-vertical"),t==="vertical"),(0,S.Z)(d,"".concat(w,"-").concat(pe),pe),(0,S.Z)(d,"".concat(w,"-split"),V),(0,S.Z)(d,"".concat(w,"-bordered"),j),(0,S.Z)(d,"".concat(w,"-loading"),Ce),(0,S.Z)(d,"".concat(w,"-grid"),!!B),(0,S.Z)(d,"".concat(w,"-something-after-last-item"),Le()),(0,S.Z)(d,"".concat(w,"-rtl"),De==="rtl"),d),F),o=(0,g.Z)((0,g.Z)((0,g.Z)({},Ee),{total:$.length,current:Q,pageSize:Se}),i||{}),Z=Math.ceil(o.total/o.pageSize);o.current>Z&&(o.current=Z);var E=i?n.createElement("div",{className:"".concat(w,"-pagination")},n.createElement(I.Z,(0,g.Z)({},o,{onChange:Ne,onShowSizeChange:We}))):null,ue=(0,A.Z)($);i&&$.length>(o.current-1)*o.pageSize&&(ue=(0,A.Z)($).splice((o.current-1)*o.pageSize,o.pageSize));var re=(0,f.Z)(),he=n.useMemo(function(){for(var q=0;q<v.c4.length;q+=1){var X=v.c4[q];if(re[X])return X}},[re]),Ke=n.useMemo(function(){if(!!B){var q=he&&B[he]?B[he]:B.column;if(q)return{width:"".concat(100/q,"%"),maxWidth:"".concat(100/q,"%")}}},[B==null?void 0:B.column,he]),Te=Ce&&n.createElement("div",{style:{minHeight:53}});if(ue.length>0){var Ue=ue.map(function(q,X){return Re(q,X)}),Fe=n.Children.map(Ue,function(q,X){return n.createElement("div",{key:Ze[X],style:Ke},q)});Te=B?n.createElement(u.Z,{gutter:B.gutter},Fe):n.createElement("ul",{className:"".concat(w,"-items")},Ue)}else!z&&!Ce&&(Te=Ae(w,ge));var Be=o.position||"bottom",ze=n.useMemo(function(){return{grid:B,itemLayout:t}},[JSON.stringify(B),t]);return n.createElement(C.Provider,{value:ze},n.createElement("div",(0,g.Z)({className:J},Ie),(Be==="top"||Be==="both")&&E,de&&n.createElement("div",{className:"".concat(w,"-header")},de),n.createElement(W.Z,Pe,Te,z),ce&&n.createElement("div",{className:"".concat(w,"-footer")},ce),oe||(Be==="bottom"||Be==="both")&&E))}K.Item=ie;var b=K},54421:function(P,D,e){"use strict";var A=e(38663),g=e.n(A),S=e(57719),x=e.n(S),M=e(13254),n=e(20228),m=e(14781),a=e(6999)}}]);
