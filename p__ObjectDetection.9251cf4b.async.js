(self.webpackChunkpp_labeling_frontend=self.webpackChunkpp_labeling_frontend||[]).push([[408],{91220:function(c,M,n){"use strict";n.d(M,{Z:function(){return v}});var x=n(64254);function v(r,d){var i;if(typeof Symbol=="undefined"||r[Symbol.iterator]==null){if(Array.isArray(r)||(i=(0,x.Z)(r))||d&&r&&typeof r.length=="number"){i&&(r=i);var o=0,C=function(){};return{s:C,n:function(){return o>=r.length?{done:!0}:{done:!1,value:r[o++]}},e:function(l){throw l},f:C}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var m=!0,a=!1,_;return{s:function(){i=r[Symbol.iterator]()},n:function(){var l=i.next();return m=l.done,l},e:function(l){a=!0,_=l},f:function(){try{!m&&i.return!=null&&i.return()}finally{if(a)throw _}}}}},85024:function(c){c.exports={listItem:"listItem___u4Q82",eye:"eye___BwaRm",delete:"delete___31JB_",roundBall:"roundBall___23A7l",popover:"popover___1BNET",annotationId:"annotationId___zAzX4",labelName:"labelName___2ohxn",listItemActive:"listItemActive___2QnA3"}},56159:function(c){c.exports={labelList:"labelList___v7C6K",listHeader:"listHeader___1aY8R",eye:"eye___2MKbp",roundBall:"roundBall___187XH"}},52822:function(c){c.exports={roundBall:"roundBall___1pqu1",popover:"popover___1-PR6"}},5882:function(c){c.exports={listItem:"listItem___vtDXn",eye:"eye___AsLBS",roundBall:"roundBall___1J_R3",popover:"popover___1x-2R",listItemActive:"listItemActive___3FRb7"}},56131:function(c){c.exports={labelList:"labelList___jvD05",listHeader:"listHeader___UM5UF",eye:"eye___II3Po",roundBall:"roundBall___j752J"}},78677:function(c){c.exports={container:"container___G0FNe"}},83930:function(c){c.exports={stage:"stage___3H5QL"}},80961:function(c){c.exports={leftToolbar:"leftToolbar___1xi4t",rightToolbar:"rightToolbar___3dNSB"}},82499:function(c){c.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1SHWL",toolBarButtonContainer:"toolBarButtonContainer___1jKUz",toolBarButton:"toolBarButton___3Ouq1",buttonText:"buttonText___10ls7",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AA28"}},32774:function(c){c.exports={det:"det___2iG9x",mainStage:"mainStage___Qp8In",rightSideBar:"rightSideBar___1NCKK"}},14836:function(c,M,n){"use strict";n.d(M,{Z:function(){return h}});var x=n(54421),v=n(38272),r=n(57663),d=n(71577),i=n(67294),o=n(56159),C=n.n(o),m=n(49111),a=n(19650),_=n(2824),u=n(11849),l=n(85024),t=n.n(l),L=n(63097),e=n(85893),f=function(P){var b=(0,u.Z)({},P.annotation),I=(0,i.useState)(b.invisible),S=(0,_.Z)(I,2),p=S[0],K=S[1];(0,i.useEffect)(function(){K(P.annotation.invisible)},[P.annotation.invisible]);var z=(0,e.jsxs)(v.ZP.Item,{className:"".concat(t().listItem," ").concat(P.active?t().listItemActive:""),unselectable:"on",onClick:function(){P.onClick(b)},children:[(0,e.jsxs)(a.Z,{align:"center",size:5,children:[(0,e.jsx)("a",{className:t().eye,style:{backgroundImage:p?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(){K(!p),P.onAnnotationModify(b)}})," ",(0,e.jsx)("span",{className:t().annotationId,children:b.annotationId}),(0,e.jsx)("span",{className:t().labelName,children:b.label.name}),(0,e.jsx)(L.Z,{color:b.label.color})]}),(0,e.jsx)("a",{className:t().delete,onClick:function(){b.delete=!0,P.onAnnotationDelete(b)}})]});return z},D=f,j=function(P){return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(v.ZP,{className:C().labelList,size:"large",header:(0,e.jsx)("div",{className:C().listHeader,children:"Annotation List"}),bordered:!0,dataSource:P.annotations,renderItem:function(I){var S;return(0,e.jsx)(D,{onClick:P.onAnnotationSelect,annotation:I,active:I.annotationId==((S=P.selectedAnnotation)===null||S===void 0?void 0:S.annotationId),onAnnotationDelete:P.onAnnotationDelete,onAnnotationModify:P.onAnnotationModify})},footer:(0,e.jsx)("div",{children:(0,e.jsx)(d.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){P.onAnnotationSelect(void 0)},block:!0,children:"Add Annotation"})})})})},h=j},63097:function(c,M,n){"use strict";var x=n(20136),v=n(55241),r=n(2824),d=n(67294),i=n(52822),o=n.n(i),C=n(63144),m=n(85893),a=function(u){var l=(0,d.useState)(u.color||"#FFF"),t=(0,r.Z)(l,2),L=t[0],e=t[1];return(0,d.useEffect)(function(){e(u.color||"#FFF")},[u]),u.changeable?(0,m.jsx)(v.Z,{getPopupContainer:function(D){return D.parentElement||document.body},overlayClassName:o().popover,openClassName:o().popoverOpenClassName,placement:"bottom",content:(0,m.jsx)(C.xS,{disableAlpha:!0,color:L,onChange:function(D){e(D.hex)},onChangeComplete:u.onChange}),trigger:"click",children:(0,m.jsx)("div",{className:o().roundBall,style:{backgroundColor:L}})}):(0,m.jsx)("div",{className:o().roundBall,style:{backgroundColor:L}})};M.Z=a},5041:function(c,M,n){"use strict";n.d(M,{Z:function(){return H}});var x=n(54421),v=n(38272),r=n(57663),d=n(71577),i=n(2824),o=n(67294),C=n(56131),m=n.n(C),a=n(49111),_=n(19650),u=n(11849),l=n(5882),t=n.n(l),L=n(63097),e=n(85893),f=function(E){var O=(0,u.Z)({},E.label),Z=(0,o.useState)(O.invisible),y=(0,i.Z)(Z,2),R=y[0],T=y[1],W=(0,e.jsx)(v.ZP.Item,{className:"".concat(t().listItem," ").concat(E.active?t().listItemActive:""),unselectable:"on",onClick:function(){E.onClick(O)},children:(0,e.jsxs)(_.Z,{align:"center",size:5,children:[(0,e.jsx)("a",{className:t().eye,style:{backgroundImage:R?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(){T(!R),E.onLabelModify(O)}})," ",O.name,(0,e.jsx)(L.Z,{color:O.color,changeable:!0,onChange:function(U){O.color=U.hex,E.onLabelModify(O)}})]})});return W},D=f,j=n(71194),h=n(50146),g=n(47673),P=n(24044),b=n(9715),I=n(93766),S=["#FF0000","#008000","#0000FF","#FFFF00","#FFA500","#00FFFF","#8B00FF","#FFC0CB","#7CFC00","#007FFF","#800080","#36BF36","#DAA520","#800000","#008B8B","#B22222","#E6D933","#000080","#FF00FF","#FFFF99","#87CEEB","#5C50E6","#CD5C5C","#20B2AA","#E680FF","#4D1F00","#006374","#B399FF","#8B4513","#BA55D3","#C0C0C0","#808080","#000000"],p=function(E){var O,Z,y=(0,o.useState)(((O=E.defaultLabel)===null||O===void 0?void 0:O.color)||S[E.order||0]),R=(0,i.Z)(y,2),T=R[0],W=R[1];(0,o.useEffect)(function(){var s;W(((s=E.defaultLabel)===null||s===void 0?void 0:s.color)||S[E.order||0])},[E]);var N=I.Z.useForm(),U=(0,i.Z)(N,1),A=U[0];return(0,e.jsx)(h.Z,{title:"Add Label",visible:E.visible,onCancel:E.onCancel,footer:null,children:(0,e.jsxs)(I.Z,{form:A,name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!1,labelname:(Z=E.defaultLabel)===null||Z===void 0?void 0:Z.name},onFinish:function(B){var $={name:B.labelname,color:T};E.onLabelAdd($),A.resetFields()},autoComplete:"off",children:[(0,e.jsx)(I.Z.Item,{label:"Label Name",name:"labelname",rules:[{required:!0,message:"Please input label name!"}],children:(0,e.jsx)(P.Z,{})}),(0,e.jsx)(I.Z.Item,{label:"Select Color",name:"color",children:(0,e.jsx)(L.Z,{color:T,onChange:function(B){W(B.hex)}})}),(0,e.jsx)(I.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,e.jsxs)(_.Z,{children:[(0,e.jsx)(d.Z,{onClick:function(){var B;(B=E.onCancel)===null||B===void 0||B.call(0),A.resetFields()},children:"\u53D6\u6D88"}),(0,e.jsx)(d.Z,{type:"primary",htmlType:"submit",children:"\u786E\u5B9A"})]})})]})})},K=p,z=[{color:"#FF0000",name:"Label 1"},{color:"#008000",name:"Label 2"}],X=function(E){var O=(0,o.useState)(z),Z=(0,i.Z)(O,2),y=Z[0],R=Z[1],T=(0,o.useState)(!1),W=(0,i.Z)(T,2),N=W[0],U=W[1];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(v.ZP,{className:m().labelList,size:"large",header:(0,e.jsx)("div",{className:m().listHeader,children:"Label List"}),footer:(0,e.jsx)("div",{children:(0,e.jsx)(d.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){U(!0)},block:!0,children:"Add Label"})}),bordered:!0,dataSource:y,renderItem:function(s){var B;return(0,e.jsx)(D,{onClick:E.onLabelSelect,label:s,active:s.name==((B=E.selectedLabel)===null||B===void 0?void 0:B.name),onLabelDelete:E.onLabelDelete,onLabelModify:E.onLabelModify})}}),(0,e.jsx)(K,{order:y.length,visible:N,onLabelAdd:function(s){y.push(s),R(y),U(!1)},onCancel:function(){U(!1)}})]})},H=X},8088:function(c,M,n){"use strict";var x=n(67294),v=n(78677),r=n.n(v),d=n(85893),i=function(C){return(0,d.jsx)("div",{className:"".concat(r().container," ").concat(C.className),children:C.children})};M.Z=i},13931:function(c,M,n){"use strict";n.d(M,{Z:function(){return m}});var x=n(91220),v=n(67294),r=n(65031),d=n(85893);function i(a){var _=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return _?{r:parseInt(_[1],16),g:parseInt(_[2],16),b:parseInt(_[3],16)}:null}function o(a,_){if(!(!a||!_)){var u=i(a);if(!!u){var l=void 0,t=[];return _.forEach(function(L){if(!l){l=L;return}t.push((0,d.jsx)(r.Cd,{x:l,y:L,radius:5,fill:a})),l=void 0}),{color:a,points:_,element:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(r.x1,{stroke:a,strokeWidth:2,globalCompositeOperation:"source-over",lineCap:"round",points:_,tension:.01,closed:!0,fill:"rgba(".concat(u.r,", ").concat(u.g,", ").concat(u.b,", 0.5)")}),t]})}}}}function C(a){var _=0,u=(0,x.Z)(a),l;try{for(u.s();!(l=u.n()).done;){var t=l.value;!t||t.annotationId>_&&(_=t.annotationId)}}catch(L){u.e(L)}finally{u.f()}return _}function m(a){var _=function(e,f){var D,j=e.evt.offsetX/f,h=e.evt.offsetY/f;console.log("offsetX: ".concat(e.evt.offsetX,", offsetY: ").concat(e.evt.offsetY,", mouseX: ").concat(j,", mouseY: ").concat(h));var g=o((D=a.currentLabel)===null||D===void 0?void 0:D.color,[j,h]);!g||a.onAnnotationAdd({annotationId:C(a.annotations)+1,label:a.currentLabel,lines:[g]})},u=function(e,f){var D,j;if(!!a.currentAnnotation){var h=e.evt.offsetX/f,g=e.evt.offsetY/f;console.log("offsetX: ".concat(e.evt.offsetX,", offsetY: ").concat(e.evt.offsetY,", mouseX: ").concat(h,", mouseY: ").concat(g));var P=a.currentAnnotation.lines||[],b=o((D=a.currentLabel)===null||D===void 0?void 0:D.color,(j=P[0])===null||j===void 0?void 0:j.points.concat([h,g]));if(!!b){var I={annotationId:a.currentAnnotation.annotationId,label:a.currentAnnotation.label,lines:[b]};a.onAnnotationModify(I)}}},l=function(e,f){console.log(a.currentTool),a.currentTool=="polygon"&&(a.currentAnnotation?u(e,f):_(e,f))},t=function(){a.currentTool=="polygon"};return{onMouseDown:l,onMouseMove:function(){},onMouseUp:t}}},29919:function(c,M,n){"use strict";var x=n(67294),v=n(61541),r=n(85893),d=function(o){return(0,r.jsx)(v.Z,{active:o.active,imgSrc:o.imgSrc||"./pics/buttons/polygon.png",onClick:o.onClick,children:o.children})};M.Z=d},57436:function(c,M,n){"use strict";var x=n(2824),v=n(67294),r=n(65031),d=n(84420),i=n.n(d),o=n(83930),C=n.n(o),m=n(85893),a="./pics/basketball.jpg",_=function(l){var t,L=i()(a),e=(0,x.Z)(L,1),f=e[0],D=(f==null?void 0:f.width)||0,j=(f==null?void 0:f.height)||0;return(0,m.jsxs)(r.Hf,{width:D*l.scale,height:j*l.scale,className:C().stage,children:[(0,m.jsx)(r.mh,{scaleX:l.scale,scaleY:l.scale,children:(0,m.jsx)(r.Ee,{image:f})}),(0,m.jsxs)(r.mh,{scaleX:l.scale,scaleY:l.scale,onMouseDown:function(g){l.onMouseDown&&l.onMouseDown(g,l.scale)},onMouseMove:function(g){l.onMouseMove&&l.onMouseMove(g,l.scale)},onMouseUp:function(g){l.onMouseUp&&l.onMouseUp(g,l.scale)},onContextMenu:function(g){g.evt.preventDefault()},children:[(0,m.jsx)(r.Ee,{image:f}),(t=l.annotations)===null||t===void 0?void 0:t.map(function(h,g){var P;return(P=h.lines)===null||P===void 0?void 0:P.map(function(b,I){return b.element})})]})]})};M.Z=_},44434:function(c,M,n){"use strict";var x=n(67294),v=n(80961),r=n.n(v),d=n(85893),i=function(C){var m=r().leftToolbar;return C.disLoc=="right"&&(m=r().rightToolbar),(0,d.jsx)("div",{className:m,children:C.children})};M.Z=i},61541:function(c,M,n){"use strict";var x=n(49111),v=n(19650),r=n(67294),d=n(82499),i=n.n(d),o=n(85893),C=function(a){return(0,o.jsx)("div",{unselectable:"on",className:"".concat(i().toolBarButtonContainerWrapper," ").concat(a.active&&i().toolBarButtonContainerWrapperActive),onClick:a.onClick,children:(0,o.jsx)(v.Z,{align:"center",className:i().toolBarButtonContainer,size:0,children:(0,o.jsxs)(v.Z,{align:"center",direction:"vertical",className:i().toolBarButton,size:0,children:[(0,o.jsx)("img",{src:a.imgSrc}),(0,o.jsx)("div",{className:i().buttonText,children:a.children})]})})})};M.Z=C},10063:function(c,M,n){"use strict";n.r(M);var x=n(2824),v=n(67294),r=n(32774),d=n.n(r),i=n(8088),o=n(61541),C=n(44434),m=n(5041),a=n(57436),_=n(14836),u=n(29919),l=n(13931),t=n(85893),L=function(){var f=(0,v.useState)(void 0),D=(0,x.Z)(f,2),j=D[0],h=D[1],g=(0,v.useState)({color:"",name:""}),P=(0,x.Z)(g,2),b=P[0],I=P[1],S=(0,v.useState)(),p=(0,x.Z)(S,2),K=p[0],z=p[1],X=(0,v.useState)([]),H=(0,x.Z)(X,2),F=H[0],E=H[1],O=(0,v.useState)(1),Z=(0,x.Z)(O,2),y=Z[0],R=Z[1],T=function(s){z(s),s!=null&&s.label&&I(s.label)},W=function(s){for(var B=[],$=0;$<F.length;$++)F[$].annotationId==s.annotationId?B.push(s):B.push(F[$]);T(s),E(B)},N=(0,l.Z)({currentLabel:b,currentTool:j,annotations:F,currentAnnotation:K,onAnnotationAdd:function(s){E(F.concat([s])),K||T(s)},onAnnotationModify:W}),U=N;return(0,t.jsxs)(i.Z,{className:d().det,children:[(0,t.jsxs)(C.Z,{children:[(0,t.jsx)(u.Z,{active:j=="polygon",onClick:function(){h("polygon"),T(void 0)},children:"Polygon"}),(0,t.jsx)(o.Z,{imgSrc:"./pics/buttons/zoom_in.png",onClick:function(){R(y+.1)},children:"Zoom in"}),(0,t.jsx)(o.Z,{imgSrc:"./pics/buttons/zoom_out.png",onClick:function(){R(y-.1)},children:"Zoom out"}),(0,t.jsx)(o.Z,{imgSrc:"./pics/buttons/save.png",children:"Save"}),(0,t.jsx)(o.Z,{imgSrc:"./pics/buttons/move.png",children:"Move"}),(0,t.jsx)(o.Z,{imgSrc:"./pics/buttons/export.png",children:"Export"}),(0,t.jsx)(o.Z,{imgSrc:"./pics/buttons/data_division.png",children:"Divide Data"}),(0,t.jsx)(o.Z,{imgSrc:"./pics/buttons/prev.png",children:"Undo"}),(0,t.jsx)(o.Z,{imgSrc:"./pics/buttons/next.png",children:"Redo"}),(0,t.jsx)(o.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:"Clear Mark"})]}),(0,t.jsx)("div",{className:d().mainStage,children:(0,t.jsx)(a.Z,{scale:y,annotations:F,onMouseDown:U.onMouseDown,onMouseMove:U.onMouseMove,onMouseUp:U.onMouseUp})}),(0,t.jsxs)("div",{className:d().rightSideBar,children:[(0,t.jsx)(m.Z,{selectedLabel:b,onLabelSelect:function(s){I(s),T(void 0)},onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}}),(0,t.jsx)(_.Z,{selectedAnnotation:K,annotations:F,onAnnotationSelect:function(s){s!=null&&s.delete||T(s)},onAnnotationAdd:function(){},onAnnotationModify:function(){},onAnnotationDelete:function(s){E(F.filter(function(B){return B.annotationId!=s.annotationId})),T(void 0)}})]})]})};M.default=L}}]);
