(self.webpackChunkpp_labeling_frontend=self.webpackChunkpp_labeling_frontend||[]).push([[540],{26647:function(A){A.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1FTWb",toolBarButtonContainer:"toolBarButtonContainer___1Vahn",toolBarButton:"toolBarButton___3mR2H",buttonText:"buttonText___Y0WDm",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3lRZ8",popover:"popover___3zzu2"}},54777:function(A){A.exports={segment:"segment___1YMcl",mainStage:"mainStage___2otee",rightSideBar:"rightSideBar___2X7jK",determinOutline:"determinOutline___2ls57"}},49911:function(A,O,i){"use strict";i.r(O),i.d(O,{default:function(){return dn}});var xn=i(57663),M=i(71577),S=i(2824),m=i(67294),X=i(54777),y=i.n(X),H=i(8088),f=i(61541),K=i(44434),R=i(58967),bn=i(20136),V=i(55241),Cn=i(77883),G=i(70507),J=i(26647),Q=i.n(J),n=i(85893),B=1,L=100,w=10;function j(o){return o?o<=B?B:o>=L?L:o:w}var q=function(t){var c=(0,m.useState)(j(t.size)),a=(0,S.Z)(c,2),s=a[0],d=a[1];return(0,m.useEffect)(function(){d(j(t.size))},[t.size]),(0,n.jsxs)(V.Z,{overlayClassName:Q().popover,placement:"right",content:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(M.Z,{type:"text",onClick:function(){var r,l=j(s-1);d(l),(r=t.onChange)===null||r===void 0||r.call(0,l)},children:"-"}),(0,n.jsx)(G.Z,{min:B,max:L,value:s,onChange:function(r){var l;(l=t.onChange)===null||l===void 0||l.call(0,r)},controls:!1,style:{textAlign:"center"}}),(0,n.jsx)(M.Z,{type:"text",onClick:function(){var r,l=j(s+1);d(l),(r=t.onChange)===null||r===void 0||r.call(0,l)},children:"+"})]}),trigger:t.active?"hover":"click",children:[" ",(0,n.jsx)(f.Z,{active:t.active,imgSrc:t.imgSrc||"./pics/buttons/brush.png",onClick:t.onClick,children:t.children||"Brush"})]})},z=q,_=i(5041),nn=i(57436),tn=i(14836),on=function(t){return(0,n.jsx)(f.Z,{active:t.active,imgSrc:t.imgSrc||"./pics/buttons/polygon.png",onClick:t.onClick,children:t.children})},en=on,an=i(43801),rn=i(91220),N=i(65031);function ln(o){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function W(o,t){if(!(!o||!t)){var c=ln(o);if(!!c){var a=void 0,s=[];return t.forEach(function(d){if(!a){a=d;return}s.push((0,n.jsx)(N.Cd,{x:a,y:d,radius:5,fill:o})),a=void 0}),{color:o,points:t,element:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N.x1,{stroke:o,strokeWidth:2,globalCompositeOperation:"source-over",lineCap:"round",points:t,tension:.01,closed:!0,fill:"rgba(".concat(c.r,", ").concat(c.g,", ").concat(c.b,", 0.5)")}),s]})}}}}function un(o){var t=0,c=(0,rn.Z)(o),a;try{for(c.s();!(a=c.n()).done;){var s=a.value;!s||s.annotationId>t&&(t=s.annotationId)}}catch(d){c.e(d)}finally{c.f()}return t}function sn(o){var t=function(v){var r,l=W((r=o.currentLabel)===null||r===void 0?void 0:r.color,[v.evt.offsetX,v.evt.offsetY]);!l||o.onAnnotationAdd({annotationId:un(o.annotations)+1,label:o.currentLabel,lines:[l]})},c=function(v){var r,l;if(!!o.currentAnnotation){var I=o.currentAnnotation.lines||[],b=W((r=o.currentLabel)===null||r===void 0?void 0:r.color,(l=I[0])===null||l===void 0?void 0:l.points.concat([v.evt.offsetX,v.evt.offsetY]));if(!!b){var x={annotationId:o.currentAnnotation.annotationId,label:o.currentAnnotation.label,lines:[b]};o.onAnnotationModify(x)}}},a=function(v){console.log(o.currentTool),o.currentTool=="polygon"&&(o.currentAnnotation?c(v):t(v))},s=function(){o.currentTool=="polygon"};return{onMouseDown:a,onMouseMove:function(){},onMouseUp:s}}var cn=function(){var t=(0,m.useState)(void 0),c=(0,S.Z)(t,2),a=c[0],s=c[1],d=(0,m.useState)({color:"",name:""}),v=(0,S.Z)(d,2),r=v[0],l=v[1],I=(0,m.useState)(),b=(0,S.Z)(I,2),x=b[0],vn=b[1],fn=(0,m.useState)([]),$=(0,S.Z)(fn,2),g=$[0],P=$[1],gn=(0,m.useState)(10),k=(0,S.Z)(gn,2),Z=k[0],U=k[1],hn=(0,m.useState)(1),E=(0,S.Z)(hn,2),T=E[0],F=E[1],h=function(e){vn(e),e!=null&&e.label&&l(e.label)},Y=function(e){for(var C=[],p=0;p<g.length;p++)g[p].annotationId==e.annotationId?C.push(e):C.push(g[p]);h(e),P(C)},mn=(0,an.Z)({currentLabel:r,brushSize:Z,currentTool:a,annotations:g,currentAnnotation:x,onAnnotationAdd:function(e){P(g.concat([e])),x||h(e)},onAnnotationModify:Y}),Sn=sn({currentLabel:r,brushSize:Z,currentTool:a,annotations:g,currentAnnotation:x,onAnnotationAdd:function(e){P(g.concat([e])),x||h(e)},onAnnotationModify:Y}),D=a=="polygon"?Sn:mn;return(0,n.jsxs)(H.Z,{className:y().segment,children:[(0,n.jsxs)(K.Z,{children:[(0,n.jsx)(f.Z,{imgSrc:"./pics/buttons/intelligent_interaction.png",children:"Intelligent Interaction"}),(0,n.jsx)(en,{active:a=="polygon",onClick:function(){s("polygon"),h(void 0)},children:"Polygon"}),(0,n.jsx)(R.Z,{size:Z,active:a=="brush",onClick:function(){a!="rubber"&&a!="brush"&&h(void 0),s("brush")},onChange:function(e){U(e)},children:"Brush"}),(0,n.jsx)(R.Z,{size:Z,active:a=="rubber",onClick:function(){a!="rubber"&&a!="brush"&&h(void 0),s("rubber")},onChange:function(e){U(e)},imgSrc:"./pics/buttons/rubber.png",children:"Rubber"}),(0,n.jsx)(f.Z,{imgSrc:"./pics/buttons/zoom_in.png",onClick:function(){s(void 0),F(T+.1)},children:"Zoom in"}),(0,n.jsx)(f.Z,{imgSrc:"./pics/buttons/zoom_out.png",onClick:function(){s(void 0),F(T-.1)},children:"Zoom out"}),(0,n.jsx)(f.Z,{imgSrc:"./pics/buttons/save.png",children:"Save"}),(0,n.jsx)(f.Z,{imgSrc:"./pics/buttons/move.png",children:"Move"}),(0,n.jsx)(f.Z,{imgSrc:"./pics/buttons/export.png",children:"Export"}),(0,n.jsx)(f.Z,{imgSrc:"./pics/buttons/data_division.png",children:"Divide Data"}),(0,n.jsx)(f.Z,{imgSrc:"./pics/buttons/prev.png",children:"Undo"}),(0,n.jsx)(f.Z,{imgSrc:"./pics/buttons/next.png",children:"Redo"}),(0,n.jsx)(f.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:"Clear Mark"}),(0,n.jsx)(z,{imgSrc:"./pics/buttons/threshold.png",children:"Segment Threshold"}),(0,n.jsx)(z,{imgSrc:"./pics/buttons/alpha.png",children:"Diaphaneity"}),(0,n.jsx)(z,{imgSrc:"./pics/buttons/radius.png",children:"Visual Radius"})]}),(0,n.jsx)("div",{className:y().mainStage,children:(0,n.jsx)(nn.Z,{scale:T,annotations:g,onMouseDown:D.onMouseDown,onMouseMove:D.onMouseMove,onMouseUp:D.onMouseUp})}),(0,n.jsxs)("div",{className:y().rightSideBar,children:[(0,n.jsx)("div",{className:y().determinOutline,children:(0,n.jsx)(M.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",block:!0,onClick:function(){h(void 0)},children:"Determine Outline"})}),(0,n.jsx)(_.Z,{selectedLabel:r,onLabelSelect:function(e){l(e),h(void 0)},onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}}),(0,n.jsx)(tn.Z,{selectedAnnotation:x,annotations:g,onAnnotationSelect:function(e){e!=null&&e.delete||h(e)},onAnnotationAdd:function(){},onAnnotationModify:function(){},onAnnotationDelete:function(e){P(g.filter(function(C){return C.annotationId!=e.annotationId})),h(void 0)}})]})]})},dn=cn}}]);
