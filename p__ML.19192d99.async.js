(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[580],{91220:function(p,P,e){"use strict";e.d(P,{Z:function(){return f}});var Z=e(64254);function f(d,m){var o;if(typeof Symbol=="undefined"||d[Symbol.iterator]==null){if(Array.isArray(d)||(o=(0,Z.Z)(d))||m&&d&&typeof d.length=="number"){o&&(d=o);var _=0,u=function(){};return{s:u,n:function(){return _>=d.length?{done:!0}:{done:!1,value:d[_++]}},e:function(h){throw h},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var v=!0,y=!1,r;return{s:function(){o=d[Symbol.iterator]()},n:function(){var h=o.next();return v=h.done,h},e:function(h){y=!0,r=h},f:function(){try{!v&&o.return!=null&&o.return()}finally{if(y)throw r}}}}},41435:function(p,P,e){"use strict";e.d(P,{Z:function(){return _}});var Z=e(94663),f=e(80112);function d(u){return Function.toString.call(u).indexOf("[native code]")!==-1}var m=e(18597);function o(u,v,y){return(0,m.Z)()?o=Reflect.construct:o=function(s,h,c){var C=[null];C.push.apply(C,h);var U=Function.bind.apply(s,C),j=new U;return c&&(0,f.Z)(j,c.prototype),j},o.apply(null,arguments)}function _(u){var v=typeof Map=="function"?new Map:void 0;return _=function(r){if(r===null||!d(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof v!="undefined"){if(v.has(r))return v.get(r);v.set(r,s)}function s(){return o(r,arguments,(0,Z.Z)(this).constructor)}return s.prototype=Object.create(r.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),(0,f.Z)(s,r)},_(u)}},38619:function(p){p.exports={modal:"modal___2aO7U"}},41180:function(p){p.exports={ppcard:"ppcard___27hGd",title:"title___22R8f"}},48627:function(p){p.exports={container:"container___2RXc3"}},34915:function(p){p.exports={modal:"modal___37D4e"}},31982:function(p,P,e){"use strict";var Z=e(89032),f=e(15746),d=e(8870),m=e(13062),o=e(71230),_=e(11700),u=e(67294),v=e(41180),y=e.n(v),r=e(85893),s=function(c){return(0,r.jsxs)("div",{className:y().ppcard,style:c.style,hidden:c.hidden,children:[(0,r.jsx)(o.Z,{className:y().titleRow,style:{display:c.title?void 0:"none"},children:(0,r.jsx)(_.Z,{className:y().title,children:c.title})}),(0,r.jsx)(o.Z,{style:{marginTop:26},children:(0,r.jsx)(f.Z,{span:24,style:(0,d.Z)({paddingLeft:30,paddingRight:30,textAlign:"center"},c.innerStyle),children:c.children})})]})};P.Z=s},11428:function(p,P,e){"use strict";var Z=e(67294),f=e(48627),d=e.n(f),m=e(85893),o=function(u){return(0,m.jsx)("div",{className:"".concat(d().container),style:{backgroundImage:"url(./pics/background.png)"},children:u.children})};P.Z=o},58089:function(p,P,e){"use strict";var Z=e(71194),f=e(50146),d=e(49111),m=e(19650),o=e(47673),_=e(24044),u=e(34792),v=e(48086),y=e(57663),r=e(71577),s=e(9715),h=e(93766),c=e(2824),C=e(67294),U=e(48971),j=e(34915),z=e.n(j),R=e(50501),E=e(85893),A=function(F){var B=(0,U.YB)(),V=(0,C.useState)(!1),K=(0,c.Z)(V,2),G=K[0],b=K[1],n=(0,C.useState)(!1),$=(0,c.Z)(n,2),Y=$[0],L=$[1],H=B.formatMessage({id:"component.PPCreater.cancel"}),Q=h.Z.useForm(),X=(0,c.Z)(Q,1),O=X[0];return(0,E.jsxs)("span",{hidden:F.visible==!1,children:[(0,E.jsx)(r.Z,{type:"primary",onClick:function(){return L(!0)},children:"Export Dataset"}),(0,E.jsx)(f.Z,{className:z().modal,title:B.formatMessage({id:"component.PPExportModal.title"}),visible:Y,onCancel:function(){return L(!1)},footer:null,children:(0,E.jsxs)(h.Z,{form:O,name:"basic",labelCol:{span:6},wrapperCol:{span:16},initialValues:{remember:!1},onFinish:function(S){var t=S.path;if(!t){v.default.error(B.formatMessage({id:"component.PPExportModal.pathNotNull"}));return}b(!0),(0,R.Tr)(F.project.projectId,t).then(function(){v.default.success(B.formatMessage({id:"component.PPExportModal.exportSuccess"})),L(!1)}).finally(function(){b(!1)})},autoComplete:"off",children:[(0,E.jsx)(h.Z.Item,{label:B.formatMessage({id:"component.PPExportModal.path"}),name:"path",children:(0,E.jsx)(_.Z,{})}),(0,E.jsx)(h.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,E.jsxs)(m.Z,{children:[(0,E.jsx)(r.Z,{onClick:function(){L(!1),O.resetFields()},children:H}),(0,E.jsx)(r.Z,{type:"primary",htmlType:"submit",loading:G,children:B.formatMessage({id:"component.PPExportModal.export"})})]})})]})})]})};P.Z=A},65732:function(p,P,e){"use strict";e.r(P),e.d(P,{default:function(){return Q}});var Z=e(47673),f=e(24044),d=e(57663),m=e(71577),o=e(8870),_=e(34792),u=e(48086),v=e(3182),y=e(9715),r=e(93766),s=e(2824),h=e(43358),c=e(34041),C=e(94043),U=e.n(C),j=e(67294),z=e(11428),R=e(31982),E=e(37071),A=e(50501),re=e(71194),F=e(50146),B=e(49111),V=e(19650),K=e(48971),G=e(38619),b=e.n(G),n=e(85893),$=function(O){var D=(0,K.YB)(),S=(0,j.useState)(!1),t=(0,s.Z)(S,2),W=t[0],M=t[1],N=D.formatMessage({id:"component.PPCreater.cancel"}),J=r.Z.useForm(),k=(0,s.Z)(J,1),T=k[0];function w(){var i=O.project.otherSettings;return i!=null&&i.perviousModel&&i!==null&&i!==void 0&&i.models&&i!==null&&i!==void 0&&i.models[i==null?void 0:i.perviousModel]?!0:(u.default.error("Please set and save ML settings first!"),!1)}return(0,n.jsxs)("span",{hidden:O.visible==!1,children:[(0,n.jsx)(m.Z,{type:"primary",onClick:function(){w()&&M(!0)},children:"Train Model"}),(0,n.jsx)(F.Z,{className:b().modal,title:"Train Model",visible:W,onCancel:function(){return M(!1)},footer:null,children:(0,n.jsxs)(r.Z,{form:T,name:"basic",labelCol:{span:6},wrapperCol:{span:16},initialValues:{remember:!1},onFinish:function(q){var l=q.path;O.trainModel(l),M(!1)},autoComplete:"off",children:[(0,n.jsx)(r.Z.Item,{label:"Dataset Path",name:"path",rules:[{required:!0,message:"Please input dataset path"}],children:(0,n.jsx)(f.Z,{})}),(0,n.jsx)(r.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,n.jsxs)(V.Z,{children:[(0,n.jsx)(m.Z,{onClick:function(){M(!1),T.resetFields()},children:N}),(0,n.jsx)(m.Z,{type:"primary",htmlType:"submit",children:"Train"})]})})]})})]})},Y=$,L=e(58089),H=function(){var O,D,S,t=(0,A.Gd)(j.useState),W=E.Z.getQueryVariable("projectId"),M=(0,A.RZ)(j.useState),N=c.Z.Option,J=r.Z.useForm(),k=(0,s.Z)(J,1),T=k[0];(0,j.useEffect)(function(){function l(){return a.apply(this,arguments)}function a(){return a=(0,v.Z)(U().mark(function x(){var ee,te,I;return U().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,(0,A.bo)();case 2:if(g.sent){g.next=4;break}return g.abrupt("return");case 4:if(t.getAll(),W){g.next=8;break}return u.default.error("Machine Learning settings are specific to every project. Please choose a project first."),g.abrupt("return");case 8:return g.next=10,t.getCurr(W);case 10:I=g.sent,I!=null&&(ee=I.otherSettings)!==null&&ee!==void 0&&ee.mlBackendUrl&&M.setMlBackendUrl(I==null||(te=I.otherSettings)===null||te===void 0?void 0:te.mlBackendUrl);case 12:case"end":return g.stop()}},x)})),a.apply(this,arguments)}l()},[]),(0,j.useEffect)(function(){if(!!t.curr){var l=t.curr.otherSettings?t.curr.otherSettings:{},a=l.models&&l.perviousModel?l.models[l.perviousModel]:{},x={mlBackendUrl:l.mlBackendUrl,modelName:l.perviousModel,trainBatchSize:a.trainBatchSize};T.setFieldsValue(x),l!=null&&l.mlBackendUrl&&M.setMlBackendUrl(l.mlBackendUrl)}},[t.curr]);function w(){if(!t.curr){u.default.error("Please choose a project first!");return}var l=T.getFieldValue("mlBackendUrl");M.setMlBackendUrl(l);var a=(0,o.Z)((0,o.Z)({},t.curr.otherSettings),{},{mlBackendUrl:l});t.update(t.curr.projectId,{otherSettings:a})}function i(l){var a;if(!t.curr){u.default.error("Please select model first!");return}var x=(a=t.curr.otherSettings)!==null&&a!==void 0&&a.models?t.curr.otherSettings.models:{};t.curr.otherSettings||(t.curr.otherSettings={}),x[l.modelName]={trainBatchSize:l.trainBatchSize},t.curr.otherSettings.mlBackendUrl=T.getFieldValue("mlBackendUrl"),t.curr.otherSettings.perviousModel=l.modelName,t.curr.otherSettings.models=x,t.update(t.curr.projectId,{otherSettings:t.curr.otherSettings}),t.getCurr(W)}function q(l){var a=t.curr.otherSettings;M.train(a.perviousModel,l,a.models[a.perviousModel])}return(0,n.jsxs)(z.Z,{children:[(0,n.jsxs)(R.Z,{children:["Project:",(0,n.jsx)(c.Z,{placeholder:"Select a project",onChange:function(a){return t.getCurr(a)},value:(O=t.curr)===null||O===void 0?void 0:O.projectId,children:(D=t.all)===null||D===void 0?void 0:D.map(function(l){return(0,n.jsx)(N,{value:l.projectId,children:l.name})})})]}),(0,n.jsxs)(R.Z,{hidden:t.curr==null,children:[(0,n.jsx)(Y,{model:M,project:t.curr,trainModel:q}),(0,n.jsx)(L.Z,{project:t.curr}),(0,n.jsx)(m.Z,{type:"primary",onClick:function(){var a,x;if(!((a=t.curr)!==null&&a!==void 0&&(x=a.otherSettings)!==null&&x!==void 0&&x.mlBackendUrl)){u.default.error("Set backend url first");return}window.open("".concat(t.curr.otherSettings.mlBackendUrl.replace("model","visualdl")),"_blank")},children:"Progress"}),(0,n.jsx)(m.Z,{type:"primary",children:"Run Inference"})]}),(0,n.jsx)(R.Z,{children:(0,n.jsxs)(r.Z,{form:T,layout:"horizontal",size:"large",style:{marginTop:"5.69rem"},onFinish:function(a){console.log(a),i(a)},hidden:t.curr==null,children:[(0,n.jsxs)(f.Z.Group,{compact:!0,children:[(0,n.jsx)(r.Z.Item,{name:"mlBackendUrl",rules:[{required:!0,message:"Please input ml backend url"}],style:{fontSize:"1.5rem"},children:(0,n.jsx)(f.Z,{allowClear:!0,addonBefore:"ML Backend URL ",style:{textAlign:"left"}})}),(0,n.jsx)(m.Z,{type:"primary",onClick:w,children:"Set"})]}),(0,n.jsx)(r.Z.Item,{name:"modelName",label:"Model",labelCol:{span:6},wrapperCol:{span:16},rules:[{required:!0,message:"Please select a model"}],style:{fontSize:"1.5rem"},children:(0,n.jsx)(c.Z,{placeholder:"Select a model",children:(S=M.all)===null||S===void 0?void 0:S.map(function(l){return(0,n.jsx)(N,{value:l.name,children:l.name})})})}),(0,n.jsx)(r.Z.Item,{name:"trainBatchSize",label:"Training Batch Size",labelCol:{span:6},wrapperCol:{span:16},style:{fontSize:"1.5rem"},children:(0,n.jsx)(f.Z,{placeholder:"Training batch size"})}),(0,n.jsx)(r.Z.Item,{wrapperCol:{span:16,offset:6},children:(0,n.jsx)(m.Z,{htmlType:"submit",type:"primary",style:{height:"2.5rem",width:"48%"},block:!0,children:"Save"})})]})})]})},Q=H}}]);
