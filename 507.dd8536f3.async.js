(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[507],{52822:function(u){u.exports={roundBall:"roundBall___1pqu1",popover:"popover___1-PR6"}},5882:function(u){u.exports={listItem:"listItem___vtDXn",eye:"eye___AsLBS",roundBall:"roundBall___1J_R3",popover:"popover___1x-2R",delete:"delete___WHPf2",listItemActive:"listItemActive___3FRb7"}},56131:function(u){u.exports={labelList:"labelList___jvD05",listHeader:"listHeader___UM5UF",eye:"eye___II3Po",roundBall:"roundBall___j752J"}},78677:function(u){u.exports={container:"container___G0FNe"}},80961:function(u){u.exports={leftToolbar:"leftToolbar___1xi4t",rightToolbar:"rightToolbar___3dNSB"}},82499:function(u){u.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1SHWL",toolBarButtonContainer:"toolBarButtonContainer___1jKUz",toolBarButton:"toolBarButton___3Ouq1",buttonText:"buttonText___10ls7",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AA28"}},63097:function(u,E,n){"use strict";var K=n(20136),_=n(55241),v=n(2824),s=n(67294),i=n(52822),l=n.n(i),a=n(63144),f=n(85893),F=function(L){var o=(0,s.useState)(L.color||"#FFF"),y=(0,v.Z)(o,2),T=y[0],e=y[1];return(0,s.useEffect)(function(){e(L.color||"#FFF")},[L]),L.changeable?(0,f.jsx)(_.Z,{getPopupContainer:function(I){return I.parentElement||document.body},overlayClassName:l().popover,openClassName:l().popoverOpenClassName,placement:"bottom",content:(0,f.jsx)(a.xS,{disableAlpha:!0,color:T,onChange:function(I){e(I.hex)},onChangeComplete:L.onChange}),trigger:"click",children:(0,f.jsx)("div",{className:l().roundBall,style:{backgroundColor:T}})}):(0,f.jsx)("div",{className:l().roundBall,style:{backgroundColor:T}})};E.Z=F},5041:function(u,E,n){"use strict";n.d(E,{Z:function(){return J}});var K=n(54421),_=n(38272),v=n(57663),s=n(71577),i=n(2824),l=n(67294),a=n(56131),f=n.n(a),F=n(49111),Y=n(19650),L=n(8870),o=n(5882),y=n.n(o),T=n(63097),e=n(85893),N=function(t){var r=(0,L.Z)({},t.label),m=(0,l.useState)(r.invisible),h=(0,i.Z)(m,2),x=h[0],W=h[1],A=(0,l.useState)(0),j=(0,i.Z)(A,2),b=j[0],D=j[1],C=t.hideEye?" ":(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("a",{className:y().eye,style:{backgroundImage:x?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(g){g.stopPropagation(),W(!x),t.onLabelModify(r)}})," "]}),P=t.hideColorPicker?(0,e.jsx)(e.Fragment,{}):(0,e.jsx)(T.Z,{color:r.color,changeable:!0,onChange:function(g){r.color=g.hex,t.onLabelModify(r)}}),U=(0,e.jsxs)(_.ZP.Item,{className:"".concat(y().listItem," ").concat(t.active?y().listItemActive:""),unselectable:"on",onClick:function(){t.onClick(r)},children:[(0,e.jsxs)(Y.Z,{align:"center",size:5,children:[C,r.name,P]}),(0,e.jsx)("a",{className:y().delete,onClick:function(g){g.stopPropagation();var Z=new Date().getTime();Z-b<300||(D(Z),t.onLabelDelete(r))}})]});return U},I=N,Q=n(71194),k=n(50146),p=n(47673),X=n(24044),q=n(9715),S=n(93766),$=n(48971),H=["#FF0000","#008000","#0000FF","#FFFF00","#FFA500","#00FFFF","#8B00FF","#FFC0CB","#7CFC00","#007FFF","#800080","#36BF36","#DAA520","#800000","#008B8B","#B22222","#E6D933","#000080","#FF00FF","#FFFF99","#87CEEB","#5C50E6","#CD5C5C","#20B2AA","#E680FF","#4D1F00","#006374","#B399FF","#8B4513","#BA55D3","#C0C0C0","#808080","#000000"],w=function(t){var r,m,h=(0,$.YB)(),x=h.formatMessage({id:"component.PPAddLabelModal.selectColor"}),W=h.formatMessage({id:"component.PPAddLabelModal.addLabel"}),A=h.formatMessage({id:"component.PPAddLabelModal.labelName"}),j=h.formatMessage({id:"component.PPCreater.cancel"}),b=h.formatMessage({id:"component.PPSegMode.ok"}),D=(0,l.useState)(((r=t.defaultLabel)===null||r===void 0?void 0:r.color)||H[t.order||0]),C=(0,i.Z)(D,2),P=C[0],U=C[1];(0,l.useEffect)(function(){var R;U(((R=t.defaultLabel)===null||R===void 0?void 0:R.color)||H[t.order||0])},[t]);var B=t.hideColorPicker?(0,e.jsx)(e.Fragment,{}):(0,e.jsx)(S.Z.Item,{label:x,name:"color",children:(0,e.jsx)(T.Z,{color:P,onChange:function(O){U(O.hex)}})}),g=S.Z.useForm(),Z=(0,i.Z)(g,1),z=Z[0];return(0,e.jsx)(k.Z,{title:W,visible:t.visible,onCancel:t.onCancel,footer:null,children:(0,e.jsxs)(S.Z,{form:z,name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!1,labelname:(m=t.defaultLabel)===null||m===void 0?void 0:m.name},onFinish:function(O){var d={name:O.labelname,color:P};t.onLabelAdd(d),z.resetFields()},autoComplete:"off",children:[(0,e.jsx)(S.Z.Item,{label:A,name:"labelname",rules:[{required:!0,message:"Please input label name!"}],children:(0,e.jsx)(X.Z,{})}),B,(0,e.jsx)(S.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,e.jsxs)(Y.Z,{children:[(0,e.jsx)(s.Z,{onClick:function(){var O;(O=t.onCancel)===null||O===void 0||O.call(0),z.resetFields()},children:j}),(0,e.jsx)(s.Z,{type:"primary",htmlType:"submit",children:b})]})})]})})},ee=w,V=function(t){var r,m=(0,$.YB)(),h=m.formatMessage({id:"component.PPLabelList.addLabel"}),x=m.formatMessage({id:"component.PPLabelList.labelList"}),W=(0,l.useState)(!1),A=(0,i.Z)(W,2),j=A[0],b=A[1];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(_.ZP,{className:f().labelList,size:"large",header:(0,e.jsx)("div",{className:f().listHeader,children:x}),footer:(0,e.jsx)("div",{children:(0,e.jsx)(s.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){b(!0)},block:!0,children:h})}),bordered:!0,dataSource:t.labels,renderItem:function(C){var P;return(0,e.jsx)(I,{hideColorPicker:t.hideColorPicker,hideEye:t.hideEye,onClick:t.onLabelSelect,label:C,active:(P=t.activeIds)===null||P===void 0?void 0:P.has(C.labelId),onLabelDelete:t.onLabelDelete,onLabelModify:t.onLabelModify})}}),(0,e.jsx)(ee,{hideColorPicker:t.hideColorPicker,order:(r=t.labels)===null||r===void 0?void 0:r.length,visible:j,onLabelAdd:function(C){t.onLabelAdd(C),b(!1)},onCancel:function(){b(!1)}})]})},J=V},8088:function(u,E,n){"use strict";var K=n(67294),_=n(78677),v=n.n(_),s=n(85893),i=function(a){return(0,s.jsx)("div",{className:"".concat(v().container," ").concat(a.className),children:a.children})};E.Z=i},57436:function(u,E,n){"use strict";var K=n(91220),_=n(2824),v=n(67294),s=n(65031),i=n(84420),l=n.n(i),a=n(85893),f="./pics/32_23.jpg";function F(L){switch(L){case"mover":return"move";case"rectangle":case"polygon":return"crosshair";default:return"default"}}var Y=function(o){var y=l()(o.imgSrc||f),T=(0,_.Z)(y,1),e=T[0],N=(e==null?void 0:e.width)||0,I=(e==null?void 0:e.height)||0,Q=o.transparency==null?0:o.transparency*.01;console.log("imageWidth,imageHeight: ",N,I);var k=(0,v.useState)(0),p=(0,_.Z)(k,2),X=p[0],q=p[1],S=(0,v.useState)(0),$=(0,_.Z)(S,2),H=$[0],w=$[1],ee=(0,v.useState)({x:0,y:0}),V=(0,_.Z)(ee,2),J=V[0],G=V[1],t=(0,v.useRef)(null),r=(0,v.useRef)(null),m=(0,v.useRef)(null);function h(){var d=document.getElementById("dr");d&&(q(d.clientWidth),w(d.clientHeight))}(0,v.useEffect)(function(){window.removeEventListener("resize",h),window.addEventListener("resize",h);var d=document.getElementById("dr");d&&(q(d.clientWidth),w(d.clientHeight))},[]),(0,v.useEffect)(function(){!t.current||(t.current.container().style.cursor=F(o.currentTool))},[o.currentTool]);var x=function(c){return{e:c,mouseX:(c.evt.offsetX-J.x-X/2)/o.scale+N/2,mouseY:(c.evt.offsetY-J.y-H/2)/o.scale+I/2,canvasRef:m,layerRef:r}},W=function(c){var M;(M=o.drawTool)===null||M===void 0||M.onMouseDown(x(c))},A=function(c){var M;(M=o.drawTool)===null||M===void 0||M.onMouseMove(x(c))},j=function(c){var M;(M=o.drawTool)===null||M===void 0||M.onMouseUp(x(c))},b=function(c){c.cancelBubble=!0,c.evt.preventDefault()},D=[];if(o.annotations){var C,P;console.log("PPStage rendering annotations:",o.annotations);var U={onDrag:o.onAnnotationModify,onDragEnd:o.onAnnotationModifyComplete,scale:o.scale,currentTool:o.currentTool,onSelect:o.setCurrentAnnotation,stageRef:t,currentAnnotation:o.currentAnnotation,transparency:Q,canvasRef:m},B=(C=m.current)===null||C===void 0?void 0:C.getContext("2d");B&&B.clearRect(0,0,B.canvas.width,B.canvas.height);var g=(0,K.Z)(o.annotations),Z;try{for(g.s();!(Z=g.n()).done;){var z=Z.value;if(!!z){U.annotation=z;var R=o.drawTool.drawAnnotation(U);D.push(R)}}}catch(d){g.e(d)}finally{g.f()}(P=r.current)===null||P===void 0||P.batchDraw()}var O=o.currentTool=="mover";return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("canvas",{style:{display:"none"},id:"virtualCanvas",width:e==null?void 0:e.width,height:e==null?void 0:e.height}),(0,a.jsx)("canvas",{style:{display:"none"},id:"singleLineCanvas",width:e==null?void 0:e.width,height:e==null?void 0:e.height}),(0,a.jsx)("canvas",{style:{display:"none"},id:"canvasId",ref:m,width:e==null?void 0:e.width,height:e==null?void 0:e.height}),(0,a.jsx)("svg",{width:"0",height:"0",style:{position:"absolute",zIndex:"-1"},children:(0,a.jsx)("defs",{children:(0,a.jsx)("filter",{id:"remove-alpha",x:"0",y:"0",width:"100%",height:"100%",children:(0,a.jsx)("feComponentTransfer",{children:(0,a.jsx)("feFuncA",{type:"discrete",tableValues:"0 1"})})})})}),(0,a.jsxs)(s.Hf,{width:X,height:H,offsetX:-X/2,offsetY:-H/2,className:"stage",ref:t,draggable:O,onDragMove:function(c){o.currentTool=="mover"},onDragEnd:function(c){o.currentTool=="mover"&&(console.log("dragEndPosX,Y: (".concat(c.target.x(),",").concat(c.target.y(),")")),G({x:c.target.x(),y:c.target.y()}))},children:[(0,a.jsx)(s.mh,{onMouseDown:W,onMouseMove:A,onMouseUp:j,onContextMenu:b,scaleX:o.scale,scaleY:o.scale,draggable:!1,children:(0,a.jsx)(s.Ee,{name:"baseImage",draggable:!1,image:e,x:-((e==null?void 0:e.width)||0)/2,y:-((e==null?void 0:e.height)||0)/2})}),(0,a.jsxs)(s.mh,{ref:r,name:"annotation",scaleX:o.scale,scaleY:o.scale,onMouseDown:W,onMouseMove:A,onMouseUp:j,onContextMenu:b,opacity:Q,children:[D,(0,a.jsx)(s.Ee,{x:-((e==null?void 0:e.width)||0)/2,y:-((e==null?void 0:e.height)||0)/2,image:m.current||void 0})]})]})]})};E.Z=Y},44434:function(u,E,n){"use strict";var K=n(67294),_=n(80961),v=n.n(_),s=n(85893),i=function(a){var f=v().leftToolbar;return a.disLoc=="right"&&(f=v().rightToolbar),(0,s.jsx)("div",{className:f,children:a.children})};E.Z=i},61541:function(u,E,n){"use strict";var K=n(49111),_=n(19650),v=n(67294),s=n(82499),i=n.n(s),l=n(85893),a=function(F){return(0,l.jsx)("div",{unselectable:"on",className:"".concat(i().toolBarButtonContainerWrapper," ").concat(F.active&&i().toolBarButtonContainerWrapperActive),onClick:F.onClick,children:(0,l.jsx)(_.Z,{align:"center",className:i().toolBarButtonContainer,size:0,children:(0,l.jsxs)(_.Z,{align:"center",direction:"vertical",className:i().toolBarButton,size:0,children:[(0,l.jsx)("img",{src:F.imgSrc}),(0,l.jsx)("div",{className:i().buttonText,children:F.children})]})})})};E.Z=a}}]);
