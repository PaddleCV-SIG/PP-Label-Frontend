(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[580],{91220:function(p,P,e){"use strict";e.d(P,{Z:function(){return f}});var C=e(64254);function f(d,c){var l;if(typeof Symbol=="undefined"||d[Symbol.iterator]==null){if(Array.isArray(d)||(l=(0,C.Z)(d))||c&&d&&typeof d.length=="number"){l&&(d=l);var _=0,m=function(){};return{s:m,n:function(){return _>=d.length?{done:!0}:{done:!1,value:d[_++]}},e:function(h){throw h},f:m}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var v=!0,j=!1,t;return{s:function(){l=d[Symbol.iterator]()},n:function(){var h=l.next();return v=h.done,h},e:function(h){j=!0,t=h},f:function(){try{!v&&l.return!=null&&l.return()}finally{if(j)throw t}}}}},41435:function(p,P,e){"use strict";e.d(P,{Z:function(){return _}});var C=e(94663),f=e(80112);function d(m){return Function.toString.call(m).indexOf("[native code]")!==-1}var c=e(18597);function l(m,v,j){return(0,c.Z)()?l=Reflect.construct:l=function(o,h,u){var D=[null];D.push.apply(D,h);var S=Function.bind.apply(o,D),g=new S;return u&&(0,f.Z)(g,u.prototype),g},l.apply(null,arguments)}function _(m){var v=typeof Map=="function"?new Map:void 0;return _=function(t){if(t===null||!d(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof v!="undefined"){if(v.has(t))return v.get(t);v.set(t,o)}function o(){return l(t,arguments,(0,C.Z)(this).constructor)}return o.prototype=Object.create(t.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),(0,f.Z)(o,t)},_(m)}},38619:function(p){p.exports={modal:"modal___2aO7U"}},41180:function(p){p.exports={ppcard:"ppcard___27hGd",title:"title___22R8f"}},48627:function(p){p.exports={container:"container___2RXc3"}},34915:function(p){p.exports={modal:"modal___37D4e"}},31982:function(p,P,e){"use strict";var C=e(89032),f=e(15746),d=e(8870),c=e(13062),l=e(71230),_=e(11700),m=e(67294),v=e(41180),j=e.n(v),t=e(85893),o=function(u){return(0,t.jsxs)("div",{className:j().ppcard,style:u.style,hidden:u.hidden,children:[(0,t.jsx)(l.Z,{className:j().titleRow,style:{display:u.title?void 0:"none"},children:(0,t.jsx)(_.Z,{className:j().title,children:u.title})}),(0,t.jsx)(l.Z,{style:{marginTop:26},children:(0,t.jsx)(f.Z,{span:24,style:(0,d.Z)({paddingLeft:30,paddingRight:30,textAlign:"center"},u.innerStyle),children:u.children})})]})};P.Z=o},11428:function(p,P,e){"use strict";var C=e(67294),f=e(48627),d=e.n(f),c=e(85893),l=function(m){return(0,c.jsx)("div",{className:"".concat(d().container),style:{backgroundImage:"url(./pics/background.png)"},children:m.children})};P.Z=l},58089:function(p,P,e){"use strict";var C=e(71194),f=e(50146),d=e(49111),c=e(19650),l=e(47673),_=e(24044),m=e(34792),v=e(48086),j=e(57663),t=e(71577),o=e(9715),h=e(93766),u=e(2824),D=e(67294),S=e(48971),g=e(34915),z=e.n(g),R=e(50501),E=e(85893),A=function(K){var Z=(0,S.YB)(),V=(0,D.useState)(!1),F=(0,u.Z)(V,2),G=F[0],b=F[1],n=(0,D.useState)(!1),N=(0,u.Z)(n,2),Y=N[0],I=N[1],H=Z.formatMessage({id:"component.PPCreater.cancel"}),Q=h.Z.useForm(),X=(0,u.Z)(Q,1),O=X[0];return(0,E.jsxs)("span",{hidden:K.visible==!1,children:[(0,E.jsx)(t.Z,{type:"primary",onClick:function(){return I(!0)},children:"Export Dataset"}),(0,E.jsx)(f.Z,{className:z().modal,title:Z.formatMessage({id:"component.PPExportModal.title"}),visible:Y,onCancel:function(){return I(!1)},footer:null,children:(0,E.jsxs)(h.Z,{form:O,name:"basic",labelCol:{span:6},wrapperCol:{span:16},initialValues:{remember:!1},onFinish:function(B){var r=B.path;if(!r){v.default.error(Z.formatMessage({id:"component.PPExportModal.pathNotNull"}));return}b(!0),(0,R.Tr)(K.project.projectId,r).then(function(){v.default.success(Z.formatMessage({id:"component.PPExportModal.exportSuccess"})),I(!1)}).finally(function(){b(!1)})},autoComplete:"off",children:[(0,E.jsx)(h.Z.Item,{label:Z.formatMessage({id:"component.PPExportModal.path"}),name:"path",children:(0,E.jsx)(_.Z,{})}),(0,E.jsx)(h.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,E.jsxs)(c.Z,{children:[(0,E.jsx)(t.Z,{onClick:function(){I(!1),O.resetFields()},children:H}),(0,E.jsx)(t.Z,{type:"primary",htmlType:"submit",loading:G,children:Z.formatMessage({id:"component.PPExportModal.export"})})]})})]})})]})};P.Z=A},65732:function(p,P,e){"use strict";e.r(P),e.d(P,{default:function(){return Q}});var C=e(47673),f=e(24044),d=e(57663),c=e(71577),l=e(8870),_=e(34792),m=e(48086),v=e(3182),j=e(9715),t=e(93766),o=e(2824),h=e(43358),u=e(34041),D=e(94043),S=e.n(D),g=e(67294),z=e(11428),R=e(31982),E=e(37071),A=e(50501),ne=e(71194),K=e(50146),Z=e(49111),V=e(19650),F=e(48971),G=e(38619),b=e.n(G),n=e(85893),N=function(O){var x=(0,F.YB)(),B=(0,g.useState)(!1),r=(0,o.Z)(B,2),W=r[0],M=r[1],$=x.formatMessage({id:"component.PPCreater.cancel"}),J=t.Z.useForm(),k=(0,o.Z)(J,1),U=k[0];function w(){var i=O.project.otherSettings;return i!=null&&i.perviousModel&&i!==null&&i!==void 0&&i.models&&i!==null&&i!==void 0&&i.models[i==null?void 0:i.perviousModel]?!0:(m.default.error("Please set and save ML settings first!"),!1)}return(0,n.jsxs)("span",{hidden:O.visible==!1,children:[(0,n.jsx)(c.Z,{type:"primary",onClick:function(){w()&&M(!0)},children:"Train Model"}),(0,n.jsx)(K.Z,{className:b().modal,title:"Train Model",visible:W,onCancel:function(){return M(!1)},footer:null,children:(0,n.jsxs)(t.Z,{form:U,name:"basic",labelCol:{span:6},wrapperCol:{span:16},initialValues:{remember:!1},onFinish:function(q){var a=q.path;O.trainModel(a),M(!1)},autoComplete:"off",children:[(0,n.jsx)(t.Z.Item,{label:"Dataset Path",name:"path",rules:[{required:!0,message:"Please input dataset path"}],children:(0,n.jsx)(f.Z,{})}),(0,n.jsx)(t.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,n.jsxs)(V.Z,{children:[(0,n.jsx)(c.Z,{onClick:function(){M(!1),U.resetFields()},children:$}),(0,n.jsx)(c.Z,{type:"primary",htmlType:"submit",children:"Train"})]})})]})})]})},Y=N,I=e(58089),H=function(){var O,x,B,r=(0,A.Gd)(g.useState),W=E.Z.getQueryVariable("projectId"),M=(0,A.RZ)(g.useState),$=u.Z.Option,J=t.Z.useForm(),k=(0,o.Z)(J,1),U=k[0];(0,g.useEffect)(function(){function a(){return s.apply(this,arguments)}function s(){return s=(0,v.Z)(S().mark(function L(){var ee,te,T;return S().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,(0,A.bo)();case 2:if(y.sent){y.next=4;break}return y.abrupt("return");case 4:if(r.getAll(),W){y.next=8;break}return m.default.error("Machine Learning settings are specific to every project. Please choose a project first."),y.abrupt("return");case 8:return y.next=10,r.getCurr(W);case 10:T=y.sent,T!=null&&(ee=T.otherSettings)!==null&&ee!==void 0&&ee.mlBackendUrl&&M.setMlBackendUrl(T==null||(te=T.otherSettings)===null||te===void 0?void 0:te.mlBackendUrl);case 12:case"end":return y.stop()}},L)})),s.apply(this,arguments)}a()},[]),(0,g.useEffect)(function(){if(!!r.curr){var a=r.curr.otherSettings?r.curr.otherSettings:{},s=a.models&&a.perviousModel?a.models[a.perviousModel]:{},L={mlBackendUrl:a.mlBackendUrl,modelName:a.perviousModel,trainBatchSize:s.trainBatchSize};U.setFieldsValue(L),a!=null&&a.mlBackendUrl&&M.setMlBackendUrl(a.mlBackendUrl)}},[r.curr]);function w(){if(!r.curr){m.default.error("Please choose a project first!");return}var a=U.getFieldValue("mlBackendUrl");M.setMlBackendUrl(a);var s=(0,l.Z)((0,l.Z)({},r.curr.otherSettings),{},{mlBackendUrl:a});r.update(r.curr.projectId,{otherSettings:s})}function i(a){var s;if(!r.curr){m.default.error("Please select model first!");return}var L=(s=r.curr.otherSettings)!==null&&s!==void 0&&s.models?r.curr.otherSettings.models:{};L[a.modelName]={trainBatchSize:a.trainBatchSize},r.curr.otherSettings.perviousModel=a.modelName,r.curr.otherSettings.models=L,r.update(r.curr.projectId,{otherSettings:r.curr.otherSettings}),r.getCurr(W)}function q(a){var s=r.curr.otherSettings;M.train(s.perviousModel,a,s.models[s.perviousModel])}return(0,n.jsxs)(z.Z,{children:[(0,n.jsxs)(R.Z,{children:["Project:",(0,n.jsx)(u.Z,{placeholder:"Select a project",onChange:function(s){return r.getCurr(s)},value:(O=r.curr)===null||O===void 0?void 0:O.projectId,children:(x=r.all)===null||x===void 0?void 0:x.map(function(a){return(0,n.jsx)($,{value:a.projectId,children:a.name})})})]}),(0,n.jsxs)(R.Z,{hidden:r.curr==null,children:[(0,n.jsx)(Y,{model:M,project:r.curr,trainModel:q}),(0,n.jsx)(I.Z,{project:r.curr}),(0,n.jsx)(c.Z,{type:"primary",children:"Progress"}),(0,n.jsx)(c.Z,{type:"primary",children:"Run Inference"})]}),(0,n.jsx)(R.Z,{children:(0,n.jsxs)(t.Z,{form:U,layout:"horizontal",size:"large",style:{marginTop:"5.69rem"},onFinish:function(s){console.log(s),i(s)},hidden:r.curr==null,children:[(0,n.jsxs)(f.Z.Group,{compact:!0,children:[(0,n.jsx)(t.Z.Item,{name:"mlBackendUrl",rules:[{required:!0,message:"Please input ml backend url"}],style:{fontSize:"1.5rem"},children:(0,n.jsx)(f.Z,{allowClear:!0,addonBefore:"ML Backend URL ",style:{textAlign:"left"}})}),(0,n.jsx)(c.Z,{type:"primary",onClick:w,children:"Set"})]}),(0,n.jsx)(t.Z.Item,{name:"modelName",label:"Model",labelCol:{span:6},wrapperCol:{span:16},rules:[{required:!0,message:"Please select a model"}],style:{fontSize:"1.5rem"},children:(0,n.jsx)(u.Z,{placeholder:"Select a model",children:(B=M.all)===null||B===void 0?void 0:B.map(function(a){return(0,n.jsx)($,{value:a.name,children:a.name})})})}),(0,n.jsx)(t.Z.Item,{name:"trainBatchSize",label:"Training Batch Size",labelCol:{span:6},wrapperCol:{span:16},style:{fontSize:"1.5rem"},children:(0,n.jsx)(f.Z,{placeholder:"Training batch size"})}),(0,n.jsx)(t.Z.Item,{wrapperCol:{span:16,offset:6},children:(0,n.jsx)(c.Z,{htmlType:"submit",type:"primary",style:{height:"2.5rem",width:"48%"},block:!0,children:"Save"})})]})})]})},Q=H}}]);
