(self.webpackChunkpp_labeling_frontend=self.webpackChunkpp_labeling_frontend||[]).push([[408],{32774:function(h){h.exports={det:"det___2iG9x",mainStage:"mainStage___Qp8In",draw:"draw___2IpRn",pblock:"pblock___wJLzi",progress:"progress___2SU43",rightSideBar:"rightSideBar___1NCKK"}},10063:function(h,p,s){"use strict";s.r(p);var nn=s(34669),Z=s(54458),d=s(2824),l=s(67294),j=s(32774),c=s.n(j),B=s(8088),a=s(61541),N=s(44434),R=s(5041),K=s(57436),U=s(14836),J=s(29919),W=s(13931),o=s(85893),k=function(){var w=(0,l.useState)(void 0),A=(0,d.Z)(w,2),E=A[0],H=A[1],F=(0,l.useState)({color:"",name:""}),M=(0,d.Z)(F,2),O=M[0],x=M[1],G=(0,l.useState)(),L=(0,d.Z)(G,2),g=L[0],P=L[1],Q=(0,l.useState)([]),D=(0,d.Z)(Q,2),r=D[0],f=D[1],z=(0,l.useState)(1),b=(0,d.Z)(z,2),m=b[0],S=b[1],C=function(n){n||S(1),n<.1||n>3?S(1):S(n)},_=function(n){P(n),n!=null&&n.label&&x(n.label)},v=function(n){f(n)};(0,l.useEffect)(function(){localStorage.removeItem("history")},[]);function I(e,n){var t=localStorage.getItem("history"),i=t?JSON.parse(t):{index:-1,items:[]};console.log("history before set: ");var q=JSON.stringify(i);console.log(q);var y={currentAnnotation:n,annotations:e};if(JSON.stringify(i.items[i.index])==JSON.stringify(y)){console.log("equal with latest, do not add to history");return}var T=i.items.splice(0,i.index==0?1:i.index+1);console.log("itemsToKeep: ".concat(JSON.stringify(T))),console.log("itemsToAdd: ".concat(JSON.stringify(y))),i.items=T.concat([y]),i.index++,localStorage.setItem("history",JSON.stringify(i)),console.log("history after set: "),console.log(JSON.stringify(i))}var V=function(){var n=localStorage.getItem("history");if(!n){console.log("no historyStr, skip.");return}var t=JSON.parse(n);if(!!t){if(t.index>=t.items.length-1){console.log("already latest, skip. history.index:".concat(t.index," history.items.length:").concat(t.items.length));return}t.index++,localStorage.setItem("history",JSON.stringify(t)),console.log("After forward. history:".concat(JSON.stringify(t)));var i=t.items[t.index];P(i.currentAnnotation),f(i.annotations)}},X=function(){var n=localStorage.getItem("history");if(!!n){var t=JSON.parse(n);if(!(!t||!t.index)&&!(t.index<=0)){t.index--,localStorage.setItem("history",JSON.stringify(t));var i=t.items[t.index];console.log("after backward: ".concat(JSON.stringify(t))),P(i.currentAnnotation),f(i.annotations)}}},Y=function(n){for(var t=[],i=0;i<r.length;i++)r[i].annotationId==n.annotationId?t.push(n):t.push(r[i]);_(n),v(t),I(t,n)},$=(0,W.Z)({currentLabel:O,currentTool:E,annotations:r,currentAnnotation:g,onAnnotationAdd:function(n){var t=r.concat([n]);v(t),g||_(n),I(t,n)},onAnnotationModify:Y}),u=$;return(0,o.jsxs)(B.Z,{className:c().det,children:[(0,o.jsxs)(N.Z,{children:[(0,o.jsx)(J.Z,{active:E=="polygon",onClick:function(){H("polygon"),_(void 0)},children:"Polygon"}),(0,o.jsx)(a.Z,{imgSrc:"./pics/buttons/zoom_in.png",onClick:function(){C(m+.1)},children:"Zoom in"}),(0,o.jsx)(a.Z,{imgSrc:"./pics/buttons/zoom_out.png",onClick:function(){C(m-.1)},children:"Zoom out"}),(0,o.jsx)(a.Z,{imgSrc:"./pics/buttons/save.png",children:"Save"}),(0,o.jsx)(a.Z,{imgSrc:"./pics/buttons/move.png",children:"Move"}),(0,o.jsx)(a.Z,{imgSrc:"./pics/buttons/export.png",children:"Export"}),(0,o.jsx)(a.Z,{imgSrc:"./pics/buttons/data_division.png",children:"Divide Data"}),(0,o.jsx)(a.Z,{imgSrc:"./pics/buttons/prev.png",onClick:function(){X()},children:"Undo"}),(0,o.jsx)(a.Z,{imgSrc:"./pics/buttons/next.png",onClick:function(){V()},children:"Redo"}),(0,o.jsx)(a.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:"Clear Mark"})]}),(0,o.jsxs)("div",{className:c().mainStage,children:[(0,o.jsx)("div",{className:c().draw,children:(0,o.jsx)(K.Z,{scale:m,annotations:r,onMouseDown:u.onMouseDown,onMouseMove:u.onMouseMove,onMouseUp:u.onMouseUp,createElementsFunc:u.createElementsFunc})}),(0,o.jsx)("div",{className:c().pblock,children:(0,o.jsx)("div",{className:c().progress,children:(0,o.jsx)(Z.Z,{percent:50,status:"active"})})})]}),(0,o.jsxs)("div",{className:c().rightSideBar,children:[(0,o.jsx)(R.Z,{selectedLabel:O,onLabelSelect:function(n){x(n),_(void 0)},onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}}),(0,o.jsx)(U.Z,{selectedAnnotation:g,annotations:r,onAnnotationSelect:function(n){n!=null&&n.delete||_(n)},onAnnotationAdd:function(){},onAnnotationModify:function(){},onAnnotationDelete:function(n){v(r.filter(function(t){return t.annotationId!=n.annotationId})),_(void 0)}})]})]})};p.default=k}}]);
