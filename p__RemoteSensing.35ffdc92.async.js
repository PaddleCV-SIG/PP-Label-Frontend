(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[333],{41435:function(v,E,e){"use strict";e.d(E,{Z:function(){return l}});var R=e(94663),g=e(80112);function L(i){return Function.toString.call(i).indexOf("[native code]")!==-1}var f=e(18597);function x(i,o,Z){return(0,f.Z)()?x=Reflect.construct:x=function(d,P,j){var r=[null];r.push.apply(r,P);var a=Function.bind.apply(d,r),u=new a;return j&&(0,g.Z)(u,j.prototype),u},x.apply(null,arguments)}function l(i){var o=typeof Map=="function"?new Map:void 0;return l=function(c){if(c===null||!L(c))return c;if(typeof c!="function")throw new TypeError("Super expression must either be null or a function");if(typeof o!="undefined"){if(o.has(c))return o.get(c);o.set(c,d)}function d(){return x(c,arguments,(0,R.Z)(this).constructor)}return d.prototype=Object.create(c.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),(0,g.Z)(d,c)},l(i)}},26647:function(v){v.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1FTWb",toolBarButtonContainer:"toolBarButtonContainer___1Vahn",toolBarButton:"toolBarButton___3mR2H",buttonText:"buttonText___Y0WDm",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3lRZ8",popover:"popover___3zzu2",slider:"slider___ALra-",popoverLeft:"popoverLeft___15lGe"}},52822:function(v){v.exports={roundBall:"roundBall___1pqu1",popover:"popover___1-PR6"}},32495:function(v){v.exports={listItem:"listItem___1MXXF",eye:"eye___3nddM",delete:"delete___y9u-D",roundBall:"roundBall___DMczd",popover:"popover___E0HLD",annotationId:"annotationId___1ks8N",labelName:"labelName___130ie",listItemActive:"listItemActive___1rNB-"}},38670:function(v){v.exports={labelList:"labelList___3uLRO",listHeader:"listHeader___1ZPcO",eye:"eye___2yUvw",roundBall:"roundBall___1xKCU"}},5882:function(v){v.exports={listItem:"listItem___vtDXn",eye:"eye___AsLBS",roundBall:"roundBall___1J_R3",popover:"popover___1x-2R",delete:"delete___WHPf2",listItemActive:"listItemActive___3FRb7"}},56131:function(v){v.exports={labelList:"labelList___jvD05",listHeader:"listHeader___UM5UF",eye:"eye___II3Po",roundBall:"roundBall___j752J"}},78677:function(v){v.exports={container:"container___G0FNe"}},80961:function(v){v.exports={leftToolbar:"leftToolbar___1xi4t",rightToolbar:"rightToolbar___3dNSB"}},82499:function(v){v.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1SHWL",toolBarButtonContainer:"toolBarButtonContainer___1jKUz",toolBarButton:"toolBarButton___3Ouq1",buttonText:"buttonText___10ls7",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AA28"}},72869:function(v){v.exports={map:"map___92VPN",customControlIcon:"customControlIcon___3Ki2y"}},20474:function(v){v.exports={RSPop1:"RSPop1___vz5Me",RSPop2:"RSPop2___34pQA"}},87610:function(v){v.exports={RSPop1:"RSPop1___1iBEf",RSPop2:"RSPop2___1W841",RSPop3:"RSPop3___1Whcp"}},55252:function(v){v.exports={RSPop1:"RSPop1___17x8k",RSPop2:"RSPop2___27kK5"}},75513:function(v){v.exports={segment:"segment___3WmPw",mainStage:"mainStage___2kT1s",draw:"draw___Ff0QW",pblock:"pblock___3sGxC",progress:"progress___KQyBx",rightSideBar:"rightSideBar___11FX3",determinOutline:"determinOutline___1g1YI"}},27992:function(v,E,e){"use strict";var R=e(20136),g=e(55241),L=e(13062),f=e(71230),x=e(77883),l=e(70507),i=e(89032),o=e(15746),Z=e(66126),c=e(75454),d=e(2824),P=e(67294),j=e(61541),r=e(26647),a=e.n(r),u=e(85893),I=0,p=100,J=10,X=function(M){var y=(0,P.useState)(oe(M.size)),T=(0,d.Z)(y,2),B=T[0],b=T[1];function A(m){b(oe(m))}var ee=M.minSize==null?I:M.minSize,F=M.maxSize==null?p:M.maxSize;function oe(m){return m==null?J:m<=ee?ee:m>=F?F:m}return(0,P.useEffect)(function(){A(M.size)},[M.size]),(0,u.jsxs)(g.Z,{overlayClassName:"".concat(a().popover," ").concat(M.disLoc=="left"?a().popoverLeft:""),placement:M.disLoc||"right",content:(0,u.jsxs)(f.Z,{children:[(0,u.jsx)(o.Z,{span:16,children:(0,u.jsx)(c.Z,{className:a().slider,value:B,max:F,min:ee,onChange:function(S){var O;(O=M.onChange)===null||O===void 0||O.call(0,S)},tooltipVisible:!1})}),(0,u.jsx)(o.Z,{span:8,children:(0,u.jsx)(l.Z,{min:ee,max:F,value:B,onChange:function(S){var O;(O=M.onChange)===null||O===void 0||O.call(0,S)},step:10})})]}),trigger:"hover",children:[" ",(0,u.jsx)(j.Z,{imgSrc:M.imgSrc||"",onClick:M.onClick,active:M.active,children:M.children})]})};E.Z=X},63097:function(v,E,e){"use strict";var R=e(20136),g=e(55241),L=e(2824),f=e(67294),x=e(52822),l=e.n(x),i=e(63144),o=e(85893),Z=function(d){var P=(0,f.useState)(d.color||"#FFF"),j=(0,L.Z)(P,2),r=j[0],a=j[1];return(0,f.useEffect)(function(){a(d.color||"#FFF")},[d]),d.changeable?(0,o.jsx)(g.Z,{getPopupContainer:function(I){return I.parentElement||document.body},overlayClassName:l().popover,openClassName:l().popoverOpenClassName,placement:"bottom",content:(0,o.jsx)(i.xS,{disableAlpha:!0,color:r,onChange:function(I){a(I.hex)},onChangeComplete:d.onChange}),trigger:"click",children:(0,o.jsx)("div",{className:l().roundBall,style:{backgroundColor:r}})}):(0,o.jsx)("div",{className:l().roundBall,style:{backgroundColor:r}})};E.Z=Z},51327:function(v,E,e){"use strict";e.d(E,{Z:function(){return J}});var R=e(54421),g=e(38272),L=e(57663),f=e(71577),x=e(67294),l=e(38670),i=e.n(l),o=e(49111),Z=e(19650),c=e(11849),d=e(32495),P=e.n(d),j=e(63097),r=e(85893),a=function(n){var M=(0,c.Z)({},n.annotation),y=!1,T=(0,r.jsxs)(g.ZP.Item,{className:"".concat(P().listItem," ").concat(n.active?P().listItemActive:""),unselectable:"on",onClick:function(){console.log("click List.Item"),n.onClick(M)},children:[(0,r.jsxs)(Z.Z,{align:"center",size:5,children:[(0,r.jsx)("a",{className:P().eye,style:{backgroundImage:y?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(b){b.stopPropagation(),n.onAnnotationModify(M)}})," ",(0,r.jsx)("span",{className:P().annotationId,children:M.properties.annotationId}),(0,r.jsx)("span",{className:P().labelName,children:M.properties.labelName}),(0,r.jsx)(j.Z,{color:M.properties.stroke})]}),(0,r.jsx)("a",{className:P().delete,onClick:function(b){console.log("click List.Item.delete"),b.stopPropagation(),n.onAnnotationDelete(M)}})]});return T},u=a,I=e(48971),p=function(n){var M=(0,I.YB)(),y=M.formatMessage({id:"component.PPAnnotationList.annotationList"}),T=M.formatMessage({id:"component.PPAnnotationList.addAnnotation"});return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(g.ZP,{className:i().labelList,size:"large",header:(0,r.jsx)("div",{className:i().listHeader,children:y}),bordered:!0,dataSource:n.annotations.features,renderItem:function(b){return(0,r.jsx)(u,{onClick:n.onAnnotationSelect,annotation:b,active:!1,onAnnotationDelete:n.onAnnotationDelete,onAnnotationModify:n.onAnnotationModify})},footer:(0,r.jsx)("div",{children:(0,r.jsx)(f.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){n.onAnnotationSelect(void 0)},block:!0,children:T})})})})},J=p},5041:function(v,E,e){"use strict";e.d(E,{Z:function(){return F}});var R=e(54421),g=e(38272),L=e(57663),f=e(71577),x=e(2824),l=e(67294),i=e(56131),o=e.n(i),Z=e(49111),c=e(19650),d=e(11849),P=e(5882),j=e.n(P),r=e(63097),a=e(85893),u=function(m){var S=(0,d.Z)({},m.label),O=(0,l.useState)(S.invisible),V=(0,x.Z)(O,2),z=V[0],ae=V[1],t=(0,l.useState)(0),le=(0,x.Z)(t,2),$=le[0],te=le[1],Q=m.hideEye?" ":(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("a",{className:j().eye,style:{backgroundImage:z?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(q){q.stopPropagation(),ae(!z),m.onLabelModify(S)}})," "]}),w=m.hideColorPicker?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)(r.Z,{color:S.color,changeable:!0,onChange:function(q){S.color=q.hex,m.onLabelModify(S)}}),ce=(0,a.jsxs)(g.ZP.Item,{className:"".concat(j().listItem," ").concat(m.active?j().listItemActive:""),unselectable:"on",onClick:function(){m.onClick(S)},children:[(0,a.jsxs)(c.Z,{align:"center",size:5,children:[Q,S.name,w]}),(0,a.jsx)("a",{className:j().delete,onClick:function(q){q.stopPropagation();var me=new Date().getTime();me-$<300||(te(me),m.onLabelDelete(S))}})]});return ce},I=u,p=e(71194),J=e(50146),X=e(47673),n=e(24044),M=e(9715),y=e(93766),T=e(48971),B=["#FF0000","#008000","#0000FF","#FFFF00","#FFA500","#00FFFF","#8B00FF","#FFC0CB","#7CFC00","#007FFF","#800080","#36BF36","#DAA520","#800000","#008B8B","#B22222","#E6D933","#000080","#FF00FF","#FFFF99","#87CEEB","#5C50E6","#CD5C5C","#20B2AA","#E680FF","#4D1F00","#006374","#B399FF","#8B4513","#BA55D3","#C0C0C0","#808080","#000000"],b=function(m){var S,O,V=(0,T.YB)(),z=V.formatMessage({id:"component.PPAddLabelModal.selectColor"}),ae=V.formatMessage({id:"component.PPAddLabelModal.addLabel"}),t=V.formatMessage({id:"component.PPAddLabelModal.labelName"}),le=V.formatMessage({id:"component.PPCreater.cancel"}),$=V.formatMessage({id:"component.PPSegMode.ok"}),te=(0,l.useState)(((S=m.defaultLabel)===null||S===void 0?void 0:S.color)||B[m.order||0]),Q=(0,x.Z)(te,2),w=Q[0],ce=Q[1];(0,l.useEffect)(function(){var k;ce(((k=m.defaultLabel)===null||k===void 0?void 0:k.color)||B[m.order||0])},[m]);var ie=m.hideColorPicker?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)(y.Z.Item,{label:z,name:"color",children:(0,a.jsx)(r.Z,{color:w,onChange:function(ne){ce(ne.hex)}})}),q=y.Z.useForm(),me=(0,x.Z)(q,1),de=me[0];return(0,a.jsx)(J.Z,{title:ae,visible:m.visible,onCancel:m.onCancel,footer:null,children:(0,a.jsxs)(y.Z,{form:de,name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!1,labelname:(O=m.defaultLabel)===null||O===void 0?void 0:O.name},onFinish:function(ne){var _e={name:ne.labelname,color:w};m.onLabelAdd(_e),de.resetFields()},autoComplete:"off",children:[(0,a.jsx)(y.Z.Item,{label:t,name:"labelname",rules:[{required:!0,message:"Please input label name!"}],children:(0,a.jsx)(n.Z,{})}),ie,(0,a.jsx)(y.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,a.jsxs)(c.Z,{children:[(0,a.jsx)(f.Z,{onClick:function(){var ne;(ne=m.onCancel)===null||ne===void 0||ne.call(0),de.resetFields()},children:le}),(0,a.jsx)(f.Z,{type:"primary",htmlType:"submit",children:$})]})})]})})},A=b,ee=function(m){var S,O=(0,T.YB)(),V=O.formatMessage({id:"component.PPLabelList.addLabel"}),z=O.formatMessage({id:"component.PPLabelList.labelList"}),ae=(0,l.useState)(!1),t=(0,x.Z)(ae,2),le=t[0],$=t[1];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.ZP,{className:o().labelList,size:"large",header:(0,a.jsx)("div",{className:o().listHeader,children:z}),footer:(0,a.jsx)("div",{children:(0,a.jsx)(f.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){$(!0)},block:!0,children:V})}),bordered:!0,dataSource:m.labels,renderItem:function(Q){var w;return(0,a.jsx)(I,{hideColorPicker:m.hideColorPicker,hideEye:m.hideEye,onClick:m.onLabelSelect,label:Q,active:(w=m.activeIds)===null||w===void 0?void 0:w.has(Q.labelId),onLabelDelete:m.onLabelDelete,onLabelModify:m.onLabelModify})}}),(0,a.jsx)(A,{hideColorPicker:m.hideColorPicker,order:(S=m.labels)===null||S===void 0?void 0:S.length,visible:le,onLabelAdd:function(Q){m.onLabelAdd(Q),$(!1)},onCancel:function(){$(!1)}})]})},F=ee},8088:function(v,E,e){"use strict";var R=e(67294),g=e(78677),L=e.n(g),f=e(85893),x=function(i){return(0,f.jsx)("div",{className:"".concat(L().container," ").concat(i.className),children:i.children})};E.Z=x},44434:function(v,E,e){"use strict";var R=e(67294),g=e(80961),L=e.n(g),f=e(85893),x=function(i){var o=L().leftToolbar;return i.disLoc=="right"&&(o=L().rightToolbar),(0,f.jsx)("div",{className:o,children:i.children})};E.Z=x},61541:function(v,E,e){"use strict";var R=e(49111),g=e(19650),L=e(67294),f=e(82499),x=e.n(f),l=e(85893),i=function(Z){return(0,l.jsx)("div",{unselectable:"on",className:"".concat(x().toolBarButtonContainerWrapper," ").concat(Z.active&&x().toolBarButtonContainerWrapperActive),onClick:Z.onClick,children:(0,l.jsx)(g.Z,{align:"center",className:x().toolBarButtonContainer,size:0,children:(0,l.jsxs)(g.Z,{align:"center",direction:"vertical",className:x().toolBarButton,size:0,children:[(0,l.jsx)("img",{src:Z.imgSrc}),(0,l.jsx)("div",{className:x().buttonText,children:Z.children})]})})})};E.Z=i},37233:function(v,E,e){"use strict";e.d(E,{Z:function(){return u}});var R=e(67294),g=e(11849),L=e(93224),f=e(41004),x=e(72869),l=e.n(x),i=e(74607),o=e(85893),Z=function(p){var J=p.children,X=p.leafletMapRef,n=p.displayTools,M=(0,L.Z)(p,["children","leafletMapRef","displayTools"]);return R.useEffect(function(){if(X.current){var y=X.current.leafletElement;y.pm.addControls({drawMarker:!1,drawCircle:!1,drawCircleMarker:!1,drawPolyline:!1,drawRectangle:!1,drawPolygon:!1,editMode:!1,dragMode:!1,cutPolygon:!0,rotateMode:!1,removalMode:!1}),y.pm.setGlobalOptions({pmIgnore:!1}),p.displayTools&&y.pm.Toolbar.createCustomControl({name:"StoreShapes",title:"Store all shapes",block:"custom",className:l().customControlIcon,toggle:!1,afterClick:function(){var B=JSON.stringify(y.pm.getGeomanDrawLayers(!0).toGeoJSON()),b="data.geojson",A=document.createElement("a");A.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(B)),A.setAttribute("download",b),A.style.display="none",document.body.appendChild(A),A.click(),console.log(B)}}),y.on("pm:create",function(T){p.onShapeCreate(T)}),y.on("pm:edit",function(T){p.onShapeEdit(T)})}},[]),(0,o.jsx)(f.Z,(0,g.Z)((0,g.Z)({ref:X},M),{},{children:J}))},c=Z,d=e(88014),P=e(16072),j=e(18836),r={lat:0,lng:0,zoom:2},a=function(p){var J=[r.lat,r.lng];return(0,o.jsx)(c,{leafletMapRef:p.leafletMapRef,displayTools:p.displayTools,className:l().map,center:J,zoom:r.zoom,onShapeCreate:p.onShapeCreate,onShapeEdit:p.onShapeEdit,zoomControl:!1,children:(0,o.jsxs)(d.Z,{position:"topright",children:[(0,o.jsx)(d.Z.BaseLayer,{checked:!0,name:"TianDiTu.Vector",children:(0,o.jsxs)(P.Z,{attribution:'\xA9 <a href="https://www.tianditu.gov.cn/">TianDiTu</a> GS(2021)3715',children:[(0,o.jsx)(j.Z,{url:"https://t2.tianditu.gov.cn/DataServer?T=vec_w&X={x}&Y={y}&L={z}&tk=8e879a4cad078fd3ce7456f2737fc4cc"}),(0,o.jsx)(j.Z,{url:"https://t2.tianditu.gov.cn/DataServer?T=cva_w&X={x}&Y={y}&L={z}&tk=8e879a4cad078fd3ce7456f2737fc4cc"})]})}),(0,o.jsx)(d.Z.Overlay,{name:"Esri.WorldImagery",children:(0,o.jsx)(j.Z,{attribution:"Tiles \xA9 Esri \u2014 Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"})})]})})},u=a},49813:function(v,E,e){"use strict";var R=e(47673),g=e(24044),L=e(13062),f=e(71230),x=e(59250),l=e(13013),i=e(57663),o=e(71577),Z=e(89032),c=e(15746),d=e(30887),P=e(54689),j=e(34792),r=e(48086),a=e(89366),u=e(57254),I=e(20474),p=e.n(I),J=e(67294),X=e(48971),n=e(85893);function M(B){r.default.info("Click on menu item."),console.log("click",B)}var y=(0,n.jsxs)(P.Z,{onClick:M,children:[(0,n.jsx)(P.Z.Item,{icon:(0,n.jsx)(a.Z,{}),children:"1st menu item"},"1"),(0,n.jsx)(P.Z.Item,{icon:(0,n.jsx)(a.Z,{}),children:"2nd menu item"},"2"),(0,n.jsx)(P.Z.Item,{icon:(0,n.jsx)(a.Z,{}),children:"3rd menu item"},"3")]}),T=function(){var b=(0,X.YB)(),A=b.formatMessage({id:"component.PPRS.pdParameter"}),ee=b.formatMessage({id:"component.PPRS.simplifiedDistance"}),F=b.formatMessage({id:"component.PPRS.simplifiedAngle"}),oe=b.formatMessage({id:"component.PPRS.threshold"});return(0,n.jsxs)("div",{children:[(0,n.jsxs)(f.Z,{children:[(0,n.jsx)(c.Z,{span:12,className:p().RSPop1,children:(0,n.jsx)("span",{children:A})}),(0,n.jsx)(c.Z,{span:12,className:p().RSPop2,children:(0,n.jsx)(l.Z,{overlay:y,children:(0,n.jsxs)(o.Z,{style:{width:"100%"},children:["Dropdown ",(0,n.jsx)(u.Z,{})]})})})]}),(0,n.jsxs)(f.Z,{children:[(0,n.jsx)(c.Z,{span:12,className:p().RSPop1,children:(0,n.jsx)("span",{children:ee})}),(0,n.jsx)(c.Z,{span:12,className:p().RSPop2,children:(0,n.jsx)(g.Z,{placeholder:"Basic usage"})})]}),(0,n.jsxs)(f.Z,{children:[(0,n.jsx)(c.Z,{span:12,className:p().RSPop1,children:(0,n.jsx)("span",{children:F})}),(0,n.jsx)(c.Z,{span:12,className:p().RSPop2,children:(0,n.jsx)(g.Z,{placeholder:"Basic usage"})})]}),(0,n.jsxs)(f.Z,{children:[(0,n.jsx)(c.Z,{span:12,className:p().RSPop1,children:(0,n.jsx)("span",{children:oe})}),(0,n.jsx)(c.Z,{span:12,className:p().RSPop2,children:(0,n.jsx)(g.Z,{placeholder:"Basic usage"})})]})]})};E.Z=T},97927:function(v,E,e){"use strict";var R=e(13062),g=e(71230),L=e(47673),f=e(24044),x=e(89032),l=e(15746),i=e(87610),o=e.n(i),Z=e(67294),c=e(48971),d=e(85893),P=function(){var r=(0,c.YB)(),a=r.formatMessage({id:"component.PPRS.gridSize"}),u=r.formatMessage({id:"component.PPRS.overlap"}),I=r.formatMessage({id:"component.PPRS.completed"},{show:1,total:16});return(0,d.jsxs)("div",{children:[(0,d.jsxs)(g.Z,{children:[(0,d.jsx)(l.Z,{span:12,className:o().RSPop1,children:(0,d.jsx)("span",{children:a})}),(0,d.jsx)(l.Z,{span:12,className:o().RSPop2,children:(0,d.jsx)(f.Z,{placeholder:"Basic usage"})})]}),(0,d.jsxs)(g.Z,{children:[(0,d.jsx)(l.Z,{span:12,className:o().RSPop1,children:(0,d.jsx)("span",{children:u})}),(0,d.jsx)(l.Z,{span:12,className:o().RSPop2,children:(0,d.jsx)(f.Z,{placeholder:"Basic usage"})})]}),(0,d.jsx)(g.Z,{children:(0,d.jsx)("span",{className:o().RSPop3,children:I})})]})};E.Z=P},91861:function(v,E,e){"use strict";e.d(E,{Ad:function(){return g},k3:function(){return L},Vd:function(){return f},td:function(){return x}});var R=40;function g(){localStorage.removeItem("history"),L([])}function L(l){var i=localStorage.getItem("history"),o=i?JSON.parse(i):{index:-1,items:[]};if(JSON.stringify(o.items[o.index])!=JSON.stringify(l)){var Z=o.index>R?o.index-R:0,c=o.items.splice(Z,o.index==0?1:o.index+1);o.items=c.concat([l]),o.index<=R?o.index++:o.index=R+1,localStorage.setItem("history",JSON.stringify(o))}}function f(){var l=localStorage.getItem("history");if(!!l){var i=JSON.parse(l);if(!!i&&!(i.index>=i.items.length-1))return i.index++,localStorage.setItem("history",JSON.stringify(i)),i.items[i.index]}}function x(){var l=localStorage.getItem("history");if(!!l){var i=JSON.parse(l);if(!(!i||!i.index)&&!(i.index<=0))return i.index--,localStorage.setItem("history",JSON.stringify(i)),i.items[i.index]}}},47712:function(v,E,e){"use strict";e.r(E),e.d(E,{default:function(){return Re}});var R=e(34669),g=e(54458),L=e(20136),f=e(55241),x=e(49111),l=e(19650),i=e(62350),o=e(75443),Z=e(57663),c=e(71577),d=e(2824),P=e(67294),j=e(75513),r=e.n(j),a=e(8088),u=e(61541),I=e(44434),p=e(5041),J=e(49813),X=e(98858),n=e(4914),M=e(13062),y=e(71230),T=e(59250),B=e(13013),b=e(89032),A=e(15746),ee=e(30887),F=e(54689),oe=e(34792),m=e(48086),S=e(89366),O=e(57254),V=e(55252),z=e.n(V),ae=e(48971),t=e(85893);function le(_){m.default.info("Click on menu item."),console.log("click",_)}var $=(0,t.jsxs)(F.Z,{onClick:le,children:[(0,t.jsx)(F.Z.Item,{icon:(0,t.jsx)(S.Z,{}),children:"band_1"},"1"),(0,t.jsx)(F.Z.Item,{icon:(0,t.jsx)(S.Z,{}),children:"band_2"},"2"),(0,t.jsx)(F.Z.Item,{icon:(0,t.jsx)(S.Z,{}),children:"band_3"},"3")]}),te=function(){var N=(0,ae.YB)(),U=N.formatMessage({id:"component.PPRS.r"}),K=N.formatMessage({id:"component.PPRS.g"}),ge=N.formatMessage({id:"component.PPRS.b"}),he=N.formatMessage({id:"component.PPRS.dataInformation"}),fe=N.formatMessage({id:"component.PPRS.fileName"}),xe=N.formatMessage({id:"component.PPRS.row"}),H=N.formatMessage({id:"component.PPRS.column"}),G=N.formatMessage({id:"component.PPRS.bands"}),se=N.formatMessage({id:"component.PPRS.dataType"}),Me=N.formatMessage({id:"component.PPRS.EPSG"}),ve=N.formatMessage({id:"component.PPRS.unit"});return(0,t.jsxs)("div",{children:[(0,t.jsxs)(y.Z,{children:[(0,t.jsx)(A.Z,{className:z().RSPop1,children:(0,t.jsx)("span",{children:U})}),(0,t.jsx)(A.Z,{className:z().RSPop2,children:(0,t.jsx)(B.Z,{overlay:$,children:(0,t.jsxs)(c.Z,{style:{width:"100%"},children:["Band ",(0,t.jsx)(O.Z,{})]})})}),(0,t.jsx)(A.Z,{className:z().RSPop1,children:(0,t.jsx)("span",{children:K})}),(0,t.jsx)(A.Z,{className:z().RSPop2,children:(0,t.jsx)(B.Z,{overlay:$,children:(0,t.jsxs)(c.Z,{style:{width:"100%"},children:["Band ",(0,t.jsx)(O.Z,{})]})})}),(0,t.jsx)(A.Z,{className:z().RSPop1,children:(0,t.jsx)("span",{children:ge})}),(0,t.jsx)(A.Z,{className:z().RSPop2,children:(0,t.jsx)(B.Z,{overlay:$,children:(0,t.jsxs)(c.Z,{style:{width:"100%"},children:["Band ",(0,t.jsx)(O.Z,{})]})})})]}),(0,t.jsxs)(n.Z,{title:he,column:1,bordered:!0,children:[(0,t.jsx)(n.Z.Item,{label:fe,children:"A/XXX.tif"}),(0,t.jsx)(n.Z.Item,{label:xe,children:"1234"}),(0,t.jsx)(n.Z.Item,{label:H,children:"897"}),(0,t.jsx)(n.Z.Item,{label:G,children:"7"}),(0,t.jsx)(n.Z.Item,{label:se,children:"UInt16"}),(0,t.jsx)(n.Z.Item,{label:Me,children:"7030"}),(0,t.jsx)(n.Z.Item,{label:ve,children:"m"})]})]})},Q=te,w=e(97927),ce=e(37233),ie=e(51327),q=e(11849);function me(_){var N=(0,P.useState)(0),U=(0,d.Z)(N,2),K=U[0],ge=U[1],he=(0,P.useState)(!1),fe=(0,d.Z)(he,2),xe=fe[0],H=fe[1];(0,P.useEffect)(function(){localStorage.setItem("currentLabel",JSON.stringify(_.currentLabel||{}))},[_.currentLabel]),(0,P.useEffect)(function(){localStorage.setItem("annotations",JSON.stringify(_.annotations||{}))},[_.annotations]);var G=function(){var s,C=(s=_.leafletMapRef.current)===null||s===void 0?void 0:s.leafletElement.pm.globalDrawModeEnabled();console.log(C)},se=function(s){var C=localStorage.getItem("currentLabel");if(C!="{}"){var h,re;H(!0);var Y=JSON.parse(C||"{}");(h=_.leafletMapRef.current)===null||h===void 0||h.leafletElement.pm.enableDraw(s),(re=_.leafletMapRef.current)===null||re===void 0||re.leafletElement.pm.setPathOptions({color:Y==null?void 0:Y.color,fillColor:Y==null?void 0:Y.color,fillOpacity:.4})}else{var Pe;alert("Test"),(Pe=_.leafletMapRef.current)===null||Pe===void 0||Pe.leafletElement.pm.disableDraw(s),H(!1)}},Me=function(s){var C;(C=_.leafletMapRef.current)===null||C===void 0||C.leafletElement.pm.disableDraw(s),H(!1),G()},ve=function(){var s;return(s=_.leafletMapRef.current)===null||s===void 0?void 0:s.leafletElement.pm.Draw.getActiveShape()},je=function(){if(ve()=="Polygon"){var s;(s=_.leafletMapRef.current)===null||s===void 0||s.leafletElement.pm.Draw.Polygon._removeLastVertex(),G()}else G(),H(!1)},pe=function(){var s;(s=_.leafletMapRef.current)===null||s===void 0||s.leafletElement.pm.toggleGlobalDragMode(),G()},Be=function(){if(ve()=="Polygon"){var s;(s=_.leafletMapRef.current)===null||s===void 0||s.leafletElement.pm.Draw.Polygon._finishShape(),G(),H(!1)}else G(),H(!1)},Oe=function(){var s;(s=_.leafletMapRef.current)===null||s===void 0||s.leafletElement.pm.enableGlobalRemovalMode(),G()},ye=function(){var s;(s=_.leafletMapRef.current)===null||s===void 0||s.leafletElement.pm.toggleGlobalEditMode(),G(),H(!1)},Ee=function(){H(!1)},De=function(s){var C=s.toGeoJSON(),h=JSON.parse(localStorage.getItem("currentLabel")||"{}");ge(K+1),C.properties={labelName:h==null?void 0:h.name,stroke:h==null?void 0:h.color,annotationId:K+1};var re=JSON.parse(localStorage.getItem("annotations")||"{}"),Y=(0,q.Z)((0,q.Z)({},re),{},{features:re.features.concat(C)});console.log(Y),_.setAnnotations(Y),_.recordHistory(Y)};function Ze(W){H(!1),De(W.layer)}var Le=function(s){console.log(s)},Ce=function(){var s;(s=_.leafletMapRef.current)===null||s===void 0||s.leafletElement.zoomIn(),G()},Se=function(){var s;(s=_.leafletMapRef.current)===null||s===void 0||s.leafletElement.zoomOut(),G()};return{polyVisable:xe,RSDraw:se,RSDrawDisable:Me,removeLastVertex:je,moveShape:pe,finishShape:Be,removeShape:Oe,editMode:ye,saveGeoJson:Ee,storeOnDb:De,onShapeCreate:Ze,onShapeEdit:Le,toolZoomIn:Ce,toolZoomOut:Se,currentShape:ve}}var de=e(27992),k=e(91861),ne=e(50727),_e=function(){var N=(0,ne.$L)(P.useState,P.useEffect,{label:{oneHot:!1},tool:{defaultTool:"mover"},effectTrigger:{}}),U=(0,d.Z)(N,10),K=U[0],ge=U[1],he=U[2],fe=U[3],xe=U[4],H=U[5],G=U[6],se=U[7],Me=U[8],ve=U[9],je=(0,P.useState)(!1),pe=(0,d.Z)(je,2),Be=pe[0],Oe=pe[1],ye=(0,P.useState)(!1),Ee=(0,d.Z)(ye,2),De=Ee[0],Ze=Ee[1],Le=(0,P.useState)({type:"FeatureCollection",features:[]}),Ce=(0,d.Z)(Le,2),Se=Ce[0],W=Ce[1];(0,P.useEffect)(function(){(0,k.Ad)()},[]),console.log("rs is re-rendering! label.curr: ".concat(JSON.stringify(se.curr)));var s=P.useRef(null),C=me({leafletMapRef:s,currentLabel:se.curr,setAnnotations:W,annotations:Se,recordHistory:k.k3}),h=(0,ae.YB)(),re=h.formatMessage({id:"pages.Maps.finished"}),Y=h.formatMessage({id:"pages.Maps.removeLastVertex"}),Pe=h.formatMessage({id:"pages.Maps.cancel"}),Ie=h.formatMessage({id:"pages.Maps.boundary"}),Ae=h.formatMessage({id:"pages.Maps.remoteSensing"}),Te=h.formatMessage({id:"pages.Maps.grids"}),be=h.formatMessage({id:"pages.toolBar.polygon"}),We=h.formatMessage({id:"pages.toolBar.rubber"}),Ne=h.formatMessage({id:"pages.toolBar.zoomIn"}),Ue=h.formatMessage({id:"pages.toolBar.zoomOut"}),Ke=h.formatMessage({id:"pages.toolBar.move"}),Fe=h.formatMessage({id:"pages.toolBar.unDo"}),ze=h.formatMessage({id:"pages.toolBar.reDo"}),Ge=h.formatMessage({id:"pages.toolBar.save"}),Je=h.formatMessage({id:"pages.toolBar.edit"}),Ve=h.formatMessage({id:"pages.toolBar.clearMark"}),He=h.formatMessage({id:"pages.toolBar.interactor"}),Ye=h.formatMessage({id:"pages.toolBar.segmentThreshold"}),Xe=h.formatMessage({id:"pages.toolBar.transparency"}),$e=h.formatMessage({id:"pages.toolBar.visualRadius"}),Qe=h.formatMessage({id:"pages.toolBar.determineOutline"}),ke=h.formatMessage({id:"pages.toolBar.divideData"}),we=h.formatMessage({id:"pages.toolBar.export"});return(0,t.jsxs)(a.Z,{className:r().segment,children:[(0,t.jsxs)(I.Z,{children:[(0,t.jsx)(f.Z,{placement:"rightTop",visible:C.polyVisable,content:(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(l.Z,{children:[(0,t.jsx)(c.Z,{type:"primary",onClick:function(){C.finishShape()},children:re}),(0,t.jsx)(c.Z,{type:"primary",onClick:function(){C.removeLastVertex()},children:Y}),(0,t.jsx)(o.Z,{title:"Are you sure cancel this task?",okText:"Yes",cancelText:"No",children:(0,t.jsx)(c.Z,{type:"primary",onClick:function(){C.RSDrawDisable(C.currentShape())},children:Pe})})]})}),trigger:K.curr=="Polygon"?"hover":"click",children:(0,t.jsx)(u.Z,{active:K.curr=="Polygon",imgSrc:"./pics/buttons/polygon.png",onClick:function(){K.setCurr("Polygon"),C.RSDraw("Polygon")},children:be})}),(0,t.jsx)(u.Z,{onClick:function(){C.editMode()},imgSrc:"./pics/buttons/edit.png",children:Je}),(0,t.jsxs)(f.Z,{placement:"rightTop",title:"title",content:"content",trigger:K.curr=="rubber"?"hover":"click",children:[" ",(0,t.jsx)(u.Z,{imgSrc:"./pics/buttons/rubber.png",onClick:function(){C.removeShape()},children:We})]}),(0,t.jsx)(u.Z,{onClick:function(){C.toolZoomIn()},imgSrc:"./pics/buttons/zoom_in.png",children:Ne}),(0,t.jsx)(u.Z,{onClick:function(){C.toolZoomOut()},imgSrc:"./pics/buttons/zoom_out.png",children:Ue}),(0,t.jsx)(u.Z,{onClick:function(){C.saveGeoJson()},imgSrc:"./pics/buttons/save.png",children:Ge}),(0,t.jsx)(u.Z,{imgSrc:"./pics/buttons/move.png",onClick:function(){return C.moveShape()},children:Ke}),(0,t.jsx)(u.Z,{onClick:function(){var ue=(0,k.td)()},imgSrc:"./pics/buttons/prev.png",children:Fe}),(0,t.jsx)(u.Z,{onClick:function(){var ue=(0,k.Vd)()},imgSrc:"./pics/buttons/next.png",children:ze}),(0,t.jsx)(u.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:Ve})]}),(0,t.jsxs)("div",{className:r().mainStage,children:[(0,t.jsx)("div",{className:r().draw,children:(0,t.jsx)(ce.Z,{leafletMapRef:s,onShapeCreate:C.onShapeCreate,onShapeEdit:C.onShapeEdit})}),(0,t.jsx)("div",{className:r().pblock,children:(0,t.jsx)("div",{className:r().progress,children:(0,t.jsx)(g.Z,{percent:50,status:"active"})})})]}),(0,t.jsxs)(I.Z,{disLoc:"right",children:[(0,t.jsx)(u.Z,{imgSrc:"./pics/buttons/intelligent_interaction.png",children:He}),(0,t.jsx)(de.Z,{imgSrc:"./pics/buttons/threshold.png",disLoc:"left",children:Ye}),(0,t.jsx)(de.Z,{imgSrc:"./pics/buttons/alpha.png",disLoc:"left",children:Xe}),(0,t.jsx)(de.Z,{imgSrc:"./pics/buttons/radius.png",disLoc:"left",children:$e}),(0,t.jsxs)(f.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Setting of boundary simplification",content:(0,t.jsx)(J.Z,{}),trigger:K.curr=="boundry"?"click":"hover",children:[" ",(0,t.jsx)(u.Z,{imgSrc:"./pics/buttons/border_simplify.png",onClick:function(){K.setCurr("boundry")},children:Ie})]}),(0,t.jsxs)(f.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Setting of remote sensing",content:(0,t.jsx)(Q,{}),trigger:K.curr=="colorgun"?"click":"hover",children:[" ",(0,t.jsx)(u.Z,{imgSrc:"./pics/buttons/remote_sensing_setting.png",onClick:function(){K.setCurr("colorgun")},children:Ae})]}),(0,t.jsxs)(f.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Switch grids",content:(0,t.jsx)(w.Z,{}),trigger:K.curr=="grid"?"click":"hover",children:[" ",(0,t.jsx)(u.Z,{imgSrc:"./pics/buttons/switch_grid.png",onClick:function(){K.setCurr("grid")},children:Te})]}),(0,t.jsx)(u.Z,{imgSrc:"./pics/buttons/data_division.png",children:ke}),(0,t.jsx)(u.Z,{imgSrc:"./pics/buttons/export.png",children:we})]}),(0,t.jsxs)("div",{className:r().rightSideBar,children:[(0,t.jsx)("div",{className:r().determinOutline,children:(0,t.jsx)(c.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",block:!0,children:Qe})}),(0,t.jsx)(p.Z,{selectedLabel:se.curr,onLabelSelect:function(ue){se.setCurr(ue),console.log(ue)},onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}}),(0,t.jsx)(ie.Z,{annotations:Se,onAnnotationSelect:function(){},onAnnotationAdd:function(){},onAnnotationModify:function(){},onAnnotationDelete:function(){}})]})]})},Re=_e}}]);
