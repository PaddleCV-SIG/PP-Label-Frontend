(self.webpackChunkpp_labeling_frontend=self.webpackChunkpp_labeling_frontend||[]).push([[333],{57560:function(r){r.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___147XP",toolBarButtonContainer:"toolBarButtonContainer___ZEvhK",toolBarButton:"toolBarButton___1s2Rh",buttonText:"buttonText___3NTCv",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___2Utx8",popover:"popover___3PRoi"}},52822:function(r){r.exports={roundBall:"roundBall___1pqu1",popover:"popover___1-PR6"}},5882:function(r){r.exports={listItem:"listItem___vtDXn",eye:"eye___AsLBS",roundBall:"roundBall___1J_R3",popover:"popover___1x-2R",listItemActive:"listItemActive___3FRb7"}},56131:function(r){r.exports={labelList:"labelList___jvD05",listHeader:"listHeader___UM5UF",eye:"eye___II3Po",roundBall:"roundBall___j752J"}},78677:function(r){r.exports={container:"container___G0FNe"}},80961:function(r){r.exports={toolbar:"toolbar___3vxli"}},82499:function(r){r.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1SHWL",toolBarButtonContainer:"toolBarButtonContainer___1jKUz",toolBarButton:"toolBarButton___3Ouq1",buttonText:"buttonText___10ls7",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AA28"}},72869:function(r){r.exports={map:"map___92VPN",customControlIcon:"customControlIcon___3Ki2y"}},20474:function(r){r.exports={RSPop1:"RSPop1___vz5Me",RSPop2:"RSPop2___34pQA"}},2661:function(r){r.exports={toolbar:"toolbar___1o3he"}},93889:function(r){r.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___UtH8a",toolBarButtonContainer:"toolBarButtonContainer___1gFsH",toolBarButton:"toolBarButton___1Wqc1",buttonText:"buttonText___2zcKO",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AXHi"}},75513:function(r){r.exports={segment:"segment___3WmPw",mainStage:"mainStage___2kT1s",rightSideBar:"rightSideBar___11FX3"}},58967:function(r,S,e){"use strict";var w=e(20136),m=e(19181),O=e(77883),h=e(70507),d=e(57663),i=e(71577),j=e(2824),u=e(67294),F=e(61541),J=e(57560),q=e.n(J),y=e(85893),K=1,n=20,ee=10;function _(b){return b?b<=K?K:b>=n?n:b:ee}var H=function(t){var W=(0,u.useState)(_(t.size)),$=(0,j.Z)(W,2),N=$[0],ne=$[1];return(0,y.jsxs)(m.Z,{overlayClassName:q().popover,placement:"right",content:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(i.Z,{type:"text",onClick:function(){var Z,E=_(N-1);ne(E),(Z=t.onChange)===null||Z===void 0||Z.call(0,E)},children:"-"}),(0,y.jsx)(h.Z,{min:1,max:20,value:N,onChange:t.onChange,controls:!1,style:{textAlign:"center"}}),(0,y.jsx)(i.Z,{type:"text",onClick:function(){var Z,E=_(N+1);ne(E),(Z=t.onChange)===null||Z===void 0||Z.call(0,E)},children:"+"})]}),trigger:t.active?"hover":"click",children:[" ",(0,y.jsx)(F.Z,{active:t.active,imgSrc:"./pics/buttons/brush.png",onClick:t.onClick,children:"Brush"})]})};S.Z=H},90655:function(r,S,e){"use strict";e.d(S,{Z:function(){return he}});var w=e(54421),m=e(38272),O=e(57663),h=e(71577),d=e(2824),i=e(67294),j=e(56131),u=e.n(j),F=e(49111),J=e(19650),q=e(11849),y=e(5882),K=e.n(y),n=e(20136),ee=e(19181),_=e(52822),H=e.n(_),b=e(63144),t=e(85893),W=function(l){var v=(0,i.useState)(l.color||"#FFF"),C=(0,d.Z)(v,2),s=C[0],L=C[1];return(0,i.useEffect)(function(){L(l.color||"#FFF")},[l]),(0,t.jsx)(ee.Z,{getPopupContainer:function(x){return x.parentElement||document.body},overlayClassName:H().popover,openClassName:H().popoverOpenClassName,placement:"bottom",content:(0,t.jsx)(b.xS,{disableAlpha:!0,color:s,onChange:function(x){L(x.hex)},onChangeComplete:l.onChange}),trigger:"click",children:(0,t.jsx)("div",{className:H().roundBall,style:{backgroundColor:s}})})},$=W,N=function(l){var v=(0,q.Z)({},l.label),C=(0,i.useState)(v.invisible),s=(0,d.Z)(C,2),L=s[0],D=s[1],x=(0,t.jsx)(m.ZP.Item,{className:"".concat(K().listItem," ").concat(l.active?K().listItemActive:""),unselectable:"on",onClick:function(){l.onClick(v)},children:(0,t.jsxs)(J.Z,{align:"center",size:5,children:[(0,t.jsx)("a",{className:K().eye,style:{backgroundImage:L?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(){D(!L),l.onLabelModify(v)}})," ",v.name,(0,t.jsx)($,{color:v.color,onChange:function(R){v.color=R.hex,l.onLabelModify(v)}})]})});return x},ne=N,X=e(71194),Z=e(48889),E=e(47673),ue=e(24044),me=e(9715),Y=e(93766),ae=["#FF0000","#008000","#0000FF","#FFFF00","#FFA500","#00FFFF","#8B00FF","#FFC0CB","#7CFC00","#007FFF","#800080","#36BF36","#DAA520","#800000","#008B8B","#B22222","#E6D933","#000080","#FF00FF","#FFFF99","#87CEEB","#5C50E6","#CD5C5C","#20B2AA","#E680FF","#4D1F00","#006374","#B399FF","#8B4513","#BA55D3","#C0C0C0","#808080","#000000"],ve=function(l){var v,C,s=(0,i.useState)(((v=l.defaultLabel)===null||v===void 0?void 0:v.color)||ae[l.order||0]),L=(0,d.Z)(s,2),D=L[0],x=L[1];(0,i.useEffect)(function(){var P;x(((P=l.defaultLabel)===null||P===void 0?void 0:P.color)||ae[l.order||0])},[l]);var z=Y.Z.useForm(),R=(0,d.Z)(z,1),U=R[0];return(0,t.jsx)(Z.Z,{title:"Add Label",visible:l.visible,onCancel:l.onCancel,footer:null,children:(0,t.jsxs)(Y.Z,{form:U,name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!1,labelname:(C=l.defaultLabel)===null||C===void 0?void 0:C.name},onFinish:function(B){var re={name:B.labelname,color:D};l.onLabelAdd(re),U.resetFields()},autoComplete:"off",children:[(0,t.jsx)(Y.Z.Item,{label:"Label Name",name:"labelname",rules:[{required:!0,message:"Please input label name!"}],children:(0,t.jsx)(ue.Z,{})}),(0,t.jsx)(Y.Z.Item,{label:"Select Color",name:"color",children:(0,t.jsx)($,{color:D,onChange:function(B){x(B.hex)}})}),(0,t.jsx)(Y.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,t.jsxs)(J.Z,{children:[(0,t.jsx)(h.Z,{onClick:function(){var B;(B=l.onCancel)===null||B===void 0||B.call(0),U.resetFields()},children:"\u53D6\u6D88"}),(0,t.jsx)(h.Z,{type:"primary",htmlType:"submit",children:"\u786E\u5B9A"})]})})]})})},M=ve,fe=[{color:"#FF0000",name:"Label 1"},{color:"#008000",name:"Label 2"}],Q=function(l){var v=(0,i.useState)(fe),C=(0,d.Z)(v,2),s=C[0],L=C[1],D=(0,i.useState)(!1),x=(0,d.Z)(D,2),z=x[0],R=x[1];return(0,i.useEffect)(function(){l.selectedLabel||l.onLabelSelect(s[0])},[s,l]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.ZP,{className:u().labelList,size:"large",header:(0,t.jsx)("div",{className:u().listHeader,children:"Label List"}),footer:(0,t.jsx)("div",{children:(0,t.jsx)(h.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){R(!0)},block:!0,children:"Add Label"})}),bordered:!0,dataSource:s,renderItem:function(P){var B;return(0,t.jsx)(ne,{onClick:l.onLabelSelect,label:P,active:P.name==((B=l.selectedLabel)===null||B===void 0?void 0:B.name),onLabelDelete:l.onLabelDelete,onLabelModify:l.onLabelModify})}}),(0,t.jsx)(M,{order:s.length,visible:z,onLabelAdd:function(P){s.push(P),L(s),R(!1)},onCancel:function(){R(!1)}})]})},he=Q},8088:function(r,S,e){"use strict";var w=e(67294),m=e(78677),O=e.n(m),h=e(85893),d=function(j){return(0,h.jsx)("div",{className:"".concat(O().container," ").concat(j.className),children:j.children})};S.Z=d},44434:function(r,S,e){"use strict";var w=e(67294),m=e(80961),O=e.n(m),h=e(85893),d=function(j){return(0,h.jsx)("div",{className:O().toolbar,children:j.children})};S.Z=d},61541:function(r,S,e){"use strict";var w=e(49111),m=e(19650),O=e(67294),h=e(82499),d=e.n(h),i=e(85893),j=function(F){return(0,i.jsx)("div",{unselectable:"on",className:"".concat(d().toolBarButtonContainerWrapper," ").concat(F.active&&d().toolBarButtonContainerWrapperActive),onClick:F.onClick,children:(0,i.jsx)(m.Z,{align:"center",className:d().toolBarButtonContainer,size:0,children:(0,i.jsxs)(m.Z,{align:"center",direction:"vertical",className:d().toolBarButton,size:0,children:[(0,i.jsx)("img",{src:F.imgSrc}),(0,i.jsx)("div",{className:d().buttonText,children:F.children})]})})})};S.Z=j},6779:function(r,S,e){"use strict";e.r(S),e.d(S,{default:function(){return Be}});var w=e(20136),m=e(19181),O=e(2824),h=e(67294),d=e(75513),i=e.n(d),j=e(8088),u=e(61541),F=e(44434),J=e(58967),q=e(90655),y=e(2661),K=e.n(y),n=e(85893),ee=function(g){return(0,n.jsx)("div",{className:K().toolbar,children:g.children})},_=ee,H=e(49111),b=e(19650),t=e(93889),W=e.n(t),$=function(g){return(0,n.jsx)("div",{unselectable:"on",className:"".concat(W().toolBarButtonContainerWrapper," ").concat(g.active&&W().toolBarButtonContainerWrapperActive),onClick:g.onClick,children:(0,n.jsx)(b.Z,{align:"center",className:W().toolBarButtonContainer,size:0,children:(0,n.jsxs)(b.Z,{align:"center",direction:"vertical",className:W().toolBarButton,size:0,children:[(0,n.jsx)("img",{src:g.imgSrc}),(0,n.jsx)("div",{className:W().buttonText,children:g.children})]})})})},N=$,ne=e(47673),X=e(24044),Z=e(13062),E=e(71230),ue=e(59250),me=e(13013),Y=e(57663),ae=e(71577),ve=e(89032),M=e(15746),fe=e(30887),Q=e(54689),he=e(34792),te=e(48086),l=e(89366),v=e(57254),C=e(20474),s=e.n(C);function L(V){te.default.info("Click on menu item."),console.log("click",V)}var D=(0,n.jsxs)(Q.Z,{onClick:L,children:[(0,n.jsx)(Q.Z.Item,{icon:(0,n.jsx)(l.Z,{}),children:"1st menu item"},"1"),(0,n.jsx)(Q.Z.Item,{icon:(0,n.jsx)(l.Z,{}),children:"2nd menu item"},"2"),(0,n.jsx)(Q.Z.Item,{icon:(0,n.jsx)(l.Z,{}),children:"3rd menu item"},"3")]}),x=function(){return(0,n.jsxs)("div",{children:[(0,n.jsxs)(E.Z,{children:[(0,n.jsx)(M.Z,{span:12,className:s().RSPop1,children:(0,n.jsx)("span",{children:"PD parameter"})}),(0,n.jsx)(M.Z,{span:12,className:s().RSPop2,children:(0,n.jsx)(me.Z,{overlay:D,children:(0,n.jsxs)(ae.Z,{style:{width:"100%"},children:["Dropdown ",(0,n.jsx)(v.Z,{})]})})})]}),(0,n.jsxs)(E.Z,{children:[(0,n.jsx)(M.Z,{span:12,className:s().RSPop1,children:(0,n.jsx)("span",{children:"Simplified distance"})}),(0,n.jsx)(M.Z,{span:12,className:s().RSPop2,children:(0,n.jsx)(X.Z,{placeholder:"Basic usage"})})]}),(0,n.jsxs)(E.Z,{children:[(0,n.jsx)(M.Z,{span:12,className:s().RSPop1,children:(0,n.jsx)("span",{children:"Simplified angle"})}),(0,n.jsx)(M.Z,{span:12,className:s().RSPop2,children:(0,n.jsx)(X.Z,{placeholder:"Basic usage"})})]}),(0,n.jsxs)(E.Z,{children:[(0,n.jsx)(M.Z,{span:12,className:s().RSPop1,children:(0,n.jsx)("span",{children:"Threshold of building simplification "})}),(0,n.jsx)(M.Z,{span:12,className:s().RSPop2,children:(0,n.jsx)(X.Z,{placeholder:"Basic usage"})})]})]})},z=x,R=e(11849),U=e(93224),P=e(41004),B=e(72869),re=e.n(B),Se=e(74607),ge=function(g){var k=g.children,p=g.leafletMapRef,A=(0,U.Z)(g,["children","leafletMapRef"]);return h.useEffect(function(){if(p.current){var c=p.current.leafletElement;c.pm.addControls({drawMarker:!1,drawCircle:!1,drawCircleMarker:!1,drawPolyline:!0,drawRectangle:!0,drawPolygon:!0,editMode:!0,dragMode:!0,cutPolygon:!0,rotateMode:!1,removalMode:!0}),c.pm.setGlobalOptions({pmIgnore:!1}),c.pm.Toolbar.createCustomControl({name:"StoreShapes",title:"Store all shapes",block:"custom",className:re().customControlIcon,toggle:!1,afterClick:function(){var G=JSON.stringify(c.pm.getGeomanDrawLayers(!0).toGeoJSON()),le="data.geojson",I=document.createElement("a");I.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(G)),I.setAttribute("download",le),I.style.display="none",document.body.appendChild(I),I.click(),console.log(G)}}),c.on("pm:create",function(T){g.onShapeCreate(T)}),c.on("pm:edit",function(T){g.onShapeEdit(T)})}},[]),(0,n.jsx)(P.Z,(0,R.Z)((0,R.Z)({ref:p},A),{},{children:k}))},pe=ge,oe=e(88014),ie=e(3263),se={lat:0,lng:0,zoom:2},Ce=function(g){var k=[se.lat,se.lng],p=h.useState([]),A=(0,O.Z)(p,2),c=A[0],T=A[1],G=function(o){I(o.layer),o.layer.bindPopup("Label: "+o.layer._uid).openPopup(),ce(o.layer)},le=function(o){de(o.layer),console.log(o)};function I(a){var o=prompt("Please enter a Unique Id");if(o)if(c[o]){alert("Id already used, add another one"),I(a);return}else a._uid=o,c[o]=a,T(c);else{alert("Nothing entered, layer deleted ..."),a.remove();return}}function ce(a){var o=a._uid,f=a.toGeoJSON();f.properties={LabelID:Number(o)},console.log("Store Layer on DB. Id:"+o,f),console.log(JSON.stringify(f))}function de(a){var o=a._uid,f=a.toGeoJSON();console.log("Update Layer on DB. Id:"+o,f)}return(0,n.jsx)(pe,{leafletMapRef:g.leafletMapRef,className:re().map,center:k,zoom:se.zoom,onShapeCreate:G,onShapeEdit:le,children:(0,n.jsxs)(oe.Z,{position:"topright",children:[(0,n.jsx)(oe.Z.BaseLayer,{checked:!0,name:"OpenStreetMap.Mapnik",children:(0,n.jsx)(ie.Z,{attribution:'\xA9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"})}),(0,n.jsx)(oe.Z.BaseLayer,{name:"TianDiTu.Satellite",children:(0,n.jsx)(ie.Z,{attribution:"\xA9 TianDiTu",url:"https://t2.tianditu.gov.cn/DataServer?T=img_w&X={x}&Y={y}&L={z}&tk=174705aebfe31b79b3587279e211cb9a"})}),(0,n.jsx)(oe.Z.BaseLayer,{name:"Esri.WorldImagery",children:(0,n.jsx)(ie.Z,{attribution:"Tiles \xA9 Esri \u2014 Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"})}),(0,n.jsx)(oe.Z.Overlay,{name:"Annotion.TianDiTu",children:(0,n.jsx)(ie.Z,{url:"https://t2.tianditu.gov.cn/DataServer?T=cia_w&X={x}&Y={y}&L={z}&tk=174705aebfe31b79b3587279e211cb9a"})})]})})},xe=Ce,Pe=function(){var g=(0,h.useState)(void 0),k=(0,O.Z)(g,2),p=k[0],A=k[1],c=h.useRef(null);if(p){var T,G;(T=c.current)===null||T===void 0||T.leafletElement.pm.enableDraw(p),console.log("drawTools: ",p),(G=c.current)===null||G===void 0||G.leafletElement.pm.setPathOptions({color:"orange",fillColor:"green",fillOpacity:.4})}var le=function(){var o,f;console.log((o=c.current)===null||o===void 0?void 0:o.leafletElement.pm.Draw),(f=c.current)===null||f===void 0||f.leafletElement.pm.Draw.Polygon._removeLastVertex()},I=function(){var o,f;console.log((o=c.current)===null||o===void 0?void 0:o.leafletElement.pm.Draw),(f=c.current)===null||f===void 0||f.leafletElement.pm.toggleGlobalDragMode()},ce=function(){var o,f;console.log((o=c.current)===null||o===void 0?void 0:o.leafletElement.pm.Draw),(f=c.current)===null||f===void 0||f.leafletElement.pm.Draw.Polygon._finishShape()},de=function(){var o;(o=c.current)===null||o===void 0||o.leafletElement.pm.enableGlobalRemovalMode()};return(0,n.jsxs)(j.Z,{className:i().segment,children:[(0,n.jsxs)(F.Z,{children:[(0,n.jsx)(u.Z,{imgSrc:"./pics/buttons/intelligent_interaction.png",children:"Intelligent Interaction"}),(0,n.jsx)(m.Z,{placement:"rightTop",title:"Polygon Edit",defaultVisible:!0,content:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:function(){le()},children:"Remove Last Vertex"}),(0,n.jsx)("button",{onClick:function(){ce()},children:"Finish"})]}),trigger:p=="Polygon"?"hover":"click",children:(0,n.jsx)(u.Z,{active:p=="Polygon",imgSrc:"./pics/buttons/polygon.png",onClick:function(){A("Polygon")},children:"Polygon"})}),(0,n.jsx)(J.Z,{active:p=="brush",onClick:function(){A("brush")},onChange:function(o){console.log(o)}}),(0,n.jsxs)(m.Z,{placement:"rightTop",title:"title",content:"content",trigger:p=="rubber"?"hover":"click",children:[" ",(0,n.jsx)(u.Z,{imgSrc:"./pics/buttons/rubber.png",onClick:function(){de()},children:"Rubber"})]}),(0,n.jsx)(u.Z,{imgSrc:"./pics/buttons/zoom_in.png",children:"Zoom in"}),(0,n.jsx)(u.Z,{imgSrc:"./pics/buttons/zoom_out.png",children:"Zoom out"}),(0,n.jsx)(u.Z,{imgSrc:"./pics/buttons/save.png",children:"Save"}),(0,n.jsx)(u.Z,{imgSrc:"./pics/buttons/move.png",onClick:function(){return I()},children:"Move"}),(0,n.jsx)(u.Z,{imgSrc:"./pics/buttons/export.png",children:"Export"}),(0,n.jsx)(u.Z,{imgSrc:"./pics/buttons/data_division.png",children:"Divide Data"}),(0,n.jsx)(u.Z,{imgSrc:"./pics/buttons/prev.png",children:"Undo"}),(0,n.jsx)(u.Z,{imgSrc:"./pics/buttons/next.png",children:"Redo"}),(0,n.jsx)(u.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:"Clear Mark"})]}),(0,n.jsx)("div",{className:i().mainStage,children:(0,n.jsx)(xe,{leafletMapRef:c})}),(0,n.jsxs)(_,{children:[(0,n.jsxs)(m.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Setting of boundary simplification",content:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(z,{})}),trigger:p=="boundry"?"click":"hover",children:[" ",(0,n.jsx)(N,{imgSrc:"./pics/buttons/border_simplify.png",onClick:function(){A("boundry")},children:(0,n.jsx)("h2",{children:"Boundary"})})]}),(0,n.jsxs)(m.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Setting of remote sensing",content:"content",trigger:p=="colorgun"?"click":"hover",children:[" ",(0,n.jsx)(N,{imgSrc:"./pics/buttons/remote_sensing_setting.png",onClick:function(){A("colorgun")},children:(0,n.jsx)("h2",{children:"Remote Sensing"})})]}),(0,n.jsxs)(m.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Switch grids",content:"content",trigger:p=="grid"?"click":"hover",children:[" ",(0,n.jsx)(N,{imgSrc:"./pics/buttons/switch_grid.png",onClick:function(){A("grid")},children:(0,n.jsx)("h2",{children:"Grids"})})]})]}),(0,n.jsx)("div",{className:i().rightSideBar,children:(0,n.jsx)(q.Z,{onLabelSelect:function(){},onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}})})]})},Be=Pe}}]);
