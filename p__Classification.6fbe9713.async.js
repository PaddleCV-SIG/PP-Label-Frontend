(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[672],{41435:function(c,M,e){"use strict";e.d(M,{Z:function(){return r}});var A=e(94663),v=e(80112);function g(u){return Function.toString.call(u).indexOf("[native code]")!==-1}var P=e(18597);function l(u,m,L){return(0,P.Z)()?l=Reflect.construct:l=function(f,y,o){var x=[null];x.push.apply(x,y);var n=Function.bind.apply(f,x),h=new n;return o&&(0,v.Z)(h,o.prototype),h},l.apply(null,arguments)}function r(u){var m=typeof Map=="function"?new Map:void 0;return r=function(E){if(E===null||!g(E))return E;if(typeof E!="function")throw new TypeError("Super expression must either be null or a function");if(typeof m!="undefined"){if(m.has(E))return m.get(E);m.set(E,f)}function f(){return l(E,arguments,(0,A.Z)(this).constructor)}return f.prototype=Object.create(E.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),(0,v.Z)(f,E)},r(u)}},52822:function(c){c.exports={roundBall:"roundBall___1pqu1",popover:"popover___1-PR6"}},5882:function(c){c.exports={listItem:"listItem___vtDXn",eye:"eye___AsLBS",roundBall:"roundBall___1J_R3",popover:"popover___1x-2R",delete:"delete___WHPf2",listItemActive:"listItemActive___3FRb7"}},56131:function(c){c.exports={labelList:"labelList___jvD05",listHeader:"listHeader___UM5UF",eye:"eye___II3Po",roundBall:"roundBall___j752J"}},78677:function(c){c.exports={container:"container___G0FNe"}},83930:function(c){c.exports={stage:"stage___3H5QL"}},80961:function(c){c.exports={leftToolbar:"leftToolbar___1xi4t",rightToolbar:"rightToolbar___3dNSB"}},82499:function(c){c.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1SHWL",toolBarButtonContainer:"toolBarButtonContainer___1jKUz",toolBarButton:"toolBarButton___3Ouq1",buttonText:"buttonText___10ls7",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AA28"}},73199:function(){},63097:function(c,M,e){"use strict";var A=e(20136),v=e(55241),g=e(2824),P=e(67294),l=e(52822),r=e.n(l),u=e(63144),m=e(85893),L=function(f){var y=(0,P.useState)(f.color||"#FFF"),o=(0,g.Z)(y,2),x=o[0],n=o[1];return(0,P.useEffect)(function(){n(f.color||"#FFF")},[f]),f.changeable?(0,m.jsx)(v.Z,{getPopupContainer:function(j){return j.parentElement||document.body},overlayClassName:r().popover,openClassName:r().popoverOpenClassName,placement:"bottom",content:(0,m.jsx)(u.xS,{disableAlpha:!0,color:x,onChange:function(j){n(j.hex)},onChangeComplete:f.onChange}),trigger:"click",children:(0,m.jsx)("div",{className:r().roundBall,style:{backgroundColor:x}})}):(0,m.jsx)("div",{className:r().roundBall,style:{backgroundColor:x}})};M.Z=L},5041:function(c,M,e){"use strict";e.d(M,{Z:function(){return K}});var A=e(54421),v=e(38272),g=e(57663),P=e(71577),l=e(2824),r=e(67294),u=e(56131),m=e.n(u),L=e(49111),E=e(19650),f=e(11849),y=e(5882),o=e.n(y),x=e(63097),n=e(85893),h=function(t){var _=(0,f.Z)({},t.label),I=(0,r.useState)(_.invisible),b=(0,l.Z)(I,2),D=b[0],d=b[1],O=t.hideEye?" ":(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("a",{className:o().eye,style:{backgroundImage:D?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(){d(!D),t.onLabelModify(_)}})," "]}),a=t.hideColorPicker?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(x.Z,{color:_.color,changeable:!0,onChange:function(F){_.color=F.hex,t.onLabelModify(_)}}),C=(0,n.jsxs)(v.ZP.Item,{className:"".concat(o().listItem," ").concat(_.active?o().listItemActive:""),unselectable:"on",onClick:function(){t.onClick(_)},children:[(0,n.jsxs)(E.Z,{align:"center",size:5,children:[O,_.name,a]}),(0,n.jsx)("a",{className:o().delete,style:{backgroundImage:"url(./pics/delete.png)"},onClick:function(F){F.stopPropagation(),t.onLabelDelete(_)}})]});return C},j=h,$=e(71194),p=e(50146),s=e(47673),Y=e(24044),N=e(9715),W=e(93766),T=["#FF0000","#008000","#0000FF","#FFFF00","#FFA500","#00FFFF","#8B00FF","#FFC0CB","#7CFC00","#007FFF","#800080","#36BF36","#DAA520","#800000","#008B8B","#B22222","#E6D933","#000080","#FF00FF","#FFFF99","#87CEEB","#5C50E6","#CD5C5C","#20B2AA","#E680FF","#4D1F00","#006374","#B399FF","#8B4513","#BA55D3","#C0C0C0","#808080","#000000"],H=function(t){var _,I,b=(0,r.useState)(((_=t.defaultLabel)===null||_===void 0?void 0:_.color)||T[t.order||0]),D=(0,l.Z)(b,2),d=D[0],O=D[1];(0,r.useEffect)(function(){var i;O(((i=t.defaultLabel)===null||i===void 0?void 0:i.color)||T[t.order||0])},[t]);var a=t.hideColorPicker?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(W.Z.Item,{label:"Select Color",name:"color",children:(0,n.jsx)(x.Z,{color:d,onChange:function(B){O(B.hex)}})}),C=W.Z.useForm(),S=(0,l.Z)(C,1),F=S[0];return(0,n.jsx)(p.Z,{title:"Add Label",visible:t.visible,onCancel:t.onCancel,footer:null,children:(0,n.jsxs)(W.Z,{form:F,name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!1,labelname:(I=t.defaultLabel)===null||I===void 0?void 0:I.name},onFinish:function(B){var Z={name:B.labelname,color:d};t.onLabelAdd(Z),F.resetFields()},autoComplete:"off",children:[(0,n.jsx)(W.Z.Item,{label:"Label Name",name:"labelname",rules:[{required:!0,message:"Please input label name!"}],children:(0,n.jsx)(Y.Z,{})}),a,(0,n.jsx)(W.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,n.jsxs)(E.Z,{children:[(0,n.jsx)(P.Z,{onClick:function(){var B;(B=t.onCancel)===null||B===void 0||B.call(0),F.resetFields()},children:"\u53D6\u6D88"}),(0,n.jsx)(P.Z,{type:"primary",htmlType:"submit",children:"\u786E\u5B9A"})]})})]})})},U=H,z=function(t){var _;console.log("render pplabellist");var I=(0,r.useState)(!1),b=(0,l.Z)(I,2),D=b[0],d=b[1];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v.ZP,{className:m().labelList,size:"large",header:(0,n.jsx)("div",{className:m().listHeader,children:"Label List"}),footer:(0,n.jsx)("div",{children:(0,n.jsx)(P.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){d(!0)},block:!0,children:"Add Label"})}),bordered:!0,dataSource:t.labels,renderItem:function(a){return(0,n.jsx)(j,{hideColorPicker:t.hideColorPicker,hideEye:t.hideEye,onClick:t.onLabelSelect,label:a,onLabelDelete:t.onLabelDelete,onLabelModify:t.onLabelModify})}}),(0,n.jsx)(U,{hideColorPicker:t.hideColorPicker,order:(_=t.labels)===null||_===void 0?void 0:_.length,visible:D,onLabelAdd:function(a){t.onLabelAdd(a),d(!1)},onCancel:function(){d(!1)}})]})},K=z},8088:function(c,M,e){"use strict";var A=e(67294),v=e(78677),g=e.n(v),P=e(85893),l=function(u){return(0,P.jsx)("div",{className:"".concat(g().container," ").concat(u.className),children:u.children})};M.Z=l},57436:function(c,M,e){"use strict";var A=e(91220),v=e(2824),g=e(67294),P=e(65031),l=e(84420),r=e.n(l),u=e(83930),m=e.n(u),L=e(85893),E="./pics/basketball.jpg",f=function(o){var x=r()(o.imgSrc||""),n=(0,v.Z)(x,1),h=n[0],j=(h==null?void 0:h.width)||0,$=(h==null?void 0:h.height)||0,p=(0,g.useState)(),s=(0,v.Z)(p,2),Y=s[0],N=s[1],W=(0,g.useState)(),T=(0,v.Z)(W,2),H=T[0],U=T[1],z=(0,g.useState)({x:0,y:0}),K=(0,v.Z)(z,2),R=K[0],t=K[1];function _(){var a=document.getElementById("dr");a&&(N(a.clientWidth),U(a.clientHeight))}(0,g.useEffect)(function(){window.removeEventListener("resize",_),window.addEventListener("resize",_);var a=document.getElementById("dr");a&&(N(a.clientWidth),U(a.clientHeight),t({x:a.clientWidth/2,y:a.clientHeight/2}))},[]);var I=[];if(o.annotations){var b=(0,A.Z)(o.annotations),D;try{for(b.s();!(D=b.n()).done;){var d=D.value;if(!!d){var O=d.tool=="polygon"?o.createPolygonFunc:o.createBrushFunc;O&&I.push(O(d,o.onAnnotationModify,o.onAnnotationModifyComplete,o.scale,o.currentTool,o.setCurrentAnnotation,o.currentAnnotation))}}}catch(a){b.e(a)}finally{b.f()}}return(0,L.jsx)(P.Hf,{width:Y,height:H,className:m().stage,children:(0,L.jsx)(P.mh,{onMouseDown:function(C){o.onMouseDown&&o.onMouseDown(C,o.scale)},onMouseMove:function(C){o.onMouseMove&&o.onMouseMove(C,o.scale)},onMouseUp:function(C){o.onMouseUp&&o.onMouseUp(C,o.scale)},onContextMenu:function(C){C.evt.preventDefault()},draggable:!1,children:(0,L.jsxs)(P.ZA,{draggable:o.currentTool=="mover",onDragEnd:function(C){},children:[(0,L.jsx)(P.Ee,{draggable:!1,image:h,x:R.x,y:R.y,offsetX:j/2,offsetY:$/2,scaleX:o.scale,scaleY:o.scale}),I]})})})};M.Z=f},44434:function(c,M,e){"use strict";var A=e(67294),v=e(80961),g=e.n(v),P=e(85893),l=function(u){var m=g().leftToolbar;return u.disLoc=="right"&&(m=g().rightToolbar),(0,P.jsx)("div",{className:m,children:u.children})};M.Z=l},61541:function(c,M,e){"use strict";var A=e(49111),v=e(19650),g=e(67294),P=e(82499),l=e.n(P),r=e(85893),u=function(L){return(0,r.jsx)("div",{unselectable:"on",className:"".concat(l().toolBarButtonContainerWrapper," ").concat(L.active&&l().toolBarButtonContainerWrapperActive),onClick:L.onClick,children:(0,r.jsx)(v.Z,{align:"center",className:l().toolBarButtonContainer,size:0,children:(0,r.jsxs)(v.Z,{align:"center",direction:"vertical",className:l().toolBarButton,size:0,children:[(0,r.jsx)("img",{src:L.imgSrc}),(0,r.jsx)("div",{className:l().buttonText,children:L.children})]})})})};M.Z=u},29214:function(c,M,e){"use strict";e.r(M);var A=e(11849),v=e(20228),g=e(11382),P=e(34669),l=e(54458),r=e(34792),u=e(48086),m=e(86582),L=e(91220),E=e(2824),f=e(67294),y=e(73199),o=e.n(y),x=e(8088),n=e(61541),h=e(44434),j=e(5041),$=e(57436),p=e(64322),s=e(85893),Y=localStorage.getItem("basePath"),N=function(){var T,H=(0,f.useState)("mover"),U=(0,E.Z)(H,2),z=U[0],K=U[1],R=(0,p.$L)(f.useState,f.useEffect,{label:{oneHot:!1,postSetCurr:S},effectTrigger:{postTaskChange:F}}),t=(0,E.Z)(R,8),_=t[0],I=t[1],b=t[2],D=t[3],d=t[4],O=t[5],a=t[6],C=t[7];function S(i){if(console.log("selectLabel",d.curr,O.curr,D.all),i.active)D.create({taskId:d.curr.taskId,labelId:i.labelId,dataId:O.curr.dataId});else{var B=D.all.filter(function(Z){return Z.labelId==i.labelId})[0];console.log("filter ann ",B),D.remove(B.annotationId)}console.log("selectlabel",i)}function F(i,B){if(!!i){var Z=(0,L.Z)(i),V;try{var J=function(){var k=V.value,G=B.filter(function(Q){return Q.label.labelId==k.labelId});G.length!=0&&(k.active=!0)};for(Z.s();!(V=Z.n()).done;)J()}catch(X){Z.e(X)}finally{Z.f()}console.log("label.all toggled",C.all),C.setAll((0,m.Z)(i))}}return(0,s.jsxs)(x.Z,{className:o().classes,children:[(0,s.jsxs)(h.Z,{children:[(0,s.jsx)(n.Z,{imgSrc:"./pics/buttons/zoom_in.png",onClick:function(){b.change(.1)},children:"Zoom in"}),(0,s.jsx)(n.Z,{imgSrc:"./pics/buttons/zoom_out.png",onClick:function(){b.change(-.1)},children:"Zoom out"}),(0,s.jsx)(n.Z,{imgSrc:"./pics/buttons/save.png",onClick:function(){u.default.info("Annotations are saved automatically. You don't need to click save.")},children:"Save"}),(0,s.jsx)(n.Z,{imgSrc:"./pics/buttons/move.png",onClick:function(){K("mover"),u.default.info("You can move the image now.")},children:"Move"})]}),(0,s.jsx)("div",{id:"dr",className:"mainStage",children:(0,s.jsxs)(g.Z,{tip:"loading",spinning:_,children:[(0,s.jsx)("div",{className:"draw",children:(0,s.jsx)($.Z,{scale:b.curr,currentTool:z,setCurrentAnnotation:function(){},onAnnotationModify:function(){},onAnnotationModifyComplete:function(){},imgSrc:O.imgSrc})}),(0,s.jsx)("div",{className:"pblock",children:(0,s.jsxs)("div",{className:"progress",children:[(0,s.jsx)(l.Z,{className:"progressBar",percent:d.progress,status:"active",showInfo:!1})," ",(0,s.jsxs)("span",{className:"progressDesc",children:["Current labeling ",d.currIdx?d.currIdx+1:1," of ",(T=d.all)===null||T===void 0?void 0:T.length,". Already labeled ",d.finished||0,"."]})]})}),(0,s.jsx)("div",{className:"prevTask",onClick:d.prevTask}),(0,s.jsx)("div",{className:"nextTask",onClick:d.nextTask})]})}),(0,s.jsxs)(h.Z,{disLoc:"right",children:[(0,s.jsx)(n.Z,{imgSrc:"./pics/buttons/export.png",children:"Export"}),(0,s.jsx)(n.Z,{imgSrc:"./pics/buttons/data_division.png",children:"Split Dataset"})]}),(0,s.jsx)("div",{className:"rightSideBar",children:(0,s.jsx)(j.Z,{labels:C.all,onLabelSelect:C.setCurr,onLabelAdd:function(B){return C.create((0,A.Z)((0,A.Z)({},B),{},{projectId:a.curr.projectId}))},onLabelDelete:C.remove,onLabelModify:function(){},hideColorPicker:!0,hideEye:!0})})]})};M.default=N}}]);
