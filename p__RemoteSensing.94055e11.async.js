(self.webpackChunkpp_labeling_frontend=self.webpackChunkpp_labeling_frontend||[]).push([[333],{52822:function(l){l.exports={roundBall:"roundBall___1pqu1",popover:"popover___1-PR6"}},32495:function(l){l.exports={listItem:"listItem___1MXXF",eye:"eye___3nddM",delete:"delete___y9u-D",roundBall:"roundBall___DMczd",popover:"popover___E0HLD",annotationId:"annotationId___1ks8N",labelName:"labelName___130ie",listItemActive:"listItemActive___1rNB-"}},38670:function(l){l.exports={labelList:"labelList___3uLRO",listHeader:"listHeader___1ZPcO",eye:"eye___2yUvw",roundBall:"roundBall___1xKCU"}},5882:function(l){l.exports={listItem:"listItem___vtDXn",eye:"eye___AsLBS",roundBall:"roundBall___1J_R3",popover:"popover___1x-2R",listItemActive:"listItemActive___3FRb7"}},56131:function(l){l.exports={labelList:"labelList___jvD05",listHeader:"listHeader___UM5UF",eye:"eye___II3Po",roundBall:"roundBall___j752J"}},78677:function(l){l.exports={container:"container___G0FNe"}},80961:function(l){l.exports={toolbar:"toolbar___3vxli"}},82499:function(l){l.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1SHWL",toolBarButtonContainer:"toolBarButtonContainer___1jKUz",toolBarButton:"toolBarButton___3Ouq1",buttonText:"buttonText___10ls7",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AA28"}},72869:function(l){l.exports={map:"map___92VPN",customControlIcon:"customControlIcon___3Ki2y"}},20474:function(l){l.exports={RSPop1:"RSPop1___vz5Me",RSPop2:"RSPop2___34pQA"}},55252:function(l){l.exports={RSPop1:"RSPop1___17x8k",RSPop2:"RSPop2___27kK5"}},2661:function(l){l.exports={toolbar:"toolbar___1o3he"}},93889:function(l){l.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___UtH8a",toolBarButtonContainer:"toolBarButtonContainer___1gFsH",toolBarButton:"toolBarButton___1Wqc1",buttonText:"buttonText___2zcKO",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AXHi"}},75513:function(l){l.exports={segment:"segment___3WmPw",mainStage:"mainStage___2kT1s",rightSideBar:"rightSideBar___11FX3",determinOutline:"determinOutline___1g1YI"}},63097:function(l,I,n){"use strict";var oe=n(20136),g=n(55241),J=n(2824),j=n(67294),h=n(52822),u=n.n(h),N=n(63144),d=n(85893),B=function(K){var H=(0,j.useState)(K.color||"#FFF"),k=(0,J.Z)(H,2),m=k[0],r=k[1];return(0,j.useEffect)(function(){r(K.color||"#FFF")},[K]),K.changeable?(0,d.jsx)(g.Z,{getPopupContainer:function(_){return _.parentElement||document.body},overlayClassName:u().popover,openClassName:u().popoverOpenClassName,placement:"bottom",content:(0,d.jsx)(N.xS,{disableAlpha:!0,color:m,onChange:function(_){r(_.hex)},onChangeComplete:K.onChange}),trigger:"click",children:(0,d.jsx)("div",{className:u().roundBall,style:{backgroundColor:m}})}):(0,d.jsx)("div",{className:u().roundBall,style:{backgroundColor:m}})};I.Z=B},5041:function(l,I,n){"use strict";n.d(I,{Z:function(){return $}});var oe=n(54421),g=n(38272),J=n(57663),j=n(71577),h=n(2824),u=n(67294),N=n(56131),d=n.n(N),B=n(49111),b=n(19650),K=n(11849),H=n(5882),k=n.n(H),m=n(63097),r=n(85893),le=function(i){var L=(0,K.Z)({},i.label),s=(0,u.useState)(L.invisible),T=(0,h.Z)(s,2),S=T[0],w=T[1],W=(0,r.jsx)(g.ZP.Item,{className:"".concat(k().listItem," ").concat(i.active?k().listItemActive:""),unselectable:"on",onClick:function(){i.onClick(L)},children:(0,r.jsxs)(b.Z,{align:"center",size:5,children:[(0,r.jsx)("a",{className:k().eye,style:{backgroundImage:S?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(){w(!S),i.onLabelModify(L)}})," ",L.name,(0,r.jsx)(m.Z,{color:L.color,changeable:!0,onChange:function(p){L.color=p.hex,i.onLabelModify(L)}})]})});return W},_=le,ge=n(71194),e=n(50146),je=n(47673),ue=n(24044),Pe=n(9715),F=n(93766),re=["#FF0000","#008000","#0000FF","#FFFF00","#FFA500","#00FFFF","#8B00FF","#FFC0CB","#7CFC00","#007FFF","#800080","#36BF36","#DAA520","#800000","#008B8B","#B22222","#E6D933","#000080","#FF00FF","#FFFF99","#87CEEB","#5C50E6","#CD5C5C","#20B2AA","#E680FF","#4D1F00","#006374","#B399FF","#8B4513","#BA55D3","#C0C0C0","#808080","#000000"],ae=function(i){var L,s,T=(0,u.useState)(((L=i.defaultLabel)===null||L===void 0?void 0:L.color)||re[i.order||0]),S=(0,h.Z)(T,2),w=S[0],W=S[1];(0,u.useEffect)(function(){var v;W(((v=i.defaultLabel)===null||v===void 0?void 0:v.color)||re[i.order||0])},[i]);var M=F.Z.useForm(),p=(0,h.Z)(M,1),z=p[0];return(0,r.jsx)(e.Z,{title:"Add Label",visible:i.visible,onCancel:i.onCancel,footer:null,children:(0,r.jsxs)(F.Z,{form:z,name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!1,labelname:(s=i.defaultLabel)===null||s===void 0?void 0:s.name},onFinish:function(R){var ve={name:R.labelname,color:w};i.onLabelAdd(ve),z.resetFields()},autoComplete:"off",children:[(0,r.jsx)(F.Z.Item,{label:"Label Name",name:"labelname",rules:[{required:!0,message:"Please input label name!"}],children:(0,r.jsx)(ue.Z,{})}),(0,r.jsx)(F.Z.Item,{label:"Select Color",name:"color",children:(0,r.jsx)(m.Z,{color:w,onChange:function(R){W(R.hex)}})}),(0,r.jsx)(F.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,r.jsxs)(b.Z,{children:[(0,r.jsx)(j.Z,{onClick:function(){var R;(R=i.onCancel)===null||R===void 0||R.call(0),z.resetFields()},children:"\u53D6\u6D88"}),(0,r.jsx)(j.Z,{type:"primary",htmlType:"submit",children:"\u786E\u5B9A"})]})})]})})},Se=ae,ie=[{color:"#FF0000",name:"Label 1"},{color:"#008000",name:"Label 2"}],pe=function(i){var L=(0,u.useState)(ie),s=(0,h.Z)(L,2),T=s[0],S=s[1],w=(0,u.useState)(!1),W=(0,h.Z)(w,2),M=W[0],p=W[1];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.ZP,{className:d().labelList,size:"large",header:(0,r.jsx)("div",{className:d().listHeader,children:"Label List"}),footer:(0,r.jsx)("div",{children:(0,r.jsx)(j.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){p(!0)},block:!0,children:"Add Label"})}),bordered:!0,dataSource:T,renderItem:function(v){var R;return(0,r.jsx)(_,{onClick:i.onLabelSelect,label:v,active:v.name==((R=i.selectedLabel)===null||R===void 0?void 0:R.name),onLabelDelete:i.onLabelDelete,onLabelModify:i.onLabelModify})}}),(0,r.jsx)(Se,{order:T.length,visible:M,onLabelAdd:function(v){T.push(v),S(T),p(!1)},onCancel:function(){p(!1)}})]})},$=pe},8088:function(l,I,n){"use strict";var oe=n(67294),g=n(78677),J=n.n(g),j=n(85893),h=function(N){return(0,j.jsx)("div",{className:"".concat(J().container," ").concat(N.className),children:N.children})};I.Z=h},44434:function(l,I,n){"use strict";var oe=n(67294),g=n(80961),J=n.n(g),j=n(85893),h=function(N){return(0,j.jsx)("div",{className:J().toolbar,children:N.children})};I.Z=h},61541:function(l,I,n){"use strict";var oe=n(49111),g=n(19650),J=n(67294),j=n(82499),h=n.n(j),u=n(85893),N=function(B){return(0,u.jsx)("div",{unselectable:"on",className:"".concat(h().toolBarButtonContainerWrapper," ").concat(B.active&&h().toolBarButtonContainerWrapperActive),onClick:B.onClick,children:(0,u.jsx)(g.Z,{align:"center",className:h().toolBarButtonContainer,size:0,children:(0,u.jsxs)(g.Z,{align:"center",direction:"vertical",className:h().toolBarButton,size:0,children:[(0,u.jsx)("img",{src:B.imgSrc}),(0,u.jsx)("div",{className:h().buttonText,children:B.children})]})})})};I.Z=N},52633:function(l,I,n){"use strict";n.r(I),n.d(I,{default:function(){return Ye}});var oe=n(20136),g=n(55241),J=n(49111),j=n(19650),h=n(62350),u=n(75443),N=n(57663),d=n(71577),B=n(2824),b=n(67294),K=n(75513),H=n.n(K),k=n(8088),m=n(61541),r=n(44434),le=n(5041),_=n(2661),ge=n.n(_),e=n(85893),je=function(a){return(0,e.jsx)("div",{className:ge().toolbar,children:a.children})},ue=je,Pe=n(93889),F=n.n(Pe),re=function(a){return(0,e.jsx)("div",{unselectable:"on",className:"".concat(F().toolBarButtonContainerWrapper," ").concat(a.active&&F().toolBarButtonContainerWrapperActive),onClick:a.onClick,children:(0,e.jsx)(j.Z,{align:"center",className:F().toolBarButtonContainer,size:0,children:(0,e.jsxs)(j.Z,{align:"center",direction:"vertical",className:F().toolBarButton,size:0,children:[(0,e.jsx)("img",{src:a.imgSrc}),(0,e.jsx)("div",{className:F().buttonText,children:a.children})]})})})},ae=re,Se=n(47673),ie=n(24044),pe=n(13062),$=n(71230),me=n(59250),i=n(13013),L=n(89032),s=n(15746),T=n(30887),S=n(54689),w=n(34792),W=n(48086),M=n(89366),p=n(57254),z=n(20474),v=n.n(z);function R(o){W.default.info("Click on menu item."),console.log("click",o)}var ve=(0,e.jsxs)(S.Z,{onClick:R,children:[(0,e.jsx)(S.Z.Item,{icon:(0,e.jsx)(M.Z,{}),children:"1st menu item"},"1"),(0,e.jsx)(S.Z.Item,{icon:(0,e.jsx)(M.Z,{}),children:"2nd menu item"},"2"),(0,e.jsx)(S.Z.Item,{icon:(0,e.jsx)(M.Z,{}),children:"3rd menu item"},"3")]}),Le=function(){return(0,e.jsxs)("div",{children:[(0,e.jsxs)($.Z,{children:[(0,e.jsx)(s.Z,{span:12,className:v().RSPop1,children:(0,e.jsx)("span",{children:"PD parameter"})}),(0,e.jsx)(s.Z,{span:12,className:v().RSPop2,children:(0,e.jsx)(i.Z,{overlay:ve,children:(0,e.jsxs)(d.Z,{style:{width:"100%"},children:["Dropdown ",(0,e.jsx)(p.Z,{})]})})})]}),(0,e.jsxs)($.Z,{children:[(0,e.jsx)(s.Z,{span:12,className:v().RSPop1,children:(0,e.jsx)("span",{children:"Simplified distance"})}),(0,e.jsx)(s.Z,{span:12,className:v().RSPop2,children:(0,e.jsx)(ie.Z,{placeholder:"Basic usage"})})]}),(0,e.jsxs)($.Z,{children:[(0,e.jsx)(s.Z,{span:12,className:v().RSPop1,children:(0,e.jsx)("span",{children:"Simplified angle"})}),(0,e.jsx)(s.Z,{span:12,className:v().RSPop2,children:(0,e.jsx)(ie.Z,{placeholder:"Basic usage"})})]}),(0,e.jsxs)($.Z,{children:[(0,e.jsx)(s.Z,{span:12,className:v().RSPop1,children:(0,e.jsx)("span",{children:"Threshold of building simplification "})}),(0,e.jsx)(s.Z,{span:12,className:v().RSPop2,children:(0,e.jsx)(ie.Z,{placeholder:"Basic usage"})})]})]})},be=Le,rn=n(98858),Y=n(4914),Me=n(55252),O=n.n(Me);function Re(o){W.default.info("Click on menu item."),console.log("click",o)}var ee=(0,e.jsxs)(S.Z,{onClick:Re,children:[(0,e.jsx)(S.Z.Item,{icon:(0,e.jsx)(M.Z,{}),children:"band_1"},"1"),(0,e.jsx)(S.Z.Item,{icon:(0,e.jsx)(M.Z,{}),children:"band_2"},"2"),(0,e.jsx)(S.Z.Item,{icon:(0,e.jsx)(M.Z,{}),children:"band_3"},"3")]}),Ee=function(){return(0,e.jsxs)("div",{children:[(0,e.jsxs)($.Z,{children:[(0,e.jsx)(s.Z,{className:O().RSPop1,children:(0,e.jsx)("span",{children:"R"})}),(0,e.jsx)(s.Z,{className:O().RSPop2,children:(0,e.jsx)(i.Z,{overlay:ee,children:(0,e.jsxs)(d.Z,{style:{width:"100%"},children:["Band ",(0,e.jsx)(p.Z,{})]})})}),(0,e.jsx)(s.Z,{className:O().RSPop1,children:(0,e.jsx)("span",{children:"G"})}),(0,e.jsx)(s.Z,{className:O().RSPop2,children:(0,e.jsx)(i.Z,{overlay:ee,children:(0,e.jsxs)(d.Z,{style:{width:"100%"},children:["Band ",(0,e.jsx)(p.Z,{})]})})}),(0,e.jsx)(s.Z,{className:O().RSPop1,children:(0,e.jsx)("span",{children:"B"})}),(0,e.jsx)(s.Z,{className:O().RSPop2,children:(0,e.jsx)(i.Z,{overlay:ee,children:(0,e.jsxs)(d.Z,{style:{width:"100%"},children:["Band ",(0,e.jsx)(p.Z,{})]})})})]}),(0,e.jsxs)($.Z,{children:[(0,e.jsx)(s.Z,{className:O().RSPop1,children:(0,e.jsx)("span",{children:"R"})}),(0,e.jsx)(s.Z,{className:O().RSPop2,children:(0,e.jsx)(i.Z,{overlay:ee,children:(0,e.jsxs)(d.Z,{style:{width:"100%"},children:["Band ",(0,e.jsx)(p.Z,{})]})})}),(0,e.jsx)(s.Z,{className:O().RSPop1,children:(0,e.jsx)("span",{children:"G"})}),(0,e.jsx)(s.Z,{className:O().RSPop2,children:(0,e.jsx)(i.Z,{overlay:ee,children:(0,e.jsxs)(d.Z,{style:{width:"100%"},children:["Band ",(0,e.jsx)(p.Z,{})]})})}),(0,e.jsx)(s.Z,{className:O().RSPop1,children:(0,e.jsx)("span",{children:"B"})}),(0,e.jsx)(s.Z,{className:O().RSPop2,children:(0,e.jsx)(i.Z,{overlay:ee,children:(0,e.jsxs)(d.Z,{style:{width:"100%"},children:["Band ",(0,e.jsx)(p.Z,{})]})})})]}),(0,e.jsxs)(Y.Z,{title:"Data source information",column:1,bordered:!0,children:[(0,e.jsx)(Y.Z.Item,{label:"FileName",children:"A/XXX.tif B/XXX.tf"}),(0,e.jsx)(Y.Z.Item,{label:"Row",children:"1234"}),(0,e.jsx)(Y.Z.Item,{label:"Column",children:"897"}),(0,e.jsx)(Y.Z.Item,{label:"Bands",children:"7 7"}),(0,e.jsx)(Y.Z.Item,{label:"DataType",children:"UInt16"}),(0,e.jsx)(Y.Z.Item,{label:"EPSG",children:"7030"}),(0,e.jsx)(Y.Z.Item,{label:"Unit",children:"m"})]})]})},De=Ee,q=n(11849),Ae=n(93224),Ie=n(41004),Oe=n(72869),Ce=n.n(Oe),cn=n(74607),Ne=function(a){var x=a.children,P=a.leafletMapRef,G=(0,Ae.Z)(a,["children","leafletMapRef"]);return b.useEffect(function(){if(P.current){var E=P.current.leafletElement;E.pm.addControls({drawMarker:!1,drawCircle:!1,drawCircleMarker:!1,drawPolyline:!1,drawRectangle:!1,drawPolygon:!1,editMode:!1,dragMode:!1,cutPolygon:!0,rotateMode:!1,removalMode:!1}),E.pm.setGlobalOptions({pmIgnore:!1}),E.pm.Toolbar.createCustomControl({name:"StoreShapes",title:"Store all shapes",block:"custom",className:Ce().customControlIcon,toggle:!1,afterClick:function(){var Q=JSON.stringify(E.pm.getGeomanDrawLayers(!0).toGeoJSON()),D="data.geojson",V=document.createElement("a");V.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(Q)),V.setAttribute("download",D),V.style.display="none",document.body.appendChild(V),V.click(),console.log(Q)}}),E.on("pm:create",function(U){a.onShapeCreate(U)}),E.on("pm:edit",function(U){a.onShapeEdit(U)})}},[]),(0,e.jsx)(Ie.Z,(0,q.Z)((0,q.Z)({ref:P},G),{},{children:x}))},Fe=Ne,ce=n(88014),Te=n(16072),de=n(18836),fe={lat:0,lng:0,zoom:2},We=function(a){var x=[fe.lat,fe.lng];return(0,e.jsx)(Fe,{leafletMapRef:a.leafletMapRef,className:Ce().map,center:x,zoom:fe.zoom,onShapeCreate:a.onShapeCreate,onShapeEdit:a.onShapeEdit,children:(0,e.jsxs)(ce.Z,{position:"topright",children:[(0,e.jsx)(ce.Z.BaseLayer,{checked:!0,name:"TianDiTu.Vector",children:(0,e.jsxs)(Te.Z,{attribution:'\xA9 <a href="https://www.tianditu.gov.cn/">TianDiTu</a> GS(2021)3715',children:[(0,e.jsx)(de.Z,{url:"https://t2.tianditu.gov.cn/DataServer?T=vec_w&X={x}&Y={y}&L={z}&tk=8e879a4cad078fd3ce7456f2737fc4cc"}),(0,e.jsx)(de.Z,{url:"https://t2.tianditu.gov.cn/DataServer?T=cva_w&X={x}&Y={y}&L={z}&tk=8e879a4cad078fd3ce7456f2737fc4cc"})]})}),(0,e.jsx)(ce.Z.BaseLayer,{name:"OpenStreetMap.Mapnik",children:(0,e.jsx)(de.Z,{attribution:'\xA9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"})}),(0,e.jsx)(ce.Z.Overlay,{name:"Esri.WorldImagery",children:(0,e.jsx)(de.Z,{attribution:"Tiles \xA9 Esri \u2014 Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"})})]})})},Ge=We,dn=n(54421),Ze=n(38272),Ue=n(38670),ye=n.n(Ue),Ke=n(32495),ne=n.n(Ke),ze=n(63097),Ve=function(a){var x=(0,q.Z)({},a.annotation),P=!1,G=(0,e.jsxs)(Ze.ZP.Item,{className:"".concat(ne().listItem," ").concat(a.active?ne().listItemActive:""),unselectable:"on",onClick:function(){a.onClick(x)},children:[(0,e.jsxs)(j.Z,{align:"center",size:5,children:[(0,e.jsx)("a",{className:ne().eye,style:{backgroundImage:P?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(){a.onAnnotationModify(x)}})," ",(0,e.jsx)("span",{className:ne().annotationId,children:x.properties.annotationId}),(0,e.jsx)("span",{className:ne().labelName,children:x.properties.labelName}),(0,e.jsx)(ze.Z,{color:x.properties.stroke})]}),(0,e.jsx)("a",{className:ne().delete,onClick:function(){a.onAnnotationDelete(x)}})]});return G},Xe=Ve,Je=function(a){return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(Ze.ZP,{className:ye().labelList,size:"large",header:(0,e.jsx)("div",{className:ye().listHeader,children:"Annotation List"}),bordered:!0,dataSource:a.annotations.features,renderItem:function(P){return(0,e.jsx)(Xe,{onClick:a.onAnnotationSelect,annotation:P,active:!1,onAnnotationDelete:a.onAnnotationDelete,onAnnotationModify:a.onAnnotationModify})},footer:(0,e.jsx)("div",{children:(0,e.jsx)(d.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){a.onAnnotationSelect(void 0)},block:!0,children:"Add Annotation"})})})})},He=Je;function ke(o){var a=(0,b.useState)(0),x=(0,B.Z)(a,2),P=x[0],G=x[1],E=(0,b.useState)(!1),U=(0,B.Z)(E,2),Q=U[0],D=U[1],V=(0,b.useState)(o.currentLabel),se=(0,B.Z)(V,2),C=se[0],he=se[1];(0,b.useEffect)(function(){he(o.currentLabel)},[o.currentLabel]);var Z=function(){var t,A=(t=o.leafletMapRef.current)===null||t===void 0?void 0:t.leafletElement.pm.globalDrawModeEnabled();console.log(A)},y=function(t){if(D(!0),t){var A,X;(A=o.leafletMapRef.current)===null||A===void 0||A.leafletElement.pm.enableDraw(t),(X=o.leafletMapRef.current)===null||X===void 0||X.leafletElement.pm.setPathOptions({color:C==null?void 0:C.color,fillColor:C==null?void 0:C.color,fillOpacity:.4}),Z()}else{var xe;(xe=o.leafletMapRef.current)===null||xe===void 0||xe.leafletElement.pm.disableDraw(t),D(!1),Z()}},c=function(t){var A;(A=o.leafletMapRef.current)===null||A===void 0||A.leafletElement.pm.disableDraw(t),D(!1),Z()},te=function(){var t;return(t=o.leafletMapRef.current)===null||t===void 0?void 0:t.leafletElement.pm.Draw.getActiveShape()},Qe=function(){if(te()=="Polygon"){var t;(t=o.leafletMapRef.current)===null||t===void 0||t.leafletElement.pm.Draw.Polygon._removeLastVertex(),Z()}else Z(),D(!1)},_e=function(){var t;(t=o.leafletMapRef.current)===null||t===void 0||t.leafletElement.pm.toggleGlobalDragMode(),Z()},we=function(){if(te()=="Polygon"){var t;(t=o.leafletMapRef.current)===null||t===void 0||t.leafletElement.pm.Draw.Polygon._finishShape(),Z(),D(!1)}else Z(),D(!1)},qe=function(){var t;(t=o.leafletMapRef.current)===null||t===void 0||t.leafletElement.pm.enableGlobalRemovalMode(),Z()},en=function(){var t;(t=o.leafletMapRef.current)===null||t===void 0||t.leafletElement.pm.toggleGlobalEditMode(),Z(),D(!1)},nn=function(){var t;console.log((t=o.leafletMapRef.current)===null||t===void 0?void 0:t.leafletElement.pm.getGeomanDrawLayers(!0)),D(!1)};console.log("operation re-rendering. currentLabel:".concat(o.currentLabel));var Be=function(t){var A=t._uid,X=t.toGeoJSON();G(P+1),console.log("storeOnDb. currentLabel:".concat(o.currentLabel)),X.properties={labelName:C==null?void 0:C.name,stroke:C==null?void 0:C.color,annotationId:P+1},console.log("Store Layer on DB. Id:"+A,X),console.log(JSON.stringify(X)),o.setAnnotations((0,q.Z)((0,q.Z)({},o.annotations),{},{features:o.annotations.features.concat(X)})),console.log((0,q.Z)((0,q.Z)({},o.annotations),{},{features:o.annotations.features.concat(X)}))};function tn(f){console.log(o.currentLabel),f.layer.bindPopup("Label: "+f.layer._uid).openPopup(),D(!1),Be(f.layer)}var on=function(t){ln(t.layer),console.log(t)};function ln(f){console.log(o.currentLabel);var t=f._uid,A=f.toGeoJSON();console.log("Update Layer on DB. Id:"+t,A)}var an=function(){var t;(t=o.leafletMapRef.current)===null||t===void 0||t.leafletElement.zoomIn(),Z()},sn=function(){var t;(t=o.leafletMapRef.current)===null||t===void 0||t.leafletElement.zoomOut(),Z()};return{polyVisable:Q,RSDraw:y,RSDrawDisable:c,removeLastVertex:Qe,moveShape:_e,finishShape:we,removeShape:qe,editMode:en,saveGeoJson:nn,storeOnDb:Be,onShapeCreate:tn,onShapeEdit:on,toolZoomIn:an,toolZoomOut:sn,currentShape:te}}var $e=function(){var a=(0,b.useState)(void 0),x=(0,B.Z)(a,2),P=x[0],G=x[1],E=(0,b.useState)(),U=(0,B.Z)(E,2),Q=U[0],D=U[1],V=(0,b.useState)({type:"FeatureCollection",features:[]}),se=(0,B.Z)(V,2),C=se[0],he=se[1];console.log("rs is re-rendering! currentLabel: ".concat(JSON.stringify(Q)));var Z=b.useRef(null),y=ke({leafletMapRef:Z,currentLabel:Q,setAnnotations:he,annotations:C});return(0,e.jsxs)(k.Z,{className:H().segment,children:[(0,e.jsxs)(r.Z,{children:[(0,e.jsx)(m.Z,{imgSrc:"./pics/buttons/intelligent_interaction.png",children:"Intelligent Interaction"}),(0,e.jsx)(g.Z,{placement:"rightTop",visible:y.polyVisable,content:(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(j.Z,{children:[(0,e.jsx)(d.Z,{type:"primary",onClick:function(){y.finishShape()},children:"Finish"}),(0,e.jsx)(d.Z,{type:"primary",onClick:function(){y.removeLastVertex()},children:"Remove Last Vertex"}),(0,e.jsx)(u.Z,{title:"Are you sure cancel this task?",okText:"Yes",cancelText:"No",children:(0,e.jsx)(d.Z,{type:"primary",onClick:function(){y.RSDrawDisable(y.currentShape())},children:"Cancel"})})]})}),trigger:P=="Polygon"?"hover":"click",children:(0,e.jsx)(m.Z,{active:P=="Polygon",imgSrc:"./pics/buttons/polygon.png",onClick:function(){G("Polygon"),y.RSDraw("Polygon")},children:"Polygon"})}),(0,e.jsx)(m.Z,{onClick:function(){y.editMode()},imgSrc:"./pics/buttons/brush.png",children:"Edit"}),(0,e.jsxs)(g.Z,{placement:"rightTop",title:"title",content:"content",trigger:P=="rubber"?"hover":"click",children:[" ",(0,e.jsx)(m.Z,{imgSrc:"./pics/buttons/rubber.png",onClick:function(){y.removeShape()},children:"Rubber"})]}),(0,e.jsx)(m.Z,{onClick:function(){y.toolZoomIn()},imgSrc:"./pics/buttons/zoom_in.png",children:"Zoom in"}),(0,e.jsx)(m.Z,{onClick:function(){y.toolZoomOut()},imgSrc:"./pics/buttons/zoom_out.png",children:"Zoom out"}),(0,e.jsx)(m.Z,{onClick:function(){y.saveGeoJson()},imgSrc:"./pics/buttons/save.png",children:"Save"}),(0,e.jsx)(m.Z,{imgSrc:"./pics/buttons/move.png",onClick:function(){return moveShape()},children:"Move"}),(0,e.jsx)(m.Z,{imgSrc:"./pics/buttons/export.png",children:"Export"}),(0,e.jsx)(m.Z,{imgSrc:"./pics/buttons/data_division.png",children:"Divide Data"}),(0,e.jsx)(m.Z,{imgSrc:"./pics/buttons/prev.png",children:"Undo"}),(0,e.jsx)(m.Z,{imgSrc:"./pics/buttons/next.png",children:"Redo"}),(0,e.jsx)(m.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:"Clear Mark"})]}),(0,e.jsx)("div",{className:H().mainStage,children:(0,e.jsx)(Ge,{leafletMapRef:Z,onShapeCreate:y.onShapeCreate,onShapeEdit:y.onShapeEdit})}),(0,e.jsxs)(ue,{children:[(0,e.jsxs)(g.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Setting of boundary simplification",content:(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(be,{})}),trigger:P=="boundry"?"click":"hover",children:[" ",(0,e.jsx)(ae,{imgSrc:"./pics/buttons/border_simplify.png",onClick:function(){G("boundry")},children:(0,e.jsx)("h2",{children:"Boundary"})})]}),(0,e.jsxs)(g.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Setting of remote sensing",content:(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(De,{})}),trigger:P=="colorgun"?"click":"hover",children:[" ",(0,e.jsx)(ae,{imgSrc:"./pics/buttons/remote_sensing_setting.png",onClick:function(){G("colorgun")},children:(0,e.jsx)("h2",{children:"Remote Sensing"})})]}),(0,e.jsxs)(g.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Switch grids",content:"content",trigger:P=="grid"?"click":"hover",children:[" ",(0,e.jsx)(ae,{imgSrc:"./pics/buttons/switch_grid.png",onClick:function(){G("grid")},children:(0,e.jsx)("h2",{children:"Grids"})})]})]}),(0,e.jsxs)("div",{className:H().rightSideBar,children:[(0,e.jsx)("div",{className:H().determinOutline,children:(0,e.jsx)(d.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",block:!0,children:"Determine Outline"})}),(0,e.jsx)(le.Z,{selectedLabel:Q,onLabelSelect:function(te){D(te),console.log(te)},onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}}),(0,e.jsx)(He,{annotations:C,onAnnotationSelect:function(){},onAnnotationAdd:function(){},onAnnotationModify:function(){},onAnnotationDelete:function(){}})]})]})},Ye=$e}}]);
