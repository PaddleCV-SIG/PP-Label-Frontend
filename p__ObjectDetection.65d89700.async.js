(self.webpackChunkpp_labeling_frontend=self.webpackChunkpp_labeling_frontend||[]).push([[408],{32774:function(A){A.exports={det:"det___2iG9x",mainStage:"mainStage___Qp8In",draw:"draw___2IpRn",pblock:"pblock___wJLzi",progress:"progress___2SU43",rightSideBar:"rightSideBar___1NCKK"}},10063:function(A,E,a){"use strict";a.r(E);var nn=a(34669),B=a(54458),u=a(2824),_=a(67294),U=a(32774),c=a.n(U),R=a(8088),s=a(61541),K=a(44434),N=a(5041),W=a(57436),k=a(14836),J=a(29919),H=a(13931),i=a(85893),f=40,w=function(){var F=(0,_.useState)(void 0),x=(0,u.Z)(F,2),g=x[0],y=x[1],G=(0,_.useState)({color:"",name:""}),h=(0,u.Z)(G,2),L=h[0],C=h[1],Q=(0,_.useState)(),O=(0,u.Z)(Q,2),d=O[0],m=O[1],Y=(0,_.useState)([]),D=(0,u.Z)(Y,2),r=D[0],P=D[1],z=(0,_.useState)(1),b=(0,u.Z)(z,2),v=b[0],S=b[1],I=function(n){n||S(1),n<.1||n>3?S(1):S(n)},l=function(n){m(n),n!=null&&n.label&&C(n.label)};(0,_.useEffect)(function(){localStorage.removeItem("history"),M([])},[]);function M(o,n){var t=localStorage.getItem("history"),e=t?JSON.parse(t):{index:-1,items:[]},j={currentAnnotation:n,annotations:o};if(JSON.stringify(e.items[e.index])!=JSON.stringify(j)){var $=e.index>f?e.index-f:0,q=e.items.splice($,e.index==0?1:e.index+1);e.items=q.concat([j]),e.index<=f?e.index++:e.index=f+1,localStorage.setItem("history",JSON.stringify(e))}}var V=function(){var n=localStorage.getItem("history");if(!!n){var t=JSON.parse(n);if(!!t&&!(t.index>=t.items.length-1)){t.index++,localStorage.setItem("history",JSON.stringify(t));var e=t.items[t.index];m(e.currentAnnotation),P(e.annotations)}}},X=function(){var n=localStorage.getItem("history");if(!!n){var t=JSON.parse(n);if(!(!t||!t.index)&&!(t.index<=0)){t.index--,localStorage.setItem("history",JSON.stringify(t));var e=t.items[t.index];m(e.currentAnnotation),P(e.annotations)}}},T=function(n){for(var t=[],e=0;e<r.length;e++)r[e].annotationId==n.annotationId?t.push(n):t.push(r[e]);l(n),P(t)},Z=(0,H.Z)({currentLabel:L,currentTool:g,annotations:r,currentAnnotation:d,onAnnotationAdd:function(n){var t=r.concat([n]);P(t),d||l(n)},onAnnotationModify:T,onMouseUp:function(){M(r,d)}}),p=Z;return(0,i.jsxs)(R.Z,{className:c().det,children:[(0,i.jsxs)(K.Z,{children:[(0,i.jsx)(J.Z,{active:g=="polygon",onClick:function(){y("polygon"),l(void 0)},children:"Polygon"}),(0,i.jsx)(s.Z,{imgSrc:"./pics/buttons/zoom_in.png",onClick:function(){I(v+.1)},children:"Zoom in"}),(0,i.jsx)(s.Z,{imgSrc:"./pics/buttons/zoom_out.png",onClick:function(){I(v-.1)},children:"Zoom out"}),(0,i.jsx)(s.Z,{imgSrc:"./pics/buttons/save.png",children:"Save"}),(0,i.jsx)(s.Z,{imgSrc:"./pics/buttons/move.png",onClick:function(){y("mover")},children:"Move"}),(0,i.jsx)(s.Z,{imgSrc:"./pics/buttons/export.png",children:"Export"}),(0,i.jsx)(s.Z,{imgSrc:"./pics/buttons/data_division.png",children:"Divide Data"}),(0,i.jsx)(s.Z,{imgSrc:"./pics/buttons/prev.png",onClick:function(){X()},children:"Undo"}),(0,i.jsx)(s.Z,{imgSrc:"./pics/buttons/next.png",onClick:function(){V()},children:"Redo"}),(0,i.jsx)(s.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:"Clear Mark"})]}),(0,i.jsxs)("div",{className:c().mainStage,children:[(0,i.jsx)("div",{className:c().draw,children:(0,i.jsx)(W.Z,{scale:v,annotations:r,currentTool:g,currentAnnotation:d,setCurrentAnnotation:l,onAnnotationModify:T,onAnnotationModifyComplete:function(){M(r,d)},onMouseDown:p.onMouseDown,onMouseMove:p.onMouseMove,onMouseUp:p.onMouseUp,createPolygonFunc:Z.createElementsFunc})}),(0,i.jsx)("div",{className:c().pblock,children:(0,i.jsx)("div",{className:c().progress,children:(0,i.jsx)(B.Z,{percent:50,status:"active"})})})]}),(0,i.jsxs)("div",{className:c().rightSideBar,children:[(0,i.jsx)(N.Z,{selectedLabel:L,onLabelSelect:function(n){C(n),l(void 0)},onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}}),(0,i.jsx)(k.Z,{selectedAnnotation:d,annotations:r,onAnnotationSelect:function(n){n!=null&&n.delete||l(n)},onAnnotationAdd:function(){},onAnnotationModify:function(){},onAnnotationDelete:function(n){P(r.filter(function(t){return t.annotationId!=n.annotationId})),l(void 0)}})]})]})};E.default=w}}]);
