(self.webpackChunkpp_labeling_frontend=self.webpackChunkpp_labeling_frontend||[]).push([[333],{55252:function(L){L.exports={RSPop1:"RSPop1___17x8k",RSPop2:"RSPop2___27kK5"}},75513:function(L){L.exports={segment:"segment___3WmPw",mainStage:"mainStage___2kT1s",draw:"draw___Ff0QW",pblock:"pblock___3sGxC",progress:"progress___KQyBx",rightSideBar:"rightSideBar___11FX3",determinOutline:"determinOutline___1g1YI"}},47712:function(L,U,t){"use strict";t.r(U),t.d(U,{default:function(){return de}});var pe=t(34669),Q=t(54458),xe=t(20136),y=t(55241),Ze=t(49111),W=t(19650),je=t(62350),Y=t(75443),ye=t(57663),g=t(71577),P=t(2824),h=t(67294),H=t(75513),S=t.n(H),$=t(8088),i=t(61541),X=t(44434),w=t(5041),q=t(49813),Pe=t(98858),f=t(4914),be=t(13062),_=t(71230),Re=t(59250),G=t(13013),Ce=t(89032),p=t(15746),De=t(30887),M=t(54689),Le=t(34792),ee=t(48086),T=t(89366),N=t(57254),ne=t(55252),x=t.n(ne),e=t(85893);function te(o){ee.default.info("Click on menu item."),console.log("click",o)}var J=(0,e.jsxs)(M.Z,{onClick:te,children:[(0,e.jsx)(M.Z.Item,{icon:(0,e.jsx)(T.Z,{}),children:"band_1"},"1"),(0,e.jsx)(M.Z.Item,{icon:(0,e.jsx)(T.Z,{}),children:"band_2"},"2"),(0,e.jsx)(M.Z.Item,{icon:(0,e.jsx)(T.Z,{}),children:"band_3"},"3")]}),oe=function(){return(0,e.jsxs)("div",{children:[(0,e.jsxs)(_.Z,{children:[(0,e.jsx)(p.Z,{className:x().RSPop1,children:(0,e.jsx)("span",{children:"R"})}),(0,e.jsx)(p.Z,{className:x().RSPop2,children:(0,e.jsx)(G.Z,{overlay:J,children:(0,e.jsxs)(g.Z,{style:{width:"100%"},children:["Band ",(0,e.jsx)(N.Z,{})]})})}),(0,e.jsx)(p.Z,{className:x().RSPop1,children:(0,e.jsx)("span",{children:"G"})}),(0,e.jsx)(p.Z,{className:x().RSPop2,children:(0,e.jsx)(G.Z,{overlay:J,children:(0,e.jsxs)(g.Z,{style:{width:"100%"},children:["Band ",(0,e.jsx)(N.Z,{})]})})}),(0,e.jsx)(p.Z,{className:x().RSPop1,children:(0,e.jsx)("span",{children:"B"})}),(0,e.jsx)(p.Z,{className:x().RSPop2,children:(0,e.jsx)(G.Z,{overlay:J,children:(0,e.jsxs)(g.Z,{style:{width:"100%"},children:["Band ",(0,e.jsx)(N.Z,{})]})})})]}),(0,e.jsxs)(f.Z,{title:"Data source information",column:1,bordered:!0,children:[(0,e.jsx)(f.Z.Item,{label:"FileName",children:"A/XXX.tif"}),(0,e.jsx)(f.Z.Item,{label:"Row",children:"1234"}),(0,e.jsx)(f.Z.Item,{label:"Column",children:"897"}),(0,e.jsx)(f.Z.Item,{label:"Bands",children:"7"}),(0,e.jsx)(f.Z.Item,{label:"DataType",children:"UInt16"}),(0,e.jsx)(f.Z.Item,{label:"EPSG",children:"7030"}),(0,e.jsx)(f.Z.Item,{label:"Unit",children:"m"})]})]})},le=oe,ae=t(97927),ie=t(37233),re=t(51327),I=t(11849);function se(o){var k=(0,h.useState)(0),b=(0,P.Z)(k,2),u=b[0],Z=b[1],F=(0,h.useState)(!1),R=(0,P.Z)(F,2),C=R[0],d=R[1];(0,h.useEffect)(function(){localStorage.setItem("currentLabel",JSON.stringify(o.currentLabel||{}))},[o.currentLabel]);var c=function(){var n,s=(n=o.leafletMapRef.current)===null||n===void 0?void 0:n.leafletElement.pm.globalDrawModeEnabled();console.log(s)},E=function(n){var s=localStorage.getItem("currentLabel");if(console.log(s),s!="{}"){var m,v;d(!0);var j=JSON.parse(s||"{}");(m=o.leafletMapRef.current)===null||m===void 0||m.leafletElement.pm.enableDraw(n),(v=o.leafletMapRef.current)===null||v===void 0||v.leafletElement.pm.setPathOptions({color:j==null?void 0:j.color,fillColor:j==null?void 0:j.color,fillOpacity:.4})}else{var z;alert("Test"),(z=o.leafletMapRef.current)===null||z===void 0||z.leafletElement.pm.disableDraw(n),d(!1)}},O=function(n){var s;(s=o.leafletMapRef.current)===null||s===void 0||s.leafletElement.pm.disableDraw(n),d(!1),c()},D=function(){var n;return(n=o.leafletMapRef.current)===null||n===void 0?void 0:n.leafletElement.pm.Draw.getActiveShape()},B=function(){if(D()=="Polygon"){var n;(n=o.leafletMapRef.current)===null||n===void 0||n.leafletElement.pm.Draw.Polygon._removeLastVertex(),c()}else c(),d(!1)},r=function(){var n;(n=o.leafletMapRef.current)===null||n===void 0||n.leafletElement.pm.toggleGlobalDragMode(),c()},l=function(){if(D()=="Polygon"){var n;(n=o.leafletMapRef.current)===null||n===void 0||n.leafletElement.pm.Draw.Polygon._finishShape(),c(),d(!1)}else c(),d(!1)},A=function(){var n;(n=o.leafletMapRef.current)===null||n===void 0||n.leafletElement.pm.enableGlobalRemovalMode(),c()},ve=function(){var n;(n=o.leafletMapRef.current)===null||n===void 0||n.leafletElement.pm.toggleGlobalEditMode(),c(),d(!1)},ue=function(){var n;console.log((n=o.leafletMapRef.current)===null||n===void 0?void 0:n.leafletElement.pm.getGeomanDrawLayers(!0)),d(!1)},K=function(n){var s=n._uid,m=n.toGeoJSON(),v=JSON.parse(localStorage.getItem("currentLabel")||"");Z(u+1),m.properties={labelName:v==null?void 0:v.name,stroke:v==null?void 0:v.color,annotationId:u+1},console.log("Store Layer on DB. Id:"+s,m),console.log(JSON.stringify(m)),o.setAnnotations((0,I.Z)((0,I.Z)({},o.annotations),{},{features:o.annotations.features.concat(m)})),console.log((0,I.Z)((0,I.Z)({},o.annotations),{},{features:o.annotations.features.concat(m)}))};function me(a){a.layer.bindPopup("Label: "+a.layer._uid).openPopup(),d(!1),K(a.layer)}var fe=function(n){ge(n.layer)};function ge(a){var n=a._uid,s=a.toGeoJSON();console.log("Update Layer on DB. Id:"+n,s)}var he=function(){var n;(n=o.leafletMapRef.current)===null||n===void 0||n.leafletElement.zoomIn(),c()},Se=function(){var n;(n=o.leafletMapRef.current)===null||n===void 0||n.leafletElement.zoomOut(),c()};return{polyVisable:C,RSDraw:E,RSDrawDisable:O,removeLastVertex:B,moveShape:r,finishShape:l,removeShape:A,editMode:ve,saveGeoJson:ue,storeOnDb:K,onShapeCreate:me,onShapeEdit:fe,toolZoomIn:he,toolZoomOut:Se,currentShape:D}}var V=t(27992),ce=function(){var k=(0,h.useState)(void 0),b=(0,P.Z)(k,2),u=b[0],Z=b[1],F=(0,h.useState)(),R=(0,P.Z)(F,2),C=R[0],d=R[1],c=(0,h.useState)({type:"FeatureCollection",features:[]}),E=(0,P.Z)(c,2),O=E[0],D=E[1];console.log("rs is re-rendering! currentLabel: ".concat(JSON.stringify(C)));var B=h.useRef(null),r=se({leafletMapRef:B,currentLabel:C,setAnnotations:D,annotations:O});return(0,e.jsxs)($.Z,{className:S().segment,children:[(0,e.jsxs)(X.Z,{children:[(0,e.jsx)(i.Z,{imgSrc:"./pics/buttons/intelligent_interaction.png",children:"Intelligent Interaction"}),(0,e.jsx)(y.Z,{placement:"rightTop",visible:r.polyVisable,content:(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(W.Z,{children:[(0,e.jsx)(g.Z,{type:"primary",onClick:function(){r.finishShape()},children:"Finish"}),(0,e.jsx)(g.Z,{type:"primary",onClick:function(){r.removeLastVertex()},children:"Remove Last Vertex"}),(0,e.jsx)(Y.Z,{title:"Are you sure cancel this task?",okText:"Yes",cancelText:"No",children:(0,e.jsx)(g.Z,{type:"primary",onClick:function(){r.RSDrawDisable(r.currentShape())},children:"Cancel"})})]})}),trigger:u=="Polygon"?"hover":"click",children:(0,e.jsx)(i.Z,{active:u=="Polygon",imgSrc:"./pics/buttons/polygon.png",onClick:function(){Z("Polygon"),r.RSDraw("Polygon")},children:"Polygon"})}),(0,e.jsx)(i.Z,{onClick:function(){r.editMode()},imgSrc:"./pics/buttons/brush.png",children:"Edit"}),(0,e.jsxs)(y.Z,{placement:"rightTop",title:"title",content:"content",trigger:u=="rubber"?"hover":"click",children:[" ",(0,e.jsx)(i.Z,{imgSrc:"./pics/buttons/rubber.png",onClick:function(){r.removeShape()},children:"Rubber"})]}),(0,e.jsx)(i.Z,{onClick:function(){r.toolZoomIn()},imgSrc:"./pics/buttons/zoom_in.png",children:"Zoom in"}),(0,e.jsx)(i.Z,{onClick:function(){r.toolZoomOut()},imgSrc:"./pics/buttons/zoom_out.png",children:"Zoom out"}),(0,e.jsx)(i.Z,{onClick:function(){r.saveGeoJson()},imgSrc:"./pics/buttons/save.png",children:"Save"}),(0,e.jsx)(i.Z,{imgSrc:"./pics/buttons/move.png",onClick:function(){return r.moveShape()},children:"Move"}),(0,e.jsx)(i.Z,{imgSrc:"./pics/buttons/export.png",children:"Export"}),(0,e.jsx)(i.Z,{imgSrc:"./pics/buttons/data_division.png",children:"Divide Data"}),(0,e.jsx)(i.Z,{imgSrc:"./pics/buttons/prev.png",children:"Undo"}),(0,e.jsx)(i.Z,{imgSrc:"./pics/buttons/next.png",children:"Redo"}),(0,e.jsx)(i.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:"Clear Mark"})]}),(0,e.jsxs)("div",{className:S().mainStage,children:[(0,e.jsx)("div",{className:S().draw,children:(0,e.jsx)(ie.Z,{leafletMapRef:B,onShapeCreate:r.onShapeCreate,onShapeEdit:r.onShapeEdit})}),(0,e.jsx)("div",{className:S().pblock,children:(0,e.jsx)("div",{className:S().progress,children:(0,e.jsx)(Q.Z,{percent:50,status:"active"})})})]}),(0,e.jsxs)(X.Z,{disLoc:"right",children:[(0,e.jsx)(V.Z,{imgSrc:"./pics/buttons/threshold.png",disLoc:"left",children:"Segment Threshold"}),(0,e.jsx)(V.Z,{imgSrc:"./pics/buttons/alpha.png",disLoc:"left",children:"Diaphaneity"}),(0,e.jsx)(V.Z,{imgSrc:"./pics/buttons/radius.png",disLoc:"left",children:"Visual Radius"}),(0,e.jsxs)(y.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Setting of boundary simplification",content:(0,e.jsx)(q.Z,{}),trigger:u=="boundry"?"click":"hover",children:[" ",(0,e.jsx)(i.Z,{imgSrc:"./pics/buttons/border_simplify.png",onClick:function(){Z("boundry")},children:"Boundary"})]}),(0,e.jsxs)(y.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Setting of remote sensing",content:(0,e.jsx)(le,{}),trigger:u=="colorgun"?"click":"hover",children:[" ",(0,e.jsx)(i.Z,{imgSrc:"./pics/buttons/remote_sensing_setting.png",onClick:function(){Z("colorgun")},children:"Remote Sensing"})]}),(0,e.jsxs)(y.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Switch grids",content:(0,e.jsx)(ae.Z,{}),trigger:u=="grid"?"click":"hover",children:[" ",(0,e.jsx)(i.Z,{imgSrc:"./pics/buttons/switch_grid.png",onClick:function(){Z("grid")},children:"Grids"})]})]}),(0,e.jsxs)("div",{className:S().rightSideBar,children:[(0,e.jsx)("div",{className:S().determinOutline,children:(0,e.jsx)(g.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",block:!0,children:"Determine Outline"})}),(0,e.jsx)(w.Z,{selectedLabel:C,onLabelSelect:function(A){d(A),console.log(A)},onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}}),(0,e.jsx)(re.Z,{annotations:O,onAnnotationSelect:function(){},onAnnotationAdd:function(){},onAnnotationModify:function(){},onAnnotationDelete:function(){}})]})]})},de=ce}}]);
