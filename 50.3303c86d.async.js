(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[50],{85024:function(L){L.exports={listItem:"listItem___u4Q82",eye:"eye___BwaRm",delete:"delete___31JB_",roundBall:"roundBall___23A7l",popover:"popover___1BNET",annotationId:"annotationId___zAzX4",labelName:"labelName___2ohxn",listItemActive:"listItemActive___2QnA3"}},56159:function(L){L.exports={labelList:"labelList___v7C6K",listHeader:"listHeader___1aY8R",eye:"eye___2MKbp",roundBall:"roundBall___187XH"}},57560:function(L){L.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___147XP",toolBarButtonContainer:"toolBarButtonContainer___ZEvhK",toolBarButton:"toolBarButton___1s2Rh",buttonText:"buttonText___3NTCv",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___2Utx8",popover:"popover___3PRoi"}},26647:function(L){L.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1FTWb",toolBarButtonContainer:"toolBarButtonContainer___1Vahn",toolBarButton:"toolBarButton___3mR2H",buttonText:"buttonText___Y0WDm",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3lRZ8",popover:"popover___3zzu2",slider:"slider___ALra-",popoverLeft:"popoverLeft___15lGe"}},14836:function(L,b,n){"use strict";n.d(b,{Z:function(){return s}});var W=n(54421),g=n(38272),B=n(57663),O=n(71577),E=n(67294),A=n(56159),h=n.n(A),T=n(49111),U=n(19650),e=n(2824),M=n(11849),t=n(85024),l=n.n(t),c=n(63097),a=n(85893),r=function(o){var _=(0,M.Z)({},o.annotation),P=(0,E.useState)(_.invisible),d=(0,e.Z)(P,2),i=d[0],f=d[1],x=(0,E.useState)(0),D=(0,e.Z)(x,2),y=D[0],I=D[1];(0,E.useEffect)(function(){f(o.annotation.invisible)},[o.annotation.invisible]);var j=(0,a.jsxs)(g.ZP.Item,{className:"".concat(l().listItem," ").concat(o.active?l().listItemActive:""),unselectable:"on",onClick:function(){o.onClick(_)},children:[(0,a.jsxs)(U.Z,{align:"center",size:5,children:[(0,a.jsx)("a",{className:l().eye,style:{backgroundImage:i?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(S){S.stopPropagation(),f(!i),o.onAnnotationModify(_)}})," ",(0,a.jsx)("span",{className:l().annotationId,children:_.frontendId}),(0,a.jsx)("span",{className:l().labelName,children:_.label.name}),(0,a.jsx)(c.Z,{color:_.label.color})]}),(0,a.jsx)("a",{className:l().delete,onClick:function(S){S.stopPropagation();var K=new Date().getTime();K-y<300||(I(K),o.onAnnotationDelete(_))}})]});return j},v=r,m=n(48971),u=function(o){var _=(0,m.YB)().formatMessage({id:"component.PPAnnotationList.annotationList"}),P=(0,m.YB)().formatMessage({id:"component.PPAnnotationList.addAnnotation"});return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(g.ZP,{className:h().labelList,size:"large",header:(0,a.jsx)("div",{className:h().listHeader,children:_}),bordered:!0,dataSource:o.annotations,renderItem:function(i){var f;return(0,a.jsx)(v,{onClick:o.onAnnotationSelect,annotation:i,active:i.frontendId==((f=o.currAnnotation)===null||f===void 0?void 0:f.frontendId),onAnnotationDelete:o.onAnnotationDelete,onAnnotationModify:o.onAnnotationModify})},footer:(0,a.jsx)("div",{children:(0,a.jsx)(O.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){o.onAnnotationAdd()},block:!0,children:P})})})})},s=u},58967:function(L,b,n){"use strict";var W=n(20136),g=n(55241),B=n(77883),O=n(70507),E=n(57663),A=n(71577),h=n(2824),T=n(67294),U=n(61541),e=n(57560),M=n.n(e),t=n(85893),l=1,c=50,a=10;function r(m){return m?m<=l?l:m>=c?c:m:a}var v=function(u){var s=(0,T.useState)(r(u.size)),C=(0,h.Z)(s,2),o=C[0],_=C[1],P=function(i){_(r(i))};return(0,T.useEffect)(function(){P(u.size)},[u.size]),(0,t.jsxs)(g.Z,{overlayClassName:M().popover,placement:"right",content:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(A.Z,{type:"text",onClick:function(){var i,f=r(o-1);P(f),(i=u.onChange)===null||i===void 0||i.call(0,f)},children:"-"}),(0,t.jsx)(O.Z,{min:l,max:c,value:o,onChange:function(i){var f;(f=u.onChange)===null||f===void 0||f.call(0,i)},controls:!1,style:{textAlign:"center"}}),(0,t.jsx)(A.Z,{type:"text",onClick:function(){var i,f=r(o+1);P(f),(i=u.onChange)===null||i===void 0||i.call(0,f)},children:"+"})]}),trigger:u.active?"hover":"click",children:[" ",(0,t.jsx)(U.Z,{active:u.active,imgSrc:u.imgSrc||"./pics/buttons/brush.png",onClick:u.onClick,children:u.children||"Brush"})]})};b.Z=v},27992:function(L,b,n){"use strict";var W=n(20136),g=n(55241),B=n(13062),O=n(71230),E=n(77883),A=n(70507),h=n(89032),T=n(15746),U=n(66126),e=n(75454),M=n(2824),t=n(67294),l=n(61541),c=n(26647),a=n.n(c),r=n(85893),v=0,m=100,u=10,s=function(o){var _=(0,t.useState)(y(o.size)),P=(0,M.Z)(_,2),d=P[0],i=P[1];function f(I){i(y(I))}var x=o.minSize==null?v:o.minSize,D=o.maxSize==null?m:o.maxSize;function y(I){return I==null?u:I<=x?x:I>=D?D:I}return(0,t.useEffect)(function(){f(o.size),console.log("props.size changed to:".concat(o.size))},[o.size]),(0,r.jsxs)(g.Z,{overlayClassName:"".concat(a().popover," ").concat(o.disLoc=="left"?a().popoverLeft:""),placement:o.disLoc||"right",content:(0,r.jsxs)(O.Z,{children:[(0,r.jsx)(T.Z,{span:16,children:(0,r.jsx)(e.Z,{className:a().slider,value:d,max:D,min:x,onChange:function(j){var R;(R=o.onChange)===null||R===void 0||R.call(0,j)},tooltipVisible:!1})}),(0,r.jsx)(T.Z,{span:8,children:(0,r.jsx)(A.Z,{min:x,max:D,value:d,onChange:function(j){var R;(R=o.onChange)===null||R===void 0||R.call(0,j)},step:10})})]}),trigger:"hover",children:[" ",(0,r.jsx)(l.Z,{imgSrc:o.imgSrc||"",onClick:o.onClick,children:o.children})]})};b.Z=s},29919:function(L,b,n){"use strict";var W=n(67294),g=n(61541),B=n(85893),O=function(A){return(0,B.jsx)(g.Z,{active:A.active,imgSrc:A.imgSrc||"./pics/buttons/polygon.png",onClick:A.onClick,children:A.children})};b.Z=O},11189:function(L,b,n){"use strict";n.d(b,{Z:function(){return M}});var W=n(11849),g=n(2824),B=n(91220),O=n(67294),E=n(65031),A=n(33522),h=n(85893);function T(t,l,c,a){if(!(!t||!l||!c||!a))return{width:t,color:l,points:c,tool:a}}function U(t){if(!t.annotation||!t.annotation.points)return(0,h.jsx)(h.Fragment,{});var l=[],c=(0,B.Z)(t.annotation.points),a;try{for(c.s();!(a=c.n()).done;){var r=a.value;if(!(!r.width||!r.color||!r.tool)){var v=(0,A.o)(r.color);!v||l.push((0,h.jsx)(E.x1,{stroke:"rgba(".concat(v.r,", ").concat(v.g,", ").concat(v.b,", ").concat(t.transparency*.01,")"),strokeWidth:r.width,globalCompositeOperation:r.tool==="brush"?"source-over":"destination-out",lineCap:"round",points:r.points,tension:1}))}}}catch(m){c.e(m)}finally{c.f()}return(0,h.jsx)(E.ZA,{draggable:!1,children:l})}function e(t,l){return t=="rubber"||l==2?"rubber":"brush"}function M(t){var l=(0,O.useState)(),c=(0,g.Z)(l,2),a=c[0],r=c[1],v=function(C,o,_,P){var d,i;if(!(t.currentTool!="brush"&&t.currentTool!="rubber"||!((d=t.currentLabel)!==null&&d!==void 0&&d.color))){var f=(C.evt.offsetX+o)/P,x=(C.evt.offsetY+_)/P,D=e(t.currentTool,C.evt.button),y=T(t.brushSize||10,(i=t.currentLabel)===null||i===void 0?void 0:i.color,[f,x,f,x],D);if(!!y)if(r(D),t.currentAnnotation){var I,j={type:"brush",frontendId:t.currentAnnotation.frontendId,label:t.currentAnnotation.label,points:(I=t.currentAnnotation.points)===null||I===void 0?void 0:I.concat([y])};t.onAnnotationModify(j)}else{if(D=="rubber")return;t.onAnnotationAdd({type:D,frontendId:getMaxId(t.annotations)+1,label:t.currentLabel,points:[y]})}}},m=function(C,o,_,P){var d;if(!(!a||!t.currentAnnotation||!t.currentLabel.color)){var i=(C.evt.offsetX+o)/P,f=(C.evt.offsetY+_)/P,x=[i,f],D=[];(d=t.currentAnnotation)!==null&&d!==void 0&&d.points&&(x=t.currentAnnotation.points[t.currentAnnotation.points.length-1].points.concat(x),D=t.currentAnnotation.points);var y=T(t.brushSize||10,t.currentLabel.color,x,a);!y||(D.pop(),D.push(y),t.onAnnotationModify((0,W.Z)((0,W.Z)({},t.currentAnnotation),{},{points:D,type:a})))}},u=function(){t.currentTool!="brush"&&t.currentTool!="rubber"||(r(void 0),t.onMouseUp())};return{onMouseDown:v,onMouseMove:m,onMouseUp:u,createElementsFunc:U}}},50242:function(L,b,n){"use strict";n.d(b,{Z:function(){return U}});var W=n(91220),g=n(11849),B=n(65031),O=n(33522),E=n(85893);function A(e,M){if(!(!e||!M))return{color:e,points:M}}function h(e){if(!e.annotation||!e.annotation.points||!e.annotation.points[0])return[(0,E.jsx)(E.Fragment,{})];var M=e.annotation.points[0].points,t=e.annotation.points[0].color,l=(0,O.o)(t);if(!l)return[(0,E.jsx)(E.Fragment,{})];var c=.3,a=void 0,r=[];return M.forEach(function(v,m){if(!a){a=v;return}r.push((0,E.jsx)(B.Cd,{onMouseDown:function(){e.currentTool=="editor"&&e.onSelect(e.annotation)},draggable:e.currentTool=="editor",onDragMove:function(s){var C;s.cancelBubble=!0;var o=(C=e.stageRef)===null||C===void 0?void 0:C.current,_=o.findOne(".baseImage"),P=!1,d=s.target.x();d>_.width()/2&&(d=_.width()/2,P=!0),d<-_.width()/2&&(d=-_.width()/2,P=!0);var i=s.target.y();i>_.height()/2&&(i=_.height()/2,P=!0),i<-_.height()/2&&(i=-_.height()/2,P=!0),P&&s.target.setPosition({x:d,y:i}),M[m-1]=d,M[m]=i;var f=(0,g.Z)((0,g.Z)({},e.annotation),{},{points:[{color:t,points:M}]});e.onDrag(f)},onMouseOver:function(){var s;e.currentTool=="editor"&&(s=e.stageRef)!==null&&s!==void 0&&s.current&&(e.stageRef.current.container().style.cursor="cell")},onMouseOut:function(){var s;e.currentTool=="editor"&&(s=e.stageRef)!==null&&s!==void 0&&s.current&&(e.stageRef.current.container().style.cursor="default")},x:a,y:v,radius:5/e.scale,fill:t})),a=void 0}),[(0,E.jsxs)(B.ZA,{children:[(0,E.jsx)(B.x1,{onMouseOver:function(){e.currentTool=="editor"&&(document.body.style.cursor="pointer")},onMouseOut:function(){document.body.style.cursor="default"},onClick:function(){e.currentTool=="editor"&&e.onSelect(e.annotation)},stroke:t,strokeWidth:2/e.scale,globalCompositeOperation:"source-over",lineCap:"round",points:M,tension:0,closed:!0,fill:"rgba(".concat(l.r,", ").concat(l.g,", ").concat(l.b,", ").concat(c,")")}),r]},e.annotation.frontendId)]}function T(e){var M=0,t=(0,W.Z)(e),l;try{for(t.s();!(l=t.n()).done;){var c=l.value;!c||!c.frontendId||c.frontendId>M&&(M=c.frontendId)}}catch(a){t.e(a)}finally{t.f()}return M}function U(e){var M=function(r,v,m,u){var s,C=(r.evt.offsetX+v)/u,o=(r.evt.offsetY+m)/u,_=A((s=e.currentLabel)===null||s===void 0?void 0:s.color,[C,o]);!_||e.onAnnotationAdd({type:"polygon",frontendId:T(e.annotations)+1,label:e.currentLabel,points:[_]})},t=function(r,v,m,u){var s,C;if(!!e.currentAnnotation){var o=(r.evt.offsetX+v)/u,_=(r.evt.offsetY+m)/u,P=e.currentAnnotation.points||[],d=A((s=e.currentLabel)===null||s===void 0?void 0:s.color,(C=P[0])===null||C===void 0?void 0:C.points.concat([o,_]));if(!!d){var i={type:"polygon",frontendId:e.currentAnnotation.frontendId,label:e.currentAnnotation.label,points:[d]};e.onAnnotationModify(i)}}},l=function(r,v,m,u){e.currentTool=="polygon"&&(e.currentAnnotation?t(r,v,m,u):M(r,v,m,u))},c=function(){e.currentTool=="polygon"&&e.onMouseUp()};return{onMouseDown:l,onMouseMove:function(){},onMouseUp:c,createElementsFunc:h}}},33522:function(L,b,n){"use strict";n.d(b,{o:function(){return g}});function W(B){var O=0,E=_createForOfIteratorHelper(B),A;try{for(E.s();!(A=E.n()).done;){var h=A.value;!h||!h.frontendId||h.frontendId>O&&(O=h.frontendId)}}catch(T){E.e(T)}finally{E.f()}return O}function g(B){var O=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(B);return O?{r:parseInt(O[1],16),g:parseInt(O[2],16),b:parseInt(O[3],16)}:null}}}]);
