(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[507],{52822:function(c){c.exports={roundBall:"roundBall___1pqu1",popover:"popover___1-PR6"}},5882:function(c){c.exports={listItem:"listItem___vtDXn",eye:"eye___AsLBS",roundBall:"roundBall___1J_R3",popover:"popover___1x-2R",delete:"delete___WHPf2",listItemActive:"listItemActive___3FRb7"}},56131:function(c){c.exports={labelList:"labelList___jvD05",listHeader:"listHeader___UM5UF",eye:"eye___II3Po",roundBall:"roundBall___j752J"}},78677:function(c){c.exports={container:"container___G0FNe"}},80961:function(c){c.exports={leftToolbar:"leftToolbar___1xi4t",rightToolbar:"rightToolbar___3dNSB"}},82499:function(c){c.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1SHWL",toolBarButtonContainer:"toolBarButtonContainer___1jKUz",toolBarButton:"toolBarButton___3Ouq1",buttonText:"buttonText___10ls7",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AA28"}},63097:function(c,E,n){"use strict";var N=n(20136),_=n(55241),v=n(2824),s=n(67294),r=n(52822),i=n.n(r),a=n(63144),C=n(85893),F=function(B){var t=(0,s.useState)(B.color||"#FFF"),A=(0,v.Z)(t,2),I=A[0],e=A[1];return(0,s.useEffect)(function(){e(B.color||"#FFF")},[B]),B.changeable?(0,C.jsx)(_.Z,{getPopupContainer:function(W){return W.parentElement||document.body},overlayClassName:i().popover,openClassName:i().popoverOpenClassName,placement:"bottom",content:(0,C.jsx)(a.xS,{disableAlpha:!0,color:I,onChange:function(W){e(W.hex)},onChangeComplete:B.onChange}),trigger:"click",children:(0,C.jsx)("div",{className:i().roundBall,style:{backgroundColor:I}})}):(0,C.jsx)("div",{className:i().roundBall,style:{backgroundColor:I}})};E.Z=F},5041:function(c,E,n){"use strict";n.d(E,{Z:function(){return ne}});var N=n(54421),_=n(38272),v=n(57663),s=n(71577),r=n(2824),i=n(67294),a=n(56131),C=n.n(a),F=n(49111),Y=n(19650),B=n(11849),t=n(5882),A=n.n(t),I=n(63097),e=n(85893),H=function(o){var d=(0,B.Z)({},o.label),h=(0,i.useState)(d.invisible),f=(0,r.Z)(h,2),P=f[0],R=f[1],M=(0,i.useState)(0),T=(0,r.Z)(M,2),y=T[0],O=T[1],b=o.hideEye?" ":(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("a",{className:A().eye,style:{backgroundImage:P?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(x){x.stopPropagation(),R(!P),o.onLabelModify(d)}})," "]}),L=o.hideColorPicker?(0,e.jsx)(e.Fragment,{}):(0,e.jsx)(I.Z,{color:d.color,changeable:!0,onChange:function(x){d.color=x.hex,o.onLabelModify(d)}}),Z=(0,e.jsxs)(_.ZP.Item,{className:"".concat(A().listItem," ").concat(o.active?A().listItemActive:""),unselectable:"on",onClick:function(){o.onClick(d)},children:[(0,e.jsxs)(Y.Z,{align:"center",size:5,children:[b,d.name,L]}),(0,e.jsx)("a",{className:A().delete,onClick:function(x){x.stopPropagation();var U=new Date().getTime();U-y<300||(O(U),o.onLabelDelete(d))}})]});return Z},W=H,p=n(71194),X=n(50146),m=n(47673),q=n(24044),ee=n(9715),j=n(93766),w=n(48971),G=["#FF0000","#008000","#0000FF","#FFFF00","#FFA500","#00FFFF","#8B00FF","#FFC0CB","#7CFC00","#007FFF","#800080","#36BF36","#DAA520","#800000","#008B8B","#B22222","#E6D933","#000080","#FF00FF","#FFFF99","#87CEEB","#5C50E6","#CD5C5C","#20B2AA","#E680FF","#4D1F00","#006374","#B399FF","#8B4513","#BA55D3","#C0C0C0","#808080","#000000"],k=function(o){var d,h,f=(0,w.YB)(),P=f.formatMessage({id:"component.PPAddLabelModal.selectColor"}),R=f.formatMessage({id:"component.PPAddLabelModal.addLabel"}),M=f.formatMessage({id:"component.PPAddLabelModal.labelName"}),T=f.formatMessage({id:"component.PPCreater.cancel"}),y=f.formatMessage({id:"component.PPSegMode.ok"}),O=(0,i.useState)(((d=o.defaultLabel)===null||d===void 0?void 0:d.color)||G[o.order||0]),b=(0,r.Z)(O,2),L=b[0],Z=b[1];(0,i.useEffect)(function(){var D;Z(((D=o.defaultLabel)===null||D===void 0?void 0:D.color)||G[o.order||0])},[o]);var S=o.hideColorPicker?(0,e.jsx)(e.Fragment,{}):(0,e.jsx)(j.Z.Item,{label:P,name:"color",children:(0,e.jsx)(I.Z,{color:L,changeable:!0,onChange:function(g){Z(g.hex)}})}),x=j.Z.useForm(),U=(0,r.Z)(x,1),K=U[0];return(0,e.jsx)(X.Z,{title:R,visible:o.visible,onCancel:o.onCancel,footer:null,children:(0,e.jsxs)(j.Z,{form:K,name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!1,labelname:(h=o.defaultLabel)===null||h===void 0?void 0:h.name},onFinish:function(g){var $={name:g.labelname,color:L};o.onLabelAdd($),K.resetFields()},autoComplete:"off",children:[(0,e.jsx)(j.Z.Item,{label:M,name:"labelname",rules:[{required:!0,message:"Please input label name!"}],children:(0,e.jsx)(q.Z,{})}),S,(0,e.jsx)(j.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,e.jsxs)(Y.Z,{children:[(0,e.jsx)(s.Z,{onClick:function(){var g;(g=o.onCancel)===null||g===void 0||g.call(0),K.resetFields()},children:T}),(0,e.jsx)(s.Z,{type:"primary",htmlType:"submit",children:y})]})})]})})},V=k,Q=function(o){var d,h=(0,w.YB)(),f=h.formatMessage({id:"component.PPLabelList.addLabel"}),P=h.formatMessage({id:"component.PPLabelList.labelList"}),R=(0,i.useState)(!1),M=(0,r.Z)(R,2),T=M[0],y=M[1];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(_.ZP,{className:C().labelList,size:"large",header:(0,e.jsx)("div",{className:C().listHeader,children:P}),footer:(0,e.jsx)("div",{children:(0,e.jsx)(s.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){y(!0)},block:!0,children:f})}),bordered:!0,dataSource:o.labels,renderItem:function(b){var L;return(0,e.jsx)(W,{hideColorPicker:o.hideColorPicker,hideEye:o.hideEye,onClick:o.onLabelSelect,label:b,active:(L=o.activeIds)===null||L===void 0?void 0:L.has(b.labelId),onLabelDelete:o.onLabelDelete,onLabelModify:o.onLabelModify})}}),(0,e.jsx)(V,{hideColorPicker:o.hideColorPicker,order:(d=o.labels)===null||d===void 0?void 0:d.length,visible:T,onLabelAdd:function(b){o.onLabelAdd(b),y(!1)},onCancel:function(){y(!1)}})]})},ne=Q},8088:function(c,E,n){"use strict";var N=n(67294),_=n(78677),v=n.n(_),s=n(85893),r=function(a){return(0,s.jsx)("div",{className:"".concat(v().container," ").concat(a.className),children:a.children})};E.Z=r},57436:function(c,E,n){"use strict";var N=n(91220),_=n(2824),v=n(67294),s=n(65031),r=n(84420),i=n.n(r),a=n(85893),C="./pics/basketball.jpg";function F(B){switch(B){case"mover":return"move";case"rectangle":case"polygon":return"crosshair";default:return"default"}}var Y=function(t){var A=i()(t.imgSrc||""),I=(0,_.Z)(A,1),e=I[0],H=(e==null?void 0:e.width)||0,W=(e==null?void 0:e.height)||0,p=t.transparency==null?0:t.transparency*.01,X=void 0;t.currentTool=="polygon"||t.currentTool=="rectangle"||t.currentTool=="editor"?X=t.drawTool.polygon:(t.currentTool=="brush"||t.currentTool=="rubber")&&(X=t.drawTool.brush);var m=X,q=(0,v.useState)(0),ee=(0,_.Z)(q,2),j=ee[0],w=ee[1],G=(0,v.useState)(0),k=(0,_.Z)(G,2),V=k[0],Q=k[1],ne=(0,v.useState)({x:0,y:0}),J=(0,_.Z)(ne,2),o=J[0],d=J[1],h=(0,v.useRef)(null),f=(0,v.useRef)(null),P=(0,v.useRef)(null);function R(){var u=document.getElementById("dr");u&&(w(u.clientWidth),Q(u.clientHeight))}(0,v.useEffect)(function(){window.removeEventListener("resize",R),window.addEventListener("resize",R);var u=document.getElementById("dr");u&&(w(u.clientWidth),Q(u.clientHeight))},[]),(0,v.useEffect)(function(){!h.current||(h.current.container().style.cursor=F(t.currentTool))},[t.currentTool]);var M=function(l){return{e:l,mouseX:(l.evt.offsetX-o.x-j/2)/t.scale+H/2,mouseY:(l.evt.offsetY-o.y-V/2)/t.scale+W/2,offsetX:-H/2,offsetY:-W/2,canvasRef:P,layerRef:f}},T=function(l){m==null||m.onMouseDown(M(l))},y=function(l){m==null||m.onMouseMove(M(l))};console.log("drawtool",m);var O=function(l){m==null||m.onFinishEdit(M(l)),console.log("on finish edit")},b=function(l){},L=function(l){!m||(m==null||m.onMouseUp(M(l)),O(l))},Z=function(l){l.cancelBubble=!0,l.evt.preventDefault()},S=[];if(t.annotations){var x,U,K={onDrag:t.onAnnotationModify,onDragEnd:t.onAnnotationModifyComplete,scale:t.scale,currentTool:t.currentTool,onSelect:t.setCurrentAnnotation,stageRef:h,currentAnnotation:t.currentAnnotation,transparency:p,canvasRef:P},D=(x=P.current)===null||x===void 0?void 0:x.getContext("2d");D&&D.clearRect(0,0,D.canvas.width,D.canvas.height);var g=(0,N.Z)(t.annotations),$;try{for(g.s();!($=g.n()).done;){var z=$.value;if(!!z){K.annotation=z;var te=void 0;if(z.type=="polygon"||z.type=="rectangle")te=t.drawTool.polygon.drawAnnotation(K);else if(z.type=="brush"||z.type=="rubber"){var oe;te=(oe=t.drawTool.brush)===null||oe===void 0?void 0:oe.drawAnnotation(K)}else continue;S.push(te)}}}catch(u){g.e(u)}finally{g.f()}(U=f.current)===null||U===void 0||U.batchDraw()}var ae=t.currentTool=="mover";return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("canvas",{style:{display:"none"},id:"virtualCanvas",width:e==null?void 0:e.width,height:e==null?void 0:e.height}),(0,a.jsx)("canvas",{style:{display:"none"},id:"singleLineCanvas",width:e==null?void 0:e.width,height:e==null?void 0:e.height}),(0,a.jsx)("canvas",{style:{display:"none"},id:"canvasId",ref:P,width:e==null?void 0:e.width,height:e==null?void 0:e.height}),(0,a.jsx)("svg",{width:"0",height:"0",style:{position:"absolute",zIndex:"-1"},children:(0,a.jsx)("defs",{children:(0,a.jsx)("filter",{id:"remove-alpha",x:"0",y:"0",width:"100%",height:"100%",children:(0,a.jsx)("feComponentTransfer",{children:(0,a.jsx)("feFuncA",{type:"discrete",tableValues:"0 1"})})})})}),(0,a.jsxs)(s.Hf,{width:j,height:V,offsetX:-j/2,offsetY:-V/2,className:"stage",ref:h,draggable:ae,onDragMove:function(l){t.currentTool=="mover"},onDragEnd:function(l){if(t.currentTool!="mover"){b(l);return}d({x:l.target.x(),y:l.target.y()})},children:[(0,a.jsx)(s.mh,{onMouseDown:T,onMouseMove:y,onMouseUp:L,onContextMenu:Z,scaleX:t.scale,scaleY:t.scale,draggable:!1,children:(0,a.jsx)(s.Ee,{name:"baseImage",draggable:!1,image:e,x:-((e==null?void 0:e.width)||0)/2,y:-((e==null?void 0:e.height)||0)/2})}),(0,a.jsxs)(s.mh,{ref:f,name:"annotation",scaleX:t.scale,scaleY:t.scale,onMouseDown:T,onMouseMove:y,onMouseUp:L,onContextMenu:Z,opacity:p,children:[(0,a.jsx)(s.Ee,{x:-((e==null?void 0:e.width)||0)/2,y:-((e==null?void 0:e.height)||0)/2,image:P.current||void 0}),S]})]})]})};E.Z=Y},44434:function(c,E,n){"use strict";var N=n(67294),_=n(80961),v=n.n(_),s=n(85893),r=function(a){var C=v().leftToolbar;return a.disLoc=="right"&&(C=v().rightToolbar),(0,s.jsx)("div",{className:C,children:a.children})};E.Z=r},61541:function(c,E,n){"use strict";var N=n(49111),_=n(19650),v=n(67294),s=n(82499),r=n.n(s),i=n(85893),a=function(F){return(0,i.jsx)("div",{unselectable:"on",className:"".concat(r().toolBarButtonContainerWrapper," ").concat(F.active&&r().toolBarButtonContainerWrapperActive),onClick:F.onClick,children:(0,i.jsx)(_.Z,{align:"center",className:r().toolBarButtonContainer,size:0,children:(0,i.jsxs)(_.Z,{align:"center",direction:"vertical",className:r().toolBarButton,size:0,children:[(0,i.jsx)("img",{src:F.imgSrc}),(0,i.jsx)("div",{className:r().buttonText,children:F.children})]})})})};E.Z=a}}]);
