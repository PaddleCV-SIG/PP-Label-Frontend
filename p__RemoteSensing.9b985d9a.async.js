(self.webpackChunkpp_labeling_frontend=self.webpackChunkpp_labeling_frontend||[]).push([[333],{57560:function(o){o.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___147XP",toolBarButtonContainer:"toolBarButtonContainer___ZEvhK",toolBarButton:"toolBarButton___1s2Rh",buttonText:"buttonText___3NTCv",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___2Utx8",popover:"popover___3PRoi"}},52822:function(o){o.exports={roundBall:"roundBall___1pqu1",popover:"popover___1-PR6"}},56131:function(o){o.exports={labelList:"labelList___jvD05",listHeader:"listHeader___UM5UF",eye:"eye___II3Po",roundBall:"roundBall___j752J"}},56623:function(o){o.exports={listItem:"listItem___3P4zY",eye:"eye___13vRl",roundBall:"roundBall___3rXBh",popover:"popover___2bsOT"}},78677:function(o){o.exports={container:"container___G0FNe"}},80961:function(o){o.exports={toolbar:"toolbar___3vxli"}},82499:function(o){o.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1SHWL",toolBarButtonContainer:"toolBarButtonContainer___1jKUz",toolBarButton:"toolBarButton___3Ouq1",buttonText:"buttonText___10ls7",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AA28"}},72869:function(o){o.exports={map:"map___92VPN",customControlIcon:"customControlIcon___3Ki2y"}},20474:function(o){o.exports={RSPop1:"RSPop1___vz5Me",RSPop2:"RSPop2___34pQA"}},2661:function(o){o.exports={toolbar:"toolbar___1o3he"}},93889:function(o){o.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___UtH8a",toolBarButtonContainer:"toolBarButtonContainer___1gFsH",toolBarButton:"toolBarButton___1Wqc1",buttonText:"buttonText___2zcKO",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AXHi"}},75513:function(o){o.exports={segment:"segment___3WmPw",mainStage:"mainStage___2kT1s",rightSideBar:"rightSideBar___11FX3"}},58967:function(o,x,n){"use strict";var Y=n(20136),u=n(19181),T=n(77883),m=n(70507),r=n(57663),a=n(71577),C=n(2824),s=n(67294),O=n(61541),_=n(57560),Q=n.n(_),y=n(85893),U=1,e=20,k=10;function K(E){return E?E<=U?U:E>=e?e:E:k}var V=function(t){var R=(0,s.useState)(K(t.size)),z=(0,C.Z)(R,2),I=z[0],w=z[1];return(0,y.jsxs)(u.Z,{overlayClassName:Q().popover,placement:"right",content:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(a.Z,{type:"text",onClick:function(){var b,L=K(I-1);w(L),(b=t.onChange)===null||b===void 0||b.call(0,L)},children:"-"}),(0,y.jsx)(m.Z,{min:1,max:20,value:I,onChange:t.onChange,controls:!1,style:{textAlign:"center"}}),(0,y.jsx)(a.Z,{type:"text",onClick:function(){var b,L=K(I+1);w(L),(b=t.onChange)===null||b===void 0||b.call(0,L)},children:"+"})]}),trigger:t.active?"hover":"click",children:[" ",(0,y.jsx)(O.Z,{active:t.active,imgSrc:"./pics/buttons/brush.png",onClick:t.onClick,children:"Brush"})]})};x.Z=V},35475:function(o,x,n){"use strict";n.d(x,{Z:function(){return H}});var Y=n(54421),u=n(38272),T=n(57663),m=n(71577),r=n(2824),a=n(67294),C=n(56131),s=n.n(C),O=n(49111),_=n(19650),Q=n(11849),y=n(56623),U=n.n(y),e=n(20136),k=n(19181),K=n(52822),V=n.n(K),E=n(63144),t=n(85893),R=function(c){var l=(0,a.useState)(c.color||"#FFF"),Z=(0,r.Z)(l,2),B=Z[0],v=Z[1];return(0,t.jsx)(k.Z,{getPopupContainer:function(S){return S.parentElement||document.body},overlayClassName:V().popover,openClassName:V().popoverOpenClassName,placement:"bottom",content:(0,t.jsx)(E.xS,{disableAlpha:!0,color:B,onChange:function(S){v(S.hex)},onChangeComplete:c.onChange}),trigger:"click",children:(0,t.jsx)("div",{className:V().roundBall,style:{backgroundColor:B}})})},z=R,I=function(c){var l=(0,Q.Z)({},c.label),Z=(0,a.useState)(l.invisible),B=(0,r.Z)(Z,2),v=B[0],D=B[1],S=(0,t.jsx)(u.ZP.Item,{className:U().listItem,unselectable:"on",children:(0,t.jsxs)(_.Z,{align:"center",size:5,children:[(0,t.jsx)("a",{className:U().eye,style:{backgroundImage:v?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(){D(!v),c.onLabelModify(l)}})," ",l.name,(0,t.jsx)(z,{color:l.color,onChange:function(W){l.color=W.hex,c.onLabelModify(l)}})]})});return S},w=I,$=n(71194),b=n(48889),L=n(9715),q=n(93766),hn=n(47673),pn=n(24044),sn=function(c){var l=c.defaultLabel,Z=(0,a.useState)(c.visible),B=(0,r.Z)(Z,2),v=B[0],D=B[1],S=(0,a.useState)((l==null?void 0:l.color)||"#FF0000"),A=(0,r.Z)(S,2),W=A[0],G=A[1],nn=(0,a.useState)((l==null?void 0:l.name)||""),ln=(0,r.Z)(nn,2),cn=ln[0],dn=ln[1];return(0,t.jsx)(b.Z,{title:"Add Label",visible:v,onCancel:c.onCancel,footer:null,children:(0,t.jsxs)(q.Z,{name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!1},onFinish:function(P){var mn={name:P.labelname,color:W};c.onLabelAdd(mn),D(!1)},autoComplete:"off",children:[(0,t.jsx)(q.Z.Item,{label:"Label Name",name:"labelname",rules:[{required:!0,message:"Please input label name!"}],children:(0,t.jsx)(pn.Z,{defaultValue:cn})}),(0,t.jsx)(q.Z.Item,{label:"Select Color",name:"color",rules:[{required:!0,message:"Please select color!"}],children:(0,t.jsx)(z,{color:W,onChange:function(P){G(P.hex)}})}),(0,t.jsx)(q.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,t.jsxs)(_.Z,{children:[(0,t.jsx)(m.Z,{onClick:function(){var P;D(!1),(P=c.onCancel)===null||P===void 0||P.call(0)},children:"\u53D6\u6D88"}),(0,t.jsx)(m.Z,{type:"primary",htmlType:"submit",children:"\u786E\u5B9A"})]})})]})})},Pn=sn,M=[{color:"#FF0000",name:"Label 1"},{color:"#008000",name:"Label 2"}],fn=function(c){var l=(0,a.useState)(M),Z=(0,r.Z)(l,2),B=Z[0],v=Z[1],D=(0,a.useState)(!1),S=(0,r.Z)(D,2),A=S[0],W=S[1];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.ZP,{className:s().labelList,size:"large",header:(0,t.jsx)("div",{className:s().listHeader,children:"Label List"}),footer:(0,t.jsx)("div",{children:(0,t.jsx)(m.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){W(!0)},block:!0,children:"Add Label"})}),bordered:!0,dataSource:B,renderItem:function(nn){return(0,t.jsx)(w,{label:nn,onLabelDelete:c.onLabelDelete,onLabelModify:c.onLabelModify})}}),(0,t.jsx)(Pn,{visible:A,onLabelAdd:function(){}})]})},H=fn},8088:function(o,x,n){"use strict";var Y=n(67294),u=n(78677),T=n.n(u),m=n(85893),r=function(C){return(0,m.jsx)("div",{className:"".concat(T().container," ").concat(C.className),children:C.children})};x.Z=r},44434:function(o,x,n){"use strict";var Y=n(67294),u=n(80961),T=n.n(u),m=n(85893),r=function(C){return(0,m.jsx)("div",{className:T().toolbar,children:C.children})};x.Z=r},61541:function(o,x,n){"use strict";var Y=n(49111),u=n(19650),T=n(67294),m=n(82499),r=n.n(m),a=n(85893),C=function(O){return(0,a.jsx)("div",{unselectable:"on",className:"".concat(r().toolBarButtonContainerWrapper," ").concat(O.active&&r().toolBarButtonContainerWrapperActive),onClick:O.onClick,children:(0,a.jsx)(u.Z,{align:"center",className:r().toolBarButtonContainer,size:0,children:(0,a.jsxs)(u.Z,{align:"center",direction:"vertical",className:r().toolBarButton,size:0,children:[(0,a.jsx)("img",{src:O.imgSrc}),(0,a.jsx)("div",{className:r().buttonText,children:O.children})]})})})};x.Z=C},62065:function(o,x,n){"use strict";n.r(x),n.d(x,{default:function(){return Sn}});var Y=n(20136),u=n(19181),T=n(2824),m=n(67294),r=n(75513),a=n.n(r),C=n(8088),s=n(61541),O=n(44434),_=n(58967),Q=n(35475),y=n(2661),U=n.n(y),e=n(85893),k=function(p){return(0,e.jsx)("div",{className:U().toolbar,children:p.children})},K=k,V=n(49111),E=n(19650),t=n(93889),R=n.n(t),z=function(p){return(0,e.jsx)("div",{unselectable:"on",className:"".concat(R().toolBarButtonContainerWrapper," ").concat(p.active&&R().toolBarButtonContainerWrapperActive),onClick:p.onClick,children:(0,e.jsx)(E.Z,{align:"center",className:R().toolBarButtonContainer,size:0,children:(0,e.jsxs)(E.Z,{align:"center",direction:"vertical",className:R().toolBarButton,size:0,children:[(0,e.jsx)("img",{src:p.imgSrc}),(0,e.jsx)("div",{className:R().buttonText,children:p.children})]})})})},I=z,w=n(47673),$=n(24044),b=n(13062),L=n(71230),q=n(59250),hn=n(13013),pn=n(57663),sn=n(71577),Pn=n(89032),M=n(15746),fn=n(30887),H=n(54689),an=n(34792),c=n(48086),l=n(89366),Z=n(57254),B=n(20474),v=n.n(B);function D(F){c.default.info("Click on menu item."),console.log("click",F)}var S=(0,e.jsxs)(H.Z,{onClick:D,children:[(0,e.jsx)(H.Z.Item,{icon:(0,e.jsx)(l.Z,{}),children:"1st menu item"},"1"),(0,e.jsx)(H.Z.Item,{icon:(0,e.jsx)(l.Z,{}),children:"2nd menu item"},"2"),(0,e.jsx)(H.Z.Item,{icon:(0,e.jsx)(l.Z,{}),children:"3rd menu item"},"3")]}),A=function(){return(0,e.jsxs)("div",{children:[(0,e.jsxs)(L.Z,{children:[(0,e.jsx)(M.Z,{span:12,className:v().RSPop1,children:(0,e.jsx)("span",{children:"PD parameter"})}),(0,e.jsx)(M.Z,{span:12,className:v().RSPop2,children:(0,e.jsx)(hn.Z,{overlay:S,children:(0,e.jsxs)(sn.Z,{style:{width:"100%"},children:["Dropdown ",(0,e.jsx)(Z.Z,{})]})})})]}),(0,e.jsxs)(L.Z,{children:[(0,e.jsx)(M.Z,{span:12,className:v().RSPop1,children:(0,e.jsx)("span",{children:"Simplified distance"})}),(0,e.jsx)(M.Z,{span:12,className:v().RSPop2,children:(0,e.jsx)($.Z,{placeholder:"Basic usage"})})]}),(0,e.jsxs)(L.Z,{children:[(0,e.jsx)(M.Z,{span:12,className:v().RSPop1,children:(0,e.jsx)("span",{children:"Simplified angle"})}),(0,e.jsx)(M.Z,{span:12,className:v().RSPop2,children:(0,e.jsx)($.Z,{placeholder:"Basic usage"})})]}),(0,e.jsxs)(L.Z,{children:[(0,e.jsx)(M.Z,{span:12,className:v().RSPop1,children:(0,e.jsx)("span",{children:"Threshold of building simplification "})}),(0,e.jsx)(M.Z,{span:12,className:v().RSPop2,children:(0,e.jsx)($.Z,{placeholder:"Basic usage"})})]})]})},W=A,G=n(11849),nn=n(93224),ln=n(41004),cn=n(72869),dn=n.n(cn),un=n(74607),P=m.createRef(),mn=function(p){var J=p.children,g=(0,nn.Z)(p,["children"]);return m.useEffect(function(){if(P.current){var h=P.current.leafletElement;h.pm.addControls({drawMarker:!1,drawCircle:!1,drawCircleMarker:!1,drawPolyline:!0,drawRectangle:!0,drawPolygon:!0,editMode:!0,dragMode:!0,cutPolygon:!0,rotateMode:!1}),h.pm.setGlobalOptions({pmIgnore:!1}),h.pm.Toolbar.createCustomControl({name:"StoreShapes",title:"Store all shapes",block:"custom",className:dn().customControlIcon,toggle:!1,afterClick:function(){var X=JSON.stringify(h.pm.getGeomanDrawLayers(!0).toGeoJSON()),f="data.geojson",i=document.createElement("a");i.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(X)),i.setAttribute("download",f),i.style.display="none",document.body.appendChild(i),i.click(),console.log(X)}}),h.on("pm:create",function(N){p.onShapeCreate(N)}),h.on("pm:edit",function(N){p.onShapeEdit(N)})}},[]),(0,e.jsx)(ln.Z,(0,G.Z)((0,G.Z)({ref:P},g),{},{children:J}))},gn=mn,en=n(88014),rn=n(3263),vn={lat:0,lng:0,zoom:2},xn=function(){var p=[vn.lat,vn.lng],J=m.useState([]),g=(0,T.Z)(J,2),h=g[0],N=g[1],X=function(d){i(d.layer),d.layer.bindPopup("Label: "+d.layer._uid).openPopup(),tn(d.layer)},f=function(d){jn(d.layer),console.log(d)};function i(j){var d=prompt("Please enter a Unique Id");if(d)if(h[d]){alert("Id already used, add another one"),i(j);return}else j._uid=d,h[d]=j,N(h);else{alert("Nothing entered, layer deleted ..."),j.remove();return}}function tn(j){var d=j._uid,on=j.toGeoJSON();on.properties={LabelID:Number(d)},console.log("Store Layer on DB. Id:"+d,on),console.log(JSON.stringify(on))}function jn(j){var d=j._uid,on=j.toGeoJSON();console.log("Update Layer on DB. Id:"+d,on)}return(0,e.jsx)(gn,{className:dn().map,center:p,zoom:vn.zoom,onShapeCreate:X,onShapeEdit:f,children:(0,e.jsxs)(en.Z,{position:"topright",children:[(0,e.jsx)(en.Z.BaseLayer,{checked:!0,name:"OpenStreetMap.Mapnik",children:(0,e.jsx)(rn.Z,{attribution:'\xA9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"})}),(0,e.jsx)(en.Z.BaseLayer,{name:"TianDiTu.Satellite",children:(0,e.jsx)(rn.Z,{attribution:"\xA9 TianDiTu",url:"https://t2.tianditu.gov.cn/DataServer?T=img_w&X={x}&Y={y}&L={z}&tk=174705aebfe31b79b3587279e211cb9a"})}),(0,e.jsx)(en.Z.BaseLayer,{name:"Esri.WorldImagery",children:(0,e.jsx)(rn.Z,{attribution:"Tiles \xA9 Esri \u2014 Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"})}),(0,e.jsx)(en.Z.Overlay,{name:"Annotion.TianDiTu",children:(0,e.jsx)(rn.Z,{url:"https://t2.tianditu.gov.cn/DataServer?T=cia_w&X={x}&Y={y}&L={z}&tk=174705aebfe31b79b3587279e211cb9a"})})]})})},Cn=xn,Bn=function(){var p=(0,m.useState)(void 0),J=(0,T.Z)(p,2),g=J[0],h=J[1];setTimeout(function(){console.log(g)},5e3);var N=function(){var i;(i=P.current)===null||i===void 0||i.leafletElement.pm.enableDraw(g,{snappable:!0,snapDistance:20})},X=function(){var i,tn;console.log((i=P.current)===null||i===void 0?void 0:i.leafletElement.pm.Draw),(tn=P.current)===null||tn===void 0||tn.leafletElement.pm.Draw.Polygon._finishShape()};return(0,e.jsxs)(C.Z,{className:a().segment,children:[(0,e.jsxs)(O.Z,{children:[(0,e.jsx)(s.Z,{imgSrc:"./pics/buttons/intelligent_interaction.png",children:"Intelligent Interaction"}),(0,e.jsx)(s.Z,{active:g=="Polygon",imgSrc:"./pics/buttons/polygon.png",onClick:function(){h("Polygon"),N()},children:"Polygon"}),(0,e.jsx)(_.Z,{active:g=="brush",onClick:X,onChange:function(i){console.log(i)}}),(0,e.jsxs)(u.Z,{placement:"rightTop",title:"title",content:"content",trigger:g=="rubber"?"hover":"click",children:[" ",(0,e.jsx)(s.Z,{imgSrc:"./pics/buttons/rubber.png",onClick:function(){h("rubber")},children:"Rubber"})]}),(0,e.jsx)(s.Z,{imgSrc:"./pics/buttons/zoom_in.png",children:"Zoom in"}),(0,e.jsx)(s.Z,{imgSrc:"./pics/buttons/zoom_out.png",children:"Zoom out"}),(0,e.jsx)(s.Z,{imgSrc:"./pics/buttons/save.png",children:"Save"}),(0,e.jsx)(s.Z,{imgSrc:"./pics/buttons/move.png",children:"Move"}),(0,e.jsx)(s.Z,{imgSrc:"./pics/buttons/export.png",children:"Export"}),(0,e.jsx)(s.Z,{imgSrc:"./pics/buttons/data_division.png",children:"Divide Data"}),(0,e.jsx)(s.Z,{imgSrc:"./pics/buttons/prev.png",children:"Undo"}),(0,e.jsx)(s.Z,{imgSrc:"./pics/buttons/next.png",children:"Redo"}),(0,e.jsx)(s.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:"Clear Mark"})]}),(0,e.jsx)("div",{className:a().mainStage,children:(0,e.jsx)(Cn,{})}),(0,e.jsxs)(K,{children:[(0,e.jsxs)(u.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Setting of boundary simplification",content:(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(W,{})}),trigger:g=="boundry"?"click":"hover",children:[" ",(0,e.jsx)(I,{imgSrc:"./pics/buttons/border_simplify.png",onClick:function(){h("boundry")},children:(0,e.jsx)("h2",{children:"Boundary"})})]}),(0,e.jsxs)(u.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Setting of remote sensing",content:"content",trigger:g=="colorgun"?"click":"hover",children:[" ",(0,e.jsx)(I,{imgSrc:"./pics/buttons/remote_sensing_setting.png",onClick:function(){h("colorgun")},children:(0,e.jsx)("h2",{children:"Remote Sensing"})})]}),(0,e.jsxs)(u.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Switch grids",content:"content",trigger:g=="grid"?"click":"hover",children:[" ",(0,e.jsx)(I,{imgSrc:"./pics/buttons/switch_grid.png",onClick:function(){h("grid")},children:(0,e.jsx)("h2",{children:"Grids"})})]})]}),(0,e.jsx)("div",{className:a().rightSideBar,children:(0,e.jsx)(Q.Z,{onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}})})]})},Sn=Bn}}]);
