(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[885],{85024:function(D){D.exports={listItem:"listItem___u4Q82",eye:"eye___BwaRm",delete:"delete___31JB_",roundBall:"roundBall___23A7l",popover:"popover___1BNET",annotationId:"annotationId___zAzX4",labelName:"labelName___2ohxn",listItemActive:"listItemActive___2QnA3"}},56159:function(D){D.exports={labelList:"labelList___v7C6K",listHeader:"listHeader___1aY8R",eye:"eye___2MKbp",roundBall:"roundBall___187XH"}},57560:function(D){D.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___147XP",toolBarButtonContainer:"toolBarButtonContainer___ZEvhK",toolBarButton:"toolBarButton___1s2Rh",buttonText:"buttonText___3NTCv",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___2Utx8",popover:"popover___3PRoi"}},26647:function(D){D.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1FTWb",toolBarButtonContainer:"toolBarButtonContainer___1Vahn",toolBarButton:"toolBarButton___3mR2H",buttonText:"buttonText___Y0WDm",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3lRZ8",popover:"popover___3zzu2",popoverLeft:"popoverLeft___15lGe"}},14836:function(D,b,t){"use strict";t.d(b,{Z:function(){return C}});var W=t(54421),h=t(38272),g=t(57663),A=t(71577),L=t(67294),M=t(56159),B=t.n(M),I=t(49111),T=t(19650),e=t(2824),m=t(11849),n=t(85024),l=t.n(n),u=t(63097),a=t(85893),s=function(r){var v=(0,m.Z)({},r.annotation),f=(0,L.useState)(v.invisible),E=(0,e.Z)(f,2),i=E[0],_=E[1],x=(0,L.useState)(0),O=(0,e.Z)(x,2),y=O[0],j=O[1];(0,L.useEffect)(function(){_(r.annotation.invisible)},[r.annotation.invisible]);var R=(0,a.jsxs)(h.ZP.Item,{className:"".concat(l().listItem," ").concat(r.active?l().listItemActive:""),unselectable:"on",onClick:function(){r.onClick(v)},children:[(0,a.jsxs)(T.Z,{align:"center",size:5,children:[(0,a.jsx)("a",{className:l().eye,style:{backgroundImage:i?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(U){U.stopPropagation(),_(!i),r.onAnnotationModify(v)}})," ",(0,a.jsx)("span",{className:l().annotationId,children:v.frontendId}),(0,a.jsx)("span",{className:l().labelName,children:v.label.name}),(0,a.jsx)(u.Z,{color:v.label.color})]}),(0,a.jsx)("a",{className:l().delete,onClick:function(U){U.stopPropagation();var K=new Date().getTime();K-y<300||(j(K),r.onAnnotationDelete(v))}})]});return R},c=s,d=t(48971),o=function(r){var v=(0,d.YB)().formatMessage({id:"component.PPAnnotationList.annotationList"}),f=(0,d.YB)().formatMessage({id:"component.PPAnnotationList.addAnnotation"});return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(h.ZP,{className:B().labelList,size:"large",header:(0,a.jsx)("div",{className:B().listHeader,children:v}),bordered:!0,dataSource:r.annotations,renderItem:function(i){var _;return(0,a.jsx)(c,{onClick:r.onAnnotationSelect,annotation:i,active:i.frontendId==((_=r.currAnnotation)===null||_===void 0?void 0:_.frontendId),onAnnotationDelete:r.onAnnotationDelete,onAnnotationModify:r.onAnnotationModify})},footer:(0,a.jsx)("div",{children:(0,a.jsx)(A.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){r.onAnnotationAdd()},block:!0,children:f})})})})},C=o},43801:function(D,b,t){"use strict";t.d(b,{Z:function(){return m}});var W=t(11849),h=t(2824),g=t(91220),A=t(67294),L=t(65031),M=t(85893);function B(n,l,u,a){if(!(!n||!l||!u||!a))return{width:n,color:l,points:u,tool:a}}function I(n,l,u,a,s,c,d){if(!n||!n.points)return(0,M.jsx)(M.Fragment,{});var o=[],C=(0,g.Z)(n.points),P;try{for(C.s();!(P=C.n()).done;){var r=P.value;!r.width||!r.color||!r.tool||o.push((0,M.jsx)(L.x1,{stroke:r.color,strokeWidth:r.width,globalCompositeOperation:r.tool==="brush"?"source-over":"destination-out",lineCap:"round",points:r.points,tension:1}))}}catch(v){C.e(v)}finally{C.f()}return(0,M.jsx)(L.ZA,{draggable:!1,children:o})}function T(n,l){return n=="rubber"||l==2?"rubber":"brush"}function e(n){var l=0,u=(0,g.Z)(n),a;try{for(u.s();!(a=u.n()).done;){var s=a.value;!s||!s.frontendId||s.frontendId>l&&(l=s.frontendId)}}catch(c){u.e(c)}finally{u.f()}return l}function m(n){var l=(0,A.useState)(),u=(0,h.Z)(l,2),a=u[0],s=u[1],c=function(P,r,v,f){var E,i;if(!(n.currentTool!="brush"&&n.currentTool!="rubber"||!((E=n.currentLabel)!==null&&E!==void 0&&E.color))){var _=(P.evt.offsetX+r)/f,x=(P.evt.offsetY+v)/f,O=T(n.currentTool,P.evt.button),y=B(n.brushSize||10,(i=n.currentLabel)===null||i===void 0?void 0:i.color,[_,x,_,x],O);if(!!y)if(s(O),n.currentAnnotation){var j,R={type:"brush",frontendId:n.currentAnnotation.frontendId,label:n.currentAnnotation.label,points:(j=n.currentAnnotation.points)===null||j===void 0?void 0:j.concat([y])};n.onAnnotationModify(R)}else{if(O=="rubber")return;n.onAnnotationAdd({type:O,frontendId:e(n.annotations)+1,label:n.currentLabel,points:[y]})}}},d=function(P,r,v,f){var E;if(!(!a||!n.currentAnnotation||!n.currentLabel.color)){var i=(P.evt.offsetX+r)/f,_=(P.evt.offsetY+v)/f,x=[i,_],O=[];(E=n.currentAnnotation)!==null&&E!==void 0&&E.points&&(x=n.currentAnnotation.points[n.currentAnnotation.points.length-1].points.concat(x),O=n.currentAnnotation.points);var y=B(n.brushSize||10,n.currentLabel.color,x,a);!y||(O.pop(),O.push(y),n.onAnnotationModify((0,W.Z)((0,W.Z)({},n.currentAnnotation),{},{points:O,type:a})))}},o=function(){n.currentTool!="brush"&&n.currentTool!="rubber"||(s(void 0),n.onMouseUp())};return{onMouseDown:c,onMouseMove:d,onMouseUp:o,createElementsFunc:I}}},58967:function(D,b,t){"use strict";var W=t(20136),h=t(55241),g=t(77883),A=t(70507),L=t(57663),M=t(71577),B=t(2824),I=t(67294),T=t(61541),e=t(57560),m=t.n(e),n=t(85893),l=1,u=50,a=10;function s(d){return d?d<=l?l:d>=u?u:d:a}var c=function(o){var C=(0,I.useState)(s(o.size)),P=(0,B.Z)(C,2),r=P[0],v=P[1],f=function(i){v(s(i))};return(0,I.useEffect)(function(){f(o.size)},[o.size]),(0,n.jsxs)(h.Z,{overlayClassName:m().popover,placement:"right",content:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(M.Z,{type:"text",onClick:function(){var i,_=s(r-1);f(_),(i=o.onChange)===null||i===void 0||i.call(0,_)},children:"-"}),(0,n.jsx)(A.Z,{min:l,max:u,value:r,onChange:function(i){var _;(_=o.onChange)===null||_===void 0||_.call(0,i)},controls:!1,style:{textAlign:"center"}}),(0,n.jsx)(M.Z,{type:"text",onClick:function(){var i,_=s(r+1);f(_),(i=o.onChange)===null||i===void 0||i.call(0,_)},children:"+"})]}),trigger:o.active?"hover":"click",children:[" ",(0,n.jsx)(T.Z,{active:o.active,imgSrc:o.imgSrc||"./pics/buttons/brush.png",onClick:o.onClick,children:o.children||"Brush"})]})};b.Z=c},27992:function(D,b,t){"use strict";var W=t(20136),h=t(55241),g=t(77883),A=t(70507),L=t(57663),M=t(71577),B=t(2824),I=t(67294),T=t(61541),e=t(26647),m=t.n(e),n=t(85893),l=1,u=100,a=10;function s(d){return d?d<=l?l:d>=u?u:d:a}var c=function(o){var C=(0,I.useState)(s(o.size)),P=(0,B.Z)(C,2),r=P[0],v=P[1],f=function(i){v(s(i))};return(0,I.useEffect)(function(){f(o.size)},[o.size]),(0,n.jsxs)(h.Z,{overlayClassName:"".concat(m().popover," ").concat(o.disLoc=="left"?m().popoverLeft:""),placement:o.disLoc||"right",content:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(M.Z,{type:"text",onClick:function(){var i,_=s(r-1);f(_),(i=o.onChange)===null||i===void 0||i.call(0,_)},children:"-"}),(0,n.jsx)(A.Z,{min:l,max:u,value:r,onChange:function(i){var _;(_=o.onChange)===null||_===void 0||_.call(0,i)},controls:!1,style:{textAlign:"center"}}),(0,n.jsx)(M.Z,{type:"text",onClick:function(){var i,_=s(r+1);f(_),(i=o.onChange)===null||i===void 0||i.call(0,_)},children:"+"})]}),trigger:"hover",children:[" ",(0,n.jsx)(T.Z,{imgSrc:o.imgSrc,onClick:o.onClick,children:o.children})]})};b.Z=c},13931:function(D,b,t){"use strict";t.d(b,{Z:function(){return T}});var W=t(91220),h=t(11849),g=t(65031),A=t(85893);function L(e){var m=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return m?{r:parseInt(m[1],16),g:parseInt(m[2],16),b:parseInt(m[3],16)}:null}function M(e,m){if(!(!e||!m))return{color:e,points:m}}function B(e,m,n,l,u,a,s){if(!e||!e.lines||!e.lines[0])return[(0,A.jsx)(A.Fragment,{})];var c=e.lines[0].points,d=e.lines[0].color,o=L(d);if(!o)return[(0,A.jsx)(A.Fragment,{})];var C=(s==null?void 0:s.annotationId)==e.annotationId,P=C?.5:.1,r=void 0,v=[];return c.forEach(function(f,E){if(!r){r=f;return}v.push((0,A.jsx)(g.Cd,{onMouseDown:function(){u=="mover"&&a(e)},draggable:u=="mover",onDragMove:function(_){console.log("Circle onDrageMove");var x=_.evt.offsetX/l,O=_.evt.offsetY/l;c[E-1]=x,c[E]=O;var y=(0,h.Z)((0,h.Z)({},e),{},{lines:[{color:d,points:c}]});m(y)},onMouseOver:function(){console.log("Circle onMouseOver"),u=="mover"&&(document.body.style.cursor="pointer")},onMouseOut:function(){console.log("Circle onMouseOut"),document.body.style.cursor="default"},x:r,y:f,radius:5,fill:d})),r=void 0}),[(0,A.jsxs)(g.ZA,{children:[(0,A.jsx)(g.x1,{onMouseOver:function(){u=="mover"&&(document.body.style.cursor="pointer")},onMouseOut:function(){document.body.style.cursor="default"},onClick:function(){u=="mover"&&a(e)},stroke:d,strokeWidth:2,globalCompositeOperation:"source-over",lineCap:"round",points:c,tension:0,closed:!0,fill:"rgba(".concat(o.r,", ").concat(o.g,", ").concat(o.b,", ").concat(P,")")}),v]},e.annotationId)]}function I(e){var m=0,n=(0,W.Z)(e),l;try{for(n.s();!(l=n.n()).done;){var u=l.value;!u||u.annotationId>m&&(m=u.annotationId)}}catch(a){n.e(a)}finally{n.f()}return m}function T(e){var m=function(s,c){var d,o=s.evt.offsetX/c,C=s.evt.offsetY/c,P=M((d=e.currentLabel)===null||d===void 0?void 0:d.color,[o,C]);!P||e.onAnnotationAdd({tool:"polygon",annotationId:I(e.annotations)+1,label:e.currentLabel,lines:[P]})},n=function(s,c){var d,o;if(!!e.currentAnnotation){var C=s.evt.offsetX/c,P=s.evt.offsetY/c,r=e.currentAnnotation.lines||[],v=M((d=e.currentLabel)===null||d===void 0?void 0:d.color,(o=r[0])===null||o===void 0?void 0:o.points.concat([C,P]));if(!!v){var f={tool:"polygon",annotationId:e.currentAnnotation.annotationId,label:e.currentAnnotation.label,lines:[v]};e.onAnnotationModify(f)}}},l=function(s,c){e.currentTool=="polygon"&&(e.currentAnnotation?n(s,c):m(s,c))},u=function(){e.currentTool=="polygon"&&e.onMouseUp()};return{onMouseDown:l,onMouseMove:function(){},onMouseUp:u,createElementsFunc:B}}},29919:function(D,b,t){"use strict";var W=t(67294),h=t(61541),g=t(85893),A=function(M){return(0,g.jsx)(h.Z,{active:M.active,imgSrc:M.imgSrc||"./pics/buttons/polygon.png",onClick:M.onClick,children:M.children})};b.Z=A}}]);
