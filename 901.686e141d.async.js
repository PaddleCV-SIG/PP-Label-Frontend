(self.webpackChunkpp_labeling_frontend=self.webpackChunkpp_labeling_frontend||[]).push([[901],{91220:function(xt,_n,ze){"use strict";ze.d(_n,{Z:function(){return U}});var rr=ze(64254);function U(re,Ue){var F;if(typeof Symbol=="undefined"||re[Symbol.iterator]==null){if(Array.isArray(re)||(F=(0,rr.Z)(re))||Ue&&re&&typeof re.length=="number"){F&&(re=F);var ie=0,L=function(){};return{s:L,n:function(){return ie>=re.length?{done:!0}:{done:!1,value:re[ie++]}},e:function(it){throw it},f:L}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var nt=!0,dt=!1,Ne;return{s:function(){F=re[Symbol.iterator]()},n:function(){var it=F.next();return nt=it.done,it},e:function(it){dt=!0,Ne=it},f:function(){try{!nt&&F.return!=null&&F.return()}finally{if(dt)throw Ne}}}}},65031:function(xt,_n,ze){"use strict";ze.d(_n,{Cd:function(){return ra},ZA:function(){return Ie},Ee:function(){return zr},mh:function(){return te},x1:function(){return Dr},Hf:function(){return aa}});var rr={};ze.r(rr),ze.d(rr,{appendChild:function(){return Zn},appendChildToContainer:function(){return $n},appendInitialChild:function(){return es},cancelTimeout:function(){return Ki},clearContainer:function(){return $s},commitMount:function(){return Ji},commitTextUpdate:function(){return qi},commitUpdate:function(){return Zi},createInstance:function(){return ts},createTextInstance:function(){return Ks},finalizeInitialChildren:function(){return rs},getChildHostContext:function(){return hs},getPublicInstance:function(){return Qs},getRootHostContext:function(){return ls},hideInstance:function(){return fs},hideTextInstance:function(){return $i},idlePriority:function(){return pn.unstable_IdlePriority},insertBefore:function(){return vn},insertInContainerBefore:function(){return ei},isPrimaryRenderer:function(){return ds},noTimeout:function(){return us},now:function(){return pn.unstable_now},prepareForCommit:function(){return ns},preparePortalMount:function(){return qs},prepareUpdate:function(){return is},removeChild:function(){return ti},removeChildFromContainer:function(){return mn},resetAfterCommit:function(){return as},resetTextContent:function(){return ss},run:function(){return pn.unstable_runWithPriority},scheduleTimeout:function(){return ji},shouldDeprioritizeSubtree:function(){return os},shouldSetTextContent:function(){return Qi},supportsMutation:function(){return Js},unhideInstance:function(){return ri},unhideTextInstance:function(){return Zs},warnsIfNotActing:function(){return Jn}});var U=Math.PI/180;function re(){return typeof window!="undefined"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const Ue=typeof global!="undefined"?global:typeof window!="undefined"?window:typeof WorkerGlobalScope!="undefined"?self:{},F={_global:Ue,version:"8.3.2",isBrowser:re(),isUnminified:/param/.test(function(l){}.toString()),dblClickWindow:400,getAngle(l){return F.angleDeg?l*U:l},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:typeof window!="undefined"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return F.DD.isDragging},isDragReady(){return!!F.DD.node},document:Ue.document,_injectGlobal(l){Ue.Konva=l}},ie=l=>{F[l.prototype.getClassName()]=l};F._injectGlobal(F);class L{constructor(e=[1,0,0,1,0,0]){this.dirty=!1,this.m=e&&e.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new L(this.m)}copyInto(e){e.m[0]=this.m[0],e.m[1]=this.m[1],e.m[2]=this.m[2],e.m[3]=this.m[3],e.m[4]=this.m[4],e.m[5]=this.m[5]}point(e){var n=this.m;return{x:n[0]*e.x+n[2]*e.y+n[4],y:n[1]*e.x+n[3]*e.y+n[5]}}translate(e,n){return this.m[4]+=this.m[0]*e+this.m[2]*n,this.m[5]+=this.m[1]*e+this.m[3]*n,this}scale(e,n){return this.m[0]*=e,this.m[1]*=e,this.m[2]*=n,this.m[3]*=n,this}rotate(e){var n=Math.cos(e),a=Math.sin(e),s=this.m[0]*n+this.m[2]*a,o=this.m[1]*n+this.m[3]*a,h=this.m[0]*-a+this.m[2]*n,f=this.m[1]*-a+this.m[3]*n;return this.m[0]=s,this.m[1]=o,this.m[2]=h,this.m[3]=f,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(e,n){var a=this.m[0]+this.m[2]*n,s=this.m[1]+this.m[3]*n,o=this.m[2]+this.m[0]*e,h=this.m[3]+this.m[1]*e;return this.m[0]=a,this.m[1]=s,this.m[2]=o,this.m[3]=h,this}multiply(e){var n=this.m[0]*e.m[0]+this.m[2]*e.m[1],a=this.m[1]*e.m[0]+this.m[3]*e.m[1],s=this.m[0]*e.m[2]+this.m[2]*e.m[3],o=this.m[1]*e.m[2]+this.m[3]*e.m[3],h=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],f=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];return this.m[0]=n,this.m[1]=a,this.m[2]=s,this.m[3]=o,this.m[4]=h,this.m[5]=f,this}invert(){var e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),n=this.m[3]*e,a=-this.m[1]*e,s=-this.m[2]*e,o=this.m[0]*e,h=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),f=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=n,this.m[1]=a,this.m[2]=s,this.m[3]=o,this.m[4]=h,this.m[5]=f,this}getMatrix(){return this.m}setAbsolutePosition(e,n){var a=this.m[0],s=this.m[1],o=this.m[2],h=this.m[3],f=this.m[4],c=this.m[5],g=(a*(n-c)-s*(e-f))/(a*h-s*o),v=(e-f-o*g)/a;return this.translate(v,g)}decompose(){var e=this.m[0],n=this.m[1],a=this.m[2],s=this.m[3],o=this.m[4],h=this.m[5],f=e*s-n*a;let c={x:o,y:h,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(e!=0||n!=0){var g=Math.sqrt(e*e+n*n);c.rotation=n>0?Math.acos(e/g):-Math.acos(e/g),c.scaleX=g,c.scaleY=f/g,c.skewX=(e*a+n*s)/f,c.skewY=0}else if(a!=0||s!=0){var v=Math.sqrt(a*a+s*s);c.rotation=Math.PI/2-(s>0?Math.acos(-a/v):-Math.acos(a/v)),c.scaleX=f/v,c.scaleY=v,c.skewX=0,c.skewY=(e*a+n*s)/f}return c.rotation=P._getRotation(c.rotation),c}}var nt="[object Array]",dt="[object Number]",Ne="[object String]",Oe="[object Boolean]",it=Math.PI/180,vr=180/Math.PI,Br="#",oi="",yn="0",Hr="Konva warning: ",Ur="Konva error: ",Sn="rgb(",Wr={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},li=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,Yr=[];const hi=typeof requestAnimationFrame!="undefined"&&requestAnimationFrame||function(l){setTimeout(l,60)},P={_isElement(l){return!!(l&&l.nodeType==1)},_isFunction(l){return!!(l&&l.constructor&&l.call&&l.apply)},_isPlainObject(l){return!!l&&l.constructor===Object},_isArray(l){return Object.prototype.toString.call(l)===nt},_isNumber(l){return Object.prototype.toString.call(l)===dt&&!isNaN(l)&&isFinite(l)},_isString(l){return Object.prototype.toString.call(l)===Ne},_isBoolean(l){return Object.prototype.toString.call(l)===Oe},isObject(l){return l instanceof Object},isValidSelector(l){if(typeof l!="string")return!1;var e=l[0];return e==="#"||e==="."||e===e.toUpperCase()},_sign(l){return l===0||l>0?1:-1},requestAnimFrame(l){Yr.push(l),Yr.length===1&&hi(function(){const e=Yr;Yr=[],e.forEach(function(n){n()})})},createCanvasElement(){var l=document.createElement("canvas");try{l.style=l.style||{}}catch(e){}return l},createImageElement(){return document.createElement("img")},_isInDocument(l){for(;l=l.parentNode;)if(l==document)return!0;return!1},_urlToImage(l,e){var n=P.createImageElement();n.onload=function(){e(n)},n.src=l},_rgbToHex(l,e,n){return((1<<24)+(l<<16)+(e<<8)+n).toString(16).slice(1)},_hexToRgb(l){l=l.replace(Br,oi);var e=parseInt(l,16);return{r:e>>16&255,g:e>>8&255,b:e&255}},getRandomColor(){for(var l=(Math.random()*16777215<<0).toString(16);l.length<6;)l=yn+l;return Br+l},getRGB(l){var e;return l in Wr?(e=Wr[l],{r:e[0],g:e[1],b:e[2]}):l[0]===Br?this._hexToRgb(l.substring(1)):l.substr(0,4)===Sn?(e=li.exec(l.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA(l){return l=l||"black",P._namedColorToRBA(l)||P._hex3ColorToRGBA(l)||P._hex6ColorToRGBA(l)||P._rgbColorToRGBA(l)||P._rgbaColorToRGBA(l)||P._hslColorToRGBA(l)},_namedColorToRBA(l){var e=Wr[l.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA(l){if(l.indexOf("rgb(")===0){l=l.match(/rgb\(([^)]+)\)/)[1];var e=l.split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA(l){if(l.indexOf("rgba(")===0){l=l.match(/rgba\(([^)]+)\)/)[1];var e=l.split(/ *, */).map((n,a)=>n.slice(-1)==="%"?a===3?parseInt(n)/100:parseInt(n)/100*255:Number(n));return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex6ColorToRGBA(l){if(l[0]==="#"&&l.length===7)return{r:parseInt(l.slice(1,3),16),g:parseInt(l.slice(3,5),16),b:parseInt(l.slice(5,7),16),a:1}},_hex3ColorToRGBA(l){if(l[0]==="#"&&l.length===4)return{r:parseInt(l[1]+l[1],16),g:parseInt(l[2]+l[2],16),b:parseInt(l[3]+l[3],16),a:1}},_hslColorToRGBA(l){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(l)){const[e,...n]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(l),a=Number(n[0])/360,s=Number(n[1])/100,o=Number(n[2])/100;let h,f,c;if(s===0)return c=o*255,{r:Math.round(c),g:Math.round(c),b:Math.round(c),a:1};o<.5?h=o*(1+s):h=o+s-o*s;const g=2*o-h,v=[0,0,0];for(let y=0;y<3;y++)f=a+1/3*-(y-1),f<0&&f++,f>1&&f--,6*f<1?c=g+(h-g)*6*f:2*f<1?c=h:3*f<2?c=g+(h-g)*(2/3-f)*6:c=g,v[y]=c*255;return{r:Math.round(v[0]),g:Math.round(v[1]),b:Math.round(v[2]),a:1}}},haveIntersection(l,e){return!(e.x>l.x+l.width||e.x+e.width<l.x||e.y>l.y+l.height||e.y+e.height<l.y)},cloneObject(l){var e={};for(var n in l)this._isPlainObject(l[n])?e[n]=this.cloneObject(l[n]):this._isArray(l[n])?e[n]=this.cloneArray(l[n]):e[n]=l[n];return e},cloneArray(l){return l.slice(0)},degToRad(l){return l*it},radToDeg(l){return l*vr},_degToRad(l){return P.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),P.degToRad(l)},_radToDeg(l){return P.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),P.radToDeg(l)},_getRotation(l){return F.angleDeg?P.radToDeg(l):l},_capitalize(l){return l.charAt(0).toUpperCase()+l.slice(1)},throw(l){throw new Error(Ur+l)},error(l){console.error(Ur+l)},warn(l){!F.showWarnings||console.warn(Hr+l)},each(l,e){for(var n in l)e(n,l[n])},_inRange(l,e,n){return e<=l&&l<n},_getProjectionToSegment(l,e,n,a,s,o){var h,f,c,g=(l-n)*(l-n)+(e-a)*(e-a);if(g==0)h=l,f=e,c=(s-n)*(s-n)+(o-a)*(o-a);else{var v=((s-l)*(n-l)+(o-e)*(a-e))/g;v<0?(h=l,f=e,c=(l-s)*(l-s)+(e-o)*(e-o)):v>1?(h=n,f=a,c=(n-s)*(n-s)+(a-o)*(a-o)):(h=l+v*(n-l),f=e+v*(a-e),c=(h-s)*(h-s)+(f-o)*(f-o))}return[h,f,c]},_getProjectionToLine(l,e,n){var a=P.cloneObject(l),s=Number.MAX_VALUE;return e.forEach(function(o,h){if(!(!n&&h===e.length-1)){var f=e[(h+1)%e.length],c=P._getProjectionToSegment(o.x,o.y,f.x,f.y,l.x,l.y),g=c[0],v=c[1],y=c[2];y<s&&(a.x=g,a.y=v,s=y)}}),a},_prepareArrayForTween(l,e,n){var a,s=[],o=[];if(l.length>e.length){var h=e;e=l,l=h}for(a=0;a<l.length;a+=2)s.push({x:l[a],y:l[a+1]});for(a=0;a<e.length;a+=2)o.push({x:e[a],y:e[a+1]});var f=[];return o.forEach(function(c){var g=P._getProjectionToLine(c,s,n);f.push(g.x),f.push(g.y)}),f},_prepareToStringify(l){var e;l.visitedByCircularReferenceRemoval=!0;for(var n in l)if(!!(l.hasOwnProperty(n)&&l[n]&&typeof l[n]=="object")){if(e=Object.getOwnPropertyDescriptor(l,n),l[n].visitedByCircularReferenceRemoval||P._isElement(l[n]))if(e.configurable)delete l[n];else return null;else if(P._prepareToStringify(l[n])===null)if(e.configurable)delete l[n];else return null}return delete l.visitedByCircularReferenceRemoval,l},_assign(l,e){for(var n in e)l[n]=e[n];return l},_getFirstPointerId(l){return l.touches?l.changedTouches[0].identifier:l.pointerId||999}};function we(l){return P._isString(l)?'"'+l+'"':Object.prototype.toString.call(l)==="[object Number]"||P._isBoolean(l)?l:Object.prototype.toString.call(l)}function ui(l){return l>255?255:l<0?0:Math.round(l)}function wn(l){return l>1?1:l<1e-4?1e-4:l}function O(){if(F.isUnminified)return function(l,e){return P._isNumber(l)||P.warn(we(l)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),l}}function Xr(l){if(F.isUnminified)return function(e,n){let a=P._isNumber(e),s=P._isArray(e)&&e.length==l;return!a&&!s&&P.warn(we(e)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+l+")"),e}}function Cn(){if(F.isUnminified)return function(l,e){var n=P._isNumber(l),a=l==="auto";return n||a||P.warn(we(l)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),l}}function nr(){if(F.isUnminified)return function(l,e){return P._isString(l)||P.warn(we(l)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),l}}function di(){if(F.isUnminified)return function(l,e){const n=P._isString(l),a=Object.prototype.toString.call(l)==="[object CanvasGradient]"||l&&l.addColorStop;return n||a||P.warn(we(l)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),l}}function so(){if(Konva.isUnminified)return function(l,e){return Util._isFunction(l)||Util.warn(we(l)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),l}}function sa(){if(F.isUnminified)return function(l,e){return P._isArray(l)?l.forEach(function(n){P._isNumber(n)||P.warn('"'+e+'" attribute has non numeric element '+n+". Make sure that all elements are numbers.")}):P.warn(we(l)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.'),l}}function at(){if(F.isUnminified)return function(l,e){var n=l===!0||l===!1;return n||P.warn(we(l)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),l}}function xs(l){if(F.isUnminified)return function(e,n){return P.isObject(e)||P.warn(we(e)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+l),e}}var Vr="get",jr="set";const w={addGetterSetter(l,e,n,a,s){w.addGetter(l,e,n),w.addSetter(l,e,a,s),w.addOverloadedGetterSetter(l,e)},addGetter(l,e,n){var a=Vr+P._capitalize(e);l.prototype[a]=l.prototype[a]||function(){var s=this.attrs[e];return s===void 0?n:s}},addSetter(l,e,n,a){var s=jr+P._capitalize(e);l.prototype[s]||w.overWriteSetter(l,e,n,a)},overWriteSetter(l,e,n,a){var s=jr+P._capitalize(e);l.prototype[s]=function(o){return n&&o!==void 0&&o!==null&&(o=n.call(this,o,e)),this._setAttr(e,o),a&&a.call(this),this}},addComponentsGetterSetter(l,e,n,a,s){var o=n.length,h=P._capitalize,f=Vr+h(e),c=jr+h(e),g,v;l.prototype[f]=function(){var m={};for(g=0;g<o;g++)v=n[g],m[v]=this.getAttr(e+h(v));return m};var y=xs(n);l.prototype[c]=function(m){var x=this.attrs[e],S;a&&(m=a.call(this,m)),y&&y.call(this,m,e);for(S in m)!m.hasOwnProperty(S)||this._setAttr(e+h(S),m[S]);return this._fireChangeEvent(e,x,m),s&&s.call(this),this},w.addOverloadedGetterSetter(l,e)},addOverloadedGetterSetter(l,e){var n=P._capitalize(e),a=jr+n,s=Vr+n;l.prototype[e]=function(){return arguments.length?(this[a](arguments[0]),this):this[s]()}},addDeprecatedGetterSetter(l,e,n,a){P.error("Adding deprecated "+e);var s=Vr+P._capitalize(e),o=e+" property is deprecated and will be removed soon. Look at Konva change log for more information.";l.prototype[s]=function(){P.error(o);var h=this.attrs[e];return h===void 0?n:h},w.addSetter(l,e,a,function(){P.error(o)}),w.addOverloadedGetterSetter(l,e)},backCompat(l,e){P.each(e,function(n,a){var s=l.prototype[a],o=Vr+P._capitalize(n),h=jr+P._capitalize(n);function f(){s.apply(this,arguments),P.error('"'+n+'" method is deprecated and will be removed soon. Use ""'+a+'" instead.')}l.prototype[n]=f,l.prototype[o]=f,l.prototype[h]=f})},afterSetFilter(){this._filterUpToDate=!1}};function Es(l){var e=[],n=l.length,a=P,s,o;for(s=0;s<n;s++)o=l[s],a._isNumber(o)?o=Math.round(o*1e3)/1e3:a._isString(o)||(o=o+""),e.push(o);return e}var xn=",",oa="(",la=")",fi="([",ha="])",ua=";",Ps="()",ci="=",Ht=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],pt=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"];const Kr=100;class je{constructor(e){this.canvas=e,this._context=e._canvas.getContext("2d"),F.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,n){var a=this.traceArr,s=a.length,o="",h,f,c,g;for(h=0;h<s;h++)f=a[h],c=f.method,c?(g=f.args,o+=c,e?o+=Ps:P._isArray(g[0])?o+=fi+g.join(xn)+ha:(n&&(g=g.map(v=>typeof v=="number"?Math.floor(v):v)),o+=oa+g.join(xn)+la)):(o+=f.property,e||(o+=ci+f.val)),o+=ua;return o}clearTrace(){this.traceArr=[]}_trace(e){var n=this.traceArr,a;n.push(e),a=n.length,a>=Kr&&n.shift()}reset(){var e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){var n=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,n.getWidth()/n.pixelRatio,n.getHeight()/n.pixelRatio)}_applyLineCap(e){var n=e.getLineCap();n&&this.setAttr("lineCap",n)}_applyOpacity(e){var n=e.getAbsoluteOpacity();n!==1&&this.setAttr("globalAlpha",n)}_applyLineJoin(e){var n=e.attrs.lineJoin;n&&this.setAttr("lineJoin",n)}setAttr(e,n){this._context[e]=n}arc(e,n,a,s,o,h){this._context.arc(e,n,a,s,o,h)}arcTo(e,n,a,s,o){this._context.arcTo(e,n,a,s,o)}beginPath(){this._context.beginPath()}bezierCurveTo(e,n,a,s,o,h){this._context.bezierCurveTo(e,n,a,s,o,h)}clearRect(e,n,a,s){this._context.clearRect(e,n,a,s)}clip(){this._context.clip()}closePath(){this._context.closePath()}createImageData(e,n){var a=arguments;if(a.length===2)return this._context.createImageData(e,n);if(a.length===1)return this._context.createImageData(e)}createLinearGradient(e,n,a,s){return this._context.createLinearGradient(e,n,a,s)}createPattern(e,n){return this._context.createPattern(e,n)}createRadialGradient(e,n,a,s,o,h){return this._context.createRadialGradient(e,n,a,s,o,h)}drawImage(e,n,a,s,o,h,f,c,g){var v=arguments,y=this._context;v.length===3?y.drawImage(e,n,a):v.length===5?y.drawImage(e,n,a,s,o):v.length===9&&y.drawImage(e,n,a,s,o,h,f,c,g)}ellipse(e,n,a,s,o,h,f,c){this._context.ellipse(e,n,a,s,o,h,f,c)}isPointInPath(e,n){return this._context.isPointInPath(e,n)}fill(e){e?this._context.fill(e):this._context.fill()}fillRect(e,n,a,s){this._context.fillRect(e,n,a,s)}strokeRect(e,n,a,s){this._context.strokeRect(e,n,a,s)}fillText(e,n,a,s){s?this._context.fillText(e,n,a,s):this._context.fillText(e,n,a)}measureText(e){return this._context.measureText(e)}getImageData(e,n,a,s){return this._context.getImageData(e,n,a,s)}lineTo(e,n){this._context.lineTo(e,n)}moveTo(e,n){this._context.moveTo(e,n)}rect(e,n,a,s){this._context.rect(e,n,a,s)}putImageData(e,n,a){this._context.putImageData(e,n,a)}quadraticCurveTo(e,n,a,s){this._context.quadraticCurveTo(e,n,a,s)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,n){this._context.scale(e,n)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,n,a,s,o,h){this._context.setTransform(e,n,a,s,o,h)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,n,a,s){this._context.strokeText(e,n,a,s)}transform(e,n,a,s,o,h){this._context.transform(e,n,a,s,o,h)}translate(e,n){this._context.translate(e,n)}_enableTrace(){var e=this,n=Ht.length,a=this.setAttr,s,o,h=function(f){var c=e[f],g;e[f]=function(){return o=Es(Array.prototype.slice.call(arguments,0)),g=c.apply(e,arguments),e._trace({method:f,args:o}),g}};for(s=0;s<n;s++)h(Ht[s]);e.setAttr=function(){a.apply(e,arguments);var f=arguments[0],c=arguments[1];(f==="shadowOffsetX"||f==="shadowOffsetY"||f==="shadowBlur")&&(c=c/this.canvas.getPixelRatio()),e._trace({property:f,val:c})}}_applyGlobalCompositeOperation(e){const n=e.attrs.globalCompositeOperation;var a=!n||n==="source-over";a||this.setAttr("globalCompositeOperation",n)}}pt.forEach(function(l){Object.defineProperty(je.prototype,l,{get(){return this._context[l]},set(e){this._context[l]=e}})});class ks extends je{_fillColor(e){var n=e.fill();this.setAttr("fillStyle",n),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){var n=e._getLinearGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fillRadialGradient(e){var n=e._getRadialGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fill(e){var n=e.fill(),a=e.getFillPriority();if(n&&a==="color"){this._fillColor(e);return}var s=e.getFillPatternImage();if(s&&a==="pattern"){this._fillPattern(e);return}var o=e.getFillLinearGradientColorStops();if(o&&a==="linear-gradient"){this._fillLinearGradient(e);return}var h=e.getFillRadialGradientColorStops();if(h&&a==="radial-gradient"){this._fillRadialGradient(e);return}n?this._fillColor(e):s?this._fillPattern(e):o?this._fillLinearGradient(e):h&&this._fillRadialGradient(e)}_strokeLinearGradient(e){var n=e.getStrokeLinearGradientStartPoint(),a=e.getStrokeLinearGradientEndPoint(),s=e.getStrokeLinearGradientColorStops(),o=this.createLinearGradient(n.x,n.y,a.x,a.y);if(s){for(var h=0;h<s.length;h+=2)o.addColorStop(s[h],s[h+1]);this.setAttr("strokeStyle",o)}}_stroke(e){var n=e.dash(),a=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!a){this.save();var s=this.getCanvas().getPixelRatio();this.setTransform(s,0,0,s,0,0)}this._applyLineCap(e),n&&e.dashEnabled()&&(this.setLineDash(n),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var o=e.getStrokeLinearGradientColorStops();o?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),a||this.restore()}}_applyShadow(e){var n,a,s,o=(n=e.getShadowRGBA())!==null&&n!==void 0?n:"black",h=(a=e.getShadowBlur())!==null&&a!==void 0?a:5,f=(s=e.getShadowOffset())!==null&&s!==void 0?s:{x:0,y:0},c=e.getAbsoluteScale(),g=this.canvas.getPixelRatio(),v=c.x*g,y=c.y*g;this.setAttr("shadowColor",o),this.setAttr("shadowBlur",h*Math.min(Math.abs(v),Math.abs(y))),this.setAttr("shadowOffsetX",f.x*v),this.setAttr("shadowOffsetY",f.y*y)}}class Ts extends je{_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){var n=e.getStrokeScaleEnabled();if(!n){this.save();var a=this.getCanvas().getPixelRatio();this.setTransform(a,0,0,a,0,0)}this._applyLineCap(e);var s=e.hitStrokeWidth(),o=s==="auto"?e.strokeWidth():s;this.setAttr("lineWidth",o),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),n||this.restore()}}}var mr;function da(){if(mr)return mr;var l=P.createCanvasElement(),e=l.getContext("2d");return mr=function(){var n=F._global.devicePixelRatio||1,a=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return n/a}(),mr}class En{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var n=e||{},a=n.pixelRatio||F.pixelRatio||da();this.pixelRatio=a,this._canvas=P.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){var n=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/n,this.getHeight()/n)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";var n=this.pixelRatio,a=this.getContext()._context;a.scale(n,n)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";var n=this.pixelRatio,a=this.getContext()._context;a.scale(n,n)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,n){this.setWidth(e||0),this.setHeight(n||0)}toDataURL(e,n){try{return this._canvas.toDataURL(e,n)}catch(a){try{return this._canvas.toDataURL()}catch(s){return P.error("Unable to get data URL. "+s.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}w.addGetterSetter(En,"pixelRatio",void 0,O());class _r extends En{constructor(e={width:0,height:0}){super(e);this.context=new ks(this),this.setSize(e.width,e.height)}}class ir extends En{constructor(e={width:0,height:0}){super(e);this.hitCanvas=!0,this.context=new Ts(this),this.setSize(e.width,e.height)}}const de={get isDragging(){var l=!1;return de._dragElements.forEach(e=>{e.dragStatus==="dragging"&&(l=!0)}),l},justDragged:!1,get node(){var l;return de._dragElements.forEach(e=>{l=e.node}),l},_dragElements:new Map,_drag(l){const e=[];de._dragElements.forEach((n,a)=>{const{node:s}=n,o=s.getStage();o.setPointersPositions(l),n.pointerId===void 0&&(n.pointerId=P._getFirstPointerId(l));const h=o._changedPointerPositions.find(g=>g.id===n.pointerId);if(!!h){if(n.dragStatus!=="dragging"){var f=s.dragDistance(),c=Math.max(Math.abs(h.x-n.startPointerPos.x),Math.abs(h.y-n.startPointerPos.y));if(c<f||(s.startDrag({evt:l}),!s.isDragging()))return}s._setDragPosition(l,n),e.push(s)}}),e.forEach(n=>{n.fire("dragmove",{type:"dragmove",target:n,evt:l},!0)})},_endDragBefore(l){de._dragElements.forEach(e=>{const{node:n}=e,a=n.getStage();if(l&&a.setPointersPositions(l),!a._changedPointerPositions.find(h=>h.id===e.pointerId))return;(e.dragStatus==="dragging"||e.dragStatus==="stopped")&&(de.justDragged=!0,F._mouseListenClick=!1,F._touchListenClick=!1,F._pointerListenClick=!1,e.dragStatus="stopped");const o=e.node.getLayer()||e.node instanceof F.Stage&&e.node;o&&o.batchDraw()})},_endDragAfter(l){de._dragElements.forEach((e,n)=>{e.dragStatus==="stopped"&&e.node.fire("dragend",{type:"dragend",target:e.node,evt:l},!0),e.dragStatus!=="dragging"&&de._dragElements.delete(n)})}};F.isBrowser&&(window.addEventListener("mouseup",de._endDragBefore,!0),window.addEventListener("touchend",de._endDragBefore,!0),window.addEventListener("mousemove",de._drag),window.addEventListener("touchmove",de._drag),window.addEventListener("mouseup",de._endDragAfter,!1),window.addEventListener("touchend",de._endDragAfter,!1));var Pn="absoluteOpacity",kn="allEventListeners",st="absoluteTransform",fa="absoluteScale",Qr="canvas",Rs="Change",As="children",Ms="konva",gi="listening",ca="mouseenter",ga="mouseleave",oo="name",pa="set",va="Shape",Tn=" ",pi="stage",Ut="transform",Ls="Stage",vi="visible",Is=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(Tn);let mi=1;class z{constructor(e){this._id=mi++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===Ut||e===st)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,n){var a=this._cache.get(e),s=e===Ut||e===st,o=a===void 0||s&&a.dirty===!0;return o&&(a=n.call(this),this._cache.set(e,a)),a}_calculate(e,n,a){if(!this._attachedDepsListeners.get(e)){const s=n.map(o=>o+"Change.konva").join(Tn);this.on(s,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,a)}_getCanvasCache(){return this._cache.get(Qr)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===st&&this.fire("absoluteTransformChange")}clearCache(){return this._cache.delete(Qr),this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){var n=e||{},a={};(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)&&(a=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var s=Math.ceil(n.width||a.width),o=Math.ceil(n.height||a.height),h=n.pixelRatio,f=n.x===void 0?a.x:n.x,c=n.y===void 0?a.y:n.y,g=n.offset||0,v=n.drawBorder||!1,y=n.hitCanvasPixelRatio||1;if(!s||!o){P.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}s+=g*2,o+=g*2,f-=g,c-=g;var m=new _r({pixelRatio:h,width:s,height:o}),x=new _r({pixelRatio:h,width:0,height:0}),S=new ir({pixelRatio:y,width:s,height:o}),R=m.getContext(),k=S.getContext();return S.isCache=!0,m.isCache=!0,this._cache.delete(Qr),this._filterUpToDate=!1,n.imageSmoothingEnabled===!1&&(m.getContext()._context.imageSmoothingEnabled=!1,x.getContext()._context.imageSmoothingEnabled=!1),R.save(),k.save(),R.translate(-f,-c),k.translate(-f,-c),this._isUnderCache=!0,this._clearSelfAndDescendantCache(Pn),this._clearSelfAndDescendantCache(fa),this.drawScene(m,this),this.drawHit(S,this),this._isUnderCache=!1,R.restore(),k.restore(),v&&(R.save(),R.beginPath(),R.rect(0,0,s,o),R.closePath(),R.setAttr("strokeStyle","red"),R.setAttr("lineWidth",5),R.stroke(),R.restore()),this._cache.set(Qr,{scene:m,filter:x,hit:S,x:f,y:c}),this._requestDraw(),this}isCached(){return this._cache.has(Qr)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,n){var a=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],s,o,h,f,c=this.getAbsoluteTransform(n);return a.forEach(function(g){var v=c.point(g);s===void 0&&(s=h=v.x,o=f=v.y),s=Math.min(s,v.x),o=Math.min(o,v.y),h=Math.max(h,v.x),f=Math.max(f,v.y)}),{x:s,y:o,width:h-s,height:f-o}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const n=this._getCanvasCache();e.translate(n.x,n.y);var a=this._getCachedSceneCanvas(),s=a.pixelRatio;e.drawImage(a._canvas,0,0,a.width/s,a.height/s),e.restore()}_drawCachedHitCanvas(e){var n=this._getCanvasCache(),a=n.hit;e.save(),e.translate(n.x,n.y),e.drawImage(a._canvas,0,0,a.width/a.pixelRatio,a.height/a.pixelRatio),e.restore()}_getCachedSceneCanvas(){var e=this.filters(),n=this._getCanvasCache(),a=n.scene,s=n.filter,o=s.getContext(),h,f,c,g;if(e){if(!this._filterUpToDate){var v=a.pixelRatio;s.setSize(a.width/a.pixelRatio,a.height/a.pixelRatio);try{for(h=e.length,o.clear(),o.drawImage(a._canvas,0,0,a.getWidth()/v,a.getHeight()/v),f=o.getImageData(0,0,s.getWidth(),s.getHeight()),c=0;c<h;c++){if(g=e[c],typeof g!="function"){P.error("Filter should be type of function, but got "+typeof g+" instead. Please check correct filters");continue}g.call(this,f),o.putImageData(f,0,0)}}catch(y){P.error("Unable to apply filter. "+y.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return s}return a}on(e,n){if(this._cache&&this._cache.delete(kn),arguments.length===3)return this._delegate.apply(this,arguments);var a=e.split(Tn),s=a.length,o,h,f,c,g;for(o=0;o<s;o++)h=a[o],f=h.split("."),c=f[0],g=f[1]||"",this.eventListeners[c]||(this.eventListeners[c]=[]),this.eventListeners[c].push({name:g,handler:n});return this}off(e,n){var a=(e||"").split(Tn),s=a.length,o,h,f,c,g,v;if(this._cache&&this._cache.delete(kn),!e)for(h in this.eventListeners)this._off(h);for(o=0;o<s;o++)if(f=a[o],c=f.split("."),g=c[0],v=c[1],g)this.eventListeners[g]&&this._off(g,v,n);else for(h in this.eventListeners)this._off(h,v,n);return this}dispatchEvent(e){var n={target:this,type:e.type,evt:e};return this.fire(e.type,n),this}addEventListener(e,n){return this.on(e,function(a){n.call(this,a.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,n,a){var s=this;this.on(e,function(o){for(var h=o.target.findAncestors(n,!0,s),f=0;f<h.length;f++)o=P.cloneObject(o),o.currentTarget=h[f],a.call(h[f],o)})}remove(){return this.isDragging()&&this.stopDrag(),de._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(st),this._clearSelfAndDescendantCache(Pn),this._clearSelfAndDescendantCache(fa),this._clearSelfAndDescendantCache(pi),this._clearSelfAndDescendantCache(vi),this._clearSelfAndDescendantCache(gi)}_remove(){this._clearCaches();var e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this}getAttr(e){var n="get"+P._capitalize(e);return P._isFunction(this[n])?this[n]():this.attrs[e]}getAncestors(){for(var e=this.getParent(),n=[];e;)n.push(e),e=e.getParent();return n}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{var n,a;if(!e)return this;for(n in e)n!==As&&(a=pa+P._capitalize(n),P._isFunction(this[a])?this[a](e[n]):this._setAttr(n,e[n]))}),this}isListening(){return this._getCache(gi,this._isListening)}_isListening(e){if(!this.listening())return!1;const a=this.getParent();return a&&a!==e&&this!==e?a._isListening(e):!0}isVisible(){return this._getCache(vi,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const a=this.getParent();return a&&a!==e&&this!==e?a._isVisible(e):!0}shouldDrawHit(e,n=!1){if(e)return this._isVisible(e)&&this._isListening(e);var a=this.getLayer(),s=!1;de._dragElements.forEach(h=>{h.dragStatus==="dragging"&&(h.node.nodeType==="Stage"||h.node.getLayer()===a)&&(s=!0)});var o=!n&&!F.hitOnDragEnabled&&s;return this.isListening()&&this.isVisible()&&!o}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var e=this.getDepth(),n=this,a=0,s,o,h,f;function c(g){for(s=[],o=g.length,h=0;h<o;h++)f=g[h],a++,f.nodeType!==va&&(s=s.concat(f.getChildren().slice())),f._id===n._id&&(h=o);s.length>0&&s[0].getDepth()<=e&&c(s)}return n.nodeType!==Ls&&c(n.getStage().getChildren()),a}getDepth(){for(var e=0,n=this.parent;n;)e++,n=n.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(Ut),this._clearSelfAndDescendantCache(st)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){if(!this.getStage())return null;var e=this.getStage().getPointerPosition();if(!e)return null;var n=this.getAbsoluteTransform().copy();return n.invert(),n.point(e)}getAbsolutePosition(e){let n=!1,a=this.parent;for(;a;){if(a.isCached()){n=!0;break}a=a.parent}n&&!e&&(e=!0);var s=this.getAbsoluteTransform(e).getMatrix(),o=new L,h=this.offset();return o.m=s.slice(),o.translate(h.x,h.y),o.getTranslation()}setAbsolutePosition(e){var n=this._clearTransform();this.attrs.x=n.x,this.attrs.y=n.y,delete n.x,delete n.y,this._clearCache(Ut);var a=this._getAbsoluteTransform().copy();return a.invert(),a.translate(e.x,e.y),e={x:this.attrs.x+a.getTranslation().x,y:this.attrs.y+a.getTranslation().y},this._setTransform(n),this.setPosition({x:e.x,y:e.y}),this._clearCache(Ut),this._clearSelfAndDescendantCache(st),this}_setTransform(e){var n;for(n in e)this.attrs[n]=e[n]}_clearTransform(){var e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){var n=e.x,a=e.y,s=this.x(),o=this.y();return n!==void 0&&(s+=n),a!==void 0&&(o+=a),this.setPosition({x:s,y:o}),this}_eachAncestorReverse(e,n){var a=[],s=this.getParent(),o,h;if(!(n&&n._id===this._id)){for(a.unshift(this);s&&(!n||s._id!==n._id);)a.unshift(s),s=s.parent;for(o=a.length,h=0;h<o;h++)e(a[h])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return P.warn("Node has no parent. moveToTop function is ignored."),!1;var e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return P.warn("Node has no parent. moveUp function is ignored."),!1;var e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return P.warn("Node has no parent. moveDown function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return P.warn("Node has no parent. moveToBottom function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return P.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&P.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var n=this.index;return this.parent.children.splice(n,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(Pn,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var e=this.opacity(),n=this.getParent();return n&&!n._isUnderCache&&(e*=n.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){var e={},n=this.getAttrs(),a,s,o,h,f;e.attrs={};for(a in n)s=n[a],f=P.isObject(s)&&!P._isPlainObject(s)&&!P._isArray(s),!f&&(o=typeof this[a]=="function"&&this[a],delete n[a],h=o?o.call(this):null,n[a]=s,h!==s&&(e.attrs[a]=s));return e.className=this.getClassName(),P._prepareToStringify(e)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,n,a){var s=[];n&&this._isMatch(e)&&s.push(this);for(var o=this.parent;o;){if(o===a)return s;o._isMatch(e)&&s.push(o),o=o.parent}return s}isAncestorOf(e){return!1}findAncestor(e,n,a){return this.findAncestors(e,n,a)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);var n=e.replace(/ /g,"").split(","),a=n.length,s,o;for(s=0;s<a;s++)if(o=n[s],P.isValidSelector(o)||(P.warn('Selector "'+o+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),P.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),P.warn("Konva is awesome, right?")),o.charAt(0)==="#"){if(this.id()===o.slice(1))return!0}else if(o.charAt(0)==="."){if(this.hasName(o.slice(1)))return!0}else if(this.className===o||this.nodeType===o)return!0;return!1}getLayer(){var e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(pi,this._getStage)}_getStage(){var e=this.getParent();if(e)return e.getStage()}fire(e,n={},a){return n.target=n.target||this,a?this._fireAndBubble(e,n):this._fire(e,n),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(st,this._getAbsoluteTransform)}_getAbsoluteTransform(e){var n;if(e)return n=new L,this._eachAncestorReverse(function(s){var o=s.transformsEnabled();o==="all"?n.multiply(s.getTransform()):o==="position"&&n.translate(s.x()-s.offsetX(),s.y()-s.offsetY())},e),n;n=this._cache.get(st)||new L,this.parent?this.parent.getAbsoluteTransform().copyInto(n):n.reset();var a=this.transformsEnabled();if(a==="all")n.multiply(this.getTransform());else if(a==="position"){const s=this.attrs.x||0,o=this.attrs.y||0,h=this.attrs.offsetX||0,f=this.attrs.offsetY||0;n.translate(s-h,o-f)}return n.dirty=!1,n}getAbsoluteScale(e){for(var n=this;n;)n._isUnderCache&&(e=n),n=n.getParent();const s=this.getAbsoluteTransform(e).decompose();return{x:s.scaleX,y:s.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(Ut,this._getTransform)}_getTransform(){var e,n,a=this._cache.get(Ut)||new L;a.reset();var s=this.x(),o=this.y(),h=F.getAngle(this.rotation()),f=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,c=(n=this.attrs.scaleY)!==null&&n!==void 0?n:1,g=this.attrs.skewX||0,v=this.attrs.skewY||0,y=this.attrs.offsetX||0,m=this.attrs.offsetY||0;return(s!==0||o!==0)&&a.translate(s,o),h!==0&&a.rotate(h),(g!==0||v!==0)&&a.skew(g,v),(f!==1||c!==1)&&a.scale(f,c),(y!==0||m!==0)&&a.translate(-1*y,-1*m),a.dirty=!1,a}clone(e){var n=P.cloneObject(this.attrs),a,s,o,h,f;for(a in e)n[a]=e[a];var c=new this.constructor(n);for(a in this.eventListeners)for(s=this.eventListeners[a],o=s.length,h=0;h<o;h++)f=s[h],f.name.indexOf(Ms)<0&&(c.eventListeners[a]||(c.eventListeners[a]=[]),c.eventListeners[a].push(f));return c}_toKonvaCanvas(e){e=e||{};var n=this.getClientRect(),a=this.getStage(),s=e.x!==void 0?e.x:n.x,o=e.y!==void 0?e.y:n.y,h=e.pixelRatio||1,f=new _r({width:e.width||n.width||(a?a.width():0),height:e.height||n.height||(a?a.height():0),pixelRatio:h}),c=f.getContext();return c.save(),(s||o)&&c.translate(-1*s,-1*o),this.drawScene(f),c.restore(),f}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};var n=e.mimeType||null,a=e.quality||null,s=this._toKonvaCanvas(e).toDataURL(n,a);return e.callback&&e.callback(s),s}toImage(e){if(!e||!e.callback)throw"callback required for toImage method config argument";var n=e.callback;delete e.callback,P._urlToImage(this.toDataURL(e),function(a){n(a)})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():F.dragDistance}_off(e,n,a){var s=this.eventListeners[e],o,h,f;for(o=0;o<s.length;o++)if(h=s[o].name,f=s[o].handler,(h!=="konva"||n==="konva")&&(!n||h===n)&&(!a||a===f)){if(s.splice(o,1),s.length===0){delete this.eventListeners[e];break}o--}}_fireChangeEvent(e,n,a){this._fire(e+Rs,{oldVal:n,newVal:a})}addName(e){if(!this.hasName(e)){var n=this.name(),a=n?n+" "+e:e;this.name(a)}return this}hasName(e){if(!e)return!1;const n=this.name();if(!n)return!1;var a=(n||"").split(/\s/g);return a.indexOf(e)!==-1}removeName(e){var n=(this.name()||"").split(/\s/g),a=n.indexOf(e);return a!==-1&&(n.splice(a,1),this.name(n.join(" "))),this}setAttr(e,n){var a=this[pa+P._capitalize(e)];return P._isFunction(a)?a.call(this,n):this._setAttr(e,n),this}_requestDraw(){if(F.autoDrawEnabled){const e=this.getLayer()||this.getStage();e==null||e.batchDraw()}}_setAttr(e,n){var a=this.attrs[e];a===n&&!P.isObject(n)||(n==null?delete this.attrs[e]:this.attrs[e]=n,this._shouldFireChangeEvents&&this._fireChangeEvent(e,a,n),this._requestDraw())}_setComponentAttr(e,n,a){var s;a!==void 0&&(s=this.attrs[e],s||(this.attrs[e]=this.getAttr(e)),this.attrs[e][n]=a,this._fireChangeEvent(e,s,a))}_fireAndBubble(e,n,a){n&&this.nodeType===va&&(n.target=this);var s=(e===ca||e===ga)&&(a&&(this===a||this.isAncestorOf&&this.isAncestorOf(a))||this.nodeType==="Stage"&&!a);if(!s){this._fire(e,n);var o=(e===ca||e===ga)&&a&&a.isAncestorOf&&a.isAncestorOf(this)&&!a.isAncestorOf(this.parent);(n&&!n.cancelBubble||!n)&&this.parent&&this.parent.isListening()&&!o&&(a&&a.parent?this._fireAndBubble.call(this.parent,e,n,a):this._fireAndBubble.call(this.parent,e,n))}}_getProtoListeners(e){let n=this._cache.get(kn);if(!n){n={};let s=Object.getPrototypeOf(this);for(;s;){if(!s.eventListeners){s=Object.getPrototypeOf(s);continue}for(var a in s.eventListeners){const o=s.eventListeners[a],h=n[a]||[];n[a]=o.concat(h)}s=Object.getPrototypeOf(s)}this._cache.set(kn,n)}return n[e]}_fire(e,n){n=n||{},n.currentTarget=this,n.type=e;const a=this._getProtoListeners(e);if(a)for(var s=0;s<a.length;s++)a[s].handler.call(this,n);const o=this.eventListeners[e];if(o)for(var s=0;s<o.length;s++)o[s].handler.call(this,n)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){var n=e?e.pointerId:void 0,a=this.getStage(),s=this.getAbsolutePosition(),o=a._getPointerById(n)||a._changedPointerPositions[0]||s;de._dragElements.set(this._id,{node:this,startPointerPos:o,offset:{x:o.x-s.x,y:o.y-s.y},dragStatus:"ready",pointerId:n})}startDrag(e,n=!0){de._dragElements.has(this._id)||this._createDragElement(e);const a=de._dragElements.get(this._id);a.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},n)}_setDragPosition(e,n){const a=this.getStage()._getPointerById(n.pointerId);if(!!a){var s={x:a.x-n.offset.x,y:a.y-n.offset.y},o=this.dragBoundFunc();if(o!==void 0){const h=o.call(this,s,e);h?s=h:P.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==s.x||this._lastPos.y!==s.y)&&(this.setAbsolutePosition(s),this._requestDraw()),this._lastPos=s}}stopDrag(e){const n=de._dragElements.get(this._id);n&&(n.dragStatus="stopped"),de._endDragBefore(e),de._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=de._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){var n=e.evt.button!==void 0,a=!n||F.dragButtons.indexOf(e.evt.button)>=0;if(!!a&&!this.isDragging()){var s=!1;de._dragElements.forEach(o=>{this.isAncestorOf(o.node)&&(s=!0)}),s||this._createDragElement(e)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var e=this.getStage();if(!e)return;const n=de._dragElements.get(this._id),a=n&&n.dragStatus==="dragging",s=n&&n.dragStatus==="ready";a?this.stopDrag():s&&de._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const n=this.getStage();if(!n)return!1;const a={x:-e.x,y:-e.y,width:n.width()+e.x,height:n.height()+e.y};return P.haveIntersection(a,this.getClientRect())}static create(e,n){return P._isString(e)&&(e=JSON.parse(e)),this._createNode(e,n)}static _createNode(e,n){var a=z.prototype.getClassName.call(e),s=e.children,o,h,f;n&&(e.attrs.container=n),F[a]||(P.warn('Can not find a node with class name "'+a+'". Fallback to "Shape".'),a="Shape");const c=F[a];if(o=new c(e.attrs),s)for(h=s.length,f=0;f<h;f++)o.add(z._createNode(s[f]));return o}}z.prototype.nodeType="Node",z.prototype._attrsAffectingSize=[],z.prototype.eventListeners={},z.prototype.on.call(z.prototype,Is,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(Ut),this._clearSelfAndDescendantCache(st)}),z.prototype.on.call(z.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(vi)}),z.prototype.on.call(z.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(gi)}),z.prototype.on.call(z.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(Pn)});const me=w.addGetterSetter;me(z,"zIndex"),me(z,"absolutePosition"),me(z,"position"),me(z,"x",0,O()),me(z,"y",0,O()),me(z,"globalCompositeOperation","source-over",nr()),me(z,"opacity",1,O()),me(z,"name","",nr()),me(z,"id","",nr()),me(z,"rotation",0,O()),w.addComponentsGetterSetter(z,"scale",["x","y"]),me(z,"scaleX",1,O()),me(z,"scaleY",1,O()),w.addComponentsGetterSetter(z,"skew",["x","y"]),me(z,"skewX",0,O()),me(z,"skewY",0,O()),w.addComponentsGetterSetter(z,"offset",["x","y"]),me(z,"offsetX",0,O()),me(z,"offsetY",0,O()),me(z,"dragDistance",null,O()),me(z,"width",0,O()),me(z,"height",0,O()),me(z,"listening",!0,at()),me(z,"preventDefault",!0,at()),me(z,"filters",null,function(l){return this._filterUpToDate=!1,l}),me(z,"visible",!0,at()),me(z,"transformsEnabled","all",nr()),me(z,"size"),me(z,"dragBoundFunc"),me(z,"draggable",!1,at()),w.backCompat(z,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class Ke extends z{constructor(){super(...arguments);this.children=[]}getChildren(e){if(!e)return this.children||[];const n=this.children||[];var a=[];return n.forEach(function(s){e(s)&&a.push(s)}),a}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(arguments.length>1){for(var n=0;n<arguments.length;n++)this.add(arguments[n]);return this}var a=e[0];return a.getParent()?(a.moveTo(this),this):(this._validateAdd(a),a.index=this.getChildren().length,a.parent=this,a._clearCaches(),this.getChildren().push(a),this._fire("add",{child:a}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){var n=this._generalFind(e,!0);return n.length>0?n[0]:void 0}_generalFind(e,n){var a=[];return this._descendants(s=>{const o=s._isMatch(e);return o&&a.push(s),!!(o&&n)}),a}_descendants(e){let n=!1;const a=this.getChildren();for(const s of a){if(n=e(s),n)return!0;if(!!s.hasChildren()&&(n=s._descendants(e),n))return!0}return!1}toObject(){var e=z.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(n=>{e.children.push(n.toObject())}),e}isAncestorOf(e){for(var n=e.getParent();n;){if(n._id===this._id)return!0;n=n.getParent()}return!1}clone(e){var n=z.prototype.clone.call(this,e);return this.getChildren().forEach(function(a){n.add(a.clone())}),n}getAllIntersections(e){var n=[];return this.find("Shape").forEach(function(a){a.isVisible()&&a.intersects(e)&&n.push(a)}),n}_clearSelfAndDescendantCache(e){var n;super._clearSelfAndDescendantCache(e),!this.isCached()&&((n=this.children)===null||n===void 0||n.forEach(function(a){a._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(n,a){n.index=a}),this._requestDraw()}drawScene(e,n){var a=this.getLayer(),s=e||a&&a.getCanvas(),o=s&&s.getContext(),h=this._getCanvasCache(),f=h&&h.scene,c=s&&s.isCache;if(!this.isVisible()&&!c)return this;if(f){o.save();var g=this.getAbsoluteTransform(n).getMatrix();o.transform(g[0],g[1],g[2],g[3],g[4],g[5]),this._drawCachedSceneCanvas(o),o.restore()}else this._drawChildren("drawScene",s,n);return this}drawHit(e,n){if(!this.shouldDrawHit(n))return this;var a=this.getLayer(),s=e||a&&a.hitCanvas,o=s&&s.getContext(),h=this._getCanvasCache(),f=h&&h.hit;if(f){o.save();var c=this.getAbsoluteTransform(n).getMatrix();o.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedHitCanvas(o),o.restore()}else this._drawChildren("drawHit",s,n);return this}_drawChildren(e,n,a){var s,o=n&&n.getContext(),h=this.clipWidth(),f=this.clipHeight(),c=this.clipFunc(),g=h&&f||c;const v=a===this;if(g){o.save();var y=this.getAbsoluteTransform(a),m=y.getMatrix();if(o.transform(m[0],m[1],m[2],m[3],m[4],m[5]),o.beginPath(),c)c.call(this,o,this);else{var x=this.clipX(),S=this.clipY();o.rect(x,S,h,f)}o.clip(),m=y.copy().invert().getMatrix(),o.transform(m[0],m[1],m[2],m[3],m[4],m[5])}var R=!v&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";R&&(o.save(),o._applyGlobalCompositeOperation(this)),(s=this.children)===null||s===void 0||s.forEach(function(k){k[e](n,a)}),R&&o.restore(),g&&o.restore()}getClientRect(e){var n;e=e||{};var a=e.skipTransform,s=e.relativeTo,o,h,f,c,g={x:Infinity,y:Infinity,width:0,height:0},v=this;(n=this.children)===null||n===void 0||n.forEach(function(R){if(!!R.visible()){var k=R.getClientRect({relativeTo:v,skipShadow:e.skipShadow,skipStroke:e.skipStroke});k.width===0&&k.height===0||(o===void 0?(o=k.x,h=k.y,f=k.x+k.width,c=k.y+k.height):(o=Math.min(o,k.x),h=Math.min(h,k.y),f=Math.max(f,k.x+k.width),c=Math.max(c,k.y+k.height)))}});for(var y=this.find("Shape"),m=!1,x=0;x<y.length;x++){var S=y[x];if(S._isVisible(this)){m=!0;break}}return m&&o!==void 0?g={x:o,y:h,width:f-o,height:c-h}:g={x:0,y:0,width:0,height:0},a?g:this._transformedRect(g,s)}}w.addComponentsGetterSetter(Ke,"clip",["x","y","width","height"]),w.addGetterSetter(Ke,"clipX",void 0,O()),w.addGetterSetter(Ke,"clipY",void 0,O()),w.addGetterSetter(Ke,"clipWidth",void 0,O()),w.addGetterSetter(Ke,"clipHeight",void 0,O()),w.addGetterSetter(Ke,"clipFunc");const qr=new Map,_i=F._global.PointerEvent!==void 0;function Rn(l){return qr.get(l)}function An(l){return{evt:l,pointerId:l.pointerId}}function ma(l,e){return qr.get(l)===e}function _a(l,e){Jr(l),!!e.getStage()&&(qr.set(l,e),_i&&e._fire("gotpointercapture",An(new PointerEvent("gotpointercapture"))))}function Jr(l,e){const n=qr.get(l);if(!n)return;const a=n.getStage();a&&a.content,qr.delete(l),_i&&n._fire("lostpointercapture",An(new PointerEvent("lostpointercapture")))}var Ns="Stage",yi="string",Si="px",Os="mouseout",ya="mouseleave",Sa="mouseover",wi="mouseenter",wa="mousemove",Mn="mousedown",yr="mouseup",ar="pointermove",Wt="pointerdown",Yt="pointerup",Et="pointercancel",Xt="lostpointercapture",_e="pointerout",Ce="pointerleave",vt="pointerover",Le="pointerenter",Be="contextmenu",Vt="touchstart",sr="touchend",We="touchmove",Zr="touchcancel",Ln="wheel",Ca=5,In=[[wi,"_pointerenter"],[Mn,"_pointerdown"],[wa,"_pointermove"],[yr,"_pointerup"],[ya,"_pointerleave"],[Vt,"_pointerdown"],[We,"_pointermove"],[sr,"_pointerup"],[Zr,"_pointercancel"],[Sa,"_pointerover"],[Ln,"_wheel"],[Be,"_contextmenu"],[Wt,"_pointerdown"],[ar,"_pointermove"],[Yt,"_pointerup"],[Et,"_pointercancel"],[Xt,"_lostpointercapture"]];const Nn={mouse:{[_e]:Os,[Ce]:ya,[vt]:Sa,[Le]:wi,[ar]:wa,[Wt]:Mn,[Yt]:yr,[Et]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[_e]:"touchout",[Ce]:"touchleave",[vt]:"touchover",[Le]:"touchenter",[ar]:We,[Wt]:Vt,[Yt]:sr,[Et]:Zr,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[_e]:_e,[Ce]:Ce,[vt]:vt,[Le]:Le,[ar]:ar,[Wt]:Wt,[Yt]:Yt,[Et]:Et,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},or=l=>l.indexOf("pointer")>=0?"pointer":l.indexOf("touch")>=0?"touch":"mouse",ft=l=>{const e=or(l);if(e==="pointer")return F.pointerEventsEnabled&&Nn.pointer;if(e==="touch")return Nn.touch;if(e==="mouse")return Nn.mouse};function xa(l={}){return(l.clipFunc||l.clipWidth||l.clipHeight)&&P.warn("Stage does not support clipping. Please use clip for Layers or Groups."),l}const On="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",pe=[];class Pt extends Ke{constructor(e){super(xa(e));this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),pe.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{xa(this.attrs)}),this._checkVisibility()}_validateAdd(e){const n=e.getType()==="Layer",a=e.getType()==="FastLayer";n||a||P.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const e=this.visible()?"":"none";this.content.style.display=e}setContainer(e){if(typeof e===yi){if(e.charAt(0)==="."){var n=e.slice(1);e=document.getElementsByClassName(n)[0]}else{var a;e.charAt(0)!=="#"?a=e:a=e.slice(1),e=document.getElementById(a)}if(!e)throw"Can not find container in document with id "+a}return this._setAttr("container",e),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),e.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var e=this.children,n=e.length,a;for(a=0;a<n;a++)e[a].clear();return this}clone(e){return e||(e={}),e.container=typeof document!="undefined"&&document.createElement("div"),Ke.prototype.clone.call(this,e)}destroy(){super.destroy();var e=this.content;e&&P._isInDocument(e)&&this.container().removeChild(e);var n=pe.indexOf(this);return n>-1&&pe.splice(n,1),this}getPointerPosition(){const e=this._pointerPositions[0]||this._changedPointerPositions[0];return e?{x:e.x,y:e.y}:(P.warn(On),null)}_getPointerById(e){return this._pointerPositions.find(n=>n.id===e)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(e){e=e||{},e.x=e.x||0,e.y=e.y||0,e.width=e.width||this.width(),e.height=e.height||this.height();var n=new _r({width:e.width,height:e.height,pixelRatio:e.pixelRatio||1}),a=n.getContext()._context,s=this.children;return(e.x||e.y)&&a.translate(-1*e.x,-1*e.y),s.forEach(function(o){if(!!o.isVisible()){var h=o._toKonvaCanvas(e);a.drawImage(h._canvas,e.x,e.y,h.getWidth()/h.getPixelRatio(),h.getHeight()/h.getPixelRatio())}}),n}getIntersection(e){if(!e)return null;var n=this.children,a=n.length,s=a-1,o;for(o=s;o>=0;o--){const h=n[o].getIntersection(e);if(h)return h}return null}_resizeDOM(){var e=this.width(),n=this.height();this.content&&(this.content.style.width=e+Si,this.content.style.height=n+Si),this.bufferCanvas.setSize(e,n),this.bufferHitCanvas.setSize(e,n),this.children.forEach(a=>{a.setSize({width:e,height:n}),a.draw()})}add(e,...n){if(arguments.length>1){for(var a=0;a<arguments.length;a++)this.add(arguments[a]);return this}super.add(e);var s=this.children.length;return s>Ca&&P.warn("The stage has "+s+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e.setSize({width:this.width(),height:this.height()}),e.draw(),F.isBrowser&&this.content.appendChild(e.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(e){return ma(e,this)}setPointerCapture(e){_a(e,this)}releaseCapture(e){Jr(e,this)}getLayers(){return this.children}_bindContentEvents(){!F.isBrowser||In.forEach(([e,n])=>{this.content.addEventListener(e,a=>{this[n](a)})})}_pointerenter(e){this.setPointersPositions(e);const n=ft(e.type);this._fire(n.pointerenter,{evt:e,target:this,currentTarget:this})}_pointerover(e){this.setPointersPositions(e);const n=ft(e.type);this._fire(n.pointerover,{evt:e,target:this,currentTarget:this})}_getTargetShape(e){let n=this[e+"targetShape"];return n&&!n.getStage()&&(n=null),n}_pointerleave(e){const n=ft(e.type),a=or(e.type);if(!!n){this.setPointersPositions(e);var s=this._getTargetShape(a),o=!de.isDragging||F.hitOnDragEnabled;s&&o?(s._fireAndBubble(n.pointerout,{evt:e}),s._fireAndBubble(n.pointerleave,{evt:e}),this._fire(n.pointerleave,{evt:e,target:this,currentTarget:this}),this[a+"targetShape"]=null):o&&(this._fire(n.pointerleave,{evt:e,target:this,currentTarget:this}),this._fire(n.pointerout,{evt:e,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[]}}_pointerdown(e){const n=ft(e.type),a=or(e.type);if(!!n){this.setPointersPositions(e);var s=!1;this._changedPointerPositions.forEach(o=>{var h=this.getIntersection(o);if(de.justDragged=!1,F["_"+a+"ListenClick"]=!0,!(h&&h.isListening()))return;F.capturePointerEventsEnabled&&h.setPointerCapture(o.id),this[a+"ClickStartShape"]=h,h._fireAndBubble(n.pointerdown,{evt:e,pointerId:o.id}),s=!0;const c=e.type.indexOf("touch")>=0;h.preventDefault()&&e.cancelable&&c&&e.preventDefault()}),s||this._fire(n.pointerdown,{evt:e,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(e){const n=ft(e.type),a=or(e.type);if(!n)return;de.isDragging&&de.node.preventDefault()&&e.cancelable&&e.preventDefault(),this.setPointersPositions(e);var s=!de.isDragging||F.hitOnDragEnabled;if(!s)return;var o={};let h=!1;var f=this._getTargetShape(a);this._changedPointerPositions.forEach(c=>{const g=Rn(c.id)||this.getIntersection(c),v=c.id,y={evt:e,pointerId:v};var m=f!==g;if(m&&f&&(f._fireAndBubble(n.pointerout,Object.assign({},y),g),f._fireAndBubble(n.pointerleave,Object.assign({},y),g)),g){if(o[g._id])return;o[g._id]=!0}g&&g.isListening()?(h=!0,m&&(g._fireAndBubble(n.pointerover,Object.assign({},y),f),g._fireAndBubble(n.pointerenter,Object.assign({},y),f),this[a+"targetShape"]=g),g._fireAndBubble(n.pointermove,Object.assign({},y))):f&&(this._fire(n.pointerover,{evt:e,target:this,currentTarget:this,pointerId:v}),this[a+"targetShape"]=null)}),h||this._fire(n.pointermove,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(e){const n=ft(e.type),a=or(e.type);if(!n)return;this.setPointersPositions(e);const s=this[a+"ClickStartShape"],o=this[a+"ClickEndShape"];var h={};let f=!1;this._changedPointerPositions.forEach(c=>{const g=Rn(c.id)||this.getIntersection(c);if(g){if(g.releaseCapture(c.id),h[g._id])return;h[g._id]=!0}const v=c.id,y={evt:e,pointerId:v};let m=!1;F["_"+a+"InDblClickWindow"]?(m=!0,clearTimeout(this[a+"DblTimeout"])):de.justDragged||(F["_"+a+"InDblClickWindow"]=!0,clearTimeout(this[a+"DblTimeout"])),this[a+"DblTimeout"]=setTimeout(function(){F["_"+a+"InDblClickWindow"]=!1},F.dblClickWindow),g&&g.isListening()?(f=!0,this[a+"ClickEndShape"]=g,g._fireAndBubble(n.pointerup,Object.assign({},y)),F["_"+a+"ListenClick"]&&s&&s===g&&(g._fireAndBubble(n.pointerclick,Object.assign({},y)),m&&o&&o===g&&g._fireAndBubble(n.pointerdblclick,Object.assign({},y)))):(this[a+"ClickEndShape"]=null,F["_"+a+"ListenClick"]&&this._fire(n.pointerclick,{evt:e,target:this,currentTarget:this,pointerId:v}),m&&this._fire(n.pointerdblclick,{evt:e,target:this,currentTarget:this,pointerId:v}))}),f||this._fire(n.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),F["_"+a+"ListenClick"]=!1,e.cancelable&&e.preventDefault()}_contextmenu(e){this.setPointersPositions(e);var n=this.getIntersection(this.getPointerPosition());n&&n.isListening()?n._fireAndBubble(Be,{evt:e}):this._fire(Be,{evt:e,target:this,currentTarget:this})}_wheel(e){this.setPointersPositions(e);var n=this.getIntersection(this.getPointerPosition());n&&n.isListening()?n._fireAndBubble(Ln,{evt:e}):this._fire(Ln,{evt:e,target:this,currentTarget:this})}_pointercancel(e){this.setPointersPositions(e);const n=Rn(e.pointerId)||this.getIntersection(this.getPointerPosition());n&&n._fireAndBubble(Yt,An(e)),Jr(e.pointerId)}_lostpointercapture(e){Jr(e.pointerId)}setPointersPositions(e){var n=this._getContentPosition(),a=null,s=null;e=e||window.event,e.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(e.touches,o=>{this._pointerPositions.push({id:o.identifier,x:(o.clientX-n.left)/n.scaleX,y:(o.clientY-n.top)/n.scaleY})}),Array.prototype.forEach.call(e.changedTouches||e.touches,o=>{this._changedPointerPositions.push({id:o.identifier,x:(o.clientX-n.left)/n.scaleX,y:(o.clientY-n.top)/n.scaleY})})):(a=(e.clientX-n.left)/n.scaleX,s=(e.clientY-n.top)/n.scaleY,this.pointerPos={x:a,y:s},this._pointerPositions=[{x:a,y:s,id:P._getFirstPointerId(e)}],this._changedPointerPositions=[{x:a,y:s,id:P._getFirstPointerId(e)}])}_setPointerPosition(e){P.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(e)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var e=this.content.getBoundingClientRect();return{top:e.top,left:e.left,scaleX:e.width/this.content.clientWidth||1,scaleY:e.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new _r({width:this.width(),height:this.height()}),this.bufferHitCanvas=new ir({pixelRatio:1,width:this.width(),height:this.height()}),!!F.isBrowser){var e=this.container();if(!e)throw"Stage has no container. A container is required.";e.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),e.appendChild(this.content),this._resizeDOM()}}cache(){return P.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(e){e.batchDraw()}),this}}Pt.prototype.nodeType=Ns,ie(Pt),w.addGetterSetter(Pt,"container");var Ea="hasShadow",Pa="shadowRGBA",Sr="patternImage",Ci="linearGradient",$r="radialGradient";let Ot;function en(){return Ot||(Ot=P.createCanvasElement().getContext("2d"),Ot)}const jt={};function Kt(l){l.fill()}function Gs(l){l.stroke()}function Ds(l){l.fill()}function zs(l){l.stroke()}function bs(){this._clearCache(Ea)}function xi(){this._clearCache(Pa)}function Ei(){this._clearCache(Sr)}function Fs(){this._clearCache(Ci)}function ka(){this._clearCache($r)}class I extends z{constructor(e){super(e);let n;for(;n=P.getRandomColor(),!(n&&!(n in jt)););this.colorKey=n,jt[n]=this}getContext(){return P.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return P.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(Ea,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(Sr,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var e=en();const n=e.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(n&&n.setTransform){const a=new L;a.translate(this.fillPatternX(),this.fillPatternY()),a.rotate(F.getAngle(this.fillPatternRotation())),a.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),a.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const s=a.getMatrix();n.setTransform({a:s[0],b:s[1],c:s[2],d:s[3],e:s[4],f:s[5]})}return n}}_getLinearGradient(){return this._getCache(Ci,this.__getLinearGradient)}__getLinearGradient(){var e=this.fillLinearGradientColorStops();if(e){for(var n=en(),a=this.fillLinearGradientStartPoint(),s=this.fillLinearGradientEndPoint(),o=n.createLinearGradient(a.x,a.y,s.x,s.y),h=0;h<e.length;h+=2)o.addColorStop(e[h],e[h+1]);return o}}_getRadialGradient(){return this._getCache($r,this.__getRadialGradient)}__getRadialGradient(){var e=this.fillRadialGradientColorStops();if(e){for(var n=en(),a=this.fillRadialGradientStartPoint(),s=this.fillRadialGradientEndPoint(),o=n.createRadialGradient(a.x,a.y,this.fillRadialGradientStartRadius(),s.x,s.y,this.fillRadialGradientEndRadius()),h=0;h<e.length;h+=2)o.addColorStop(e[h],e[h+1]);return o}}getShadowRGBA(){return this._getCache(Pa,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var e=P.colorToRGBA(this.shadowColor());return"rgba("+e.r+","+e.g+","+e.b+","+e.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const e=this.hitStrokeWidth();return e==="auto"?this.hasStroke():this.strokeEnabled()&&!!e}intersects(e){var n=this.getStage(),a=n.bufferHitCanvas,s;return a.getContext().clear(),this.drawHit(a,null,!0),s=a.context.getImageData(Math.round(e.x),Math.round(e.y),1,1).data,s[3]>0}destroy(){return z.prototype.destroy.call(this),delete jt[this.colorKey],delete this.colorKey,this}_useBufferCanvas(e){var n;if(!this.getStage()||!((n=this.attrs.perfectDrawEnabled)!==null&&n!==void 0?n:!0))return!1;const s=e||this.hasFill(),o=this.hasStroke(),h=this.getAbsoluteOpacity()!==1;if(s&&o&&h)return!0;const f=this.hasShadow(),c=this.shadowForStrokeEnabled();return!!(s&&o&&f&&c)}setStrokeHitEnabled(e){P.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),e?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var e=this.size();return{x:this._centroid?-e.width/2:0,y:this._centroid?-e.height/2:0,width:e.width,height:e.height}}getClientRect(e={}){const n=e.skipTransform,a=e.relativeTo,s=this.getSelfRect(),h=!e.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,f=s.width+h,c=s.height+h,g=!e.skipShadow&&this.hasShadow(),v=g?this.shadowOffsetX():0,y=g?this.shadowOffsetY():0,m=f+Math.abs(v),x=c+Math.abs(y),S=g&&this.shadowBlur()||0,R=m+S*2,k=x+S*2;let D=0;Math.round(h/2)!==h/2&&(D=1);const G={width:R+D,height:k+D,x:-Math.round(h/2+S)+Math.min(v,0)+s.x,y:-Math.round(h/2+S)+Math.min(y,0)+s.y};return n?G:this._transformedRect(G,a)}drawScene(e,n){var a=this.getLayer(),s=e||a.getCanvas(),o=s.getContext(),h=this._getCanvasCache(),f=this.getSceneFunc(),c=this.hasShadow(),g,v,y,m=s.isCache,x=n===this;if(!this.isVisible()&&!x)return this;if(h){o.save();var S=this.getAbsoluteTransform(n).getMatrix();return o.transform(S[0],S[1],S[2],S[3],S[4],S[5]),this._drawCachedSceneCanvas(o),o.restore(),this}if(!f)return this;if(o.save(),this._useBufferCanvas()&&!m){g=this.getStage(),v=g.bufferCanvas,y=v.getContext(),y.clear(),y.save(),y._applyLineJoin(this);var R=this.getAbsoluteTransform(n).getMatrix();y.transform(R[0],R[1],R[2],R[3],R[4],R[5]),f.call(this,y,this),y.restore();var k=v.pixelRatio;c&&o._applyShadow(this),o._applyOpacity(this),o._applyGlobalCompositeOperation(this),o.drawImage(v._canvas,0,0,v.width/k,v.height/k)}else{if(o._applyLineJoin(this),!x){var R=this.getAbsoluteTransform(n).getMatrix();o.transform(R[0],R[1],R[2],R[3],R[4],R[5]),o._applyOpacity(this),o._applyGlobalCompositeOperation(this)}c&&o._applyShadow(this),f.call(this,o,this)}return o.restore(),this}drawHit(e,n,a=!1){if(!this.shouldDrawHit(n,a))return this;var s=this.getLayer(),o=e||s.hitCanvas,h=o&&o.getContext(),f=this.hitFunc()||this.sceneFunc(),c=this._getCanvasCache(),g=c&&c.hit;if(this.colorKey||P.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),g){h.save();var v=this.getAbsoluteTransform(n).getMatrix();return h.transform(v[0],v[1],v[2],v[3],v[4],v[5]),this._drawCachedHitCanvas(h),h.restore(),this}if(!f)return this;if(h.save(),h._applyLineJoin(this),!(this===n)){var m=this.getAbsoluteTransform(n).getMatrix();h.transform(m[0],m[1],m[2],m[3],m[4],m[5])}return f.call(this,h,this),h.restore(),this}drawHitFromCache(e=0){var n=this._getCanvasCache(),a=this._getCachedSceneCanvas(),s=n.hit,o=s.getContext(),h=s.getWidth(),f=s.getHeight(),c,g,v,y,m,x;o.clear(),o.drawImage(a._canvas,0,0,h,f);try{for(c=o.getImageData(0,0,h,f),g=c.data,v=g.length,y=P._hexToRgb(this.colorKey),m=0;m<v;m+=4)x=g[m+3],x>e?(g[m]=y.r,g[m+1]=y.g,g[m+2]=y.b,g[m+3]=255):g[m+3]=0;o.putImageData(c,0,0)}catch(S){P.error("Unable to draw hit graph from cached scene canvas. "+S.message)}return this}hasPointerCapture(e){return ma(e,this)}setPointerCapture(e){_a(e,this)}releaseCapture(e){Jr(e,this)}}I.prototype._fillFunc=Kt,I.prototype._strokeFunc=Gs,I.prototype._fillFuncHit=Ds,I.prototype._strokeFuncHit=zs,I.prototype._centroid=!1,I.prototype.nodeType="Shape",ie(I),I.prototype.eventListeners={},I.prototype.on.call(I.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",bs),I.prototype.on.call(I.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",xi),I.prototype.on.call(I.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",Ei),I.prototype.on.call(I.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",Fs),I.prototype.on.call(I.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",ka),w.addGetterSetter(I,"stroke",void 0,di()),w.addGetterSetter(I,"strokeWidth",2,O()),w.addGetterSetter(I,"fillAfterStrokeEnabled",!1),w.addGetterSetter(I,"hitStrokeWidth","auto",Cn()),w.addGetterSetter(I,"strokeHitEnabled",!0,at()),w.addGetterSetter(I,"perfectDrawEnabled",!0,at()),w.addGetterSetter(I,"shadowForStrokeEnabled",!0,at()),w.addGetterSetter(I,"lineJoin"),w.addGetterSetter(I,"lineCap"),w.addGetterSetter(I,"sceneFunc"),w.addGetterSetter(I,"hitFunc"),w.addGetterSetter(I,"dash"),w.addGetterSetter(I,"dashOffset",0,O()),w.addGetterSetter(I,"shadowColor",void 0,nr()),w.addGetterSetter(I,"shadowBlur",0,O()),w.addGetterSetter(I,"shadowOpacity",1,O()),w.addComponentsGetterSetter(I,"shadowOffset",["x","y"]),w.addGetterSetter(I,"shadowOffsetX",0,O()),w.addGetterSetter(I,"shadowOffsetY",0,O()),w.addGetterSetter(I,"fillPatternImage"),w.addGetterSetter(I,"fill",void 0,di()),w.addGetterSetter(I,"fillPatternX",0,O()),w.addGetterSetter(I,"fillPatternY",0,O()),w.addGetterSetter(I,"fillLinearGradientColorStops"),w.addGetterSetter(I,"strokeLinearGradientColorStops"),w.addGetterSetter(I,"fillRadialGradientStartRadius",0),w.addGetterSetter(I,"fillRadialGradientEndRadius",0),w.addGetterSetter(I,"fillRadialGradientColorStops"),w.addGetterSetter(I,"fillPatternRepeat","repeat"),w.addGetterSetter(I,"fillEnabled",!0),w.addGetterSetter(I,"strokeEnabled",!0),w.addGetterSetter(I,"shadowEnabled",!0),w.addGetterSetter(I,"dashEnabled",!0),w.addGetterSetter(I,"strokeScaleEnabled",!0),w.addGetterSetter(I,"fillPriority","color"),w.addComponentsGetterSetter(I,"fillPatternOffset",["x","y"]),w.addGetterSetter(I,"fillPatternOffsetX",0,O()),w.addGetterSetter(I,"fillPatternOffsetY",0,O()),w.addComponentsGetterSetter(I,"fillPatternScale",["x","y"]),w.addGetterSetter(I,"fillPatternScaleX",1,O()),w.addGetterSetter(I,"fillPatternScaleY",1,O()),w.addComponentsGetterSetter(I,"fillLinearGradientStartPoint",["x","y"]),w.addComponentsGetterSetter(I,"strokeLinearGradientStartPoint",["x","y"]),w.addGetterSetter(I,"fillLinearGradientStartPointX",0),w.addGetterSetter(I,"strokeLinearGradientStartPointX",0),w.addGetterSetter(I,"fillLinearGradientStartPointY",0),w.addGetterSetter(I,"strokeLinearGradientStartPointY",0),w.addComponentsGetterSetter(I,"fillLinearGradientEndPoint",["x","y"]),w.addComponentsGetterSetter(I,"strokeLinearGradientEndPoint",["x","y"]),w.addGetterSetter(I,"fillLinearGradientEndPointX",0),w.addGetterSetter(I,"strokeLinearGradientEndPointX",0),w.addGetterSetter(I,"fillLinearGradientEndPointY",0),w.addGetterSetter(I,"strokeLinearGradientEndPointY",0),w.addComponentsGetterSetter(I,"fillRadialGradientStartPoint",["x","y"]),w.addGetterSetter(I,"fillRadialGradientStartPointX",0),w.addGetterSetter(I,"fillRadialGradientStartPointY",0),w.addComponentsGetterSetter(I,"fillRadialGradientEndPoint",["x","y"]),w.addGetterSetter(I,"fillRadialGradientEndPointX",0),w.addGetterSetter(I,"fillRadialGradientEndPointY",0),w.addGetterSetter(I,"fillPatternRotation",0),w.backCompat(I,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});var Bs="#",Gn="beforeDraw",Ta="draw",Pi=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],Ra=Pi.length;class Qt extends Ke{constructor(e){super(e);this.canvas=new _r,this.hitCanvas=new ir({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);var n=this.getStage();return n&&n.content&&(n.content.removeChild(this.getNativeCanvasElement()),e<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[e+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){z.prototype.moveToTop.call(this);var e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){var e=z.prototype.moveUp.call(this);if(!e)return!1;var n=this.getStage();return!n||!n.content?!1:(n.content.removeChild(this.getNativeCanvasElement()),this.index<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[this.index+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(z.prototype.moveDown.call(this)){var e=this.getStage();if(e){var n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(z.prototype.moveToBottom.call(this)){var e=this.getStage();if(e){var n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var e=this.getNativeCanvasElement();return z.prototype.remove.call(this),e&&e.parentNode&&P._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:n}){return this.canvas.setSize(e,n),this.hitCanvas.setSize(e,n),this._setSmoothEnabled(),this}_validateAdd(e){var n=e.getType();n!=="Group"&&n!=="Shape"&&P.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return e=e||{},e.width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=e.x!==void 0?e.x:this.x(),e.y=e.y!==void 0?e.y:this.y(),z.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){P.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){P.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,P.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;for(var n=1,a=!1;;){for(let s=0;s<Ra;s++){const o=Pi[s],h=this._getIntersection({x:e.x+o.x*n,y:e.y+o.y*n}),f=h.shape;if(f)return f;if(a=!!h.antialiased,!h.antialiased)break}if(a)n+=1;else return null}}_getIntersection(e){const n=this.hitCanvas.pixelRatio,a=this.hitCanvas.context.getImageData(Math.round(e.x*n),Math.round(e.y*n),1,1).data,s=a[3];if(s===255){const o=P._rgbToHex(a[0],a[1],a[2]),h=jt[Bs+o];return h?{shape:h}:{antialiased:!0}}else if(s>0)return{antialiased:!0};return{}}drawScene(e,n){var a=this.getLayer(),s=e||a&&a.getCanvas();return this._fire(Gn,{node:this}),this.clearBeforeDraw()&&s.getContext().clear(),Ke.prototype.drawScene.call(this,s,n),this._fire(Ta,{node:this}),this}drawHit(e,n){var a=this.getLayer(),s=e||a&&a.hitCanvas;return a&&a.clearBeforeDraw()&&a.getHitCanvas().getContext().clear(),Ke.prototype.drawHit.call(this,s,n),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){P.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return P.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!(!this.parent||!this.parent.content)){var e=this.parent,n=!!this.hitCanvas._canvas.parentNode;n?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}}}Qt.prototype.nodeType="Layer",ie(Qt),w.addGetterSetter(Qt,"imageSmoothingEnabled",!0),w.addGetterSetter(Qt,"clearBeforeDraw",!0),w.addGetterSetter(Qt,"hitGraphEnabled",!0,at());class tn extends Qt{constructor(e){super(e);this.listening(!1),P.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}tn.prototype.nodeType="FastLayer",ie(tn);class wr extends Ke{_validateAdd(e){var n=e.getType();n!=="Group"&&n!=="Shape"&&P.throw("You may only add groups and shapes to groups.")}}wr.prototype.nodeType="Group",ie(wr);var mt=function(){return Ue.performance&&Ue.performance.now?function(){return Ue.performance.now()}:function(){return new Date().getTime()}}();class Ye{constructor(e,n){this.id=Ye.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:mt(),frameRate:0},this.func=e,this.setLayers(n)}setLayers(e){var n=[];return e?e.length>0?n=e:n=[e]:n=[],this.layers=n,this}getLayers(){return this.layers}addLayer(e){var n=this.layers,a=n.length,s;for(s=0;s<a;s++)if(n[s]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){var e=Ye,n=e.animations,a=n.length,s;for(s=0;s<a;s++)if(n[s].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=mt(),Ye._addAnimation(this),this}stop(){return Ye._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){var n=e.id,a=this.animations,s=a.length,o;for(o=0;o<s;o++)if(a[o].id===n){this.animations.splice(o,1);break}}static _runFrames(){var e={},n=this.animations,a,s,o,h,f,c,g,v,y;for(h=0;h<n.length;h++)if(a=n[h],s=a.layers,o=a.func,a._updateFrameObject(mt()),c=s.length,o?y=o.call(a,a.frame)!==!1:y=!0,!!y)for(f=0;f<c;f++)g=s[f],g._id!==void 0&&(e[g._id]=g);for(v in e)!e.hasOwnProperty(v)||e[v].batchDraw()}static _animationLoop(){var e=Ye;e.animations.length?(e._runFrames(),P.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,P.requestAnimFrame(this._animationLoop))}}Ye.animations=[],Ye.animIdCounter=0,Ye.animRunning=!1;var ki={node:1,duration:1,easing:1,onFinish:1,yoyo:1},Aa=1,Ge=2,lr=3,Ma=0,kt=["fill","stroke","shadowColor"];class rn{constructor(e,n,a,s,o,h,f){this.prop=e,this.propFunc=n,this.begin=s,this._pos=s,this.duration=h,this._change=0,this.prevPos=0,this.yoyo=f,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=a,this._change=o-this.begin,this.pause()}fire(e){var n=this[e];n&&n()}setTime(e){e>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():e<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=e,this.update())}getTime(){return this._time}setPosition(e){this.prevPos=this._pos,this.propFunc(e),this._pos=e}getPosition(e){return e===void 0&&(e=this._time),this.func(e,this.begin,this._change,this.duration)}play(){this.state=Ge,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=lr,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(e){this.pause(),this._time=e,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var e=this.getTimer()-this._startTime;this.state===Ge?this.setTime(e):this.state===lr&&this.setTime(this.duration-e)}pause(){this.state=Aa,this.fire("onPause")}getTimer(){return new Date().getTime()}}class fe{constructor(e){var n=this,a=e.node,s=a._id,o,h=e.easing||Cr.Linear,f=!!e.yoyo,c;typeof e.duration=="undefined"?o=.3:e.duration===0?o=.001:o=e.duration,this.node=a,this._id=Ma++;var g=a.getLayer()||(a instanceof F.Stage?a.getLayers():null);g||P.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new Ye(function(){n.tween.onEnterFrame()},g),this.tween=new rn(c,function(v){n._tweenFunc(v)},h,0,1,o*1e3,f),this._addListeners(),fe.attrs[s]||(fe.attrs[s]={}),fe.attrs[s][this._id]||(fe.attrs[s][this._id]={}),fe.tweens[s]||(fe.tweens[s]={});for(c in e)ki[c]===void 0&&this._addAttr(c,e[c]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset,this.onUpdate=e.onUpdate}_addAttr(e,n){var a=this.node,s=a._id,o,h,f,c,g,v,y,m;if(f=fe.tweens[s][e],f&&delete fe.attrs[s][f][e],o=a.getAttr(e),P._isArray(n))if(h=[],g=Math.max(n.length,o.length),e==="points"&&n.length!==o.length&&(n.length>o.length?(y=o,o=P._prepareArrayForTween(o,n,a.closed())):(v=n,n=P._prepareArrayForTween(n,o,a.closed()))),e.indexOf("fill")===0)for(c=0;c<g;c++)if(c%2==0)h.push(n[c]-o[c]);else{var x=P.colorToRGBA(o[c]);m=P.colorToRGBA(n[c]),o[c]=x,h.push({r:m.r-x.r,g:m.g-x.g,b:m.b-x.b,a:m.a-x.a})}else for(c=0;c<g;c++)h.push(n[c]-o[c]);else kt.indexOf(e)!==-1?(o=P.colorToRGBA(o),m=P.colorToRGBA(n),h={r:m.r-o.r,g:m.g-o.g,b:m.b-o.b,a:m.a-o.a}):h=n-o;fe.attrs[s][this._id][e]={start:o,diff:h,end:n,trueEnd:v,trueStart:y},fe.tweens[s][e]=this._id}_tweenFunc(e){var n=this.node,a=fe.attrs[n._id][this._id],s,o,h,f,c,g,v,y;for(s in a){if(o=a[s],h=o.start,f=o.diff,y=o.end,P._isArray(h))if(c=[],v=Math.max(h.length,y.length),s.indexOf("fill")===0)for(g=0;g<v;g++)g%2==0?c.push((h[g]||0)+f[g]*e):c.push("rgba("+Math.round(h[g].r+f[g].r*e)+","+Math.round(h[g].g+f[g].g*e)+","+Math.round(h[g].b+f[g].b*e)+","+(h[g].a+f[g].a*e)+")");else for(g=0;g<v;g++)c.push((h[g]||0)+f[g]*e);else kt.indexOf(s)!==-1?c="rgba("+Math.round(h.r+f.r*e)+","+Math.round(h.g+f.g*e)+","+Math.round(h.b+f.b*e)+","+(h.a+f.a*e)+")":c=h+f*e;n.setAttr(s,c)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var e=this.node,n=fe.attrs[e._id][this._id];n.points&&n.points.trueEnd&&e.setAttr("points",n.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var e=this.node,n=fe.attrs[e._id][this._id];n.points&&n.points.trueStart&&e.points(n.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(e){return this.tween.seek(e*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var e=this.node._id,n=this._id,a=fe.tweens[e],s;this.pause();for(s in a)delete fe.tweens[e][s];delete fe.attrs[e][n]}}fe.attrs={},fe.tweens={},z.prototype.to=function(l){var e=l.onFinish;l.node=this,l.onFinish=function(){this.destroy(),e&&e()};var n=new fe(l);n.play()};const Cr={BackEaseIn(l,e,n,a){var s=1.70158;return n*(l/=a)*l*((s+1)*l-s)+e},BackEaseOut(l,e,n,a){var s=1.70158;return n*((l=l/a-1)*l*((s+1)*l+s)+1)+e},BackEaseInOut(l,e,n,a){var s=1.70158;return(l/=a/2)<1?n/2*(l*l*(((s*=1.525)+1)*l-s))+e:n/2*((l-=2)*l*(((s*=1.525)+1)*l+s)+2)+e},ElasticEaseIn(l,e,n,a,s,o){var h=0;return l===0?e:(l/=a)===1?e+n:(o||(o=a*.3),!s||s<Math.abs(n)?(s=n,h=o/4):h=o/(2*Math.PI)*Math.asin(n/s),-(s*Math.pow(2,10*(l-=1))*Math.sin((l*a-h)*(2*Math.PI)/o))+e)},ElasticEaseOut(l,e,n,a,s,o){var h=0;return l===0?e:(l/=a)===1?e+n:(o||(o=a*.3),!s||s<Math.abs(n)?(s=n,h=o/4):h=o/(2*Math.PI)*Math.asin(n/s),s*Math.pow(2,-10*l)*Math.sin((l*a-h)*(2*Math.PI)/o)+n+e)},ElasticEaseInOut(l,e,n,a,s,o){var h=0;return l===0?e:(l/=a/2)===2?e+n:(o||(o=a*(.3*1.5)),!s||s<Math.abs(n)?(s=n,h=o/4):h=o/(2*Math.PI)*Math.asin(n/s),l<1?-.5*(s*Math.pow(2,10*(l-=1))*Math.sin((l*a-h)*(2*Math.PI)/o))+e:s*Math.pow(2,-10*(l-=1))*Math.sin((l*a-h)*(2*Math.PI)/o)*.5+n+e)},BounceEaseOut(l,e,n,a){return(l/=a)<1/2.75?n*(7.5625*l*l)+e:l<2/2.75?n*(7.5625*(l-=1.5/2.75)*l+.75)+e:l<2.5/2.75?n*(7.5625*(l-=2.25/2.75)*l+.9375)+e:n*(7.5625*(l-=2.625/2.75)*l+.984375)+e},BounceEaseIn(l,e,n,a){return n-Cr.BounceEaseOut(a-l,0,n,a)+e},BounceEaseInOut(l,e,n,a){return l<a/2?Cr.BounceEaseIn(l*2,0,n,a)*.5+e:Cr.BounceEaseOut(l*2-a,0,n,a)*.5+n*.5+e},EaseIn(l,e,n,a){return n*(l/=a)*l+e},EaseOut(l,e,n,a){return-n*(l/=a)*(l-2)+e},EaseInOut(l,e,n,a){return(l/=a/2)<1?n/2*l*l+e:-n/2*(--l*(l-2)-1)+e},StrongEaseIn(l,e,n,a){return n*(l/=a)*l*l*l*l+e},StrongEaseOut(l,e,n,a){return n*((l=l/a-1)*l*l*l*l+1)+e},StrongEaseInOut(l,e,n,a){return(l/=a/2)<1?n/2*l*l*l*l*l+e:n/2*((l-=2)*l*l*l*l+2)+e},Linear(l,e,n,a){return n*l/a+e}},Ti=P._assign(F,{Util:P,Transform:L,Node:z,Container:Ke,Stage:Pt,stages:pe,Layer:Qt,FastLayer:tn,Group:wr,DD:de,Shape:I,shapes:jt,Animation:Ye,Tween:fe,Easings:Cr,Context:je,Canvas:En});var lo=null;class Me extends I{_sceneFunc(e){var n=F.getAngle(this.angle()),a=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,n,a),e.arc(0,0,this.innerRadius(),n,0,!a),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){const e=this.innerRadius(),n=this.outerRadius(),a=this.clockwise(),s=F.getAngle(a?360-this.angle():this.angle()),o=Math.cos(Math.min(s,Math.PI)),h=1,f=Math.sin(Math.min(Math.max(Math.PI,s),3*Math.PI/2)),c=Math.sin(Math.min(s,Math.PI/2)),g=o*(o>0?e:n),v=h*(h>0?n:e),y=f*(f>0?e:n),m=c*(c>0?n:e);return{x:Math.round(g),y:Math.round(a?-1*m:y),width:Math.round(v-g),height:Math.round(m-y)}}}Me.prototype._centroid=!0,Me.prototype.className="Arc",Me.prototype._attrsAffectingSize=["innerRadius","outerRadius"],ie(Me),w.addGetterSetter(Me,"innerRadius",0,O()),w.addGetterSetter(Me,"outerRadius",0,O()),w.addGetterSetter(Me,"angle",0,O()),w.addGetterSetter(Me,"clockwise",!1,at());function Ri(l,e,n,a,s,o,h){var f=Math.sqrt(Math.pow(n-l,2)+Math.pow(a-e,2)),c=Math.sqrt(Math.pow(s-n,2)+Math.pow(o-a,2)),g=h*f/(f+c),v=h*c/(f+c),y=n-g*(s-l),m=a-g*(o-e),x=n+v*(s-l),S=a+v*(o-e);return[y,m,x,S]}function nn(l,e){var n=l.length,a=[],s,o;for(s=2;s<n-2;s+=2)o=Ri(l[s-2],l[s-1],l[s],l[s+1],l[s+2],l[s+3],e),!isNaN(o[0])&&(a.push(o[0]),a.push(o[1]),a.push(l[s]),a.push(l[s+1]),a.push(o[2]),a.push(o[3]));return a}class Gt extends I{constructor(e){super(e);this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){var n=this.points(),a=n.length,s=this.tension(),o=this.closed(),h=this.bezier(),f,c,g;if(!!a){if(e.beginPath(),e.moveTo(n[0],n[1]),s!==0&&a>4){for(f=this.getTensionPoints(),c=f.length,g=o?0:4,o||e.quadraticCurveTo(f[0],f[1],f[2],f[3]);g<c-2;)e.bezierCurveTo(f[g++],f[g++],f[g++],f[g++],f[g++],f[g++]);o||e.quadraticCurveTo(f[c-2],f[c-1],n[a-2],n[a-1])}else if(h)for(g=2;g<a;)e.bezierCurveTo(n[g++],n[g++],n[g++],n[g++],n[g++],n[g++]);else for(g=2;g<a;g+=2)e.lineTo(n[g],n[g+1]);o?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():nn(this.points(),this.tension())}_getTensionPointsClosed(){var e=this.points(),n=e.length,a=this.tension(),s=Ri(e[n-2],e[n-1],e[0],e[1],e[2],e[3],a),o=Ri(e[n-4],e[n-3],e[n-2],e[n-1],e[0],e[1],a),h=nn(e,a),f=[s[2],s[3]].concat(h).concat([o[0],o[1],e[n-2],e[n-1],o[2],o[3],s[0],s[1],e[0],e[1]]);return f}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:e=this.points();for(var n=e[0],a=e[0],s=e[1],o=e[1],h,f,c=0;c<e.length/2;c++)h=e[c*2],f=e[c*2+1],n=Math.min(n,h),a=Math.max(a,h),s=Math.min(s,f),o=Math.max(o,f);return{x:n,y:s,width:a-n,height:o-s}}}Gt.prototype.className="Line",Gt.prototype._attrsAffectingSize=["points","bezier","tension"],ie(Gt),w.addGetterSetter(Gt,"closed",!1),w.addGetterSetter(Gt,"bezier",!1),w.addGetterSetter(Gt,"tension",0,O()),w.addGetterSetter(Gt,"points",[],sa());class le extends I{constructor(e){super(e);this.dataArray=[],this.pathLength=0,this.dataArray=le.parsePathData(this.data()),this.pathLength=0;for(var n=0;n<this.dataArray.length;++n)this.pathLength+=this.dataArray[n].pathLength;this.on("dataChange.konva",function(){this.dataArray=le.parsePathData(this.data()),this.pathLength=0;for(var a=0;a<this.dataArray.length;++a)this.pathLength+=this.dataArray[a].pathLength})}_sceneFunc(e){var n=this.dataArray;e.beginPath();for(var a=!1,s=0;s<n.length;s++){var o=n[s].command,h=n[s].points;switch(o){case"L":e.lineTo(h[0],h[1]);break;case"M":e.moveTo(h[0],h[1]);break;case"C":e.bezierCurveTo(h[0],h[1],h[2],h[3],h[4],h[5]);break;case"Q":e.quadraticCurveTo(h[0],h[1],h[2],h[3]);break;case"A":var f=h[0],c=h[1],g=h[2],v=h[3],y=h[4],m=h[5],x=h[6],S=h[7],R=g>v?g:v,k=g>v?1:g/v,D=g>v?v/g:1;e.translate(f,c),e.rotate(x),e.scale(k,D),e.arc(0,0,R,y,y+m,1-S),e.scale(1/k,1/D),e.rotate(-x),e.translate(-f,-c);break;case"z":a=!0,e.closePath();break}}!a&&!this.hasFill()?e.strokeShape(this):e.fillStrokeShape(this)}getSelfRect(){var e=[];this.dataArray.forEach(function(g){if(g.command==="A"){var v=g.points[4],y=g.points[5],m=g.points[4]+y,x=Math.PI/180;if(Math.abs(v-m)<x&&(x=Math.abs(v-m)),y<0)for(let S=v-x;S>m;S-=x){const R=le.getPointOnEllipticalArc(g.points[0],g.points[1],g.points[2],g.points[3],S,0);e.push(R.x,R.y)}else for(let S=v+x;S<m;S+=x){const R=le.getPointOnEllipticalArc(g.points[0],g.points[1],g.points[2],g.points[3],S,0);e.push(R.x,R.y)}}else if(g.command==="C")for(let S=0;S<=1;S+=.01){const R=le.getPointOnCubicBezier(S,g.start.x,g.start.y,g.points[0],g.points[1],g.points[2],g.points[3],g.points[4],g.points[5]);e.push(R.x,R.y)}else e=e.concat(g.points)});for(var n=e[0],a=e[0],s=e[1],o=e[1],h,f,c=0;c<e.length/2;c++)h=e[c*2],f=e[c*2+1],isNaN(h)||(n=Math.min(n,h),a=Math.max(a,h)),isNaN(f)||(s=Math.min(s,f),o=Math.max(o,f));return{x:Math.round(n),y:Math.round(s),width:Math.round(a-n),height:Math.round(o-s)}}getLength(){return this.pathLength}getPointAtLength(e){var n,a=0,s=this.dataArray.length;if(!s)return null;for(;a<s&&e>this.dataArray[a].pathLength;)e-=this.dataArray[a].pathLength,++a;if(a===s)return n=this.dataArray[a-1].points.slice(-2),{x:n[0],y:n[1]};if(e<.01)return n=this.dataArray[a].points.slice(0,2),{x:n[0],y:n[1]};var o=this.dataArray[a],h=o.points;switch(o.command){case"L":return le.getPointOnLine(e,o.start.x,o.start.y,h[0],h[1]);case"C":return le.getPointOnCubicBezier(e/o.pathLength,o.start.x,o.start.y,h[0],h[1],h[2],h[3],h[4],h[5]);case"Q":return le.getPointOnQuadraticBezier(e/o.pathLength,o.start.x,o.start.y,h[0],h[1],h[2],h[3]);case"A":var f=h[0],c=h[1],g=h[2],v=h[3],y=h[4],m=h[5],x=h[6];return y+=m*e/o.pathLength,le.getPointOnEllipticalArc(f,c,g,v,y,x)}return null}static getLineLength(e,n,a,s){return Math.sqrt((a-e)*(a-e)+(s-n)*(s-n))}static getPointOnLine(e,n,a,s,o,h,f){h===void 0&&(h=n),f===void 0&&(f=a);var c=(o-a)/(s-n+1e-8),g=Math.sqrt(e*e/(1+c*c));s<n&&(g*=-1);var v=c*g,y;if(s===n)y={x:h,y:f+v};else if((f-a)/(h-n+1e-8)===c)y={x:h+g,y:f+v};else{var m,x,S=this.getLineLength(n,a,s,o),R=(h-n)*(s-n)+(f-a)*(o-a);R=R/(S*S),m=n+R*(s-n),x=a+R*(o-a);var k=this.getLineLength(h,f,m,x),D=Math.sqrt(e*e-k*k);g=Math.sqrt(D*D/(1+c*c)),s<n&&(g*=-1),v=c*g,y={x:m+g,y:x+v}}return y}static getPointOnCubicBezier(e,n,a,s,o,h,f,c,g){function v(k){return k*k*k}function y(k){return 3*k*k*(1-k)}function m(k){return 3*k*(1-k)*(1-k)}function x(k){return(1-k)*(1-k)*(1-k)}var S=c*v(e)+h*y(e)+s*m(e)+n*x(e),R=g*v(e)+f*y(e)+o*m(e)+a*x(e);return{x:S,y:R}}static getPointOnQuadraticBezier(e,n,a,s,o,h,f){function c(x){return x*x}function g(x){return 2*x*(1-x)}function v(x){return(1-x)*(1-x)}var y=h*c(e)+s*g(e)+n*v(e),m=f*c(e)+o*g(e)+a*v(e);return{x:y,y:m}}static getPointOnEllipticalArc(e,n,a,s,o,h){var f=Math.cos(h),c=Math.sin(h),g={x:a*Math.cos(o),y:s*Math.sin(o)};return{x:e+(g.x*f-g.y*c),y:n+(g.x*c+g.y*f)}}static parsePathData(e){if(!e)return[];var n=e,a=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];n=n.replace(new RegExp(" ","g"),",");for(var s=0;s<a.length;s++)n=n.replace(new RegExp(a[s],"g"),"|"+a[s]);var o=n.split("|"),h=[],f=[],c=0,g=0,v=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,y;for(s=1;s<o.length;s++){var m=o[s],x=m.charAt(0);for(m=m.slice(1),f.length=0;y=v.exec(m);)f.push(y[0]);for(var S=[],R=0,k=f.length;R<k;R++){if(f[R]==="00"){S.push(0,0);continue}var D=parseFloat(f[R]);isNaN(D)?S.push(0):S.push(D)}for(;S.length>0&&!isNaN(S[0]);){var G=null,N=[],b=c,V=g,H,q,X,J,Z,K,oe,Q,xe,tt;switch(x){case"l":c+=S.shift(),g+=S.shift(),G="L",N.push(c,g);break;case"L":c=S.shift(),g=S.shift(),N.push(c,g);break;case"m":var se=S.shift(),Ae=S.shift();if(c+=se,g+=Ae,G="M",h.length>2&&h[h.length-1].command==="z"){for(var Ve=h.length-2;Ve>=0;Ve--)if(h[Ve].command==="M"){c=h[Ve].points[0]+se,g=h[Ve].points[1]+Ae;break}}N.push(c,g),x="l";break;case"M":c=S.shift(),g=S.shift(),G="M",N.push(c,g),x="L";break;case"h":c+=S.shift(),G="L",N.push(c,g);break;case"H":c=S.shift(),G="L",N.push(c,g);break;case"v":g+=S.shift(),G="L",N.push(c,g);break;case"V":g=S.shift(),G="L",N.push(c,g);break;case"C":N.push(S.shift(),S.shift(),S.shift(),S.shift()),c=S.shift(),g=S.shift(),N.push(c,g);break;case"c":N.push(c+S.shift(),g+S.shift(),c+S.shift(),g+S.shift()),c+=S.shift(),g+=S.shift(),G="C",N.push(c,g);break;case"S":q=c,X=g,H=h[h.length-1],H.command==="C"&&(q=c+(c-H.points[2]),X=g+(g-H.points[3])),N.push(q,X,S.shift(),S.shift()),c=S.shift(),g=S.shift(),G="C",N.push(c,g);break;case"s":q=c,X=g,H=h[h.length-1],H.command==="C"&&(q=c+(c-H.points[2]),X=g+(g-H.points[3])),N.push(q,X,c+S.shift(),g+S.shift()),c+=S.shift(),g+=S.shift(),G="C",N.push(c,g);break;case"Q":N.push(S.shift(),S.shift()),c=S.shift(),g=S.shift(),N.push(c,g);break;case"q":N.push(c+S.shift(),g+S.shift()),c+=S.shift(),g+=S.shift(),G="Q",N.push(c,g);break;case"T":q=c,X=g,H=h[h.length-1],H.command==="Q"&&(q=c+(c-H.points[0]),X=g+(g-H.points[1])),c=S.shift(),g=S.shift(),G="Q",N.push(q,X,c,g);break;case"t":q=c,X=g,H=h[h.length-1],H.command==="Q"&&(q=c+(c-H.points[0]),X=g+(g-H.points[1])),c+=S.shift(),g+=S.shift(),G="Q",N.push(q,X,c,g);break;case"A":J=S.shift(),Z=S.shift(),K=S.shift(),oe=S.shift(),Q=S.shift(),xe=c,tt=g,c=S.shift(),g=S.shift(),G="A",N=this.convertEndpointToCenterParameterization(xe,tt,c,g,oe,Q,J,Z,K);break;case"a":J=S.shift(),Z=S.shift(),K=S.shift(),oe=S.shift(),Q=S.shift(),xe=c,tt=g,c+=S.shift(),g+=S.shift(),G="A",N=this.convertEndpointToCenterParameterization(xe,tt,c,g,oe,Q,J,Z,K);break}h.push({command:G||x,points:N,start:{x:b,y:V},pathLength:this.calcLength(b,V,G||x,N)})}(x==="z"||x==="Z")&&h.push({command:"z",points:[],start:void 0,pathLength:0})}return h}static calcLength(e,n,a,s){var o,h,f,c,g=le;switch(a){case"L":return g.getLineLength(e,n,s[0],s[1]);case"C":for(o=0,h=g.getPointOnCubicBezier(0,e,n,s[0],s[1],s[2],s[3],s[4],s[5]),c=.01;c<=1;c+=.01)f=g.getPointOnCubicBezier(c,e,n,s[0],s[1],s[2],s[3],s[4],s[5]),o+=g.getLineLength(h.x,h.y,f.x,f.y),h=f;return o;case"Q":for(o=0,h=g.getPointOnQuadraticBezier(0,e,n,s[0],s[1],s[2],s[3]),c=.01;c<=1;c+=.01)f=g.getPointOnQuadraticBezier(c,e,n,s[0],s[1],s[2],s[3]),o+=g.getLineLength(h.x,h.y,f.x,f.y),h=f;return o;case"A":o=0;var v=s[4],y=s[5],m=s[4]+y,x=Math.PI/180;if(Math.abs(v-m)<x&&(x=Math.abs(v-m)),h=g.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],v,0),y<0)for(c=v-x;c>m;c-=x)f=g.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],c,0),o+=g.getLineLength(h.x,h.y,f.x,f.y),h=f;else for(c=v+x;c<m;c+=x)f=g.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],c,0),o+=g.getLineLength(h.x,h.y,f.x,f.y),h=f;return f=g.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],m,0),o+=g.getLineLength(h.x,h.y,f.x,f.y),o}return 0}static convertEndpointToCenterParameterization(e,n,a,s,o,h,f,c,g){var v=g*(Math.PI/180),y=Math.cos(v)*(e-a)/2+Math.sin(v)*(n-s)/2,m=-1*Math.sin(v)*(e-a)/2+Math.cos(v)*(n-s)/2,x=y*y/(f*f)+m*m/(c*c);x>1&&(f*=Math.sqrt(x),c*=Math.sqrt(x));var S=Math.sqrt((f*f*(c*c)-f*f*(m*m)-c*c*(y*y))/(f*f*(m*m)+c*c*(y*y)));o===h&&(S*=-1),isNaN(S)&&(S=0);var R=S*f*m/c,k=S*-c*y/f,D=(e+a)/2+Math.cos(v)*R-Math.sin(v)*k,G=(n+s)/2+Math.sin(v)*R+Math.cos(v)*k,N=function(Z){return Math.sqrt(Z[0]*Z[0]+Z[1]*Z[1])},b=function(Z,K){return(Z[0]*K[0]+Z[1]*K[1])/(N(Z)*N(K))},V=function(Z,K){return(Z[0]*K[1]<Z[1]*K[0]?-1:1)*Math.acos(b(Z,K))},H=V([1,0],[(y-R)/f,(m-k)/c]),q=[(y-R)/f,(m-k)/c],X=[(-1*y-R)/f,(-1*m-k)/c],J=V(q,X);return b(q,X)<=-1&&(J=Math.PI),b(q,X)>=1&&(J=0),h===0&&J>0&&(J=J-2*Math.PI),h===1&&J<0&&(J=J+2*Math.PI),[D,G,f,c,H,J,v,h]}}le.prototype.className="Path",le.prototype._attrsAffectingSize=["data"],ie(le),w.addGetterSetter(le,"data");class Tt extends Gt{_sceneFunc(e){super._sceneFunc(e);var n=Math.PI*2,a=this.points(),s=a,o=this.tension()!==0&&a.length>4;o&&(s=this.getTensionPoints());var h=this.pointerLength(),f=a.length,c,g;if(o){const m=[s[s.length-4],s[s.length-3],s[s.length-2],s[s.length-1],a[f-2],a[f-1]],x=le.calcLength(s[s.length-4],s[s.length-3],"C",m),S=le.getPointOnQuadraticBezier(Math.min(1,1-h/x),m[0],m[1],m[2],m[3],m[4],m[5]);c=a[f-2]-S.x,g=a[f-1]-S.y}else c=a[f-2]-a[f-4],g=a[f-1]-a[f-3];var v=(Math.atan2(g,c)+n)%n,y=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(a[f-2],a[f-1]),e.rotate(v),e.moveTo(0,0),e.lineTo(-h,y/2),e.lineTo(-h,-y/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(a[0],a[1]),o?(c=(s[0]+s[2])/2-a[0],g=(s[1]+s[3])/2-a[1]):(c=a[2]-a[0],g=a[3]-a[1]),e.rotate((Math.atan2(-g,-c)+n)%n),e.moveTo(0,0),e.lineTo(-h,y/2),e.lineTo(-h,-y/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){var n=this.dashEnabled();n&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),n&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),n=this.pointerWidth()/2;return{x:e.x-n,y:e.y-n,width:e.width+n*2,height:e.height+n*2}}}Tt.prototype.className="Arrow",ie(Tt),w.addGetterSetter(Tt,"pointerLength",10,O()),w.addGetterSetter(Tt,"pointerWidth",10,O()),w.addGetterSetter(Tt,"pointerAtBeginning",!1),w.addGetterSetter(Tt,"pointerAtEnding",!0);class Dt extends I{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}}Dt.prototype._centroid=!0,Dt.prototype.className="Circle",Dt.prototype._attrsAffectingSize=["radius"],ie(Dt),w.addGetterSetter(Dt,"radius",0,O());class ot extends I{_sceneFunc(e){var n=this.radiusX(),a=this.radiusY();e.beginPath(),e.save(),n!==a&&e.scale(1,a/n),e.arc(0,0,n,0,Math.PI*2,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}ot.prototype.className="Ellipse",ot.prototype._centroid=!0,ot.prototype._attrsAffectingSize=["radiusX","radiusY"],ie(ot),w.addComponentsGetterSetter(ot,"radius",["x","y"]),w.addGetterSetter(ot,"radiusX",0,O()),w.addGetterSetter(ot,"radiusY",0,O());class Qe extends I{constructor(e){super(e);this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(e){const n=this.getWidth(),a=this.getHeight(),s=this.attrs.image;let o;if(s){const h=this.attrs.cropWidth,f=this.attrs.cropHeight;h&&f?o=[s,this.cropX(),this.cropY(),h,f,0,0,n,a]:o=[s,0,0,n,a]}(this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,n,a),e.closePath(),e.fillStrokeShape(this)),s&&e.drawImage.apply(e,o)}_hitFunc(e){var n=this.width(),a=this.height();e.beginPath(),e.rect(0,0,n,a),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,n;return(e=this.attrs.width)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.width}getHeight(){var e,n;return(e=this.attrs.height)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.height}static fromURL(e,n,a=null){var s=P.createImageElement();s.onload=function(){var o=new Qe({image:s});n(o)},s.onerror=a,s.crossOrigin="Anonymous",s.src=e}}Qe.prototype.className="Image",ie(Qe),w.addGetterSetter(Qe,"image"),w.addComponentsGetterSetter(Qe,"crop",["x","y","width","height"]),w.addGetterSetter(Qe,"cropX",0,O()),w.addGetterSetter(Qe,"cropY",0,O()),w.addGetterSetter(Qe,"cropWidth",0,O()),w.addGetterSetter(Qe,"cropHeight",0,O());var Dn=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height"],La="Change.konva",Ai="none",zn="up",qt="right",qe="down",Rt="left",Mi=Dn.length;class bn extends wr{constructor(e){super(e);this.on("add.konva",function(n){this._addListeners(n.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){var n=this,a,s=function(){n._sync()};for(a=0;a<Mi;a++)e.on(Dn[a]+La,s)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var e=this.getText(),n=this.getTag(),a,s,o,h,f,c,g;if(e&&n){switch(a=e.width(),s=e.height(),o=n.pointerDirection(),h=n.pointerWidth(),g=n.pointerHeight(),f=0,c=0,o){case zn:f=a/2,c=-1*g;break;case qt:f=a+h,c=s/2;break;case qe:f=a/2,c=s+g;break;case Rt:f=-1*h,c=s/2;break}n.setAttrs({x:-1*f,y:-1*c,width:a,height:s}),e.setAttrs({x:-1*f,y:-1*c})}}}bn.prototype.className="Label",ie(bn);class Je extends I{_sceneFunc(e){var n=this.width(),a=this.height(),s=this.pointerDirection(),o=this.pointerWidth(),h=this.pointerHeight(),f=this.cornerRadius();let c=0,g=0,v=0,y=0;typeof f=="number"?c=g=v=y=Math.min(f,n/2,a/2):(c=Math.min(f[0]||0,n/2,a/2),g=Math.min(f[1]||0,n/2,a/2),y=Math.min(f[2]||0,n/2,a/2),v=Math.min(f[3]||0,n/2,a/2)),e.beginPath(),e.moveTo(c,0),s===zn&&(e.lineTo((n-o)/2,0),e.lineTo(n/2,-1*h),e.lineTo((n+o)/2,0)),e.lineTo(n-g,0),e.arc(n-g,g,g,Math.PI*3/2,0,!1),s===qt&&(e.lineTo(n,(a-h)/2),e.lineTo(n+o,a/2),e.lineTo(n,(a+h)/2)),e.lineTo(n,a-y),e.arc(n-y,a-y,y,0,Math.PI/2,!1),s===qe&&(e.lineTo((n+o)/2,a),e.lineTo(n/2,a+h),e.lineTo((n-o)/2,a)),e.lineTo(v,a),e.arc(v,a-v,v,Math.PI/2,Math.PI,!1),s===Rt&&(e.lineTo(0,(a+h)/2),e.lineTo(-1*o,a/2),e.lineTo(0,(a-h)/2)),e.lineTo(0,c),e.arc(c,c,c,Math.PI,Math.PI*3/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){var e=0,n=0,a=this.pointerWidth(),s=this.pointerHeight(),o=this.pointerDirection(),h=this.width(),f=this.height();return o===zn?(n-=s,f+=s):o===qe?f+=s:o===Rt?(e-=a*1.5,h+=a):o===qt&&(h+=a*1.5),{x:e,y:n,width:h,height:f}}}Je.prototype.className="Tag",ie(Je),w.addGetterSetter(Je,"pointerDirection",Ai),w.addGetterSetter(Je,"pointerWidth",0,O()),w.addGetterSetter(Je,"pointerHeight",0,O()),w.addGetterSetter(Je,"cornerRadius",0,Xr(4));class ct extends I{_sceneFunc(e){var n=this.cornerRadius(),a=this.width(),s=this.height();if(e.beginPath(),!n)e.rect(0,0,a,s);else{let o=0,h=0,f=0,c=0;typeof n=="number"?o=h=f=c=Math.min(n,a/2,s/2):(o=Math.min(n[0]||0,a/2,s/2),h=Math.min(n[1]||0,a/2,s/2),c=Math.min(n[2]||0,a/2,s/2),f=Math.min(n[3]||0,a/2,s/2)),e.moveTo(o,0),e.lineTo(a-h,0),e.arc(a-h,h,h,Math.PI*3/2,0,!1),e.lineTo(a,s-c),e.arc(a-c,s-c,c,0,Math.PI/2,!1),e.lineTo(f,s),e.arc(f,s-f,f,Math.PI/2,Math.PI,!1),e.lineTo(0,o),e.arc(o,o,o,Math.PI,Math.PI*3/2,!1)}e.closePath(),e.fillStrokeShape(this)}}ct.prototype.className="Rect",ie(ct),w.addGetterSetter(ct,"cornerRadius",0,Xr(4));class Jt extends I{_sceneFunc(e){const n=this._getPoints();e.beginPath(),e.moveTo(n[0].x,n[0].y);for(var a=1;a<n.length;a++)e.lineTo(n[a].x,n[a].y);e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,n=this.attrs.radius||0,a=[];for(var s=0;s<e;s++)a.push({x:n*Math.sin(s*2*Math.PI/e),y:-1*n*Math.cos(s*2*Math.PI/e)});return a}getSelfRect(){const e=this._getPoints();var n=e[0].x,a=e[0].y,s=e[0].x,o=e[0].y;return e.forEach(h=>{n=Math.min(n,h.x),a=Math.max(a,h.x),s=Math.min(s,h.y),o=Math.max(o,h.y)}),{x:n,y:s,width:a-n,height:o-s}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}Jt.prototype.className="RegularPolygon",Jt.prototype._centroid=!0,Jt.prototype._attrsAffectingSize=["radius"],ie(Jt),w.addGetterSetter(Jt,"radius",0,O()),w.addGetterSetter(Jt,"sides",0,O());var xr=Math.PI*2;class Zt extends I{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,xr,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),xr,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}Zt.prototype.className="Ring",Zt.prototype._centroid=!0,Zt.prototype._attrsAffectingSize=["innerRadius","outerRadius"],ie(Zt),w.addGetterSetter(Zt,"innerRadius",0,O()),w.addGetterSetter(Zt,"outerRadius",0,O());class _t extends I{constructor(e){super(e);this._updated=!0,this.anim=new Ye(()=>{var n=this._updated;return this._updated=!1,n}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){!this.anim.isRunning()||(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){var n=this.animation(),a=this.frameIndex(),s=a*4,o=this.animations()[n],h=this.frameOffsets(),f=o[s+0],c=o[s+1],g=o[s+2],v=o[s+3],y=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,g,v),e.closePath(),e.fillStrokeShape(this)),y)if(h){var m=h[n],x=a*2;e.drawImage(y,f,c,g,v,m[x+0],m[x+1],g,v)}else e.drawImage(y,f,c,g,v,0,0,g,v)}_hitFunc(e){var n=this.animation(),a=this.frameIndex(),s=a*4,o=this.animations()[n],h=this.frameOffsets(),f=o[s+2],c=o[s+3];if(e.beginPath(),h){var g=h[n],v=a*2;e.rect(g[v+0],g[v+1],f,c)}else e.rect(0,0,f,c);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var e=this.frameIndex(),n=this.animation(),a=this.animations(),s=a[n],o=s.length/4;e<o-1?this.frameIndex(e+1):this.frameIndex(0)}}_t.prototype.className="Sprite",ie(_t),w.addGetterSetter(_t,"animation"),w.addGetterSetter(_t,"animations"),w.addGetterSetter(_t,"frameOffsets"),w.addGetterSetter(_t,"image"),w.addGetterSetter(_t,"frameIndex",0,O()),w.addGetterSetter(_t,"frameRate",17,O()),w.backCompat(_t,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class yt extends I{_sceneFunc(e){var n=this.innerRadius(),a=this.outerRadius(),s=this.numPoints();e.beginPath(),e.moveTo(0,0-a);for(var o=1;o<s*2;o++){var h=o%2==0?a:n,f=h*Math.sin(o*Math.PI/s),c=-1*h*Math.cos(o*Math.PI/s);e.lineTo(f,c)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}yt.prototype.className="Star",yt.prototype._centroid=!0,yt.prototype._attrsAffectingSize=["innerRadius","outerRadius"],ie(yt),w.addGetterSetter(yt,"numPoints",5,O()),w.addGetterSetter(yt,"innerRadius",0,O()),w.addGetterSetter(yt,"outerRadius",0,O());function an(l){return Array.from(l)}var sn="auto",Ia="center",Er="justify",Li="Change.konva",Fn="2d",Pr="-",on="left",Na="text",Bn="Text",Oa="top",ln="bottom",lt="middle",kr="normal",Tr="px ",ht=" ",Ii="right",Rr="word",Ga="char",Ni="none",Pe="\u2026",hn=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],zt=hn.length;function hr(l){return l.split(",").map(e=>{e=e.trim();const n=e.indexOf(" ")>=0,a=e.indexOf('"')>=0||e.indexOf("'")>=0;return n&&!a&&(e=`"${e}"`),e}).join(", ")}var ut;function Hn(){return ut||(ut=P.createCanvasElement().getContext(Fn),ut)}function Da(l){l.fillText(this._partialText,this._partialTextX,this._partialTextY)}function Oi(l){l.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function za(l){return l=l||{},!l.fillLinearGradientColorStops&&!l.fillRadialGradientColorStops&&!l.fillPatternImage&&(l.fill=l.fill||"black"),l}class Se extends I{constructor(e){super(za(e));this._partialTextX=0,this._partialTextY=0;for(var n=0;n<zt;n++)this.on(hn[n]+Li,this._setTextData);this._setTextData()}_sceneFunc(e){var n=this.textArr,a=n.length;if(!!this.text()){var s=this.padding(),o=this.fontSize(),h=this.lineHeight()*o,f=this.verticalAlign(),c=0,g=this.align(),v=this.getWidth(),y=this.letterSpacing(),m=this.fill(),x=this.textDecoration(),S=x.indexOf("underline")!==-1,R=x.indexOf("line-through")!==-1,k,D=0,D=h/2,G=0,N=0;for(e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",lt),e.setAttr("textAlign",on),f===lt?c=(this.getHeight()-a*h-s*2)/2:f===ln&&(c=this.getHeight()-a*h-s*2),e.translate(s,c+s),k=0;k<a;k++){var G=0,N=0,b=n[k],V=b.text,H=b.width,q=k!==a-1,X,J,Z;if(e.save(),g===Ii?G+=v-H-s*2:g===Ia&&(G+=(v-H-s*2)/2),S&&(e.save(),e.beginPath(),e.moveTo(G,D+N+Math.round(o/2)),X=V.split(" ").length-1,J=X===0,Z=g===Er&&q&&!J?v-s*2:H,e.lineTo(G+Math.round(Z),D+N+Math.round(o/2)),e.lineWidth=o/15,e.strokeStyle=m,e.stroke(),e.restore()),R&&(e.save(),e.beginPath(),e.moveTo(G,D+N),X=V.split(" ").length-1,J=X===0,Z=g===Er&&q&&!J?v-s*2:H,e.lineTo(G+Math.round(Z),D+N),e.lineWidth=o/15,e.strokeStyle=m,e.stroke(),e.restore()),y!==0||g===Er){X=V.split(" ").length-1;for(var K=an(V),oe=0;oe<K.length;oe++){var Q=K[oe];Q===" "&&k!==a-1&&g===Er&&(G+=(v-s*2-H)/X),this._partialTextX=G,this._partialTextY=D+N,this._partialText=Q,e.fillStrokeShape(this),G+=this.measureSize(Q).width+y}}else this._partialTextX=G,this._partialTextY=D+N,this._partialText=V,e.fillStrokeShape(this);e.restore(),a>1&&(D+=h)}}}_hitFunc(e){var n=this.getWidth(),a=this.getHeight();e.beginPath(),e.rect(0,0,n,a),e.closePath(),e.fillStrokeShape(this)}setText(e){var n=P._isString(e)?e:e==null?"":e+"";return this._setAttr(Na,n),this}getWidth(){var e=this.attrs.width===sn||this.attrs.width===void 0;return e?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){var e=this.attrs.height===sn||this.attrs.height===void 0;return e?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return P.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var n=Hn(),a=this.fontSize(),s;return n.save(),n.font=this._getContextFont(),s=n.measureText(e),n.restore(),{width:s.width,height:a}}_getContextFont(){return this.fontStyle()+ht+this.fontVariant()+ht+(this.fontSize()+Tr)+hr(this.fontFamily())}_addTextLine(e){this.align()===Er&&(e=e.trim());var n=this._getTextWidth(e);return this.textArr.push({text:e,width:n})}_getTextWidth(e){var n=this.letterSpacing(),a=e.length;return Hn().measureText(e).width+(a?n*(a-1):0)}_setTextData(){var e=this.text().split(`
`),n=+this.fontSize(),a=0,s=this.lineHeight()*n,o=this.attrs.width,h=this.attrs.height,f=o!==sn&&o!==void 0,c=h!==sn&&h!==void 0,g=this.padding(),v=o-g*2,y=h-g*2,m=0,x=this.wrap(),S=x!==Ni,R=x!==Ga&&S,k=this.ellipsis();this.textArr=[],Hn().font=this._getContextFont();for(var D=k?this._getTextWidth(Pe):0,G=0,N=e.length;G<N;++G){var b=e[G],V=this._getTextWidth(b);if(f&&V>v)for(;b.length>0;){for(var H=0,q=b.length,X="",J=0;H<q;){var Z=H+q>>>1,K=b.slice(0,Z+1),oe=this._getTextWidth(K)+D;oe<=v?(H=Z+1,X=K,J=oe):q=Z}if(X){if(R){var Q,xe=b[X.length],tt=xe===ht||xe===Pr;tt&&J<=v?Q=X.length:Q=Math.max(X.lastIndexOf(ht),X.lastIndexOf(Pr))+1,Q>0&&(H=Q,X=X.slice(0,H),J=this._getTextWidth(X))}if(X=X.trimRight(),this._addTextLine(X),a=Math.max(a,J),m+=s,!S||c&&m+s>y){var se=this.textArr[this.textArr.length-1];if(se&&k){var Ae=this._getTextWidth(se.text+Pe)<v;Ae||(se.text=se.text.slice(0,se.text.length-3)),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(se.text+Pe)}break}if(b=b.slice(H),b=b.trimLeft(),b.length>0&&(V=this._getTextWidth(b),V<=v)){this._addTextLine(b),m+=s,a=Math.max(a,V);break}}else break}else this._addTextLine(b),m+=s,a=Math.max(a,V);if(c&&m+s>y)break}this.textHeight=n,this.textWidth=a}getStrokeScaleEnabled(){return!0}}Se.prototype._fillFunc=Da,Se.prototype._strokeFunc=Oi,Se.prototype.className=Bn,Se.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],ie(Se),w.overWriteSetter(Se,"width",Cn()),w.overWriteSetter(Se,"height",Cn()),w.addGetterSetter(Se,"fontFamily","Arial"),w.addGetterSetter(Se,"fontSize",12,O()),w.addGetterSetter(Se,"fontStyle",kr),w.addGetterSetter(Se,"fontVariant",kr),w.addGetterSetter(Se,"padding",0,O()),w.addGetterSetter(Se,"align",on),w.addGetterSetter(Se,"verticalAlign",Oa),w.addGetterSetter(Se,"lineHeight",1,O()),w.addGetterSetter(Se,"wrap",Rr),w.addGetterSetter(Se,"ellipsis",!1,at()),w.addGetterSetter(Se,"letterSpacing",0,O()),w.addGetterSetter(Se,"text","",nr()),w.addGetterSetter(Se,"textDecoration","");var Gi="",ur="normal";function Un(l){l.fillText(this.partialText,0,0)}function Ar(l){l.strokeText(this.partialText,0,0)}class ge extends I{constructor(e){super(e);this.dummyCanvas=P.createCanvasElement(),this.dataArray=[],this.dataArray=le.parsePathData(this.attrs.data),this.on("dataChange.konva",function(){this.dataArray=le.parsePathData(this.attrs.data),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva",this._setTextData),this._setTextData()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();var n=this.textDecoration(),a=this.fill(),s=this.fontSize(),o=this.glyphInfo;n==="underline"&&e.beginPath();for(var h=0;h<o.length;h++){e.save();var f=o[h].p0;e.translate(f.x,f.y),e.rotate(o[h].rotation),this.partialText=o[h].text,e.fillStrokeShape(this),n==="underline"&&(h===0&&e.moveTo(0,s/2+1),e.lineTo(s,s/2+1)),e.restore()}n==="underline"&&(e.strokeStyle=a,e.lineWidth=s/20,e.stroke()),e.restore()}_hitFunc(e){e.beginPath();var n=this.glyphInfo;if(n.length>=1){var a=n[0].p0;e.moveTo(a.x,a.y)}for(var s=0;s<n.length;s++){var o=n[s].p1;e.lineTo(o.x,o.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return P.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return Se.prototype.setText.call(this,e)}_getContextFont(){return Se.prototype._getContextFont.call(this)}_getTextSize(e){var n=this.dummyCanvas,a=n.getContext("2d");a.save(),a.font=this._getContextFont();var s=a.measureText(e);return a.restore(),{width:s.width,height:parseInt(this.attrs.fontSize,10)}}_setTextData(){var e=this,n=this._getTextSize(this.attrs.text),a=this.letterSpacing(),s=this.align(),o=this.kerningFunc();this.textWidth=n.width,this.textHeight=n.height;var h=Math.max(this.textWidth+((this.attrs.text||"").length-1)*a,0);this.glyphInfo=[];for(var f=0,c=0;c<e.dataArray.length;c++)e.dataArray[c].pathLength>0&&(f+=e.dataArray[c].pathLength);var g=0;s==="center"&&(g=Math.max(0,f/2-h/2)),s==="right"&&(g=Math.max(0,f-h));for(var v=an(this.text()),y=this.text().split(" ").length-1,m,x,S,R=-1,k=0,D=function(){k=0;for(var oe=e.dataArray,Q=R+1;Q<oe.length;Q++){if(oe[Q].pathLength>0)return R=Q,oe[Q];oe[Q].command==="M"&&(m={x:oe[Q].points[0],y:oe[Q].points[1]})}return{}},G=function(oe){var Q=e._getTextSize(oe).width+a;oe===" "&&s==="justify"&&(Q+=(f-h)/y);var xe=0,tt=0;for(x=void 0;Math.abs(Q-xe)/Q>.01&&tt<20;){tt++;for(var se=xe;S===void 0;)S=D(),S&&se+S.pathLength<Q&&(se+=S.pathLength,S=void 0);if(S==={}||m===void 0)return;var Ae=!1;switch(S.command){case"L":le.getLineLength(m.x,m.y,S.points[0],S.points[1])>Q?x=le.getPointOnLine(Q,m.x,m.y,S.points[0],S.points[1],m.x,m.y):S=void 0;break;case"A":var Ve=S.points[4],Ct=S.points[5],he=S.points[4]+Ct;k===0?k=Ve+1e-8:Q>xe?k+=Math.PI/180*Ct/Math.abs(Ct):k-=Math.PI/360*Ct/Math.abs(Ct),(Ct<0&&k<he||Ct>=0&&k>he)&&(k=he,Ae=!0),x=le.getPointOnEllipticalArc(S.points[0],S.points[1],S.points[2],S.points[3],k,S.points[6]);break;case"C":k===0?Q>S.pathLength?k=1e-8:k=Q/S.pathLength:Q>xe?k+=(Q-xe)/S.pathLength/2:k=Math.max(k-(xe-Q)/S.pathLength/2,0),k>1&&(k=1,Ae=!0),x=le.getPointOnCubicBezier(k,S.start.x,S.start.y,S.points[0],S.points[1],S.points[2],S.points[3],S.points[4],S.points[5]);break;case"Q":k===0?k=Q/S.pathLength:Q>xe?k+=(Q-xe)/S.pathLength:k-=(xe-Q)/S.pathLength,k>1&&(k=1,Ae=!0),x=le.getPointOnQuadraticBezier(k,S.start.x,S.start.y,S.points[0],S.points[1],S.points[2],S.points[3]);break}x!==void 0&&(xe=le.getLineLength(m.x,m.y,x.x,x.y)),Ae&&(Ae=!1,S=void 0)}},N="C",b=e._getTextSize(N).width+a,V=g/b-1,H=0;H<V&&(G(N),!(m===void 0||x===void 0));H++)m=x;for(var q=0;q<v.length&&(G(v[q]),!(m===void 0||x===void 0));q++){var X=le.getLineLength(m.x,m.y,x.x,x.y),J=0;if(o)try{J=o(v[q-1],v[q])*this.fontSize()}catch(oe){J=0}m.x+=J,x.x+=J,this.textWidth+=J;var Z=le.getPointOnLine(J+X/2,m.x,m.y,x.x,x.y),K=Math.atan2(x.y-m.y,x.x-m.x);this.glyphInfo.push({transposeX:Z.x,transposeY:Z.y,text:v[q],rotation:K,p0:m,p1:x}),m=x}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var e=[];this.glyphInfo.forEach(function(v){e.push(v.p0.x),e.push(v.p0.y),e.push(v.p1.x),e.push(v.p1.y)});for(var n=e[0]||0,a=e[0]||0,s=e[1]||0,o=e[1]||0,h,f,c=0;c<e.length/2;c++)h=e[c*2],f=e[c*2+1],n=Math.min(n,h),a=Math.max(a,h),s=Math.min(s,f),o=Math.max(o,f);var g=this.fontSize();return{x:n-g/2,y:s-g/2,width:a-n+g,height:o-s+g}}}ge.prototype._fillFunc=Un,ge.prototype._strokeFunc=Ar,ge.prototype._fillFuncHit=Un,ge.prototype._strokeFuncHit=Ar,ge.prototype.className="TextPath",ge.prototype._attrsAffectingSize=["text","fontSize","data"],ie(ge),w.addGetterSetter(ge,"data"),w.addGetterSetter(ge,"fontFamily","Arial"),w.addGetterSetter(ge,"fontSize",12,O()),w.addGetterSetter(ge,"fontStyle",ur),w.addGetterSetter(ge,"align","left"),w.addGetterSetter(ge,"letterSpacing",0,O()),w.addGetterSetter(ge,"textBaseline","middle"),w.addGetterSetter(ge,"fontVariant",ur),w.addGetterSetter(ge,"text",Gi),w.addGetterSetter(ge,"textDecoration",null),w.addGetterSetter(ge,"kerningFunc",null);var Mr="tr-konva",Re=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange"].map(l=>l+`.${Mr}`).join(" "),be="nodesRect",Fe=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],Wn={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const un="ontouchstart"in F._global;function Ze(l,e){if(l==="rotater")return"crosshair";e+=P.degToRad(Wn[l]||0);var n=(P.radToDeg(e)%360+360)%360;return P._inRange(n,315+22.5,360)||P._inRange(n,0,22.5)?"ns-resize":P._inRange(n,45-22.5,45+22.5)?"nesw-resize":P._inRange(n,90-22.5,90+22.5)?"ew-resize":P._inRange(n,135-22.5,135+22.5)?"nwse-resize":P._inRange(n,180-22.5,180+22.5)?"ns-resize":P._inRange(n,225-22.5,225+22.5)?"nesw-resize":P._inRange(n,270-22.5,270+22.5)?"ew-resize":P._inRange(n,315-22.5,315+22.5)?"nwse-resize":(P.error("Transformer has unknown angle for cursor detection: "+n),"pointer")}var Lr=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],Yn=1e8;function dr(l){return{x:l.x+l.width/2*Math.cos(l.rotation)+l.height/2*Math.sin(-l.rotation),y:l.y+l.height/2*Math.cos(l.rotation)+l.width/2*Math.sin(l.rotation)}}function $t(l,e,n){const a=n.x+(l.x-n.x)*Math.cos(e)-(l.y-n.y)*Math.sin(e),s=n.y+(l.x-n.x)*Math.sin(e)+(l.y-n.y)*Math.cos(e);return Object.assign(Object.assign({},l),{rotation:l.rotation+e,x:a,y:s})}function At(l,e){const n=dr(l);return $t(l,e,n)}function dn(l,e,n){let a=e;for(let s=0;s<l.length;s++){const o=F.getAngle(l[s]),h=Math.abs(o-e)%(Math.PI*2);Math.min(h,Math.PI*2-h)<n&&(a=o)}return a}class ue extends wr{constructor(e){super(e);this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(Re,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(e){return P.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return Mr+this._id}setNodes(e=[]){this._nodes&&this._nodes.length&&this.detach(),this._nodes=e,e.length===1&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(a=>{const s=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},o=a._attrsAffectingSize.map(h=>h+"Change."+this._getEventNamespace()).join(" ");a.on(o,s),a.on(Fe.map(h=>h+`.${this._getEventNamespace()}`).join(" "),s),a.on(`absoluteTransformChange.${this._getEventNamespace()}`,s),this._proxyDrag(a)}),this._resetTransformCache();var n=!!this.findOne(".top-left");return n&&this.update(),this}_proxyDrag(e){let n;e.on(`dragstart.${this._getEventNamespace()}`,a=>{n=e.getAbsolutePosition(),!this.isDragging()&&e!==this.findOne(".back")&&this.startDrag(a,!1)}),e.on(`dragmove.${this._getEventNamespace()}`,a=>{if(!n)return;const s=e.getAbsolutePosition(),o=s.x-n.x,h=s.y-n.y;this.nodes().forEach(f=>{if(f===e||f.isDragging())return;const c=f.getAbsolutePosition();f.setAbsolutePosition({x:c.x+o,y:c.y+h}),f.startDrag(a)}),n=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(e=>{e.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(be),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(be,this.__getNodeRect)}__getNodeShape(e,n=this.rotation(),a){var s=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),o=e.getAbsoluteScale(a),h=e.getAbsolutePosition(a),f=s.x*o.x-e.offsetX()*o.x,c=s.y*o.y-e.offsetY()*o.y;const g=(F.getAngle(e.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),v={x:h.x+f*Math.cos(g)+c*Math.sin(-g),y:h.y+c*Math.cos(g)+f*Math.sin(g),width:s.width*o.x,height:s.height*o.y,rotation:g};return $t(v,-F.getAngle(n),{x:0,y:0})}__getNodeRect(){var e=this.getNode();if(!e)return{x:-Yn,y:-Yn,width:0,height:0,rotation:0};const n=[];this.nodes().map(g=>{const v=g.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var y=[{x:v.x,y:v.y},{x:v.x+v.width,y:v.y},{x:v.x+v.width,y:v.y+v.height},{x:v.x,y:v.y+v.height}],m=g.getAbsoluteTransform();y.forEach(function(x){var S=m.point(x);n.push(S)})});const a=new L;a.rotate(-F.getAngle(this.rotation()));var s,o,h,f;n.forEach(function(g){var v=a.point(g);s===void 0&&(s=h=v.x,o=f=v.y),s=Math.min(s,v.x),o=Math.min(o,v.y),h=Math.max(h,v.x),f=Math.max(f,v.y)}),a.invert();const c=a.point({x:s,y:o});return{x:c.x,y:c.y,width:h-s,height:f-o,rotation:F.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),Lr.forEach(function(e){this._createAnchor(e)}.bind(this)),this._createAnchor("rotater")}_createAnchor(e){var n=new ct({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:un?10:"auto"}),a=this;n.on("mousedown touchstart",function(s){a._handleMouseDown(s)}),n.on("dragstart",s=>{n.stopDrag(),s.cancelBubble=!0}),n.on("dragend",s=>{s.cancelBubble=!0}),n.on("mouseenter",()=>{var s=F.getAngle(this.rotation()),o=Ze(e,s);n.getStage().content&&(n.getStage().content.style.cursor=o),this._cursorChange=!0}),n.on("mouseout",()=>{n.getStage().content&&(n.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(n)}_createBack(){var e=new I({name:"back",width:0,height:0,draggable:!0,sceneFunc(n){var a=this.getParent(),s=a.padding();n.beginPath(),n.rect(-s,-s,this.width()+s*2,this.height()+s*2),n.moveTo(this.width()/2,-s),a.rotateEnabled()&&n.lineTo(this.width()/2,-a.rotateAnchorOffset()*P._sign(this.height())-s),n.fillStrokeShape(this)},hitFunc:(n,a)=>{if(!!this.shouldOverdrawWholeArea()){var s=this.padding();n.beginPath(),n.rect(-s,-s,a.width()+s*2,a.height()+s*2),n.fillStrokeShape(a)}}});this.add(e),this._proxyDrag(e),e.on("dragstart",n=>{n.cancelBubble=!0}),e.on("dragmove",n=>{n.cancelBubble=!0}),e.on("dragend",n=>{n.cancelBubble=!0}),this.on("dragmove",n=>{this.update()})}_handleMouseDown(e){this._movingAnchorName=e.target.name().split(" ")[0];var n=this._getNodeRect(),a=n.width,s=n.height,o=Math.sqrt(Math.pow(a,2)+Math.pow(s,2));this.sin=Math.abs(s/o),this.cos=Math.abs(a/o),typeof window!="undefined"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var h=e.target.getAbsolutePosition(),f=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:f.x-h.x,y:f.y-h.y},this._fire("transformstart",{evt:e,target:this.getNode()}),this._nodes.forEach(c=>{c._fire("transformstart",{evt:e,target:c})})}_handleMouseMove(e){var n,a,s,o=this.findOne("."+this._movingAnchorName),h=o.getStage();h.setPointersPositions(e);const f=h.getPointerPosition();let c={x:f.x-this._anchorDragOffset.x,y:f.y-this._anchorDragOffset.y};const g=o.getAbsolutePosition();this.anchorDragBoundFunc()&&(c=this.anchorDragBoundFunc()(g,c,e)),o.setAbsolutePosition(c);const v=o.getAbsolutePosition();if(!(g.x===v.x&&g.y===v.y)){if(this._movingAnchorName==="rotater"){var y=this._getNodeRect();n=o.x()-y.width/2,a=-o.y()+y.height/2;let oe=Math.atan2(-a,n)+Math.PI/2;y.height<0&&(oe-=Math.PI);var m=F.getAngle(this.rotation());const Q=m+oe,xe=F.getAngle(this.rotationSnapTolerance()),se=dn(this.rotationSnaps(),Q,xe)-y.rotation,Ae=At(y,se);this._fitNodesInto(Ae,e);return}var x=this.keepRatio()||e.shiftKey,S=this.centeredScaling()||e.altKey;if(this._movingAnchorName==="top-left"){if(x){var R=S?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};s=Math.sqrt(Math.pow(R.x-o.x(),2)+Math.pow(R.y-o.y(),2));var k=this.findOne(".top-left").x()>R.x?-1:1,D=this.findOne(".top-left").y()>R.y?-1:1;n=s*this.cos*k,a=s*this.sin*D,this.findOne(".top-left").x(R.x-n),this.findOne(".top-left").y(R.y-a)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(o.y());else if(this._movingAnchorName==="top-right"){if(x){var R=S?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};s=Math.sqrt(Math.pow(o.x()-R.x,2)+Math.pow(R.y-o.y(),2));var k=this.findOne(".top-right").x()<R.x?-1:1,D=this.findOne(".top-right").y()>R.y?-1:1;n=s*this.cos*k,a=s*this.sin*D,this.findOne(".top-right").x(R.x+n),this.findOne(".top-right").y(R.y-a)}var G=o.position();this.findOne(".top-left").y(G.y),this.findOne(".bottom-right").x(G.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(o.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(o.x());else if(this._movingAnchorName==="bottom-left"){if(x){var R=S?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};s=Math.sqrt(Math.pow(R.x-o.x(),2)+Math.pow(o.y()-R.y,2));var k=R.x<o.x()?-1:1,D=o.y()<R.y?-1:1;n=s*this.cos*k,a=s*this.sin*D,o.x(R.x-n),o.y(R.y+a)}G=o.position(),this.findOne(".top-left").x(G.x),this.findOne(".bottom-right").y(G.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(o.y());else if(this._movingAnchorName==="bottom-right"){if(x){var R=S?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};s=Math.sqrt(Math.pow(o.x()-R.x,2)+Math.pow(o.y()-R.y,2));var k=this.findOne(".bottom-right").x()<R.x?-1:1,D=this.findOne(".bottom-right").y()<R.y?-1:1;n=s*this.cos*k,a=s*this.sin*D,this.findOne(".bottom-right").x(R.x+n),this.findOne(".bottom-right").y(R.y+a)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var S=this.centeredScaling()||e.altKey;if(S){var N=this.findOne(".top-left"),b=this.findOne(".bottom-right"),V=N.x(),H=N.y(),q=this.getWidth()-b.x(),X=this.getHeight()-b.y();b.move({x:-V,y:-H}),N.move({x:q,y:X})}var J=this.findOne(".top-left").getAbsolutePosition();n=J.x,a=J.y;var Z=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),K=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:n,y:a,width:Z,height:K,rotation:F.getAngle(this.rotation())},e)}}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){if(this._transforming){this._transforming=!1,typeof window!="undefined"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var n=this.getNode();this._fire("transformend",{evt:e,target:n}),n&&this._nodes.forEach(a=>{a._fire("transformend",{evt:e,target:a})}),this._movingAnchorName=null}}_fitNodesInto(e,n){var a=this._getNodeRect();const s=1;if(P._inRange(e.width,-this.padding()*2-s,s)){this.update();return}if(P._inRange(e.height,-this.padding()*2-s,s)){this.update();return}const o=this.flipEnabled();var h=new L;if(h.rotate(F.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){const y=h.point({x:-this.padding()*2,y:0});if(e.x+=y.x,e.y+=y.y,e.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=y.x,this._anchorDragOffset.y-=y.y,!o){this.update();return}}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){const y=h.point({x:this.padding()*2,y:0});if(this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=y.x,this._anchorDragOffset.y-=y.y,e.width+=this.padding()*2,!o){this.update();return}}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){const y=h.point({x:0,y:-this.padding()*2});if(e.x+=y.x,e.y+=y.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=y.x,this._anchorDragOffset.y-=y.y,e.height+=this.padding()*2,!o){this.update();return}}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const y=h.point({x:0,y:this.padding()*2});if(this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=y.x,this._anchorDragOffset.y-=y.y,e.height+=this.padding()*2,!o){this.update();return}}if(this.boundBoxFunc()){const y=this.boundBoxFunc()(a,e);y?e=y:P.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const f=1e7,c=new L;c.translate(a.x,a.y),c.rotate(a.rotation),c.scale(a.width/f,a.height/f);const g=new L;g.translate(e.x,e.y),g.rotate(e.rotation),g.scale(e.width/f,e.height/f);const v=g.multiply(c.invert());this._nodes.forEach(y=>{var m;const x=y.getParent().getAbsoluteTransform(),S=y.getTransform().copy();S.translate(y.offsetX(),y.offsetY());const R=new L;R.multiply(x.copy().invert()).multiply(v).multiply(x).multiply(S);const k=R.decompose();y.setAttrs(k),this._fire("transform",{evt:n,target:y}),y._fire("transform",{evt:n,target:y}),(m=y.getLayer())===null||m===void 0||m.batchDraw()}),this.rotation(P._getRotation(e.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,n){this.findOne(e).setAttrs(n)}update(){var e,n=this._getNodeRect();this.rotation(P._getRotation(n.rotation));var a=n.width,s=n.height,o=this.enabledAnchors(),h=this.resizeEnabled(),f=this.padding(),c=this.anchorSize();this.find("._anchor").forEach(g=>{g.setAttrs({width:c,height:c,offsetX:c/2,offsetY:c/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:c/2+f,offsetY:c/2+f,visible:h&&o.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:a/2,y:0,offsetY:c/2+f,visible:h&&o.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:a,y:0,offsetX:c/2-f,offsetY:c/2+f,visible:h&&o.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:s/2,offsetX:c/2+f,visible:h&&o.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:a,y:s/2,offsetX:c/2-f,visible:h&&o.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:s,offsetX:c/2+f,offsetY:c/2-f,visible:h&&o.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:a/2,y:s,offsetY:c/2-f,visible:h&&o.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:a,y:s,offsetX:c/2-f,offsetY:c/2-f,visible:h&&o.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:a/2,y:-this.rotateAnchorOffset()*P._sign(s)-f,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:a,height:s,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0}),(e=this.getLayer())===null||e===void 0||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),wr.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return z.prototype.toObject.call(this)}}function ba(l){return l instanceof Array||P.warn("enabledAnchors value should be an array"),l instanceof Array&&l.forEach(function(e){Lr.indexOf(e)===-1&&P.warn("Unknown anchor name: "+e+". Available names are: "+Lr.join(", "))}),l||[]}ue.prototype.className="Transformer",ie(ue),w.addGetterSetter(ue,"enabledAnchors",Lr,ba),w.addGetterSetter(ue,"flipEnabled",!0,at()),w.addGetterSetter(ue,"resizeEnabled",!0),w.addGetterSetter(ue,"anchorSize",10,O()),w.addGetterSetter(ue,"rotateEnabled",!0),w.addGetterSetter(ue,"rotationSnaps",[]),w.addGetterSetter(ue,"rotateAnchorOffset",50,O()),w.addGetterSetter(ue,"rotationSnapTolerance",5,O()),w.addGetterSetter(ue,"borderEnabled",!0),w.addGetterSetter(ue,"anchorStroke","rgb(0, 161, 255)"),w.addGetterSetter(ue,"anchorStrokeWidth",1,O()),w.addGetterSetter(ue,"anchorFill","white"),w.addGetterSetter(ue,"anchorCornerRadius",0,O()),w.addGetterSetter(ue,"borderStroke","rgb(0, 161, 255)"),w.addGetterSetter(ue,"borderStrokeWidth",1,O()),w.addGetterSetter(ue,"borderDash"),w.addGetterSetter(ue,"keepRatio",!0),w.addGetterSetter(ue,"centeredScaling",!1),w.addGetterSetter(ue,"ignoreStroke",!1),w.addGetterSetter(ue,"padding",0,O()),w.addGetterSetter(ue,"node"),w.addGetterSetter(ue,"nodes"),w.addGetterSetter(ue,"boundBoxFunc"),w.addGetterSetter(ue,"anchorDragBoundFunc"),w.addGetterSetter(ue,"shouldOverdrawWholeArea",!1),w.addGetterSetter(ue,"useSingleNodeRotation",!0),w.backCompat(ue,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class Mt extends I{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,F.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}Mt.prototype.className="Wedge",Mt.prototype._centroid=!0,Mt.prototype._attrsAffectingSize=["radius"],ie(Mt),w.addGetterSetter(Mt,"radius",0,O()),w.addGetterSetter(Mt,"angle",0,O()),w.addGetterSetter(Mt,"clockwise",!1),w.backCompat(Mt,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function Di(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var fn=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],Xn=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function Fa(l,e){var n=l.data,a=l.width,s=l.height,o,h,f,c,g,v,y,m,x,S,R,k,D,G,N,b,V,H,q,X,J,Z,K,oe,Q=e+e+1,xe=a-1,tt=s-1,se=e+1,Ae=se*(se+1)/2,Ve=new Di,Ct=null,he=Ve,ve=null,rt=null,tr=fn[e],Bt=Xn[e];for(f=1;f<Q;f++)he=he.next=new Di,f===se&&(Ct=he);for(he.next=Ve,y=v=0,h=0;h<s;h++){for(b=V=H=q=m=x=S=R=0,k=se*(X=n[v]),D=se*(J=n[v+1]),G=se*(Z=n[v+2]),N=se*(K=n[v+3]),m+=Ae*X,x+=Ae*J,S+=Ae*Z,R+=Ae*K,he=Ve,f=0;f<se;f++)he.r=X,he.g=J,he.b=Z,he.a=K,he=he.next;for(f=1;f<se;f++)c=v+((xe<f?xe:f)<<2),m+=(he.r=X=n[c])*(oe=se-f),x+=(he.g=J=n[c+1])*oe,S+=(he.b=Z=n[c+2])*oe,R+=(he.a=K=n[c+3])*oe,b+=X,V+=J,H+=Z,q+=K,he=he.next;for(ve=Ve,rt=Ct,o=0;o<a;o++)n[v+3]=K=R*tr>>Bt,K!==0?(K=255/K,n[v]=(m*tr>>Bt)*K,n[v+1]=(x*tr>>Bt)*K,n[v+2]=(S*tr>>Bt)*K):n[v]=n[v+1]=n[v+2]=0,m-=k,x-=D,S-=G,R-=N,k-=ve.r,D-=ve.g,G-=ve.b,N-=ve.a,c=y+((c=o+e+1)<xe?c:xe)<<2,b+=ve.r=n[c],V+=ve.g=n[c+1],H+=ve.b=n[c+2],q+=ve.a=n[c+3],m+=b,x+=V,S+=H,R+=q,ve=ve.next,k+=X=rt.r,D+=J=rt.g,G+=Z=rt.b,N+=K=rt.a,b-=X,V-=J,H-=Z,q-=K,rt=rt.next,v+=4;y+=a}for(o=0;o<a;o++){for(V=H=q=b=x=S=R=m=0,v=o<<2,k=se*(X=n[v]),D=se*(J=n[v+1]),G=se*(Z=n[v+2]),N=se*(K=n[v+3]),m+=Ae*X,x+=Ae*J,S+=Ae*Z,R+=Ae*K,he=Ve,f=0;f<se;f++)he.r=X,he.g=J,he.b=Z,he.a=K,he=he.next;for(g=a,f=1;f<=e;f++)v=g+o<<2,m+=(he.r=X=n[v])*(oe=se-f),x+=(he.g=J=n[v+1])*oe,S+=(he.b=Z=n[v+2])*oe,R+=(he.a=K=n[v+3])*oe,b+=X,V+=J,H+=Z,q+=K,he=he.next,f<tt&&(g+=a);for(v=o,ve=Ve,rt=Ct,h=0;h<s;h++)c=v<<2,n[c+3]=K=R*tr>>Bt,K>0?(K=255/K,n[c]=(m*tr>>Bt)*K,n[c+1]=(x*tr>>Bt)*K,n[c+2]=(S*tr>>Bt)*K):n[c]=n[c+1]=n[c+2]=0,m-=k,x-=D,S-=G,R-=N,k-=ve.r,D-=ve.g,G-=ve.b,N-=ve.a,c=o+((c=h+se)<tt?c:tt)*a<<2,m+=b+=ve.r=n[c],x+=V+=ve.g=n[c+1],S+=H+=ve.b=n[c+2],R+=q+=ve.a=n[c+3],ve=ve.next,k+=X=rt.r,D+=J=rt.g,G+=Z=rt.b,N+=K=rt.a,b-=X,V-=J,H-=Z,q-=K,rt=rt.next,v+=a}}const Vn=function(e){var n=Math.round(this.blurRadius());n>0&&Fa(e,n)};w.addGetterSetter(z,"blurRadius",0,O(),w.afterSetFilter);const zi=function(l){var e=this.brightness()*255,n=l.data,a=n.length,s;for(s=0;s<a;s+=4)n[s]+=e,n[s+1]+=e,n[s+2]+=e};w.addGetterSetter(z,"brightness",0,O(),w.afterSetFilter);const bi=function(l){var e=Math.pow((this.contrast()+100)/100,2),n=l.data,a=n.length,s=150,o=150,h=150,f;for(f=0;f<a;f+=4)s=n[f],o=n[f+1],h=n[f+2],s/=255,s-=.5,s*=e,s+=.5,s*=255,o/=255,o-=.5,o*=e,o+=.5,o*=255,h/=255,h-=.5,h*=e,h+=.5,h*=255,s=s<0?0:s>255?255:s,o=o<0?0:o>255?255:o,h=h<0?0:h>255?255:h,n[f]=s,n[f+1]=o,n[f+2]=h};w.addGetterSetter(z,"contrast",0,O(),w.afterSetFilter);const Ba=function(l){var e=this.embossStrength()*10,n=this.embossWhiteLevel()*255,a=this.embossDirection(),s=this.embossBlend(),o=0,h=0,f=l.data,c=l.width,g=l.height,v=c*4,y=g;switch(a){case"top-left":o=-1,h=-1;break;case"top":o=-1,h=0;break;case"top-right":o=-1,h=1;break;case"right":o=0,h=1;break;case"bottom-right":o=1,h=1;break;case"bottom":o=1,h=0;break;case"bottom-left":o=1,h=-1;break;case"left":o=0,h=-1;break;default:P.error("Unknown emboss direction: "+a)}do{var m=(y-1)*v,x=o;y+x<1&&(x=0),y+x>g&&(x=0);var S=(y-1+x)*c*4,R=c;do{var k=m+(R-1)*4,D=h;R+D<1&&(D=0),R+D>c&&(D=0);var G=S+(R-1+D)*4,N=f[k]-f[G],b=f[k+1]-f[G+1],V=f[k+2]-f[G+2],H=N,q=H>0?H:-H,X=b>0?b:-b,J=V>0?V:-V;if(X>q&&(H=b),J>q&&(H=V),H*=e,s){var Z=f[k]+H,K=f[k+1]+H,oe=f[k+2]+H;f[k]=Z>255?255:Z<0?0:Z,f[k+1]=K>255?255:K<0?0:K,f[k+2]=oe>255?255:oe<0?0:oe}else{var Q=n-H;Q<0?Q=0:Q>255&&(Q=255),f[k]=f[k+1]=f[k+2]=Q}}while(--R)}while(--y)};w.addGetterSetter(z,"embossStrength",.5,O(),w.afterSetFilter),w.addGetterSetter(z,"embossWhiteLevel",.5,O(),w.afterSetFilter),w.addGetterSetter(z,"embossDirection","top-left",null,w.afterSetFilter),w.addGetterSetter(z,"embossBlend",!1,null,w.afterSetFilter);function Ir(l,e,n,a,s){var o=n-e,h=s-a,f;return o===0?a+h/2:h===0?a:(f=(l-e)/o,f=h*f+a,f)}const Ha=function(l){var e=l.data,n=e.length,a=e[0],s=a,o,h=e[1],f=h,c,g=e[2],v=g,y,m,x=this.enhance();if(x!==0){for(m=0;m<n;m+=4)o=e[m+0],o<a?a=o:o>s&&(s=o),c=e[m+1],c<h?h=c:c>f&&(f=c),y=e[m+2],y<g?g=y:y>v&&(v=y);s===a&&(s=255,a=0),f===h&&(f=255,h=0),v===g&&(v=255,g=0);var S,R,k,D,G,N,b,V,H;for(x>0?(R=s+x*(255-s),k=a-x*(a-0),G=f+x*(255-f),N=h-x*(h-0),V=v+x*(255-v),H=g-x*(g-0)):(S=(s+a)*.5,R=s+x*(s-S),k=a+x*(a-S),D=(f+h)*.5,G=f+x*(f-D),N=h+x*(h-D),b=(v+g)*.5,V=v+x*(v-b),H=g+x*(g-b)),m=0;m<n;m+=4)e[m+0]=Ir(e[m+0],a,s,k,R),e[m+1]=Ir(e[m+1],h,f,N,G),e[m+2]=Ir(e[m+2],g,v,H,V)}};w.addGetterSetter(z,"enhance",0,O(),w.afterSetFilter);const Ua=function(l){var e=l.data,n=e.length,a,s;for(a=0;a<n;a+=4)s=.34*e[a]+.5*e[a+1]+.16*e[a+2],e[a]=s,e[a+1]=s,e[a+2]=s};w.addGetterSetter(z,"hue",0,O(),w.afterSetFilter),w.addGetterSetter(z,"saturation",0,O(),w.afterSetFilter),w.addGetterSetter(z,"luminance",0,O(),w.afterSetFilter);const Wa=function(l){var e=l.data,n=e.length,a=1,s=Math.pow(2,this.saturation()),o=Math.abs(this.hue()+360)%360,h=this.luminance()*127,f,c=a*s*Math.cos(o*Math.PI/180),g=a*s*Math.sin(o*Math.PI/180),v=.299*a+.701*c+.167*g,y=.587*a-.587*c+.33*g,m=.114*a-.114*c-.497*g,x=.299*a-.299*c-.328*g,S=.587*a+.413*c+.035*g,R=.114*a-.114*c+.293*g,k=.299*a-.3*c+1.25*g,D=.587*a-.586*c-1.05*g,G=.114*a+.886*c-.2*g,N,b,V,H;for(f=0;f<n;f+=4)N=e[f+0],b=e[f+1],V=e[f+2],H=e[f+3],e[f+0]=v*N+y*b+m*V+h,e[f+1]=x*N+S*b+R*V+h,e[f+2]=k*N+D*b+G*V+h,e[f+3]=H},Fi=function(l){var e=l.data,n=e.length,a=Math.pow(2,this.value()),s=Math.pow(2,this.saturation()),o=Math.abs(this.hue()+360)%360,h,f=a*s*Math.cos(o*Math.PI/180),c=a*s*Math.sin(o*Math.PI/180),g=.299*a+.701*f+.167*c,v=.587*a-.587*f+.33*c,y=.114*a-.114*f-.497*c,m=.299*a-.299*f-.328*c,x=.587*a+.413*f+.035*c,S=.114*a-.114*f+.293*c,R=.299*a-.3*f+1.25*c,k=.587*a-.586*f-1.05*c,D=.114*a+.886*f-.2*c,G,N,b,V;for(h=0;h<n;h+=4)G=e[h+0],N=e[h+1],b=e[h+2],V=e[h+3],e[h+0]=g*G+v*N+y*b,e[h+1]=m*G+x*N+S*b,e[h+2]=R*G+k*N+D*b,e[h+3]=V};w.addGetterSetter(z,"hue",0,O(),w.afterSetFilter),w.addGetterSetter(z,"saturation",0,O(),w.afterSetFilter),w.addGetterSetter(z,"value",0,O(),w.afterSetFilter);const Ya=function(l){var e=l.data,n=e.length,a;for(a=0;a<n;a+=4)e[a]=255-e[a],e[a+1]=255-e[a+1],e[a+2]=255-e[a+2]};var Xa=function(l,e,n){var a=l.data,s=e.data,o=l.width,h=l.height,f=n.polarCenterX||o/2,c=n.polarCenterY||h/2,g,v,y,m=0,x=0,S=0,R=0,k,D=Math.sqrt(f*f+c*c);v=o-f,y=h-c,k=Math.sqrt(v*v+y*y),D=k>D?k:D;var G=h,N=o,b,V,H=360/N*Math.PI/180,q,X;for(V=0;V<N;V+=1)for(q=Math.sin(V*H),X=Math.cos(V*H),b=0;b<G;b+=1)v=Math.floor(f+D*b/G*X),y=Math.floor(c+D*b/G*q),g=(y*o+v)*4,m=a[g+0],x=a[g+1],S=a[g+2],R=a[g+3],g=(V+b*o)*4,s[g+0]=m,s[g+1]=x,s[g+2]=S,s[g+3]=R},Hs=function(l,e,n){var a=l.data,s=e.data,o=l.width,h=l.height,f=n.polarCenterX||o/2,c=n.polarCenterY||h/2,g,v,y,m,x,S=0,R=0,k=0,D=0,G,N=Math.sqrt(f*f+c*c);v=o-f,y=h-c,G=Math.sqrt(v*v+y*y),N=G>N?G:N;var b=h,V=o,H,q,X=n.polarRotation||0,J,Z;for(v=0;v<o;v+=1)for(y=0;y<h;y+=1)m=v-f,x=y-c,H=Math.sqrt(m*m+x*x)*b/N,q=(Math.atan2(x,m)*180/Math.PI+360+X)%360,q=q*V/360,J=Math.floor(q),Z=Math.floor(H),g=(Z*o+J)*4,S=a[g+0],R=a[g+1],k=a[g+2],D=a[g+3],g=(y*o+v)*4,s[g+0]=S,s[g+1]=R,s[g+2]=k,s[g+3]=D};const Bi=function(l){var e=l.width,n=l.height,a,s,o,h,f,c,g,v,y,m,x=Math.round(this.kaleidoscopePower()),S=Math.round(this.kaleidoscopeAngle()),R=Math.floor(e*(S%360)/360);if(!(x<1)){var k=P.createCanvasElement();k.width=e,k.height=n;var D=k.getContext("2d").getImageData(0,0,e,n);Xa(l,D,{polarCenterX:e/2,polarCenterY:n/2});for(var G=e/Math.pow(2,x);G<=8;)G=G*2,x-=1;G=Math.ceil(G);var N=G,b=0,V=N,H=1;for(R+G>e&&(b=N,V=0,H=-1),s=0;s<n;s+=1)for(a=b;a!==V;a+=H)o=Math.round(a+R)%e,y=(e*s+o)*4,f=D.data[y+0],c=D.data[y+1],g=D.data[y+2],v=D.data[y+3],m=(e*s+a)*4,D.data[m+0]=f,D.data[m+1]=c,D.data[m+2]=g,D.data[m+3]=v;for(s=0;s<n;s+=1)for(N=Math.floor(G),h=0;h<x;h+=1){for(a=0;a<N+1;a+=1)y=(e*s+a)*4,f=D.data[y+0],c=D.data[y+1],g=D.data[y+2],v=D.data[y+3],m=(e*s+N*2-a-1)*4,D.data[m+0]=f,D.data[m+1]=c,D.data[m+2]=g,D.data[m+3]=v;N*=2}Hs(D,l,{polarRotation:0})}};w.addGetterSetter(z,"kaleidoscopePower",2,O(),w.afterSetFilter),w.addGetterSetter(z,"kaleidoscopeAngle",0,O(),w.afterSetFilter);function fr(l,e,n){var a=(n*l.width+e)*4,s=[];return s.push(l.data[a++],l.data[a++],l.data[a++],l.data[a++]),s}function cn(l,e){return Math.sqrt(Math.pow(l[0]-e[0],2)+Math.pow(l[1]-e[1],2)+Math.pow(l[2]-e[2],2))}function Us(l){for(var e=[0,0,0],n=0;n<l.length;n++)e[0]+=l[n][0],e[1]+=l[n][1],e[2]+=l[n][2];return e[0]/=l.length,e[1]/=l.length,e[2]/=l.length,e}function Ws(l,e){var n=fr(l,0,0),a=fr(l,l.width-1,0),s=fr(l,0,l.height-1),o=fr(l,l.width-1,l.height-1),h=e||10;if(cn(n,a)<h&&cn(a,o)<h&&cn(o,s)<h&&cn(s,n)<h){for(var f=Us([a,n,o,s]),c=[],g=0;g<l.width*l.height;g++){var v=cn(f,[l.data[g*4],l.data[g*4+1],l.data[g*4+2]]);c[g]=v<h?0:255}return c}}function Ys(l,e){for(var n=0;n<l.width*l.height;n++)l.data[4*n+3]=e[n]}function St(l,e,n){for(var a=[1,1,1,1,0,1,1,1,1],s=Math.round(Math.sqrt(a.length)),o=Math.floor(s/2),h=[],f=0;f<n;f++)for(var c=0;c<e;c++){for(var g=f*e+c,v=0,y=0;y<s;y++)for(var m=0;m<s;m++){var x=f+y-o,S=c+m-o;if(x>=0&&x<n&&S>=0&&S<e){var R=x*e+S,k=a[y*s+m];v+=l[R]*k}}h[g]=v===255*8?255:0}return h}function $e(l,e,n){for(var a=[1,1,1,1,1,1,1,1,1],s=Math.round(Math.sqrt(a.length)),o=Math.floor(s/2),h=[],f=0;f<n;f++)for(var c=0;c<e;c++){for(var g=f*e+c,v=0,y=0;y<s;y++)for(var m=0;m<s;m++){var x=f+y-o,S=c+m-o;if(x>=0&&x<n&&S>=0&&S<e){var R=x*e+S,k=a[y*s+m];v+=l[R]*k}}h[g]=v>=255*4?255:0}return h}function Va(l,e,n){for(var a=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],s=Math.round(Math.sqrt(a.length)),o=Math.floor(s/2),h=[],f=0;f<n;f++)for(var c=0;c<e;c++){for(var g=f*e+c,v=0,y=0;y<s;y++)for(var m=0;m<s;m++){var x=f+y-o,S=c+m-o;if(x>=0&&x<n&&S>=0&&S<e){var R=x*e+S,k=a[y*s+m];v+=l[R]*k}}h[g]=v}return h}const ja=function(l){var e=this.threshold(),n=Ws(l,e);return n&&(n=St(n,l.width,l.height),n=$e(n,l.width,l.height),n=Va(n,l.width,l.height),Ys(l,n)),l};w.addGetterSetter(z,"threshold",0,O(),w.afterSetFilter);const Ka=function(l){var e=this.noise()*255,n=l.data,a=n.length,s=e/2,o;for(o=0;o<a;o+=4)n[o+0]+=s-2*s*Math.random(),n[o+1]+=s-2*s*Math.random(),n[o+2]+=s-2*s*Math.random()};w.addGetterSetter(z,"noise",.2,O(),w.afterSetFilter);const Hi=function(l){var e=Math.ceil(this.pixelSize()),n=l.width,a=l.height,s,o,h,f,c,g,v,y=Math.ceil(n/e),m=Math.ceil(a/e),x,S,R,k,D,G,N,b=l.data;if(e<=0){P.error("pixelSize value can not be <= 0");return}for(D=0;D<y;D+=1)for(G=0;G<m;G+=1){for(f=0,c=0,g=0,v=0,x=D*e,S=x+e,R=G*e,k=R+e,N=0,s=x;s<S;s+=1)if(!(s>=n))for(o=R;o<k;o+=1)o>=a||(h=(n*o+s)*4,f+=b[h+0],c+=b[h+1],g+=b[h+2],v+=b[h+3],N+=1);for(f=f/N,c=c/N,g=g/N,v=v/N,s=x;s<S;s+=1)if(!(s>=n))for(o=R;o<k;o+=1)o>=a||(h=(n*o+s)*4,b[h+0]=f,b[h+1]=c,b[h+2]=g,b[h+3]=v)}};w.addGetterSetter(z,"pixelSize",8,O(),w.afterSetFilter);const Qa=function(l){var e=Math.round(this.levels()*254)+1,n=l.data,a=n.length,s=255/e,o;for(o=0;o<a;o+=1)n[o]=Math.floor(n[o]/s)*s};w.addGetterSetter(z,"levels",.5,O(),w.afterSetFilter);const Ui=function(l){var e=l.data,n=e.length,a=this.red(),s=this.green(),o=this.blue(),h,f;for(h=0;h<n;h+=4)f=(.34*e[h]+.5*e[h+1]+.16*e[h+2])/255,e[h]=f*a,e[h+1]=f*s,e[h+2]=f*o,e[h+3]=e[h+3]};w.addGetterSetter(z,"red",0,function(l){return this._filterUpToDate=!1,l>255?255:l<0?0:Math.round(l)}),w.addGetterSetter(z,"green",0,function(l){return this._filterUpToDate=!1,l>255?255:l<0?0:Math.round(l)}),w.addGetterSetter(z,"blue",0,ui,w.afterSetFilter);const qa=function(l){var e=l.data,n=e.length,a=this.red(),s=this.green(),o=this.blue(),h=this.alpha(),f,c;for(f=0;f<n;f+=4)c=1-h,e[f]=a*h+e[f]*c,e[f+1]=s*h+e[f+1]*c,e[f+2]=o*h+e[f+2]*c};w.addGetterSetter(z,"red",0,function(l){return this._filterUpToDate=!1,l>255?255:l<0?0:Math.round(l)}),w.addGetterSetter(z,"green",0,function(l){return this._filterUpToDate=!1,l>255?255:l<0?0:Math.round(l)}),w.addGetterSetter(z,"blue",0,ui,w.afterSetFilter),w.addGetterSetter(z,"alpha",1,function(l){return this._filterUpToDate=!1,l>1?1:l<0?0:l});const Wi=function(l){var e=l.data,n=e.length,a,s,o,h;for(a=0;a<n;a+=4)s=e[a+0],o=e[a+1],h=e[a+2],e[a+0]=Math.min(255,s*.393+o*.769+h*.189),e[a+1]=Math.min(255,s*.349+o*.686+h*.168),e[a+2]=Math.min(255,s*.272+o*.534+h*.131)},Ja=function(l){var e=l.data,n=l.width,a=l.height,s=n*4,o=a;do{var h=(o-1)*s,f=n;do{var c=h+(f-1)*4,g=e[c],v=e[c+1],y=e[c+2];g>127&&(g=255-g),v>127&&(v=255-v),y>127&&(y=255-y),e[c]=g,e[c+1]=v,e[c+2]=y}while(--f)}while(--o)},jn=function(l){var e=this.threshold()*255,n=l.data,a=n.length,s;for(s=0;s<a;s+=1)n[s]=n[s]<e?0:255};w.addGetterSetter(z,"threshold",.5,O(),w.afterSetFilter);const Xs=Ti.Util._assign(Ti,{Arc:Me,Arrow:Tt,Circle:Dt,Ellipse:ot,Image:Qe,Label:bn,Tag:Je,Line:Gt,Path:le,Rect:ct,RegularPolygon:Jt,Ring:Zt,Sprite:_t,Star:yt,Text:Se,TextPath:ge,Transformer:ue,Wedge:Mt,Filters:{Blur:Vn,Brighten:zi,Contrast:bi,Emboss:Ba,Enhance:Ha,Grayscale:Ua,HSL:Wa,HSV:Fi,Invert:Ya,Kaleidoscope:Bi,Mask:ja,Noise:Ka,Pixelate:Hi,Posterize:Qa,RGB:Ui,RGBA:qa,Sepia:Wi,Solarize:Ja,Threshold:jn}});var Vs=null,gt=ze(67294),Nr=Ti,Za=ze(76525),Yi=ze.n(Za),Xi={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0},Lt=!1,wt=!1,cr=".react-konva-event",Or=!1;function Vi(l){Or=l}var Kn=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,$a=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,gn={};function Qn(l,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:gn;if(e===n&&console.error("same props"),!Lt&&"zIndex"in e&&(console.warn($a),Lt=!0),!wt&&e.draggable){var a=e.x!==void 0||e.y!==void 0,s=e.onDragEnd||e.onDragMove;a&&!s&&(console.warn(Kn),wt=!0)}for(var o in n)if(!Xi[o]){var h=o.slice(0,2)==="on",f=n[o]!==e[o];if(h&&f){var c=o.substr(2).toLowerCase();c.substr(0,7)==="content"&&(c="content"+c.substr(7,1).toUpperCase()+c.substr(8)),l.off(c,n[o])}var g=!e.hasOwnProperty(o);g&&l.setAttr(o,void 0)}var v=Or||e._useStrictMode,y={},m=!1,x={};for(var o in e)if(!Xi[o]){var h=o.slice(0,2)==="on",S=n[o]!==e[o];if(h&&S){var c=o.substr(2).toLowerCase();c.substr(0,7)==="content"&&(c="content"+c.substr(7,1).toUpperCase()+c.substr(8)),e[o]&&(x[c]=e[o])}!h&&(e[o]!==n[o]||v&&e[o]!==l.getAttr(o))&&(m=!0,y[o]=e[o])}m&&(l.setAttrs(y),er(l));for(var c in x)l.on(c+cr,x[c])}function er(l){if(!F.autoDrawEnabled){var e=l.getLayer()||l.getStage();e&&e.batchDraw()}}var pn=ze(63840),qn={},js={};Nr.Node.prototype._applyProps=Qn;function es(l,e){if(typeof e=="string"){console.error("Do not use plain text as child of Konva.Node. You are using text: "+e);return}l.add(e),er(l)}function ts(l,e,n){var a=Nr[l];a||(console.error("Konva has no node with the type "+l+'. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/'+l+'"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html'),a=Nr.Group);var s={},o={};for(var h in e){var f=h.slice(0,2)==="on";f?o[h]=e[h]:s[h]=e[h]}var c=new a(s);return Qn(c,o),c}function Ks(l,e,n){console.error('Text components are not supported for now in ReactKonva. Your text is: "'+l+'"')}function rs(l,e,n){return!1}function Qs(l){return l}function ns(){return null}function qs(){return null}function is(l,e,n,a){return js}function as(){}function ss(l){}function os(l,e){return!1}function ls(){return qn}function hs(){return qn}var ji=setTimeout,Ki=clearTimeout,us=-1;function Qi(l,e){return!1}var ds=!1,Jn=!0,Js=!0;function Zn(l,e){e.parent===l?e.moveToTop():l.add(e),er(l)}function $n(l,e){e.parent===l?e.moveToTop():l.add(e),er(l)}function vn(l,e,n){e._remove(),l.add(e),e.setZIndex(n.getZIndex()),er(l)}function ei(l,e,n){vn(l,e,n)}function ti(l,e){e.destroy(),e.off(cr),er(l)}function mn(l,e){e.destroy(),e.off(cr),er(l)}function qi(l,e,n){console.error('Text components are not yet supported in ReactKonva. You text is: "'+n+'"')}function Ji(l,e,n){}function Zi(l,e,n,a,s){Qn(l,s,a)}function fs(l){l.hide(),er(l)}function $i(l){}function ri(l,e){(e.visible==null||e.visible)&&l.show()}function Zs(l,e){}function $s(l){}var ni=Object.assign||function(l){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(l[a]=n[a])}return l};function ea(l){var e=gt.useRef();return gt.useLayoutEffect(function(){e.current=l}),e.current}var ta=function(e){var n=gt.useRef(),a=gt.useRef(),s=gt.useRef(),o=ea(e),h=function(c){var g=e.forwardedRef;!g||(typeof g=="function"?g(c):g.current=c)};return gt.useLayoutEffect(function(){return a.current=new Nr.Stage({width:e.width,height:e.height,container:n.current}),h(a.current),s.current=Ft.createContainer(a.current),Ft.updateContainer(e.children,s.current),function(){!Nr.isBrowser||(h(null),Ft.updateContainer(null,s.current,null),a.current.destroy())}},[]),gt.useLayoutEffect(function(){h(a.current),Qn(a.current,e,o),Ft.updateContainer(e.children,s.current,null)}),gt.createElement("div",{ref:n,accessKey:e.accessKey,className:e.className,role:e.role,style:e.style,tabIndex:e.tabIndex,title:e.title})},te="Layer",et="FastLayer",Ie="Group",Xe="Label",Gr="Rect",ra="Circle",He="Ellipse",na="Wedge",Dr="Line",ii="Sprite",zr="Image",cs="Text",gs="TextPath",ps="Star",vs="Ring",gr="Arc",j="Tag",ia="Path",ms="RegularPolygon",bt="Arrow",pr="Shape",ai="Transformer",Ft=Yi()(rr);Ft.injectIntoDevTools({findHostInstanceByFiber:function(){return null},bundleType:0,version:gt.version,rendererPackageName:"react-konva"});var aa=gt.forwardRef(function(l,e){return gt.createElement(ta,ni({},l,{forwardedRef:e}))}),_s=null},67287:function(xt,_n,ze){xt=ze.nmd(xt);/** @license React v0.26.2
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */xt.exports=function(U){var re={},Ue=ze(27418),F=ze(67294),ie=ze(63840);function L(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)r+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var nt=F.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,dt=60103,Ne=60106,Oe=60107,it=60108,vr=60114,Br=60109,oi=60110,yn=60112,Hr=60113,Ur=60120,Sn=60115,Wr=60116,li=60121,Yr=60129,hi=60130,P=60131;if(typeof Symbol=="function"&&Symbol.for){var we=Symbol.for;dt=we("react.element"),Ne=we("react.portal"),Oe=we("react.fragment"),it=we("react.strict_mode"),vr=we("react.profiler"),Br=we("react.provider"),oi=we("react.context"),yn=we("react.forward_ref"),Hr=we("react.suspense"),Ur=we("react.suspense_list"),Sn=we("react.memo"),Wr=we("react.lazy"),li=we("react.block"),we("react.scope"),Yr=we("react.debug_trace_mode"),hi=we("react.offscreen"),P=we("react.legacy_hidden")}var ui=typeof Symbol=="function"&&Symbol.iterator;function wn(t){return t===null||typeof t!="object"?null:(t=ui&&t[ui]||t["@@iterator"],typeof t=="function"?t:null)}function O(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Oe:return"Fragment";case Ne:return"Portal";case vr:return"Profiler";case it:return"StrictMode";case Hr:return"Suspense";case Ur:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case oi:return(t.displayName||"Context")+".Consumer";case Br:return(t._context.displayName||"Context")+".Provider";case yn:var r=t.render;return r=r.displayName||r.name||"",t.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case Sn:return O(t.type);case li:return O(t._render);case Wr:r=t._payload,t=t._init;try{return O(t(r))}catch(i){}}return null}function Xr(t){var r=t,i=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&1026)!=0&&(i=r.return),t=r.return;while(t)}return r.tag===3?i:null}function Cn(t){if(Xr(t)!==t)throw Error(L(188))}function nr(t){var r=t.alternate;if(!r){if(r=Xr(t),r===null)throw Error(L(188));return r!==t?null:t}for(var i=t,u=r;;){var d=i.return;if(d===null)break;var p=d.alternate;if(p===null){if(u=d.return,u!==null){i=u;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===i)return Cn(d),t;if(p===u)return Cn(d),r;p=p.sibling}throw Error(L(188))}if(i.return!==u.return)i=d,u=p;else{for(var _=!1,C=d.child;C;){if(C===i){_=!0,i=d,u=p;break}if(C===u){_=!0,u=d,i=p;break}C=C.sibling}if(!_){for(C=p.child;C;){if(C===i){_=!0,i=p,u=d;break}if(C===u){_=!0,u=p,i=d;break}C=C.sibling}if(!_)throw Error(L(189))}}if(i.alternate!==u)throw Error(L(190))}if(i.tag!==3)throw Error(L(188));return i.stateNode.current===i?t:r}function di(t){if(t=nr(t),!t)return null;for(var r=t;;){if(r.tag===5||r.tag===6)return r;if(r.child)r.child.return=r,r=r.child;else{if(r===t)break;for(;!r.sibling;){if(!r.return||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}}return null}function so(t){if(t=nr(t),!t)return null;for(var r=t;;){if(r.tag===5||r.tag===6)return r;if(r.child&&r.tag!==4)r.child.return=r,r=r.child;else{if(r===t)break;for(;!r.sibling;){if(!r.return||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}}return null}function sa(t,r){for(var i=t.alternate;r!==null;){if(r===t||r===i)return!0;r=r.return}return!1}var at=U.getPublicInstance,xs=U.getRootHostContext,Vr=U.getChildHostContext,jr=U.prepareForCommit,w=U.resetAfterCommit,Es=U.createInstance,xn=U.appendInitialChild,oa=U.finalizeInitialChildren,la=U.prepareUpdate,fi=U.shouldSetTextContent,ha=U.createTextInstance,ua=U.scheduleTimeout,Ps=U.cancelTimeout,ci=U.noTimeout,Ht=U.isPrimaryRenderer,pt=U.supportsMutation,Kr=U.supportsPersistence,je=U.supportsHydration,ks=U.getInstanceFromNode,Ts=U.makeOpaqueHydratingObject,mr=U.makeClientId,da=U.beforeActiveInstanceBlur,En=U.afterActiveInstanceBlur,_r=U.preparePortalMount,ir=U.supportsTestSelectors,de=U.findFiberRoot,Pn=U.getBoundingRect,kn=U.getTextContent,st=U.isHiddenSubtree,fa=U.matchAccessibilityRole,Qr=U.setFocusIfFocusable,Rs=U.setupIntersectionObserver,As=U.appendChild,Ms=U.appendChildToContainer,gi=U.commitTextUpdate,ca=U.commitMount,ga=U.commitUpdate,oo=U.insertBefore,pa=U.insertInContainerBefore,va=U.removeChild,Tn=U.removeChildFromContainer,pi=U.resetTextContent,Ut=U.hideInstance,Ls=U.hideTextInstance,vi=U.unhideInstance,Is=U.unhideTextInstance,mi=U.clearContainer,z=U.cloneInstance,me=U.createContainerChildSet,Ke=U.appendChildToContainerChildSet,qr=U.finalizeContainerChildren,_i=U.replaceContainerChildren,Rn=U.cloneHiddenInstance,An=U.cloneHiddenTextInstance,ma=U.canHydrateInstance,_a=U.canHydrateTextInstance,Jr=U.isSuspenseInstancePending,Ns=U.isSuspenseInstanceFallback,yi=U.getNextHydratableSibling,Si=U.getFirstHydratableChild,Os=U.hydrateInstance,ya=U.hydrateTextInstance,Sa=U.getNextHydratableInstanceAfterSuspenseInstance,wi=U.commitHydratedContainer,wa=U.commitHydratedSuspenseInstance,Mn;function yr(t){if(Mn===void 0)try{throw Error()}catch(i){var r=i.stack.trim().match(/\n( *(at )?)/);Mn=r&&r[1]||""}return`
`+Mn+t}var ar=!1;function Wt(t,r){if(!t||ar)return"";ar=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(A){var u=A}Reflect.construct(t,[],r)}else{try{r.call()}catch(A){u=A}t.call(r.prototype)}else{try{throw Error()}catch(A){u=A}t()}}catch(A){if(A&&u&&typeof A.stack=="string"){for(var d=A.stack.split(`
`),p=u.stack.split(`
`),_=d.length-1,C=p.length-1;1<=_&&0<=C&&d[_]!==p[C];)C--;for(;1<=_&&0<=C;_--,C--)if(d[_]!==p[C]){if(_!==1||C!==1)do if(_--,C--,0>C||d[_]!==p[C])return`
`+d[_].replace(" at new "," at ");while(1<=_&&0<=C);break}}}finally{ar=!1,Error.prepareStackTrace=i}return(t=t?t.displayName||t.name:"")?yr(t):""}var Yt=[],Et=-1;function Xt(t){return{current:t}}function _e(t){0>Et||(t.current=Yt[Et],Yt[Et]=null,Et--)}function Ce(t,r){Et++,Yt[Et]=t.current,t.current=r}var vt={},Le=Xt(vt),Be=Xt(!1),Vt=vt;function sr(t,r){var i=t.type.contextTypes;if(!i)return vt;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===r)return u.__reactInternalMemoizedMaskedChildContext;var d={},p;for(p in i)d[p]=r[p];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=d),d}function We(t){return t=t.childContextTypes,t!=null}function Zr(){_e(Be),_e(Le)}function Ln(t,r,i){if(Le.current!==vt)throw Error(L(168));Ce(Le,r),Ce(Be,i)}function Ca(t,r,i){var u=t.stateNode;if(t=r.childContextTypes,typeof u.getChildContext!="function")return i;u=u.getChildContext();for(var d in u)if(!(d in t))throw Error(L(108,O(r)||"Unknown",d));return Ue({},i,u)}function In(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||vt,Vt=Le.current,Ce(Le,t),Ce(Be,Be.current),!0}function Nn(t,r,i){var u=t.stateNode;if(!u)throw Error(L(169));i?(t=Ca(t,r,Vt),u.__reactInternalMemoizedMergedChildContext=t,_e(Be),_e(Le),Ce(Le,t)):_e(Be),Ce(Be,i)}var or=null,ft=null,xa=ie.unstable_now;xa();var On=0,pe=8;function Pt(t){if((1&t)!=0)return pe=15,1;if((2&t)!=0)return pe=14,2;if((4&t)!=0)return pe=13,4;var r=24&t;return r!==0?(pe=12,r):(t&32)!=0?(pe=11,32):(r=192&t,r!==0?(pe=10,r):(t&256)!=0?(pe=9,256):(r=3584&t,r!==0?(pe=8,r):(t&4096)!=0?(pe=7,4096):(r=4186112&t,r!==0?(pe=6,r):(r=62914560&t,r!==0?(pe=5,r):t&67108864?(pe=4,67108864):(t&134217728)!=0?(pe=3,134217728):(r=805306368&t,r!==0?(pe=2,r):(1073741824&t)!=0?(pe=1,1073741824):(pe=8,t))))))}function Ea(t){switch(t){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function Pa(t){switch(t){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(L(358,t))}}function Sr(t,r){var i=t.pendingLanes;if(i===0)return pe=0;var u=0,d=0,p=t.expiredLanes,_=t.suspendedLanes,C=t.pingedLanes;if(p!==0)u=p,d=pe=15;else if(p=i&134217727,p!==0){var A=p&~_;A!==0?(u=Pt(A),d=pe):(C&=p,C!==0&&(u=Pt(C),d=pe))}else p=i&~_,p!==0?(u=Pt(p),d=pe):C!==0&&(u=Pt(C),d=pe);if(u===0)return 0;if(u=31-Kt(u),u=i&((0>u?0:1<<u)<<1)-1,r!==0&&r!==u&&(r&_)==0){if(Pt(r),d<=pe)return r;pe=d}if(r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=u;0<r;)i=31-Kt(r),d=1<<i,u|=t[i],r&=~d;return u}function Ci(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $r(t,r){switch(t){case 15:return 1;case 14:return 2;case 12:return t=Ot(24&~r),t===0?$r(10,r):t;case 10:return t=Ot(192&~r),t===0?$r(8,r):t;case 8:return t=Ot(3584&~r),t===0&&(t=Ot(4186112&~r),t===0&&(t=512)),t;case 2:return r=Ot(805306368&~r),r===0&&(r=268435456),r}throw Error(L(358,t))}function Ot(t){return t&-t}function en(t){for(var r=[],i=0;31>i;i++)r.push(t);return r}function jt(t,r,i){t.pendingLanes|=r;var u=r-1;t.suspendedLanes&=u,t.pingedLanes&=u,t=t.eventTimes,r=31-Kt(r),t[r]=i}var Kt=Math.clz32?Math.clz32:zs,Gs=Math.log,Ds=Math.LN2;function zs(t){return t===0?32:31-(Gs(t)/Ds|0)|0}var bs=ie.unstable_runWithPriority,xi=ie.unstable_scheduleCallback,Ei=ie.unstable_cancelCallback,Fs=ie.unstable_shouldYield,ka=ie.unstable_requestPaint,I=ie.unstable_now,Bs=ie.unstable_getCurrentPriorityLevel,Gn=ie.unstable_ImmediatePriority,Ta=ie.unstable_UserBlockingPriority,Pi=ie.unstable_NormalPriority,Ra=ie.unstable_LowPriority,Qt=ie.unstable_IdlePriority,tn={},wr=ka!==void 0?ka:function(){},mt=null,Ye=null,ki=!1,Aa=I(),Ge=1e4>Aa?I:function(){return I()-Aa};function lr(){switch(Bs()){case Gn:return 99;case Ta:return 98;case Pi:return 97;case Ra:return 96;case Qt:return 95;default:throw Error(L(332))}}function Ma(t){switch(t){case 99:return Gn;case 98:return Ta;case 97:return Pi;case 96:return Ra;case 95:return Qt;default:throw Error(L(332))}}function kt(t,r){return t=Ma(t),bs(t,r)}function rn(t,r,i){return t=Ma(t),xi(t,r,i)}function fe(){if(Ye!==null){var t=Ye;Ye=null,Ei(t)}Cr()}function Cr(){if(!ki&&mt!==null){ki=!0;var t=0;try{var r=mt;kt(99,function(){for(;t<r.length;t++){var i=r[t];do i=i(!0);while(i!==null)}}),mt=null}catch(i){throw mt!==null&&(mt=mt.slice(t+1)),xi(Gn,fe),i}finally{ki=!1}}}var Ti=nt.ReactCurrentBatchConfig;function lo(t,r){return t===r&&(t!==0||1/t==1/r)||t!==t&&r!==r}var Me=typeof Object.is=="function"?Object.is:lo,Ri=Object.prototype.hasOwnProperty;function nn(t,r){if(Me(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var i=Object.keys(t),u=Object.keys(r);if(i.length!==u.length)return!1;for(u=0;u<i.length;u++)if(!Ri.call(r,i[u])||!Me(t[i[u]],r[i[u]]))return!1;return!0}function Gt(t){switch(t.tag){case 5:return yr(t.type);case 16:return yr("Lazy");case 13:return yr("Suspense");case 19:return yr("SuspenseList");case 0:case 2:case 15:return t=Wt(t.type,!1),t;case 11:return t=Wt(t.type.render,!1),t;case 22:return t=Wt(t.type._render,!1),t;case 1:return t=Wt(t.type,!0),t;default:return""}}function le(t,r){if(t&&t.defaultProps){r=Ue({},r),t=t.defaultProps;for(var i in t)r[i]===void 0&&(r[i]=t[i]);return r}return r}var Tt=Xt(null),Dt=null,ot=null,Qe=null;function Dn(){Qe=ot=Dt=null}function La(t,r){t=t.type._context,Ht?(Ce(Tt,t._currentValue),t._currentValue=r):(Ce(Tt,t._currentValue2),t._currentValue2=r)}function Ai(t){var r=Tt.current;_e(Tt),t=t.type._context,Ht?t._currentValue=r:t._currentValue2=r}function zn(t,r){for(;t!==null;){var i=t.alternate;if((t.childLanes&r)===r){if(i===null||(i.childLanes&r)===r)break;i.childLanes|=r}else t.childLanes|=r,i!==null&&(i.childLanes|=r);t=t.return}}function qt(t,r){Dt=t,Qe=ot=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&r)!=0&&(St=!0),t.firstContext=null)}function qe(t,r){if(Qe!==t&&r!==!1&&r!==0)if((typeof r!="number"||r===1073741823)&&(Qe=t,r=1073741823),r={context:t,observedBits:r,next:null},ot===null){if(Dt===null)throw Error(L(308));ot=r,Dt.dependencies={lanes:0,firstContext:r,responders:null}}else ot=ot.next=r;return Ht?t._currentValue:t._currentValue2}var Rt=!1;function Mi(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function bn(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Je(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function ct(t,r){if(t=t.updateQueue,t!==null){t=t.shared;var i=t.pending;i===null?r.next=r:(r.next=i.next,i.next=r),t.pending=r}}function Jt(t,r){var i=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,i===u)){var d=null,p=null;if(i=i.firstBaseUpdate,i!==null){do{var _={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};p===null?d=p=_:p=p.next=_,i=i.next}while(i!==null);p===null?d=p=r:p=p.next=r}else d=p=r;i={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:u.shared,effects:u.effects},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=r:t.next=r,i.lastBaseUpdate=r}function xr(t,r,i,u){var d=t.updateQueue;Rt=!1;var p=d.firstBaseUpdate,_=d.lastBaseUpdate,C=d.shared.pending;if(C!==null){d.shared.pending=null;var A=C,B=A.next;A.next=null,_===null?p=B:_.next=B,_=A;var $=t.alternate;if($!==null){$=$.updateQueue;var ne=$.lastBaseUpdate;ne!==_&&(ne===null?$.firstBaseUpdate=B:ne.next=B,$.lastBaseUpdate=A)}}if(p!==null){ne=d.baseState,_=0,$=B=A=null;do{C=p.lane;var Y=p.eventTime;if((u&C)===C){$!==null&&($=$.next={eventTime:Y,lane:0,tag:p.tag,payload:p.payload,callback:p.callback,next:null});e:{var Ee=t,Te=p;switch(C=r,Y=i,Te.tag){case 1:if(Ee=Te.payload,typeof Ee=="function"){ne=Ee.call(Y,ne,C);break e}ne=Ee;break e;case 3:Ee.flags=Ee.flags&-4097|64;case 0:if(Ee=Te.payload,C=typeof Ee=="function"?Ee.call(Y,ne,C):Ee,C==null)break e;ne=Ue({},ne,C);break e;case 2:Rt=!0}}p.callback!==null&&(t.flags|=32,C=d.effects,C===null?d.effects=[p]:C.push(p))}else Y={eventTime:Y,lane:C,tag:p.tag,payload:p.payload,callback:p.callback,next:null},$===null?(B=$=Y,A=ne):$=$.next=Y,_|=C;if(p=p.next,p===null){if(C=d.shared.pending,C===null)break;p=C.next,C.next=null,d.lastBaseUpdate=C,d.shared.pending=null}}while(1);$===null&&(A=ne),d.baseState=A,d.firstBaseUpdate=B,d.lastBaseUpdate=$,ii|=_,t.lanes=_,t.memoizedState=ne}}function Zt(t,r,i){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var u=t[r],d=u.callback;if(d!==null){if(u.callback=null,u=i,typeof d!="function")throw Error(L(191,d));d.call(u)}}}var _t=new F.Component().refs;function yt(t,r,i,u){r=t.memoizedState,i=i(u,r),i=i==null?r:Ue({},r,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var an={isMounted:function(t){return(t=t._reactInternals)?Xr(t)===t:!1},enqueueSetState:function(t,r,i){t=t._reactInternals;var u=c(),d=g(t),p=Je(u,d);p.payload=r,i!=null&&(p.callback=i),ct(t,p),v(t,d,u)},enqueueReplaceState:function(t,r,i){t=t._reactInternals;var u=c(),d=g(t),p=Je(u,d);p.tag=1,p.payload=r,i!=null&&(p.callback=i),ct(t,p),v(t,d,u)},enqueueForceUpdate:function(t,r){t=t._reactInternals;var i=c(),u=g(t),d=Je(i,u);d.tag=2,r!=null&&(d.callback=r),ct(t,d),v(t,u,i)}};function sn(t,r,i,u,d,p,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,p,_):r.prototype&&r.prototype.isPureReactComponent?!nn(i,u)||!nn(d,p):!0}function Ia(t,r,i){var u=!1,d=vt,p=r.contextType;return typeof p=="object"&&p!==null?p=qe(p):(d=We(r)?Vt:Le.current,u=r.contextTypes,p=(u=u!=null)?sr(t,d):vt),r=new r(i,p),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=an,t.stateNode=r,r._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=d,t.__reactInternalMemoizedMaskedChildContext=p),r}function Er(t,r,i,u){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(i,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(i,u),r.state!==t&&an.enqueueReplaceState(r,r.state,null)}function Li(t,r,i,u){var d=t.stateNode;d.props=i,d.state=t.memoizedState,d.refs=_t,Mi(t);var p=r.contextType;typeof p=="object"&&p!==null?d.context=qe(p):(p=We(r)?Vt:Le.current,d.context=sr(t,p)),xr(t,i,d,u),d.state=t.memoizedState,p=r.getDerivedStateFromProps,typeof p=="function"&&(yt(t,r,p,i),d.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(r=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),r!==d.state&&an.enqueueReplaceState(d,d.state,null),xr(t,i,d,u),d.state=t.memoizedState),typeof d.componentDidMount=="function"&&(t.flags|=4)}var Fn=Array.isArray;function Pr(t,r,i){if(t=i.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(L(309));var u=i.stateNode}if(!u)throw Error(L(147,t));var d=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===d?r.ref:(r=function(p){var _=u.refs;_===_t&&(_=u.refs={}),p===null?delete _[d]:_[d]=p},r._stringRef=d,r)}if(typeof t!="string")throw Error(L(284));if(!i._owner)throw Error(L(290,t))}return t}function on(t,r){if(t.type!=="textarea")throw Error(L(31,Object.prototype.toString.call(r)==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":r))}function Na(t){function r(T,E){if(t){var M=T.lastEffect;M!==null?(M.nextEffect=E,T.lastEffect=E):T.firstEffect=T.lastEffect=E,E.nextEffect=null,E.flags=8}}function i(T,E){if(!t)return null;for(;E!==null;)r(T,E),E=E.sibling;return null}function u(T,E){for(T=new Map;E!==null;)E.key!==null?T.set(E.key,E):T.set(E.index,E),E=E.sibling;return T}function d(T,E){return T=br(T,E),T.index=0,T.sibling=null,T}function p(T,E,M){return T.index=M,t?(M=T.alternate,M!==null?(M=M.index,M<E?(T.flags=2,E):M):(T.flags=2,E)):E}function _(T){return t&&T.alternate===null&&(T.flags=2),T}function C(T,E,M,W){return E===null||E.tag!==6?(E=io(M,T.mode,W),E.return=T,E):(E=d(E,M),E.return=T,E)}function A(T,E,M,W){return E!==null&&E.elementType===M.type?(W=d(E,M.props),W.ref=Pr(T,E,M),W.return=T,W):(W=ws(M.type,M.key,M.props,null,T.mode,W),W.ref=Pr(T,E,M),W.return=T,W)}function B(T,E,M,W){return E===null||E.tag!==4||E.stateNode.containerInfo!==M.containerInfo||E.stateNode.implementation!==M.implementation?(E=ao(M,T.mode,W),E.return=T,E):(E=d(E,M.children||[]),E.return=T,E)}function $(T,E,M,W,ee){return E===null||E.tag!==7?(E=si(M,T.mode,W,ee),E.return=T,E):(E=d(E,M),E.return=T,E)}function ne(T,E,M){if(typeof E=="string"||typeof E=="number")return E=io(""+E,T.mode,M),E.return=T,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case dt:return M=ws(E.type,E.key,E.props,null,T.mode,M),M.ref=Pr(T,null,E),M.return=T,M;case Ne:return E=ao(E,T.mode,M),E.return=T,E}if(Fn(E)||wn(E))return E=si(E,T.mode,M,null),E.return=T,E;on(T,E)}return null}function Y(T,E,M,W){var ee=E!==null?E.key:null;if(typeof M=="string"||typeof M=="number")return ee!==null?null:C(T,E,""+M,W);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case dt:return M.key===ee?M.type===Oe?$(T,E,M.props.children,W,ee):A(T,E,M,W):null;case Ne:return M.key===ee?B(T,E,M,W):null}if(Fn(M)||wn(M))return ee!==null?null:$(T,E,M,W,null);on(T,M)}return null}function Ee(T,E,M,W,ee){if(typeof W=="string"||typeof W=="number")return T=T.get(M)||null,C(E,T,""+W,ee);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case dt:return T=T.get(W.key===null?M:W.key)||null,W.type===Oe?$(E,T,W.props.children,ee,W.key):A(E,T,W,ee);case Ne:return T=T.get(W.key===null?M:W.key)||null,B(E,T,W,ee)}if(Fn(W)||wn(W))return T=T.get(M)||null,$(E,T,W,ee,null);on(E,W)}return null}function Te(T,E,M,W){for(var ee=null,ke=null,ae=E,ye=E=0,De=null;ae!==null&&ye<M.length;ye++){ae.index>ye?(De=ae,ae=null):De=ae.sibling;var ce=Y(T,ae,M[ye],W);if(ce===null){ae===null&&(ae=De);break}t&&ae&&ce.alternate===null&&r(T,ae),E=p(ce,E,ye),ke===null?ee=ce:ke.sibling=ce,ke=ce,ae=De}if(ye===M.length)return i(T,ae),ee;if(ae===null){for(;ye<M.length;ye++)ae=ne(T,M[ye],W),ae!==null&&(E=p(ae,E,ye),ke===null?ee=ae:ke.sibling=ae,ke=ae);return ee}for(ae=u(T,ae);ye<M.length;ye++)De=Ee(ae,T,ye,M[ye],W),De!==null&&(t&&De.alternate!==null&&ae.delete(De.key===null?ye:De.key),E=p(De,E,ye),ke===null?ee=De:ke.sibling=De,ke=De);return t&&ae.forEach(function(Fr){return r(T,Fr)}),ee}function Nt(T,E,M,W){var ee=wn(M);if(typeof ee!="function")throw Error(L(150));if(M=ee.call(M),M==null)throw Error(L(151));for(var ke=ee=null,ae=E,ye=E=0,De=null,ce=M.next();ae!==null&&!ce.done;ye++,ce=M.next()){ae.index>ye?(De=ae,ae=null):De=ae.sibling;var Fr=Y(T,ae,ce.value,W);if(Fr===null){ae===null&&(ae=De);break}t&&ae&&Fr.alternate===null&&r(T,ae),E=p(Fr,E,ye),ke===null?ee=Fr:ke.sibling=Fr,ke=Fr,ae=De}if(ce.done)return i(T,ae),ee;if(ae===null){for(;!ce.done;ye++,ce=M.next())ce=ne(T,ce.value,W),ce!==null&&(E=p(ce,E,ye),ke===null?ee=ce:ke.sibling=ce,ke=ce);return ee}for(ae=u(T,ae);!ce.done;ye++,ce=M.next())ce=Ee(ae,T,ye,ce.value,W),ce!==null&&(t&&ce.alternate!==null&&ae.delete(ce.key===null?ye:ce.key),E=p(ce,E,ye),ke===null?ee=ce:ke.sibling=ce,ke=ce);return t&&ae.forEach(function(So){return r(T,So)}),ee}return function(T,E,M,W){var ee=typeof M=="object"&&M!==null&&M.type===Oe&&M.key===null;ee&&(M=M.props.children);var ke=typeof M=="object"&&M!==null;if(ke)switch(M.$$typeof){case dt:e:{for(ke=M.key,ee=E;ee!==null;){if(ee.key===ke){switch(ee.tag){case 7:if(M.type===Oe){i(T,ee.sibling),E=d(ee,M.props.children),E.return=T,T=E;break e}break;default:if(ee.elementType===M.type){i(T,ee.sibling),E=d(ee,M.props),E.ref=Pr(T,ee,M),E.return=T,T=E;break e}}i(T,ee);break}else r(T,ee);ee=ee.sibling}M.type===Oe?(E=si(M.props.children,T.mode,W,M.key),E.return=T,T=E):(W=ws(M.type,M.key,M.props,null,T.mode,W),W.ref=Pr(T,E,M),W.return=T,T=W)}return _(T);case Ne:e:{for(ee=M.key;E!==null;){if(E.key===ee)if(E.tag===4&&E.stateNode.containerInfo===M.containerInfo&&E.stateNode.implementation===M.implementation){i(T,E.sibling),E=d(E,M.children||[]),E.return=T,T=E;break e}else{i(T,E);break}else r(T,E);E=E.sibling}E=ao(M,T.mode,W),E.return=T,T=E}return _(T)}if(typeof M=="string"||typeof M=="number")return M=""+M,E!==null&&E.tag===6?(i(T,E.sibling),E=d(E,M),E.return=T,T=E):(i(T,E),E=io(M,T.mode,W),E.return=T,T=E),_(T);if(Fn(M))return Te(T,E,M,W);if(wn(M))return Nt(T,E,M,W);if(ke&&on(T,M),typeof M=="undefined"&&!ee)switch(T.tag){case 1:case 22:case 0:case 11:case 15:throw Error(L(152,O(T.type)||"Component"))}return i(T,E)}}var Bn=Na(!0),Oa=Na(!1),ln={},lt=Xt(ln),kr=Xt(ln),Tr=Xt(ln);function ht(t){if(t===ln)throw Error(L(174));return t}function Ii(t,r){Ce(Tr,r),Ce(kr,t),Ce(lt,ln),t=xs(r),_e(lt),Ce(lt,t)}function Rr(){_e(lt),_e(kr),_e(Tr)}function Ga(t){var r=ht(Tr.current),i=ht(lt.current);r=Vr(i,t.type,r),i!==r&&(Ce(kr,t),Ce(lt,r))}function Ni(t){kr.current===t&&(_e(lt),_e(kr))}var Pe=Xt(0);function hn(t){for(var r=t;r!==null;){if(r.tag===13){var i=r.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||Jr(i)||Ns(i)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&64)!=0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var zt=null,hr=null,ut=!1;function Hn(t,r){var i=It(5,null,null,0);i.elementType="DELETED",i.type="DELETED",i.stateNode=r,i.return=t,i.flags=8,t.lastEffect!==null?(t.lastEffect.nextEffect=i,t.lastEffect=i):t.firstEffect=t.lastEffect=i}function Da(t,r){switch(t.tag){case 5:return r=ma(r,t.type,t.pendingProps),r!==null?(t.stateNode=r,!0):!1;case 6:return r=_a(r,t.pendingProps),r!==null?(t.stateNode=r,!0):!1;case 13:return!1;default:return!1}}function Oi(t){if(ut){var r=hr;if(r){var i=r;if(!Da(t,r)){if(r=yi(i),!r||!Da(t,r)){t.flags=t.flags&-1025|2,ut=!1,zt=t;return}Hn(zt,i)}zt=t,hr=Si(r)}else t.flags=t.flags&-1025|2,ut=!1,zt=t}}function za(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;zt=t}function Se(t){if(!je||t!==zt)return!1;if(!ut)return za(t),ut=!0,!1;var r=t.type;if(t.tag!==5||r!=="head"&&r!=="body"&&!fi(r,t.memoizedProps))for(r=hr;r;)Hn(t,r),r=yi(r);if(za(t),t.tag===13){if(!je)throw Error(L(316));if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(L(317));hr=Sa(t)}else hr=zt?yi(t.stateNode):null;return!0}function Gi(){je&&(hr=zt=null,ut=!1)}var ur=[];function Un(){for(var t=0;t<ur.length;t++){var r=ur[t];Ht?r._workInProgressVersionPrimary=null:r._workInProgressVersionSecondary=null}ur.length=0}var Ar=nt.ReactCurrentDispatcher,ge=nt.ReactCurrentBatchConfig,Mr=0,Re=null,be=null,Fe=null,Wn=!1,un=!1;function Ze(){throw Error(L(321))}function Lr(t,r){if(r===null)return!1;for(var i=0;i<r.length&&i<t.length;i++)if(!Me(t[i],r[i]))return!1;return!0}function Yn(t,r,i,u,d,p){if(Mr=p,Re=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Ar.current=t===null||t.memoizedState===null?cn:Us,t=i(u,d),un){p=0;do{if(un=!1,!(25>p))throw Error(L(301));p+=1,Fe=be=null,r.updateQueue=null,Ar.current=Ws,t=i(u,d)}while(un)}if(Ar.current=fr,r=be!==null&&be.next!==null,Mr=0,Fe=be=Re=null,Wn=!1,r)throw Error(L(300));return t}function dr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fe===null?Re.memoizedState=Fe=t:Fe=Fe.next=t,Fe}function $t(){if(be===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=be.next;var r=Fe===null?Re.memoizedState:Fe.next;if(r!==null)Fe=r,be=t;else{if(t===null)throw Error(L(310));be=t,t={memoizedState:be.memoizedState,baseState:be.baseState,baseQueue:be.baseQueue,queue:be.queue,next:null},Fe===null?Re.memoizedState=Fe=t:Fe=Fe.next=t}return Fe}function At(t,r){return typeof r=="function"?r(t):r}function dn(t){var r=$t(),i=r.queue;if(i===null)throw Error(L(311));i.lastRenderedReducer=t;var u=be,d=u.baseQueue,p=i.pending;if(p!==null){if(d!==null){var _=d.next;d.next=p.next,p.next=_}u.baseQueue=d=p,i.pending=null}if(d!==null){d=d.next,u=u.baseState;var C=_=p=null,A=d;do{var B=A.lane;if((Mr&B)===B)C!==null&&(C=C.next={lane:0,action:A.action,eagerReducer:A.eagerReducer,eagerState:A.eagerState,next:null}),u=A.eagerReducer===t?A.eagerState:t(u,A.action);else{var $={lane:B,action:A.action,eagerReducer:A.eagerReducer,eagerState:A.eagerState,next:null};C===null?(_=C=$,p=u):C=C.next=$,Re.lanes|=B,ii|=B}A=A.next}while(A!==null&&A!==d);C===null?p=u:C.next=_,Me(u,r.memoizedState)||(St=!0),r.memoizedState=u,r.baseState=p,r.baseQueue=C,i.lastRenderedState=u}return[r.memoizedState,i.dispatch]}function ue(t){var r=$t(),i=r.queue;if(i===null)throw Error(L(311));i.lastRenderedReducer=t;var u=i.dispatch,d=i.pending,p=r.memoizedState;if(d!==null){i.pending=null;var _=d=d.next;do p=t(p,_.action),_=_.next;while(_!==d);Me(p,r.memoizedState)||(St=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),i.lastRenderedState=p}return[p,u]}function ba(t,r,i){var u=r._getVersion;u=u(r._source);var d=Ht?r._workInProgressVersionPrimary:r._workInProgressVersionSecondary;if(d!==null?t=d===u:(t=t.mutableReadLanes,(t=(Mr&t)===t)&&(Ht?r._workInProgressVersionPrimary=u:r._workInProgressVersionSecondary=u,ur.push(r))),t)return i(r._source);throw ur.push(r),Error(L(350))}function Mt(t,r,i,u){var d=et;if(d===null)throw Error(L(349));var p=r._getVersion,_=p(r._source),C=Ar.current,A=C.useState(function(){return ba(d,r,i)}),B=A[1],$=A[0];A=Fe;var ne=t.memoizedState,Y=ne.refs,Ee=Y.getSnapshot,Te=ne.source;ne=ne.subscribe;var Nt=Re;return t.memoizedState={refs:Y,source:r,subscribe:u},C.useEffect(function(){Y.getSnapshot=i,Y.setSnapshot=B;var T=p(r._source);if(!Me(_,T)){T=i(r._source),Me($,T)||(B(T),T=g(Nt),d.mutableReadLanes|=T&d.pendingLanes),T=d.mutableReadLanes,d.entangledLanes|=T;for(var E=d.entanglements,M=T;0<M;){var W=31-Kt(M),ee=1<<W;E[W]|=T,M&=~ee}}},[i,r,u]),C.useEffect(function(){return u(r._source,function(){var T=Y.getSnapshot,E=Y.setSnapshot;try{E(T(r._source));var M=g(Nt);d.mutableReadLanes|=M&d.pendingLanes}catch(W){E(function(){throw W})}})},[r,u]),Me(Ee,i)&&Me(Te,r)&&Me(ne,u)||(t={pending:null,dispatch:null,lastRenderedReducer:At,lastRenderedState:$},t.dispatch=B=Bi.bind(null,Re,t),A.queue=t,A.baseQueue=null,$=ba(d,r,i),A.memoizedState=A.baseState=$),$}function Di(t,r,i){var u=$t();return Mt(u,t,r,i)}function fn(t){var r=dr();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t=r.queue={pending:null,dispatch:null,lastRenderedReducer:At,lastRenderedState:t},t=t.dispatch=Bi.bind(null,Re,t),[r.memoizedState,t]}function Xn(t,r,i,u){return t={tag:t,create:r,destroy:i,deps:u,next:null},r=Re.updateQueue,r===null?(r={lastEffect:null},Re.updateQueue=r,r.lastEffect=t.next=t):(i=r.lastEffect,i===null?r.lastEffect=t.next=t:(u=i.next,i.next=t,t.next=u,r.lastEffect=t)),t}function Fa(t){var r=dr();return t={current:t},r.memoizedState=t}function Vn(){return $t().memoizedState}function zi(t,r,i,u){var d=dr();Re.flags|=t,d.memoizedState=Xn(1|r,i,void 0,u===void 0?null:u)}function bi(t,r,i,u){var d=$t();u=u===void 0?null:u;var p=void 0;if(be!==null){var _=be.memoizedState;if(p=_.destroy,u!==null&&Lr(u,_.deps)){Xn(r,i,p,u);return}}Re.flags|=t,d.memoizedState=Xn(1|r,i,p,u)}function Ba(t,r){return zi(516,4,t,r)}function Ir(t,r){return bi(516,4,t,r)}function Ha(t,r){return bi(4,2,t,r)}function Ua(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Wa(t,r,i){return i=i!=null?i.concat([t]):null,bi(4,2,Ua.bind(null,r,t),i)}function Fi(){}function Ya(t,r){var i=$t();r=r===void 0?null:r;var u=i.memoizedState;return u!==null&&r!==null&&Lr(r,u[1])?u[0]:(i.memoizedState=[t,r],t)}function Xa(t,r){var i=$t();r=r===void 0?null:r;var u=i.memoizedState;return u!==null&&r!==null&&Lr(r,u[1])?u[0]:(t=t(),i.memoizedState=[t,r],t)}function Hs(t,r){var i=lr();kt(98>i?98:i,function(){t(!0)}),kt(97<i?97:i,function(){var u=ge.transition;ge.transition=1;try{t(!1),r()}finally{ge.transition=u}})}function Bi(t,r,i){var u=c(),d=g(t),p={lane:d,action:i,eagerReducer:null,eagerState:null,next:null},_=r.pending;if(_===null?p.next=p:(p.next=_.next,_.next=p),r.pending=p,_=t.alternate,t===Re||_!==null&&_===Re)un=Wn=!0;else{if(t.lanes===0&&(_===null||_.lanes===0)&&(_=r.lastRenderedReducer,_!==null))try{var C=r.lastRenderedState,A=_(C,i);if(p.eagerReducer=_,p.eagerState=A,Me(A,C))return}catch(B){}finally{}v(t,d,u)}}var fr={readContext:qe,useCallback:Ze,useContext:Ze,useEffect:Ze,useImperativeHandle:Ze,useLayoutEffect:Ze,useMemo:Ze,useReducer:Ze,useRef:Ze,useState:Ze,useDebugValue:Ze,useDeferredValue:Ze,useTransition:Ze,useMutableSource:Ze,useOpaqueIdentifier:Ze,unstable_isNewReconciler:!1},cn={readContext:qe,useCallback:function(t,r){return dr().memoizedState=[t,r===void 0?null:r],t},useContext:qe,useEffect:Ba,useImperativeHandle:function(t,r,i){return i=i!=null?i.concat([t]):null,zi(4,2,Ua.bind(null,r,t),i)},useLayoutEffect:function(t,r){return zi(4,2,t,r)},useMemo:function(t,r){var i=dr();return r=r===void 0?null:r,t=t(),i.memoizedState=[t,r],t},useReducer:function(t,r,i){var u=dr();return r=i!==void 0?i(r):r,u.memoizedState=u.baseState=r,t=u.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},t=t.dispatch=Bi.bind(null,Re,t),[u.memoizedState,t]},useRef:Fa,useState:fn,useDebugValue:Fi,useDeferredValue:function(t){var r=fn(t),i=r[0],u=r[1];return Ba(function(){var d=ge.transition;ge.transition=1;try{u(t)}finally{ge.transition=d}},[t]),i},useTransition:function(){var t=fn(!1),r=t[0];return t=Hs.bind(null,t[1]),Fa(t),[t,r]},useMutableSource:function(t,r,i){var u=dr();return u.memoizedState={refs:{getSnapshot:r,setSnapshot:null},source:t,subscribe:i},Mt(u,t,r,i)},useOpaqueIdentifier:function(){if(ut){var t=!1,r=Ts(function(){throw t||(t=!0,i(mr())),Error(L(355))}),i=fn(r)[1];return(Re.mode&2)==0&&(Re.flags|=516,Xn(5,function(){i(mr())},void 0,null)),r}return r=mr(),fn(r),r},unstable_isNewReconciler:!1},Us={readContext:qe,useCallback:Ya,useContext:qe,useEffect:Ir,useImperativeHandle:Wa,useLayoutEffect:Ha,useMemo:Xa,useReducer:dn,useRef:Vn,useState:function(){return dn(At)},useDebugValue:Fi,useDeferredValue:function(t){var r=dn(At),i=r[0],u=r[1];return Ir(function(){var d=ge.transition;ge.transition=1;try{u(t)}finally{ge.transition=d}},[t]),i},useTransition:function(){var t=dn(At)[0];return[Vn().current,t]},useMutableSource:Di,useOpaqueIdentifier:function(){return dn(At)[0]},unstable_isNewReconciler:!1},Ws={readContext:qe,useCallback:Ya,useContext:qe,useEffect:Ir,useImperativeHandle:Wa,useLayoutEffect:Ha,useMemo:Xa,useReducer:ue,useRef:Vn,useState:function(){return ue(At)},useDebugValue:Fi,useDeferredValue:function(t){var r=ue(At),i=r[0],u=r[1];return Ir(function(){var d=ge.transition;ge.transition=1;try{u(t)}finally{ge.transition=d}},[t]),i},useTransition:function(){var t=ue(At)[0];return[Vn().current,t]},useMutableSource:Di,useOpaqueIdentifier:function(){return ue(At)[0]},unstable_isNewReconciler:!1},Ys=nt.ReactCurrentOwner,St=!1;function $e(t,r,i,u){r.child=t===null?Oa(r,null,i,u):Bn(r,t.child,i,u)}function Va(t,r,i,u,d){i=i.render;var p=r.ref;return qt(r,d),u=Yn(t,r,i,u,p,d),t!==null&&!St?(r.updateQueue=t.updateQueue,r.flags&=-517,t.lanes&=~d,Lt(t,r,d)):(r.flags|=1,$e(t,r,u,d),r.child)}function ja(t,r,i,u,d,p){if(t===null){var _=i.type;return typeof _=="function"&&!ro(_)&&_.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(r.tag=15,r.type=_,Ka(t,r,_,u,d,p)):(t=ws(i.type,null,u,r,r.mode,p),t.ref=r.ref,t.return=r,r.child=t)}return _=t.child,(d&p)==0&&(d=_.memoizedProps,i=i.compare,i=i!==null?i:nn,i(d,u)&&t.ref===r.ref)?Lt(t,r,p):(r.flags|=1,t=br(_,u),t.ref=r.ref,t.return=r,r.child=t)}function Ka(t,r,i,u,d,p){if(t!==null&&nn(t.memoizedProps,u)&&t.ref===r.ref)if(St=!1,(p&d)!=0)(t.flags&16384)!=0&&(St=!0);else return r.lanes=t.lanes,Lt(t,r,p);return Ui(t,r,i,u,p)}function Hi(t,r,i){var u=r.pendingProps,d=u.children,p=t!==null?t.memoizedState:null;if(u.mode==="hidden"||u.mode==="unstable-defer-without-hiding")if((r.mode&4)==0)r.memoizedState={baseLanes:0},N(r,i);else if((i&1073741824)!=0)r.memoizedState={baseLanes:0},N(r,p!==null?p.baseLanes:i);else return t=p!==null?p.baseLanes|i:i,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t},N(r,t),null;else p!==null?(u=p.baseLanes|i,r.memoizedState=null):u=i,N(r,u);return $e(t,r,d,i),r.child}function Qa(t,r){var i=r.ref;(t===null&&i!==null||t!==null&&t.ref!==i)&&(r.flags|=128)}function Ui(t,r,i,u,d){var p=We(i)?Vt:Le.current;return p=sr(r,p),qt(r,d),i=Yn(t,r,i,u,p,d),t!==null&&!St?(r.updateQueue=t.updateQueue,r.flags&=-517,t.lanes&=~d,Lt(t,r,d)):(r.flags|=1,$e(t,r,i,d),r.child)}function qa(t,r,i,u,d){if(We(i)){var p=!0;In(r)}else p=!1;if(qt(r,d),r.stateNode===null)t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2),Ia(r,i,u),Li(r,i,u,d),u=!0;else if(t===null){var _=r.stateNode,C=r.memoizedProps;_.props=C;var A=_.context,B=i.contextType;typeof B=="object"&&B!==null?B=qe(B):(B=We(i)?Vt:Le.current,B=sr(r,B));var $=i.getDerivedStateFromProps,ne=typeof $=="function"||typeof _.getSnapshotBeforeUpdate=="function";ne||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(C!==u||A!==B)&&Er(r,_,u,B),Rt=!1;var Y=r.memoizedState;_.state=Y,xr(r,u,_,d),A=r.memoizedState,C!==u||Y!==A||Be.current||Rt?(typeof $=="function"&&(yt(r,i,$,u),A=r.memoizedState),(C=Rt||sn(r,i,C,u,Y,A,B))?(ne||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4)):(typeof _.componentDidMount=="function"&&(r.flags|=4),r.memoizedProps=u,r.memoizedState=A),_.props=u,_.state=A,_.context=B,u=C):(typeof _.componentDidMount=="function"&&(r.flags|=4),u=!1)}else{_=r.stateNode,bn(t,r),C=r.memoizedProps,B=r.type===r.elementType?C:le(r.type,C),_.props=B,ne=r.pendingProps,Y=_.context,A=i.contextType,typeof A=="object"&&A!==null?A=qe(A):(A=We(i)?Vt:Le.current,A=sr(r,A));var Ee=i.getDerivedStateFromProps;($=typeof Ee=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(C!==ne||Y!==A)&&Er(r,_,u,A),Rt=!1,Y=r.memoizedState,_.state=Y,xr(r,u,_,d);var Te=r.memoizedState;C!==ne||Y!==Te||Be.current||Rt?(typeof Ee=="function"&&(yt(r,i,Ee,u),Te=r.memoizedState),(B=Rt||sn(r,i,B,u,Y,Te,A))?($||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,Te,A),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,Te,A)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=256)):(typeof _.componentDidUpdate!="function"||C===t.memoizedProps&&Y===t.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===t.memoizedProps&&Y===t.memoizedState||(r.flags|=256),r.memoizedProps=u,r.memoizedState=Te),_.props=u,_.state=Te,_.context=A,u=B):(typeof _.componentDidUpdate!="function"||C===t.memoizedProps&&Y===t.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===t.memoizedProps&&Y===t.memoizedState||(r.flags|=256),u=!1)}return Wi(t,r,i,u,p,d)}function Wi(t,r,i,u,d,p){Qa(t,r);var _=(r.flags&64)!=0;if(!u&&!_)return d&&Nn(r,i,!1),Lt(t,r,p);u=r.stateNode,Ys.current=r;var C=_&&typeof i.getDerivedStateFromError!="function"?null:u.render();return r.flags|=1,t!==null&&_?(r.child=Bn(r,t.child,null,p),r.child=Bn(r,null,C,p)):$e(t,r,C,p),r.memoizedState=u.state,d&&Nn(r,i,!0),r.child}function Ja(t){var r=t.stateNode;r.pendingContext?Ln(t,r.pendingContext,r.pendingContext!==r.context):r.context&&Ln(t,r.context,!1),Ii(t,r.containerInfo)}var jn={dehydrated:null,retryLane:0};function Xs(t,r,i){var u=r.pendingProps,d=Pe.current,p=!1,_;return(_=(r.flags&64)!=0)||(_=t!==null&&t.memoizedState===null?!1:(d&2)!=0),_?(p=!0,r.flags&=-65):t!==null&&t.memoizedState===null||u.fallback===void 0||u.unstable_avoidThisFallback===!0||(d|=1),Ce(Pe,d&1),t===null?(u.fallback!==void 0&&Oi(r),t=u.children,d=u.fallback,p?(t=Vs(r,t,d,i),r.child.memoizedState={baseLanes:i},r.memoizedState=jn,t):typeof u.unstable_expectedLoadTime=="number"?(t=Vs(r,t,d,i),r.child.memoizedState={baseLanes:i},r.memoizedState=jn,r.lanes=33554432,t):(i=no({mode:"visible",children:t},r.mode,i,null),i.return=r,r.child=i)):t.memoizedState!==null?p?(u=Nr(t,r,u.children,u.fallback,i),p=r.child,d=t.child.memoizedState,p.memoizedState=d===null?{baseLanes:i}:{baseLanes:d.baseLanes|i},p.childLanes=t.childLanes&~i,r.memoizedState=jn,u):(i=gt(t,r,u.children,i),r.memoizedState=null,i):p?(u=Nr(t,r,u.children,u.fallback,i),p=r.child,d=t.child.memoizedState,p.memoizedState=d===null?{baseLanes:i}:{baseLanes:d.baseLanes|i},p.childLanes=t.childLanes&~i,r.memoizedState=jn,u):(i=gt(t,r,u.children,i),r.memoizedState=null,i)}function Vs(t,r,i,u){var d=t.mode,p=t.child;return r={mode:"hidden",children:r},(d&2)==0&&p!==null?(p.childLanes=0,p.pendingProps=r):p=no(r,d,0,null),i=si(i,d,u,null),p.return=t,i.return=t,p.sibling=i,t.child=p,i}function gt(t,r,i,u){var d=t.child;return t=d.sibling,i=br(d,{mode:"visible",children:i}),(r.mode&2)==0&&(i.lanes=u),i.return=r,i.sibling=null,t!==null&&(t.nextEffect=null,t.flags=8,r.firstEffect=r.lastEffect=t),r.child=i}function Nr(t,r,i,u,d){var p=r.mode,_=t.child;t=_.sibling;var C={mode:"hidden",children:i};return(p&2)==0&&r.child!==_?(i=r.child,i.childLanes=0,i.pendingProps=C,_=i.lastEffect,_!==null?(r.firstEffect=i.firstEffect,r.lastEffect=_,_.nextEffect=null):r.firstEffect=r.lastEffect=null):i=br(_,C),t!==null?u=br(t,u):(u=si(u,p,d,null),u.flags|=2),u.return=r,i.return=r,i.sibling=u,r.child=i,u}function Za(t,r){t.lanes|=r;var i=t.alternate;i!==null&&(i.lanes|=r),zn(t.return,r)}function Yi(t,r,i,u,d,p){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:i,tailMode:d,lastEffect:p}:(_.isBackwards=r,_.rendering=null,_.renderingStartTime=0,_.last=u,_.tail=i,_.tailMode=d,_.lastEffect=p)}function Xi(t,r,i){var u=r.pendingProps,d=u.revealOrder,p=u.tail;if($e(t,r,u.children,i),u=Pe.current,(u&2)!=0)u=u&1|2,r.flags|=64;else{if(t!==null&&(t.flags&64)!=0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Za(t,i);else if(t.tag===19)Za(t,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if(Ce(Pe,u),(r.mode&2)==0)r.memoizedState=null;else switch(d){case"forwards":for(i=r.child,d=null;i!==null;)t=i.alternate,t!==null&&hn(t)===null&&(d=i),i=i.sibling;i=d,i===null?(d=r.child,r.child=null):(d=i.sibling,i.sibling=null),Yi(r,!1,d,i,p,r.lastEffect);break;case"backwards":for(i=null,d=r.child,r.child=null;d!==null;){if(t=d.alternate,t!==null&&hn(t)===null){r.child=d;break}t=d.sibling,d.sibling=i,i=d,d=t}Yi(r,!0,i,null,p,r.lastEffect);break;case"together":Yi(r,!1,null,null,void 0,r.lastEffect);break;default:r.memoizedState=null}return r.child}function Lt(t,r,i){if(t!==null&&(r.dependencies=t.dependencies),ii|=r.lanes,(i&r.childLanes)!=0){if(t!==null&&r.child!==t.child)throw Error(L(153));if(r.child!==null){for(t=r.child,i=br(t,t.pendingProps),r.child=i,i.return=r;t.sibling!==null;)t=t.sibling,i=i.sibling=br(t,t.pendingProps),i.return=r;i.sibling=null}return r.child}return null}function wt(t){t.flags|=4}var cr,Or,Vi,Kn;if(pt)cr=function(t,r){for(var i=r.child;i!==null;){if(i.tag===5||i.tag===6)xn(t,i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},Or=function(){},Vi=function(t,r,i,u,d){if(t=t.memoizedProps,t!==u){var p=r.stateNode,_=ht(lt.current);i=la(p,i,t,u,d,_),(r.updateQueue=i)&&wt(r)}},Kn=function(t,r,i,u){i!==u&&wt(r)};else if(Kr){cr=function(t,r,i,u){for(var d=r.child;d!==null;){if(d.tag===5){var p=d.stateNode;i&&u&&(p=Rn(p,d.type,d.memoizedProps,d)),xn(t,p)}else if(d.tag===6)p=d.stateNode,i&&u&&(p=An(p,d.memoizedProps,d)),xn(t,p);else if(d.tag!==4){if(d.tag===13&&(d.flags&4)!=0&&(p=d.memoizedState!==null)){var _=d.child;if(_!==null&&(_.child!==null&&(_.child.return=_,cr(t,_,!0,p)),p=_.sibling,p!==null)){p.return=d,d=p;continue}}if(d.child!==null){d.child.return=d,d=d.child;continue}}if(d===r)break;for(;d.sibling===null;){if(d.return===null||d.return===r)return;d=d.return}d.sibling.return=d.return,d=d.sibling}};var $a=function(t,r,i,u){for(var d=r.child;d!==null;){if(d.tag===5){var p=d.stateNode;i&&u&&(p=Rn(p,d.type,d.memoizedProps,d)),Ke(t,p)}else if(d.tag===6)p=d.stateNode,i&&u&&(p=An(p,d.memoizedProps,d)),Ke(t,p);else if(d.tag!==4){if(d.tag===13&&(d.flags&4)!=0&&(p=d.memoizedState!==null)){var _=d.child;if(_!==null&&(_.child!==null&&(_.child.return=_,$a(t,_,!0,p)),p=_.sibling,p!==null)){p.return=d,d=p;continue}}if(d.child!==null){d.child.return=d,d=d.child;continue}}if(d===r)break;for(;d.sibling===null;){if(d.return===null||d.return===r)return;d=d.return}d.sibling.return=d.return,d=d.sibling}};Or=function(t){var r=t.stateNode;if(t.firstEffect!==null){var i=r.containerInfo,u=me(i);$a(u,t,!1,!1),r.pendingChildren=u,wt(t),qr(i,u)}},Vi=function(t,r,i,u,d){var p=t.stateNode,_=t.memoizedProps;if((t=r.firstEffect===null)&&_===u)r.stateNode=p;else{var C=r.stateNode,A=ht(lt.current),B=null;_!==u&&(B=la(C,i,_,u,d,A)),t&&B===null?r.stateNode=p:(p=z(p,B,i,_,u,r,t,C),oa(p,i,u,d,A)&&wt(r),r.stateNode=p,t?wt(r):cr(p,r,!1,!1))}},Kn=function(t,r,i,u){i!==u?(t=ht(Tr.current),i=ht(lt.current),r.stateNode=ha(u,t,i,r),wt(r)):r.stateNode=t.stateNode}}else Or=function(){},Vi=function(){},Kn=function(){};function gn(t,r){if(!ut)switch(t.tailMode){case"hidden":r=t.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var u=null;i!==null;)i.alternate!==null&&(u=i),i=i.sibling;u===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function Qn(t,r,i){var u=r.pendingProps;switch(r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return We(r.type)&&Zr(),null;case 3:return Rr(),_e(Be),_e(Le),Un(),u=r.stateNode,u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(t===null||t.child===null)&&(Se(r)?wt(r):u.hydrate||(r.flags|=256)),Or(r),null;case 5:Ni(r);var d=ht(Tr.current);if(i=r.type,t!==null&&r.stateNode!=null)Vi(t,r,i,u,d),t.ref!==r.ref&&(r.flags|=128);else{if(!u){if(r.stateNode===null)throw Error(L(166));return null}if(t=ht(lt.current),Se(r)){if(!je)throw Error(L(175));t=Os(r.stateNode,r.type,r.memoizedProps,d,t,r),r.updateQueue=t,t!==null&&wt(r)}else{var p=Es(i,u,d,t,r);cr(p,r,!1,!1),r.stateNode=p,oa(p,i,u,d,t)&&wt(r)}r.ref!==null&&(r.flags|=128)}return null;case 6:if(t&&r.stateNode!=null)Kn(t,r,t.memoizedProps,u);else{if(typeof u!="string"&&r.stateNode===null)throw Error(L(166));if(t=ht(Tr.current),d=ht(lt.current),Se(r)){if(!je)throw Error(L(176));ya(r.stateNode,r.memoizedProps,r)&&wt(r)}else r.stateNode=ha(u,t,d,r)}return null;case 13:return _e(Pe),u=r.memoizedState,(r.flags&64)!=0?(r.lanes=i,r):(u=u!==null,d=!1,t===null?r.memoizedProps.fallback!==void 0&&Se(r):d=t.memoizedState!==null,u&&!d&&(r.mode&2)!=0&&(t===null&&r.memoizedProps.unstable_avoidThisFallback!==!0||(Pe.current&1)!=0?He===0&&(He=3):((He===0||He===3)&&(He=4),et===null||(ii&134217727)==0&&(zr&134217727)==0||S(et,Xe))),Kr&&u&&(r.flags|=4),pt&&(u||d)&&(r.flags|=4),null);case 4:return Rr(),Or(r),t===null&&_r(r.stateNode.containerInfo),null;case 10:return Ai(r),null;case 17:return We(r.type)&&Zr(),null;case 19:if(_e(Pe),u=r.memoizedState,u===null)return null;if(d=(r.flags&64)!=0,p=u.rendering,p===null)if(d)gn(u,!1);else{if(He!==0||t!==null&&(t.flags&64)!=0)for(t=r.child;t!==null;){if(p=hn(t),p!==null){for(r.flags|=64,gn(u,!1),t=p.updateQueue,t!==null&&(r.updateQueue=t,r.flags|=4),u.lastEffect===null&&(r.firstEffect=null),r.lastEffect=u.lastEffect,t=i,u=r.child;u!==null;)d=u,i=t,d.flags&=2,d.nextEffect=null,d.firstEffect=null,d.lastEffect=null,p=d.alternate,p===null?(d.childLanes=0,d.lanes=i,d.child=null,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=p.childLanes,d.lanes=p.lanes,d.child=p.child,d.memoizedProps=p.memoizedProps,d.memoizedState=p.memoizedState,d.updateQueue=p.updateQueue,d.type=p.type,i=p.dependencies,d.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return Ce(Pe,Pe.current&1|2),r.child}t=t.sibling}u.tail!==null&&Ge()>vs&&(r.flags|=64,d=!0,gn(u,!1),r.lanes=33554432)}else{if(!d)if(t=hn(p),t!==null){if(r.flags|=64,d=!0,t=t.updateQueue,t!==null&&(r.updateQueue=t,r.flags|=4),gn(u,!0),u.tail===null&&u.tailMode==="hidden"&&!p.alternate&&!ut)return r=r.lastEffect=u.lastEffect,r!==null&&(r.nextEffect=null),null}else 2*Ge()-u.renderingStartTime>vs&&i!==1073741824&&(r.flags|=64,d=!0,gn(u,!1),r.lanes=33554432);u.isBackwards?(p.sibling=r.child,r.child=p):(t=u.last,t!==null?t.sibling=p:r.child=p,u.last=p)}return u.tail!==null?(t=u.tail,u.rendering=t,u.tail=t.sibling,u.lastEffect=r.lastEffect,u.renderingStartTime=Ge(),t.sibling=null,r=Pe.current,Ce(Pe,d?r&1|2:r&1),t):null;case 23:case 24:return b(),t!==null&&t.memoizedState!==null!=(r.memoizedState!==null)&&u.mode!=="unstable-defer-without-hiding"&&(r.flags|=4),null}throw Error(L(156,r.tag))}function er(t){switch(t.tag){case 1:We(t.type)&&Zr();var r=t.flags;return r&4096?(t.flags=r&-4097|64,t):null;case 3:if(Rr(),_e(Be),_e(Le),Un(),r=t.flags,(r&64)!=0)throw Error(L(285));return t.flags=r&-4097|64,t;case 5:return Ni(t),null;case 13:return _e(Pe),r=t.flags,r&4096?(t.flags=r&-4097|64,t):null;case 19:return _e(Pe),null;case 4:return Rr(),null;case 10:return Ai(t),null;case 23:case 24:return b(),null;default:return null}}function pn(t,r){try{var i="",u=r;do i+=Gt(u),u=u.return;while(u);var d=i}catch(p){d=`
Error generating stack: `+p.message+`
`+p.stack}return{value:t,source:r,stack:d}}function qn(t,r){try{console.error(r.value)}catch(i){setTimeout(function(){throw i})}}var js=typeof WeakMap=="function"?WeakMap:Map;function es(t,r,i){i=Je(-1,i),i.tag=3,i.payload={element:null};var u=r.value;return i.callback=function(){ia||(ia=!0,ms=u),qn(t,r)},i}function ts(t,r,i){i=Je(-1,i),i.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var d=r.value;i.payload=function(){return qn(t,r),u(d)}}var p=t.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(i.callback=function(){typeof u!="function"&&(bt===null?bt=new Set([this]):bt.add(this),qn(t,r));var _=r.stack;this.componentDidCatch(r.value,{componentStack:_!==null?_:""})}),i}var Ks=typeof WeakSet=="function"?WeakSet:Set;function rs(t){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){ve(t,i)}else r.current=null}function Qs(t,r){switch(r.tag){case 0:case 11:case 15:case 22:return;case 1:if(r.flags&256&&t!==null){var i=t.memoizedProps,u=t.memoizedState;t=r.stateNode,r=t.getSnapshotBeforeUpdate(r.elementType===r.type?i:le(r.type,i),u),t.__reactInternalSnapshotBeforeUpdate=r}return;case 3:pt&&r.flags&256&&mi(r.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(L(163))}function ns(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var u=i.destroy;i.destroy=void 0,u!==void 0&&u()}i=i.next}while(i!==r)}}function qs(t,r,i){switch(i.tag){case 0:case 11:case 15:case 22:if(r=i.updateQueue,r=r!==null?r.lastEffect:null,r!==null){t=r=r.next;do{if((t.tag&3)==3){var u=t.create;t.destroy=u()}t=t.next}while(t!==r)}if(r=i.updateQueue,r=r!==null?r.lastEffect:null,r!==null){t=r=r.next;do{var d=t;u=d.next,d=d.tag,(d&4)!=0&&(d&1)!=0&&(Ve(i,t),Ae(i,t)),t=u}while(t!==r)}return;case 1:t=i.stateNode,i.flags&4&&(r===null?t.componentDidMount():(u=i.elementType===i.type?r.memoizedProps:le(i.type,r.memoizedProps),t.componentDidUpdate(u,r.memoizedState,t.__reactInternalSnapshotBeforeUpdate))),r=i.updateQueue,r!==null&&Zt(i,r,t);return;case 3:if(r=i.updateQueue,r!==null){if(t=null,i.child!==null)switch(i.child.tag){case 5:t=at(i.child.stateNode);break;case 1:t=i.child.stateNode}Zt(i,r,t)}return;case 5:t=i.stateNode,r===null&&i.flags&4&&ca(t,i.type,i.memoizedProps,i);return;case 6:return;case 4:return;case 12:return;case 13:je&&i.memoizedState===null&&(i=i.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&wa(i))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(L(163))}function is(t,r){if(pt)for(var i=t;;){if(i.tag===5){var u=i.stateNode;r?Ut(u):vi(i.stateNode,i.memoizedProps)}else if(i.tag===6)u=i.stateNode,r?Ls(u):Is(u,i.memoizedProps);else if((i.tag!==23&&i.tag!==24||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function as(t,r){if(ft&&typeof ft.onCommitFiberUnmount=="function")try{ft.onCommitFiberUnmount(or,r)}catch(p){}switch(r.tag){case 0:case 11:case 14:case 15:case 22:if(t=r.updateQueue,t!==null&&(t=t.lastEffect,t!==null)){var i=t=t.next;do{var u=i,d=u.destroy;if(u=u.tag,d!==void 0)if((u&4)!=0)Ve(r,i);else{u=r;try{d()}catch(p){ve(u,p)}}i=i.next}while(i!==t)}break;case 1:if(rs(r),t=r.stateNode,typeof t.componentWillUnmount=="function")try{t.props=r.memoizedProps,t.state=r.memoizedState,t.componentWillUnmount()}catch(p){ve(r,p)}break;case 5:rs(r);break;case 4:pt?us(t,r):Kr&&Kr&&(r=r.stateNode.containerInfo,t=me(r),_i(r,t))}}function ss(t,r){for(var i=r;;)if(as(t,i),i.child===null||pt&&i.tag===4){if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return;i=i.return}i.sibling.return=i.return,i=i.sibling}else i.child.return=i,i=i.child}function os(t){t.alternate=null,t.child=null,t.dependencies=null,t.firstEffect=null,t.lastEffect=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.return=null,t.updateQueue=null}function ls(t){return t.tag===5||t.tag===3||t.tag===4}function hs(t){if(pt){e:{for(var r=t.return;r!==null;){if(ls(r))break e;r=r.return}throw Error(L(160))}var i=r;switch(r=i.stateNode,i.tag){case 5:var u=!1;break;case 3:r=r.containerInfo,u=!0;break;case 4:r=r.containerInfo,u=!0;break;default:throw Error(L(161))}i.flags&16&&(pi(r),i.flags&=-17);e:t:for(i=t;;){for(;i.sibling===null;){if(i.return===null||ls(i.return)){i=null;break e}i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2)){i=i.stateNode;break e}}u?ji(t,i,r):Ki(t,i,r)}}function ji(t,r,i){var u=t.tag,d=u===5||u===6;if(d)t=d?t.stateNode:t.stateNode.instance,r?pa(i,t,r):Ms(i,t);else if(u!==4&&(t=t.child,t!==null))for(ji(t,r,i),t=t.sibling;t!==null;)ji(t,r,i),t=t.sibling}function Ki(t,r,i){var u=t.tag,d=u===5||u===6;if(d)t=d?t.stateNode:t.stateNode.instance,r?oo(i,t,r):As(i,t);else if(u!==4&&(t=t.child,t!==null))for(Ki(t,r,i),t=t.sibling;t!==null;)Ki(t,r,i),t=t.sibling}function us(t,r){for(var i=r,u=!1,d,p;;){if(!u){u=i.return;e:for(;;){if(u===null)throw Error(L(160));switch(d=u.stateNode,u.tag){case 5:p=!1;break e;case 3:d=d.containerInfo,p=!0;break e;case 4:d=d.containerInfo,p=!0;break e}u=u.return}u=!0}if(i.tag===5||i.tag===6)ss(t,i),p?Tn(d,i.stateNode):va(d,i.stateNode);else if(i.tag===4){if(i.child!==null){d=i.stateNode.containerInfo,p=!0,i.child.return=i,i=i.child;continue}}else if(as(t,i),i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return;i=i.return,i.tag===4&&(u=!1)}i.sibling.return=i.return,i=i.sibling}}function Qi(t,r){if(pt){switch(r.tag){case 0:case 11:case 14:case 15:case 22:ns(3,r);return;case 1:return;case 5:var i=r.stateNode;if(i!=null){var u=r.memoizedProps;t=t!==null?t.memoizedProps:u;var d=r.type,p=r.updateQueue;r.updateQueue=null,p!==null&&ga(i,p,d,t,u,r)}return;case 6:if(r.stateNode===null)throw Error(L(162));i=r.memoizedProps,gi(r.stateNode,t!==null?t.memoizedProps:i,i);return;case 3:je&&(r=r.stateNode,r.hydrate&&(r.hydrate=!1,wi(r.containerInfo)));return;case 12:return;case 13:ds(r),Jn(r);return;case 19:Jn(r);return;case 17:return;case 23:case 24:is(r,r.memoizedState!==null);return}throw Error(L(163))}switch(r.tag){case 0:case 11:case 14:case 15:case 22:ns(3,r);return;case 12:return;case 13:ds(r),Jn(r);return;case 19:Jn(r);return;case 3:je&&(i=r.stateNode,i.hydrate&&(i.hydrate=!1,wi(i.containerInfo)));break;case 23:case 24:return}e:if(Kr){switch(r.tag){case 1:case 5:case 6:case 20:break e;case 3:case 4:r=r.stateNode,_i(r.containerInfo,r.pendingChildren);break e}throw Error(L(163))}}function ds(t){t.memoizedState!==null&&(ps=Ge(),pt&&is(t.child,!0))}function Jn(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var i=t.stateNode;i===null&&(i=t.stateNode=new Ks),r.forEach(function(u){var d=tr.bind(null,t,u);i.has(u)||(i.add(u),u.then(d,d))})}}function Js(t,r){return t!==null&&(t=t.memoizedState,t===null||t.dehydrated!==null)?(r=r.memoizedState,r!==null&&r.dehydrated===null):!1}var Zn=0,$n=1,vn=2,ei=3,ti=4;if(typeof Symbol=="function"&&Symbol.for){var mn=Symbol.for;Zn=mn("selector.component"),$n=mn("selector.has_pseudo_class"),vn=mn("selector.role"),ei=mn("selector.test_id"),ti=mn("selector.text")}function qi(t){var r=ks(t);if(r!=null){if(typeof r.memoizedProps["data-testname"]!="string")throw Error(L(364));return r}if(t=de(t),t===null)throw Error(L(362));return t.stateNode.current}function Ji(t,r){switch(r.$$typeof){case Zn:if(t.type===r.value)return!0;break;case $n:e:{r=r.value,t=[t,0];for(var i=0;i<t.length;){var u=t[i++],d=t[i++],p=r[d];if(u.tag!==5||!st(u)){for(;p!=null&&Ji(u,p);)d++,p=r[d];if(d===r.length){r=!0;break e}else for(u=u.child;u!==null;)t.push(u,d),u=u.sibling}}r=!1}return r;case vn:if(t.tag===5&&fa(t.stateNode,r.value))return!0;break;case ti:if((t.tag===5||t.tag===6)&&(t=kn(t),t!==null&&0<=t.indexOf(r.value)))return!0;break;case ei:if(t.tag===5&&(t=t.memoizedProps["data-testname"],typeof t=="string"&&t.toLowerCase()===r.value.toLowerCase()))return!0;break;default:throw Error(L(365,r))}return!1}function Zi(t){switch(t.$$typeof){case Zn:return"<"+(O(t.value)||"Unknown")+">";case $n:return":has("+(Zi(t)||"")+")";case vn:return'[role="'+t.value+'"]';case ti:return'"'+t.value+'"';case ei:return'[data-testname="'+t.value+'"]';default:throw Error(L(365,t))}}function fs(t,r){var i=[];t=[t,0];for(var u=0;u<t.length;){var d=t[u++],p=t[u++],_=r[p];if(d.tag!==5||!st(d)){for(;_!=null&&Ji(d,_);)p++,_=r[p];if(p===r.length)i.push(d);else for(d=d.child;d!==null;)t.push(d,p),d=d.sibling}}return i}function $i(t,r){if(!ir)throw Error(L(363));t=qi(t),t=fs(t,r),r=[],t=Array.from(t);for(var i=0;i<t.length;){var u=t[i++];if(u.tag===5)st(u)||r.push(u.stateNode);else for(u=u.child;u!==null;)t.push(u),u=u.sibling}return r}var ri=null;function Zs(t){if(ri===null)try{var r=("require"+Math.random()).slice(0,7);ri=(xt&&xt[r]).call(xt,"timers").setImmediate}catch(i){ri=function(u){var d=new MessageChannel;d.port1.onmessage=u,d.port2.postMessage(void 0)}}return ri(t)}var $s=Math.ceil,ni=nt.ReactCurrentDispatcher,ea=nt.ReactCurrentOwner,ta=nt.IsSomeRendererActing,te=0,et=null,Ie=null,Xe=0,Gr=0,ra=Xt(0),He=0,na=null,Dr=0,ii=0,zr=0,cs=0,gs=null,ps=0,vs=Infinity;function gr(){vs=Ge()+500}var j=null,ia=!1,ms=null,bt=null,pr=!1,ai=null,Ft=90,aa=[],_s=[],l=null,e=0,n=null,a=-1,s=0,o=0,h=null,f=!1;function c(){return(te&48)!=0?Ge():a!==-1?a:a=Ge()}function g(t){if(t=t.mode,(t&2)==0)return 1;if((t&4)==0)return lr()===99?1:2;if(s===0&&(s=Dr),Ti.transition!==0){o!==0&&(o=gs!==null?gs.pendingLanes:0),t=s;var r=4186112&~o;return r&=-r,r===0&&(t=4186112&~t,r=t&-t,r===0&&(r=8192)),r}return t=lr(),(te&4)!=0&&t===98?t=$r(12,s):(t=Ea(t),t=$r(t,s)),t}function v(t,r,i){if(50<e)throw e=0,n=null,Error(L(185));if(t=y(t,r),t===null)return null;jt(t,r,i),t===et&&(zr|=r,He===4&&S(t,Xe));var u=lr();r===1?(te&8)!=0&&(te&48)==0?R(t):(m(t,i),te===0&&(gr(),fe())):((te&4)==0||u!==98&&u!==99||(l===null?l=new Set([t]):l.add(t)),m(t,i)),gs=t}function y(t,r){t.lanes|=r;var i=t.alternate;for(i!==null&&(i.lanes|=r),i=t,t=t.return;t!==null;)t.childLanes|=r,i=t.alternate,i!==null&&(i.childLanes|=r),i=t,t=t.return;return i.tag===3?i.stateNode:null}function m(t,r){for(var i=t.callbackNode,u=t.suspendedLanes,d=t.pingedLanes,p=t.expirationTimes,_=t.pendingLanes;0<_;){var C=31-Kt(_),A=1<<C,B=p[C];if(B===-1){if((A&u)==0||(A&d)!=0){B=r,Pt(A);var $=pe;p[C]=10<=$?B+250:6<=$?B+5e3:-1}}else B<=r&&(t.expiredLanes|=A);_&=~A}if(u=Sr(t,t===et?Xe:0),r=pe,u===0)i!==null&&(i!==tn&&Ei(i),t.callbackNode=null,t.callbackPriority=0);else{if(i!==null){if(t.callbackPriority===r)return;i!==tn&&Ei(i)}r===15?(i=R.bind(null,t),mt===null?(mt=[i],Ye=xi(Gn,Cr)):mt.push(i),i=tn):r===14?i=rn(99,R.bind(null,t)):(i=Pa(r),i=rn(i,x.bind(null,t))),t.callbackPriority=r,t.callbackNode=i}}function x(t){if(a=-1,o=s=0,(te&48)!=0)throw Error(L(327));var r=t.callbackNode;if(se()&&t.callbackNode!==r)return null;var i=Sr(t,t===et?Xe:0);if(i===0)return null;var u=i,d=te;te|=16;var p=q();(et!==t||Xe!==u)&&(gr(),V(t,u));do try{Z();break}catch(C){H(t,C)}while(1);if(Dn(),ni.current=p,te=d,Ie!==null?u=0:(et=null,Xe=0,u=He),(Dr&zr)!=0)V(t,0);else if(u!==0){if(u===2&&(te|=64,t.hydrate&&(t.hydrate=!1,mi(t.containerInfo)),i=Ci(t),i!==0&&(u=X(t,i))),u===1)throw r=na,V(t,0),S(t,i),m(t,Ge()),r;switch(t.finishedWork=t.current.alternate,t.finishedLanes=i,u){case 0:case 1:throw Error(L(345));case 2:Q(t);break;case 3:if(S(t,i),(i&62914560)===i&&(u=ps+500-Ge(),10<u)){if(Sr(t,0)!==0)break;if(d=t.suspendedLanes,(d&i)!==i){c(),t.pingedLanes|=t.suspendedLanes&d;break}t.timeoutHandle=ua(Q.bind(null,t),u);break}Q(t);break;case 4:if(S(t,i),(i&4186112)===i)break;for(u=t.eventTimes,d=-1;0<i;){var _=31-Kt(i);p=1<<_,_=u[_],_>d&&(d=_),i&=~p}if(i=d,i=Ge()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*$s(i/1960))-i,10<i){t.timeoutHandle=ua(Q.bind(null,t),i);break}Q(t);break;case 5:Q(t);break;default:throw Error(L(329))}}return m(t,Ge()),t.callbackNode===r?x.bind(null,t):null}function S(t,r){for(r&=~cs,r&=~zr,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var i=31-Kt(r),u=1<<i;t[i]=-1,r&=~u}}function R(t){if((te&48)!=0)throw Error(L(327));if(se(),t===et&&(t.expiredLanes&Xe)!=0){var r=Xe,i=X(t,r);(Dr&zr)!=0&&(r=Sr(t,r),i=X(t,r))}else r=Sr(t,0),i=X(t,r);if(t.tag!==0&&i===2&&(te|=64,t.hydrate&&(t.hydrate=!1,mi(t.containerInfo)),r=Ci(t),r!==0&&(i=X(t,r))),i===1)throw i=na,V(t,0),S(t,r),m(t,Ge()),i;return t.finishedWork=t.current.alternate,t.finishedLanes=r,Q(t),m(t,Ge()),null}function k(){if(l!==null){var t=l;l=null,t.forEach(function(r){r.expiredLanes|=24&r.pendingLanes,m(r,Ge())})}fe()}function D(t,r){var i=te;te|=1;try{return t(r)}finally{te=i,te===0&&(gr(),fe())}}function G(t,r){var i=te;if((i&48)!=0)return t(r);te|=1;try{if(t)return kt(99,t.bind(null,r))}finally{te=i,fe()}}function N(t,r){Ce(ra,Gr),Gr|=r,Dr|=r}function b(){Gr=ra.current,_e(ra)}function V(t,r){t.finishedWork=null,t.finishedLanes=0;var i=t.timeoutHandle;if(i!==ci&&(t.timeoutHandle=ci,Ps(i)),Ie!==null)for(i=Ie.return;i!==null;){var u=i;switch(u.tag){case 1:u=u.type.childContextTypes,u!=null&&Zr();break;case 3:Rr(),_e(Be),_e(Le),Un();break;case 5:Ni(u);break;case 4:Rr();break;case 13:_e(Pe);break;case 19:_e(Pe);break;case 10:Ai(u);break;case 23:case 24:b()}i=i.return}et=t,Ie=br(t.current,null),Xe=Gr=Dr=r,He=0,na=null,cs=zr=ii=0}function H(t,r){do{var i=Ie;try{if(Dn(),Ar.current=fr,Wn){for(var u=Re.memoizedState;u!==null;){var d=u.queue;d!==null&&(d.pending=null),u=u.next}Wn=!1}if(Mr=0,Fe=be=Re=null,un=!1,ea.current=null,i===null||i.return===null){He=1,na=r,Ie=null;break}e:{var p=t,_=i.return,C=i,A=r;if(r=Xe,C.flags|=2048,C.firstEffect=C.lastEffect=null,A!==null&&typeof A=="object"&&typeof A.then=="function"){var B=A;if((C.mode&2)==0){var $=C.alternate;$?(C.updateQueue=$.updateQueue,C.memoizedState=$.memoizedState,C.lanes=$.lanes):(C.updateQueue=null,C.memoizedState=null)}var ne=(Pe.current&1)!=0,Y=_;do{var Ee;if(Ee=Y.tag===13){var Te=Y.memoizedState;if(Te!==null)Ee=Te.dehydrated!==null;else{var Nt=Y.memoizedProps;Ee=Nt.fallback===void 0?!1:Nt.unstable_avoidThisFallback!==!0?!0:!ne}}if(Ee){var T=Y.updateQueue;if(T===null){var E=new Set;E.add(B),Y.updateQueue=E}else T.add(B);if((Y.mode&2)==0){if(Y.flags|=64,C.flags|=16384,C.flags&=-2981,C.tag===1)if(C.alternate===null)C.tag=17;else{var M=Je(-1,1);M.tag=2,ct(C,M)}C.lanes|=1;break e}A=void 0,C=r;var W=p.pingCache;if(W===null?(W=p.pingCache=new js,A=new Set,W.set(B,A)):(A=W.get(B),A===void 0&&(A=new Set,W.set(B,A))),!A.has(C)){A.add(C);var ee=rt.bind(null,p,B,C);B.then(ee,ee)}Y.flags|=4096,Y.lanes=r;break e}Y=Y.return}while(Y!==null);A=Error((O(C.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}He!==5&&(He=2),A=pn(A,C),Y=_;do{switch(Y.tag){case 3:p=A,Y.flags|=4096,r&=-r,Y.lanes|=r;var ke=es(Y,p,r);Jt(Y,ke);break e;case 1:p=A;var ae=Y.type,ye=Y.stateNode;if((Y.flags&64)==0&&(typeof ae.getDerivedStateFromError=="function"||ye!==null&&typeof ye.componentDidCatch=="function"&&(bt===null||!bt.has(ye)))){Y.flags|=4096,r&=-r,Y.lanes|=r;var De=ts(Y,p,r);Jt(Y,De);break e}}Y=Y.return}while(Y!==null)}oe(i)}catch(ce){r=ce,Ie===i&&i!==null&&(Ie=i=i.return);continue}break}while(1)}function q(){var t=ni.current;return ni.current=fr,t===null?fr:t}function X(t,r){var i=te;te|=16;var u=q();et===t&&Xe===r||V(t,r);do try{J();break}catch(d){H(t,d)}while(1);if(Dn(),te=i,ni.current=u,Ie!==null)throw Error(L(261));return et=null,Xe=0,He}function J(){for(;Ie!==null;)K(Ie)}function Z(){for(;Ie!==null&&!Fs();)K(Ie)}function K(t){var r=Bt(t.alternate,t,Gr);t.memoizedProps=t.pendingProps,r===null?oe(t):Ie=r,ea.current=null}function oe(t){var r=t;do{var i=r.alternate;if(t=r.return,(r.flags&2048)==0){if(i=Qn(i,r,Gr),i!==null){Ie=i;return}if(i=r,i.tag!==24&&i.tag!==23||i.memoizedState===null||(Gr&1073741824)!=0||(i.mode&4)==0){for(var u=0,d=i.child;d!==null;)u|=d.lanes|d.childLanes,d=d.sibling;i.childLanes=u}t!==null&&(t.flags&2048)==0&&(t.firstEffect===null&&(t.firstEffect=r.firstEffect),r.lastEffect!==null&&(t.lastEffect!==null&&(t.lastEffect.nextEffect=r.firstEffect),t.lastEffect=r.lastEffect),1<r.flags&&(t.lastEffect!==null?t.lastEffect.nextEffect=r:t.firstEffect=r,t.lastEffect=r))}else{if(i=er(r),i!==null){i.flags&=2047,Ie=i;return}t!==null&&(t.firstEffect=t.lastEffect=null,t.flags|=2048)}if(r=r.sibling,r!==null){Ie=r;return}Ie=r=t}while(r!==null);He===0&&(He=5)}function Q(t){var r=lr();return kt(99,xe.bind(null,t,r)),null}function xe(t,r){do se();while(ai!==null);if((te&48)!=0)throw Error(L(327));var i=t.finishedWork;if(i===null)return null;if(t.finishedWork=null,t.finishedLanes=0,i===t.current)throw Error(L(177));t.callbackNode=null;var u=i.lanes|i.childLanes,d=u,p=t.pendingLanes&~d;t.pendingLanes=d,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=d,t.mutableReadLanes&=d,t.entangledLanes&=d,d=t.entanglements;for(var _=t.eventTimes,C=t.expirationTimes;0<p;){var A=31-Kt(p),B=1<<A;d[A]=0,_[A]=-1,C[A]=-1,p&=~B}if(l!==null&&(u&24)==0&&l.has(t)&&l.delete(t),t===et&&(Ie=et=null,Xe=0),1<i.flags?i.lastEffect!==null?(i.lastEffect.nextEffect=i,u=i.firstEffect):u=i:u=i.firstEffect,u!==null){d=te,te|=32,ea.current=null,h=jr(t.containerInfo),f=!1,j=u;do try{tt()}catch(E){if(j===null)throw Error(L(330));ve(j,E),j=j.nextEffect}while(j!==null);h=null,j=u;do try{for(_=t;j!==null;){var $=j.flags;if($&16&&pt&&pi(j.stateNode),$&128){var ne=j.alternate;if(ne!==null){var Y=ne.ref;Y!==null&&(typeof Y=="function"?Y(null):Y.current=null)}}switch($&1038){case 2:hs(j),j.flags&=-3;break;case 6:hs(j),j.flags&=-3,Qi(j.alternate,j);break;case 1024:j.flags&=-1025;break;case 1028:j.flags&=-1025,Qi(j.alternate,j);break;case 4:Qi(j.alternate,j);break;case 8:C=_,p=j,pt?us(C,p):ss(C,p);var Ee=p.alternate;os(p),Ee!==null&&os(Ee)}j=j.nextEffect}}catch(E){if(j===null)throw Error(L(330));ve(j,E),j=j.nextEffect}while(j!==null);f&&En(),w(t.containerInfo),t.current=i,j=u;do try{for($=t;j!==null;){var Te=j.flags;if(Te&36&&qs($,j.alternate,j),Te&128){ne=void 0;var Nt=j.ref;if(Nt!==null){var T=j.stateNode;switch(j.tag){case 5:ne=at(T);break;default:ne=T}typeof Nt=="function"?Nt(ne):Nt.current=ne}}j=j.nextEffect}}catch(E){if(j===null)throw Error(L(330));ve(j,E),j=j.nextEffect}while(j!==null);j=null,wr(),te=d}else t.current=i;if(pr)pr=!1,ai=t,Ft=r;else for(j=u;j!==null;)r=j.nextEffect,j.nextEffect=null,j.flags&8&&(Te=j,Te.sibling=null,Te.stateNode=null),j=r;if(u=t.pendingLanes,u===0&&(bt=null),u===1?t===n?e++:(e=0,n=t):e=0,i=i.stateNode,ft&&typeof ft.onCommitFiberRoot=="function")try{ft.onCommitFiberRoot(or,i,void 0,(i.current.flags&64)==64)}catch(E){}if(m(t,Ge()),ia)throw ia=!1,t=ms,ms=null,t;return(te&8)!=0||fe(),null}function tt(){for(;j!==null;){var t=j.alternate;f||h===null||((j.flags&8)!=0?sa(j,h)&&(f=!0,da()):j.tag===13&&Js(t,j)&&sa(j,h)&&(f=!0,da()));var r=j.flags;(r&256)!=0&&Qs(t,j),(r&512)==0||pr||(pr=!0,rn(97,function(){return se(),null})),j=j.nextEffect}}function se(){if(Ft!==90){var t=97<Ft?97:Ft;return Ft=90,kt(t,Ct)}return!1}function Ae(t,r){aa.push(r,t),pr||(pr=!0,rn(97,function(){return se(),null}))}function Ve(t,r){_s.push(r,t),pr||(pr=!0,rn(97,function(){return se(),null}))}function Ct(){if(ai===null)return!1;var t=ai;if(ai=null,(te&48)!=0)throw Error(L(331));var r=te;te|=32;var i=_s;_s=[];for(var u=0;u<i.length;u+=2){var d=i[u],p=i[u+1],_=d.destroy;if(d.destroy=void 0,typeof _=="function")try{_()}catch(A){if(p===null)throw Error(L(330));ve(p,A)}}for(i=aa,aa=[],u=0;u<i.length;u+=2){d=i[u],p=i[u+1];try{var C=d.create;d.destroy=C()}catch(A){if(p===null)throw Error(L(330));ve(p,A)}}for(C=t.current.firstEffect;C!==null;)t=C.nextEffect,C.nextEffect=null,C.flags&8&&(C.sibling=null,C.stateNode=null),C=t;return te=r,fe(),!0}function he(t,r,i){r=pn(i,r),r=es(t,r,1),ct(t,r),r=c(),t=y(t,1),t!==null&&(jt(t,1,r),m(t,r))}function ve(t,r){if(t.tag===3)he(t,t,r);else for(var i=t.return;i!==null;){if(i.tag===3){he(i,t,r);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(bt===null||!bt.has(u))){t=pn(r,t);var d=ts(i,t,1);if(ct(i,d),d=c(),i=y(i,1),i!==null)jt(i,1,d),m(i,d);else if(typeof u.componentDidCatch=="function"&&(bt===null||!bt.has(u)))try{u.componentDidCatch(r,t)}catch(p){}break}}i=i.return}}function rt(t,r,i){var u=t.pingCache;u!==null&&u.delete(r),r=c(),t.pingedLanes|=t.suspendedLanes&i,et===t&&(Xe&i)===i&&(He===4||He===3&&(Xe&62914560)===Xe&&500>Ge()-ps?V(t,0):cs|=i),m(t,r)}function tr(t,r){var i=t.stateNode;i!==null&&i.delete(r),r=0,r===0&&(r=t.mode,(r&2)==0?r=1:(r&4)==0?r=lr()===99?1:2:(s===0&&(s=Dr),r=Ot(62914560&~s),r===0&&(r=4194304))),i=c(),t=y(t,r),t!==null&&(jt(t,r,i),m(t,i))}var Bt;Bt=function(t,r,i){var u=r.lanes;if(t!==null)if(t.memoizedProps!==r.pendingProps||Be.current)St=!0;else if((i&u)!=0)St=(t.flags&16384)!=0;else{switch(St=!1,r.tag){case 3:Ja(r),Gi();break;case 5:Ga(r);break;case 1:We(r.type)&&In(r);break;case 4:Ii(r,r.stateNode.containerInfo);break;case 10:La(r,r.memoizedProps.value);break;case 13:if(r.memoizedState!==null)return(i&r.child.childLanes)!=0?Xs(t,r,i):(Ce(Pe,Pe.current&1),r=Lt(t,r,i),r!==null?r.sibling:null);Ce(Pe,Pe.current&1);break;case 19:if(u=(i&r.childLanes)!=0,(t.flags&64)!=0){if(u)return Xi(t,r,i);r.flags|=64}var d=r.memoizedState;if(d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ce(Pe,Pe.current),u)break;return null;case 23:case 24:return r.lanes=0,Hi(t,r,i)}return Lt(t,r,i)}else St=!1;switch(r.lanes=0,r.tag){case 2:if(u=r.type,t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2),t=r.pendingProps,d=sr(r,Le.current),qt(r,i),d=Yn(null,r,u,t,d,i),r.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0){if(r.tag=1,r.memoizedState=null,r.updateQueue=null,We(u)){var p=!0;In(r)}else p=!1;r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Mi(r);var _=u.getDerivedStateFromProps;typeof _=="function"&&yt(r,u,_,t),d.updater=an,r.stateNode=d,d._reactInternals=r,Li(r,u,t,i),r=Wi(null,r,u,!0,p,i)}else r.tag=0,$e(null,r,d,i),r=r.child;return r;case 16:d=r.elementType;e:{switch(t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2),t=r.pendingProps,p=d._init,d=p(d._payload),r.type=d,p=r.tag=vo(d),t=le(d,t),p){case 0:r=Ui(null,r,d,t,i);break e;case 1:r=qa(null,r,d,t,i);break e;case 11:r=Va(null,r,d,t,i);break e;case 14:r=ja(null,r,d,le(d.type,t),u,i);break e}throw Error(L(306,d,""))}return r;case 0:return u=r.type,d=r.pendingProps,d=r.elementType===u?d:le(u,d),Ui(t,r,u,d,i);case 1:return u=r.type,d=r.pendingProps,d=r.elementType===u?d:le(u,d),qa(t,r,u,d,i);case 3:if(Ja(r),u=r.updateQueue,t===null||u===null)throw Error(L(282));if(u=r.pendingProps,d=r.memoizedState,d=d!==null?d.element:null,bn(t,r),xr(r,u,null,i),u=r.memoizedState.element,u===d)Gi(),r=Lt(t,r,i);else{if(d=r.stateNode,(p=d.hydrate)&&(je?(hr=Si(r.stateNode.containerInfo),zt=r,p=ut=!0):p=!1),p){if(je&&(t=d.mutableSourceEagerHydrationData,t!=null))for(d=0;d<t.length;d+=2)p=t[d],_=t[d+1],Ht?p._workInProgressVersionPrimary=_:p._workInProgressVersionSecondary=_,ur.push(p);for(i=Oa(r,null,u,i),r.child=i;i;)i.flags=i.flags&-3|1024,i=i.sibling}else $e(t,r,u,i),Gi();r=r.child}return r;case 5:return Ga(r),t===null&&Oi(r),u=r.type,d=r.pendingProps,p=t!==null?t.memoizedProps:null,_=d.children,fi(u,d)?_=null:p!==null&&fi(u,p)&&(r.flags|=16),Qa(t,r),$e(t,r,_,i),r.child;case 6:return t===null&&Oi(r),null;case 13:return Xs(t,r,i);case 4:return Ii(r,r.stateNode.containerInfo),u=r.pendingProps,t===null?r.child=Bn(r,null,u,i):$e(t,r,u,i),r.child;case 11:return u=r.type,d=r.pendingProps,d=r.elementType===u?d:le(u,d),Va(t,r,u,d,i);case 7:return $e(t,r,r.pendingProps,i),r.child;case 8:return $e(t,r,r.pendingProps.children,i),r.child;case 12:return $e(t,r,r.pendingProps.children,i),r.child;case 10:e:{if(u=r.type._context,d=r.pendingProps,_=r.memoizedProps,p=d.value,La(r,p),_!==null){var C=_.value;if(p=Me(C,p)?0:(typeof u._calculateChangedBits=="function"?u._calculateChangedBits(C,p):1073741823)|0,p===0){if(_.children===d.children&&!Be.current){r=Lt(t,r,i);break e}}else for(C=r.child,C!==null&&(C.return=r);C!==null;){var A=C.dependencies;if(A!==null){_=C.child;for(var B=A.firstContext;B!==null;){if(B.context===u&&(B.observedBits&p)!=0){C.tag===1&&(B=Je(-1,i&-i),B.tag=2,ct(C,B)),C.lanes|=i,B=C.alternate,B!==null&&(B.lanes|=i),zn(C.return,i),A.lanes|=i;break}B=B.next}}else _=C.tag===10&&C.type===r.type?null:C.child;if(_!==null)_.return=C;else for(_=C;_!==null;){if(_===r){_=null;break}if(C=_.sibling,C!==null){C.return=_.return,_=C;break}_=_.return}C=_}}$e(t,r,d.children,i),r=r.child}return r;case 9:return d=r.type,p=r.pendingProps,u=p.children,qt(r,i),d=qe(d,p.unstable_observedBits),u=u(d),r.flags|=1,$e(t,r,u,i),r.child;case 14:return d=r.type,p=le(d,r.pendingProps),p=le(d.type,p),ja(t,r,d,p,u,i);case 15:return Ka(t,r,r.type,r.pendingProps,u,i);case 17:return u=r.type,d=r.pendingProps,d=r.elementType===u?d:le(u,d),t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2),r.tag=1,We(u)?(t=!0,In(r)):t=!1,qt(r,i),Ia(r,u,d),Li(r,u,d,i),Wi(null,r,u,!0,t,i);case 19:return Xi(t,r,i);case 23:return Hi(t,r,i);case 24:return Hi(t,r,i)}throw Error(L(156,r.tag))};var ys={current:!1},eo=ie.unstable_flushAllWithoutAsserting,ho=typeof eo=="function";function to(){if(eo!==void 0)return eo();for(var t=!1;se();)t=!0;return t}function uo(t){try{to(),Zs(function(){to()?uo(t):t()})}catch(r){t(r)}}var Ss=0,fo=!1;function po(t,r,i,u){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function It(t,r,i,u){return new po(t,r,i,u)}function ro(t){return t=t.prototype,!(!t||!t.isReactComponent)}function vo(t){if(typeof t=="function")return ro(t)?1:0;if(t!=null){if(t=t.$$typeof,t===yn)return 11;if(t===Sn)return 14}return 2}function br(t,r){var i=t.alternate;return i===null?(i=It(t.tag,r,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=r,i.type=t.type,i.flags=0,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null),i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,r=t.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i}function ws(t,r,i,u,d,p){var _=2;if(u=t,typeof t=="function")ro(t)&&(_=1);else if(typeof t=="string")_=5;else e:switch(t){case Oe:return si(i.children,d,p,r);case Yr:_=8,d|=16;break;case it:_=8,d|=1;break;case vr:return t=It(12,i,r,d|8),t.elementType=vr,t.type=vr,t.lanes=p,t;case Hr:return t=It(13,i,r,d),t.type=Hr,t.elementType=Hr,t.lanes=p,t;case Ur:return t=It(19,i,r,d),t.elementType=Ur,t.lanes=p,t;case hi:return no(i,d,p,r);case P:return t=It(24,i,r,d),t.elementType=P,t.lanes=p,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Br:_=10;break e;case oi:_=9;break e;case yn:_=11;break e;case Sn:_=14;break e;case Wr:_=16,u=null;break e;case li:_=22;break e}throw Error(L(130,t==null?t:typeof t,""))}return r=It(_,i,r,d),r.elementType=t,r.type=u,r.lanes=p,r}function si(t,r,i,u){return t=It(7,t,u,r),t.lanes=i,t}function no(t,r,i,u){return t=It(23,t,u,r),t.elementType=hi,t.lanes=i,t}function io(t,r,i){return t=It(6,t,null,r),t.lanes=i,t}function ao(t,r,i){return r=It(4,t.children!==null?t.children:[],t.key,r),r.lanes=i,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function mo(t,r,i){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ci,this.pendingContext=this.context=null,this.hydrate=i,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=en(0),this.expirationTimes=en(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=en(0),je&&(this.mutableSourceEagerHydrationData=null)}function co(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(L(188)):Error(L(268,Object.keys(t)));return t=di(r),t===null?null:t.stateNode}function go(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<r?i:r}}function Cs(t,r){go(t,r),(t=t.alternate)&&go(t,r)}function _o(t){return t=di(t),t===null?null:t.stateNode}function yo(){return null}return re.IsThisRendererActing=ys,re.act=function(t){function r(){Ss--,ta.current=i,ys.current=u}fo===!1&&(fo=!0,console.error("act(...) is not supported in production builds of React, and might not behave as expected.")),Ss++;var i=ta.current,u=ys.current;ta.current=!0,ys.current=!0;try{var d=D(t)}catch(p){throw r(),p}if(d!==null&&typeof d=="object"&&typeof d.then=="function")return{then:function(p,_){d.then(function(){1<Ss||ho===!0&&i===!0?(r(),p()):uo(function(C){r(),C?_(C):p()})},function(C){r(),_(C)})}};try{Ss!==1||ho!==!1&&i!==!1||to(),r()}catch(p){throw r(),p}return{then:function(p){p()}}},re.attemptContinuousHydration=function(t){if(t.tag===13){var r=c();v(t,67108864,r),Cs(t,67108864)}},re.attemptHydrationAtCurrentPriority=function(t){if(t.tag===13){var r=c(),i=g(t);v(t,i,r),Cs(t,i)}},re.attemptSynchronousHydration=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.hydrate){var i=Pt(r.pendingLanes);r.expiredLanes|=i&r.pendingLanes,m(r,Ge()),(te&48)==0&&(gr(),fe())}break;case 13:var u=c();G(function(){return v(t,1,u)}),Cs(t,4)}},re.attemptUserBlockingHydration=function(t){if(t.tag===13){var r=c();v(t,4,r),Cs(t,4)}},re.batchedEventUpdates=function(t,r){var i=te;te|=2;try{return t(r)}finally{te=i,te===0&&(gr(),fe())}},re.batchedUpdates=D,re.createComponentSelector=function(t){return{$$typeof:Zn,value:t}},re.createContainer=function(t,r,i){return t=new mo(t,r,i),r=It(3,null,null,r===2?7:r===1?3:0),t.current=r,r.stateNode=t,Mi(r),t},re.createHasPsuedoClassSelector=function(t){return{$$typeof:$n,value:t}},re.createPortal=function(t,r,i){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ne,key:u==null?null:""+u,children:t,containerInfo:r,implementation:i}},re.createRoleSelector=function(t){return{$$typeof:vn,value:t}},re.createTestNameSelector=function(t){return{$$typeof:ei,value:t}},re.createTextSelector=function(t){return{$$typeof:ti,value:t}},re.deferredUpdates=function(t){return kt(97,t)},re.discreteUpdates=function(t,r,i,u,d){var p=te;te|=4;try{return kt(98,t.bind(null,r,i,u,d))}finally{te=p,te===0&&(gr(),fe())}},re.findAllNodes=$i,re.findBoundingRects=function(t,r){if(!ir)throw Error(L(363));r=$i(t,r),t=[];for(var i=0;i<r.length;i++)t.push(Pn(r[i]));for(r=t.length-1;0<r;r--){i=t[r];for(var u=i.x,d=u+i.width,p=i.y,_=p+i.height,C=r-1;0<=C;C--)if(r!==C){var A=t[C],B=A.x,$=B+A.width,ne=A.y,Y=ne+A.height;if(u>=B&&p>=ne&&d<=$&&_<=Y){t.splice(r,1);break}else if(u!==B||i.width!==A.width||Y<p||ne>_){if(!(p!==ne||i.height!==A.height||$<u||B>d)){B>u&&(A.width+=B-u,A.x=u),$<d&&(A.width=d-B),t.splice(r,1);break}}else{ne>p&&(A.height+=ne-p,A.y=p),Y<_&&(A.height=_-ne),t.splice(r,1);break}}}return t},re.findHostInstance=co,re.findHostInstanceWithNoPortals=function(t){return t=so(t),t===null?null:t.tag===20?t.stateNode.instance:t.stateNode},re.findHostInstanceWithWarning=function(t){return co(t)},re.flushControlled=function(t){var r=te;te|=1;try{kt(99,t)}finally{te=r,te===0&&(gr(),fe())}},re.flushDiscreteUpdates=function(){(te&49)==0&&(k(),se())},re.flushPassiveEffects=se,re.flushSync=G,re.focusWithin=function(t,r){if(!ir)throw Error(L(363));for(t=qi(t),r=fs(t,r),r=Array.from(r),t=0;t<r.length;){var i=r[t++];if(!st(i)){if(i.tag===5&&Qr(i.stateNode))return!0;for(i=i.child;i!==null;)r.push(i),i=i.sibling}}return!1},re.getCurrentUpdateLanePriority=function(){return On},re.getFindAllNodesFailureDescription=function(t,r){if(!ir)throw Error(L(363));var i=0,u=[];t=[qi(t),0];for(var d=0;d<t.length;){var p=t[d++],_=t[d++],C=r[_];if((p.tag!==5||!st(p))&&(Ji(p,C)&&(u.push(Zi(C)),_++,_>i&&(i=_)),_<r.length))for(p=p.child;p!==null;)t.push(p,_),p=p.sibling}if(i<r.length){for(t=[];i<r.length;i++)t.push(Zi(r[i]));return`findAllNodes was able to match part of the selector:
  `+(u.join(" > ")+`

No matching component was found for:
  `)+t.join(" > ")}return null},re.getPublicRootInstance=function(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return at(t.child.stateNode);default:return t.child.stateNode}},re.injectIntoDevTools=function(t){if(t={bundleType:t.bundleType,version:t.version,rendererPackageName:t.rendererPackageName,rendererConfig:t.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:nt.ReactCurrentDispatcher,findHostInstanceByFiber:_o,findFiberByHostInstance:t.findFiberByHostInstance||yo,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined")t=!1;else{var r=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!r.isDisabled&&r.supportsFiber)try{or=r.inject(t),ft=r}catch(i){}t=!0}return t},re.observeVisibleRects=function(t,r,i,u){if(!ir)throw Error(L(363));t=$i(t,r);var d=Rs(t,i,u).disconnect;return{disconnect:function(){d()}}},re.registerMutableSourceForHydration=function(t,r){var i=r._getVersion;i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i)},re.runWithPriority=function(t,r){var i=On;try{return On=t,r()}finally{On=i}},re.shouldSuspend=function(){return!1},re.unbatchedUpdates=function(t,r){var i=te;te&=-2,te|=8;try{return t(r)}finally{te=i,te===0&&(gr(),fe())}},re.updateContainer=function(t,r,i,u){var d=r.current,p=c(),_=g(d);e:if(i){i=i._reactInternals;t:{if(Xr(i)!==i||i.tag!==1)throw Error(L(170));var C=i;do{switch(C.tag){case 3:C=C.stateNode.context;break t;case 1:if(We(C.type)){C=C.stateNode.__reactInternalMemoizedMergedChildContext;break t}}C=C.return}while(C!==null);throw Error(L(171))}if(i.tag===1){var A=i.type;if(We(A)){i=Ca(i,A,C);break e}}i=C}else i=vt;return r.context===null?r.context=i:r.pendingContext=i,r=Je(p,_),r.payload={element:t},u=u===void 0?null:u,u!==null&&(r.callback=u),ct(d,r),v(d,_,p),_},re}},76525:function(xt,_n,ze){"use strict";xt.exports=ze(67287)},84420:function(xt,_n,ze){var rr=ze(67294),U={image:void 0,status:"loading"};xt.exports=function(Ue,F){var ie=rr.useState(U),L=ie[0].image,nt=ie[0].status,dt=ie[1];return rr.useEffect(function(){if(!Ue)return;var Ne=document.createElement("img");function Oe(){dt({image:Ne,status:"loaded"})}function it(){dt({image:void 0,status:"failed"})}return Ne.addEventListener("load",Oe),Ne.addEventListener("error",it),F&&(Ne.crossOrigin=F),Ne.src=Ue,function(){Ne.removeEventListener("load",Oe),Ne.removeEventListener("error",it),dt(U)}},[Ue,F]),[L,nt]}}}]);
