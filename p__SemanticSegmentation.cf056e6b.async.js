(self.webpackChunkpp_labeling_frontend=self.webpackChunkpp_labeling_frontend||[]).push([[540],{57560:function(L){L.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___147XP",toolBarButtonContainer:"toolBarButtonContainer___ZEvhK",toolBarButton:"toolBarButton___1s2Rh",buttonText:"buttonText___3NTCv",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___2Utx8",popover:"popover___3PRoi"}},26647:function(L){L.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1FTWb",toolBarButtonContainer:"toolBarButtonContainer___1Vahn",toolBarButton:"toolBarButton___3mR2H",buttonText:"buttonText___Y0WDm",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3lRZ8",popover:"popover___3zzu2",popoverLeft:"popoverLeft___15lGe"}},54777:function(L){L.exports={segment:"segment___1YMcl",mainStage:"mainStage___2otee",draw:"draw___equn4",pblock:"pblock___2bT7z",progress:"progress___1porz",rightSideBar:"rightSideBar___2X7jK",determinOutline:"determinOutline___2ls57"}},43801:function(L,x,t){"use strict";t.d(x,{Z:function(){return B}});var Z=t(11849),y=t(2824),K=t(91220),R=t(67294),A=t(65031),v=t(85893);function T(n,u,c,P){if(!(!n||!u||!c||!P))return{width:n,color:u,points:c,tool:P}}function E(n){if(!n||!n.lines)return[(0,v.jsx)(v.Fragment,{})];var u=[],c=(0,K.Z)(n.lines),P;try{for(c.s();!(P=c.n()).done;){var s=P.value;!s.width||!s.color||!s.points||!s.tool||u.push((0,v.jsx)(A.x1,{stroke:s.color,strokeWidth:s.width,globalCompositeOperation:s.tool==="brush"?"source-over":"destination-out",lineCap:"round",points:s.points,tension:.01}))}}catch(b){c.e(b)}finally{c.f()}return u}function U(n,u){return n=="rubber"||u==2?"rubber":"brush"}function m(n){var u=0,c=(0,K.Z)(n),P;try{for(c.s();!(P=c.n()).done;){var s=P.value;!s||s.annotationId>u&&(u=s.annotationId)}}catch(b){c.e(b)}finally{c.f()}return u}function B(n){var u=(0,R.useState)(),c=(0,y.Z)(u,2),P=c[0],s=c[1],b=function(f,M){var O;if(console.log(n.currentTool),!(n.currentTool!="brush"&&n.currentTool!="rubber")){var C=f.evt.offsetX/M,g=f.evt.offsetY/M,e=U(n.currentTool,f.evt.button),a=T(n.brushSize||10,(O=n.currentLabel)===null||O===void 0?void 0:O.color,[C,g,C,g],e);if(!!a)if(s(e),n.currentAnnotation){var I,p={tool:"brush",annotationId:n.currentAnnotation.annotationId,label:n.currentAnnotation.label,lines:(I=n.currentAnnotation.lines)===null||I===void 0?void 0:I.concat([a])};n.onAnnotationModify(p)}else{if(e=="rubber")return;n.onAnnotationAdd({tool:"brush",annotationId:m(n.annotations)+1,label:n.currentLabel,lines:[a]})}}},h=function(f,M){var O;if(!(!P||!n.currentAnnotation)){var C=f.evt.offsetX/M,g=f.evt.offsetY/M,e=[C,g],a=[];(O=n.currentAnnotation)!==null&&O!==void 0&&O.lines&&(e=n.currentAnnotation.lines[n.currentAnnotation.lines.length-1].points.concat(e),a=n.currentAnnotation.lines);var I=T(n.brushSize||10,n.currentLabel.color,e,P);!I||(a.pop(),a.push(I),n.onAnnotationModify((0,Z.Z)((0,Z.Z)({},n.currentAnnotation),{},{lines:a})))}},l=function(){n.currentTool!="brush"&&n.currentTool!="rubber"||(s(void 0),n.onMouseUp())};return{onMouseDown:b,onMouseMove:h,onMouseUp:l,createElementsFunc:E}}},58967:function(L,x,t){"use strict";var Z=t(20136),y=t(55241),K=t(77883),R=t(70507),A=t(57663),v=t(71577),T=t(2824),E=t(67294),U=t(61541),m=t(57560),B=t.n(m),n=t(85893),u=1,c=50,P=10;function s(h){return h?h<=u?u:h>=c?c:h:P}var b=function(l){var r=(0,E.useState)(s(l.size)),f=(0,T.Z)(r,2),M=f[0],O=f[1],C=function(e){O(s(e))};return(0,E.useEffect)(function(){C(l.size)},[l.size]),(0,n.jsxs)(y.Z,{overlayClassName:B().popover,placement:"right",content:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v.Z,{type:"text",onClick:function(){var e,a=s(M-1);C(a),(e=l.onChange)===null||e===void 0||e.call(0,a)},children:"-"}),(0,n.jsx)(R.Z,{min:u,max:c,value:M,onChange:function(e){var a;(a=l.onChange)===null||a===void 0||a.call(0,e)},controls:!1,style:{textAlign:"center"}}),(0,n.jsx)(v.Z,{type:"text",onClick:function(){var e,a=s(M+1);C(a),(e=l.onChange)===null||e===void 0||e.call(0,a)},children:"+"})]}),trigger:l.active?"hover":"click",children:[" ",(0,n.jsx)(U.Z,{active:l.active,imgSrc:l.imgSrc||"./pics/buttons/brush.png",onClick:l.onClick,children:l.children||"Brush"})]})};x.Z=b},27992:function(L,x,t){"use strict";var Z=t(20136),y=t(55241),K=t(77883),R=t(70507),A=t(57663),v=t(71577),T=t(2824),E=t(67294),U=t(61541),m=t(26647),B=t.n(m),n=t(85893),u=1,c=100,P=10;function s(h){return h?h<=u?u:h>=c?c:h:P}var b=function(l){var r=(0,E.useState)(s(l.size)),f=(0,T.Z)(r,2),M=f[0],O=f[1],C=function(e){O(s(e))};return(0,E.useEffect)(function(){C(l.size)},[l.size]),(0,n.jsxs)(y.Z,{overlayClassName:"".concat(B().popover," ").concat(l.disLoc=="left"?B().popoverLeft:""),placement:l.disLoc||"right",content:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v.Z,{type:"text",onClick:function(){var e,a=s(M-1);C(a),(e=l.onChange)===null||e===void 0||e.call(0,a)},children:"-"}),(0,n.jsx)(R.Z,{min:u,max:c,value:M,onChange:function(e){var a;(a=l.onChange)===null||a===void 0||a.call(0,e)},controls:!1,style:{textAlign:"center"}}),(0,n.jsx)(v.Z,{type:"text",onClick:function(){var e,a=s(M+1);C(a),(e=l.onChange)===null||e===void 0||e.call(0,a)},children:"+"})]}),trigger:"hover",children:[" ",(0,n.jsx)(U.Z,{imgSrc:l.imgSrc,onClick:l.onClick,children:l.children})]})};x.Z=b},86089:function(L,x,t){"use strict";t.r(x);var Z=t(57663),y=t(71577),K=t(34669),R=t(54458),A=t(2824),v=t(67294),T=t(54777),E=t.n(T),U=t(8088),m=t(61541),B=t(44434),n=t(58967),u=t(27992),c=t(5041),P=t(57436),s=t(14836),b=t(29919),h=t(43801),l=t(13931),r=t(85893),f=40,M=function(){var C=(0,v.useState)(void 0),g=(0,A.Z)(C,2),e=g[0],a=g[1],I=(0,v.useState)({color:"",name:""}),p=(0,A.Z)(I,2),F=p[0],$=p[1],rn=(0,v.useState)(),k=(0,A.Z)(rn,2),W=k[0],N=k[1],an=(0,v.useState)([]),V=(0,A.Z)(an,2),D=V[0],j=V[1],_n=(0,v.useState)(10),G=(0,A.Z)(_n,2),z=G[0],Q=G[1],sn=(0,v.useState)(1),w=(0,A.Z)(sn,2),H=w[0],J=w[1],q=function(o){o||J(1),o<.1||o>3?J(1):J(o)},S=function(o){N(o),o!=null&&o.label&&$(o.label)};(0,v.useEffect)(function(){localStorage.removeItem("history"),X([])},[]);function X(i,o){var _=localStorage.getItem("history"),d=_?JSON.parse(_):{index:-1,items:[]},on={currentAnnotation:o,annotations:i};if(JSON.stringify(d.items[d.index])!=JSON.stringify(on)){var cn=d.index>f?d.index-f:0,dn=d.items.splice(cn,d.index==0?1:d.index+1);d.items=dn.concat([on]),d.index<=f?d.index++:d.index=f+1,localStorage.setItem("history",JSON.stringify(d))}}var ln=function(){var o=localStorage.getItem("history");if(!!o){var _=JSON.parse(o);if(!!_&&!(_.index>=_.items.length-1)){_.index++,localStorage.setItem("history",JSON.stringify(_));var d=_.items[_.index];N(d.currentAnnotation),j(d.annotations)}}},un=function(){var o=localStorage.getItem("history");if(!!o){var _=JSON.parse(o);if(!(!_||!_.index)&&!(_.index<=0)){_.index--,localStorage.setItem("history",JSON.stringify(_));var d=_.items[_.index];N(d.currentAnnotation),j(d.annotations)}}},nn=function(o){for(var _=[],d=0;d<D.length;d++)D[d].annotationId==o.annotationId?_.push(o):_.push(D[d]);S(o),j(_)},tn=(0,h.Z)({currentLabel:F,brushSize:z,currentTool:e,annotations:D,currentAnnotation:W,onAnnotationAdd:function(o){var _=D.concat([o]);j(_),W||S(o)},onAnnotationModify:nn,onMouseUp:function(){X(D,W)}}),en=(0,l.Z)({currentLabel:F,brushSize:z,currentTool:e,annotations:D,currentAnnotation:W,onAnnotationAdd:function(o){var _=D.concat([o]);j(_),W||S(o)},onAnnotationModify:nn,onMouseUp:function(){X(D,W)}}),Y=e=="polygon"?en:tn;return(0,r.jsxs)(U.Z,{className:E().segment,children:[(0,r.jsxs)(B.Z,{children:[(0,r.jsx)(m.Z,{imgSrc:"./pics/buttons/intelligent_interaction.png",children:"Intelligent Interaction"}),(0,r.jsx)(b.Z,{active:e=="polygon",onClick:function(){a("polygon"),S(void 0)},children:"Polygon"}),(0,r.jsx)(n.Z,{size:z,active:e=="brush",onClick:function(){e!="rubber"&&e!="brush"&&S(void 0),a("brush")},onChange:function(o){Q(o)},children:"Brush"}),(0,r.jsx)(n.Z,{size:z,active:e=="rubber",onClick:function(){e!="rubber"&&e!="brush"&&S(void 0),a("rubber")},onChange:function(o){Q(o)},imgSrc:"./pics/buttons/rubber.png",children:"Rubber"}),(0,r.jsx)(m.Z,{imgSrc:"./pics/buttons/zoom_in.png",onClick:function(){q(H+.1)},children:"Zoom in"}),(0,r.jsx)(m.Z,{imgSrc:"./pics/buttons/zoom_out.png",onClick:function(){q(H-.1)},children:"Zoom out"}),(0,r.jsx)(m.Z,{imgSrc:"./pics/buttons/save.png",children:"Save"}),(0,r.jsx)(m.Z,{imgSrc:"./pics/buttons/move.png",children:"Move"}),(0,r.jsx)(m.Z,{imgSrc:"./pics/buttons/export.png",children:"Export"}),(0,r.jsx)(m.Z,{imgSrc:"./pics/buttons/data_division.png",children:"Divide Data"}),(0,r.jsx)(m.Z,{imgSrc:"./pics/buttons/prev.png",onClick:function(){un()},children:"Undo"}),(0,r.jsx)(m.Z,{imgSrc:"./pics/buttons/next.png",onClick:function(){ln()},children:"Redo"}),(0,r.jsx)(m.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:"Clear Mark"})]}),(0,r.jsxs)("div",{className:E().mainStage,children:[(0,r.jsx)("div",{className:E().draw,children:(0,r.jsx)(P.Z,{scale:H,annotations:D,currentTool:e,onMouseDown:Y.onMouseDown,onMouseMove:Y.onMouseMove,onMouseUp:Y.onMouseUp,createPolygonFunc:en.createElementsFunc,createBrushFunc:tn.createElementsFunc})}),(0,r.jsx)("div",{className:E().pblock,children:(0,r.jsx)("div",{className:E().progress,children:(0,r.jsx)(R.Z,{percent:50,status:"active"})})})]}),(0,r.jsxs)(B.Z,{disLoc:"right",children:[(0,r.jsx)(u.Z,{imgSrc:"./pics/buttons/threshold.png",disLoc:"left",children:"Segment Threshold"}),(0,r.jsx)(u.Z,{imgSrc:"./pics/buttons/alpha.png",disLoc:"left",children:"Diaphaneity"}),(0,r.jsx)(u.Z,{imgSrc:"./pics/buttons/radius.png",disLoc:"left",children:"Visual Radius"})]}),(0,r.jsxs)("div",{className:E().rightSideBar,children:[(0,r.jsx)("div",{className:E().determinOutline,children:(0,r.jsx)(y.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",block:!0,onClick:function(){S(void 0)},children:"Determine Outline"})}),(0,r.jsx)(c.Z,{selectedLabel:F,onLabelSelect:function(o){$(o),S(void 0)},onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}}),(0,r.jsx)(s.Z,{selectedAnnotation:W,annotations:D,onAnnotationSelect:function(o){o!=null&&o.delete||S(o)},onAnnotationAdd:function(){},onAnnotationModify:function(){},onAnnotationDelete:function(o){j(D.filter(function(_){return _.annotationId!=o.annotationId})),S(void 0)}})]})]})};x.default=M}}]);
