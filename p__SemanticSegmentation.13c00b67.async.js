(self.webpackChunkpp_labeling_frontend=self.webpackChunkpp_labeling_frontend||[]).push([[540],{26647:function(A){A.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1FTWb",toolBarButtonContainer:"toolBarButtonContainer___1Vahn",toolBarButton:"toolBarButton___3mR2H",buttonText:"buttonText___Y0WDm",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3lRZ8",popover:"popover___3zzu2"}},54777:function(A){A.exports={segment:"segment___1YMcl",mainStage:"mainStage___2otee",rightSideBar:"rightSideBar___2X7jK",determinOutline:"determinOutline___2ls57"}},49911:function(A,D,i){"use strict";i.r(D),i.d(D,{default:function(){return un}});var gn=i(57663),M=i(71577),x=i(2824),m=i(67294),F=i(54777),y=i.n(F),Y=i(8088),f=i(61541),X=i(44434),O=i(58967),hn=i(20136),k=i(55241),mn=i(77883),H=i(70507),K=i(26647),V=i.n(K),n=i(85893),B=1,L=100,G=10;function j(o){return o?o<=B?B:o>=L?L:o:G}var J=function(t){var s=(0,m.useState)(j(t.size)),a=(0,x.Z)(s,2),c=a[0],d=a[1];return(0,m.useEffect)(function(){d(j(t.size))},[t.size]),(0,n.jsxs)(k.Z,{overlayClassName:V().popover,placement:"right",content:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(M.Z,{type:"text",onClick:function(){var r,l=j(c-1);d(l),(r=t.onChange)===null||r===void 0||r.call(0,l)},children:"-"}),(0,n.jsx)(H.Z,{min:B,max:L,value:c,onChange:function(r){var l;(l=t.onChange)===null||l===void 0||l.call(0,r)},controls:!1,style:{textAlign:"center"}}),(0,n.jsx)(M.Z,{type:"text",onClick:function(){var r,l=j(c+1);d(l),(r=t.onChange)===null||r===void 0||r.call(0,l)},children:"+"})]}),trigger:t.active?"hover":"click",children:[" ",(0,n.jsx)(f.Z,{active:t.active,imgSrc:t.imgSrc||"./pics/buttons/brush.png",onClick:t.onClick,children:t.children||"Brush"})]})},z=J,Q=i(5041),w=i(57436),q=i(14836),_=function(t){return(0,n.jsx)(f.Z,{active:t.active,imgSrc:t.imgSrc||"./pics/buttons/polygon.png",onClick:t.onClick,children:t.children})},nn=_,tn=i(43801),on=i(91220),R=i(65031);function en(o){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function N(o,t){if(!(!o||!t)){var s=en(o);if(!!s){var a=void 0,c=[];return t.forEach(function(d){if(!a){a=d;return}c.push((0,n.jsx)(R.Cd,{x:a,y:d,radius:5,fill:o})),a=void 0}),{color:o,points:t,element:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(R.x1,{stroke:o,strokeWidth:2,globalCompositeOperation:"source-over",lineCap:"round",points:t,tension:.01,closed:!0,fill:"rgba(".concat(s.r,", ").concat(s.g,", ").concat(s.b,", 0.5)")}),c]})}}}}function an(o){var t=0,s=(0,on.Z)(o),a;try{for(s.s();!(a=s.n()).done;){var c=a.value;!c||c.annotationId>t&&(t=c.annotationId)}}catch(d){s.e(d)}finally{s.f()}return t}function rn(o){var t=function(v){var r,l=N((r=o.currentLabel)===null||r===void 0?void 0:r.color,[v.evt.offsetX,v.evt.offsetY]);!l||o.onAnnotationAdd({annotationId:an(o.annotations)+1,label:o.currentLabel,lines:[l]})},s=function(v){var r,l;if(!!o.currentAnnotation){var I=o.currentAnnotation.lines||[],b=N((r=o.currentLabel)===null||r===void 0?void 0:r.color,(l=I[0])===null||l===void 0?void 0:l.points.concat([v.evt.offsetX,v.evt.offsetY]));if(!!b){var S={annotationId:o.currentAnnotation.annotationId,label:o.currentAnnotation.label,lines:[b]};o.onAnnotationModify(S)}}},a=function(v){console.log(o.currentTool),o.currentTool=="polygon"&&(o.currentAnnotation?s(v):t(v))},c=function(){o.currentTool=="polygon"};return{onMouseDown:a,onMouseMove:function(){},onMouseUp:c}}var ln=function(){var t=(0,m.useState)(void 0),s=(0,x.Z)(t,2),a=s[0],c=s[1],d=(0,m.useState)({color:"",name:""}),v=(0,x.Z)(d,2),r=v[0],l=v[1],I=(0,m.useState)(),b=(0,x.Z)(I,2),S=b[0],sn=b[1],cn=(0,m.useState)([]),W=(0,x.Z)(cn,2),g=W[0],P=W[1],dn=(0,m.useState)(10),$=(0,x.Z)(dn,2),Z=$[0],U=$[1],h=function(e){sn(e),e!=null&&e.label&&l(e.label)},E=function(e){for(var C=[],p=0;p<g.length;p++)g[p].annotationId==e.annotationId?C.push(e):C.push(g[p]);h(e),P(C)},vn=(0,tn.Z)({currentLabel:r,brushSize:Z,currentTool:a,annotations:g,currentAnnotation:S,onAnnotationAdd:function(e){P(g.concat([e])),S||h(e)},onAnnotationModify:E}),fn=rn({currentLabel:r,brushSize:Z,currentTool:a,annotations:g,currentAnnotation:S,onAnnotationAdd:function(e){P(g.concat([e])),S||h(e)},onAnnotationModify:E}),T=a=="polygon"?fn:vn;return(0,n.jsxs)(Y.Z,{className:y().segment,children:[(0,n.jsxs)(X.Z,{children:[(0,n.jsx)(f.Z,{imgSrc:"./pics/buttons/intelligent_interaction.png",children:"Intelligent Interaction"}),(0,n.jsx)(nn,{active:a=="polygon",onClick:function(){c("polygon"),h(void 0)},children:"Polygon"}),(0,n.jsx)(O.Z,{size:Z,active:a=="brush",onClick:function(){a!="rubber"&&a!="brush"&&h(void 0),c("brush")},onChange:function(e){U(e)},children:"Brush"}),(0,n.jsx)(O.Z,{size:Z,active:a=="rubber",onClick:function(){a!="rubber"&&a!="brush"&&h(void 0),c("rubber")},onChange:function(e){U(e)},imgSrc:"./pics/buttons/rubber.png",children:"Rubber"}),(0,n.jsx)(f.Z,{imgSrc:"./pics/buttons/zoom_in.png",children:"Zoom in"}),(0,n.jsx)(f.Z,{imgSrc:"./pics/buttons/zoom_out.png",children:"Zoom out"}),(0,n.jsx)(f.Z,{imgSrc:"./pics/buttons/save.png",children:"Save"}),(0,n.jsx)(f.Z,{imgSrc:"./pics/buttons/move.png",children:"Move"}),(0,n.jsx)(f.Z,{imgSrc:"./pics/buttons/export.png",children:"Export"}),(0,n.jsx)(f.Z,{imgSrc:"./pics/buttons/data_division.png",children:"Divide Data"}),(0,n.jsx)(f.Z,{imgSrc:"./pics/buttons/prev.png",children:"Undo"}),(0,n.jsx)(f.Z,{imgSrc:"./pics/buttons/next.png",children:"Redo"}),(0,n.jsx)(f.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:"Clear Mark"}),(0,n.jsx)(z,{imgSrc:"./pics/buttons/threshold.png",children:"Segment Threshold"}),(0,n.jsx)(z,{imgSrc:"./pics/buttons/alpha.png",children:"Diaphaneity"}),(0,n.jsx)(z,{imgSrc:"./pics/buttons/radius.png",children:"Visual Radius"})]}),(0,n.jsx)("div",{className:y().mainStage,children:(0,n.jsx)(w.Z,{annotations:g,onMouseDown:T.onMouseDown,onMouseMove:T.onMouseMove,onMouseUp:T.onMouseUp})}),(0,n.jsxs)("div",{className:y().rightSideBar,children:[(0,n.jsx)("div",{className:y().determinOutline,children:(0,n.jsx)(M.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",block:!0,onClick:function(){h(void 0)},children:"Determine Outline"})}),(0,n.jsx)(Q.Z,{selectedLabel:r,onLabelSelect:function(e){l(e),h(void 0)},onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}}),(0,n.jsx)(q.Z,{selectedAnnotation:S,annotations:g,onAnnotationSelect:function(e){e!=null&&e.delete||h(e)},onAnnotationAdd:function(){},onAnnotationModify:function(){},onAnnotationDelete:function(e){P(g.filter(function(C){return C.annotationId!=e.annotationId})),h(void 0)}})]})]})},un=ln}}]);
