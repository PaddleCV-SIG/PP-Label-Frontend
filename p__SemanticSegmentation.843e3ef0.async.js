(self.webpackChunkpp_labeling_frontend=self.webpackChunkpp_labeling_frontend||[]).push([[540],{91220:function(L,D,n){"use strict";n.d(D,{Z:function(){return S}});var I=n(64254);function S(_,d){var M;if(typeof Symbol=="undefined"||_[Symbol.iterator]==null){if(Array.isArray(_)||(M=(0,I.Z)(_))||d&&_&&typeof _.length=="number"){M&&(_=M);var s=0,B=function(){};return{s:B,n:function(){return s>=_.length?{done:!0}:{done:!1,value:_[s++]}},e:function(r){throw r},f:B}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,e=!1,i;return{s:function(){M=_[Symbol.iterator]()},n:function(){var r=M.next();return u=r.done,r},e:function(r){e=!0,i=r},f:function(){try{!u&&M.return!=null&&M.return()}finally{if(e)throw i}}}}},26647:function(L){L.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1FTWb",toolBarButtonContainer:"toolBarButtonContainer___1Vahn",toolBarButton:"toolBarButton___3mR2H",buttonText:"buttonText___Y0WDm",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3lRZ8",popover:"popover___3zzu2"}},54777:function(L){L.exports={segment:"segment___1YMcl",mainStage:"mainStage___2otee",rightSideBar:"rightSideBar___2X7jK",determinOutline:"determinOutline___2ls57"}},27992:function(L,D,n){"use strict";var I=n(20136),S=n(55241),_=n(77883),d=n(70507),M=n(57663),s=n(71577),B=n(2824),u=n(67294),e=n(61541),i=n(26647),a=n.n(i),r=n(85893),m=1,P=100,f=10;function v(t){return t?t<=m?m:t>=P?P:t:f}var C=function(c){var x=(0,u.useState)(v(c.size)),y=(0,B.Z)(x,2),A=y[0],E=y[1],T=function(g){E(v(g))};return(0,u.useEffect)(function(){T(c.size)},[c.size]),(0,r.jsxs)(S.Z,{overlayClassName:a().popover,placement:c.disLoc||"right",content:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.Z,{type:"text",onClick:function(){var g,h=v(A-1);T(h),(g=c.onChange)===null||g===void 0||g.call(0,h)},children:"-"}),(0,r.jsx)(d.Z,{min:m,max:P,value:A,onChange:function(g){var h;(h=c.onChange)===null||h===void 0||h.call(0,g)},controls:!1,style:{textAlign:"center"}}),(0,r.jsx)(s.Z,{type:"text",onClick:function(){var g,h=v(A+1);T(h),(g=c.onChange)===null||g===void 0||g.call(0,h)},children:"+"})]}),trigger:"hover",children:[" ",(0,r.jsx)(e.Z,{imgSrc:c.imgSrc,onClick:c.onClick,children:c.children})]})};D.Z=C},13931:function(L,D,n){"use strict";n.d(D,{Z:function(){return u}});var I=n(91220),S=n(67294),_=n(65031),d=n(85893);function M(e){var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:null}function s(e,i){if(!(!e||!i)){var a=M(e);if(!!a){var r=void 0,m=[];return i.forEach(function(P){if(!r){r=P;return}m.push((0,d.jsx)(_.Cd,{x:r,y:P,radius:5,fill:e})),r=void 0}),{color:e,points:i,element:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(_.x1,{stroke:e,strokeWidth:2,globalCompositeOperation:"source-over",lineCap:"round",points:i,tension:.01,closed:!0,fill:"rgba(".concat(a.r,", ").concat(a.g,", ").concat(a.b,", 0.5)")}),m]})}}}}function B(e){var i=0,a=(0,I.Z)(e),r;try{for(a.s();!(r=a.n()).done;){var m=r.value;!m||m.annotationId>i&&(i=m.annotationId)}}catch(P){a.e(P)}finally{a.f()}return i}function u(e){var i=function(f,v){var C,t=f.evt.offsetX/v,c=f.evt.offsetY/v;console.log("offsetX: ".concat(f.evt.offsetX,", offsetY: ").concat(f.evt.offsetY,", mouseX: ").concat(t,", mouseY: ").concat(c));var x=s((C=e.currentLabel)===null||C===void 0?void 0:C.color,[t,c]);!x||e.onAnnotationAdd({annotationId:B(e.annotations)+1,label:e.currentLabel,lines:[x]})},a=function(f,v){var C,t;if(!!e.currentAnnotation){var c=f.evt.offsetX/v,x=f.evt.offsetY/v;console.log("offsetX: ".concat(f.evt.offsetX,", offsetY: ").concat(f.evt.offsetY,", mouseX: ").concat(c,", mouseY: ").concat(x));var y=e.currentAnnotation.lines||[],A=s((C=e.currentLabel)===null||C===void 0?void 0:C.color,(t=y[0])===null||t===void 0?void 0:t.points.concat([c,x]));if(!!A){var E={annotationId:e.currentAnnotation.annotationId,label:e.currentAnnotation.label,lines:[A]};e.onAnnotationModify(E)}}},r=function(f,v){console.log(e.currentTool),e.currentTool=="polygon"&&(e.currentAnnotation?a(f,v):i(f,v))},m=function(){e.currentTool=="polygon"};return{onMouseDown:r,onMouseMove:function(){},onMouseUp:m}}},29919:function(L,D,n){"use strict";var I=n(67294),S=n(61541),_=n(85893),d=function(s){return(0,_.jsx)(S.Z,{active:s.active,imgSrc:s.imgSrc||"./pics/buttons/polygon.png",onClick:s.onClick,children:s.children})};D.Z=d},86089:function(L,D,n){"use strict";n.r(D);var I=n(57663),S=n(71577),_=n(2824),d=n(67294),M=n(54777),s=n.n(M),B=n(8088),u=n(61541),e=n(44434),i=n(58967),a=n(27992),r=n(5041),m=n(57436),P=n(14836),f=n(29919),v=n(43801),C=n(13931),t=n(85893),c=function(){var y=(0,d.useState)(void 0),A=(0,_.Z)(y,2),E=A[0],T=A[1],p=(0,d.useState)({color:"",name:""}),g=(0,_.Z)(p,2),h=g[0],F=g[1],G=(0,d.useState)(),X=(0,_.Z)(G,2),R=X[0],J=X[1],Q=(0,d.useState)([]),Y=(0,_.Z)(Q,2),b=Y[0],W=Y[1],w=(0,d.useState)(10),N=(0,_.Z)(w,2),j=N[0],$=N[1],q=(0,d.useState)(1),H=(0,_.Z)(q,2),K=H[0],k=H[1],O=function(o){J(o),o!=null&&o.label&&F(o.label)},V=function(o){for(var Z=[],U=0;U<b.length;U++)b[U].annotationId==o.annotationId?Z.push(o):Z.push(b[U]);O(o),W(Z)},nn=(0,v.Z)({currentLabel:h,brushSize:j,currentTool:E,annotations:b,currentAnnotation:R,onAnnotationAdd:function(o){W(b.concat([o])),R||O(o)},onAnnotationModify:V}),tn=(0,C.Z)({currentLabel:h,brushSize:j,currentTool:E,annotations:b,currentAnnotation:R,onAnnotationAdd:function(o){W(b.concat([o])),R||O(o)},onAnnotationModify:V}),z=E=="polygon"?tn:nn;return(0,t.jsxs)(B.Z,{className:s().segment,children:[(0,t.jsxs)(e.Z,{children:[(0,t.jsx)(u.Z,{imgSrc:"./pics/buttons/intelligent_interaction.png",children:"Intelligent Interaction"}),(0,t.jsx)(f.Z,{active:E=="polygon",onClick:function(){T("polygon"),O(void 0)},children:"Polygon"}),(0,t.jsx)(i.Z,{size:j,active:E=="brush",onClick:function(){E!="rubber"&&E!="brush"&&O(void 0),T("brush")},onChange:function(o){$(o)},children:"Brush"}),(0,t.jsx)(i.Z,{size:j,active:E=="rubber",onClick:function(){E!="rubber"&&E!="brush"&&O(void 0),T("rubber")},onChange:function(o){$(o)},imgSrc:"./pics/buttons/rubber.png",children:"Rubber"}),(0,t.jsx)(u.Z,{imgSrc:"./pics/buttons/zoom_in.png",onClick:function(){k(K+.1)},children:"Zoom in"}),(0,t.jsx)(u.Z,{imgSrc:"./pics/buttons/zoom_out.png",onClick:function(){k(K-.1)},children:"Zoom out"}),(0,t.jsx)(u.Z,{imgSrc:"./pics/buttons/save.png",children:"Save"}),(0,t.jsx)(u.Z,{imgSrc:"./pics/buttons/move.png",children:"Move"}),(0,t.jsx)(u.Z,{imgSrc:"./pics/buttons/export.png",children:"Export"}),(0,t.jsx)(u.Z,{imgSrc:"./pics/buttons/data_division.png",children:"Divide Data"}),(0,t.jsx)(u.Z,{imgSrc:"./pics/buttons/prev.png",children:"Undo"}),(0,t.jsx)(u.Z,{imgSrc:"./pics/buttons/next.png",children:"Redo"}),(0,t.jsx)(u.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:"Clear Mark"})]}),(0,t.jsx)("div",{className:s().mainStage,children:(0,t.jsx)(m.Z,{scale:K,annotations:b,onMouseDown:z.onMouseDown,onMouseMove:z.onMouseMove,onMouseUp:z.onMouseUp})}),(0,t.jsxs)(e.Z,{disLoc:"right",children:[(0,t.jsx)(a.Z,{imgSrc:"./pics/buttons/threshold.png",disLoc:"left",children:"Segment Threshold"}),(0,t.jsx)(a.Z,{imgSrc:"./pics/buttons/alpha.png",disLoc:"left",children:"Diaphaneity"}),(0,t.jsx)(a.Z,{imgSrc:"./pics/buttons/radius.png",disLoc:"left",children:"Visual Radius"})]}),(0,t.jsxs)("div",{className:s().rightSideBar,children:[(0,t.jsx)("div",{className:s().determinOutline,children:(0,t.jsx)(S.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",block:!0,onClick:function(){O(void 0)},children:"Determine Outline"})}),(0,t.jsx)(r.Z,{selectedLabel:h,onLabelSelect:function(o){F(o),O(void 0)},onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}}),(0,t.jsx)(P.Z,{selectedAnnotation:R,annotations:b,onAnnotationSelect:function(o){o!=null&&o.delete||O(o)},onAnnotationAdd:function(){},onAnnotationModify:function(){},onAnnotationDelete:function(o){W(b.filter(function(Z){return Z.annotationId!=o.annotationId})),O(void 0)}})]})]})};D.default=c}}]);
