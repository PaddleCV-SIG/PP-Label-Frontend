(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[672],{41435:function(s,v,e){"use strict";e.d(v,{Z:function(){return _}});var g=e(94663),P=e(80112);function B(O){return Function.toString.call(O).indexOf("[native code]")!==-1}var D=e(18597);function r(O,c,h){return(0,D.Z)()?r=Reflect.construct:r=function(x,b,t){var I=[null];I.push.apply(I,b);var a=Function.bind.apply(x,I),f=new a;return t&&(0,P.Z)(f,t.prototype),f},r.apply(null,arguments)}function _(O){var c=typeof Map=="function"?new Map:void 0;return _=function(E){if(E===null||!B(E))return E;if(typeof E!="function")throw new TypeError("Super expression must either be null or a function");if(typeof c!="undefined"){if(c.has(E))return c.get(E);c.set(E,x)}function x(){return r(E,arguments,(0,g.Z)(this).constructor)}return x.prototype=Object.create(E.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),(0,P.Z)(x,E)},_(O)}},52822:function(s){s.exports={roundBall:"roundBall___1pqu1",popover:"popover___1-PR6"}},6277:function(s){s.exports={modal:"modal___26yNn"}},45092:function(s){s.exports={modal:"modal___1H_FQ"}},5882:function(s){s.exports={listItem:"listItem___vtDXn",eye:"eye___AsLBS",roundBall:"roundBall___1J_R3",popover:"popover___1x-2R",delete:"delete___WHPf2",listItemActive:"listItemActive___3FRb7"}},56131:function(s){s.exports={labelList:"labelList___jvD05",listHeader:"listHeader___UM5UF",eye:"eye___II3Po",roundBall:"roundBall___j752J"}},78677:function(s){s.exports={container:"container___G0FNe"}},83930:function(s){s.exports={stage:"stage___3H5QL"}},80961:function(s){s.exports={leftToolbar:"leftToolbar___1xi4t",rightToolbar:"rightToolbar___3dNSB"}},82499:function(s){s.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1SHWL",toolBarButtonContainer:"toolBarButtonContainer___1jKUz",toolBarButton:"toolBarButton___3Ouq1",buttonText:"buttonText___10ls7",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AA28"}},73199:function(){},63097:function(s,v,e){"use strict";var g=e(20136),P=e(55241),B=e(2824),D=e(67294),r=e(52822),_=e.n(r),O=e(63144),c=e(85893),h=function(x){var b=(0,D.useState)(x.color||"#FFF"),t=(0,B.Z)(b,2),I=t[0],a=t[1];return(0,D.useEffect)(function(){a(x.color||"#FFF")},[x]),x.changeable?(0,c.jsx)(P.Z,{getPopupContainer:function(j){return j.parentElement||document.body},overlayClassName:_().popover,openClassName:_().popoverOpenClassName,placement:"bottom",content:(0,c.jsx)(O.xS,{disableAlpha:!0,color:I,onChange:function(j){a(j.hex)},onChangeComplete:x.onChange}),trigger:"click",children:(0,c.jsx)("div",{className:_().roundBall,style:{backgroundColor:I}})}):(0,c.jsx)("div",{className:_().roundBall,style:{backgroundColor:I}})};v.Z=h},85871:function(s,v,e){"use strict";var g=e(71194),P=e(50146),B=e(49111),D=e(19650),r=e(57663),_=e(71577),O=e(13062),c=e(71230),h=e(89032),E=e(15746),x=e(77883),b=e(70507),t=e(34792),I=e(48086),a=e(9715),f=e(93766),j=e(2824),C=e(67294),W=e(48971),G=e(6277),o=e.n(G),u=e(85893),F=function(R){var A=(0,W.YB)(),p=(0,C.useState)(60),S=(0,j.Z)(p,2),U=S[0],Z=S[1],n=(0,C.useState)(20),l=(0,j.Z)(n,2),m=l[0],i=l[1],M=(0,C.useState)(20),L=(0,j.Z)(M,2),N=L[0],K=L[1],$=(0,C.useState)(!1),y=(0,j.Z)($,2),Y=y[0],X=y[1],k=(0,W.YB)().formatMessage({id:"pages.toolBar.divideData"}),z=(0,W.YB)().formatMessage({id:"component.PPDivideDataModal.train"}),H=(0,W.YB)().formatMessage({id:"component.PPDivideDataModal.validation"}),J=(0,W.YB)().formatMessage({id:"component.PPDivideDataModal.test"}),Q=(0,W.YB)().formatMessage({id:"component.PPCreater.cancel"}),V=(0,W.YB)().formatMessage({id:"component.PPSegMode.ok"}),q=f.Z.useForm(),te=(0,j.Z)(q,1),ee=te[0];return(0,u.jsx)(P.Z,{className:o().modal,title:k,visible:R.visible,onCancel:R.onCancel,footer:null,children:(0,u.jsxs)(f.Z,{form:ee,name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!1},onFinish:function(){if(U+m+N!=100){I.default.error("Train, Validation and Test total percent should equal 100!");return}console.log("x trainData: ".concat(U,", validationData: ").concat(m,", testData: ").concat(N,", props.project.curr.projectId: ").concat(R.project.curr.projectId)),X(!0),R.splitDataset(R.project.curr.projectId,{train:U*.01,validation:m*.01,test:N*.01}).then(function(){var d;console.log("success"),I.default.success(A.formatMessage({id:"component.PPDivideDataModal.success"})),(d=R.onFinish)===null||d===void 0||d.call(0)}).finally(function(){X(!1)})},autoComplete:"off",layout:"vertical",children:[(0,u.jsxs)(c.Z,{children:[(0,u.jsx)(E.Z,{span:8,children:(0,u.jsx)(f.Z.Item,{label:z,name:"train",children:(0,u.jsx)(b.Z,{addonAfter:"%",defaultValue:60,precision:0,min:0,max:100,value:U,onChange:Z})})}),(0,u.jsx)(E.Z,{span:8,children:(0,u.jsx)(f.Z.Item,{label:H,name:"validation",children:(0,u.jsx)(b.Z,{addonAfter:"%",defaultValue:20,precision:0,min:0,max:100,value:m,onChange:i})})}),(0,u.jsx)(E.Z,{span:8,children:(0,u.jsx)(f.Z.Item,{label:J,name:"test",children:(0,u.jsx)(b.Z,{addonAfter:"%",defaultValue:20,precision:0,min:0,max:100,value:N,onChange:K})})})]}),(0,u.jsx)(f.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,u.jsxs)(D.Z,{children:[(0,u.jsx)(_.Z,{onClick:function(){var d;(d=R.onCancel)===null||d===void 0||d.call(0),ee.resetFields()},children:Q}),(0,u.jsx)(_.Z,{type:"primary",htmlType:"submit",loading:Y,children:V})]})})]})})};v.Z=F},62850:function(s,v,e){"use strict";var g=e(71194),P=e(50146),B=e(49111),D=e(19650),r=e(57663),_=e(71577),O=e(47673),c=e(24044),h=e(34792),E=e(48086),x=e(9715),b=e(93766),t=e(2824),I=e(67294),a=e(48971),f=e(45092),j=e.n(f),C=e(85893),W=function(o){var u=(0,a.YB)(),F=(0,I.useState)(!1),T=(0,t.Z)(F,2),R=T[0],A=T[1],p=(0,a.YB)().formatMessage({id:"component.PPCreater.cancel"}),S=b.Z.useForm(),U=(0,t.Z)(S,1),Z=U[0];return(0,C.jsx)(P.Z,{className:j().modal,title:(0,a.YB)().formatMessage({id:"component.PPExportModal.title"}),visible:o.visible,onCancel:o.onCancel,footer:null,children:(0,C.jsxs)(b.Z,{form:Z,name:"basic",labelCol:{span:6},wrapperCol:{span:16},initialValues:{remember:!1},onFinish:function(l){console.log(l);var m=l.path;if(!m){E.default.error(u.formatMessage({id:"component.PPExportModal.pathNotNull"}));return}A(!0),o.exportDataset(o.project.curr.projectId,m).then(function(){var i;E.default.success(u.formatMessage({id:"component.PPExportModal.exportSuccess"})),(i=o.onFinish)===null||i===void 0||i.call(0)}).finally(function(){A(!1)})},autoComplete:"off",children:[(0,C.jsx)(b.Z.Item,{label:u.formatMessage({id:"component.PPExportModal.path"}),name:"path",children:(0,C.jsx)(c.Z,{})}),(0,C.jsx)(b.Z.Item,{wrapperCol:{offset:6,span:16},children:(0,C.jsxs)(D.Z,{children:[(0,C.jsx)(_.Z,{onClick:function(){var l;(l=o.onCancel)===null||l===void 0||l.call(0),Z.resetFields()},children:p}),(0,C.jsx)(_.Z,{type:"primary",htmlType:"submit",loading:R,children:u.formatMessage({id:"component.PPExportModal.imagenet"})})]})})]})})};v.Z=W},5041:function(s,v,e){"use strict";e.d(v,{Z:function(){return U}});var g=e(54421),P=e(38272),B=e(57663),D=e(71577),r=e(2824),_=e(67294),O=e(56131),c=e.n(O),h=e(49111),E=e(19650),x=e(11849),b=e(5882),t=e.n(b),I=e(63097),a=e(85893),f=function(n){var l=(0,x.Z)({},n.label),m=(0,_.useState)(l.invisible),i=(0,r.Z)(m,2),M=i[0],L=i[1],N=(0,_.useState)(0),K=(0,r.Z)(N,2),$=K[0],y=K[1],Y=n.hideEye?" ":(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("a",{className:t().eye,style:{backgroundImage:M?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(H){H.stopPropagation(),L(!M),n.onLabelModify(l)}})," "]}),X=n.hideColorPicker?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)(I.Z,{color:l.color,changeable:!0,onChange:function(H){l.color=H.hex,n.onLabelModify(l)}}),k=(0,a.jsxs)(P.ZP.Item,{className:"".concat(t().listItem," ").concat(n.active?t().listItemActive:""),unselectable:"on",onClick:function(){n.onClick(l)},children:[(0,a.jsxs)(E.Z,{align:"center",size:5,children:[Y,l.name,X]}),(0,a.jsx)("a",{className:t().delete,onClick:function(H){H.stopPropagation();var J=new Date().getTime();J-$<300||(y(J),n.onLabelDelete(l))}})]});return k},j=f,C=e(71194),W=e(50146),G=e(47673),o=e(24044),u=e(9715),F=e(93766),T=e(48971),R=["#FF0000","#008000","#0000FF","#FFFF00","#FFA500","#00FFFF","#8B00FF","#FFC0CB","#7CFC00","#007FFF","#800080","#36BF36","#DAA520","#800000","#008B8B","#B22222","#E6D933","#000080","#FF00FF","#FFFF99","#87CEEB","#5C50E6","#CD5C5C","#20B2AA","#E680FF","#4D1F00","#006374","#B399FF","#8B4513","#BA55D3","#C0C0C0","#808080","#000000"],A=function(n){var l,m,i=(0,T.YB)().formatMessage({id:"component.PPAddLabelModal.selectColor"}),M=(0,T.YB)().formatMessage({id:"component.PPAddLabelModal.addLabel"}),L=(0,T.YB)().formatMessage({id:"component.PPAddLabelModal.labelName"}),N=(0,T.YB)().formatMessage({id:"component.PPCreater.cancel"}),K=(0,T.YB)().formatMessage({id:"component.PPSegMode.ok"}),$=(0,_.useState)(((l=n.defaultLabel)===null||l===void 0?void 0:l.color)||R[n.order||0]),y=(0,r.Z)($,2),Y=y[0],X=y[1];(0,_.useEffect)(function(){var Q;X(((Q=n.defaultLabel)===null||Q===void 0?void 0:Q.color)||R[n.order||0])},[n]);var k=n.hideColorPicker?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)(F.Z.Item,{label:i,name:"color",children:(0,a.jsx)(I.Z,{color:Y,onChange:function(V){X(V.hex)}})}),z=F.Z.useForm(),H=(0,r.Z)(z,1),J=H[0];return(0,a.jsx)(W.Z,{title:M,visible:n.visible,onCancel:n.onCancel,footer:null,children:(0,a.jsxs)(F.Z,{form:J,name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!1,labelname:(m=n.defaultLabel)===null||m===void 0?void 0:m.name},onFinish:function(V){var q={name:V.labelname,color:Y};n.onLabelAdd(q),J.resetFields()},autoComplete:"off",children:[(0,a.jsx)(F.Z.Item,{label:L,name:"labelname",rules:[{required:!0,message:"Please input label name!"}],children:(0,a.jsx)(o.Z,{})}),k,(0,a.jsx)(F.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,a.jsxs)(E.Z,{children:[(0,a.jsx)(D.Z,{onClick:function(){var V;(V=n.onCancel)===null||V===void 0||V.call(0),J.resetFields()},children:N}),(0,a.jsx)(D.Z,{type:"primary",htmlType:"submit",children:K})]})})]})})},p=A,S=function(n){var l,m=(0,T.YB)().formatMessage({id:"component.PPLabelList.addLabel"}),i=(0,T.YB)().formatMessage({id:"component.PPLabelList.labelList"}),M=(0,_.useState)(!1),L=(0,r.Z)(M,2),N=L[0],K=L[1];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(P.ZP,{className:c().labelList,size:"large",header:(0,a.jsx)("div",{className:c().listHeader,children:i}),footer:(0,a.jsx)("div",{children:(0,a.jsx)(D.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){K(!0)},block:!0,children:m})}),bordered:!0,dataSource:n.labels,renderItem:function(y){var Y;return(0,a.jsx)(j,{hideColorPicker:n.hideColorPicker,hideEye:n.hideEye,onClick:n.onLabelSelect,label:y,active:(Y=n.activeIds)===null||Y===void 0?void 0:Y.has(y.labelId),onLabelDelete:n.onLabelDelete,onLabelModify:n.onLabelModify})}}),(0,a.jsx)(p,{hideColorPicker:n.hideColorPicker,order:(l=n.labels)===null||l===void 0?void 0:l.length,visible:N,onLabelAdd:function(y){n.onLabelAdd(y),K(!1)},onCancel:function(){K(!1)}})]})},U=S},8088:function(s,v,e){"use strict";var g=e(67294),P=e(78677),B=e.n(P),D=e(85893),r=function(O){return(0,D.jsx)("div",{className:"".concat(B().container," ").concat(O.className),children:O.children})};v.Z=r},57436:function(s,v,e){"use strict";var g=e(91220),P=e(2824),B=e(67294),D=e(65031),r=e(84420),_=e.n(r),O=e(83930),c=e.n(O),h=e(85893),E="./pics/basketball.jpg",x=function(t){var I=_()(t.imgSrc||""),a=(0,P.Z)(I,1),f=a[0],j=(0,B.useState)(0),C=(0,P.Z)(j,2),W=C[0],G=C[1],o=(0,B.useState)(0),u=(0,P.Z)(o,2),F=u[0],T=u[1],R=(0,B.useState)({x:0,y:0}),A=(0,P.Z)(R,2),p=A[0],S=A[1];function U(){var M=document.getElementById("dr");M&&(G(M.clientWidth),T(M.clientHeight))}(0,B.useEffect)(function(){window.removeEventListener("resize",U),window.addEventListener("resize",U);var M=document.getElementById("dr");M&&(G(M.clientWidth),T(M.clientHeight))},[]);var Z=[];if(t.annotations){var n=(0,g.Z)(t.annotations),l;try{for(n.s();!(l=n.n()).done;){var m=l.value;if(!!m){console.log("PPStage rendering annotation:",m,"annotation.tool:",m.tool);var i=void 0;switch(m.type){case"polygon":i=t.createPolygonFunc;break;case"brush":i=t.createBrushFunc;break;case"rubber":i=t.createBrushFunc;break;case"rectangle":i=t.createRectangleFunc;break;default:i=null}i&&Z.push(i(m,t.onAnnotationModify,t.onAnnotationModifyComplete,t.scale,t.currentTool,t.setCurrentAnnotation,t.currentAnnotation))}}}catch(M){n.e(M)}finally{n.f()}}return(0,h.jsx)(D.Hf,{width:W,height:F,offsetX:-W/2,offsetY:-F/2,className:c().stage,children:(0,h.jsx)(D.mh,{onMouseDown:function(L){t.onMouseDown&&t.onMouseDown(L,-W/2-p.x,-F/2-p.y,t.scale)},onMouseMove:function(L){t.onMouseMove&&t.onMouseMove(L,t.scale)},onMouseUp:function(L){t.onMouseUp&&t.onMouseUp(L,t.scale)},onContextMenu:function(L){L.evt.preventDefault()},draggable:!1,children:(0,h.jsxs)(D.ZA,{draggable:t.currentTool=="mover",scaleX:t.scale,scaleY:t.scale,onDragEnd:function(L){t.currentTool=="mover"&&S({x:L.target.x(),y:L.target.y()})},children:[(0,h.jsx)(D.Ee,{draggable:!1,image:f,x:-((f==null?void 0:f.width)||0)/2,y:-((f==null?void 0:f.height)||0)/2}),Z]})})})};v.Z=x},44434:function(s,v,e){"use strict";var g=e(67294),P=e(80961),B=e.n(P),D=e(85893),r=function(O){var c=B().leftToolbar;return O.disLoc=="right"&&(c=B().rightToolbar),(0,D.jsx)("div",{className:c,children:O.children})};v.Z=r},61541:function(s,v,e){"use strict";var g=e(49111),P=e(19650),B=e(67294),D=e(82499),r=e.n(D),_=e(85893),O=function(h){return(0,_.jsx)("div",{unselectable:"on",className:"".concat(r().toolBarButtonContainerWrapper," ").concat(h.active&&r().toolBarButtonContainerWrapperActive),onClick:h.onClick,children:(0,_.jsx)(P.Z,{align:"center",className:r().toolBarButtonContainer,size:0,children:(0,_.jsxs)(P.Z,{align:"center",direction:"vertical",className:r().toolBarButton,size:0,children:[(0,_.jsx)("img",{src:h.imgSrc}),(0,_.jsx)("div",{className:r().buttonText,children:h.children})]})})})};v.Z=O},29214:function(s,v,e){"use strict";e.r(v);var g=e(11849),P=e(20228),B=e(11382),D=e(34669),r=e(54458),_=e(34792),O=e(48086),c=e(2824),h=e(67294),E=e(73199),x=e.n(E),b=e(8088),t=e(61541),I=e(44434),a=e(5041),f=e(57436),j=e(64322),C=e(48971),W=e(85871),G=e(62850),o=e(85893),u=function(){var T,R=(0,j.$L)(h.useState,h.useEffect,{label:{oneHot:!1,postSetCurr:ee},tool:{defaultTool:"mover"},effectTrigger:{postTaskChange:ne}}),A=(0,c.Z)(R,10),p=A[0],S=A[1],U=A[2],Z=A[3],n=A[4],l=A[5],m=A[6],i=A[7],M=A[8],L=A[9],N=(0,h.useState)(!1),K=(0,c.Z)(N,2),$=K[0],y=K[1],Y=(0,h.useState)(!1),X=(0,c.Z)(Y,2),k=X[0],z=X[1],H=(0,C.YB)().formatMessage({id:"pages.toolBar.zoomIn"}),J=(0,C.YB)().formatMessage({id:"pages.toolBar.zoomOut"}),Q=(0,C.YB)().formatMessage({id:"pages.toolBar.move"}),V=(0,C.YB)().formatMessage({id:"pages.toolBar.save"}),q=(0,C.YB)().formatMessage({id:"pages.toolBar.divideData"}),te=(0,C.YB)().formatMessage({id:"pages.toolBar.export"});function ee(d){if(i.isActive(d))Z.create({taskId:n.curr.taskId,labelId:d.labelId,dataId:l.curr.dataId});else{var w=Z.all.filter(function(ae){return ae.labelId==d.labelId})[0];Z.remove(w.annotationId)}}function ne(d,w){S.setCurr(!0),!(!d||!w)&&(i.initActive(w),S.setCurr(!1))}return(0,o.jsxs)(b.Z,{className:x().classes,children:[(0,o.jsxs)(I.Z,{children:[(0,o.jsx)(t.Z,{imgSrc:"./pics/buttons/zoom_in.png",onClick:function(){U.change(.1)},children:H}),(0,o.jsx)(t.Z,{imgSrc:"./pics/buttons/zoom_out.png",onClick:function(){U.change(-.1)},children:J}),(0,o.jsx)(t.Z,{imgSrc:"./pics/buttons/save.png",onClick:function(){O.default.info("Annotations are saved automatically. You don't need to click save.")},children:V}),(0,o.jsx)(t.Z,{imgSrc:"./pics/buttons/move.png",active:p.curr=="mover",onClick:function(){p.setCurr("mover"),O.default.info("You can move the image now.")},children:Q})]}),(0,o.jsx)("div",{id:"dr",className:"mainStage",children:(0,o.jsxs)(B.Z,{tip:"loading",spinning:S.curr,children:[(0,o.jsx)("div",{className:"draw",children:(0,o.jsx)(f.Z,{scale:U.curr,currentTool:p.curr,setCurrentAnnotation:function(){},onAnnotationModify:function(){},onAnnotationModifyComplete:function(){},imgSrc:l.imgSrc})}),(0,o.jsx)("div",{className:"pblock",children:(0,o.jsxs)("div",{className:"progress",children:[(0,o.jsx)(r.Z,{className:"progressBar",percent:m.progress,status:"active",showInfo:!1})," ",(0,o.jsxs)("span",{className:"progressDesc",children:["Current labeling ",n.currIdx==null?1:n.currIdx+1," of"," ",(T=n.all)===null||T===void 0?void 0:T.length,". Already labeled ",n.finished(m.progress)||0,"."]})]})}),(0,o.jsx)("div",{className:"prevTask",onClick:n.prevTask}),(0,o.jsx)("div",{className:"nextTask",onClick:n.nextTask})]})}),(0,o.jsxs)(I.Z,{disLoc:"right",children:[(0,o.jsx)(t.Z,{imgSrc:"./pics/buttons/data_division.png",onClick:function(){y(!0)},children:q}),(0,o.jsx)(t.Z,{imgSrc:"./pics/buttons/export.png",onClick:function(){z(!0)},children:te})]}),(0,o.jsx)("div",{className:"rightSideBar",children:(0,o.jsx)(a.Z,{labels:i.all,activeIds:i.activeIds,onLabelSelect:i.onSelect,onLabelAdd:function(w){return i.create((0,g.Z)((0,g.Z)({},w),{},{projectId:m.curr.projectId}))},onLabelDelete:i.remove,onLabelModify:function(){},hideColorPicker:!0,hideEye:!0})}),(0,o.jsx)(W.Z,{visible:$,splitDataset:M,project:m,onCancel:function(){y(!1)},onFinish:function(){y(!1)}}),(0,o.jsx)(G.Z,{visible:k,exportDataset:L,project:m,onCancel:function(){z(!1)},onFinish:function(){z(!1)}})]})};v.default=u},15746:function(s,v,e){"use strict";var g=e(21584);v.Z=g.Z},89032:function(s,v,e){"use strict";var g=e(38663),P=e.n(g),B=e(6999)},71230:function(s,v,e){"use strict";var g=e(92820);v.Z=g.Z},13062:function(s,v,e){"use strict";var g=e(38663),P=e.n(g),B=e(6999)}}]);
