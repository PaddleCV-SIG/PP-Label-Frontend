(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[322],{64322:function(ue,N,D){"use strict";D.d(N,{gu:function(){return z},_D:function(){return X},Gd:function(){return Y},jL:function(){return q},iA:function(){return x},CV:function(){return ee},A5:function(){return re}});var F=D(86582),K=D(91220),Z=D(3182),te=D(34792),w=D(48086),C=D(2824),G=D(94043),l=D.n(G),L=D(37071),j=D(81139),W=localStorage.getItem("basePath"),R=new j.VK(W?{basePath:W}:void 0),M=new j.U(R),J=new j.sD(R),V=new j.W6(R),B=new j.Cl(R),H=new j.vb(R),z=function(p){return JSON.parse(JSON.stringify(p))};function se(S){return S&&(S.toLowerCase().replace(/([-_][a-z])/g,function(p){return p.toUpperCase().replace("-","").replace("_","")}),S)}var Q=function(p,d,_){if(!!_){for(var i=0;i<d.length;i++)if(p[_]==d[i][_])return i}},X=function(p){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[.1,3],_=p(1),i=(0,C.Z)(_,2),O=i[0],k=i[1],A=function(g){var t=O;t+=g,t<d[0]&&(t=d[0],w.default.error("Smallest scale is "+d[0])),t>d[1]&&(t=d[1],w.default.error("Largest scale is "+d[1])),k(t)};return{curr:O,change:A}},Y=function(p){var d=p([]),_=(0,C.Z)(d,2),i=_[0],O=_[1],k=p(),A=(0,C.Z)(k,2),u=A[0],g=A[1],t=function(){var c=(0,Z.Z)(l().mark(function n(){var f;return l().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,M.getAll();case 3:return f=s.sent,O(f),s.abrupt("return",f);case 8:s.prev=8,s.t0=s.catch(0),console.log("project getAll err",s.t0),L.Z.parseError(s.t0,w.default);case 12:case"end":return s.stop()}},n,null,[[0,8]])}));return function(){return c.apply(this,arguments)}}(),m=function(){var c=(0,Z.Z)(l().mark(function n(f){var e;return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(f!=null){a.next=2;break}return a.abrupt("return",void 0);case 2:if(!(i.length>1)){a.next=5;break}return w.default.error("Currently have multiple projects stored, use turnTo instead"),a.abrupt("return");case 5:return a.prev=5,a.next=8,M.get(f);case 8:return e=a.sent,O([e]),g(0),a.abrupt("return",e);case 14:a.prev=14,a.t0=a.catch(5),console.log("prject getcurr err",a.t0),L.Z.parseError(a.t0,w.default);case 18:case"end":return a.stop()}},n,null,[[5,14]])}));return function(f){return c.apply(this,arguments)}}(),h=function(){var c=(0,Z.Z)(l().mark(function n(f){return l().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(console.log("remove project",f),typeof f!="number"){s.next=6;break}return s.next=4,M.remove(f);case 4:s.next=8;break;case 6:return s.next=8,M.remove(f.projectId);case 8:t();case 9:case"end":return s.stop()}},n)}));return function(f){return c.apply(this,arguments)}}(),o=function(){var c=(0,Z.Z)(l().mark(function n(f){var e;return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,M.create(f);case 3:return e=a.sent,console.log(e),a.abrupt("return",e);case 8:a.prev=8,a.t0=a.catch(0),console.log("project create err",a.t0),L.Z.parseError(a.t0,w.default);case 12:case"end":return a.stop()}},n,null,[[0,8]])}));return function(f){return c.apply(this,arguments)}}(),r=function(){var c=(0,Z.Z)(l().mark(function n(f,e){return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:M.update(f,e).then(function(T){console.log("project update res",T)}).catch(function(T){console.log("project update err ",T),L.Z.parseError(T,w.default)});case 1:case"end":return a.stop()}},n)}));return function(f,e){return c.apply(this,arguments)}}();return{all:i,getAll:t,getCurr:m,remove:h,create:o,update:r,get curr(){if(u!=null)return i[u]}}},q=function(p,d){var _=d.oneHot,i=_===void 0?!0:_,O=d.pageOnSelect,k=p(),A=(0,C.Z)(k,2),u=A[0],g=A[1],t=p(),m=(0,C.Z)(t,2),h=m[0],o=m[1],r=p(i),c=(0,C.Z)(r,2),n=c[0],f=c[1],e=function(){var I=(0,Z.Z)(l().mark(function U(P){var E,v,b,$;return l().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.prev=0,y.next=3,M.getLabels(P);case 3:E=y.sent,v=(0,K.Z)(E);try{for(v.s();!(b=v.n()).done;)$=b.value,$.active=!1}catch(le){v.e(le)}finally{v.f()}return g(E),y.abrupt("return",E);case 10:y.prev=10,y.t0=y.catch(0),console.log("label getall err ",y.t0),L.Z.parseError(y.t0,w.default);case 14:case"end":return y.stop()}},U,null,[[0,10]])}));return function(P){return I.apply(this,arguments)}}(),s=function(U){var P=Q(U,u,"labelId");if(o(P),console.log("onehot",n),n){var E=(0,K.Z)(u),v;try{for(E.s();!(v=E.n()).done;){var b=v.value;b.active=!1}}catch($){E.e($)}finally{E.f()}u[P].active=!0,console.log("all",u)}else u[P].active=!u[P].active;O(u[P]),g((0,F.Z)(u))},a=function(){var I=(0,Z.Z)(l().mark(function U(P){var E;return l().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.prev=0,b.next=3,H.create(P);case 3:return E=b.sent,E.active=!1,g([].concat((0,F.Z)(u),[E])),b.abrupt("return",E);case 9:b.prev=9,b.t0=b.catch(0),console.log("label create err",b.t0),L.Z.parseError(b.t0,w.default);case 13:case"end":return b.stop()}},U,null,[[0,9]])}));return function(P){return I.apply(this,arguments)}}(),T=function(){var I=(0,Z.Z)(l().mark(function U(P){return l().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return console.log("remove label",P),v.prev=1,v.next=4,H.remove(P.labelId);case 4:g(u.filter(function(b){return b.labelId!=P.labelId})),v.next=11;break;case 7:v.prev=7,v.t0=v.catch(1),console.log("label remove err",v.t0),L.Z.parseError(v.t0,w.default);case 11:case"end":return v.stop()}},U,null,[[1,7]])}));return function(P){return I.apply(this,arguments)}}(),ae=function(){},ne=function(){f(!n)};return{all:u,getAll:e,setAll:g,onSelect:s,create:a,remove:T,onModify:ae,toggleOneHot:ne,get curr(){if(h!=null)return u[h]}}},x=function(p){var d=p(),_=(0,C.Z)(d,2),i=_[0],O=_[1],k=p(),A=(0,C.Z)(k,2),u=A[0],g=A[1],t=function(o){if(o<0){w.default.error("This is the first image. No previous image.");return}if(o==i.length){w.default.error("This is the final image. No next image.");return}console.log("turning to",o),g(o)},m=function(){var h=(0,Z.Z)(l().mark(function o(r,c){var n;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.getTasks(r);case 3:if(n=e.sent,O(n),c==null){e.next=9;break}return console.log("getall turnto"),t(c),e.abrupt("return",[n,n[c]]);case 9:return e.abrupt("return",n);case 12:e.prev=12,e.t0=e.catch(0),console.log("task getall err ",e.t0),L.Z.parseError(e.t0,w.default);case 16:case"end":return e.stop()}},o,null,[[0,12]])}));return function(r,c){return h.apply(this,arguments)}}();return{currIdx:u,all:i,turnTo:t,getAll:m,get curr(){if(!(u==null||i==null))return console.log("task.curr",i[u]),i[u]}}},ee=function(p){var d=p(),_=(0,C.Z)(d,2),i=_[0],O=_[1],k=function(){var g=(0,Z.Z)(l().mark(function t(m){var h;return l().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,V.getAnnotations(m);case 3:return h=r.sent,r.next=6,O(h);case 6:return r.abrupt("return",h);case 9:r.prev=9,r.t0=r.catch(0),console.log("ann getAll err",r.t0),L.Z.parseError(r.t0,w.default);case 13:case"end":return r.stop()}},t,null,[[0,9]])}));return function(m){return g.apply(this,arguments)}}(),A=function(){var g=(0,Z.Z)(l().mark(function t(m){var h;return l().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("create",m),r.prev=1,r.next=4,B.create(m);case 4:return h=r.sent,k(m.dataId),r.abrupt("return",h);case 9:r.prev=9,r.t0=r.catch(1),console.log("annotation create err",r.t0),L.Z.parseError(r.t0,w.default);case 13:case"end":return r.stop()}},t,null,[[1,9]])}));return function(m){return g.apply(this,arguments)}}(),u=function(){var g=(0,Z.Z)(l().mark(function t(m){return l().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:try{B.remove(m)}catch(r){console.log("annotation remove err",r),L.Z.parseError(r,w.default)}case 1:case"end":return o.stop()}},t)}));return function(m){return g.apply(this,arguments)}}();return{all:i,getAll:k,create:A,remove:u}},re=function(p){var d=p(),_=(0,C.Z)(d,2),i=_[0],O=_[1],k=p([]),A=(0,C.Z)(k,2),u=A[0],g=A[1],t=function(){var h=(0,Z.Z)(l().mark(function o(r){return l().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:O(r);case 1:case"end":return n.stop()}},o)}));return function(r){return h.apply(this,arguments)}}(),m=function(){var h=(0,Z.Z)(l().mark(function o(r,c){var n;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J.getDatas(r);case 3:if(n=e.sent,g(n),c==null){e.next=8;break}return t(c),e.abrupt("return",[n,n[c]]);case 8:return e.abrupt("return",n);case 11:e.prev=11,e.t0=e.catch(0),console.log("data getall err ",e.t0),L.Z.parseError(e.t0,w.default);case 15:case"end":return e.stop()}},o,null,[[0,11]])}));return function(r,c){return h.apply(this,arguments)}}();return{all:u,getAll:m,turnTo:t,get curr(){if(!(i==null||u==null))return u[i]}}}}}]);
