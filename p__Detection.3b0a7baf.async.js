(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[18],{41435:function(_,g,n){"use strict";n.d(g,{Z:function(){return f}});var m=n(94663),A=n(80112);function T(o){return Function.toString.call(o).indexOf("[native code]")!==-1}var N=n(18597);function y(o,i,S){return(0,N.Z)()?y=Reflect.construct:y=function(I,x,F){var r=[null];r.push.apply(r,x);var V=Function.bind.apply(I,r),l=new V;return F&&(0,A.Z)(l,F.prototype),l},y.apply(null,arguments)}function f(o){var i=typeof Map=="function"?new Map:void 0;return f=function(a){if(a===null||!T(a))return a;if(typeof a!="function")throw new TypeError("Super expression must either be null or a function");if(typeof i!="undefined"){if(i.has(a))return i.get(a);i.set(a,I)}function I(){return y(a,arguments,(0,m.Z)(this).constructor)}return I.prototype=Object.create(a.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),(0,A.Z)(I,a)},f(o)}},85024:function(_){_.exports={listItem:"listItem___u4Q82",eye:"eye___BwaRm",delete:"delete___31JB_",roundBall:"roundBall___23A7l",popover:"popover___1BNET",annotationId:"annotationId___zAzX4",labelName:"labelName___2ohxn",listItemActive:"listItemActive___2QnA3"}},56159:function(_){_.exports={labelList:"labelList___v7C6K",listHeader:"listHeader___1aY8R",eye:"eye___2MKbp",roundBall:"roundBall___187XH"}},6277:function(_){_.exports={modal:"modal___26yNn"}},45092:function(_){_.exports={modal:"modal___1H_FQ"}},72285:function(_){_.exports={det:"det___3GOn8",mainStage:"mainStage___36l4G",draw:"draw___1EIyT",pblock:"pblock___107zJ",progress:"progress___vIcpV",rightSideBar:"rightSideBar___3n2bi",determinOutline:"determinOutline___1p2xS"}},14836:function(_,g,n){"use strict";n.d(g,{Z:function(){return j}});var m=n(54421),A=n(38272),T=n(57663),N=n(71577),y=n(91220),f=n(67294),o=n(56159),i=n.n(o),S=n(49111),a=n(19650),I=n(2824),x=n(8870),F=n(85024),r=n.n(F),V=n(63097),l=n(85893),R=function(u){var D=(0,x.Z)({},u.annotation),p=(0,f.useState)(D.invisible),E=(0,I.Z)(p,2),U=E[0],Z=E[1],C=(0,f.useState)(0),P=(0,I.Z)(C,2),K=P[0],c=P[1];(0,f.useEffect)(function(){Z(u.annotation.invisible)},[u.annotation.invisible]);var v=(0,l.jsxs)(A.ZP.Item,{className:"".concat(r().listItem," ").concat(u.active?r().listItemActive:""),unselectable:"on",onClick:function(){u.onClick(D)},children:[(0,l.jsxs)(a.Z,{align:"center",size:5,children:[(0,l.jsx)("a",{className:r().eye,style:{backgroundImage:U?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(H){H.stopPropagation(),Z(!U),u.onAnnotationModify(D)}})," ",(0,l.jsx)("span",{className:r().annotationId,children:D.frontendId}),(0,l.jsx)("span",{className:r().labelName,children:D.label.name}),(0,l.jsx)(V.Z,{color:D.label.color})]}),(0,l.jsx)("a",{className:r().delete,onClick:function(H){H.stopPropagation();var Y=new Date().getTime();Y-K<300||(c(Y),u.onAnnotationDelete(D))}})]});return v},M=R,e=n(48971),X=function(u){var D=(0,e.YB)(),p=D.formatMessage({id:"component.PPAnnotationList.annotationList"}),E=D.formatMessage({id:"component.PPAnnotationList.addAnnotation"}),U=new Set,Z=[],C=(0,y.Z)(u.annotations),P;try{for(C.s();!(P=C.n()).done;){var K=P.value;U.has(K.frontendId)||(Z.push(K),U.add(K.frontendId))}}catch(c){C.e(c)}finally{C.f()}return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(A.ZP,{className:i().labelList,size:"large",header:(0,l.jsx)("div",{className:i().listHeader,children:p}),bordered:!0,dataSource:Z,renderItem:function(v){var O;return(0,l.jsx)(M,{onClick:u.onAnnotationSelect,annotation:v,active:v.frontendId==((O=u.currAnnotation)===null||O===void 0?void 0:O.frontendId),onAnnotationDelete:u.onAnnotationDelete,onAnnotationModify:u.onAnnotationModify})},footer:(0,l.jsx)("div",{children:(0,l.jsx)(N.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){u.onAnnotationAdd()},block:!0,children:E})})})})},j=X},85871:function(_,g,n){"use strict";var m=n(71194),A=n(50146),T=n(49111),N=n(19650),y=n(57663),f=n(71577),o=n(13062),i=n(71230),S=n(89032),a=n(15746),I=n(77883),x=n(70507),F=n(34792),r=n(48086),V=n(9715),l=n(93766),R=n(2824),M=n(67294),e=n(48971),X=n(6277),j=n.n(X),d=n(85893),u=function(p){var E=(0,e.YB)(),U=(0,M.useState)(60),Z=(0,R.Z)(U,2),C=Z[0],P=Z[1],K=(0,M.useState)(20),c=(0,R.Z)(K,2),v=c[0],O=c[1],H=(0,M.useState)(20),Y=(0,R.Z)(H,2),L=Y[0],nn=Y[1],k=(0,M.useState)(!1),b=(0,R.Z)(k,2),rn=b[0],tn=b[1],ln=E.formatMessage({id:"pages.toolBar.divideData"}),en=E.formatMessage({id:"component.PPDivideDataModal.train"}),Q=E.formatMessage({id:"component.PPDivideDataModal.validation"}),h=E.formatMessage({id:"component.PPDivideDataModal.test"}),dn=E.formatMessage({id:"component.PPCreater.cancel"}),on=E.formatMessage({id:"component.PPSegMode.ok"}),W=l.Z.useForm(),J=(0,R.Z)(W,1),an=J[0];return(0,d.jsx)(A.Z,{className:j().modal,title:ln,visible:p.visible,onCancel:p.onCancel,footer:null,children:(0,d.jsxs)(l.Z,{form:an,name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!1},onFinish:function(){if(C+v+L!=100){r.default.error("Train, Validation and Test total percent should equal 100!");return}console.log("x trainData: ".concat(C,", validationData: ").concat(v,", testData: ").concat(L,", props.project.curr.projectId: ").concat(p.project.curr.projectId)),tn(!0),p.splitDataset(p.project.curr.projectId,{train:C*.01,val:v*.01,test:L*.01}).then(function(){var z;console.log("success"),r.default.success(E.formatMessage({id:"component.PPDivideDataModal.success"})),(z=p.onFinish)===null||z===void 0||z.call(0)}).finally(function(){tn(!1)})},autoComplete:"off",layout:"vertical",children:[(0,d.jsxs)(i.Z,{children:[(0,d.jsx)(a.Z,{span:8,children:(0,d.jsx)(l.Z.Item,{label:en,name:"train",children:(0,d.jsx)(x.Z,{addonAfter:"%",defaultValue:60,precision:0,min:0,max:100,value:C,onChange:P})})}),(0,d.jsx)(a.Z,{span:8,children:(0,d.jsx)(l.Z.Item,{label:Q,name:"validation",children:(0,d.jsx)(x.Z,{addonAfter:"%",defaultValue:20,precision:0,min:0,max:100,value:v,onChange:O})})}),(0,d.jsx)(a.Z,{span:8,children:(0,d.jsx)(l.Z.Item,{label:h,name:"test",children:(0,d.jsx)(x.Z,{addonAfter:"%",defaultValue:20,precision:0,min:0,max:100,value:L,onChange:nn})})})]}),(0,d.jsx)(l.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,d.jsxs)(N.Z,{children:[(0,d.jsx)(f.Z,{onClick:function(){var z;(z=p.onCancel)===null||z===void 0||z.call(0),an.resetFields()},children:dn}),(0,d.jsx)(f.Z,{type:"primary",htmlType:"submit",loading:rn,children:on})]})})]})})};g.Z=u},62850:function(_,g,n){"use strict";var m=n(71194),A=n(50146),T=n(49111),N=n(19650),y=n(57663),f=n(71577),o=n(47673),i=n(24044),S=n(34792),a=n(48086),I=n(9715),x=n(93766),F=n(2824),r=n(67294),V=n(48971),l=n(45092),R=n.n(l),M=n(85893),e=function(j){var d=(0,V.YB)(),u=(0,r.useState)(!1),D=(0,F.Z)(u,2),p=D[0],E=D[1],U=d.formatMessage({id:"component.PPCreater.cancel"}),Z=x.Z.useForm(),C=(0,F.Z)(Z,1),P=C[0];return(0,M.jsx)(A.Z,{className:R().modal,title:d.formatMessage({id:"component.PPExportModal.title"}),visible:j.visible,onCancel:j.onCancel,footer:null,children:(0,M.jsxs)(x.Z,{form:P,name:"basic",labelCol:{span:6},wrapperCol:{span:16},initialValues:{remember:!1},onFinish:function(c){console.log(c);var v=c.path;if(!v){a.default.error(d.formatMessage({id:"component.PPExportModal.pathNotNull"}));return}E(!0),j.exportDataset(j.project.curr.projectId,v).then(function(){var O;a.default.success(d.formatMessage({id:"component.PPExportModal.exportSuccess"})),(O=j.onFinish)===null||O===void 0||O.call(0)}).finally(function(){E(!1)})},autoComplete:"off",children:[(0,M.jsx)(x.Z.Item,{label:d.formatMessage({id:"component.PPExportModal.path"}),name:"path",children:(0,M.jsx)(i.Z,{})}),(0,M.jsx)(x.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,M.jsxs)(N.Z,{children:[(0,M.jsx)(f.Z,{onClick:function(){var c;(c=j.onCancel)===null||c===void 0||c.call(0),P.resetFields()},children:U}),(0,M.jsx)(f.Z,{type:"primary",htmlType:"submit",loading:p,children:d.formatMessage({id:"component.PPExportModal.export"})})]})})]})})};g.Z=e},91861:function(_,g,n){"use strict";n.d(g,{Ad:function(){return A},k3:function(){return T},Vd:function(){return N},td:function(){return y}});var m=40;function A(){localStorage.removeItem("history"),T([])}function T(f){var o=localStorage.getItem("history"),i=o?JSON.parse(o):{index:-1,items:[]};if(JSON.stringify(i.items[i.index])!=JSON.stringify(f)){var S=i.index>m?i.index-m:0,a=i.items.splice(S,i.index==0?1:i.index+1);i.items=a.concat([f]),i.index<=m?i.index++:i.index=m+1,localStorage.setItem("history",JSON.stringify(i))}}function N(){var f=localStorage.getItem("history");if(!!f){var o=JSON.parse(f);if(!!o&&!(o.index>=o.items.length-1))return o.index++,localStorage.setItem("history",JSON.stringify(o)),o.items[o.index]}}function y(){var f=localStorage.getItem("history");if(!!f){var o=JSON.parse(f);if(!(!o||!o.index)&&!(o.index<=0))return o.index--,localStorage.setItem("history",JSON.stringify(o)),o.items[o.index]}}},30289:function(_,g,n){"use strict";n.r(g),n.d(g,{default:function(){return Z}});var m=n(8870),A=n(20228),T=n(11382),N=n(34669),y=n(54458),f=n(34792),o=n(48086),i=n(91220),S=n(2824),a=n(67294),I=n(72285),x=n.n(I),F=n(8088),r=n(61541),V=n(44434),l=n(5041),R=n(57436),M=n(14836),e=n(85893),X=function(P){return(0,e.jsx)(r.Z,{active:P.active,imgSrc:P.imgSrc||"./pics/buttons/rectangle.png",onClick:P.onClick,children:P.children})},j=X,d=n(72384),u=n(91861),D=n(48971),p=n(85871),E=n(62850),U=function(){var P,K=(0,d.$L)(a.useState,a.useEffect,{label:{oneHot:!0},effectTrigger:{postTaskChange:u.Ad}}),c=(0,S.Z)(K,10),v=c[0],O=c[1],H=c[2],Y=c[3],L=c[4],nn=c[5],k=c[6],b=c[7],rn=c[8],tn=c[9],ln=(0,a.useState)(),en=(0,S.Z)(ln,2),Q=en[0],h=en[1],dn=(0,a.useState)([]),on=(0,S.Z)(dn,2),W=on[0],J=on[1],an=(0,a.useState)(!1),sn=(0,S.Z)(an,2),z=sn[0],cn=sn[1],gn=(0,a.useState)(!1),mn=(0,S.Z)(gn,2),Mn=mn[0],un=mn[1],En=function(t){if(!t.frontendId)throw new Error("addAnnotation, Annotation frontendId not generated: "+JSON.stringify(t));W.push(t),J(W),h(t)},_n=function(t){if(!t.frontendId)throw new Error("addAnnotation, Annotation frontendId not generated: "+JSON.stringify(t));var G=[],$=(0,i.Z)(W),w;try{for($.s();!(w=$.n()).done;){var q=w.value;q.frontendId==t.frontendId?G.push(t):G.push(q)}}catch(vn){$.e(vn)}finally{$.f()}console.log("modifyAnnotation, newAnnos:",G,"anno:",t),J(G),h(t)},Dn=function(t){if(!t.frontendId)throw new Error("addAnnotation, Annotation frontendId not generated: "+JSON.stringify(t));var G=[],$=(0,i.Z)(W),w;try{for($.s();!(w=$.n()).done;){var q=w.value;q.frontendId!=t.frontendId&&G.push(q)}}catch(vn){$.e(vn)}finally{$.f()}J(G),h(void 0)},Bn=function(t){!t||(console.log("modifyAnnotation",t,"anno.label:",t==null?void 0:t.label),t.taskId=L.curr.taskId,t.dataId=nn.curr.dataId,Y.modify(t))},Pn=drawRectangle({currentLabel:b.curr,currentTool:v.curr,annotations:W,currentAnnotation:Q,onAnnotationAdd:En,onAnnotationModify:_n,onMouseUp:function(){(0,u.k3)({annos:W,currAnno:Q})}}),fn=Pn,B=(0,D.YB)(),pn=B.formatMessage({id:"pages.toolBar.rectangle"}),Cn=B.formatMessage({id:"pages.toolBar.zoomIn"}),hn=B.formatMessage({id:"pages.toolBar.zoomOut"}),An=B.formatMessage({id:"pages.toolBar.move"}),xn=B.formatMessage({id:"pages.toolBar.unDo"}),On=B.formatMessage({id:"pages.toolBar.reDo"}),In=B.formatMessage({id:"pages.toolBar.save"}),yn=B.formatMessage({id:"pages.toolBar.edit"}),Sn=B.formatMessage({id:"pages.toolBar.clearMark"}),jn=B.formatMessage({id:"pages.toolBar.undef"}),Zn=B.formatMessage({id:"pages.toolBar.divideData"}),Ln=B.formatMessage({id:"pages.toolBar.export"});return(0,e.jsxs)(F.Z,{className:x().det,children:[(0,e.jsxs)(V.Z,{children:[(0,e.jsx)(j,{active:v.curr=="rectangle",onClick:function(){if(!b.curr){o.default.error("Please choose a label category first!");return}v.setCurr("rectangle"),h(void 0)},children:pn}),(0,e.jsx)(r.Z,{active:v.curr=="editor",imgSrc:"./pics/buttons/edit.png",onClick:function(){v.setCurr("editor")},children:yn}),(0,e.jsx)(r.Z,{imgSrc:"./pics/buttons/zoom_in.png",onClick:function(){H.change(.1)},children:Cn}),(0,e.jsx)(r.Z,{imgSrc:"./pics/buttons/zoom_out.png",onClick:function(){H.change(-.1)},children:hn}),(0,e.jsx)(r.Z,{imgSrc:"./pics/buttons/save.png",onClick:function(){o.default.info("Annotations are saved automatically. You don't need to click save.")},children:In}),(0,e.jsx)(r.Z,{imgSrc:"./pics/buttons/move.png",active:v.curr=="mover",onClick:function(){v.setCurr("mover")},children:An}),(0,e.jsx)(r.Z,{imgSrc:"./pics/buttons/prev.png",onClick:function(){var t=(0,u.td)();!t||(h(t.currAnno),J(t.annos))},children:xn}),(0,e.jsx)(r.Z,{imgSrc:"./pics/buttons/next.png",onClick:function(){var t=(0,u.Vd)();!t||(h(t.currAnno),J(t.annos))},children:On}),(0,e.jsx)(r.Z,{imgSrc:"./pics/buttons/clear_mark.png",onClick:function(){return console.log("clear")},children:Sn})]}),(0,e.jsx)("div",{id:"dr",className:"mainStage",children:(0,e.jsxs)(T.Z,{tip:"loading",spinning:!!O.curr,children:[(0,e.jsx)("div",{className:"draw",children:(0,e.jsx)(R.Z,{scale:H.curr,annotations:W,currentTool:v.curr,currentAnnotation:Q,setCurrentAnnotation:h,onAnnotationModify:_n,onAnnotationModifyComplete:function(){(0,u.k3)({annos:W,currAnno:Q})},onMouseDown:fn.onMouseDown,onMouseMove:fn.onMouseMove,onMouseUp:fn.onMouseUp,createRectangleFunc:Pn.createElementsFunc,imgSrc:nn.imgSrc})}),(0,e.jsx)("div",{className:"pblock",children:(0,e.jsxs)("div",{className:"progress",children:[(0,e.jsx)(y.Z,{className:"progressBar",percent:k.progress,status:"active",showInfo:!1})," ",(0,e.jsxs)("span",{className:"progressDesc",children:["Current labeling ",L.currIdx==null?1:L.currIdx+1," of"," ",(P=L.all)===null||P===void 0?void 0:P.length,". Already labeled ",L.finished(k.progress)||0,"."]})]})}),(0,e.jsx)("div",{className:"prevTask",onClick:function(){!L.prevTask()||(h(void 0),J([]))}}),(0,e.jsx)("div",{className:"nextTask",onClick:function(){!L.nextTask()||(h(void 0),J([]))}})]})}),(0,e.jsxs)(V.Z,{disLoc:"right",children:[(0,e.jsx)(r.Z,{imgSrc:"./pics/buttons/data_division.png",onClick:function(){cn(!0)},children:Zn}),(0,e.jsx)(r.Z,{imgSrc:"./pics/buttons/export.png",onClick:function(){un(!0)},children:Ln}),(0,e.jsx)(r.Z,{imgSrc:"./pics/buttons/data_division.png",onClick:function(){h(void 0)},children:jn})]}),(0,e.jsxs)("div",{className:"rightSideBar",children:[(0,e.jsx)(l.Z,{labels:b.all,activeIds:b.activeIds,onLabelSelect:function(t){b.onSelect(t),h(void 0)},onLabelModify:function(){},onLabelDelete:b.remove,onLabelAdd:function(t){return b.create((0,m.Z)((0,m.Z)({},t),{},{projectId:k.curr.projectId}))}}),(0,e.jsx)(M.Z,{annotations:W,currAnnotation:Q,onAnnotationSelect:h,onAnnotationAdd:function(){h(void 0)},onAnnotationModify:function(){},onAnnotationDelete:function(t){Dn(t)}})]}),(0,e.jsx)(p.Z,{visible:z,splitDataset:rn,project:k,onCancel:function(){cn(!1)},onFinish:function(){cn(!1)}}),(0,e.jsx)(E.Z,{visible:Mn,exportDataset:tn,project:k,onCancel:function(){un(!1)},onFinish:function(){un(!1)}})]})},Z=U},15746:function(_,g,n){"use strict";var m=n(21584);g.Z=m.Z},89032:function(_,g,n){"use strict";var m=n(38663),A=n.n(m),T=n(6999)},71230:function(_,g,n){"use strict";var m=n(92820);g.Z=m.Z},13062:function(_,g,n){"use strict";var m=n(38663),A=n.n(m),T=n(6999)}}]);
