(self.webpackChunkpp_labeling_frontend=self.webpackChunkpp_labeling_frontend||[]).push([[540],{54777:function(D){D.exports={segment:"segment___1YMcl",mainStage:"mainStage___2otee",rightSideBar:"rightSideBar___2X7jK",determinOutline:"determinOutline___2ls57"}},47e3:function(D,B,a){"use strict";a.r(B),a.d(B,{default:function(){return _}});var en=a(57663),X=a(71577),b=a(2824),g=a(67294),Y=a(54777),y=a.n(Y),F=a(8088),c=a(61541),K=a(44434),O=a(58967),k=a(5041),H=a(57436),W=a(14836),t=a(85893),G=function(e){return(0,t.jsx)(c.Z,{active:e.active,imgSrc:e.imgSrc||"./pics/buttons/polygon.png",onClick:e.onClick,children:e.children})},J=G,Q=a(43801),V=a(91220),z=a(65031);function p(o){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}function U(o,e,s){if(console.log(o,e),!(!o||!e)){var i=p(o);if(!!i){var u=void 0,f=[];return e.forEach(function(h){if(!u){u=h;return}f.push((0,t.jsx)(z.Cd,{x:u,y:h,radius:5,fill:o})),u=void 0}),console.log(i),console.log(f),{color:o,points:e,element:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(z.x1,{stroke:o,strokeWidth:2,globalCompositeOperation:"source-over",lineCap:"round",points:e,tension:.01,closed:s,fill:"rgba(".concat(i.r,", ").concat(i.g,", ").concat(i.b,", 0.5)")}),f]})}}}}function w(o){var e=0,s=(0,V.Z)(o),i;try{for(s.s();!(i=s.n()).done;){var u=i.value;!u||u.annotationId>e&&(e=u.annotationId)}}catch(f){s.e(f)}finally{s.f()}return e}function $(o){var e=(0,g.useState)(o.currentTool),s=(0,b.Z)(e,2),i=s[0],u=s[1];(0,g.useEffect)(function(){u(o.currentTool)},[o.currentTool]);var f=function(S){if(console.log(i),i=="polygon")if(o.currentAnnotation){var v,C,Z,P=((v=o.currentAnnotation)===null||v===void 0?void 0:v.lines)||[],l=U((C=o.currentLabel)===null||C===void 0?void 0:C.color,(Z=P[0])===null||Z===void 0?void 0:Z.points.concat([S.evt.offsetX,S.evt.offsetY]));if(!l)return;var m={annotationId:o.currentAnnotation.annotationId,label:o.currentAnnotation.label,lines:[l]};o.onAnnotationModify(m),console.log(m)}else{var x,M=U((x=o.currentLabel)===null||x===void 0?void 0:x.color,[S.evt.offsetX,S.evt.offsetY]);if(!M)return;o.onAnnotationAdd({annotationId:w(o.annotations)+1,label:o.currentLabel,lines:[M]})}},h=function(){i=="polygon"};return{onMouseDown:f,onMouseMove:function(){},onMouseUp:h}}var q=function(){var e=(0,g.useState)(void 0),s=(0,b.Z)(e,2),i=s[0],u=s[1],f=(0,g.useState)({color:"",name:""}),h=(0,b.Z)(f,2),A=h[0],S=h[1],x=(0,g.useState)(),M=(0,b.Z)(x,2),v=M[0],C=M[1],Z=(0,g.useState)([]),P=(0,b.Z)(Z,2),l=P[0],m=P[1],nn=(0,g.useState)(10),R=(0,b.Z)(nn,2),I=R[0],E=R[1],d=function(n){C(n),n!=null&&n.label&&S(n.label)},N=function(n){for(var j=[],L=0;L<l.length;L++)l[L].annotationId==n.annotationId?j.push(n):j.push(l[L]);d(n),m(j)},tn=(0,Q.Z)({currentLabel:A,brushSize:I,currentTool:i,annotations:l,currentAnnotation:v,onAnnotationAdd:function(n){m(l.concat([n])),v||d(n)},onAnnotationModify:N}),on=$({currentLabel:A,brushSize:I,currentTool:i,annotations:l,currentAnnotation:v,onAnnotationAdd:function(n){m(l.concat([n])),v||d(n)},onAnnotationModify:N}),T=i=="polygon"?on:tn;return(0,t.jsxs)(F.Z,{className:y().segment,children:[(0,t.jsxs)(K.Z,{children:[(0,t.jsx)(c.Z,{imgSrc:"./pics/buttons/intelligent_interaction.png",children:"Intelligent Interaction"}),(0,t.jsx)(J,{active:i=="polygon",onClick:function(){u("polygon"),d(void 0)},children:"Polygon"}),(0,t.jsx)(O.Z,{size:I,active:i=="brush",onClick:function(){i!="rubber"&&i!="brush"&&d(void 0),u("brush")},onChange:function(n){E(n)},children:"Brush"}),(0,t.jsx)(O.Z,{size:I,active:i=="rubber",onClick:function(){i!="rubber"&&i!="brush"&&d(void 0),u("rubber")},onChange:function(n){E(n)},imgSrc:"./pics/buttons/rubber.png",children:"Rubber"}),(0,t.jsx)(c.Z,{imgSrc:"./pics/buttons/zoom_in.png",children:"Zoom in"}),(0,t.jsx)(c.Z,{imgSrc:"./pics/buttons/zoom_out.png",children:"Zoom out"}),(0,t.jsx)(c.Z,{imgSrc:"./pics/buttons/save.png",children:"Save"}),(0,t.jsx)(c.Z,{imgSrc:"./pics/buttons/move.png",children:"Move"}),(0,t.jsx)(c.Z,{imgSrc:"./pics/buttons/export.png",children:"Export"}),(0,t.jsx)(c.Z,{imgSrc:"./pics/buttons/data_division.png",children:"Divide Data"}),(0,t.jsx)(c.Z,{imgSrc:"./pics/buttons/prev.png",children:"Undo"}),(0,t.jsx)(c.Z,{imgSrc:"./pics/buttons/next.png",children:"Redo"}),(0,t.jsx)(c.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:"Clear Mark"})]}),(0,t.jsx)("div",{className:y().mainStage,children:(0,t.jsx)(H.Z,{annotations:l,onMouseDown:T.onMouseDown,onMouseMove:T.onMouseMove,onMouseUp:T.onMouseUp})}),(0,t.jsxs)("div",{className:y().rightSideBar,children:[(0,t.jsx)("div",{className:y().determinOutline,children:(0,t.jsx)(X.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",block:!0,onClick:function(){d(void 0)},children:"Determine Outline"})}),(0,t.jsx)(k.Z,{selectedLabel:A,onLabelSelect:function(n){S(n),d(void 0)},onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}}),(0,t.jsx)(W.Z,{selectedAnnotation:v,annotations:l,onAnnotationSelect:function(n){n!=null&&n.delete||d(n)},onAnnotationAdd:function(){},onAnnotationModify:function(){},onAnnotationDelete:function(n){m(l.filter(function(j){return j.annotationId!=n.annotationId})),d(void 0)}})]})]})},_=q}}]);
