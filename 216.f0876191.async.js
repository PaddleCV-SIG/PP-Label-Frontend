(self.webpackChunkpp_labeling_frontend=self.webpackChunkpp_labeling_frontend||[]).push([[216],{85024:function(l){l.exports={listItem:"listItem___u4Q82",eye:"eye___BwaRm",delete:"delete___31JB_",roundBall:"roundBall___23A7l",popover:"popover___1BNET",annotationId:"annotationId___zAzX4",labelName:"labelName___2ohxn",listItemActive:"listItemActive___2QnA3"}},56159:function(l){l.exports={labelList:"labelList___v7C6K",listHeader:"listHeader___1aY8R",eye:"eye___2MKbp",roundBall:"roundBall___187XH"}},52822:function(l){l.exports={roundBall:"roundBall___1pqu1",popover:"popover___1-PR6"}},5882:function(l){l.exports={listItem:"listItem___vtDXn",eye:"eye___AsLBS",roundBall:"roundBall___1J_R3",popover:"popover___1x-2R",listItemActive:"listItemActive___3FRb7"}},56131:function(l){l.exports={labelList:"labelList___jvD05",listHeader:"listHeader___UM5UF",eye:"eye___II3Po",roundBall:"roundBall___j752J"}},78677:function(l){l.exports={container:"container___G0FNe"}},83930:function(l){l.exports={stage:"stage___3H5QL"}},80961:function(l){l.exports={leftToolbar:"leftToolbar___1xi4t",rightToolbar:"rightToolbar___3dNSB"}},82499:function(l){l.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1SHWL",toolBarButtonContainer:"toolBarButtonContainer___1jKUz",toolBarButton:"toolBarButton___3Ouq1",buttonText:"buttonText___10ls7",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AA28"}},14836:function(l,L,n){"use strict";n.d(L,{Z:function(){return D}});var O=n(54421),P=n(38272),m=n(57663),r=n(71577),i=n(67294),a=n(56159),E=n.n(a),f=n(49111),t=n(19650),c=n(2824),d=n(11849),o=n(85024),s=n.n(o),C=n(63097),e=n(85893),u=function(_){var A=(0,d.Z)({},_.annotation),h=(0,i.useState)(A.invisible),j=(0,c.Z)(h,2),S=j[0],N=j[1];(0,i.useEffect)(function(){N(_.annotation.invisible)},[_.annotation.invisible]);var $=(0,e.jsxs)(P.ZP.Item,{className:"".concat(s().listItem," ").concat(_.active?s().listItemActive:""),unselectable:"on",onClick:function(){_.onClick(A)},children:[(0,e.jsxs)(t.Z,{align:"center",size:5,children:[(0,e.jsx)("a",{className:s().eye,style:{backgroundImage:S?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(){N(!S),_.onAnnotationModify(A)}})," ",(0,e.jsx)("span",{className:s().annotationId,children:A.annotationId}),(0,e.jsx)("span",{className:s().labelName,children:A.label.name}),(0,e.jsx)(C.Z,{color:A.label.color})]}),(0,e.jsx)("a",{className:s().delete,onClick:function(){A.delete=!0,_.onAnnotationDelete(A)}})]});return $},M=u,b=function(_){return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(P.ZP,{className:E().labelList,size:"large",header:(0,e.jsx)("div",{className:E().listHeader,children:"Annotation List"}),bordered:!0,dataSource:_.annotations,renderItem:function(h){var j;return(0,e.jsx)(M,{onClick:_.onAnnotationSelect,annotation:h,active:h.annotationId==((j=_.selectedAnnotation)===null||j===void 0?void 0:j.annotationId),onAnnotationDelete:_.onAnnotationDelete,onAnnotationModify:_.onAnnotationModify})},footer:(0,e.jsx)("div",{children:(0,e.jsx)(r.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){_.onAnnotationSelect(void 0)},block:!0,children:"Add Annotation"})})})})},D=b},63097:function(l,L,n){"use strict";var O=n(20136),P=n(55241),m=n(2824),r=n(67294),i=n(52822),a=n.n(i),E=n(63144),f=n(85893),t=function(d){var o=(0,r.useState)(d.color||"#FFF"),s=(0,m.Z)(o,2),C=s[0],e=s[1];return(0,r.useEffect)(function(){e(d.color||"#FFF")},[d]),d.changeable?(0,f.jsx)(P.Z,{getPopupContainer:function(M){return M.parentElement||document.body},overlayClassName:a().popover,openClassName:a().popoverOpenClassName,placement:"bottom",content:(0,f.jsx)(E.xS,{disableAlpha:!0,color:C,onChange:function(M){e(M.hex)},onChangeComplete:d.onChange}),trigger:"click",children:(0,f.jsx)("div",{className:a().roundBall,style:{backgroundColor:C}})}):(0,f.jsx)("div",{className:a().roundBall,style:{backgroundColor:C}})};L.Z=t},5041:function(l,L,n){"use strict";n.d(L,{Z:function(){return H}});var O=n(54421),P=n(38272),m=n(57663),r=n(71577),i=n(2824),a=n(67294),E=n(56131),f=n.n(E),t=n(49111),c=n(19650),d=n(11849),o=n(5882),s=n.n(o),C=n(63097),e=n(85893),u=function(v){var B=(0,d.Z)({},v.label),y=(0,a.useState)(B.invisible),F=(0,i.Z)(y,2),T=F[0],Z=F[1],U=(0,e.jsx)(P.ZP.Item,{className:"".concat(s().listItem," ").concat(v.active?s().listItemActive:""),unselectable:"on",onClick:function(){v.onClick(B)},children:(0,e.jsxs)(c.Z,{align:"center",size:5,children:[(0,e.jsx)("a",{className:s().eye,style:{backgroundImage:T?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(){Z(!T),v.onLabelModify(B)}})," ",B.name,(0,e.jsx)(C.Z,{color:B.color,changeable:!0,onChange:function(W){B.color=W.hex,v.onLabelModify(B)}})]})});return U},M=u,b=n(71194),D=n(50146),x=n(47673),_=n(24044),A=n(9715),h=n(93766),j=["#FF0000","#008000","#0000FF","#FFFF00","#FFA500","#00FFFF","#8B00FF","#FFC0CB","#7CFC00","#007FFF","#800080","#36BF36","#DAA520","#800000","#008B8B","#B22222","#E6D933","#000080","#FF00FF","#FFFF99","#87CEEB","#5C50E6","#CD5C5C","#20B2AA","#E680FF","#4D1F00","#006374","#B399FF","#8B4513","#BA55D3","#C0C0C0","#808080","#000000"],S=function(v){var B,y,F=(0,a.useState)(((B=v.defaultLabel)===null||B===void 0?void 0:B.color)||j[v.order||0]),T=(0,i.Z)(F,2),Z=T[0],U=T[1];(0,a.useEffect)(function(){var I;U(((I=v.defaultLabel)===null||I===void 0?void 0:I.color)||j[v.order||0])},[v]);var K=h.Z.useForm(),W=(0,i.Z)(K,1),R=W[0];return(0,e.jsx)(D.Z,{title:"Add Label",visible:v.visible,onCancel:v.onCancel,footer:null,children:(0,e.jsxs)(h.Z,{form:R,name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!1,labelname:(y=v.defaultLabel)===null||y===void 0?void 0:y.name},onFinish:function(g){var z={name:g.labelname,color:Z};v.onLabelAdd(z),R.resetFields()},autoComplete:"off",children:[(0,e.jsx)(h.Z.Item,{label:"Label Name",name:"labelname",rules:[{required:!0,message:"Please input label name!"}],children:(0,e.jsx)(_.Z,{})}),(0,e.jsx)(h.Z.Item,{label:"Select Color",name:"color",children:(0,e.jsx)(C.Z,{color:Z,onChange:function(g){U(g.hex)}})}),(0,e.jsx)(h.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,e.jsxs)(c.Z,{children:[(0,e.jsx)(r.Z,{onClick:function(){var g;(g=v.onCancel)===null||g===void 0||g.call(0),R.resetFields()},children:"\u53D6\u6D88"}),(0,e.jsx)(r.Z,{type:"primary",htmlType:"submit",children:"\u786E\u5B9A"})]})})]})})},N=S,$=[{color:"#FF0000",name:"Label 1"},{color:"#008000",name:"Label 2"}],X=function(v){var B=(0,a.useState)($),y=(0,i.Z)(B,2),F=y[0],T=y[1],Z=(0,a.useState)(!1),U=(0,i.Z)(Z,2),K=U[0],W=U[1];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(P.ZP,{className:f().labelList,size:"large",header:(0,e.jsx)("div",{className:f().listHeader,children:"Label List"}),footer:(0,e.jsx)("div",{children:(0,e.jsx)(r.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){W(!0)},block:!0,children:"Add Label"})}),bordered:!0,dataSource:F,renderItem:function(I){var g;return(0,e.jsx)(M,{onClick:v.onLabelSelect,label:I,active:I.name==((g=v.selectedLabel)===null||g===void 0?void 0:g.name),onLabelDelete:v.onLabelDelete,onLabelModify:v.onLabelModify})}}),(0,e.jsx)(N,{order:F.length,visible:K,onLabelAdd:function(I){F.push(I),T(F),W(!1)},onCancel:function(){W(!1)}})]})},H=X},8088:function(l,L,n){"use strict";var O=n(67294),P=n(78677),m=n.n(P),r=n(85893),i=function(E){return(0,r.jsx)("div",{className:"".concat(m().container," ").concat(E.className),children:E.children})};L.Z=i},13931:function(l,L,n){"use strict";n.d(L,{Z:function(){return f}});var O=n(91220),P=n(67294),m=n(65031),r=n(85893);function i(t){var c=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return c?{r:parseInt(c[1],16),g:parseInt(c[2],16),b:parseInt(c[3],16)}:null}function a(t,c){if(!(!t||!c)){var d=i(t);if(!!d){var o=void 0,s=[];return c.forEach(function(C){if(!o){o=C;return}s.push((0,r.jsx)(m.Cd,{x:o,y:C,radius:5,fill:t})),o=void 0}),{color:t,points:c,element:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.x1,{stroke:t,strokeWidth:2,globalCompositeOperation:"source-over",lineCap:"round",points:c,tension:.01,closed:!0,fill:"rgba(".concat(d.r,", ").concat(d.g,", ").concat(d.b,", 0.5)")}),s]})}}}}function E(t){var c=0,d=(0,O.Z)(t),o;try{for(d.s();!(o=d.n()).done;){var s=o.value;!s||s.annotationId>c&&(c=s.annotationId)}}catch(C){d.e(C)}finally{d.f()}return c}function f(t){var c=function(e,u){var M,b=e.evt.offsetX/u,D=e.evt.offsetY/u;console.log("offsetX: ".concat(e.evt.offsetX,", offsetY: ").concat(e.evt.offsetY,", mouseX: ").concat(b,", mouseY: ").concat(D));var x=a((M=t.currentLabel)===null||M===void 0?void 0:M.color,[b,D]);!x||t.onAnnotationAdd({annotationId:E(t.annotations)+1,label:t.currentLabel,lines:[x]})},d=function(e,u){var M,b;if(!!t.currentAnnotation){var D=e.evt.offsetX/u,x=e.evt.offsetY/u;console.log("offsetX: ".concat(e.evt.offsetX,", offsetY: ").concat(e.evt.offsetY,", mouseX: ").concat(D,", mouseY: ").concat(x));var _=t.currentAnnotation.lines||[],A=a((M=t.currentLabel)===null||M===void 0?void 0:M.color,(b=_[0])===null||b===void 0?void 0:b.points.concat([D,x]));if(!!A){var h={annotationId:t.currentAnnotation.annotationId,label:t.currentAnnotation.label,lines:[A]};t.onAnnotationModify(h)}}},o=function(e,u){console.log(t.currentTool),t.currentTool=="polygon"&&(t.currentAnnotation?d(e,u):c(e,u))},s=function(){t.currentTool=="polygon"};return{onMouseDown:o,onMouseMove:function(){},onMouseUp:s}}},29919:function(l,L,n){"use strict";var O=n(67294),P=n(61541),m=n(85893),r=function(a){return(0,m.jsx)(P.Z,{active:a.active,imgSrc:a.imgSrc||"./pics/buttons/polygon.png",onClick:a.onClick,children:a.children})};L.Z=r},57436:function(l,L,n){"use strict";var O=n(2824),P=n(67294),m=n(65031),r=n(84420),i=n.n(r),a=n(83930),E=n.n(a),f=n(85893),t="./pics/basketball.jpg",c=function(o){var s,C=i()(t),e=(0,O.Z)(C,1),u=e[0],M=(u==null?void 0:u.width)||0,b=(u==null?void 0:u.height)||0;return(0,f.jsxs)(m.Hf,{width:M*o.scale,height:b*o.scale,className:E().stage,children:[(0,f.jsx)(m.mh,{scaleX:o.scale,scaleY:o.scale,children:(0,f.jsx)(m.Ee,{image:u})}),(0,f.jsxs)(m.mh,{scaleX:o.scale,scaleY:o.scale,onMouseDown:function(x){o.onMouseDown&&o.onMouseDown(x,o.scale)},onMouseMove:function(x){o.onMouseMove&&o.onMouseMove(x,o.scale)},onMouseUp:function(x){o.onMouseUp&&o.onMouseUp(x,o.scale)},onContextMenu:function(x){x.evt.preventDefault()},children:[(0,f.jsx)(m.Ee,{image:u}),(s=o.annotations)===null||s===void 0?void 0:s.map(function(D,x){var _;return(_=D.lines)===null||_===void 0?void 0:_.map(function(A,h){return A.element})})]})]})};L.Z=c},44434:function(l,L,n){"use strict";var O=n(67294),P=n(80961),m=n.n(P),r=n(85893),i=function(E){var f=m().leftToolbar;return E.disLoc=="right"&&(f=m().rightToolbar),(0,r.jsx)("div",{className:f,children:E.children})};L.Z=i},61541:function(l,L,n){"use strict";var O=n(49111),P=n(19650),m=n(67294),r=n(82499),i=n.n(r),a=n(85893),E=function(t){return(0,a.jsx)("div",{unselectable:"on",className:"".concat(i().toolBarButtonContainerWrapper," ").concat(t.active&&i().toolBarButtonContainerWrapperActive),onClick:t.onClick,children:(0,a.jsx)(P.Z,{align:"center",className:i().toolBarButtonContainer,size:0,children:(0,a.jsxs)(P.Z,{align:"center",direction:"vertical",className:i().toolBarButton,size:0,children:[(0,a.jsx)("img",{src:t.imgSrc}),(0,a.jsx)("div",{className:i().buttonText,children:t.children})]})})})};L.Z=E}}]);
