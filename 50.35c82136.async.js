(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[50],{85024:function(B){B.exports={listItem:"listItem___u4Q82",eye:"eye___BwaRm",delete:"delete___31JB_",roundBall:"roundBall___23A7l",popover:"popover___1BNET",annotationId:"annotationId___zAzX4",labelName:"labelName___2ohxn",listItemActive:"listItemActive___2QnA3"}},56159:function(B){B.exports={labelList:"labelList___v7C6K",listHeader:"listHeader___1aY8R",eye:"eye___2MKbp",roundBall:"roundBall___187XH"}},57560:function(B){B.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___147XP",toolBarButtonContainer:"toolBarButtonContainer___ZEvhK",toolBarButton:"toolBarButton___1s2Rh",buttonText:"buttonText___3NTCv",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___2Utx8",popover:"popover___3PRoi"}},26647:function(B){B.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1FTWb",toolBarButtonContainer:"toolBarButtonContainer___1Vahn",toolBarButton:"toolBarButton___3mR2H",buttonText:"buttonText___Y0WDm",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3lRZ8",popover:"popover___3zzu2",slider:"slider___ALra-",popoverLeft:"popoverLeft___15lGe"}},14836:function(B,I,n){"use strict";n.d(I,{Z:function(){return s}});var R=n(54421),D=n(38272),x=n(57663),L=n(71577),v=n(67294),M=n(56159),g=n.n(M),A=n(49111),W=n(19650),e=n(2824),C=n(11849),t=n(85024),_=n.n(t),c=n(63097),a=n(85893),r=function(o){var u=(0,C.Z)({},o.annotation),E=(0,v.useState)(u.invisible),d=(0,e.Z)(E,2),i=d[0],m=d[1],T=(0,v.useState)(0),h=(0,e.Z)(T,2),y=h[0],b=h[1];(0,v.useEffect)(function(){m(o.annotation.invisible)},[o.annotation.invisible]);var j=(0,a.jsxs)(D.ZP.Item,{className:"".concat(_().listItem," ").concat(o.active?_().listItemActive:""),unselectable:"on",onClick:function(){o.onClick(u)},children:[(0,a.jsxs)(W.Z,{align:"center",size:5,children:[(0,a.jsx)("a",{className:_().eye,style:{backgroundImage:i?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(K){K.stopPropagation(),m(!i),o.onAnnotationModify(u)}})," ",(0,a.jsx)("span",{className:_().annotationId,children:u.frontendId}),(0,a.jsx)("span",{className:_().labelName,children:u.label.name}),(0,a.jsx)(c.Z,{color:u.label.color})]}),(0,a.jsx)("a",{className:_().delete,onClick:function(K){K.stopPropagation();var S=new Date().getTime();S-y<300||(b(S),o.onAnnotationDelete(u))}})]});return j},f=r,P=n(48971),l=function(o){var u=(0,P.YB)().formatMessage({id:"component.PPAnnotationList.annotationList"}),E=(0,P.YB)().formatMessage({id:"component.PPAnnotationList.addAnnotation"});return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(D.ZP,{className:g().labelList,size:"large",header:(0,a.jsx)("div",{className:g().listHeader,children:u}),bordered:!0,dataSource:o.annotations,renderItem:function(i){var m;return(0,a.jsx)(f,{onClick:o.onAnnotationSelect,annotation:i,active:i.frontendId==((m=o.currAnnotation)===null||m===void 0?void 0:m.frontendId),onAnnotationDelete:o.onAnnotationDelete,onAnnotationModify:o.onAnnotationModify})},footer:(0,a.jsx)("div",{children:(0,a.jsx)(L.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){o.onAnnotationAdd()},block:!0,children:E})})})})},s=l},58967:function(B,I,n){"use strict";var R=n(20136),D=n(55241),x=n(77883),L=n(70507),v=n(57663),M=n(71577),g=n(2824),A=n(67294),W=n(61541),e=n(57560),C=n.n(e),t=n(85893),_=1,c=50,a=10;function r(P){return P?P<=_?_:P>=c?c:P:a}var f=function(l){var s=(0,A.useState)(r(l.size)),O=(0,g.Z)(s,2),o=O[0],u=O[1],E=function(i){u(r(i))};return(0,A.useEffect)(function(){E(l.size)},[l.size]),(0,t.jsxs)(D.Z,{overlayClassName:C().popover,placement:"right",content:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(M.Z,{type:"text",onClick:function(){var i,m=r(o-1);E(m),(i=l.onChange)===null||i===void 0||i.call(0,m)},children:"-"}),(0,t.jsx)(L.Z,{min:_,max:c,value:o,onChange:function(i){var m;(m=l.onChange)===null||m===void 0||m.call(0,i)},controls:!1,style:{textAlign:"center"}}),(0,t.jsx)(M.Z,{type:"text",onClick:function(){var i,m=r(o+1);E(m),(i=l.onChange)===null||i===void 0||i.call(0,m)},children:"+"})]}),trigger:l.active?"hover":"click",children:[" ",(0,t.jsx)(W.Z,{active:l.active,imgSrc:l.imgSrc||"./pics/buttons/brush.png",onClick:l.onClick,children:l.children||"Brush"})]})};I.Z=f},27992:function(B,I,n){"use strict";var R=n(20136),D=n(55241),x=n(13062),L=n(71230),v=n(77883),M=n(70507),g=n(89032),A=n(15746),W=n(66126),e=n(75454),C=n(2824),t=n(67294),_=n(61541),c=n(26647),a=n.n(c),r=n(85893),f=0,P=100,l=10,s=function(o){var u=(0,t.useState)(y(o.size)),E=(0,C.Z)(u,2),d=E[0],i=E[1];function m(b){i(y(b))}var T=o.minSize==null?f:o.minSize,h=o.maxSize==null?P:o.maxSize;function y(b){return b==null?l:b<=T?T:b>=h?h:b}return(0,t.useEffect)(function(){m(o.size),console.log("props.size changed to:".concat(o.size))},[o.size]),(0,r.jsxs)(D.Z,{overlayClassName:"".concat(a().popover," ").concat(o.disLoc=="left"?a().popoverLeft:""),placement:o.disLoc||"right",content:(0,r.jsxs)(L.Z,{children:[(0,r.jsx)(A.Z,{span:16,children:(0,r.jsx)(e.Z,{className:a().slider,value:d,max:h,min:T,onChange:function(j){var U;(U=o.onChange)===null||U===void 0||U.call(0,j)},tooltipVisible:!1})}),(0,r.jsx)(A.Z,{span:8,children:(0,r.jsx)(M.Z,{min:T,max:h,value:d,onChange:function(j){var U;(U=o.onChange)===null||U===void 0||U.call(0,j)},step:10})})]}),trigger:"hover",children:[" ",(0,r.jsx)(_.Z,{imgSrc:o.imgSrc||"",onClick:o.onClick,children:o.children})]})};I.Z=s},29919:function(B,I,n){"use strict";var R=n(67294),D=n(61541),x=n(85893),L=function(M){return(0,x.jsx)(D.Z,{active:M.active,imgSrc:M.imgSrc||"./pics/buttons/polygon.png",onClick:M.onClick,children:M.children})};I.Z=L},11189:function(B,I,n){"use strict";n.d(I,{Z:function(){return C}});var R=n(11849),D=n(2824),x=n(91220),L=n(67294),v=n(65031),M=n(33522),g=n(85893);function A(t,_,c,a){if(!(!t||!_||!c||!a))return{width:t,color:_,points:c,tool:a}}function W(t){if(!t.annotation||!t.annotation.points)return(0,g.jsx)(g.Fragment,{});var _=[],c=(0,x.Z)(t.annotation.points),a;try{for(c.s();!(a=c.n()).done;){var r=a.value;if(!(!r.width||!r.color||!r.tool)){var f=(0,M.o)(r.color);if(!!f){var P=r.tool=="rubber"?1:t.transparency*.01;_.push((0,g.jsx)(v.x1,{stroke:"rgba(".concat(f.r,", ").concat(f.g,", ").concat(f.b,", ").concat(P,")"),strokeWidth:r.width,globalCompositeOperation:r.tool==="brush"?"source-over":"destination-out",lineCap:"round",points:r.points,tension:1}))}}}}catch(l){c.e(l)}finally{c.f()}return(0,g.jsx)(v.ZA,{draggable:!1,children:_})}function e(t,_){return t=="rubber"||_==2?"rubber":"brush"}function C(t){var _=(0,L.useState)(),c=(0,D.Z)(_,2),a=c[0],r=c[1],f=function(O,o,u,E){var d,i;if(!(t.currentTool!="brush"&&t.currentTool!="rubber"||!((d=t.currentLabel)!==null&&d!==void 0&&d.color))){var m=(O.evt.offsetX+o)/E,T=(O.evt.offsetY+u)/E,h=e(t.currentTool,O.evt.button),y=A(t.brushSize||10,(i=t.currentLabel)===null||i===void 0?void 0:i.color,[m,T,m,T],h);if(!!y)if(r(h),t.currentAnnotation){var b,j={type:"brush",frontendId:t.currentAnnotation.frontendId,label:t.currentAnnotation.label,points:(b=t.currentAnnotation.points)===null||b===void 0?void 0:b.concat([y])};t.onAnnotationModify(j)}else{if(h=="rubber")return;t.onAnnotationAdd({type:h,frontendId:(0,M.p)(t.annotations)+1,label:t.currentLabel,points:[y]})}}},P=function(O,o,u,E){var d;if(!(!a||!t.currentAnnotation||!t.currentLabel.color)){var i=(O.evt.offsetX+o)/E,m=(O.evt.offsetY+u)/E,T=[i,m],h=[];(d=t.currentAnnotation)!==null&&d!==void 0&&d.points&&(T=t.currentAnnotation.points[t.currentAnnotation.points.length-1].points.concat(T),h=t.currentAnnotation.points);var y=A(t.brushSize||10,t.currentLabel.color,T,a);!y||(h.pop(),h.push(y),t.onAnnotationModify((0,R.Z)((0,R.Z)({},t.currentAnnotation),{},{points:h,type:a})))}},l=function(){t.currentTool!="brush"&&t.currentTool!="rubber"||(r(void 0),t.onMouseUp())};return{onMouseDown:f,onMouseMove:P,onMouseUp:l,createElementsFunc:W}}},50242:function(B,I,n){"use strict";n.d(I,{Z:function(){return W}});var R=n(91220),D=n(11849),x=n(65031),L=n(33522),v=n(85893);function M(e,C){if(!(!e||!C))return{color:e,points:C}}function g(e){if(!e.annotation||!e.annotation.points||!e.annotation.points[0])return[(0,v.jsx)(v.Fragment,{})];var C=e.annotation.points[0].points,t=e.annotation.points[0].color,_=(0,L.o)(t);if(!_)return[(0,v.jsx)(v.Fragment,{})];var c=.3,a=void 0,r=[];return C.forEach(function(f,P){if(!a){a=f;return}r.push((0,v.jsx)(x.Cd,{onMouseDown:function(){e.currentTool=="editor"&&e.onSelect(e.annotation)},draggable:e.currentTool=="editor",onDragMove:function(s){var O;s.cancelBubble=!0;var o=(O=e.stageRef)===null||O===void 0?void 0:O.current,u=o.findOne(".baseImage"),E=!1,d=s.target.x();d>u.width()/2&&(d=u.width()/2,E=!0),d<-u.width()/2&&(d=-u.width()/2,E=!0);var i=s.target.y();i>u.height()/2&&(i=u.height()/2,E=!0),i<-u.height()/2&&(i=-u.height()/2,E=!0),E&&s.target.setPosition({x:d,y:i}),C[P-1]=d,C[P]=i;var m=(0,D.Z)((0,D.Z)({},e.annotation),{},{points:[{color:t,points:C}]});e.onDrag(m)},onMouseOver:function(){var s;e.currentTool=="editor"&&(s=e.stageRef)!==null&&s!==void 0&&s.current&&(e.stageRef.current.container().style.cursor="cell")},onMouseOut:function(){var s;e.currentTool=="editor"&&(s=e.stageRef)!==null&&s!==void 0&&s.current&&(e.stageRef.current.container().style.cursor="default")},x:a,y:f,radius:5/e.scale,fill:t})),a=void 0}),[(0,v.jsxs)(x.ZA,{children:[(0,v.jsx)(x.x1,{onMouseOver:function(){e.currentTool=="editor"&&(document.body.style.cursor="pointer")},onMouseOut:function(){document.body.style.cursor="default"},onClick:function(){e.currentTool=="editor"&&e.onSelect(e.annotation)},stroke:t,strokeWidth:2/e.scale,globalCompositeOperation:"source-over",lineCap:"round",points:C,tension:0,closed:!0,fill:"rgba(".concat(_.r,", ").concat(_.g,", ").concat(_.b,", ").concat(c,")")}),r]},e.annotation.frontendId)]}function A(e){var C=0,t=(0,R.Z)(e),_;try{for(t.s();!(_=t.n()).done;){var c=_.value;!c||!c.frontendId||c.frontendId>C&&(C=c.frontendId)}}catch(a){t.e(a)}finally{t.f()}return C}function W(e){var C=function(r,f,P,l){var s,O=(r.evt.offsetX+f)/l,o=(r.evt.offsetY+P)/l,u=M((s=e.currentLabel)===null||s===void 0?void 0:s.color,[O,o]);!u||e.onAnnotationAdd({type:"polygon",frontendId:A(e.annotations)+1,label:e.currentLabel,points:[u]})},t=function(r,f,P,l){var s,O;if(!!e.currentAnnotation){var o=(r.evt.offsetX+f)/l,u=(r.evt.offsetY+P)/l,E=e.currentAnnotation.points||[],d=M((s=e.currentLabel)===null||s===void 0?void 0:s.color,(O=E[0])===null||O===void 0?void 0:O.points.concat([o,u]));if(!!d){var i={type:"polygon",frontendId:e.currentAnnotation.frontendId,label:e.currentAnnotation.label,points:[d]};e.onAnnotationModify(i)}}},_=function(r,f,P,l){e.currentTool=="polygon"&&(e.currentAnnotation?t(r,f,P,l):C(r,f,P,l))},c=function(){e.currentTool=="polygon"&&e.onMouseUp()};return{onMouseDown:_,onMouseMove:function(){},onMouseUp:c,createElementsFunc:g}}},33522:function(B,I,n){"use strict";n.d(I,{p:function(){return D},o:function(){return x}});var R=n(91220);function D(L){var v=0,M=(0,R.Z)(L),g;try{for(M.s();!(g=M.n()).done;){var A=g.value;!A||!A.frontendId||A.frontendId>v&&(v=A.frontendId)}}catch(W){M.e(W)}finally{M.f()}return v}function x(L){var v=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(L);return v?{r:parseInt(v[1],16),g:parseInt(v[2],16),b:parseInt(v[3],16)}:null}}}]);
