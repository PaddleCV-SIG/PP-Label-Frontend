(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[322],{64322:function(te,N,C){"use strict";C.d(N,{gu:function(){return z},_D:function(){return X},Gd:function(){return Y},jL:function(){return q},iA:function(){return x},CV:function(){return ee},A5:function(){return re}});var F=C(86582),K=C(91220),Z=C(3182),ue=C(34792),w=C(48086),U=C(2824),G=C(94043),l=C.n(G),L=C(37071),j=C(81139),W=localStorage.getItem("basePath"),R=new j.VK(W?{basePath:W}:void 0),M=new j.U(R),J=new j.sD(R),V=new j.W6(R),B=new j.Cl(R),H=new j.vb(R),z=function(c){return JSON.parse(JSON.stringify(c))};function se(S){return S&&(S.toLowerCase().replace(/([-_][a-z])/g,function(c){return c.toUpperCase().replace("-","").replace("_","")}),S)}var Q=function(c,d,_){if(!!_){for(var s=0;s<d.length;s++)if(c[_]==d[s][_])return s}},X=function(c){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[.1,3],_=c(1),s=(0,U.Z)(_,2),O=s[0],y=s[1],A=function(g){var u=O;u+=g,u<d[0]&&(u=d[0],w.default.error("Smallest scale is "+d[0])),u>d[1]&&(u=d[1],w.default.error("Largest scale is "+d[1])),y(u)};return{curr:O,change:A}},Y=function(c){var d=c([]),_=(0,U.Z)(d,2),s=_[0],O=_[1],y=c(),A=(0,U.Z)(y,2),t=A[0],g=A[1],u=function(){var o=(0,Z.Z)(l().mark(function n(){var f;return l().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.prev=0,p.next=3,M.getAll();case 3:return f=p.sent,O(f),p.abrupt("return",f);case 8:p.prev=8,p.t0=p.catch(0),console.log("project getAll err",p.t0),L.Z.parseError(p.t0,w.default);case 12:case"end":return p.stop()}},n,null,[[0,8]])}));return function(){return o.apply(this,arguments)}}(),m=function(){var o=(0,Z.Z)(l().mark(function n(f){var e;return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(f!=null){a.next=2;break}return a.abrupt("return",void 0);case 2:if(!(s.length>1)){a.next=5;break}return w.default.error("Currently have multiple projects stored, use turnTo instead"),a.abrupt("return");case 5:return a.prev=5,a.next=8,M.get(f);case 8:return e=a.sent,O([e]),g(0),a.abrupt("return",e);case 14:a.prev=14,a.t0=a.catch(5),console.log("prject getcurr err",a.t0),L.Z.parseError(a.t0,w.default);case 18:case"end":return a.stop()}},n,null,[[5,14]])}));return function(f){return o.apply(this,arguments)}}(),h=function(){var o=(0,Z.Z)(l().mark(function n(f){return l().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:typeof f=="number"?M.remove(f):M.remove(f.projectId),u();case 2:case"end":return p.stop()}},n)}));return function(f){return o.apply(this,arguments)}}(),i=function(){var o=(0,Z.Z)(l().mark(function n(f){var e;return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,M.create(f);case 3:return e=a.sent,console.log(e),a.abrupt("return",e);case 8:a.prev=8,a.t0=a.catch(0),console.log("project create err",a.t0),L.Z.parseError(a.t0,w.default);case 12:case"end":return a.stop()}},n,null,[[0,8]])}));return function(f){return o.apply(this,arguments)}}(),r=function(){var o=(0,Z.Z)(l().mark(function n(f,e){return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:M.update(f,e).then(function(T){console.log("project update res",T)}).catch(function(T){console.log("project update err ",T),L.Z.parseError(T,w.default)});case 1:case"end":return a.stop()}},n)}));return function(f,e){return o.apply(this,arguments)}}();return{all:s,getAll:u,getCurr:m,remove:h,create:i,update:r,get curr(){if(t!=null)return s[t]}}},q=function(c,d){var _=d.oneHot,s=_===void 0?!0:_,O=d.pageOnSelect,y=c(),A=(0,U.Z)(y,2),t=A[0],g=A[1],u=c(),m=(0,U.Z)(u,2),h=m[0],i=m[1],r=c(s),o=(0,U.Z)(r,2),n=o[0],f=o[1],e=function(){var I=(0,Z.Z)(l().mark(function k(P){var E,v,b,$;return l().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.prev=0,D.next=3,M.getLabels(P);case 3:E=D.sent,v=(0,K.Z)(E);try{for(v.s();!(b=v.n()).done;)$=b.value,$.active=!1}catch(le){v.e(le)}finally{v.f()}return g(E),D.abrupt("return",E);case 10:D.prev=10,D.t0=D.catch(0),console.log("label getall err ",D.t0),L.Z.parseError(D.t0,w.default);case 14:case"end":return D.stop()}},k,null,[[0,10]])}));return function(P){return I.apply(this,arguments)}}(),p=function(k){var P=Q(k,t,"labelId");if(i(P),console.log("onehot",n),n){var E=(0,K.Z)(t),v;try{for(E.s();!(v=E.n()).done;){var b=v.value;b.active=!1}}catch($){E.e($)}finally{E.f()}t[P].active=!0,console.log("all",t)}else t[P].active=!t[P].active;O(t[P]),g((0,F.Z)(t))},a=function(){var I=(0,Z.Z)(l().mark(function k(P){var E;return l().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.prev=0,b.next=3,H.create(P);case 3:return E=b.sent,E.active=!1,g([].concat((0,F.Z)(t),[E])),b.abrupt("return",E);case 9:b.prev=9,b.t0=b.catch(0),console.log("label create err",b.t0),L.Z.parseError(b.t0,w.default);case 13:case"end":return b.stop()}},k,null,[[0,9]])}));return function(P){return I.apply(this,arguments)}}(),T=function(){var I=(0,Z.Z)(l().mark(function k(P){return l().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return console.log("remove label",P),v.prev=1,v.next=4,H.remove(P.labelId);case 4:g(t.filter(function(b){return b.labelId!=P.labelId})),v.next=11;break;case 7:v.prev=7,v.t0=v.catch(1),console.log("label remove err",v.t0),L.Z.parseError(v.t0,w.default);case 11:case"end":return v.stop()}},k,null,[[1,7]])}));return function(P){return I.apply(this,arguments)}}(),ae=function(){},ne=function(){f(!n)};return{all:t,getAll:e,setAll:g,onSelect:p,create:a,remove:T,onModify:ae,toggleOneHot:ne,get curr(){if(h!=null)return t[h]}}},x=function(c){var d=c(),_=(0,U.Z)(d,2),s=_[0],O=_[1],y=c(),A=(0,U.Z)(y,2),t=A[0],g=A[1],u=function(i){if(i<0){w.default.error("This is the first image. No previous image.");return}if(i==s.length){w.default.error("This is the final image. No next image.");return}console.log("turning to",i),g(i)},m=function(){var h=(0,Z.Z)(l().mark(function i(r,o){var n;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.getTasks(r);case 3:if(n=e.sent,O(n),o==null){e.next=9;break}return console.log("getall turnto"),u(o),e.abrupt("return",[n,n[o]]);case 9:return e.abrupt("return",n);case 12:e.prev=12,e.t0=e.catch(0),console.log("task getall err ",e.t0),L.Z.parseError(e.t0,w.default);case 16:case"end":return e.stop()}},i,null,[[0,12]])}));return function(r,o){return h.apply(this,arguments)}}();return{currIdx:t,all:s,turnTo:u,getAll:m,get curr(){if(!(t==null||s==null))return console.log("task.curr",s[t]),s[t]}}},ee=function(c){var d=c(),_=(0,U.Z)(d,2),s=_[0],O=_[1],y=function(){var g=(0,Z.Z)(l().mark(function u(m){var h;return l().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,V.getAnnotations(m);case 3:return h=r.sent,r.next=6,O(h);case 6:return r.abrupt("return",h);case 9:r.prev=9,r.t0=r.catch(0),console.log("ann getAll err",r.t0),L.Z.parseError(r.t0,w.default);case 13:case"end":return r.stop()}},u,null,[[0,9]])}));return function(m){return g.apply(this,arguments)}}(),A=function(){var g=(0,Z.Z)(l().mark(function u(m){var h;return l().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("create",m),r.prev=1,r.next=4,B.create(m);case 4:return h=r.sent,y(m.dataId),r.abrupt("return",h);case 9:r.prev=9,r.t0=r.catch(1),console.log("annotation create err",r.t0),L.Z.parseError(r.t0,w.default);case 13:case"end":return r.stop()}},u,null,[[1,9]])}));return function(m){return g.apply(this,arguments)}}(),t=function(){var g=(0,Z.Z)(l().mark(function u(m){return l().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:try{B.remove(m)}catch(r){console.log("annotation remove err",r),L.Z.parseError(r,w.default)}case 1:case"end":return i.stop()}},u)}));return function(m){return g.apply(this,arguments)}}();return{all:s,getAll:y,create:A,remove:t}},re=function(c){var d=c(),_=(0,U.Z)(d,2),s=_[0],O=_[1],y=c([]),A=(0,U.Z)(y,2),t=A[0],g=A[1],u=function(){var h=(0,Z.Z)(l().mark(function i(r){return l().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:O(r);case 1:case"end":return n.stop()}},i)}));return function(r){return h.apply(this,arguments)}}(),m=function(){var h=(0,Z.Z)(l().mark(function i(r,o){var n;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J.getDatas(r);case 3:if(n=e.sent,g(n),o==null){e.next=8;break}return u(o),e.abrupt("return",[n,n[o]]);case 8:return e.abrupt("return",n);case 11:e.prev=11,e.t0=e.catch(0),console.log("data getall err ",e.t0),L.Z.parseError(e.t0,w.default);case 15:case"end":return e.stop()}},i,null,[[0,11]])}));return function(r,o){return h.apply(this,arguments)}}();return{all:t,getAll:m,turnTo:u,get curr(){if(!(s==null||t==null))return t[s]}}}}}]);
