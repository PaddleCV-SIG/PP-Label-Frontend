(self.webpackChunkpp_labeling_frontend=self.webpackChunkpp_labeling_frontend||[]).push([[89],{57560:function(L){L.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___147XP",toolBarButtonContainer:"toolBarButtonContainer___ZEvhK",toolBarButton:"toolBarButton___1s2Rh",buttonText:"buttonText___3NTCv",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___2Utx8",popover:"popover___3PRoi"}},26647:function(L){L.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1FTWb",toolBarButtonContainer:"toolBarButtonContainer___1Vahn",toolBarButton:"toolBarButton___3mR2H",buttonText:"buttonText___Y0WDm",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3lRZ8",popover:"popover___3zzu2",popoverLeft:"popoverLeft___15lGe"}},54777:function(L){L.exports={segment:"segment___1YMcl",mainStage:"mainStage___2otee",draw:"draw___equn4",pblock:"pblock___2bT7z",progress:"progress___1porz",rightSideBar:"rightSideBar___2X7jK",determinOutline:"determinOutline___2ls57"}},43801:function(L,B,n){"use strict";n.d(B,{Z:function(){return x}});var Z=n(11849),R=n(2824),K=n(91220),U=n(67294),A=n(65031),h=n(85893);function I(t,l,d,C){if(!(!t||!l||!d||!C))return{width:t,color:l,points:d,tool:C}}function g(t,l,d,C,P,b,m){if(!t||!t.lines)return(0,h.jsx)(h.Fragment,{});var _=(m==null?void 0:m.annotationId)==t.annotationId,r=_&&P=="mover",v=[],f=(0,K.Z)(t.lines),O;try{for(f.s();!(O=f.n()).done;){var u=O.value;!u.width||!u.color||!u.points||!u.tool||v.push((0,h.jsx)(A.x1,{stroke:u.color,strokeWidth:u.width,globalCompositeOperation:u.tool==="brush"?"source-over":"destination-out",lineCap:"round",points:u.points,tension:.01,onDragMove:function(){},onDragEnd:function(){d()},shadowColor:"red",shadowBlur:10,shadowOffset:{x:5,y:5},shadowOpacity:r?1:0}))}}catch(E){f.e(E)}finally{f.f()}return(0,h.jsx)(A.ZA,{draggable:r,children:v})}function W(t,l){return t=="rubber"||l==2?"rubber":"brush"}function M(t){var l=0,d=(0,K.Z)(t),C;try{for(d.s();!(C=d.n()).done;){var P=C.value;!P||P.annotationId>l&&(l=P.annotationId)}}catch(b){d.e(b)}finally{d.f()}return l}function x(t){var l=(0,U.useState)(),d=(0,R.Z)(l,2),C=d[0],P=d[1],b=function(v,f){var O;if(!(t.currentTool!="brush"&&t.currentTool!="rubber")){var u=v.evt.offsetX/f,E=v.evt.offsetY/f,e=W(t.currentTool,v.evt.button),a=I(t.brushSize||10,(O=t.currentLabel)===null||O===void 0?void 0:O.color,[u,E,u,E],e);if(!!a)if(P(e),t.currentAnnotation){var y,p={tool:"brush",annotationId:t.currentAnnotation.annotationId,label:t.currentAnnotation.label,lines:(y=t.currentAnnotation.lines)===null||y===void 0?void 0:y.concat([a])};t.onAnnotationModify(p)}else{if(e=="rubber")return;t.onAnnotationAdd({tool:"brush",annotationId:M(t.annotations)+1,label:t.currentLabel,lines:[a]})}}},m=function(v,f){var O;if(!(!C||!t.currentAnnotation)){var u=v.evt.offsetX/f,E=v.evt.offsetY/f,e=[u,E],a=[];(O=t.currentAnnotation)!==null&&O!==void 0&&O.lines&&(e=t.currentAnnotation.lines[t.currentAnnotation.lines.length-1].points.concat(e),a=t.currentAnnotation.lines);var y=I(t.brushSize||10,t.currentLabel.color,e,C);!y||(a.pop(),a.push(y),t.onAnnotationModify((0,Z.Z)((0,Z.Z)({},t.currentAnnotation),{},{lines:a})))}},_=function(){t.currentTool!="brush"&&t.currentTool!="rubber"||(P(void 0),t.onMouseUp())};return{onMouseDown:b,onMouseMove:m,onMouseUp:_,createElementsFunc:g}}},58967:function(L,B,n){"use strict";var Z=n(20136),R=n(55241),K=n(77883),U=n(70507),A=n(57663),h=n(71577),I=n(2824),g=n(67294),W=n(61541),M=n(57560),x=n.n(M),t=n(85893),l=1,d=50,C=10;function P(m){return m?m<=l?l:m>=d?d:m:C}var b=function(_){var r=(0,g.useState)(P(_.size)),v=(0,I.Z)(r,2),f=v[0],O=v[1],u=function(e){O(P(e))};return(0,g.useEffect)(function(){u(_.size)},[_.size]),(0,t.jsxs)(R.Z,{overlayClassName:x().popover,placement:"right",content:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.Z,{type:"text",onClick:function(){var e,a=P(f-1);u(a),(e=_.onChange)===null||e===void 0||e.call(0,a)},children:"-"}),(0,t.jsx)(U.Z,{min:l,max:d,value:f,onChange:function(e){var a;(a=_.onChange)===null||a===void 0||a.call(0,e)},controls:!1,style:{textAlign:"center"}}),(0,t.jsx)(h.Z,{type:"text",onClick:function(){var e,a=P(f+1);u(a),(e=_.onChange)===null||e===void 0||e.call(0,a)},children:"+"})]}),trigger:_.active?"hover":"click",children:[" ",(0,t.jsx)(W.Z,{active:_.active,imgSrc:_.imgSrc||"./pics/buttons/brush.png",onClick:_.onClick,children:_.children||"Brush"})]})};B.Z=b},27992:function(L,B,n){"use strict";var Z=n(20136),R=n(55241),K=n(77883),U=n(70507),A=n(57663),h=n(71577),I=n(2824),g=n(67294),W=n(61541),M=n(26647),x=n.n(M),t=n(85893),l=1,d=100,C=10;function P(m){return m?m<=l?l:m>=d?d:m:C}var b=function(_){var r=(0,g.useState)(P(_.size)),v=(0,I.Z)(r,2),f=v[0],O=v[1],u=function(e){O(P(e))};return(0,g.useEffect)(function(){u(_.size)},[_.size]),(0,t.jsxs)(R.Z,{overlayClassName:"".concat(x().popover," ").concat(_.disLoc=="left"?x().popoverLeft:""),placement:_.disLoc||"right",content:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.Z,{type:"text",onClick:function(){var e,a=P(f-1);u(a),(e=_.onChange)===null||e===void 0||e.call(0,a)},children:"-"}),(0,t.jsx)(U.Z,{min:l,max:d,value:f,onChange:function(e){var a;(a=_.onChange)===null||a===void 0||a.call(0,e)},controls:!1,style:{textAlign:"center"}}),(0,t.jsx)(h.Z,{type:"text",onClick:function(){var e,a=P(f+1);u(a),(e=_.onChange)===null||e===void 0||e.call(0,a)},children:"+"})]}),trigger:"hover",children:[" ",(0,t.jsx)(W.Z,{imgSrc:_.imgSrc,onClick:_.onClick,children:_.children})]})};B.Z=b},86089:function(L,B,n){"use strict";n.r(B),n.d(B,{MOST_HISTORY_STEPS:function(){return v}});var Z=n(57663),R=n(71577),K=n(34669),U=n(54458),A=n(2824),h=n(67294),I=n(54777),g=n.n(I),W=n(8088),M=n(61541),x=n(44434),t=n(58967),l=n(27992),d=n(5041),C=n(57436),P=n(14836),b=n(29919),m=n(43801),_=n(13931),r=n(85893),v=40,f=function(){var u=(0,h.useState)(void 0),E=(0,A.Z)(u,2),e=E[0],a=E[1],y=(0,h.useState)({color:"",name:""}),p=(0,A.Z)(y,2),N=p[0],k=p[1],rn=(0,h.useState)(),V=(0,A.Z)(rn,2),T=V[0],H=V[1],an=(0,h.useState)([]),G=(0,A.Z)(an,2),D=G[0],j=G[1],_n=(0,h.useState)(10),Q=(0,A.Z)(_n,2),z=Q[0],w=Q[1],sn=(0,h.useState)(1),q=(0,A.Z)(sn,2),J=q[0],Y=q[1],nn=function(o){o||Y(1),o<.1||o>3?Y(1):Y(o)},S=function(o){H(o),o!=null&&o.label&&k(o.label)};(0,h.useEffect)(function(){localStorage.removeItem("history"),F([])},[]);function F(i,o){var s=localStorage.getItem("history"),c=s?JSON.parse(s):{index:-1,items:[]},on={currentAnnotation:o,annotations:i};if(JSON.stringify(c.items[c.index])!=JSON.stringify(on)){var cn=c.index>v?c.index-v:0,dn=c.items.splice(cn,c.index==0?1:c.index+1);c.items=dn.concat([on]),c.index<=v?c.index++:c.index=v+1,localStorage.setItem("history",JSON.stringify(c))}}var ln=function(){var o=localStorage.getItem("history");if(!!o){var s=JSON.parse(o);if(!!s&&!(s.index>=s.items.length-1)){s.index++,localStorage.setItem("history",JSON.stringify(s));var c=s.items[s.index];H(c.currentAnnotation),j(c.annotations)}}},un=function(){var o=localStorage.getItem("history");if(!!o){var s=JSON.parse(o);if(!(!s||!s.index)&&!(s.index<=0)){s.index--,localStorage.setItem("history",JSON.stringify(s));var c=s.items[s.index];H(c.currentAnnotation),j(c.annotations)}}},X=function(o){for(var s=[],c=0;c<D.length;c++)D[c].annotationId==o.annotationId?s.push(o):s.push(D[c]);S(o),j(s)},tn=(0,m.Z)({currentLabel:N,brushSize:z,currentTool:e,annotations:D,currentAnnotation:T,onAnnotationAdd:function(o){var s=D.concat([o]);j(s),T||S(o)},onAnnotationModify:X,onMouseUp:function(){F(D,T)}}),en=(0,_.Z)({currentLabel:N,brushSize:z,currentTool:e,annotations:D,currentAnnotation:T,onAnnotationAdd:function(o){var s=D.concat([o]);j(s),T||S(o)},onAnnotationModify:X,onMouseUp:function(){F(D,T)}}),$=e=="polygon"?en:tn;return(0,r.jsxs)(W.Z,{className:g().segment,children:[(0,r.jsxs)(x.Z,{children:[(0,r.jsx)(M.Z,{imgSrc:"./pics/buttons/intelligent_interaction.png",children:"Intelligent Interaction"}),(0,r.jsx)(b.Z,{active:e=="polygon",onClick:function(){a("polygon"),S(void 0)},children:"Polygon"}),(0,r.jsx)(t.Z,{size:z,active:e=="brush",onClick:function(){e!="rubber"&&e!="brush"&&S(void 0),a("brush")},onChange:function(o){w(o)},children:"Brush"}),(0,r.jsx)(t.Z,{size:z,active:e=="rubber",onClick:function(){e!="rubber"&&e!="brush"&&S(void 0),a("rubber")},onChange:function(o){w(o)},imgSrc:"./pics/buttons/rubber.png",children:"Rubber"}),(0,r.jsx)(M.Z,{imgSrc:"./pics/buttons/zoom_in.png",onClick:function(){nn(J+.1)},children:"Zoom in"}),(0,r.jsx)(M.Z,{imgSrc:"./pics/buttons/zoom_out.png",onClick:function(){nn(J-.1)},children:"Zoom out"}),(0,r.jsx)(M.Z,{imgSrc:"./pics/buttons/save.png",children:"Save"}),(0,r.jsx)(M.Z,{imgSrc:"./pics/buttons/move.png",onClick:function(){a("mover")},children:"Move"}),(0,r.jsx)(M.Z,{imgSrc:"./pics/buttons/export.png",children:"Export"}),(0,r.jsx)(M.Z,{imgSrc:"./pics/buttons/data_division.png",children:"Divide Data"}),(0,r.jsx)(M.Z,{imgSrc:"./pics/buttons/prev.png",onClick:function(){un()},children:"Undo"}),(0,r.jsx)(M.Z,{imgSrc:"./pics/buttons/next.png",onClick:function(){ln()},children:"Redo"}),(0,r.jsx)(M.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:"Clear Mark"})]}),(0,r.jsxs)("div",{className:g().mainStage,children:[(0,r.jsx)("div",{className:g().draw,children:(0,r.jsx)(C.Z,{scale:J,annotations:D,currentTool:e,currentAnnotation:T,setCurrentAnnotation:S,onAnnotationModify:X,onAnnotationModifyComplete:function(){F(D,T)},onMouseDown:$.onMouseDown,onMouseMove:$.onMouseMove,onMouseUp:$.onMouseUp,createPolygonFunc:en.createElementsFunc,createBrushFunc:tn.createElementsFunc})}),(0,r.jsx)("div",{className:g().pblock,children:(0,r.jsx)("div",{className:g().progress,children:(0,r.jsx)(U.Z,{percent:50,status:"active"})})})]}),(0,r.jsxs)(x.Z,{disLoc:"right",children:[(0,r.jsx)(l.Z,{imgSrc:"./pics/buttons/threshold.png",disLoc:"left",children:"Segment Threshold"}),(0,r.jsx)(l.Z,{imgSrc:"./pics/buttons/alpha.png",disLoc:"left",children:"Diaphaneity"}),(0,r.jsx)(l.Z,{imgSrc:"./pics/buttons/radius.png",disLoc:"left",children:"Visual Radius"})]}),(0,r.jsxs)("div",{className:g().rightSideBar,children:[(0,r.jsx)("div",{className:g().determinOutline,children:(0,r.jsx)(R.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",block:!0,onClick:function(){S(void 0)},children:"Determine Outline"})}),(0,r.jsx)(d.Z,{selectedLabel:N,onLabelSelect:function(o){k(o),S(void 0)},onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}}),(0,r.jsx)(P.Z,{selectedAnnotation:T,annotations:D,onAnnotationSelect:function(o){o!=null&&o.delete||S(o)},onAnnotationAdd:function(){},onAnnotationModify:function(){},onAnnotationDelete:function(o){j(D.filter(function(s){return s.annotationId!=o.annotationId})),S(void 0)}})]})]})};B.default=f}}]);
