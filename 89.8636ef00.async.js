(self.webpackChunkpp_labeling_frontend=self.webpackChunkpp_labeling_frontend||[]).push([[89],{57560:function(L){L.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___147XP",toolBarButtonContainer:"toolBarButtonContainer___ZEvhK",toolBarButton:"toolBarButton___1s2Rh",buttonText:"buttonText___3NTCv",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___2Utx8",popover:"popover___3PRoi"}},26647:function(L){L.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1FTWb",toolBarButtonContainer:"toolBarButtonContainer___1Vahn",toolBarButton:"toolBarButton___3mR2H",buttonText:"buttonText___Y0WDm",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3lRZ8",popover:"popover___3zzu2",popoverLeft:"popoverLeft___15lGe"}},54777:function(L){L.exports={segment:"segment___1YMcl",mainStage:"mainStage___2otee",draw:"draw___equn4",pblock:"pblock___2bT7z",progress:"progress___1porz",rightSideBar:"rightSideBar___2X7jK",determinOutline:"determinOutline___2ls57"}},43801:function(L,B,t){"use strict";t.d(B,{Z:function(){return x}});var Z=t(11849),y=t(2824),K=t(91220),R=t(67294),A=t(65031),E=t(85893);function T(n,l,u,v){if(!(!n||!l||!u||!v))return{width:n,color:l,points:u,tool:v}}function M(n,l){if(!n||!n.lines)return[(0,E.jsx)(E.Fragment,{})];var u=[],v=(0,K.Z)(n.lines),d;try{for(v.s();!(d=v.n()).done;){var f=d.value;!f.width||!f.color||!f.points||!f.tool||u.push((0,E.jsx)(A.x1,{stroke:f.color,strokeWidth:f.width,globalCompositeOperation:f.tool==="brush"?"source-over":"destination-out",lineCap:"round",points:f.points,tension:.01,onClick:function(){return l(n)},onTap:function(){return l(n)}}))}}catch(P){v.e(P)}finally{v.f()}return u}function U(n,l){return n=="rubber"||l==2?"rubber":"brush"}function h(n){var l=0,u=(0,K.Z)(n),v;try{for(u.s();!(v=u.n()).done;){var d=v.value;!d||d.annotationId>l&&(l=d.annotationId)}}catch(f){u.e(f)}finally{u.f()}return l}function x(n){var l=(0,R.useState)(),u=(0,y.Z)(l,2),v=u[0],d=u[1],f=function(m,g){var D;if(console.log(n.currentTool),!(n.currentTool!="brush"&&n.currentTool!="rubber")){var O=m.evt.offsetX/g,C=m.evt.offsetY/g,e=U(n.currentTool,m.evt.button),a=T(n.brushSize||10,(D=n.currentLabel)===null||D===void 0?void 0:D.color,[O,C,O,C],e);if(!!a)if(d(e),n.currentAnnotation){var I,p={tool:"brush",annotationId:n.currentAnnotation.annotationId,label:n.currentAnnotation.label,lines:(I=n.currentAnnotation.lines)===null||I===void 0?void 0:I.concat([a])};n.onAnnotationModify(p)}else{if(e=="rubber")return;n.onAnnotationAdd({tool:"brush",annotationId:h(n.annotations)+1,label:n.currentLabel,lines:[a]})}}},P=function(m,g){var D;if(!(!v||!n.currentAnnotation)){var O=m.evt.offsetX/g,C=m.evt.offsetY/g,e=[O,C],a=[];(D=n.currentAnnotation)!==null&&D!==void 0&&D.lines&&(e=n.currentAnnotation.lines[n.currentAnnotation.lines.length-1].points.concat(e),a=n.currentAnnotation.lines);var I=T(n.brushSize||10,n.currentLabel.color,e,v);!I||(a.pop(),a.push(I),n.onAnnotationModify((0,Z.Z)((0,Z.Z)({},n.currentAnnotation),{},{lines:a})))}},s=function(){n.currentTool!="brush"&&n.currentTool!="rubber"||(d(void 0),n.onMouseUp())};return{onMouseDown:f,onMouseMove:P,onMouseUp:s,createElementsFunc:M}}},58967:function(L,B,t){"use strict";var Z=t(20136),y=t(55241),K=t(77883),R=t(70507),A=t(57663),E=t(71577),T=t(2824),M=t(67294),U=t(61541),h=t(57560),x=t.n(h),n=t(85893),l=1,u=50,v=10;function d(P){return P?P<=l?l:P>=u?u:P:v}var f=function(s){var r=(0,M.useState)(d(s.size)),m=(0,T.Z)(r,2),g=m[0],D=m[1],O=function(e){D(d(e))};return(0,M.useEffect)(function(){O(s.size)},[s.size]),(0,n.jsxs)(y.Z,{overlayClassName:x().popover,placement:"right",content:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(E.Z,{type:"text",onClick:function(){var e,a=d(g-1);O(a),(e=s.onChange)===null||e===void 0||e.call(0,a)},children:"-"}),(0,n.jsx)(R.Z,{min:l,max:u,value:g,onChange:function(e){var a;(a=s.onChange)===null||a===void 0||a.call(0,e)},controls:!1,style:{textAlign:"center"}}),(0,n.jsx)(E.Z,{type:"text",onClick:function(){var e,a=d(g+1);O(a),(e=s.onChange)===null||e===void 0||e.call(0,a)},children:"+"})]}),trigger:s.active?"hover":"click",children:[" ",(0,n.jsx)(U.Z,{active:s.active,imgSrc:s.imgSrc||"./pics/buttons/brush.png",onClick:s.onClick,children:s.children||"Brush"})]})};B.Z=f},27992:function(L,B,t){"use strict";var Z=t(20136),y=t(55241),K=t(77883),R=t(70507),A=t(57663),E=t(71577),T=t(2824),M=t(67294),U=t(61541),h=t(26647),x=t.n(h),n=t(85893),l=1,u=100,v=10;function d(P){return P?P<=l?l:P>=u?u:P:v}var f=function(s){var r=(0,M.useState)(d(s.size)),m=(0,T.Z)(r,2),g=m[0],D=m[1],O=function(e){D(d(e))};return(0,M.useEffect)(function(){O(s.size)},[s.size]),(0,n.jsxs)(y.Z,{overlayClassName:"".concat(x().popover," ").concat(s.disLoc=="left"?x().popoverLeft:""),placement:s.disLoc||"right",content:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(E.Z,{type:"text",onClick:function(){var e,a=d(g-1);O(a),(e=s.onChange)===null||e===void 0||e.call(0,a)},children:"-"}),(0,n.jsx)(R.Z,{min:l,max:u,value:g,onChange:function(e){var a;(a=s.onChange)===null||a===void 0||a.call(0,e)},controls:!1,style:{textAlign:"center"}}),(0,n.jsx)(E.Z,{type:"text",onClick:function(){var e,a=d(g+1);O(a),(e=s.onChange)===null||e===void 0||e.call(0,a)},children:"+"})]}),trigger:"hover",children:[" ",(0,n.jsx)(U.Z,{imgSrc:s.imgSrc,onClick:s.onClick,children:s.children})]})};B.Z=f},86089:function(L,B,t){"use strict";t.r(B),t.d(B,{MOST_HISTORY_STEPS:function(){return m}});var Z=t(57663),y=t(71577),K=t(34669),R=t(54458),A=t(2824),E=t(67294),T=t(54777),M=t.n(T),U=t(8088),h=t(61541),x=t(44434),n=t(58967),l=t(27992),u=t(5041),v=t(57436),d=t(14836),f=t(29919),P=t(43801),s=t(13931),r=t(85893),m=40,g=function(){var O=(0,E.useState)(void 0),C=(0,A.Z)(O,2),e=C[0],a=C[1],I=(0,E.useState)({color:"",name:""}),p=(0,A.Z)(I,2),F=p[0],$=p[1],rn=(0,E.useState)(),k=(0,A.Z)(rn,2),W=k[0],N=k[1],an=(0,E.useState)([]),V=(0,A.Z)(an,2),S=V[0],j=V[1],_n=(0,E.useState)(10),G=(0,A.Z)(_n,2),z=G[0],Q=G[1],sn=(0,E.useState)(1),w=(0,A.Z)(sn,2),H=w[0],J=w[1],q=function(o){o||J(1),o<.1||o>3?J(1):J(o)},b=function(o){N(o),o!=null&&o.label&&$(o.label)};(0,E.useEffect)(function(){localStorage.removeItem("history"),Y([])},[]);function Y(i,o){var _=localStorage.getItem("history"),c=_?JSON.parse(_):{index:-1,items:[]},on={currentAnnotation:o,annotations:i};if(JSON.stringify(c.items[c.index])!=JSON.stringify(on)){var cn=c.index>m?c.index-m:0,dn=c.items.splice(cn,c.index==0?1:c.index+1);c.items=dn.concat([on]),c.index<=m?c.index++:c.index=m+1,localStorage.setItem("history",JSON.stringify(c))}}var ln=function(){var o=localStorage.getItem("history");if(!!o){var _=JSON.parse(o);if(!!_&&!(_.index>=_.items.length-1)){_.index++,localStorage.setItem("history",JSON.stringify(_));var c=_.items[_.index];N(c.currentAnnotation),j(c.annotations)}}},un=function(){var o=localStorage.getItem("history");if(!!o){var _=JSON.parse(o);if(!(!_||!_.index)&&!(_.index<=0)){_.index--,localStorage.setItem("history",JSON.stringify(_));var c=_.items[_.index];N(c.currentAnnotation),j(c.annotations)}}},nn=function(o){for(var _=[],c=0;c<S.length;c++)S[c].annotationId==o.annotationId?_.push(o):_.push(S[c]);b(o),j(_)},tn=(0,P.Z)({currentLabel:F,brushSize:z,currentTool:e,annotations:S,currentAnnotation:W,onAnnotationAdd:function(o){var _=S.concat([o]);j(_),W||b(o)},onAnnotationModify:nn,onMouseUp:function(){Y(S,W)}}),en=(0,s.Z)({currentLabel:F,brushSize:z,currentTool:e,annotations:S,currentAnnotation:W,onAnnotationAdd:function(o){var _=S.concat([o]);j(_),W||b(o)},onAnnotationModify:nn,onMouseUp:function(){Y(S,W)}}),X=e=="polygon"?en:tn;return(0,r.jsxs)(U.Z,{className:M().segment,children:[(0,r.jsxs)(x.Z,{children:[(0,r.jsx)(h.Z,{imgSrc:"./pics/buttons/intelligent_interaction.png",children:"Intelligent Interaction"}),(0,r.jsx)(f.Z,{active:e=="polygon",onClick:function(){a("polygon"),b(void 0)},children:"Polygon"}),(0,r.jsx)(n.Z,{size:z,active:e=="brush",onClick:function(){e!="rubber"&&e!="brush"&&b(void 0),a("brush")},onChange:function(o){Q(o)},children:"Brush"}),(0,r.jsx)(n.Z,{size:z,active:e=="rubber",onClick:function(){e!="rubber"&&e!="brush"&&b(void 0),a("rubber")},onChange:function(o){Q(o)},imgSrc:"./pics/buttons/rubber.png",children:"Rubber"}),(0,r.jsx)(h.Z,{imgSrc:"./pics/buttons/zoom_in.png",onClick:function(){q(H+.1)},children:"Zoom in"}),(0,r.jsx)(h.Z,{imgSrc:"./pics/buttons/zoom_out.png",onClick:function(){q(H-.1)},children:"Zoom out"}),(0,r.jsx)(h.Z,{imgSrc:"./pics/buttons/save.png",children:"Save"}),(0,r.jsx)(h.Z,{imgSrc:"./pics/buttons/move.png",children:"Move"}),(0,r.jsx)(h.Z,{imgSrc:"./pics/buttons/export.png",children:"Export"}),(0,r.jsx)(h.Z,{imgSrc:"./pics/buttons/data_division.png",children:"Divide Data"}),(0,r.jsx)(h.Z,{imgSrc:"./pics/buttons/prev.png",onClick:function(){un()},children:"Undo"}),(0,r.jsx)(h.Z,{imgSrc:"./pics/buttons/next.png",onClick:function(){ln()},children:"Redo"}),(0,r.jsx)(h.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:"Clear Mark"})]}),(0,r.jsxs)("div",{className:M().mainStage,children:[(0,r.jsx)("div",{className:M().draw,children:(0,r.jsx)(v.Z,{scale:H,annotations:S,currentTool:e,onMouseDown:X.onMouseDown,onMouseMove:X.onMouseMove,onMouseUp:X.onMouseUp,createPolygonFunc:en.createElementsFunc,createBrushFunc:tn.createElementsFunc})}),(0,r.jsx)("div",{className:M().pblock,children:(0,r.jsx)("div",{className:M().progress,children:(0,r.jsx)(R.Z,{percent:50,status:"active"})})})]}),(0,r.jsxs)(x.Z,{disLoc:"right",children:[(0,r.jsx)(l.Z,{imgSrc:"./pics/buttons/threshold.png",disLoc:"left",children:"Segment Threshold"}),(0,r.jsx)(l.Z,{imgSrc:"./pics/buttons/alpha.png",disLoc:"left",children:"Diaphaneity"}),(0,r.jsx)(l.Z,{imgSrc:"./pics/buttons/radius.png",disLoc:"left",children:"Visual Radius"})]}),(0,r.jsxs)("div",{className:M().rightSideBar,children:[(0,r.jsx)("div",{className:M().determinOutline,children:(0,r.jsx)(y.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",block:!0,onClick:function(){b(void 0)},children:"Determine Outline"})}),(0,r.jsx)(u.Z,{selectedLabel:F,onLabelSelect:function(o){$(o),b(void 0)},onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}}),(0,r.jsx)(d.Z,{selectedAnnotation:W,annotations:S,onAnnotationSelect:function(o){o!=null&&o.delete||b(o)},onAnnotationAdd:function(){},onAnnotationModify:function(){},onAnnotationDelete:function(o){j(S.filter(function(_){return _.annotationId!=o.annotationId})),b(void 0)}})]})]})};B.default=g}}]);
