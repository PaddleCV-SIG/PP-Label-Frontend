(self.webpackChunkpp_labeling_frontend=self.webpackChunkpp_labeling_frontend||[]).push([[216],{85024:function(s){s.exports={listItem:"listItem___u4Q82",eye:"eye___BwaRm",delete:"delete___31JB_",roundBall:"roundBall___23A7l",popover:"popover___1BNET",annotationId:"annotationId___zAzX4",labelName:"labelName___2ohxn",listItemActive:"listItemActive___2QnA3"}},56159:function(s){s.exports={labelList:"labelList___v7C6K",listHeader:"listHeader___1aY8R",eye:"eye___2MKbp",roundBall:"roundBall___187XH"}},52822:function(s){s.exports={roundBall:"roundBall___1pqu1",popover:"popover___1-PR6"}},5882:function(s){s.exports={listItem:"listItem___vtDXn",eye:"eye___AsLBS",roundBall:"roundBall___1J_R3",popover:"popover___1x-2R",listItemActive:"listItemActive___3FRb7"}},56131:function(s){s.exports={labelList:"labelList___jvD05",listHeader:"listHeader___UM5UF",eye:"eye___II3Po",roundBall:"roundBall___j752J"}},78677:function(s){s.exports={container:"container___G0FNe"}},83930:function(s){s.exports={stage:"stage___3H5QL"}},80961:function(s){s.exports={leftToolbar:"leftToolbar___1xi4t",rightToolbar:"rightToolbar___3dNSB"}},82499:function(s){s.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1SHWL",toolBarButtonContainer:"toolBarButtonContainer___1jKUz",toolBarButton:"toolBarButton___3Ouq1",buttonText:"buttonText___10ls7",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AA28"}},14836:function(s,E,n){"use strict";n.d(E,{Z:function(){return F}});var O=n(54421),c=n(38272),_=n(57663),r=n(71577),i=n(67294),a=n(56159),P=n.n(a),M=n(49111),t=n(19650),u=n(2824),v=n(11849),x=n(85024),o=n.n(x),d=n(63097),e=n(85893),l=function(m){var C=(0,v.Z)({},m.annotation),A=(0,i.useState)(C.invisible),h=(0,u.Z)(A,2),B=h[0],N=h[1];(0,i.useEffect)(function(){N(m.annotation.invisible)},[m.annotation.invisible]);var $=(0,e.jsxs)(c.ZP.Item,{className:"".concat(o().listItem," ").concat(m.active?o().listItemActive:""),unselectable:"on",onClick:function(){m.onClick(C)},children:[(0,e.jsxs)(t.Z,{align:"center",size:5,children:[(0,e.jsx)("a",{className:o().eye,style:{backgroundImage:B?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(){N(!B),m.onAnnotationModify(C)}})," ",(0,e.jsx)("span",{className:o().annotationId,children:C.annotationId}),(0,e.jsx)("span",{className:o().labelName,children:C.label.name}),(0,e.jsx)(d.Z,{color:C.label.color})]}),(0,e.jsx)("a",{className:o().delete,onClick:function(){C.delete=!0,m.onAnnotationDelete(C)}})]});return $},L=l,j=function(m){return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(c.ZP,{className:P().labelList,size:"large",header:(0,e.jsx)("div",{className:P().listHeader,children:"Annotation List"}),bordered:!0,dataSource:m.annotations,renderItem:function(A){var h;return(0,e.jsx)(L,{onClick:m.onAnnotationSelect,annotation:A,active:A.annotationId==((h=m.selectedAnnotation)===null||h===void 0?void 0:h.annotationId),onAnnotationDelete:m.onAnnotationDelete,onAnnotationModify:m.onAnnotationModify})},footer:(0,e.jsx)("div",{children:(0,e.jsx)(r.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){m.onAnnotationSelect(void 0)},block:!0,children:"Add Annotation"})})})})},F=j},63097:function(s,E,n){"use strict";var O=n(20136),c=n(55241),_=n(2824),r=n(67294),i=n(52822),a=n.n(i),P=n(63144),M=n(85893),t=function(v){var x=(0,r.useState)(v.color||"#FFF"),o=(0,_.Z)(x,2),d=o[0],e=o[1];return(0,r.useEffect)(function(){e(v.color||"#FFF")},[v]),v.changeable?(0,M.jsx)(c.Z,{getPopupContainer:function(L){return L.parentElement||document.body},overlayClassName:a().popover,openClassName:a().popoverOpenClassName,placement:"bottom",content:(0,M.jsx)(P.xS,{disableAlpha:!0,color:d,onChange:function(L){e(L.hex)},onChangeComplete:v.onChange}),trigger:"click",children:(0,M.jsx)("div",{className:a().roundBall,style:{backgroundColor:d}})}):(0,M.jsx)("div",{className:a().roundBall,style:{backgroundColor:d}})};E.Z=t},5041:function(s,E,n){"use strict";n.d(E,{Z:function(){return X}});var O=n(54421),c=n(38272),_=n(57663),r=n(71577),i=n(2824),a=n(67294),P=n(56131),M=n.n(P),t=n(49111),u=n(19650),v=n(11849),x=n(5882),o=n.n(x),d=n(63097),e=n(85893),l=function(f){var D=(0,v.Z)({},f.label),T=(0,a.useState)(D.invisible),y=(0,i.Z)(T,2),U=y[0],K=y[1],W=(0,e.jsx)(c.ZP.Item,{className:"".concat(o().listItem," ").concat(f.active?o().listItemActive:""),unselectable:"on",onClick:function(){f.onClick(D)},children:(0,e.jsxs)(u.Z,{align:"center",size:5,children:[(0,e.jsx)("a",{className:o().eye,style:{backgroundImage:U?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(){K(!U),f.onLabelModify(D)}})," ",D.name,(0,e.jsx)(d.Z,{color:D.color,changeable:!0,onChange:function(Z){D.color=Z.hex,f.onLabelModify(D)}})]})});return W},L=l,j=n(71194),F=n(50146),b=n(47673),m=n(24044),C=n(9715),A=n(93766),h=["#FF0000","#008000","#0000FF","#FFFF00","#FFA500","#00FFFF","#8B00FF","#FFC0CB","#7CFC00","#007FFF","#800080","#36BF36","#DAA520","#800000","#008B8B","#B22222","#E6D933","#000080","#FF00FF","#FFFF99","#87CEEB","#5C50E6","#CD5C5C","#20B2AA","#E680FF","#4D1F00","#006374","#B399FF","#8B4513","#BA55D3","#C0C0C0","#808080","#000000"],B=function(f){var D,T,y=(0,a.useState)(((D=f.defaultLabel)===null||D===void 0?void 0:D.color)||h[f.order||0]),U=(0,i.Z)(y,2),K=U[0],W=U[1];(0,a.useEffect)(function(){var g;W(((g=f.defaultLabel)===null||g===void 0?void 0:g.color)||h[f.order||0])},[f]);var S=A.Z.useForm(),Z=(0,i.Z)(S,1),R=Z[0];return(0,e.jsx)(F.Z,{title:"Add Label",visible:f.visible,onCancel:f.onCancel,footer:null,children:(0,e.jsxs)(A.Z,{form:R,name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!1,labelname:(T=f.defaultLabel)===null||T===void 0?void 0:T.name},onFinish:function(I){var Y={name:I.labelname,color:K};f.onLabelAdd(Y),R.resetFields()},autoComplete:"off",children:[(0,e.jsx)(A.Z.Item,{label:"Label Name",name:"labelname",rules:[{required:!0,message:"Please input label name!"}],children:(0,e.jsx)(m.Z,{})}),(0,e.jsx)(A.Z.Item,{label:"Select Color",name:"color",children:(0,e.jsx)(d.Z,{color:K,onChange:function(I){W(I.hex)}})}),(0,e.jsx)(A.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,e.jsxs)(u.Z,{children:[(0,e.jsx)(r.Z,{onClick:function(){var I;(I=f.onCancel)===null||I===void 0||I.call(0),R.resetFields()},children:"\u53D6\u6D88"}),(0,e.jsx)(r.Z,{type:"primary",htmlType:"submit",children:"\u786E\u5B9A"})]})})]})})},N=B,$=[{color:"#FF0000",name:"Label 1"},{color:"#008000",name:"Label 2"}],H=function(f){var D=(0,a.useState)($),T=(0,i.Z)(D,2),y=T[0],U=T[1],K=(0,a.useState)(!1),W=(0,i.Z)(K,2),S=W[0],Z=W[1];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(c.ZP,{className:M().labelList,size:"large",header:(0,e.jsx)("div",{className:M().listHeader,children:"Label List"}),footer:(0,e.jsx)("div",{children:(0,e.jsx)(r.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){Z(!0)},block:!0,children:"Add Label"})}),bordered:!0,dataSource:y,renderItem:function(g){var I;return(0,e.jsx)(L,{onClick:f.onLabelSelect,label:g,active:g.name==((I=f.selectedLabel)===null||I===void 0?void 0:I.name),onLabelDelete:f.onLabelDelete,onLabelModify:f.onLabelModify})}}),(0,e.jsx)(N,{order:y.length,visible:S,onLabelAdd:function(g){y.push(g),U(y),Z(!1)},onCancel:function(){Z(!1)}})]})},X=H},8088:function(s,E,n){"use strict";var O=n(67294),c=n(78677),_=n.n(c),r=n(85893),i=function(P){return(0,r.jsx)("div",{className:"".concat(_().container," ").concat(P.className),children:P.children})};E.Z=i},13931:function(s,E,n){"use strict";n.d(E,{Z:function(){return M}});var O=n(91220),c=n(65031),_=n(85893);function r(t){var u=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return u?{r:parseInt(u[1],16),g:parseInt(u[2],16),b:parseInt(u[3],16)}:null}function i(t,u){if(!(!t||!u))return{color:t,points:u}}function a(t,u){if(!t||!t.lines||!t.lines[0])return[(0,_.jsx)(_.Fragment,{})];var v=t.lines[0].points,x=t.lines[0].color,o=r(x);if(!o)return[(0,_.jsx)(_.Fragment,{})];var d=void 0,e=[];return v.forEach(function(l){if(!d){d=l;return}e.push((0,_.jsx)(c.Cd,{x:d,y:l,radius:5,fill:x})),d=void 0}),[(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(c.x1,{stroke:x,strokeWidth:2,globalCompositeOperation:"source-over",lineCap:"round",points:v,tension:.01,closed:!0,fill:"rgba(".concat(o.r,", ").concat(o.g,", ").concat(o.b,", 0.5)"),onClick:function(){return u(t)},onTap:function(){return u(t)}}),e]})]}function P(t){var u=0,v=(0,O.Z)(t),x;try{for(v.s();!(x=v.n()).done;){var o=x.value;!o||o.annotationId>u&&(u=o.annotationId)}}catch(d){v.e(d)}finally{v.f()}return u}function M(t){var u=function(e,l){var L,j=e.evt.offsetX/l,F=e.evt.offsetY/l,b=i((L=t.currentLabel)===null||L===void 0?void 0:L.color,[j,F]);!b||t.onAnnotationAdd({tool:"polygon",annotationId:P(t.annotations)+1,label:t.currentLabel,lines:[b]})},v=function(e,l){var L,j;if(!!t.currentAnnotation){var F=e.evt.offsetX/l,b=e.evt.offsetY/l,m=t.currentAnnotation.lines||[],C=i((L=t.currentLabel)===null||L===void 0?void 0:L.color,(j=m[0])===null||j===void 0?void 0:j.points.concat([F,b]));if(!!C){var A={tool:"polygon",annotationId:t.currentAnnotation.annotationId,label:t.currentAnnotation.label,lines:[C]};t.onAnnotationModify(A)}}},x=function(e,l){t.currentTool=="polygon"&&(t.currentAnnotation?v(e,l):u(e,l))},o=function(){t.currentTool=="polygon"&&t.onMouseUp()};return{onMouseDown:x,onMouseMove:function(){},onMouseUp:o,createElementsFunc:a}}},29919:function(s,E,n){"use strict";var O=n(67294),c=n(61541),_=n(85893),r=function(a){return(0,_.jsx)(c.Z,{active:a.active,imgSrc:a.imgSrc||"./pics/buttons/polygon.png",onClick:a.onClick,children:a.children})};E.Z=r},57436:function(s,E,n){"use strict";var O=n(91220),c=n(2824),_=n(67294),r=n(65031),i=n(84420),a=n.n(i),P=n(83930),M=n.n(P),t=n(85893),u="./pics/basketball.jpg",v=function(o){var d=a()(u),e=(0,c.Z)(d,1),l=e[0],L=(l==null?void 0:l.width)||0,j=(l==null?void 0:l.height)||0,F=[];if(o.annotations){var b=(0,O.Z)(o.annotations),m;try{for(b.s();!(m=b.n()).done;){var C=m.value;if(!!C){var A=C.tool=="polygon"?o.createPolygonFunc:o.createBrushFunc;A&&F.push(A(C,o.setCurrentAnnotation))}}}catch(h){b.e(h)}finally{b.f()}}return(0,t.jsxs)(r.Hf,{width:L*o.scale,height:j*o.scale,className:M().stage,children:[(0,t.jsx)(r.mh,{scaleX:o.scale,scaleY:o.scale,children:(0,t.jsx)(r.Ee,{image:l})}),(0,t.jsxs)(r.mh,{scaleX:o.scale,scaleY:o.scale,onMouseDown:function(B){o.onMouseDown&&o.onMouseDown(B,o.scale)},onMouseMove:function(B){o.onMouseMove&&o.onMouseMove(B,o.scale)},onMouseUp:function(B){o.onMouseUp&&o.onMouseUp(B,o.scale)},onContextMenu:function(B){B.evt.preventDefault()},children:[(0,t.jsx)(r.Ee,{draggable:!1,image:l}),F]})]})};E.Z=v},44434:function(s,E,n){"use strict";var O=n(67294),c=n(80961),_=n.n(c),r=n(85893),i=function(P){var M=_().leftToolbar;return P.disLoc=="right"&&(M=_().rightToolbar),(0,r.jsx)("div",{className:M,children:P.children})};E.Z=i},61541:function(s,E,n){"use strict";var O=n(49111),c=n(19650),_=n(67294),r=n(82499),i=n.n(r),a=n(85893),P=function(t){return(0,a.jsx)("div",{unselectable:"on",className:"".concat(i().toolBarButtonContainerWrapper," ").concat(t.active&&i().toolBarButtonContainerWrapperActive),onClick:t.onClick,children:(0,a.jsx)(c.Z,{align:"center",className:i().toolBarButtonContainer,size:0,children:(0,a.jsxs)(c.Z,{align:"center",direction:"vertical",className:i().toolBarButton,size:0,children:[(0,a.jsx)("img",{src:t.imgSrc}),(0,a.jsx)("div",{className:i().buttonText,children:t.children})]})})})};E.Z=P}}]);
