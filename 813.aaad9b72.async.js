(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[813],{85024:function(J){J.exports={listItem:"listItem___u4Q82",eye:"eye___BwaRm",delete:"delete___31JB_",roundBall:"roundBall___23A7l",popover:"popover___1BNET",annotationId:"annotationId___zAzX4",labelName:"labelName___2ohxn",listItemActive:"listItemActive___2QnA3"}},56159:function(J){J.exports={labelList:"labelList___v7C6K",listHeader:"listHeader___1aY8R",eye:"eye___2MKbp",roundBall:"roundBall___187XH"}},26647:function(J){J.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1FTWb",toolBarButtonContainer:"toolBarButtonContainer___1Vahn",toolBarButton:"toolBarButton___3mR2H",buttonText:"buttonText___Y0WDm",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3lRZ8",popover:"popover___3zzu2",slider:"slider___ALra-",popoverLeft:"popoverLeft___15lGe"}},6277:function(J){J.exports={modal:"modal___26yNn"}},45092:function(J){J.exports={modal:"modal___1H_FQ"}},14836:function(J,an,n){"use strict";n.d(an,{Z:function(){return vn}});var p=n(54421),un=n(38272),xn=n(57663),_n=n(71577),gn=n(67294),c=n(56159),s=n.n(c),D=n(49111),B=n(19650),Y=n(2824),cn=n(11849),X=n(85024),Q=n.n(X),hn=n(63097),r=n(85893),P=function(o){var L=(0,cn.Z)({},o.annotation),fn=(0,gn.useState)(L.invisible),e=(0,Y.Z)(fn,2),G=e[0],N=e[1],tn=(0,gn.useState)(0),z=(0,Y.Z)(tn,2),rn=z[0],$=z[1];(0,gn.useEffect)(function(){N(o.annotation.invisible)},[o.annotation.invisible]);var K=(0,r.jsxs)(un.ZP.Item,{className:"".concat(Q().listItem," ").concat(o.active?Q().listItemActive:""),unselectable:"on",onClick:function(){o.onClick(L)},children:[(0,r.jsxs)(B.Z,{align:"center",size:5,children:[(0,r.jsx)("a",{className:Q().eye,style:{backgroundImage:G?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(mn){mn.stopPropagation(),N(!G),o.onAnnotationModify(L)}})," ",(0,r.jsx)("span",{className:Q().annotationId,children:L.frontendId}),(0,r.jsx)("span",{className:Q().labelName,children:L.label.name}),(0,r.jsx)(hn.Z,{color:L.label.color})]}),(0,r.jsx)("a",{className:Q().delete,onClick:function(mn){mn.stopPropagation();var Tn=new Date().getTime();Tn-rn<300||($(Tn),o.onAnnotationDelete(L))}})]});return K},q=P,y=n(48971),j=function(o){var L=(0,y.YB)().formatMessage({id:"component.PPAnnotationList.annotationList"}),fn=(0,y.YB)().formatMessage({id:"component.PPAnnotationList.addAnnotation"});return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(un.ZP,{className:s().labelList,size:"large",header:(0,r.jsx)("div",{className:s().listHeader,children:L}),bordered:!0,dataSource:o.annotations,renderItem:function(G){var N;return(0,r.jsx)(q,{onClick:o.onAnnotationSelect,annotation:G,active:G.frontendId==((N=o.currAnnotation)===null||N===void 0?void 0:N.frontendId),onAnnotationDelete:o.onAnnotationDelete,onAnnotationModify:o.onAnnotationModify})},footer:(0,r.jsx)("div",{children:(0,r.jsx)(_n.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){o.onAnnotationAdd()},block:!0,children:fn})})})})},vn=j},27992:function(J,an,n){"use strict";var p=n(20136),un=n(55241),xn=n(13062),_n=n(71230),gn=n(77883),c=n(70507),s=n(89032),D=n(15746),B=n(66126),Y=n(75454),cn=n(2824),X=n(67294),Q=n(61541),hn=n(26647),r=n.n(hn),P=n(85893),q=0,y=100,j=10,vn=function(o){var L=(0,X.useState)(rn(o.size)),fn=(0,cn.Z)(L,2),e=fn[0],G=fn[1];function N($){G(rn($))}var tn=o.minSize==null?q:o.minSize,z=o.maxSize==null?y:o.maxSize;function rn($){return $==null?j:$<=tn?tn:$>=z?z:$}return(0,X.useEffect)(function(){N(o.size)},[o.size]),(0,P.jsxs)(un.Z,{overlayClassName:"".concat(r().popover," ").concat(o.disLoc=="left"?r().popoverLeft:""),placement:o.disLoc||"right",content:(0,P.jsxs)(_n.Z,{children:[(0,P.jsx)(D.Z,{span:16,children:(0,P.jsx)(Y.Z,{className:r().slider,value:e,max:z,min:tn,onChange:function(K){var I;(I=o.onChange)===null||I===void 0||I.call(0,K)},tooltipVisible:!1})}),(0,P.jsx)(D.Z,{span:8,children:(0,P.jsx)(c.Z,{min:tn,max:z,value:e,onChange:function(K){var I;(I=o.onChange)===null||I===void 0||I.call(0,K)},step:10})})]}),trigger:"hover",children:[" ",(0,P.jsx)(Q.Z,{imgSrc:o.imgSrc||"",onClick:o.onClick,active:o.active,children:o.children})]})};an.Z=vn},85871:function(J,an,n){"use strict";var p=n(71194),un=n(50146),xn=n(49111),_n=n(19650),gn=n(57663),c=n(71577),s=n(13062),D=n(71230),B=n(89032),Y=n(15746),cn=n(77883),X=n(70507),Q=n(34792),hn=n(48086),r=n(9715),P=n(93766),q=n(2824),y=n(67294),j=n(48971),vn=n(6277),nn=n.n(vn),o=n(85893),L=function(e){var G=(0,j.YB)(),N=(0,y.useState)(60),tn=(0,q.Z)(N,2),z=tn[0],rn=tn[1],$=(0,y.useState)(20),K=(0,q.Z)($,2),I=K[0],mn=K[1],Tn=(0,y.useState)(20),Rn=(0,q.Z)(Tn,2),t=Rn[0],i=Rn[1],v=(0,y.useState)(!1),g=(0,q.Z)(v,2),M=g[0],d=g[1],C=(0,j.YB)().formatMessage({id:"pages.toolBar.divideData"}),E=(0,j.YB)().formatMessage({id:"component.PPDivideDataModal.train"}),h=(0,j.YB)().formatMessage({id:"component.PPDivideDataModal.validation"}),Z=(0,j.YB)().formatMessage({id:"component.PPDivideDataModal.test"}),m=(0,j.YB)().formatMessage({id:"component.PPCreater.cancel"}),R=(0,j.YB)().formatMessage({id:"component.PPSegMode.ok"}),en=P.Z.useForm(),H=(0,q.Z)(en,1),V=H[0];return(0,o.jsx)(un.Z,{className:nn().modal,title:C,visible:e.visible,onCancel:e.onCancel,footer:null,children:(0,o.jsxs)(P.Z,{form:V,name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!1},onFinish:function(){if(z+I+t!=100){hn.default.error("Train, Validation and Test total percent should equal 100!");return}console.log("x trainData: ".concat(z,", validationData: ").concat(I,", testData: ").concat(t,", props.project.curr.projectId: ").concat(e.project.curr.projectId)),d(!0),e.splitDataset(e.project.curr.projectId,{train:z*.01,val:I*.01,test:t*.01}).then(function(){var A;console.log("success"),hn.default.success(G.formatMessage({id:"component.PPDivideDataModal.success"})),(A=e.onFinish)===null||A===void 0||A.call(0)}).finally(function(){d(!1)})},autoComplete:"off",layout:"vertical",children:[(0,o.jsxs)(D.Z,{children:[(0,o.jsx)(Y.Z,{span:8,children:(0,o.jsx)(P.Z.Item,{label:E,name:"train",children:(0,o.jsx)(X.Z,{addonAfter:"%",defaultValue:60,precision:0,min:0,max:100,value:z,onChange:rn})})}),(0,o.jsx)(Y.Z,{span:8,children:(0,o.jsx)(P.Z.Item,{label:h,name:"validation",children:(0,o.jsx)(X.Z,{addonAfter:"%",defaultValue:20,precision:0,min:0,max:100,value:I,onChange:mn})})}),(0,o.jsx)(Y.Z,{span:8,children:(0,o.jsx)(P.Z.Item,{label:Z,name:"test",children:(0,o.jsx)(X.Z,{addonAfter:"%",defaultValue:20,precision:0,min:0,max:100,value:t,onChange:i})})})]}),(0,o.jsx)(P.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,o.jsxs)(_n.Z,{children:[(0,o.jsx)(c.Z,{onClick:function(){var A;(A=e.onCancel)===null||A===void 0||A.call(0),V.resetFields()},children:m}),(0,o.jsx)(c.Z,{type:"primary",htmlType:"submit",loading:M,children:R})]})})]})})};an.Z=L},62850:function(J,an,n){"use strict";var p=n(71194),un=n(50146),xn=n(49111),_n=n(19650),gn=n(57663),c=n(71577),s=n(47673),D=n(24044),B=n(34792),Y=n(48086),cn=n(9715),X=n(93766),Q=n(2824),hn=n(67294),r=n(48971),P=n(45092),q=n.n(P),y=n(85893),j=function(nn){var o=(0,r.YB)(),L=(0,hn.useState)(!1),fn=(0,Q.Z)(L,2),e=fn[0],G=fn[1],N=(0,r.YB)().formatMessage({id:"component.PPCreater.cancel"}),tn=X.Z.useForm(),z=(0,Q.Z)(tn,1),rn=z[0];return(0,y.jsx)(un.Z,{className:q().modal,title:(0,r.YB)().formatMessage({id:"component.PPExportModal.title"}),visible:nn.visible,onCancel:nn.onCancel,footer:null,children:(0,y.jsxs)(X.Z,{form:rn,name:"basic",labelCol:{span:6},wrapperCol:{span:16},initialValues:{remember:!1},onFinish:function(K){console.log(K);var I=K.path;if(!I){Y.default.error(o.formatMessage({id:"component.PPExportModal.pathNotNull"}));return}G(!0),nn.exportDataset(nn.project.curr.projectId,I).then(function(){var mn;Y.default.success(o.formatMessage({id:"component.PPExportModal.exportSuccess"})),(mn=nn.onFinish)===null||mn===void 0||mn.call(0)}).finally(function(){G(!1)})},autoComplete:"off",children:[(0,y.jsx)(X.Z.Item,{label:o.formatMessage({id:"component.PPExportModal.path"}),name:"path",children:(0,y.jsx)(D.Z,{})}),(0,y.jsx)(X.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,y.jsxs)(_n.Z,{children:[(0,y.jsx)(c.Z,{onClick:function(){var K;(K=nn.onCancel)===null||K===void 0||K.call(0),rn.resetFields()},children:N}),(0,y.jsx)(c.Z,{type:"primary",htmlType:"submit",loading:e,children:o.formatMessage({id:"component.PPExportModal.export"})})]})})]})})};an.Z=j},91861:function(J,an,n){"use strict";n.d(an,{Ad:function(){return un},k3:function(){return xn},Vd:function(){return _n},td:function(){return gn}});var p=40;function un(){localStorage.removeItem("history"),xn([])}function xn(c){var s=localStorage.getItem("history"),D=s?JSON.parse(s):{index:-1,items:[]};if(JSON.stringify(D.items[D.index])!=JSON.stringify(c)){var B=D.index>p?D.index-p:0,Y=D.items.splice(B,D.index==0?1:D.index+1);D.items=Y.concat([c]),D.index<=p?D.index++:D.index=p+1,localStorage.setItem("history",JSON.stringify(D))}}function _n(){var c=localStorage.getItem("history");if(!!c){var s=JSON.parse(c);if(!!s&&!(s.index>=s.items.length-1))return s.index++,localStorage.setItem("history",JSON.stringify(s)),s.items[s.index]}}function gn(){var c=localStorage.getItem("history");if(!!c){var s=JSON.parse(c);if(!(!s||!s.index)&&!(s.index<=0))return s.index--,localStorage.setItem("history",JSON.stringify(s)),s.items[s.index]}}},4813:function(J,an,n){"use strict";n.r(an),n.d(an,{MOST_HISTORY_STEPS:function(){return mn},default:function(){return Rn}});var p=n(91220),un=n(57663),xn=n(71577),_n=n(34669),gn=n(54458),c=n(2824),s=n(67294),D=n(8088),B=n(61541),Y=n(44434),cn=n(27992),X=n(5041),Q=n(57436),hn=n(14836),r=n(48971),P=n(91861),q=n(85871),y=n(62850),j=n(11849),vn=n(65031);function nn(t){var i=0;if(!t)return i;var v=(0,p.Z)(t),g;try{for(v.s();!(g=v.n()).done;){var M=g.value;!M||!M.frontendId||M.frontendId>i&&(i=M.frontendId)}}catch(d){v.e(d)}finally{v.f()}return i}function o(t){var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:null}function L(t){var i=t.toString(16);return i.length==1?"0"+i:i}function fn(t,i,v){return"#"+L(t)+L(i)+L(v)}var e=n(85893);function G(t){if(!(!t||!t.width||!t.color||!t.points||t.lineId==null))return t}function N(t,i,v){var g,M;console.log("drawDirectCanvas line: ",v);var d=(g=t.current)===null||g===void 0?void 0:g.getContext("2d");if(!(!d||v.length==0)){d.globalAlpha=1,d.clearRect(0,0,d.canvas.width,d.canvas.height);var C=(0,p.Z)(v),E;try{for(C.s();!(E=C.n()).done;){var h=E.value,Z=h.points.at(0);console.log("drawDirectCanvas line: ",h,"color: ",h.color,"belongs to frontendId:",Z);var m=h.points.slice(1);d.beginPath(),d.moveTo(m[0],m[1]);for(var R=0;R<=m.length/2-1;R++){var en=m[2*R],H=m[2*R+1];d.lineTo(en,H)}d.lineCap="round",d.lineJoin="round",d.lineWidth=h.width,d.strokeStyle=h.color,d.globalCompositeOperation=h.type=="brush"?"source-over":"destination-out",d.stroke()}}catch(V){C.e(V)}finally{C.f()}(M=i.current)===null||M===void 0||M.batchDraw()}}function tn(t,i){return t=="rubber"||i==2?"rubber":"brush"}function z(t){var i=(0,s.useState)(),v=(0,c.Z)(i,2),g=v[0],M=v[1],d=(0,s.useState)([]),C=(0,c.Z)(d,2),E=C[0],h=C[1],Z=(0,s.useState)(-1),m=(0,c.Z)(Z,2),R=m[0],en=m[1],H=function(){return en(R+1),R+1},V=function(O){var _=E.concat([O]);return h(_),_};function x(k,O){if(!!t.annotations){var _=k.current,w=_==null?void 0:_.getContext("2d"),T=document.getElementById("virtualCanvas"),b=T.getContext("2d"),f=document.getElementById("singleLineCanvas"),l=f.getContext("2d");if(!(!_||!w||!T||!b||!f||!l)&&!!E.at(-1)){b.clearRect(0,0,T.width,T.height);var F=(0,p.Z)(E),sn;try{for(F.s();!(sn=F.n()).done;){var on=sn.value,Mn=on.points.at(0),In=on.points.slice(1),jn="#"+(Mn+"").padStart(6,"0");console.log("repaint line on singleLineCanvas, frontendId: ",Mn,"destColor: ",jn),l.clearRect(0,0,f.width,f.height),l.beginPath(),l.moveTo(In[0],In[1]);for(var On=0;On<=In.length/2-1;On++){var Kn=In[2*On],Fn=In[2*On+1];l.lineTo(Kn,Fn)}l.lineCap="round",l.lineJoin="round",l.lineWidth=on.width,l.strokeStyle=on.type=="brush"?"#FFFFFF":jn,l.globalCompositeOperation="source-over",l.stroke();for(var Dn=l.getImageData(0,0,f.width,f.height).data,ln=0,Pn=0,Cn=0;Cn+4<Dn.length;Cn+=4){var S=Dn[Cn],An=Dn[Cn+1],Sn=Dn[Cn+2],Bn=Dn[Cn+3];(S||An||Sn||Bn)&&(S==255&&An==255&&Sn==255&&Bn==255?(console.log("found white pixel: x,y,rgba()",ln,Pn,S,An,Sn,Bn),b.fillStyle="#FFFFFF",b.fillRect(ln,Pn,1,1)):(S||An||Sn||Bn)&&(console.log("found line pixel: rgba()",ln,Pn,S,An,Sn,Bn),b.fillStyle=jn,b.fillRect(ln,Pn,1,1))),ln++,ln==f.width&&(ln=0,Pn++)}}}catch(Yn){F.e(Yn)}finally{F.f()}var U=b.getImageData(0,0,T.width,T.height).data;console.log("virtualCtx getImageData.data:",U);for(var Wn=new Uint8Array(U.length/4),W=0;W<U.length;W+=4){var Nn=U[W],zn=U[W+1],$n=U[W+2],Hn=U[W+3];U[W]&&console.log("data[i]:",U[W]),U[W+1]&&console.log("data[i + 1]",U[W+1]),U[W+2]&&console.log("data[i + 2]",U[W+2]),U[W+3]&&console.log("data[i + 3]",U[W+3]),Wn[W/4]=U[W+2]}var pn=new Blob([Wn],{type:"application/octet-stream"}),Ln=window.document.createElement("a");Ln.href=window.URL.createObjectURL(pn),Ln.download="test.png",document.body.appendChild(Ln),Ln.click(),document.body.removeChild(Ln)}}}function A(k,O){if(!!t.annotations){var _=(0,p.Z)(t.annotations),w;try{for(_.s();!(w=_.n()).done;){var T,b,f=w.value;if(!!((T=f.label)!==null&&T!==void 0&&T.color)){var l=(b=f.label)===null||b===void 0?void 0:b.color,F=(0,p.Z)(f.lines),sn;try{for(F.s();!(sn=F.n()).done;){var on=sn.value;E[on].color=l}}catch(Mn){F.e(Mn)}finally{F.f()}}}}catch(Mn){_.e(Mn)}finally{_.f()}N(k,O,E)}}function Zn(k){if(!k.annotation)return(0,e.jsx)(e.Fragment,{});var O=k.annotation.png?(0,e.jsx)(vn.Ee,{image:k.annotation.png}):(0,e.jsx)(e.Fragment,{});return O}var Un=function(O){var _,w;if(!(t.currentTool!="brush"&&t.currentTool!="rubber"||!((_=t.currentLabel)!==null&&_!==void 0&&_.color))){var T=O.mouseX,b=O.mouseY,f=tn(t.currentTool,O.e.evt.button),l=G({width:t.brushSize||10,color:(w=t.currentLabel)===null||w===void 0?void 0:w.color,points:[T,b,T,b],type:f,lineId:H()});if(!!l){if(M(f),t.currentAnnotation){var sn,on={dataId:t.dataId,frontendId:t.currentAnnotation.frontendId,label:t.currentAnnotation.label,lines:(sn=t.currentAnnotation.lines)===null||sn===void 0?void 0:sn.concat([l.lineId])};t.onAnnotationModify(on),l.points=[on.frontendId].concat(l.points)}else{if(f=="rubber")return;var F={dataId:t.dataId,frontendId:nn(t.annotations)+1,label:t.currentLabel,lines:[l.lineId]};t.onAnnotationAdd(F),l.points=[F.frontendId].concat(l.points)}N(O.canvasRef,O.layerRef,V(l))}}},yn=function(O){var _,w;if(!(!g||!t.currentAnnotation||!E.at(-1)||!((_=t.currentLabel)!==null&&_!==void 0&&_.color))){var T=E.pop();if(!!T){var b=O.mouseX,f=O.mouseY,l=[b,f];(w=t.currentAnnotation)!==null&&w!==void 0&&w.lines&&(l=T.points.concat(l));var F=G((0,j.Z)((0,j.Z)({},T),{},{points:l}));!F||N(O.canvasRef,O.layerRef,V(F))}}},bn=function(){t.currentTool!="brush"&&t.currentTool!="rubber"||(M(void 0),t.onMouseUp())};return{onMouseDown:Un,onMouseMove:yn,onMouseUp:bn,createElementsFunc:Zn,colorAsFrontendId:x,colorAsLabelColor:A}}function rn(t,i){if(!(!t||!i))return{color:t,points:i}}function $(t){if(!t.annotation||!t.annotation.lines||!t.annotation.lines[0])return(0,e.jsx)(e.Fragment,{});var i=t.annotation.lines[0].points,v=t.annotation.lines[0].color,g=o(v);if(!g)return(0,e.jsx)(e.Fragment,{});var M=.3,d=void 0,C=[];return i.forEach(function(E,h){if(!d){d=E;return}C.push((0,e.jsx)(vn.Cd,{onMouseDown:function(){t.currentTool=="editor"&&t.onSelect(t.annotation)},draggable:t.currentTool=="editor",onDragMove:function(m){var R;m.cancelBubble=!0;var en=(R=t.stageRef)===null||R===void 0?void 0:R.current,H=en.findOne(".baseImage"),V=!1,x=m.target.x();x>H.width()/2&&(x=H.width()/2,V=!0),x<-H.width()/2&&(x=-H.width()/2,V=!0);var A=m.target.y();A>H.height()/2&&(A=H.height()/2,V=!0),A<-H.height()/2&&(A=-H.height()/2,V=!0),V&&m.target.setPosition({x,y:A}),i[h-1]=x,i[h]=A;var Zn=(0,j.Z)((0,j.Z)({},t.annotation),{},{points:[{color:v,points:i}]});t.onDrag(Zn)},onMouseOver:function(){var m;t.currentTool=="editor"&&(m=t.stageRef)!==null&&m!==void 0&&m.current&&(t.stageRef.current.container().style.cursor="cell")},onMouseOut:function(){var m;t.currentTool=="editor"&&(m=t.stageRef)!==null&&m!==void 0&&m.current&&(t.stageRef.current.container().style.cursor="default")},x:d,y:E,radius:5/t.scale,fill:v})),d=void 0}),(0,e.jsxs)(vn.ZA,{children:[(0,e.jsx)(vn.x1,{onMouseOver:function(){t.currentTool=="editor"&&(document.body.style.cursor="pointer")},onMouseOut:function(){document.body.style.cursor="default"},onClick:function(){t.currentTool=="editor"&&t.onSelect(t.annotation)},stroke:v,strokeWidth:2/t.scale,globalCompositeOperation:"source-over",lineCap:"round",points:i,tension:0,closed:!0,fill:"rgba(".concat(g.r,", ").concat(g.g,", ").concat(g.b,", ").concat(M,")")}),C]},t.annotation.frontendId)}function K(t){var i=0;if(!t)return i;var v=(0,p.Z)(t),g;try{for(v.s();!(g=v.n()).done;){var M=g.value;!M||!M.frontendId||M.frontendId>i&&(i=M.frontendId)}}catch(d){v.e(d)}finally{v.f()}return i}function I(t){var i=function(C,E){var h,Z=rn((h=t.currentLabel)===null||h===void 0?void 0:h.color,[C,E]);!Z||t.onAnnotationAdd({dataId:t.dataId,type:"polygon",frontendId:K(t.annotations)+1,label:t.currentLabel,lines:[Z]})},v=function(C,E){var h,Z;if(!!t.currentAnnotation){var m=t.currentAnnotation.lines||[],R=rn((h=t.currentLabel)===null||h===void 0?void 0:h.color,(Z=m[0])===null||Z===void 0?void 0:Z.points.concat([C,E]));if(!!R){var en={dataId:t.dataId,type:"polygon",frontendId:t.currentAnnotation.frontendId,label:t.currentAnnotation.label,points:[R]};t.onAnnotationModify(en)}}},g=function(C){t.currentTool=="polygon"&&(t.currentAnnotation?v(C.mouseX,C.mouseY):i(C.mouseX,C.mouseY))},M=function(){t.currentTool=="polygon"&&t.onMouseUp()};return{onMouseDown:g,onMouseMove:function(){},onMouseUp:M,createElementsFunc:$}}var mn=40,Tn=function(){var i=(0,s.useState)([]),v=(0,c.Z)(i,2),g=v[0],M=v[1],d=(0,s.useState)(!1),C=(0,c.Z)(d,2),E=C[0],h=C[1],Z=(0,s.useState)(!1),m=(0,c.Z)(Z,2),R=m[0],en=m[1],H=(0,s.useState)(void 0),V=(0,c.Z)(H,2),x=V[0],A=V[1],Zn=(0,s.useState)(),Un=(0,c.Z)(Zn,2),yn=Un[0],bn=Un[1],k=(0,s.useState)(),O=(0,c.Z)(k,2),_=O[0],w=O[1],T=(0,s.useState)([]),b=(0,c.Z)(T,2),f=b[0],l=b[1],F=(0,s.useState)(1),sn=(0,c.Z)(F,2),on=sn[0],Mn=sn[1],In=(0,s.useState)(60),jn=(0,c.Z)(In,2),On=jn[0],Kn=jn[1],Fn=(0,s.useState)(10),Dn=(0,c.Z)(Fn,2),ln=Dn[0],Pn=Dn[1],Cn=function(a){a||Pn(1),a<.1||a>20?Pn(1):Pn(a)},S=function(a){w(a),a!=null&&a.label&&bn(a.label)};(0,s.useEffect)(function(){(0,P.Ad)()},[]);var An=function(a){for(var dn=[],En=0;En<f.length;En++)f[En].frontendId==a.frontendId?dn.push(a):dn.push(f[En]);S(a),l(dn)},Sn={dataId:0,currentLabel:yn,brushSize:on,scale:ln,currentTool:x,annotations:f,currentAnnotation:_,onAnnotationAdd:function(a){var dn=f.concat([a]);l(dn),_||S(a)},onAnnotationModify:An,onMouseUp:function(){(0,P.k3)({annos:f,currAnno:_})}},Bn=z(Sn),U=I(Sn),Wn=x=="polygon"?U:Bn,W=(0,r.YB)().formatMessage({id:"pages.toolBar.polygon"}),Nn=(0,r.YB)().formatMessage({id:"pages.toolBar.brush"}),zn=(0,r.YB)().formatMessage({id:"pages.toolBar.rubber"}),$n=(0,r.YB)().formatMessage({id:"pages.toolBar.zoomIn"}),Hn=(0,r.YB)().formatMessage({id:"pages.toolBar.zoomOut"}),pn=(0,r.YB)().formatMessage({id:"pages.toolBar.move"}),Ln=(0,r.YB)().formatMessage({id:"pages.toolBar.unDo"}),Yn=(0,r.YB)().formatMessage({id:"pages.toolBar.reDo"}),Xn=(0,r.YB)().formatMessage({id:"pages.toolBar.save"}),Gn=(0,r.YB)().formatMessage({id:"pages.toolBar.edit"}),Qn=(0,r.YB)().formatMessage({id:"pages.toolBar.clearMark"}),kn=(0,r.YB)().formatMessage({id:"pages.toolBar.interactor"}),wn=(0,r.YB)().formatMessage({id:"pages.toolBar.segmentThreshold"}),qn=(0,r.YB)().formatMessage({id:"pages.toolBar.visualRadius"}),nt=(0,r.YB)().formatMessage({id:"pages.toolBar.determineOutline"}),tt=(0,r.YB)().formatMessage({id:"pages.toolBar.divideData"}),et=(0,r.YB)().formatMessage({id:"pages.toolBar.export"});return(0,e.jsxs)(D.Z,{className:"segment",children:[(0,e.jsxs)(Y.Z,{children:[(0,e.jsx)(B.Z,{imgSrc:"./pics/buttons/polygon.png",active:x=="polygon",onClick:function(){A("polygon"),S(void 0)},children:W}),(0,e.jsx)(B.Z,{active:x=="editor",imgSrc:"./pics/buttons/edit.png",onClick:function(){A("editor"),S(void 0)},children:Gn}),(0,e.jsx)(cn.Z,{imgSrc:"./pics/buttons/brush.png",size:on,active:x=="brush",onClick:function(){x!="rubber"&&x!="brush"&&S(void 0),A("brush")},onChange:function(a){Mn(a)},children:Nn}),(0,e.jsx)(cn.Z,{size:on,active:x=="rubber",onClick:function(){x!="rubber"&&x!="brush"&&S(void 0),A("rubber")},onChange:function(a){Mn(a)},imgSrc:"./pics/buttons/rubber.png",children:zn}),(0,e.jsx)(B.Z,{imgSrc:"./pics/buttons/zoom_in.png",onClick:function(){Cn(ln+.1)},children:$n}),(0,e.jsx)(B.Z,{imgSrc:"./pics/buttons/zoom_out.png",onClick:function(){Cn(ln-.1)},children:Hn}),(0,e.jsx)(B.Z,{imgSrc:"./pics/buttons/save.png",children:Xn}),(0,e.jsx)(B.Z,{active:x=="mover",imgSrc:"./pics/buttons/move.png",onClick:function(){A("mover")},children:pn}),(0,e.jsx)(B.Z,{imgSrc:"./pics/buttons/prev.png",onClick:function(){var a=(0,P.td)();a&&(l(a.annos),S(a.currAnno))},children:Ln}),(0,e.jsx)(B.Z,{imgSrc:"./pics/buttons/next.png",onClick:function(){var a=(0,P.Vd)();a&&(l(a.annos),S(a.currAnno))},children:Yn}),(0,e.jsx)(B.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:Qn})]}),(0,e.jsxs)("div",{id:"dr",className:"mainStage",children:[(0,e.jsx)("div",{className:"draw",children:(0,e.jsx)(Q.Z,{scale:ln,annotations:f,currentTool:x,currentAnnotation:_,setCurrentAnnotation:S,onAnnotationModify:An,onAnnotationModifyComplete:function(){(0,P.k3)({annos:f,currAnno:_})},imgSrc:void 0,transparency:On,onAnnotationAdd:function(a){var dn=f.concat([a]);l(dn),_||S(a)},drawTool:Wn})}),(0,e.jsx)("div",{className:"pblock",children:(0,e.jsxs)("div",{className:"progress",children:[(0,e.jsx)(gn.Z,{className:"progressBar",percent:10,status:"active",showInfo:!1})," ",(0,e.jsx)("span",{className:"progressDesc",children:"Current labeling 1 of 300. Already labeled 20."})]})}),(0,e.jsx)("div",{className:"prevTask",onClick:function(){!task.prevTask()||(S(void 0),l([]))}}),(0,e.jsx)("div",{className:"nextTask",onClick:function(){!task.nextTask()||(S(void 0),l([]))}})]}),(0,e.jsxs)(Y.Z,{disLoc:"right",children:[(0,e.jsx)(B.Z,{imgSrc:"./pics/buttons/intelligent_interaction.png",children:kn}),(0,e.jsx)(cn.Z,{imgSrc:"./pics/buttons/threshold.png",disLoc:"left",children:wn}),(0,e.jsx)(cn.Z,{imgSrc:"./pics/buttons/alpha.png",disLoc:"left",size:On,maxSize:100,minSize:0,onChange:function(a){Kn(a)},children:(0,r.YB)().formatMessage({id:"pages.toolBar.transparency"})}),(0,e.jsx)(cn.Z,{imgSrc:"./pics/buttons/radius.png",disLoc:"left",children:qn}),(0,e.jsx)(B.Z,{imgSrc:"./pics/buttons/data_division.png",onClick:function(){h(!0)},children:tt}),(0,e.jsx)(B.Z,{imgSrc:"./pics/buttons/export.png",onClick:function(){en(!0)},children:et})]}),(0,e.jsxs)("div",{className:"rightSideBar",children:[(0,e.jsx)("div",{className:"determinOutline",children:(0,e.jsx)(xn.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",block:!0,onClick:function(){S(void 0)},children:nt})}),(0,e.jsx)(X.Z,{labels:g,activeIds:new Set([yn]),onLabelSelect:function(a){bn(a),S(void 0)},onLabelModify:function(){},onLabelDelete:function(a){var dn=[],En=(0,p.Z)(g),Vn;try{for(En.s();!(Vn=En.n()).done;){var Jn=Vn.value;Jn.labelId!=a.labelId&&dn.push(Jn)}}catch(ot){En.e(ot)}finally{En.f()}M(dn),(yn==null?void 0:yn.labelId)==a.labelId&&bn(void 0)},onLabelAdd:function(a){g.push(a),M(g),bn(a)}}),(0,e.jsx)(hn.Z,{currAnnotation:_,annotations:f,onAnnotationSelect:function(a){a!=null&&a.delete||S(a)},onAnnotationAdd:function(){},onAnnotationModify:function(){},onAnnotationDelete:function(a){l(f.filter(function(dn){return dn.frontendId!=a.frontendId})),S(void 0)}})]}),(0,e.jsx)(q.Z,{visible:E,onCancel:function(){h(!1)},onFinish:function(){h(!1)}}),(0,e.jsx)(y.Z,{visible:R,onCancel:function(){en(!1)},onFinish:function(){en(!1)}})]})},Rn=Tn}}]);
