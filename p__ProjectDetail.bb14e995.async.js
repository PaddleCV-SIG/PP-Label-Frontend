(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[498],{91220:function(N,M,e){"use strict";e.d(M,{Z:function(){return h}});var O=e(64254);function h(a,g){var C;if(typeof Symbol=="undefined"||a[Symbol.iterator]==null){if(Array.isArray(a)||(C=(0,O.Z)(a))||g&&a&&typeof a.length=="number"){C&&(a=C);var I=0,A=function(){};return{s:A,n:function(){return I>=a.length?{done:!0}:{done:!1,value:a[I++]}},e:function(_){throw _},f:A}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var R=!0,L=!1,p;return{s:function(){C=a[Symbol.iterator]()},n:function(){var _=C.next();return R=_.done,_},e:function(_){L=!0,p=_},f:function(){try{!R&&C.return!=null&&C.return()}finally{if(L)throw p}}}}},70830:function(N,M,e){"use strict";e.d(M,{Z:function(){return O}});function O(h){throw new TypeError('"'+h+'" is read-only')}},41435:function(N,M,e){"use strict";e.d(M,{Z:function(){return I}});var O=e(94663),h=e(80112);function a(A){return Function.toString.call(A).indexOf("[native code]")!==-1}var g=e(18597);function C(A,R,L){return(0,g.Z)()?C=Reflect.construct:C=function(E,_,x){var S=[null];S.push.apply(S,_);var K=Function.bind.apply(E,S),j=new K;return x&&(0,h.Z)(j,x.prototype),j},C.apply(null,arguments)}function I(A){var R=typeof Map=="function"?new Map:void 0;return I=function(p){if(p===null||!a(p))return p;if(typeof p!="function")throw new TypeError("Super expression must either be null or a function");if(typeof R!="undefined"){if(R.has(p))return R.get(p);R.set(p,E)}function E(){return C(p,arguments,(0,O.Z)(this).constructor)}return E.prototype=Object.create(p.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),(0,h.Z)(E,p)},I(A)}},48627:function(N){N.exports={container:"container___2RXc3"}},18398:function(N){N.exports={_ppcard:"_ppcard___1sR0b",title:"title___2fjZe",shadow:"shadow___3SaOl",main:"main___IOVJu",block_l:"block_l___1ywNh",block_r:"block_r___Sg4L7",goup:"goup___1vznA"}},44943:function(){},11428:function(N,M,e){"use strict";var O=e(67294),h=e(48627),a=e.n(h),g=e(85893),C=function(A){return(0,g.jsx)("div",{className:"".concat(a().container),style:{backgroundImage:"url(./pics/background.png)"},children:A.children})};M.Z=C},68370:function(N,M,e){"use strict";e.r(M),e.d(M,{default:function(){return l}});var O=e(34792),h=e(48086),a=e(67294),g=e(48971),C=e(57663),I=e(71577),A=e(88983),R=e(47933),L=e(47673),p=e(24044),E=e(9715),_=e(93766),x=e(2824),S=e(89032),K=e(15746),j=e(11849),y=e(13062),v=e(71230),b=e(11700),G=e(18398),U=e.n(G),$=e(37071),F=e(91156),H=e(64322),c=e(85893),k=function(d){return(0,c.jsxs)("div",{className:U()._ppcard,style:d.style,children:[(0,c.jsx)(v.Z,{className:U().titleRow,style:{display:d.title?void 0:"none"},children:(0,c.jsx)(b.Z,{className:U().title,children:d.title})}),(0,c.jsx)(v.Z,{style:{marginTop:26},children:(0,c.jsx)(K.Z,{span:24,style:(0,j.Z)({paddingLeft:30,paddingRight:30,textAlign:"center"},d.innerStyle),children:d.children})})]})},X=function(d){var B=(0,H.Gd)(a.useState),Z=$.Z.getQueryVariable("projectId");console.log("render ppcreater",d,Z);var T=function(n){Z?B.update(Z,{name:n.name,description:n.description,dataDir:n.dataDir,labelDir:n.labelDir}).then(function(){g.m8.push("/welcome")}):B.create({name:n.name,description:n.description,taskCategoryId:F.ux[d.taskCategory].id,dataDir:n.dataDir,labelDir:n.labelDir}).then(function(i){g.m8.push("/".concat((0,F.LV)(d.taskCategory),"?projectId=").concat(i.projectId))}).catch(function(){})},z=d.taskCategory?F.ux[d.taskCategory].name:null,J=_.Z.useForm(),V=(0,x.Z)(J,1),r=V[0];return(0,a.useEffect)(function(){B.getCurr(Z).then(function(t){console.log("project",t);var n={name:t==null?void 0:t.name,description:t==null?void 0:t.description,dataDir:t==null?void 0:t.dataDir};r.setFieldsValue(n)})},[]),(0,c.jsxs)("div",{className:U().shadow,style:d.style,children:[(0,c.jsx)("div",{id:"left",className:U().block_l,children:(0,c.jsx)(k,{title:z,style:{height:760,padding:"1.25rem 0"},children:(0,c.jsxs)(_.Z,{form:r,layout:"horizontal",size:"large",style:{marginTop:"5.69rem"},onFinish:function(n){T(n)},children:[(0,c.jsx)(_.Z.Item,{name:"name",label:"Project Name",labelCol:{span:6},wrapperCol:{span:16},rules:[{required:!0,message:"Please input project name!"}],style:{fontSize:"1.5rem"},children:(0,c.jsx)(p.Z,{size:"large",placeholder:"Words or numbers",style:{height:"3.13rem"}})}),(0,c.jsx)(_.Z.Item,{name:"dataDir",label:"Dataset Path",labelCol:{span:6},wrapperCol:{span:16},rules:[{required:!0,message:"Please input dataset path!"}],style:{fontSize:"1.5rem"},children:(0,c.jsx)(p.Z,{size:"large",placeholder:"Dataset Path",style:{height:"3.13rem"},disabled:Z!=null})}),(0,c.jsx)(_.Z.Item,{name:"description",label:"Description",labelCol:{span:6},wrapperCol:{span:16},rules:[{required:!1}],style:{fontSize:"1.5rem"},children:(0,c.jsx)(p.Z,{size:"large",placeholder:"Words or numbers",style:{height:"3.13rem"}})}),(0,c.jsx)(_.Z.Item,{name:"maxPoints",label:"MaxPoints",labelCol:{span:6},wrapperCol:{span:16},rules:[{required:d.taskCategory=="keypointDetection",message:"Please input max points!"}],style:{fontSize:"1.5rem",display:d.taskCategory=="keypointDetection"?void 0:"none"},children:(0,c.jsx)(p.Z,{size:"large",placeholder:"Numbers (Int)",style:{height:"3.13rem"}})}),(0,c.jsx)(_.Z.Item,{name:"segmentationMode",label:"AnnotationMode",labelCol:{span:6},wrapperCol:{span:16},rules:[{required:d.taskCategory=="semanticSegmentation",message:"Please select task category!"}],style:{fontSize:"1.5rem",display:d.taskCategory=="semanticSegmentation"?void 0:"none"},children:(0,c.jsx)("div",{className:U().goup,children:(0,c.jsxs)(R.ZP.Group,{defaultValue:1,size:"large",style:{height:"3.13rem"},children:[(0,c.jsx)(R.ZP,{value:1,children:"Pixel model"}),(0,c.jsx)(R.ZP,{value:2,children:"Polygon mode"})]})})}),(0,c.jsxs)(_.Z.Item,{wrapperCol:{span:16,offset:6},children:[(0,c.jsx)(I.Z,{htmlType:"submit",type:"primary",style:{height:"2.5rem",width:"48%"},block:!0,children:Z?"Update":"Create"}),"\xA0\xA0",(0,c.jsx)(I.Z,{htmlType:"button",style:{height:"2.5rem",width:"48%"},block:!0,onClick:function(){g.m8.push("/welcome")},children:"Cancel"})]})]})})}),(0,c.jsx)("div",{id:"right",className:U().block_r,children:(0,c.jsx)(k,{style:{height:"43.63rem",padding:"0.5rem 0"},children:(0,c.jsx)("img",{src:d.imgSrc,style:{height:"43.63rem",width:"60rem"}})})})]})},o=X,f=e(11428),P=function(){var d=(0,H.os)($.Z.getQueryVariable("taskCategory"));return d||(h.default.error("Task Category not present in url"),g.m8.push("/")),d in F.ux||(h.default.error("Invalid task category "+d),g.m8.push("/")),(0,c.jsx)(f.Z,{children:(0,c.jsx)(o,{imgSrc:"./pics/illustration.jpg",taskCategory:d})})},l=P},91156:function(N,M,e){"use strict";e.d(M,{F$:function(){return S},LV:function(){return U},ux:function(){return F}});var O=e(34792),h=e(94043),a=e.n(h),g=e(37071),C=e(81139),I=e(63891),A=e(13868),R=e(70676),L=e(54919),p=e(6276),E=e(59124),_=localStorage.getItem("basePath"),x=new C.VK(_?{basePath:_}:void 0),S=new I.U(x),K=new A.v(x),j=new L.W(x),y=new p.s(x),v=new E.C(x);function b(r){return JSON.parse(JSON.stringify(r))}var G=function(t,n,i){if(!i)return-1;for(var s=0;s<n.length;s++)if(t[i]==n[s][i])return s;return-1};function U(r){return r&&r.replace(/[A-Z]/g,function(t){return"_".concat(t.toLowerCase())})}function $(r){return r&&(r.toLowerCase().replace(/([-_][a-z])/g,function(t){return t.toUpperCase().replace("-","").replace("_","")}),r)}var F={classification:{name:"Image Classification",avatar:"./pics/classification.jpg",id:1},detection:{name:"Detection",avatar:"./pics/object_detection.jpg",id:2},semanticSegmentation:{name:"Semantic Segmentation",avatar:"./pics/semantic_segmentation.jpg",id:3},instanceSegmentation:{name:"Instance Segmentation",avatar:"./pics/instance_segmentation.jpg",id:4},keypointDetection:{name:"Keypoint Detection",avatar:"./pics/keypoint_detection.jpg",id:5}},H=function(t,n){var i=_toConsumableArray(t);for(var s in t)i[s].active=!1;for(var m in t)G(t[m],n,"labelId")!=-1&&(i[m].active=!0);return console.log("activa labs",i),i};function c(r){return k.apply(this,arguments)}function k(){return k=_asyncToGenerator(_regeneratorRuntime.mark(function r(t){return _regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:S.getAll().then(function(s){console.log("get all projects",b(s)),t(b(s))}).catch(function(s){serviceUtils.parseError(s,_message)});case 1:case"end":return i.stop()}},r)})),k.apply(this,arguments)}function X(r){return o.apply(this,arguments)}function o(){return o=_asyncToGenerator(_regeneratorRuntime.mark(function r(t){var n,i=arguments;return _regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:n=i.length>1&&i[1]!==void 0?i[1]:null,console.log("get project id ",t),S.get(t).then(function(W){return console.log("getProject res",W),n&&n(W),W}).catch(function(W){console.log("getProject err",W),serviceUtils.parseError(W,_message)});case 3:case"end":return m.stop()}},r)})),o.apply(this,arguments)}function f(r,t){return P.apply(this,arguments)}function P(){return P=_asyncToGenerator(_regeneratorRuntime.mark(function r(t,n){return _regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:console.log("delete pj, pjid",t),S.remove(t).then(function(m){console.log("delete project",m),c(n)}).catch(function(m){console.log(m),serviceUtils.parseError(m,_message)});case 2:case"end":return s.stop()}},r)})),P.apply(this,arguments)}function l(r){return u.apply(this,arguments)}function u(){return u=_asyncToGenerator(_regeneratorRuntime.mark(function r(t){return _regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:y.getAll().then(function(s){console.log("got tasks",s),t&&t(s)}).catch(function(s){console.log("get tasks err",s),serviceUtils.parseError(s,_message)});case 1:case"end":return i.stop()}},r)})),u.apply(this,arguments)}function d(r,t){return B.apply(this,arguments)}function B(){return B=_asyncToGenerator(_regeneratorRuntime.mark(function r(t,n){return _regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:console.log("get task id",t),y.get(t).then(function(m){console.log("got task ",m),n&&n(m)});case 2:case"end":return s.stop()}},r)})),B.apply(this,arguments)}function Z(r){return T.apply(this,arguments)}function T(){return T=_asyncToGenerator(_regeneratorRuntime.mark(function r(t){var n,i,s,m,W;return _regeneratorRuntime.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(t){D.next=2;break}return D.abrupt("return",0);case 2:return D.prev=2,D.next=5,S.getTasks(t);case 5:n=D.sent,i=0,s=_createForOfIteratorHelper(n);try{for(s.s();!(m=s.n()).done;)W=m.value,W.annotations.length!=0&&i++}catch(Q){s.e(Q)}finally{s.f()}return console.log("progress",Math.ceil(i/n.length*100)),D.abrupt("return",Math.ceil(i/n.length*100));case 13:return D.prev=13,D.t0=D.catch(2),console.log("get progress err",D.t0),serviceUtils.parseError(D.t0,_message),D.abrupt("return",0);case 18:case"end":return D.stop()}},r,null,[[2,13]])})),T.apply(this,arguments)}function z(r,t){console.log("getLabels projectid",r),!!r&&S.getLabels(r).then(function(n){console.log("got labels ",n),t(b(n))}).catch(function(n){serviceUtils.parseError(n,_message)})}function J(r,t,n){var i=LabelFromJSON(t);i.projectId=r,K.create(i).then(function(){z(r,n)}).catch(function(s){serviceUtils.parseError(s,_message)})}function V(r,t){console.log("delete label",r),K.remove(r.labelId).then(function(){_message.error("Label "+r.name+" is deleted!"),z(r.projectId,t)}).catch(function(n){serviceUtils.parseError(n,_message)})}},5467:function(N,M,e){"use strict";e.d(M,{Z:function(){return O}});function O(h){return Object.keys(h).reduce(function(a,g){return(g.substr(0,5)==="data-"||g.substr(0,5)==="aria-"||g==="role")&&g.substr(0,7)!=="data-__"&&(a[g]=h[g]),a},{})}},47933:function(N,M,e){"use strict";e.d(M,{ZP:function(){return X}});var O=e(96156),h=e(22122),a=e(67294),g=e(50132),C=e(94184),I=e.n(C),A=e(42550),R=e(65632),L=a.createContext(null),p=L.Provider,E=L,_=e(21687),x=function(o,f){var P={};for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&f.indexOf(l)<0&&(P[l]=o[l]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,l=Object.getOwnPropertySymbols(o);u<l.length;u++)f.indexOf(l[u])<0&&Object.prototype.propertyIsEnumerable.call(o,l[u])&&(P[l[u]]=o[l[u]]);return P},S=function(f,P){var l,u=a.useContext(E),d=a.useContext(R.E_),B=d.getPrefixCls,Z=d.direction,T=a.useRef(),z=(0,A.sQ)(P,T);a.useEffect(function(){(0,_.Z)(!("optionType"in f),"Radio","`optionType` is only support in Radio.Group.")},[]);var J=function(D){var Q,Y;(Q=f.onChange)===null||Q===void 0||Q.call(f,D),(Y=u==null?void 0:u.onChange)===null||Y===void 0||Y.call(u,D)},V=f.prefixCls,r=f.className,t=f.children,n=f.style,i=x(f,["prefixCls","className","children","style"]),s=B("radio",V),m=(0,h.Z)({},i);u&&(m.name=u.name,m.onChange=J,m.checked=f.value===u.value,m.disabled=f.disabled||u.disabled);var W=I()("".concat(s,"-wrapper"),(l={},(0,O.Z)(l,"".concat(s,"-wrapper-checked"),m.checked),(0,O.Z)(l,"".concat(s,"-wrapper-disabled"),m.disabled),(0,O.Z)(l,"".concat(s,"-wrapper-rtl"),Z==="rtl"),l),r);return a.createElement("label",{className:W,style:n,onMouseEnter:f.onMouseEnter,onMouseLeave:f.onMouseLeave},a.createElement(g.Z,(0,h.Z)({},m,{type:"radio",prefixCls:s,ref:z})),t!==void 0?a.createElement("span",null,t):null)},K=a.forwardRef(S);K.displayName="Radio";var j=K,y=e(28481),v=e(21770),b=e(97647),G=e(5467),U=a.forwardRef(function(o,f){var P=a.useContext(R.E_),l=P.getPrefixCls,u=P.direction,d=a.useContext(b.Z),B=(0,v.Z)(o.defaultValue,{value:o.value}),Z=(0,y.Z)(B,2),T=Z[0],z=Z[1],J=function(t){var n=T,i=t.target.value;"value"in o||z(i);var s=o.onChange;s&&i!==n&&s(t)},V=function(){var t,n=o.prefixCls,i=o.className,s=i===void 0?"":i,m=o.options,W=o.optionType,q=o.buttonStyle,D=q===void 0?"outline":q,Q=o.disabled,Y=o.children,oe=o.size,se=o.style,ie=o.id,le=o.onMouseEnter,ce=o.onMouseLeave,te=l("radio",n),ee="".concat(te,"-group"),ne=Y;if(m&&m.length>0){var re=W==="button"?"".concat(te,"-button"):te;ne=m.map(function(w){return typeof w=="string"||typeof w=="number"?a.createElement(j,{key:w.toString(),prefixCls:re,disabled:Q,value:w,checked:T===w},w):a.createElement(j,{key:"radio-group-value-options-".concat(w.value),prefixCls:re,disabled:w.disabled||Q,value:w.value,checked:T===w.value,style:w.style},w.label)})}var ae=oe||d,ue=I()(ee,"".concat(ee,"-").concat(D),(t={},(0,O.Z)(t,"".concat(ee,"-").concat(ae),ae),(0,O.Z)(t,"".concat(ee,"-rtl"),u==="rtl"),t),s);return a.createElement("div",(0,h.Z)({},(0,G.Z)(o),{className:ue,style:se,onMouseEnter:le,onMouseLeave:ce,id:ie,ref:f}),ne)};return a.createElement(p,{value:{onChange:J,value:T,disabled:o.disabled,name:o.name}},V())}),$=a.memo(U),F=function(o,f){var P={};for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&f.indexOf(l)<0&&(P[l]=o[l]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,l=Object.getOwnPropertySymbols(o);u<l.length;u++)f.indexOf(l[u])<0&&Object.prototype.propertyIsEnumerable.call(o,l[u])&&(P[l[u]]=o[l[u]]);return P},H=function(f,P){var l=a.useContext(E),u=a.useContext(R.E_),d=u.getPrefixCls,B=f.prefixCls,Z=F(f,["prefixCls"]),T=d("radio-button",B);return l&&(Z.checked=f.value===l.value,Z.disabled=f.disabled||l.disabled),a.createElement(j,(0,h.Z)({prefixCls:T},Z,{type:"radio",ref:P}))},c=a.forwardRef(H),k=j;k.Button=c,k.Group=$;var X=k},88983:function(N,M,e){"use strict";var O=e(38663),h=e.n(O),a=e(44943),g=e.n(a)},50132:function(N,M,e){"use strict";var O=e(22122),h=e(96156),a=e(81253),g=e(28991),C=e(6610),I=e(5991),A=e(10379),R=e(81907),L=e(67294),p=e(94184),E=e.n(p),_=function(x){(0,A.Z)(K,x);var S=(0,R.Z)(K);function K(j){var y;(0,C.Z)(this,K),y=S.call(this,j),y.handleChange=function(b){var G=y.props,U=G.disabled,$=G.onChange;U||("checked"in y.props||y.setState({checked:b.target.checked}),$&&$({target:(0,g.Z)((0,g.Z)({},y.props),{},{checked:b.target.checked}),stopPropagation:function(){b.stopPropagation()},preventDefault:function(){b.preventDefault()},nativeEvent:b.nativeEvent}))},y.saveInput=function(b){y.input=b};var v="checked"in j?j.checked:j.defaultChecked;return y.state={checked:v},y}return(0,I.Z)(K,[{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"render",value:function(){var y,v=this.props,b=v.prefixCls,G=v.className,U=v.style,$=v.name,F=v.id,H=v.type,c=v.disabled,k=v.readOnly,X=v.tabIndex,o=v.onClick,f=v.onFocus,P=v.onBlur,l=v.onKeyDown,u=v.onKeyPress,d=v.onKeyUp,B=v.autoFocus,Z=v.value,T=v.required,z=(0,a.Z)(v,["prefixCls","className","style","name","id","type","disabled","readOnly","tabIndex","onClick","onFocus","onBlur","onKeyDown","onKeyPress","onKeyUp","autoFocus","value","required"]),J=Object.keys(z).reduce(function(t,n){return(n.substr(0,5)==="aria-"||n.substr(0,5)==="data-"||n==="role")&&(t[n]=z[n]),t},{}),V=this.state.checked,r=E()(b,G,(y={},(0,h.Z)(y,"".concat(b,"-checked"),V),(0,h.Z)(y,"".concat(b,"-disabled"),c),y));return L.createElement("span",{className:r,style:U},L.createElement("input",(0,O.Z)({name:$,id:F,type:H,required:T,readOnly:k,disabled:c,tabIndex:X,className:"".concat(b,"-input"),checked:!!V,onClick:o,onFocus:f,onBlur:P,onKeyUp:d,onKeyDown:l,onKeyPress:u,onChange:this.handleChange,autoFocus:B,ref:this.saveInput,value:Z},J)),L.createElement("span",{className:"".concat(b,"-inner")}))}}],[{key:"getDerivedStateFromProps",value:function(y,v){return"checked"in y?(0,g.Z)((0,g.Z)({},v),{},{checked:y.checked}):null}}]),K}(L.Component);_.defaultProps={prefixCls:"rc-checkbox",className:"",style:{},type:"checkbox",defaultChecked:!1,onFocus:function(){},onBlur:function(){},onChange:function(){},onKeyDown:function(){},onKeyPress:function(){},onKeyUp:function(){}},M.Z=_}}]);
