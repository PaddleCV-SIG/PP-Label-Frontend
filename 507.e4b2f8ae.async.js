(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[507],{52822:function(c){c.exports={roundBall:"roundBall___1pqu1",popover:"popover___1-PR6"}},5882:function(c){c.exports={listItem:"listItem___vtDXn",eye:"eye___AsLBS",roundBall:"roundBall___1J_R3",popover:"popover___1x-2R",delete:"delete___WHPf2",listItemActive:"listItemActive___3FRb7"}},56131:function(c){c.exports={labelList:"labelList___jvD05",listHeader:"listHeader___UM5UF",eye:"eye___II3Po",roundBall:"roundBall___j752J"}},78677:function(c){c.exports={container:"container___G0FNe"}},80961:function(c){c.exports={leftToolbar:"leftToolbar___1xi4t",rightToolbar:"rightToolbar___3dNSB"}},82499:function(c){c.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1SHWL",toolBarButtonContainer:"toolBarButtonContainer___1jKUz",toolBarButton:"toolBarButton___3Ouq1",buttonText:"buttonText___10ls7",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AA28"}},63097:function(c,g,n){"use strict";var K=n(20136),v=n(55241),u=n(2824),i=n(67294),s=n(52822),l=n.n(s),o=n(63144),f=n(85893),F=function(L){var a=(0,i.useState)(L.color||"#FFF"),A=(0,u.Z)(a,2),T=A[0],e=A[1];return(0,i.useEffect)(function(){e(L.color||"#FFF")},[L]),L.changeable?(0,f.jsx)(v.Z,{getPopupContainer:function(R){return R.parentElement||document.body},overlayClassName:l().popover,openClassName:l().popoverOpenClassName,placement:"bottom",content:(0,f.jsx)(o.xS,{disableAlpha:!0,color:T,onChange:function(R){e(R.hex)},onChangeComplete:L.onChange}),trigger:"click",children:(0,f.jsx)("div",{className:l().roundBall,style:{backgroundColor:T}})}):(0,f.jsx)("div",{className:l().roundBall,style:{backgroundColor:T}})};g.Z=F},5041:function(c,g,n){"use strict";n.d(g,{Z:function(){return J}});var K=n(54421),v=n(38272),u=n(57663),i=n(71577),s=n(2824),l=n(67294),o=n(56131),f=n.n(o),F=n(49111),z=n(19650),L=n(8870),a=n(5882),A=n.n(a),T=n(63097),e=n(85893),Y=function(t){var r=(0,L.Z)({},t.label),m=(0,l.useState)(r.invisible),h=(0,s.Z)(m,2),b=h[0],I=h[1],j=(0,l.useState)(0),y=(0,s.Z)(j,2),x=y[0],D=y[1],C=t.hideEye?" ":(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("a",{className:A().eye,style:{backgroundImage:b?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(E){E.stopPropagation(),I(!b),t.onLabelModify(r)}})," "]}),P=t.hideColorPicker?(0,e.jsx)(e.Fragment,{}):(0,e.jsx)(T.Z,{color:r.color,changeable:!0,onChange:function(E){r.color=E.hex,t.onLabelModify(r)}}),U=(0,e.jsxs)(v.ZP.Item,{className:"".concat(A().listItem," ").concat(t.active?A().listItemActive:""),unselectable:"on",onClick:function(){t.onClick(r)},children:[(0,e.jsxs)(z.Z,{align:"center",size:5,children:[C,r.name,P]}),(0,e.jsx)("a",{className:A().delete,onClick:function(E){E.stopPropagation();var Z=new Date().getTime();Z-x<300||(D(Z),t.onLabelDelete(r))}})]});return U},R=Y,k=n(71194),Q=n(50146),p=n(47673),$=n(24044),q=n(9715),S=n(93766),X=n(48971),N=["#FF0000","#008000","#0000FF","#FFFF00","#FFA500","#00FFFF","#8B00FF","#FFC0CB","#7CFC00","#007FFF","#800080","#36BF36","#DAA520","#800000","#008B8B","#B22222","#E6D933","#000080","#FF00FF","#FFFF99","#87CEEB","#5C50E6","#CD5C5C","#20B2AA","#E680FF","#4D1F00","#006374","#B399FF","#8B4513","#BA55D3","#C0C0C0","#808080","#000000"],w=function(t){var r,m,h=(0,X.YB)(),b=h.formatMessage({id:"component.PPAddLabelModal.selectColor"}),I=h.formatMessage({id:"component.PPAddLabelModal.addLabel"}),j=h.formatMessage({id:"component.PPAddLabelModal.labelName"}),y=h.formatMessage({id:"component.PPCreater.cancel"}),x=h.formatMessage({id:"component.PPSegMode.ok"}),D=(0,l.useState)(((r=t.defaultLabel)===null||r===void 0?void 0:r.color)||N[t.order||0]),C=(0,s.Z)(D,2),P=C[0],U=C[1];(0,l.useEffect)(function(){var W;U(((W=t.defaultLabel)===null||W===void 0?void 0:W.color)||N[t.order||0])},[t]);var B=t.hideColorPicker?(0,e.jsx)(e.Fragment,{}):(0,e.jsx)(S.Z.Item,{label:b,name:"color",children:(0,e.jsx)(T.Z,{color:P,onChange:function(O){U(O.hex)}})}),E=S.Z.useForm(),Z=(0,s.Z)(E,1),H=Z[0];return(0,e.jsx)(Q.Z,{title:I,visible:t.visible,onCancel:t.onCancel,footer:null,children:(0,e.jsxs)(S.Z,{form:H,name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!1,labelname:(m=t.defaultLabel)===null||m===void 0?void 0:m.name},onFinish:function(O){var d={name:O.labelname,color:P};t.onLabelAdd(d),H.resetFields()},autoComplete:"off",children:[(0,e.jsx)(S.Z.Item,{label:j,name:"labelname",rules:[{required:!0,message:"Please input label name!"}],children:(0,e.jsx)($.Z,{})}),B,(0,e.jsx)(S.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,e.jsxs)(z.Z,{children:[(0,e.jsx)(i.Z,{onClick:function(){var O;(O=t.onCancel)===null||O===void 0||O.call(0),H.resetFields()},children:y}),(0,e.jsx)(i.Z,{type:"primary",htmlType:"submit",children:x})]})})]})})},ee=w,V=function(t){var r,m=(0,X.YB)(),h=m.formatMessage({id:"component.PPLabelList.addLabel"}),b=m.formatMessage({id:"component.PPLabelList.labelList"}),I=(0,l.useState)(!1),j=(0,s.Z)(I,2),y=j[0],x=j[1];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(v.ZP,{className:f().labelList,size:"large",header:(0,e.jsx)("div",{className:f().listHeader,children:b}),footer:(0,e.jsx)("div",{children:(0,e.jsx)(i.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){x(!0)},block:!0,children:h})}),bordered:!0,dataSource:t.labels,renderItem:function(C){var P;return(0,e.jsx)(R,{hideColorPicker:t.hideColorPicker,hideEye:t.hideEye,onClick:t.onLabelSelect,label:C,active:(P=t.activeIds)===null||P===void 0?void 0:P.has(C.labelId),onLabelDelete:t.onLabelDelete,onLabelModify:t.onLabelModify})}}),(0,e.jsx)(ee,{hideColorPicker:t.hideColorPicker,order:(r=t.labels)===null||r===void 0?void 0:r.length,visible:y,onLabelAdd:function(C){t.onLabelAdd(C),x(!1)},onCancel:function(){x(!1)}})]})},J=V},8088:function(c,g,n){"use strict";var K=n(67294),v=n(78677),u=n.n(v),i=n(85893),s=function(o){return(0,i.jsx)("div",{className:"".concat(u().container," ").concat(o.className),children:o.children})};g.Z=s},57436:function(c,g,n){"use strict";var K=n(91220),v=n(2824),u=n(67294),i=n(65031),s=n(84420),l=n.n(s),o=n(85893),f="./pics/basketball.jpg";function F(L){switch(L){case"mover":return"move";case"rectangle":case"polygon":return"crosshair";default:return"default"}}var z=function(a){var A=l()(a.imgSrc||f),T=(0,v.Z)(A,1),e=T[0],Y=(e==null?void 0:e.width)||0,R=(e==null?void 0:e.height)||0,k=a.transparency==null?0:a.transparency*.01,Q=(0,u.useState)(0),p=(0,v.Z)(Q,2),$=p[0],q=p[1],S=(0,u.useState)(0),X=(0,v.Z)(S,2),N=X[0],w=X[1],ee=(0,u.useState)({x:0,y:0}),V=(0,v.Z)(ee,2),J=V[0],G=V[1],t=(0,u.useRef)(null),r=(0,u.useRef)(null),m=(0,u.useRef)(null);function h(){var d=document.getElementById("dr");d&&(q(d.clientWidth),w(d.clientHeight))}(0,u.useEffect)(function(){window.removeEventListener("resize",h),window.addEventListener("resize",h);var d=document.getElementById("dr");d&&(q(d.clientWidth),w(d.clientHeight))},[]),(0,u.useEffect)(function(){!t.current||(t.current.container().style.cursor=F(a.currentTool))},[a.currentTool]);var b=function(_){return{e:_,mouseX:(_.evt.offsetX-J.x-$/2)/a.scale+Y/2,mouseY:(_.evt.offsetY-J.y-N/2)/a.scale+R/2,canvasRef:m,layerRef:r}},I=function(_){var M;(M=a.drawTool)===null||M===void 0||M.onMouseDown(b(_))},j=function(_){var M;(M=a.drawTool)===null||M===void 0||M.onMouseMove(b(_))},y=function(_){var M;(M=a.drawTool)===null||M===void 0||M.onMouseUp(b(_))},x=function(_){_.cancelBubble=!0,_.evt.preventDefault()},D=[];if(a.annotations){var C,P,U={onDrag:a.onAnnotationModify,onDragEnd:a.onAnnotationModifyComplete,scale:a.scale,currentTool:a.currentTool,onSelect:a.setCurrentAnnotation,stageRef:t,currentAnnotation:a.currentAnnotation,transparency:k,canvasRef:m},B=(C=m.current)===null||C===void 0?void 0:C.getContext("2d");B&&B.clearRect(0,0,B.canvas.width,B.canvas.height);var E=(0,K.Z)(a.annotations),Z;try{for(E.s();!(Z=E.n()).done;){var H=Z.value;if(!!H){U.annotation=H;var W=a.drawTool.drawAnnotation(U);D.push(W)}}}catch(d){E.e(d)}finally{E.f()}(P=r.current)===null||P===void 0||P.batchDraw()}var O=a.currentTool=="mover";return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("canvas",{style:{display:"none"},id:"virtualCanvas",width:e==null?void 0:e.width,height:e==null?void 0:e.height}),(0,o.jsx)("canvas",{style:{display:"none"},id:"singleLineCanvas",width:e==null?void 0:e.width,height:e==null?void 0:e.height}),(0,o.jsx)("canvas",{style:{display:"none"},id:"canvasId",ref:m,width:e==null?void 0:e.width,height:e==null?void 0:e.height}),(0,o.jsx)("svg",{width:"0",height:"0",style:{position:"absolute",zIndex:"-1"},children:(0,o.jsx)("defs",{children:(0,o.jsx)("filter",{id:"remove-alpha",x:"0",y:"0",width:"100%",height:"100%",children:(0,o.jsx)("feComponentTransfer",{children:(0,o.jsx)("feFuncA",{type:"discrete",tableValues:"0 1"})})})})}),(0,o.jsxs)(i.Hf,{width:$,height:N,offsetX:-$/2,offsetY:-N/2,className:"stage",ref:t,draggable:O,onDragMove:function(_){a.currentTool=="mover"},onDragEnd:function(_){a.currentTool=="mover"&&G({x:_.target.x(),y:_.target.y()})},children:[(0,o.jsx)(i.mh,{onMouseDown:I,onMouseMove:j,onMouseUp:y,onContextMenu:x,scaleX:a.scale,scaleY:a.scale,draggable:!1,children:(0,o.jsx)(i.Ee,{name:"baseImage",draggable:!1,image:e,x:-((e==null?void 0:e.width)||0)/2,y:-((e==null?void 0:e.height)||0)/2})}),(0,o.jsxs)(i.mh,{ref:r,name:"annotation",scaleX:a.scale,scaleY:a.scale,onMouseDown:I,onMouseMove:j,onMouseUp:y,onContextMenu:x,opacity:k,children:[D,(0,o.jsx)(i.Ee,{x:-((e==null?void 0:e.width)||0)/2,y:-((e==null?void 0:e.height)||0)/2,image:m.current||void 0})]})]})]})};g.Z=z},44434:function(c,g,n){"use strict";var K=n(67294),v=n(80961),u=n.n(v),i=n(85893),s=function(o){var f=u().leftToolbar;return o.disLoc=="right"&&(f=u().rightToolbar),(0,i.jsx)("div",{className:f,children:o.children})};g.Z=s},61541:function(c,g,n){"use strict";var K=n(49111),v=n(19650),u=n(67294),i=n(82499),s=n.n(i),l=n(85893),o=function(F){return(0,l.jsx)("div",{unselectable:"on",className:"".concat(s().toolBarButtonContainerWrapper," ").concat(F.active&&s().toolBarButtonContainerWrapperActive),onClick:F.onClick,children:(0,l.jsx)(v.Z,{align:"center",className:s().toolBarButtonContainer,size:0,children:(0,l.jsxs)(v.Z,{align:"center",direction:"vertical",className:s().toolBarButton,size:0,children:[(0,l.jsx)("img",{src:F.imgSrc}),(0,l.jsx)("div",{className:s().buttonText,children:F.children})]})})})};g.Z=o}}]);
