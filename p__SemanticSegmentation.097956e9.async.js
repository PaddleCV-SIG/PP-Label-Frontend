(self.webpackChunkpp_labeling_frontend=self.webpackChunkpp_labeling_frontend||[]).push([[540],{57560:function(L){L.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___147XP",toolBarButtonContainer:"toolBarButtonContainer___ZEvhK",toolBarButton:"toolBarButton___1s2Rh",buttonText:"buttonText___3NTCv",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___2Utx8",popover:"popover___3PRoi"}},26647:function(L){L.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1FTWb",toolBarButtonContainer:"toolBarButtonContainer___1Vahn",toolBarButton:"toolBarButton___3mR2H",buttonText:"buttonText___Y0WDm",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3lRZ8",popover:"popover___3zzu2",popoverLeft:"popoverLeft___15lGe"}},54777:function(L){L.exports={segment:"segment___1YMcl",mainStage:"mainStage___2otee",draw:"draw___equn4",pblock:"pblock___2bT7z",progress:"progress___1porz",rightSideBar:"rightSideBar___2X7jK",determinOutline:"determinOutline___2ls57"}},43801:function(L,x,t){"use strict";t.d(x,{Z:function(){return B}});var Z=t(11849),y=t(2824),K=t(91220),R=t(67294),b=t(65031),v=t(85893);function T(n,u,c,P){if(!(!n||!u||!c||!P))return{width:n,color:u,points:c,tool:P}}function E(n){if(!n||!n.lines)return[(0,v.jsx)(v.Fragment,{})];var u=[],c=(0,K.Z)(n.lines),P;try{for(c.s();!(P=c.n()).done;){var s=P.value;!s.width||!s.color||!s.points||!s.tool||u.push((0,v.jsx)(b.x1,{stroke:s.color,strokeWidth:s.width,globalCompositeOperation:s.tool==="brush"?"source-over":"destination-out",lineCap:"round",points:s.points,tension:.01}))}}catch(A){c.e(A)}finally{c.f()}return u}function W(n,u){return n=="rubber"||u==2?"rubber":"brush"}function m(n){var u=0,c=(0,K.Z)(n),P;try{for(c.s();!(P=c.n()).done;){var s=P.value;!s||s.annotationId>u&&(u=s.annotationId)}}catch(A){c.e(A)}finally{c.f()}return u}function B(n){var u=(0,R.useState)(),c=(0,y.Z)(u,2),P=c[0],s=c[1],A=function(f,M){var O;if(console.log(n.currentTool),!(n.currentTool!="brush"&&n.currentTool!="rubber")){var C=f.evt.offsetX/M,g=f.evt.offsetY/M,o=W(n.currentTool,f.evt.button),a=T(n.brushSize||10,(O=n.currentLabel)===null||O===void 0?void 0:O.color,[C,g,C,g],o);if(!!a)if(s(o),n.currentAnnotation){var I,p={tool:"brush",annotationId:n.currentAnnotation.annotationId,label:n.currentAnnotation.label,lines:(I=n.currentAnnotation.lines)===null||I===void 0?void 0:I.concat([a])};n.onAnnotationModify(p)}else{if(o=="rubber")return;n.onAnnotationAdd({tool:"brush",annotationId:m(n.annotations)+1,label:n.currentLabel,lines:[a]})}}},h=function(f,M){var O;if(!(!P||!n.currentAnnotation)){var C=f.evt.offsetX/M,g=f.evt.offsetY/M,o=[C,g],a=[];(O=n.currentAnnotation)!==null&&O!==void 0&&O.lines&&(o=n.currentAnnotation.lines[n.currentAnnotation.lines.length-1].points.concat(o),a=n.currentAnnotation.lines);var I=T(n.brushSize||10,n.currentLabel.color,o,P);!I||(a.pop(),a.push(I),n.onAnnotationModify((0,Z.Z)((0,Z.Z)({},n.currentAnnotation),{},{lines:a})))}},l=function(){n.currentTool!="brush"&&n.currentTool!="rubber"||(s(void 0),n.onMouseUp())};return{onMouseDown:A,onMouseMove:h,onMouseUp:l,createElementsFunc:E}}},58967:function(L,x,t){"use strict";var Z=t(20136),y=t(55241),K=t(77883),R=t(70507),b=t(57663),v=t(71577),T=t(2824),E=t(67294),W=t(61541),m=t(57560),B=t.n(m),n=t(85893),u=1,c=50,P=10;function s(h){return h?h<=u?u:h>=c?c:h:P}var A=function(l){var r=(0,E.useState)(s(l.size)),f=(0,T.Z)(r,2),M=f[0],O=f[1],C=function(o){O(s(o))};return(0,E.useEffect)(function(){C(l.size)},[l.size]),(0,n.jsxs)(y.Z,{overlayClassName:B().popover,placement:"right",content:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v.Z,{type:"text",onClick:function(){var o,a=s(M-1);C(a),(o=l.onChange)===null||o===void 0||o.call(0,a)},children:"-"}),(0,n.jsx)(R.Z,{min:u,max:c,value:M,onChange:function(o){var a;(a=l.onChange)===null||a===void 0||a.call(0,o)},controls:!1,style:{textAlign:"center"}}),(0,n.jsx)(v.Z,{type:"text",onClick:function(){var o,a=s(M+1);C(a),(o=l.onChange)===null||o===void 0||o.call(0,a)},children:"+"})]}),trigger:l.active?"hover":"click",children:[" ",(0,n.jsx)(W.Z,{active:l.active,imgSrc:l.imgSrc||"./pics/buttons/brush.png",onClick:l.onClick,children:l.children||"Brush"})]})};x.Z=A},27992:function(L,x,t){"use strict";var Z=t(20136),y=t(55241),K=t(77883),R=t(70507),b=t(57663),v=t(71577),T=t(2824),E=t(67294),W=t(61541),m=t(26647),B=t.n(m),n=t(85893),u=1,c=100,P=10;function s(h){return h?h<=u?u:h>=c?c:h:P}var A=function(l){var r=(0,E.useState)(s(l.size)),f=(0,T.Z)(r,2),M=f[0],O=f[1],C=function(o){O(s(o))};return(0,E.useEffect)(function(){C(l.size)},[l.size]),(0,n.jsxs)(y.Z,{overlayClassName:"".concat(B().popover," ").concat(l.disLoc=="left"?B().popoverLeft:""),placement:l.disLoc||"right",content:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v.Z,{type:"text",onClick:function(){var o,a=s(M-1);C(a),(o=l.onChange)===null||o===void 0||o.call(0,a)},children:"-"}),(0,n.jsx)(R.Z,{min:u,max:c,value:M,onChange:function(o){var a;(a=l.onChange)===null||a===void 0||a.call(0,o)},controls:!1,style:{textAlign:"center"}}),(0,n.jsx)(v.Z,{type:"text",onClick:function(){var o,a=s(M+1);C(a),(o=l.onChange)===null||o===void 0||o.call(0,a)},children:"+"})]}),trigger:"hover",children:[" ",(0,n.jsx)(W.Z,{imgSrc:l.imgSrc,onClick:l.onClick,children:l.children})]})};x.Z=A},86089:function(L,x,t){"use strict";t.r(x);var Z=t(57663),y=t(71577),K=t(34669),R=t(54458),b=t(2824),v=t(67294),T=t(54777),E=t.n(T),W=t(8088),m=t(61541),B=t(44434),n=t(58967),u=t(27992),c=t(5041),P=t(57436),s=t(14836),A=t(29919),h=t(43801),l=t(13931),r=t(85893),f=40,M=function(){var C=(0,v.useState)(void 0),g=(0,b.Z)(C,2),o=g[0],a=g[1],I=(0,v.useState)({color:"",name:""}),p=(0,b.Z)(I,2),N=p[0],$=p[1],rn=(0,v.useState)(),k=(0,b.Z)(rn,2),U=k[0],H=k[1],an=(0,v.useState)([]),V=(0,b.Z)(an,2),D=V[0],j=V[1],_n=(0,v.useState)(10),G=(0,b.Z)(_n,2),z=G[0],Q=G[1],sn=(0,v.useState)(1),w=(0,b.Z)(sn,2),J=w[0],X=w[1],q=function(e){e||X(1),e<.1||e>3?X(1):X(e)},S=function(e){H(e),e!=null&&e.label&&$(e.label)};(0,v.useEffect)(function(){localStorage.removeItem("history"),F([])},[]);function F(_,e){var i=localStorage.getItem("history"),d=i?JSON.parse(i):{index:-1,items:[]},on={currentAnnotation:e,annotations:_};if(JSON.stringify(d.items[d.index])!=JSON.stringify(on)){var cn=d.index>f?d.index-f:0,dn=d.items.splice(cn,d.index==0?1:d.index+1);d.items=dn.concat([on]),d.index<=f?d.index++:d.index=f+1,console.log(d),localStorage.setItem("history",JSON.stringify(d))}}var ln=function(){var e=localStorage.getItem("history");if(!!e){var i=JSON.parse(e);if(!!i&&!(i.index>=i.items.length-1)){i.index++,localStorage.setItem("history",JSON.stringify(i));var d=i.items[i.index];H(d.currentAnnotation),j(d.annotations)}}},un=function(){var e=localStorage.getItem("history");if(!!e){var i=JSON.parse(e);if(!(!i||!i.index)&&!(i.index<=0)){i.index--,localStorage.setItem("history",JSON.stringify(i));var d=i.items[i.index];H(d.currentAnnotation),j(d.annotations)}}},nn=function(e){for(var i=[],d=0;d<D.length;d++)D[d].annotationId==e.annotationId?i.push(e):i.push(D[d]);S(e),j(i)},tn=(0,h.Z)({currentLabel:N,brushSize:z,currentTool:o,annotations:D,currentAnnotation:U,onAnnotationAdd:function(e){var i=D.concat([e]);j(i),U||S(e)},onAnnotationModify:nn,onMouseUp:function(){F(D,U)}}),en=(0,l.Z)({currentLabel:N,brushSize:z,currentTool:o,annotations:D,currentAnnotation:U,onAnnotationAdd:function(e){var i=D.concat([e]);j(i),U||S(e),F(i,e)},onAnnotationModify:function(e){nn(e),F(D,e)}}),Y=o=="polygon"?en:tn;return(0,r.jsxs)(W.Z,{className:E().segment,children:[(0,r.jsxs)(B.Z,{children:[(0,r.jsx)(m.Z,{imgSrc:"./pics/buttons/intelligent_interaction.png",children:"Intelligent Interaction"}),(0,r.jsx)(A.Z,{active:o=="polygon",onClick:function(){a("polygon"),S(void 0)},children:"Polygon"}),(0,r.jsx)(n.Z,{size:z,active:o=="brush",onClick:function(){o!="rubber"&&o!="brush"&&S(void 0),a("brush")},onChange:function(e){Q(e)},children:"Brush"}),(0,r.jsx)(n.Z,{size:z,active:o=="rubber",onClick:function(){o!="rubber"&&o!="brush"&&S(void 0),a("rubber")},onChange:function(e){Q(e)},imgSrc:"./pics/buttons/rubber.png",children:"Rubber"}),(0,r.jsx)(m.Z,{imgSrc:"./pics/buttons/zoom_in.png",onClick:function(){q(J+.1)},children:"Zoom in"}),(0,r.jsx)(m.Z,{imgSrc:"./pics/buttons/zoom_out.png",onClick:function(){q(J-.1)},children:"Zoom out"}),(0,r.jsx)(m.Z,{imgSrc:"./pics/buttons/save.png",children:"Save"}),(0,r.jsx)(m.Z,{imgSrc:"./pics/buttons/move.png",children:"Move"}),(0,r.jsx)(m.Z,{imgSrc:"./pics/buttons/export.png",children:"Export"}),(0,r.jsx)(m.Z,{imgSrc:"./pics/buttons/data_division.png",children:"Divide Data"}),(0,r.jsx)(m.Z,{imgSrc:"./pics/buttons/prev.png",onClick:function(){un()},children:"Undo"}),(0,r.jsx)(m.Z,{imgSrc:"./pics/buttons/next.png",onClick:function(){ln()},children:"Redo"}),(0,r.jsx)(m.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:"Clear Mark"})]}),(0,r.jsxs)("div",{className:E().mainStage,children:[(0,r.jsx)("div",{className:E().draw,children:(0,r.jsx)(P.Z,{scale:J,annotations:D,onMouseDown:Y.onMouseDown,onMouseMove:Y.onMouseMove,onMouseUp:Y.onMouseUp,createPolygonFunc:en.createElementsFunc,createBrushFunc:tn.createElementsFunc})}),(0,r.jsx)("div",{className:E().pblock,children:(0,r.jsx)("div",{className:E().progress,children:(0,r.jsx)(R.Z,{percent:50,status:"active"})})})]}),(0,r.jsxs)(B.Z,{disLoc:"right",children:[(0,r.jsx)(u.Z,{imgSrc:"./pics/buttons/threshold.png",disLoc:"left",children:"Segment Threshold"}),(0,r.jsx)(u.Z,{imgSrc:"./pics/buttons/alpha.png",disLoc:"left",children:"Diaphaneity"}),(0,r.jsx)(u.Z,{imgSrc:"./pics/buttons/radius.png",disLoc:"left",children:"Visual Radius"})]}),(0,r.jsxs)("div",{className:E().rightSideBar,children:[(0,r.jsx)("div",{className:E().determinOutline,children:(0,r.jsx)(y.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",block:!0,onClick:function(){S(void 0)},children:"Determine Outline"})}),(0,r.jsx)(c.Z,{selectedLabel:N,onLabelSelect:function(e){$(e),S(void 0)},onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}}),(0,r.jsx)(s.Z,{selectedAnnotation:U,annotations:D,onAnnotationSelect:function(e){e!=null&&e.delete||S(e)},onAnnotationAdd:function(){},onAnnotationModify:function(){},onAnnotationDelete:function(e){j(D.filter(function(i){return i.annotationId!=e.annotationId})),S(void 0)}})]})]})};x.default=M}}]);
