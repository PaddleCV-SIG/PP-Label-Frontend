(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[885],{85024:function(h){h.exports={listItem:"listItem___u4Q82",eye:"eye___BwaRm",delete:"delete___31JB_",roundBall:"roundBall___23A7l",popover:"popover___1BNET",annotationId:"annotationId___zAzX4",labelName:"labelName___2ohxn",listItemActive:"listItemActive___2QnA3"}},56159:function(h){h.exports={labelList:"labelList___v7C6K",listHeader:"listHeader___1aY8R",eye:"eye___2MKbp",roundBall:"roundBall___187XH"}},57560:function(h){h.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___147XP",toolBarButtonContainer:"toolBarButtonContainer___ZEvhK",toolBarButton:"toolBarButton___1s2Rh",buttonText:"buttonText___3NTCv",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___2Utx8",popover:"popover___3PRoi"}},26647:function(h){h.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1FTWb",toolBarButtonContainer:"toolBarButtonContainer___1Vahn",toolBarButton:"toolBarButton___3mR2H",buttonText:"buttonText___Y0WDm",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3lRZ8",popover:"popover___3zzu2",popoverLeft:"popoverLeft___15lGe"}},14836:function(h,b,t){"use strict";t.d(b,{Z:function(){return A}});var W=t(54421),D=t(38272),L=t(57663),C=t(71577),g=t(67294),M=t(56159),B=t.n(M),I=t(49111),T=t(19650),e=t(2824),f=t(11849),n=t(85024),_=t.n(n),l=t(63097),o=t(85893),r=function(s){var m=(0,f.Z)({},s.annotation),v=(0,g.useState)(m.invisible),P=(0,e.Z)(v,2),a=P[0],u=P[1],x=(0,g.useState)(0),O=(0,e.Z)(x,2),y=O[0],j=O[1];(0,g.useEffect)(function(){u(s.annotation.invisible)},[s.annotation.invisible]);var R=(0,o.jsxs)(D.ZP.Item,{className:"".concat(_().listItem," ").concat(s.active?_().listItemActive:""),unselectable:"on",onClick:function(){s.onClick(m)},children:[(0,o.jsxs)(T.Z,{align:"center",size:5,children:[(0,o.jsx)("a",{className:_().eye,style:{backgroundImage:a?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(U){U.stopPropagation(),u(!a),s.onAnnotationModify(m)}})," ",(0,o.jsx)("span",{className:_().annotationId,children:m.frontendId}),(0,o.jsx)("span",{className:_().labelName,children:m.label.name}),(0,o.jsx)(l.Z,{color:m.label.color})]}),(0,o.jsx)("a",{className:_().delete,onClick:function(U){U.stopPropagation();var K=new Date().getTime();K-y<300||(j(K),s.onAnnotationDelete(m))}})]});return R},c=r,d=t(48971),i=function(s){var m=(0,d.YB)().formatMessage({id:"component.PPAnnotationList.annotationList"}),v=(0,d.YB)().formatMessage({id:"component.PPAnnotationList.addAnnotation"});return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(D.ZP,{className:B().labelList,size:"large",header:(0,o.jsx)("div",{className:B().listHeader,children:m}),bordered:!0,dataSource:s.annotations,renderItem:function(a){var u;return(0,o.jsx)(c,{onClick:s.onAnnotationSelect,annotation:a,active:a.frontendId==((u=s.currAnnotation)===null||u===void 0?void 0:u.frontendId),onAnnotationDelete:s.onAnnotationDelete,onAnnotationModify:s.onAnnotationModify})},footer:(0,o.jsx)("div",{children:(0,o.jsx)(C.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){s.onAnnotationAdd()},block:!0,children:v})})})})},A=i},43801:function(h,b,t){"use strict";t.d(b,{Z:function(){return f}});var W=t(11849),D=t(2824),L=t(91220),C=t(67294),g=t(65031),M=t(85893);function B(n,_,l,o){if(!(!n||!_||!l||!o))return{width:n,color:_,points:l,tool:o}}function I(n){if(!n||!n.points)return(0,M.jsx)(M.Fragment,{});var _=[],l=(0,L.Z)(n.points),o;try{for(l.s();!(o=l.n()).done;){var r=o.value;!r.width||!r.color||!r.tool||_.push((0,M.jsx)(g.x1,{stroke:r.color,strokeWidth:r.width,globalCompositeOperation:r.tool==="brush"?"source-over":"destination-out",lineCap:"round",points:r.points,tension:1}))}}catch(c){l.e(c)}finally{l.f()}return(0,M.jsx)(g.ZA,{draggable:!1,children:_})}function T(n,_){return n=="rubber"||_==2?"rubber":"brush"}function e(n){var _=0,l=(0,L.Z)(n),o;try{for(l.s();!(o=l.n()).done;){var r=o.value;!r||!r.frontendId||r.frontendId>_&&(_=r.frontendId)}}catch(c){l.e(c)}finally{l.f()}return _}function f(n){var _=(0,C.useState)(),l=(0,D.Z)(_,2),o=l[0],r=l[1],c=function(E,s,m,v){var P,a;if(!(n.currentTool!="brush"&&n.currentTool!="rubber"||!((P=n.currentLabel)!==null&&P!==void 0&&P.color))){var u=(E.evt.offsetX+s)/v,x=(E.evt.offsetY+m)/v,O=T(n.currentTool,E.evt.button),y=B(n.brushSize||10,(a=n.currentLabel)===null||a===void 0?void 0:a.color,[u,x,u,x],O);if(!!y)if(r(O),n.currentAnnotation){var j,R={type:"brush",frontendId:n.currentAnnotation.frontendId,label:n.currentAnnotation.label,points:(j=n.currentAnnotation.points)===null||j===void 0?void 0:j.concat([y])};n.onAnnotationModify(R)}else{if(O=="rubber")return;n.onAnnotationAdd({type:O,frontendId:e(n.annotations)+1,label:n.currentLabel,points:[y]})}}},d=function(E,s,m,v){var P;if(!(!o||!n.currentAnnotation||!n.currentLabel.color)){var a=(E.evt.offsetX+s)/v,u=(E.evt.offsetY+m)/v,x=[a,u],O=[];(P=n.currentAnnotation)!==null&&P!==void 0&&P.points&&(x=n.currentAnnotation.points[n.currentAnnotation.points.length-1].points.concat(x),O=n.currentAnnotation.points);var y=B(n.brushSize||10,n.currentLabel.color,x,o);!y||(O.pop(),O.push(y),n.onAnnotationModify((0,W.Z)((0,W.Z)({},n.currentAnnotation),{},{points:O,type:o})))}},i=function(){n.currentTool!="brush"&&n.currentTool!="rubber"||(r(void 0),n.onMouseUp())};return{onMouseDown:c,onMouseMove:d,onMouseUp:i,createElementsFunc:I}}},58967:function(h,b,t){"use strict";var W=t(20136),D=t(55241),L=t(77883),C=t(70507),g=t(57663),M=t(71577),B=t(2824),I=t(67294),T=t(61541),e=t(57560),f=t.n(e),n=t(85893),_=1,l=50,o=10;function r(d){return d?d<=_?_:d>=l?l:d:o}var c=function(i){var A=(0,I.useState)(r(i.size)),E=(0,B.Z)(A,2),s=E[0],m=E[1],v=function(a){m(r(a))};return(0,I.useEffect)(function(){v(i.size)},[i.size]),(0,n.jsxs)(D.Z,{overlayClassName:f().popover,placement:"right",content:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(M.Z,{type:"text",onClick:function(){var a,u=r(s-1);v(u),(a=i.onChange)===null||a===void 0||a.call(0,u)},children:"-"}),(0,n.jsx)(C.Z,{min:_,max:l,value:s,onChange:function(a){var u;(u=i.onChange)===null||u===void 0||u.call(0,a)},controls:!1,style:{textAlign:"center"}}),(0,n.jsx)(M.Z,{type:"text",onClick:function(){var a,u=r(s+1);v(u),(a=i.onChange)===null||a===void 0||a.call(0,u)},children:"+"})]}),trigger:i.active?"hover":"click",children:[" ",(0,n.jsx)(T.Z,{active:i.active,imgSrc:i.imgSrc||"./pics/buttons/brush.png",onClick:i.onClick,children:i.children||"Brush"})]})};b.Z=c},27992:function(h,b,t){"use strict";var W=t(20136),D=t(55241),L=t(77883),C=t(70507),g=t(57663),M=t(71577),B=t(2824),I=t(67294),T=t(61541),e=t(26647),f=t.n(e),n=t(85893),_=1,l=100,o=10;function r(d){return d?d<=_?_:d>=l?l:d:o}var c=function(i){var A=(0,I.useState)(r(i.size)),E=(0,B.Z)(A,2),s=E[0],m=E[1],v=function(a){m(r(a))};return(0,I.useEffect)(function(){v(i.size)},[i.size]),(0,n.jsxs)(D.Z,{overlayClassName:"".concat(f().popover," ").concat(i.disLoc=="left"?f().popoverLeft:""),placement:i.disLoc||"right",content:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(M.Z,{type:"text",onClick:function(){var a,u=r(s-1);v(u),(a=i.onChange)===null||a===void 0||a.call(0,u)},children:"-"}),(0,n.jsx)(C.Z,{min:_,max:l,value:s,onChange:function(a){var u;(u=i.onChange)===null||u===void 0||u.call(0,a)},controls:!1,style:{textAlign:"center"}}),(0,n.jsx)(M.Z,{type:"text",onClick:function(){var a,u=r(s+1);v(u),(a=i.onChange)===null||a===void 0||a.call(0,u)},children:"+"})]}),trigger:"hover",children:[" ",(0,n.jsx)(T.Z,{imgSrc:i.imgSrc,onClick:i.onClick,children:i.children})]})};b.Z=c},13931:function(h,b,t){"use strict";t.d(b,{Z:function(){return T}});var W=t(91220),D=t(11849),L=t(65031),C=t(85893);function g(e){var f=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return f?{r:parseInt(f[1],16),g:parseInt(f[2],16),b:parseInt(f[3],16)}:null}function M(e,f){if(!(!e||!f))return{color:e,points:f}}function B(e,f,n,_,l,o,r){if(!e||!e.lines||!e.lines[0])return[(0,C.jsx)(C.Fragment,{})];var c=e.lines[0].points,d=e.lines[0].color,i=g(d);if(!i)return[(0,C.jsx)(C.Fragment,{})];var A=(r==null?void 0:r.annotationId)==e.annotationId,E=A?.5:.1,s=void 0,m=[];return c.forEach(function(v,P){if(!s){s=v;return}m.push((0,C.jsx)(L.Cd,{onMouseDown:function(){l=="mover"&&o(e)},draggable:l=="mover",onDragMove:function(u){console.log("Circle onDrageMove");var x=u.evt.offsetX/_,O=u.evt.offsetY/_;c[P-1]=x,c[P]=O;var y=(0,D.Z)((0,D.Z)({},e),{},{lines:[{color:d,points:c}]});f(y)},onMouseOver:function(){console.log("Circle onMouseOver"),l=="mover"&&(document.body.style.cursor="pointer")},onMouseOut:function(){console.log("Circle onMouseOut"),document.body.style.cursor="default"},x:s,y:v,radius:5,fill:d})),s=void 0}),[(0,C.jsxs)(L.ZA,{children:[(0,C.jsx)(L.x1,{onMouseOver:function(){l=="mover"&&(document.body.style.cursor="pointer")},onMouseOut:function(){document.body.style.cursor="default"},onClick:function(){l=="mover"&&o(e)},stroke:d,strokeWidth:2,globalCompositeOperation:"source-over",lineCap:"round",points:c,tension:0,closed:!0,fill:"rgba(".concat(i.r,", ").concat(i.g,", ").concat(i.b,", ").concat(E,")")}),m]},e.annotationId)]}function I(e){var f=0,n=(0,W.Z)(e),_;try{for(n.s();!(_=n.n()).done;){var l=_.value;!l||l.annotationId>f&&(f=l.annotationId)}}catch(o){n.e(o)}finally{n.f()}return f}function T(e){var f=function(r,c){var d,i=r.evt.offsetX/c,A=r.evt.offsetY/c,E=M((d=e.currentLabel)===null||d===void 0?void 0:d.color,[i,A]);!E||e.onAnnotationAdd({tool:"polygon",annotationId:I(e.annotations)+1,label:e.currentLabel,lines:[E]})},n=function(r,c){var d,i;if(!!e.currentAnnotation){var A=r.evt.offsetX/c,E=r.evt.offsetY/c,s=e.currentAnnotation.lines||[],m=M((d=e.currentLabel)===null||d===void 0?void 0:d.color,(i=s[0])===null||i===void 0?void 0:i.points.concat([A,E]));if(!!m){var v={tool:"polygon",annotationId:e.currentAnnotation.annotationId,label:e.currentAnnotation.label,lines:[m]};e.onAnnotationModify(v)}}},_=function(r,c){e.currentTool=="polygon"&&(e.currentAnnotation?n(r,c):f(r,c))},l=function(){e.currentTool=="polygon"&&e.onMouseUp()};return{onMouseDown:_,onMouseMove:function(){},onMouseUp:l,createElementsFunc:B}}},29919:function(h,b,t){"use strict";var W=t(67294),D=t(61541),L=t(85893),C=function(M){return(0,L.jsx)(D.Z,{active:M.active,imgSrc:M.imgSrc||"./pics/buttons/polygon.png",onClick:M.onClick,children:M.children})};b.Z=C}}]);
