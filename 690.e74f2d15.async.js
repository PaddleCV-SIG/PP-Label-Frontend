(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[690],{13237:function(Y){Y.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___26yoA",toolBarButtonContainer:"toolBarButtonContainer___3TAcy",toolBarButton:"toolBarButton___utzQD",buttonText:"buttonText___10yo3",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___UC85Z",popover:"popover___V2uUa",slider:"slider___293AL",popoverLeft:"popoverLeft___2uQ3J"}},85024:function(Y){Y.exports={listItem:"listItem___u4Q82",eye:"eye___BwaRm",delete:"delete___31JB_",roundBall:"roundBall___23A7l",popover:"popover___1BNET",annotationId:"annotationId___zAzX4",labelName:"labelName___2ohxn",listItemActive:"listItemActive___2QnA3"}},56159:function(Y){Y.exports={labelList:"labelList___v7C6K",listHeader:"listHeader___1aY8R",eye:"eye___2MKbp",roundBall:"roundBall___187XH"}},26647:function(Y){Y.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1FTWb",toolBarButtonContainer:"toolBarButtonContainer___1Vahn",toolBarButton:"toolBarButton___3mR2H",buttonText:"buttonText___Y0WDm",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3lRZ8",popover:"popover___3zzu2",slider:"slider___ALra-",popoverLeft:"popoverLeft___15lGe"}},8978:function(Y,V,e){"use strict";e.d(V,{Z:function(){return R}});var r0=e(11849),L=e(2824),G=e(91220),T=e(67294),N=e(85893);function D(t){if(!t||!t.width||!t.color||!t.points||t.points.length<2||t.frontendId==null)return"";var C=t.type=="rubber"?0:t.frontendId;return"".concat(t.width,",").concat(C,",").concat(t.points.join(","))}function S(t){var C,s=t.canvasRef,B=t.annotation,i=B.result;if(!i)return(0,N.jsx)(N.Fragment,{});var Z=(C=s.current)===null||C===void 0?void 0:C.getContext("2d");if(!Z)return(0,N.jsx)(N.Fragment,{});for(var j=[],w=0,c=0;c<i.length;c++)i.at(c)==","?(j.push(parseFloat(i.slice(w,c))),w=c+1):i.at(c)=="|"?(j.push(parseFloat(i.slice(w,c))),b(j,Z,B),j=[],w=c+1):c==i.length-1&&(j.push(parseFloat(i.slice(w,i.length))),b(j,Z,B));return(0,N.jsx)(N.Fragment,{})}function b(t,C,s){var B;if(t.length<4){console.log("found incorrect points:",t);return}var i=t[0],Z=t[1];if(i==0){var j;y(C,t.slice(2),(j=s.label)===null||j===void 0?void 0:j.color);return}if(Z==0){v(C,i,t.slice(2),void 0);return}v(C,i,t.slice(2),(B=s.label)===null||B===void 0?void 0:B.color)}function v(t,C,s,B){t.beginPath(),t.moveTo(s[0],s[1]);for(var i=0;i<=s.length/2-1;i++){var Z=s[2*i],j=s[2*i+1];t.lineTo(Z,j)}t.lineCap="round",t.lineJoin="round",t.lineWidth=C,B&&(t.strokeStyle=B),t.globalCompositeOperation=B?"source-over":"destination-out",t.stroke()}function y(t,C,s){console.log("renderPixel: ",C,s,t),t.globalCompositeOperation=s?"source-over":"destination-out",s&&(t.fillStyle=s);for(var B=0;B<=C.length/2-1;B++){var i=C[2*B],Z=C[2*B+1];t.fillRect(i,Z,1,1)}}function o0(t){if(!t||t.length==0)return 0;var C=0,s=(0,G.Z)(t),B;try{for(s.s();!(B=s.n()).done;){var i=B.value;i.frontendId>C&&(C=i.frontendId)}}catch(Z){s.e(Z)}finally{s.f()}return C}function J(t,C){return t=="rubber"||C==2?"rubber":"brush"}function R(t){var C=(0,T.useState)(),s=(0,L.Z)(C,2),B=s[0],i=s[1],Z=function(q){var W,_;if(!(t.currentTool!="brush"&&t.currentTool!="rubber"||!((W=t.currentLabel)!==null&&W!==void 0&&W.color)||!t.brushSize)){var r=q.mouseX,e0=q.mouseY,a0=J(t.currentTool,q.e.evt.button);console.log("frontendId: ",t.frontendIdOps.frontendId,"maxId:",o0(t.annotations));var p=t.frontendIdOps.frontendId>0?t.frontendIdOps.frontendId:o0(t.annotations)+1;p!=t.frontendIdOps.frontendId&&t.frontendIdOps.setFrontendId(p);var K=D({width:t.brushSize||10,color:(_=t.currentLabel)===null||_===void 0?void 0:_.color,points:[r,e0,r,e0],type:a0,frontendId:p});if(!!K){i(a0);var Q={dataId:t.dataId,label:t.currentLabel,labelId:t.currentLabel.labelId,frontendId:p,result:K,type:"brush"};t.onAnnotationAdd(Q)}}},j=function(q){var W;if(!(!B||!t.currentAnnotation||!t.currentAnnotation.result||t.currentAnnotation.result.length<2||!((W=t.currentLabel)!==null&&W!==void 0&&W.color))){var _=q.mouseX,r=q.mouseY,e0=t.currentAnnotation.result+",".concat(_,",").concat(r);t.onAnnotationModify((0,r0.Z)((0,r0.Z)({},t.currentAnnotation),{},{result:e0}))}},w=function(){t.currentTool!="brush"&&t.currentTool!="rubber"||(i(void 0),t.onMouseUp())};return{onMouseDown:Z,onMouseMove:j,onMouseUp:w,drawAnnotation:S}}},57406:function(Y,V,e){"use strict";e.d(V,{pL:function(){return L},oo:function(){return G}});var r0=e(91220);function L(D){var S=0;if(!D)return S;var b=(0,r0.Z)(D),v;try{for(b.s();!(v=b.n()).done;){var y=v.value;!y||!y.frontendId||y.frontendId>S&&(S=y.frontendId)}}catch(o0){b.e(o0)}finally{b.f()}return S}function G(D){var S=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(D);return S?{r:parseInt(S[1],16),g:parseInt(S[2],16),b:parseInt(S[3],16)}:null}function T(D){var S=D.toString(16);return S.length==1?"0"+S:S}function N(D,S,b){return"#"+T(D)+T(S)+T(b)}},14836:function(Y,V,e){"use strict";e.d(V,{Z:function(){return q}});var r0=e(20228),L=e(11382),G=e(54421),T=e(38272),N=e(57663),D=e(71577),S=e(91220),b=e(67294),v=e(56159),y=e.n(v),o0=e(49111),J=e(19650),R=e(2824),t=e(11849),C=e(85024),s=e.n(C),B=e(63097),i=e(85893),Z=function(_){var r=(0,t.Z)({},_.annotation),e0=(0,b.useState)(r.invisible),a0=(0,R.Z)(e0,2),p=a0[0],K=a0[1],Q=(0,b.useState)(0),F=(0,R.Z)(Q,2),d0=F[0],$=F[1];(0,b.useEffect)(function(){K(_.annotation.invisible)},[_.annotation.invisible]);var P0=(0,i.jsxs)(T.ZP.Item,{className:"".concat(s().listItem," ").concat(_.active?s().listItemActive:""),unselectable:"on",onClick:function(){_.onClick(r)},children:[(0,i.jsxs)(J.Z,{align:"center",size:5,children:[(0,i.jsx)("a",{className:s().eye,style:{backgroundImage:p?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(M0){M0.stopPropagation(),K(!p),_.onAnnotationModify(r)}})," ",(0,i.jsx)("span",{className:s().annotationId,children:r.frontendId}),(0,i.jsx)("span",{className:s().labelName,children:r.label.name}),(0,i.jsx)(B.Z,{color:r.label.color})]}),(0,i.jsx)("a",{className:s().delete,onClick:function(M0){M0.stopPropagation();var v0=new Date().getTime();v0-d0<300||($(v0),_.onAnnotationDelete(r))}})]});return P0},j=Z,w=e(48971),c=function(_){var r=(0,w.YB)(),e0=r.formatMessage({id:"component.PPAnnotationList.annotationList"}),a0=r.formatMessage({id:"component.PPAnnotationList.addAnnotation"}),p=new Set,K=[],Q=(0,S.Z)(_.annotations),F;try{for(Q.s();!(F=Q.n()).done;){var d0=F.value;p.has(d0.frontendId)||(K.push(d0),p.add(d0.frontendId))}}catch($){Q.e($)}finally{Q.f()}return(0,i.jsx)(L.Z,{spinning:_.disabled,indicator:(0,i.jsx)(i.Fragment,{}),children:(0,i.jsx)(T.ZP,{className:y().labelList,size:"large",header:(0,i.jsx)("div",{className:y().listHeader,children:e0}),bordered:!0,dataSource:K,renderItem:function(P0){var u0;return(0,i.jsx)(j,{onClick:_.disabled?function(){}:_.onAnnotationSelect,annotation:P0,active:_.disabled?!1:P0.frontendId==((u0=_.currAnnotation)===null||u0===void 0?void 0:u0.frontendId),onAnnotationDelete:_.onAnnotationDelete,onAnnotationModify:_.onAnnotationModify})},footer:function(){return _.onAnnotationAdd?(0,i.jsx)("div",{children:(0,i.jsx)(D.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){_.onAnnotationAdd()},block:!0,children:a0})}):(0,i.jsx)("div",{})}})})},q=c},27992:function(Y,V,e){"use strict";var r0=e(20136),L=e(55241),G=e(13062),T=e(71230),N=e(77883),D=e(70507),S=e(89032),b=e(15746),v=e(66126),y=e(75454),o0=e(2824),J=e(67294),R=e(61541),t=e(26647),C=e.n(t),s=e(85893),B=0,i=100,Z=10,j=function(c){var q=(0,J.useState)(Q(c.size)),W=(0,o0.Z)(q,2),_=W[0],r=W[1];function e0(F){r(Q(F))}var a0=c.step?c.step:10,p=c.minSize==null?B:c.minSize,K=c.maxSize==null?i:c.maxSize;function Q(F){return F==null?Z:F<=p?p:F>=K?K:F}return(0,J.useEffect)(function(){e0(c.size)},[c.size]),(0,s.jsxs)(L.Z,{overlayClassName:"".concat(C().popover," ").concat(c.disLoc=="left"?C().popoverLeft:""),placement:c.disLoc||"right",content:(0,s.jsxs)(T.Z,{children:[(0,s.jsx)(b.Z,{span:16,children:(0,s.jsx)(y.Z,{className:C().slider,value:_,max:K,min:p,onChange:function(d0){var $;($=c.onChange)===null||$===void 0||$.call(0,d0)},tooltipVisible:!1})}),(0,s.jsx)(b.Z,{span:8,children:(0,s.jsx)(D.Z,{min:p,max:K,value:_,onChange:function(d0){var $;($=c.onChange)===null||$===void 0||$.call(0,d0)},step:a0})})]}),trigger:"hover",visible:c.disabled?!1:void 0,children:[" ",(0,s.jsx)(R.Z,{imgSrc:c.imgSrc||"",onClick:!c.disabled&&c.onClick||void 0,active:c.active,disabled:c.disabled,children:c.children})]})};V.Z=j},10137:function(Y,V,e){"use strict";var r0=e(34669),L=e(54458),G=e(67294),T=e(85893),N=function(S){var b,v;return(0,T.jsxs)("div",{className:"progress",children:[(0,T.jsx)(L.Z,{className:"progressBar",percent:Math.ceil(S.project.finished/((b=S.task.all)===null||b===void 0?void 0:b.length)*100),status:"active",showInfo:!1})," ",(0,T.jsxs)("span",{className:"progressDesc",children:["Current labeling ",S.task.currIdx==null?1:S.task.currIdx+1," of"," ",(v=S.task.all)===null||v===void 0?void 0:v.length,". Already labeled ",S.project.finished||0,"."]})]})};V.Z=N},91861:function(Y,V,e){"use strict";e.d(V,{Ad:function(){return T},k3:function(){return N},Vd:function(){return D},td:function(){return S}});var r0=e(34792),L=e(48086),G=40;function T(){localStorage.removeItem("history"),N([])}function N(b){var v=localStorage.getItem("history"),y=v?JSON.parse(v):{index:-1,items:[]};if(JSON.stringify(y.items[y.index])!=JSON.stringify(b)){var o0=y.index>G?y.index-G:0,J=y.items.splice(o0,y.index==0?1:y.index+1);y.items=J.concat([b]),y.index<=G?y.index++:y.index=G+1,localStorage.setItem("history",JSON.stringify(y))}}function D(){var b=localStorage.getItem("history");if(!!b){var v=JSON.parse(b);if(!!v){if(v.index>=v.items.length-1){L.default.error("No next history!");return}return v.index++,localStorage.setItem("history",JSON.stringify(v)),v.items[v.index]}}}function S(){var b=localStorage.getItem("history");if(!!b){var v=JSON.parse(b);if(console.log("history",v),!v||!v.index||v.index<=1){L.default.error("No previous history!");return}return v.index--,localStorage.setItem("history",JSON.stringify(v)),v.items[v.index]}}},1690:function(Y,V,e){"use strict";e.r(V),e.d(V,{MOST_HISTORY_STEPS:function(){return k0},default:function(){return K0}});var r0=e(3182),L=e(11849),G=e(57663),T=e(71577),N=e(20228),D=e(11382),S=e(34792),b=e(48086),v=e(91220),y=e(2824),o0=e(94043),J=e.n(o0),R=e(67294),t=e(48971),C=e(8088),s=e(61541),B=e(44434),i=e(27992),Z=e(5041),j=e(57436),w=e(14836),c=e(91861),q=e(8978),W=e(65031),_=e(57406),r=e(85893);function e0(n,a){if(!(!n||!a))return a.join(",")}function a0(n){var a,l=n.annotation;if(!l||!l.result||l.result.length<2||!((a=l.label)!==null&&a!==void 0&&a.color))return(0,r.jsx)(r.Fragment,{});var P=l.result.split(",").map(Number),g=l.label.color,d=(0,_.oo)(g);if(!d)return(0,r.jsx)(r.Fragment,{});var u=.3,x=void 0,I=[];return P.forEach(function(A,O){if(!x){x=A;return}I.push((0,r.jsx)(W.Cd,{onMouseDown:function(){n.currentTool=="editor"&&n.onSelect(l)},draggable:n.currentTool=="editor",onDragMove:function(M){var c0;M.cancelBubble=!0;var h0=(c0=n.stageRef)===null||c0===void 0?void 0:c0.current,X=h0.findOne(".baseImage"),i0=!1,n0=M.target.x();n0>X.width()/2&&(n0=X.width()/2,i0=!0),n0<-X.width()/2&&(n0=-X.width()/2,i0=!0);var f0=M.target.y();f0>X.height()/2&&(f0=X.height()/2,i0=!0),f0<-X.height()/2&&(f0=-X.height()/2,i0=!0),i0&&M.target.setPosition({x:n0,y:f0}),P[O-1]=n0,P[O]=f0;var m=(0,L.Z)((0,L.Z)({},l),{},{result:P.join(",")});n.onDrag(m)},onMouseOver:function(){var M;n.currentTool=="editor"&&(M=n.stageRef)!==null&&M!==void 0&&M.current&&(n.stageRef.current.container().style.cursor="cell")},onMouseOut:function(){var M;(M=n.stageRef)!==null&&M!==void 0&&M.current&&(n.stageRef.current.container().style.cursor="default")},x,y:A,radius:5/n.scale,fill:g})),x=void 0}),(0,r.jsxs)(W.ZA,{children:[(0,r.jsx)(W.x1,{onMouseOver:function(){n.currentTool=="editor"&&(document.body.style.cursor="pointer")},onMouseOut:function(){document.body.style.cursor="default"},onClick:function(){n.currentTool=="editor"&&n.onSelect(l)},stroke:g,strokeWidth:2/n.scale,globalCompositeOperation:"source-over",lineCap:"round",points:P,tension:0,closed:!0,fill:"rgba(".concat(d.r,", ").concat(d.g,", ").concat(d.b,", ").concat(u,")")}),I]},l.frontendId)}function p(n){var a=0;if(!n)return a;var l=(0,v.Z)(n),P;try{for(l.s();!(P=l.n()).done;){var g=P.value;!g||!g.frontendId||g.frontendId>a&&(a=g.frontendId)}}catch(d){l.e(d)}finally{l.f()}return a}function K(n){var a=function(u,x){var I,A,O=e0((I=n.currentLabel)===null||I===void 0?void 0:I.color,[u,x]);!O||(console.log(O),n.onAnnotationAdd({dataId:n.dataId,type:"polygon",frontendId:p(n.annotations)+1,label:n.currentLabel,labelId:(A=n.currentLabel)===null||A===void 0?void 0:A.labelId,result:O}))},l=function(u,x){var I;if(!(!n.currentAnnotation||!n.currentAnnotation.result||!((I=n.currentLabel)!==null&&I!==void 0&&I.color))){var A=n.currentAnnotation.result+",".concat(u,",").concat(x),O=(0,L.Z)((0,L.Z)({},n.currentAnnotation),{},{result:A});n.modifyAnnoByFrontendId(O)}},P=function(u){if(n.currentTool=="polygon"){var x=u.mouseX+u.offsetX,I=u.mouseY+u.offsetY;console.log("currentAnnotation:",n.currentAnnotation),n.currentAnnotation?l(x,I):a(x,I)}},g=function(){n.currentTool=="polygon"&&n.onMouseUp&&n.onMouseUp()};return{onMouseDown:P,onMouseMove:function(){},onMouseUp:g,drawAnnotation:a0}}var Q=e(10137),F=e(98731),d0=e(20136),$=e(55241),P0=e(47673),u0=e(24044),M0=e(9715),v0=e(93766),T0=e(13237),O0=e.n(T0),y0="http://127.0.0.1:1234",D0=function(a){var l=v0.Z.useForm(),P=(0,y.Z)(l,1),g=P[0],d=a.model,u=a.project;(0,R.useEffect)(function(){var I,A,O,z;if(!!u.curr){var M=u.curr.otherSettings?u.curr.otherSettings:{},c0={mlBackendUrl:M.mlBackendUrl,mlModelAbsPath:(I=M.models)===null||I===void 0||(A=I.EISeg)===null||A===void 0?void 0:A.mlModelAbsPath,mlWeightAbsPath:(O=M.models)===null||O===void 0||(z=O.EISeg)===null||z===void 0?void 0:z.mlWeightAbsPath};g.setFieldsValue(c0),M!=null&&M.mlBackendUrl?d.setMlBackendUrl(M.mlBackendUrl):d.setMlBackendUrl(y0),M.mlModelAbsPath&&M.mlWeightAbsPath&&d.load(M.mlModelAbsPath,M.mlWeightAbsPath)}},[u.curr]);function x(I){if(console.log("saveMlsettings",u.curr,I),!u.curr){b.default.error("Please select project first!");return}u.curr.otherSettings||(u.curr.otherSettings={}),u.curr.otherSettings.mlBackendUrl=g.getFieldValue("mlBackendUrl"),u.curr.otherSettings.models={},u.curr.otherSettings.models.EISeg={},u.curr.otherSettings.models.EISeg.mlModelAbsPath=g.getFieldValue("mlModelAbsPath"),u.curr.otherSettings.models.EISeg.mlWeightAbsPath=g.getFieldValue("mlWeightAbsPath"),u.curr.otherSettings.perviousModel=I.modelName,u.update(u.curr.projectId,{otherSettings:u.curr.otherSettings}),d.setMlBackendUrl(u.curr.otherSettings.mlBackendUrl),d.load(u.curr.otherSettings.models.EISeg.mlModelAbsPath,u.curr.otherSettings.models.EISeg.mlWeightAbsPath),b.default.info("Ml setting saved. Let's start trainig or inference!")}return(0,r.jsxs)($.Z,{overlayClassName:"".concat(O0().popover," ").concat(O0().popoverLeft),placement:"left",content:(0,r.jsxs)(v0.Z,{form:g,layout:"horizontal",size:"large",onFinish:function(A){console.log("form finish",A),x(A)},hidden:u.curr==null,children:[(0,r.jsx)(v0.Z.Item,{name:"mlBackendUrl",label:"ML Backend URL",labelCol:{span:6},wrapperCol:{span:18},initialValue:y0,style:{fontSize:"1.5rem"},children:(0,r.jsx)(u0.Z,{placeholder:y0})}),(0,r.jsx)(v0.Z.Item,{name:"mlModelAbsPath",label:"Model Path",labelCol:{span:6},wrapperCol:{span:18},style:{fontSize:"1.5rem"},children:(0,r.jsx)(u0.Z,{placeholder:"Absolute path"})}),(0,r.jsx)(v0.Z.Item,{name:"mlWeightAbsPath",label:"Weight Path",labelCol:{span:6},wrapperCol:{span:18},style:{fontSize:"1.5rem"},children:(0,r.jsx)(u0.Z,{placeholder:"Absolute path"})}),(0,r.jsx)(v0.Z.Item,{wrapperCol:{span:16,offset:6},children:(0,r.jsx)(T.Z,{htmlType:"submit",type:"primary",style:{height:"2.5rem",width:"48%"},block:!0,children:"Save"})})]}),trigger:"hover",children:[" ",(0,r.jsx)(s.Z,{imgSrc:a.imgSrc||"",onClick:a.onClick,active:a.active,children:a.children})]})},Z0=D0,Q0={result:[[.3779466152191162,.38711845874786377,.36106088757514954,.35420000553131104,.35632404685020447,.36673659086227417,.3709605634212494,.33228039741516113,.3710925579071045,.3494248390197754,.34312722086906433,.3462066650390625,.3746175765991211,.3791941702365875,.4216013550758362,.44569116830825806,.40616583824157715,.4613204002380371,.49154922366142273,.4584124684333801,.4600294828414917,.4803354740142822,.46287786960601807,.43543994426727295,.43747758865356445,.4064893126487732,.3941977620124817,.39790475368499756,.39159834384918213,.3925873935222626,.3789200186729431,.36321160197257996],[.3818621039390564,.3770502805709839,.36075377464294434,.3548894226551056,.3503073453903198,.335567444562912,.3341645896434784,.33101293444633484,.3728009760379791,.364932656288147,.37297818064689636,.37586647272109985,.3893028497695923,.39986884593963623,.41131657361984253,.4522101581096649,.4333687722682953,.5002316832542419,.4971569776535034,.473648339509964,.4820094704627991,.46783292293548584,.4617140591144562,.44852927327156067,.44560548663139343,.44700291752815247,.4248964786529541,.44343101978302,.41931068897247314,.43451547622680664,.4378070831298828,.3568068742752075],[.3652324676513672,.35223522782325745,.35097530484199524,.360146701335907,.36671239137649536,.3395833373069763,.35282737016677856,.33361345529556274,.377223938703537,.38735657930374146,.39466923475265503,.3888944387435913,.3632313311100006,.3888370096683502,.4123692810535431,.41089701652526855,.4431883990764618,.5125359296798706,.5071693658828735,.47963064908981323,.46734818816185,.4608532786369324,.4394238293170929,.40698742866516113,.42963457107543945,.4184359908103943,.39965513348579407,.4161875247955322,.4067150950431824,.45255592465400696,.44494757056236267,.34891369938850403],[.364960253238678,.3754047155380249,.3721790313720703,.37246841192245483,.3652416467666626,.32984012365341187,.3496708571910858,.3422262966632843,.3380891978740692,.3428453207015991,.36001724004745483,.36075884103775024,.36690282821655273,.375881552696228,.3909446597099304,.3976140320301056,.43047186732292175,.5223039984703064,.5174918174743652,.5091606974601746,.4703259766101837,.46562325954437256,.4584425091743469,.4025508463382721,.4088236391544342,.41495299339294434,.41274765133857727,.394614577293396,.3999204635620117,.43086522817611694,.443092942237854,.3433324098587036],[.34178581833839417,.3906759023666382,.3692866563796997,.361131876707077,.3499326705932617,.3162209391593933,.31167617440223694,.3333600163459778,.3163505494594574,.338070273399353,.35670241713523865,.3636510670185089,.35625404119491577,.35763710737228394,.38493406772613525,.39124634861946106,.4325636029243469,.5645959973335266,.5685874223709106,.5350329279899597,.4992934465408325,.4620708227157593,.45242631435394287,.41027894616127014,.4038461744785309,.3944956958293915,.39921683073043823,.3937588334083557,.38950315117836,.3928646147251129,.4300973415374756,.33759239315986633],[.34255340695381165,.384326696395874,.35354241728782654,.32820284366607666,.34075650572776794,.310611367225647,.3198155462741852,.3376222848892212,.3267553746700287,.33798253536224365,.3261478543281555,.3417035639286041,.34279346466064453,.3464927673339844,.3819480240345001,.3768705129623413,.43024203181266785,.5799015164375305,.5669912099838257,.5345537066459656,.5366686582565308,.5029425621032715,.4881816804409027,.4266446828842163,.3896041512489319,.38750505447387695,.3878398835659027,.401533305644989,.38611483573913574,.4102136492729187,.43251603841781616,.3381301164627075],[.34610551595687866,.37768492102622986,.3577062487602234,.321483314037323,.3238357901573181,.31036683917045593,.32922878861427307,.33748194575309753,.34403321146965027,.3489550054073334,.32951661944389343,.35581493377685547,.3549908995628357,.34664082527160645,.37512969970703125,.37657931447029114,.4325118064880371,.6002883911132812,.5718269348144531,.5072413086891174,.5073626041412354,.5133922100067139,.48958104848861694,.45026227831840515,.41855117678642273,.38928452134132385,.3869919180870056,.3884861171245575,.38088345527648926,.4067824184894562,.42561301589012146,.3727574646472931],[.36236464977264404,.38462936878204346,.33172523975372314,.2767360210418701,.28566184639930725,.29154667258262634,.32516488432884216,.3253626823425293,.30838415026664734,.3315502405166626,.3262888789176941,.3520568013191223,.35253870487213135,.3447986841201782,.3818697929382324,.3651794195175171,.4231885075569153,.5827294588088989,.5951063632965088,.6352673768997192,.5757752656936646,.48387131094932556,.46553540229797363,.4512472450733185,.44570550322532654,.4316057562828064,.41964590549468994,.3941313624382019,.37175554037094116,.3886064291000366,.40585458278656006,.3790917694568634],[.35083019733428955,.3677082061767578,.33382877707481384,.3098861575126648,.3019915223121643,.3109188377857208,.3330777883529663,.331575870513916,.31939375400543213,.34113019704818726,.34969979524612427,.3529251217842102,.36156511306762695,.35511070489883423,.37965914607048035,.37223300337791443,.4537010192871094,.5680437088012695,.6448143720626831,.7226863503456116,.729232907295227,.6868923902511597,.5698102116584778,.4619525372982025,.46818724274635315,.43513986468315125,.42044782638549805,.3994002342224121,.39396214485168457,.3904518187046051,.40890100598335266,.3930703103542328],[.3359583914279938,.3705343008041382,.35527661442756653,.3399384319782257,.34458956122398376,.3259856700897217,.347974956035614,.3495017886161804,.3527892231941223,.35826316475868225,.35742005705833435,.335483193397522,.34679195284843445,.36213573813438416,.38948914408683777,.3846794366836548,.4752236008644104,.5317398905754089,.6341782212257385,.7260967493057251,.7400858402252197,.7263891696929932,.6071794629096985,.49351879954338074,.4718652367591858,.4380945563316345,.44395726919174194,.42750805616378784,.4137647747993469,.41625750064849854,.42252638936042786,.4066489040851593],[.3289949595928192,.37435805797576904,.3653024733066559,.34567791223526,.37014514207839966,.36809563636779785,.36826398968696594,.32743436098098755,.3298226594924927,.34234797954559326,.34268611669540405,.3254646956920624,.3090794086456299,.3477054834365845,.37110430002212524,.3621593713760376,.4475082755088806,.487918496131897,.601881742477417,.6983312964439392,.7557751536369324,.7451871633529663,.5793305039405823,.4939006268978119,.47265419363975525,.42300844192504883,.43300366401672363,.41770070791244507,.414137601852417,.42620089650154114,.41289666295051575,.4050122797489166],[.2583468556404114,.3622201085090637,.3609732985496521,.35103529691696167,.3431868553161621,.36043819785118103,.3594401776790619,.33510416746139526,.31773367524147034,.32706841826438904,.33306169509887695,.329282283782959,.3103845715522766,.3467973470687866,.36439552903175354,.35807719826698303,.40837693214416504,.46938514709472656,.6127392053604126,.7233112454414368,.7669434547424316,.7611733675003052,.5953957438468933,.5389460921287537,.4672558009624481,.42192357778549194,.42329633235931396,.42473718523979187,.40417638421058655,.408004492521286,.4068392515182495,.45992550253868103],[.26873499155044556,.3717286288738251,.3643631339073181,.3532456159591675,.3495698571205139,.3619597554206848,.3786068260669708,.3432343006134033,.3145405650138855,.32395321130752563,.33640119433403015,.33749133348464966,.31600821018218994,.3369048535823822,.3504919409751892,.34988847374916077,.3846014440059662,.4548245966434479,.6552940011024475,.7398929595947266,.7898313999176025,.7753756642341614,.6361410617828369,.550889790058136,.4542275369167328,.41850578784942627,.4201924800872803,.4233487844467163,.4089168310165405,.40734779834747314,.4125276207923889,.45579835772514343],[.2889721095561981,.3404158651828766,.34746238589286804,.3323819637298584,.36239108443260193,.36021608114242554,.3564058542251587,.34031766653060913,.3106665015220642,.32129210233688354,.32644376158714294,.3231737017631531,.30393165349960327,.34000542759895325,.3698198199272156,.3764057457447052,.37690526247024536,.44695284962654114,.6244124174118042,.7085537910461426,.7864880561828613,.7922757267951965,.6478504538536072,.5585101842880249,.46907946467399597,.43042469024658203,.4196140766143799,.4143720269203186,.41768819093704224,.4123932123184204,.40979909896850586,.40944749116897583],[.33511802554130554,.3354792892932892,.3483961820602417,.3393648862838745,.36110979318618774,.37371599674224854,.3693099021911621,.3380741477012634,.31597936153411865,.3110752999782562,.3071911334991455,.29553914070129395,.28971895575523376,.3283897936344147,.3738657832145691,.359753280878067,.37170153856277466,.45006322860717773,.622103214263916,.7240833044052124,.8724844455718994,.8468523025512695,.6292383670806885,.5481832027435303,.47547808289527893,.4294469654560089,.4108424484729767,.4051211476325989,.4253206253051758,.42601343989372253,.4097977876663208,.3356857895851135],[.3555319011211395,.3408556282520294,.35363197326660156,.3417183756828308,.3509896397590637,.38215622305870056,.41220414638519287,.3597573935985565,.3141809105873108,.299405962228775,.2974483370780945,.2919771671295166,.2913997769355774,.32095572352409363,.373879075050354,.3556964099407196,.3629939556121826,.47226566076278687,.6256035566329956,.7390267252922058,.8593417406082153,.8262102603912354,.6343622803688049,.5576579570770264,.4742991030216217,.41313984990119934,.3864082098007202,.3817637264728546,.4082636833190918,.41419312357902527,.4119032323360443,.2635403275489807],[.3506373465061188,.32203149795532227,.34963458776474,.32425546646118164,.33225691318511963,.35579705238342285,.38111579418182373,.3564165532588959,.3126765489578247,.3007081151008606,.30092623829841614,.30085325241088867,.2974894046783447,.326341450214386,.36822161078453064,.35820019245147705,.3826185166835785,.4894598424434662,.6533626317977905,.70644211769104,.7451343536376953,.7429384589195251,.6669357419013977,.5394930243492126,.45886534452438354,.41244491934776306,.39533960819244385,.370727002620697,.386724591255188,.3909628987312317,.40651923418045044,.24896344542503357],[.3370128571987152,.30008041858673096,.3007066547870636,.2964634597301483,.31920456886291504,.3513490855693817,.3618793785572052,.3482736349105835,.3220705986022949,.3098466992378235,.306601345539093,.30917924642562866,.32083860039711,.33934545516967773,.3853139877319336,.3959599435329437,.42794349789619446,.5098592042922974,.6510905027389526,.7034169435501099,.7345707416534424,.7295455932617188,.6945785880088806,.5392878651618958,.46230608224868774,.4132283627986908,.40620577335357666,.39428097009658813,.39259806275367737,.38836321234703064,.3802737891674042,.2869125008583069],[.3107353448867798,.28716710209846497,.2810332477092743,.28914326429367065,.3127279281616211,.349570631980896,.35278424620628357,.3424120545387268,.3312514126300812,.3183543384075165,.31009000539779663,.3195717930793762,.31631040573120117,.32442909479141235,.3819769620895386,.39367008209228516,.41426554322242737,.48430579900741577,.6400377750396729,.682829737663269,.7346150875091553,.7265263199806213,.6635222434997559,.5312811732292175,.4713155925273895,.40454715490341187,.41512030363082886,.4182337820529938,.39747387170791626,.3760755658149719,.3628138303756714,.3463020622730255],[.30060598254203796,.3060090243816376,.3139290511608124,.3145269751548767,.30912041664123535,.35013264417648315,.35046622157096863,.33206114172935486,.322023868560791,.3207645118236542,.3205072283744812,.32279807329177856,.3099812865257263,.3307061493396759,.3545922636985779,.3684121072292328,.39094099402427673,.43648841977119446,.6046525239944458,.6440432071685791,.6817156672477722,.6866225600242615,.6455923318862915,.5251345634460449,.4481634497642517,.4150755703449249,.4251801371574402,.404987633228302,.37328672409057617,.36327677965164185,.3602195680141449,.3206213116645813],[.30405154824256897,.3178442716598511,.33336877822875977,.3373711109161377,.32321715354919434,.3630528748035431,.3537922501564026,.3336135447025299,.30300673842430115,.31718388199806213,.3529442846775055,.34015488624572754,.3124402165412903,.3555675745010376,.35390767455101013,.37345024943351746,.4144602119922638,.44640690088272095,.573625922203064,.6119270324707031,.6456900835037231,.6455104351043701,.5934235453605652,.484555721282959,.4161651134490967,.3811432719230652,.3861028552055359,.3659202456474304,.34390294551849365,.3247116208076477,.3456142544746399,.32664284110069275],[.2826228737831116,.2938840985298157,.30609411001205444,.29632243514060974,.2861210107803345,.30216431617736816,.28895461559295654,.2819651961326599,.2588002383708954,.30655887722969055,.34061241149902344,.32973647117614746,.3005189895629883,.29779112339019775,.2948862910270691,.3190575838088989,.3858416974544525,.4116919934749603,.5491650104522705,.5732342004776001,.5938672423362732,.5976152420043945,.5155865550041199,.45706799626350403,.3356960117816925,.31694191694259644,.3380652368068695,.3176265358924866,.315368115901947,.3020714521408081,.3154049515724182,.32578057050704956]]};function U0(n){var a,l,P=n.canvasRef;if(!n.interactorData||!((a=n.label)!==null&&a!==void 0&&a.color))return(0,r.jsx)(r.Fragment,{});var g=n.interactorData.predictData,d=(l=P.current)===null||l===void 0?void 0:l.getContext("2d");return d?(console.log("PPInteractor.drawAnnotation",n.interactorData),F0(E0(g,n.threshold),d,n.label.color),R0(n.interactorData.mousePoints,d),(0,r.jsx)(r.Fragment,{})):(0,r.jsx)(r.Fragment,{})}function R0(n,a){if(!!n){var l=(0,v.Z)(n),P;try{for(l.s();!(P=l.n()).done;){var g=P.value,d=(0,y.Z)(g,3),u=d[0],x=d[1],I=d[2];a.beginPath(),I?a.fillStyle="#FF0000":a.fillStyle="#008000",a.beginPath(),a.arc(u,x,10,0,2*Math.PI),a.lineWidth=2,a.fill(),a.strokeStyle="#FFF",a.beginPath(),a.arc(u,x,10,0,2*Math.PI),a.stroke()}}catch(A){l.e(A)}finally{l.f()}}}function E0(n,a){var l=a?a*.01:.5,P=[],g=0,d=(0,v.Z)(n),u;try{for(d.s();!(u=d.n()).done;){var x=u.value,I=0,A=(0,v.Z)(x),O;try{for(A.s();!(O=A.n()).done;){var z=O.value;z>=l&&P.push(I,g),I++}}catch(M){A.e(M)}finally{A.f()}g++}}catch(M){d.e(M)}finally{d.f()}return P}function p0(n,a,l,P,g){if(!P||!g||!l)return null;var d=E0(l,n),u=0,x=S0(a),I="".concat(u,",").concat(x,",")+d.join(","),A={dataId:P,label:g,labelId:g.labelId,frontendId:x,result:I,type:"brush"};return A}function F0(n,a,l){if(n.length<4){console.log("found incorrect points:",n);return}W0(a,n.slice(2),l)}function W0(n,a,l){n.globalCompositeOperation=l?"source-over":"destination-out",l&&(n.fillStyle=l);for(var P=0;P<=a.length/2-1;P++){var g=a[2*P],d=a[2*P+1];n.fillRect(g,d,1,1)}}function S0(n){if(!n||n.length==0)return 0;var a=0,l=(0,v.Z)(n),P;try{for(l.s();!(P=l.n()).done;){var g=P.value;g.frontendId>a&&(a=g.frontendId)}}catch(d){l.e(d)}finally{l.f()}return a}function z0(n){var a=(0,t.tT)("InteractorData"),l=a.interactorData,P=a.setInteractorData,g=n.model,d=function(){var I=(0,r0.Z)(J().mark(function A(O){var z,M,c0,h0,X,i0,n0;return J().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(n.currentTool=="interactor"){m.next=2;break}return m.abrupt("return");case 2:if((z=n.currentLabel)!==null&&z!==void 0&&z.color){m.next=5;break}return b.default.error("please select label first"),m.abrupt("return");case 5:if(M=Math.round(O.mouseX),c0=Math.round(O.mouseY),console.log("frontendId: ",n.frontendIdOps.frontendId,"maxId:",S0(n.annotations)),h0=n.frontendIdOps.frontendId>0?n.frontendIdOps.frontendId:S0(n.annotations)+1,h0!=n.frontendIdOps.frontendId&&n.frontendIdOps.setFrontendId(h0),l.mousePoints.push(new Array(M,c0,O.e.evt.button!=2)),!(!l.mousePoints.length||!O.stageRef.current||h0==null)){m.next=13;break}return m.abrupt("return");case 13:return X=O.stageRef.current,i0=X.findOne(".baseImage").toDataURL().slice(22),m.next=17,g.predict({format:"b64",img:i0,other:{clicks:l.mousePoints}});case 17:if(n0=m.sent,n0){m.next=20;break}return m.abrupt("return");case 20:P({active:!0,mousePoints:l.mousePoints,predictData:n0.result});case 21:case"end":return m.stop()}},A)}));return function(O){return I.apply(this,arguments)}}(),u=function(){},x=function(){n.currentTool=="interactor"&&n.onMouseUp()};return{onMouseDown:d,onMouseMove:u,onMouseUp:x,drawAnnotation:U0}}var k0=40,N0=function(){var a,l=(0,R.useState)(0),P=(0,y.Z)(l,2),g=P[0],d=P[1],u=(0,R.useState)(10),x=(0,y.Z)(u,2),I=x[0],A=x[1],O=(0,R.useState)(50),z=(0,y.Z)(O,2),M=z[0],c0=z[1],h0=(0,R.useState)(60),X=(0,y.Z)(h0,2),i0=X[0],n0=X[1],f0=(0,t.tT)("InteractorData"),m=f0.interactorData,b0=f0.setInteractorData,j0=(0,F.RZ)(R.useState),m0=(0,F.$L)(R.useState,R.useEffect,{effectTrigger:{postTaskChange:function(){return(0,c.Ad)()}},label:{oneHot:!0,postSelect:function(){f.setCurr(void 0),d(0)},preUnsetCurr:Y0},tool:{defaultTool:"mover"},task:{push:!0}}),E=m0.tool,$0=m0.loading,A0=m0.scale,f=m0.annotation,_0=m0.task,l0=m0.data,C0=m0.project,s0=m0.label,H0=m0.refreshVar;function Y0(){f.setCurr(void 0),d(0),E.setCurr("mover")}var U=function(o){f.setCurr(o),o!=null&&o.frontendId?d(o.frontendId):d(0)};(0,R.useEffect)(function(){(0,c.Ad)()},[]),(0,R.useEffect)(function(){var h=setInterval(function(){var o;console.log("triggered!",l0),f.pushToBackend((o=l0.curr)===null||o===void 0?void 0:o.dataId)},2e4);return function(){clearInterval(h)}},[f,l0,l0.curr]);var V0=function(o){!o||(f.all.pop(),f.all.push(o),U(o),f.setAll(f.all))},L0=function(o){var H=[],t0=(0,v.Z)(f.all),g0;try{for(t0.s();!(g0=t0.n()).done;){var x0=g0.value;x0.frontendId==o.frontendId?H.push(o):H.push(x0)}}catch(I0){t0.e(I0)}finally{t0.f()}U(o),f.setAll(H)},B0={dataId:(a=l0.curr)===null||a===void 0?void 0:a.dataId,currentLabel:s0.curr,brushSize:I,scale:A0.curr,currentTool:E.curr,annotations:f.all,currentAnnotation:f.curr,onAnnotationAdd:function(o){var H=f.all.concat([o]);f.setAll(H),U(o)},onAnnotationModify:V0,modifyAnnoByFrontendId:L0,onMouseUp:function(){var o;m.active||((0,c.k3)({annos:f.all,currAnno:f.curr}),f.pushToBackend((o=l0.curr)===null||o===void 0?void 0:o.dataId,f.all))},frontendIdOps:{frontendId:g,setFrontendId:d},model:j0},k=(0,t.YB)(),X0={polygon:K(B0),brush:(0,q.Z)(B0),interactor:z0(B0)};return(0,r.jsxs)(C.Z,{className:"segment",children:[(0,r.jsxs)(B.Z,{children:[(0,r.jsx)(s.Z,{imgSrc:"./pics/buttons/polygon.png",active:E.curr=="polygon",disabled:m.active,onClick:function(){if(!s0.curr){b.default.error("Please select a label first");return}E.setCurr("polygon"),U(void 0)},children:k.formatMessage({id:"pages.toolBar.polygon"})}),(0,r.jsx)(s.Z,{active:E.curr=="editor",disabled:m.active,imgSrc:"./pics/buttons/edit.png",onClick:function(){E.setCurr("editor"),U(void 0)},children:k.formatMessage({id:"pages.toolBar.edit"})}),(0,r.jsx)(i.Z,{imgSrc:"./pics/buttons/brush.png",size:I,active:E.curr=="brush",disabled:m.active,onClick:function(){if(!s0.curr){b.default.error("Please select a label first");return}E.curr!="rubber"&&E.curr!="brush"&&U(void 0),E.setCurr("brush")},onChange:function(o){A(o)},children:k.formatMessage({id:"pages.toolBar.brush"})}),(0,r.jsx)(i.Z,{size:I,active:E.curr=="rubber",disabled:m.active,onClick:function(){E.curr!="rubber"&&E.curr!="brush"&&U(void 0),E.setCurr("rubber")},onChange:function(o){A(o)},imgSrc:"./pics/buttons/rubber.png",children:k.formatMessage({id:"pages.toolBar.rubber"})}),(0,r.jsx)(s.Z,{imgSrc:"./pics/buttons/zoom_in.png",onClick:function(){A0.change(.1)},children:k.formatMessage({id:"pages.toolBar.zoomIn"})}),(0,r.jsx)(s.Z,{imgSrc:"./pics/buttons/zoom_out.png",onClick:function(){A0.change(-.1)},children:k.formatMessage({id:"pages.toolBar.zoomOut"})}),(0,r.jsx)(s.Z,{imgSrc:"./pics/buttons/save.png",onClick:function(){var o;f.pushToBackend((o=l0.curr)===null||o===void 0?void 0:o.dataId)},disabled:m.active,children:k.formatMessage({id:"pages.toolBar.save"})}),(0,r.jsx)(s.Z,{active:E.curr=="mover",imgSrc:"./pics/buttons/move.png",onClick:function(){E.curr=="mover"?m.active?E.setCurr("interactor"):E.setCurr(void 0):E.setCurr("mover")},children:k.formatMessage({id:"pages.toolBar.move"})}),(0,r.jsx)(s.Z,{imgSrc:"./pics/buttons/prev.png",onClick:function(){var o=(0,c.td)();o&&(f.setAll(o.annos),U(o.currAnno))},disabled:m.active,children:k.formatMessage({id:"pages.toolBar.unDo"})}),(0,r.jsx)(s.Z,{imgSrc:"./pics/buttons/next.png",onClick:function(){var o=(0,c.Vd)();o&&(f.setAll(o.annos),U(o.currAnno))},disabled:m.active,children:k.formatMessage({id:"pages.toolBar.reDo"})}),(0,r.jsx)(s.Z,{imgSrc:"./pics/buttons/clear_mark.png",onClick:function(){f.setAll([]),f.setCurr(void 0)},disabled:m.active,children:k.formatMessage({id:"pages.toolBar.clearMark"})})]}),(0,r.jsxs)("div",{id:"dr",className:"mainStage",children:[(0,r.jsxs)(D.Z,{tip:"loading",spinning:!!$0.curr,children:[(0,r.jsx)("div",{className:"draw",children:(0,r.jsx)(j.Z,{scale:A0.curr,annotations:f.all,currentTool:E.curr,currentAnnotation:f.curr,currentLabel:s0.curr,setCurrentAnnotation:U,onAnnotationModify:L0,onAnnotationModifyComplete:function(){m.active||(0,c.k3)({annos:f.all,currAnno:f.curr})},frontendIdOps:{frontendId:g,setFrontendId:d},imgSrc:l0.imgSrc,transparency:i0,threshold:M,onAnnotationAdd:function(o){var H=f.all.concat([o]);f.setAll(H),f.curr||U(o)},drawTool:X0,refresh:H0})}),(0,r.jsx)("div",{style:{display:m.active?"none":"block"},className:"prevTask",onClick:function(){!_0.prevTask()||(U(void 0),b0({active:!1,predictData:[],mousePoints:[]}))}}),(0,r.jsx)("div",{style:{display:m.active?"none":"block"},className:"nextTask",onClick:function(){!_0.nextTask()||(U(void 0),b0({active:!1,predictData:[],mousePoints:[]}))}})]}),(0,r.jsx)("div",{className:"pblock",children:(0,r.jsx)(Q.Z,{task:_0,project:C0})})]}),(0,r.jsxs)(B.Z,{disLoc:"right",children:[(0,r.jsx)(Z0,{imgSrc:"./pics/buttons/intelligent_interaction.png",active:m.active,onClick:function(){m.active?(E.setCurr(void 0),b0({active:!1,predictData:[],mousePoints:[]})):(E.setCurr("interactor"),b0({active:!0,predictData:[],mousePoints:[]}))},model:j0,project:C0,children:k.formatMessage({id:"pages.toolBar.interactor"})}),(0,r.jsx)(i.Z,{disabled:!m.active,imgSrc:"./pics/buttons/threshold.png",disLoc:"left",size:M,maxSize:100,minSize:10,step:10,onChange:function(o){c0(o)},children:k.formatMessage({id:"pages.toolBar.segmentThreshold"})}),(0,r.jsx)(i.Z,{disabled:!m.active,imgSrc:"./pics/buttons/radius.png",disLoc:"left",children:k.formatMessage({id:"pages.toolBar.visualRadius"})}),(0,r.jsx)(i.Z,{imgSrc:"./pics/buttons/alpha.png",disLoc:"left",size:i0,maxSize:100,minSize:0,onChange:function(o){n0(o)},children:k.formatMessage({id:"pages.toolBar.transparency"})}),(0,r.jsx)(s.Z,{imgSrc:"./pics/buttons/data_division.png",onClick:function(){t.m8.push("/project_overview?projectId=".concat(C0.curr.projectId))},children:"Project Overview"})]}),(0,r.jsxs)("div",{className:"rightSideBar",children:[(0,r.jsx)("div",{className:"determinOutline",children:(0,r.jsx)(T.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",block:!0,onClick:function(){if(m.active){var o;console.log(E.curr);var H=p0(M,f.all,m==null?void 0:m.predictData,(o=l0.curr)===null||o===void 0?void 0:o.dataId,s0.curr);if(H){var t0,g0=f.all.concat([H]);f.setAll(g0),U(H),f.pushToBackend((t0=l0.curr)===null||t0===void 0?void 0:t0.dataId,g0)}}b0({active:!0,predictData:[],mousePoints:[]}),U(void 0)},children:k.formatMessage({id:"pages.toolBar.determineOutline"})})}),(0,r.jsx)(Z.Z,{hideColorPicker:!1,labels:s0.all,activeIds:s0.activeIds,onLabelSelect:s0.onSelect,onLabelModify:function(){},onLabelDelete:s0.remove,onLabelAdd:function(o){s0.create((0,L.Z)((0,L.Z)({},o),{},{projectId:C0.curr.projectId})).then(function(H){U(void 0),s0.setCurr(H)})}}),(0,r.jsx)(w.Z,{currAnnotation:f.curr,annotations:f.all,onAnnotationSelect:function(o){o!=null&&o.delete||U(o)},onAnnotationAdd:function(){U(void 0)},onAnnotationModify:function(){},onAnnotationDelete:function(){var h=(0,r0.Z)(J().mark(function o(H){var t0,g0;return J().wrap(function(I0){for(;;)switch(I0.prev=I0.next){case 0:return g0=f.all.filter(function(J0){return J0.frontendId!=H.frontendId}),f.setAll(g0),U(void 0),I0.next=5,f.pushToBackend((t0=l0.curr)===null||t0===void 0?void 0:t0.dataId,g0);case 5:case"end":return I0.stop()}},o)}));return function(o){return h.apply(this,arguments)}}(),disabled:m.active})]})]})},K0=N0}}]);
