(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[507],{52822:function(c){c.exports={roundBall:"roundBall___1pqu1",popover:"popover___1-PR6"}},5882:function(c){c.exports={listItem:"listItem___vtDXn",eye:"eye___AsLBS",roundBall:"roundBall___1J_R3",popover:"popover___1x-2R",delete:"delete___WHPf2",listItemActive:"listItemActive___3FRb7"}},56131:function(c){c.exports={labelList:"labelList___jvD05",listHeader:"listHeader___UM5UF",eye:"eye___II3Po",roundBall:"roundBall___j752J"}},78677:function(c){c.exports={container:"container___G0FNe"}},80961:function(c){c.exports={leftToolbar:"leftToolbar___1xi4t",rightToolbar:"rightToolbar___3dNSB"}},82499:function(c){c.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1SHWL",toolBarButtonContainer:"toolBarButtonContainer___1jKUz",toolBarButton:"toolBarButton___3Ouq1",buttonText:"buttonText___10ls7",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AA28"}},63097:function(c,g,n){"use strict";var K=n(20136),v=n(55241),u=n(2824),i=n(67294),s=n(52822),l=n.n(s),a=n(63144),m=n(85893),F=function(L){var o=(0,i.useState)(L.color||"#FFF"),y=(0,u.Z)(o,2),W=y[0],e=y[1];return(0,i.useEffect)(function(){e(L.color||"#FFF")},[L]),L.changeable?(0,m.jsx)(v.Z,{getPopupContainer:function(R){return R.parentElement||document.body},overlayClassName:l().popover,openClassName:l().popoverOpenClassName,placement:"bottom",content:(0,m.jsx)(a.xS,{disableAlpha:!0,color:W,onChange:function(R){e(R.hex)},onChangeComplete:L.onChange}),trigger:"click",children:(0,m.jsx)("div",{className:l().roundBall,style:{backgroundColor:W}})}):(0,m.jsx)("div",{className:l().roundBall,style:{backgroundColor:W}})};g.Z=F},5041:function(c,g,n){"use strict";n.d(g,{Z:function(){return V}});var K=n(54421),v=n(38272),u=n(57663),i=n(71577),s=n(2824),l=n(67294),a=n(56131),m=n.n(a),F=n(49111),z=n(19650),L=n(11849),o=n(5882),y=n.n(o),W=n(63097),e=n(85893),N=function(t){var r=(0,L.Z)({},t.label),f=(0,l.useState)(r.invisible),A=(0,s.Z)(f,2),b=A[0],j=A[1],S=(0,l.useState)(0),E=(0,s.Z)(S,2),B=E[0],h=E[1],C=t.hideEye?" ":(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("a",{className:y().eye,style:{backgroundImage:b?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(P){P.stopPropagation(),j(!b),t.onLabelModify(r)}})," "]}),U=t.hideColorPicker?(0,e.jsx)(e.Fragment,{}):(0,e.jsx)(W.Z,{color:r.color,changeable:!0,onChange:function(P){r.color=P.hex,t.onLabelModify(r)}}),Y=(0,e.jsxs)(v.ZP.Item,{className:"".concat(y().listItem," ").concat(t.active?y().listItemActive:""),unselectable:"on",onClick:function(){t.onClick(r)},children:[(0,e.jsxs)(z.Z,{align:"center",size:5,children:[C,r.name,U]}),(0,e.jsx)("a",{className:y().delete,onClick:function(P){P.stopPropagation();var O=new Date().getTime();O-B<300||(h(O),t.onLabelDelete(r))}})]});return Y},R=N,G=n(71194),Q=n(50146),k=n(47673),X=n(24044),p=n(9715),Z=n(93766),x=n(48971),H=["#FF0000","#008000","#0000FF","#FFFF00","#FFA500","#00FFFF","#8B00FF","#FFC0CB","#7CFC00","#007FFF","#800080","#36BF36","#DAA520","#800000","#008B8B","#B22222","#E6D933","#000080","#FF00FF","#FFFF99","#87CEEB","#5C50E6","#CD5C5C","#20B2AA","#E680FF","#4D1F00","#006374","#B399FF","#8B4513","#BA55D3","#C0C0C0","#808080","#000000"],$=function(t){var r,f,A=(0,x.YB)().formatMessage({id:"component.PPAddLabelModal.selectColor"}),b=(0,x.YB)().formatMessage({id:"component.PPAddLabelModal.addLabel"}),j=(0,x.YB)().formatMessage({id:"component.PPAddLabelModal.labelName"}),S=(0,x.YB)().formatMessage({id:"component.PPCreater.cancel"}),E=(0,x.YB)().formatMessage({id:"component.PPSegMode.ok"}),B=(0,l.useState)(((r=t.defaultLabel)===null||r===void 0?void 0:r.color)||H[t.order||0]),h=(0,s.Z)(B,2),C=h[0],U=h[1];(0,l.useEffect)(function(){var T;U(((T=t.defaultLabel)===null||T===void 0?void 0:T.color)||H[t.order||0])},[t]);var Y=t.hideColorPicker?(0,e.jsx)(e.Fragment,{}):(0,e.jsx)(Z.Z.Item,{label:A,name:"color",children:(0,e.jsx)(W.Z,{color:C,onChange:function(I){U(I.hex)}})}),D=Z.Z.useForm(),P=(0,s.Z)(D,1),O=P[0];return(0,e.jsx)(Q.Z,{title:b,visible:t.visible,onCancel:t.onCancel,footer:null,children:(0,e.jsxs)(Z.Z,{form:O,name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!1,labelname:(f=t.defaultLabel)===null||f===void 0?void 0:f.name},onFinish:function(I){var ee={name:I.labelname,color:C};t.onLabelAdd(ee),O.resetFields()},autoComplete:"off",children:[(0,e.jsx)(Z.Z.Item,{label:j,name:"labelname",rules:[{required:!0,message:"Please input label name!"}],children:(0,e.jsx)(X.Z,{})}),Y,(0,e.jsx)(Z.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,e.jsxs)(z.Z,{children:[(0,e.jsx)(i.Z,{onClick:function(){var I;(I=t.onCancel)===null||I===void 0||I.call(0),O.resetFields()},children:S}),(0,e.jsx)(i.Z,{type:"primary",htmlType:"submit",children:E})]})})]})})},q=$,w=function(t){var r,f=(0,x.YB)().formatMessage({id:"component.PPLabelList.addLabel"}),A=(0,x.YB)().formatMessage({id:"component.PPLabelList.labelList"}),b=(0,l.useState)(!1),j=(0,s.Z)(b,2),S=j[0],E=j[1];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(v.ZP,{className:m().labelList,size:"large",header:(0,e.jsx)("div",{className:m().listHeader,children:A}),footer:(0,e.jsx)("div",{children:(0,e.jsx)(i.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){E(!0)},block:!0,children:f})}),bordered:!0,dataSource:t.labels,renderItem:function(h){var C;return(0,e.jsx)(R,{hideColorPicker:t.hideColorPicker,hideEye:t.hideEye,onClick:t.onLabelSelect,label:h,active:(C=t.activeIds)===null||C===void 0?void 0:C.has(h.labelId),onLabelDelete:t.onLabelDelete,onLabelModify:t.onLabelModify})}}),(0,e.jsx)(q,{hideColorPicker:t.hideColorPicker,order:(r=t.labels)===null||r===void 0?void 0:r.length,visible:S,onLabelAdd:function(h){t.onLabelAdd(h),E(!1)},onCancel:function(){E(!1)}})]})},V=w},8088:function(c,g,n){"use strict";var K=n(67294),v=n(78677),u=n.n(v),i=n(85893),s=function(a){return(0,i.jsx)("div",{className:"".concat(u().container," ").concat(a.className),children:a.children})};g.Z=s},57436:function(c,g,n){"use strict";var K=n(91220),v=n(2824),u=n(67294),i=n(65031),s=n(84420),l=n.n(s),a=n(85893),m="./pics/32_23.jpg";function F(L){switch(L){case"mover":return"move";case"rectangle":case"polygon":return"crosshair";default:return"default"}}var z=function(o){var y=l()(o.imgSrc||m),W=(0,v.Z)(y,1),e=W[0],N=(e==null?void 0:e.width)||0,R=(e==null?void 0:e.height)||0,G=o.transparency==null?0:o.transparency*.01;console.log("imageWidth,imageHeight: ",N,R);var Q=(0,u.useState)(0),k=(0,v.Z)(Q,2),X=k[0],p=k[1],Z=(0,u.useState)(0),x=(0,v.Z)(Z,2),H=x[0],$=x[1],q=(0,u.useState)({x:0,y:0}),w=(0,v.Z)(q,2),V=w[0],J=w[1],t=(0,u.useRef)(null),r=(0,u.useRef)(null),f=(0,u.useRef)(null);function A(){var _=document.getElementById("dr");_&&(p(_.clientWidth),$(_.clientHeight))}(0,u.useEffect)(function(){window.removeEventListener("resize",A),window.addEventListener("resize",A);var _=document.getElementById("dr");_&&(p(_.clientWidth),$(_.clientHeight))},[]),(0,u.useEffect)(function(){!t.current||(t.current.container().style.cursor=F(o.currentTool))},[o.currentTool]);var b=function(d){return{e:d,mouseX:(d.evt.offsetX-V.x-X/2)/o.scale+N/2,mouseY:(d.evt.offsetY-V.y-H/2)/o.scale+R/2,canvasRef:f,layerRef:r}},j=function(d){var M;(M=o.drawTool)===null||M===void 0||M.onMouseDown(b(d))},S=function(d){var M;(M=o.drawTool)===null||M===void 0||M.onMouseMove(b(d))},E=function(d){var M;(M=o.drawTool)===null||M===void 0||M.onMouseUp(b(d))},B=function(d){d.cancelBubble=!0,d.evt.preventDefault()},h=[];if(o.annotations){var C,U,Y={onDrag:o.onAnnotationModify,onDragEnd:o.onAnnotationModifyComplete,scale:o.scale,currentTool:o.currentTool,onSelect:o.setCurrentAnnotation,stageRef:t,currentAnnotation:o.currentAnnotation,transparency:G,canvasRef:f},D=(C=f.current)===null||C===void 0?void 0:C.getContext("2d");D&&D.clearRect(0,0,D.canvas.width,D.canvas.height);var P=(0,K.Z)(o.annotations),O;try{for(P.s();!(O=P.n()).done;){var T=O.value;if(!!T){Y.annotation=T;var I=o.drawTool.drawAnnotation(Y);h.push(I)}}}catch(_){P.e(_)}finally{P.f()}(U=r.current)===null||U===void 0||U.batchDraw()}var ee=o.currentTool=="mover";return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("canvas",{style:{display:"none"},id:"virtualCanvas",width:e==null?void 0:e.width,height:e==null?void 0:e.height}),(0,a.jsx)("canvas",{style:{display:"none"},id:"singleLineCanvas",width:e==null?void 0:e.width,height:e==null?void 0:e.height}),(0,a.jsx)("canvas",{style:{display:"none"},id:"canvasId",ref:f,width:e==null?void 0:e.width,height:e==null?void 0:e.height}),(0,a.jsx)("svg",{width:"0",height:"0",style:{position:"absolute",zIndex:"-1"},children:(0,a.jsx)("defs",{children:(0,a.jsx)("filter",{id:"remove-alpha",x:"0",y:"0",width:"100%",height:"100%",children:(0,a.jsx)("feComponentTransfer",{children:(0,a.jsx)("feFuncA",{type:"discrete",tableValues:"0 1"})})})})}),(0,a.jsxs)(i.Hf,{width:X,height:H,offsetX:-X/2,offsetY:-H/2,className:"stage",ref:t,draggable:ee,onDragMove:function(d){o.currentTool=="mover"},onDragEnd:function(d){o.currentTool=="mover"&&(console.log("dragEndPosX,Y: (".concat(d.target.x(),",").concat(d.target.y(),")")),J({x:d.target.x(),y:d.target.y()}))},children:[(0,a.jsx)(i.mh,{onMouseDown:j,onMouseMove:S,onMouseUp:E,onContextMenu:B,scaleX:o.scale,scaleY:o.scale,draggable:!1,children:(0,a.jsx)(i.Ee,{name:"baseImage",draggable:!1,image:e,x:-((e==null?void 0:e.width)||0)/2,y:-((e==null?void 0:e.height)||0)/2})}),(0,a.jsxs)(i.mh,{ref:r,name:"annotation",scaleX:o.scale,scaleY:o.scale,onMouseDown:j,onMouseMove:S,onMouseUp:E,onContextMenu:B,opacity:G,children:[h,(0,a.jsx)(i.Ee,{x:-((e==null?void 0:e.width)||0)/2,y:-((e==null?void 0:e.height)||0)/2,image:f.current||void 0})]})]})]})};g.Z=z},44434:function(c,g,n){"use strict";var K=n(67294),v=n(80961),u=n.n(v),i=n(85893),s=function(a){var m=u().leftToolbar;return a.disLoc=="right"&&(m=u().rightToolbar),(0,i.jsx)("div",{className:m,children:a.children})};g.Z=s},61541:function(c,g,n){"use strict";var K=n(49111),v=n(19650),u=n(67294),i=n(82499),s=n.n(i),l=n(85893),a=function(F){return(0,l.jsx)("div",{unselectable:"on",className:"".concat(s().toolBarButtonContainerWrapper," ").concat(F.active&&s().toolBarButtonContainerWrapperActive),onClick:F.onClick,children:(0,l.jsx)(v.Z,{align:"center",className:s().toolBarButtonContainer,size:0,children:(0,l.jsxs)(v.Z,{align:"center",direction:"vertical",className:s().toolBarButton,size:0,children:[(0,l.jsx)("img",{src:F.imgSrc}),(0,l.jsx)("div",{className:s().buttonText,children:F.children})]})})})};g.Z=a}}]);
