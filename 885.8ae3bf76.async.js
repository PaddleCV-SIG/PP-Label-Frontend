(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[885],{85024:function(h){h.exports={listItem:"listItem___u4Q82",eye:"eye___BwaRm",delete:"delete___31JB_",roundBall:"roundBall___23A7l",popover:"popover___1BNET",annotationId:"annotationId___zAzX4",labelName:"labelName___2ohxn",listItemActive:"listItemActive___2QnA3"}},56159:function(h){h.exports={labelList:"labelList___v7C6K",listHeader:"listHeader___1aY8R",eye:"eye___2MKbp",roundBall:"roundBall___187XH"}},57560:function(h){h.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___147XP",toolBarButtonContainer:"toolBarButtonContainer___ZEvhK",toolBarButton:"toolBarButton___1s2Rh",buttonText:"buttonText___3NTCv",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___2Utx8",popover:"popover___3PRoi"}},26647:function(h){h.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1FTWb",toolBarButtonContainer:"toolBarButtonContainer___1Vahn",toolBarButton:"toolBarButton___3mR2H",buttonText:"buttonText___Y0WDm",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3lRZ8",popover:"popover___3zzu2",popoverLeft:"popoverLeft___15lGe"}},14836:function(h,b,t){"use strict";t.d(b,{Z:function(){return O}});var W=t(54421),D=t(38272),B=t(57663),C=t(71577),L=t(67294),M=t(56159),I=t.n(M),x=t(49111),T=t(19650),e=t(2824),P=t(11849),n=t(85024),l=t.n(n),_=t(63097),r=t(85893),u=function(a){var f=(0,P.Z)({},a.annotation),c=(0,L.useState)(f.invisible),v=(0,e.Z)(c,2),i=v[0],s=v[1],g=(0,L.useState)(0),A=(0,e.Z)(g,2),y=A[0],j=A[1];(0,L.useEffect)(function(){s(a.annotation.invisible)},[a.annotation.invisible]);var K=(0,r.jsxs)(D.ZP.Item,{className:"".concat(l().listItem," ").concat(a.active?l().listItemActive:""),unselectable:"on",onClick:function(){a.onClick(f)},children:[(0,r.jsxs)(T.Z,{align:"center",size:5,children:[(0,r.jsx)("a",{className:l().eye,style:{backgroundImage:i?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(R){R.stopPropagation(),s(!i),a.onAnnotationModify(f)}})," ",(0,r.jsx)("span",{className:l().annotationId,children:f.frontendId}),(0,r.jsx)("span",{className:l().labelName,children:f.label.name}),(0,r.jsx)(_.Z,{color:f.label.color})]}),(0,r.jsx)("a",{className:l().delete,onClick:function(R){R.stopPropagation();var S=new Date().getTime();S-y<300||(j(S),a.onAnnotationDelete(f))}})]});return K},m=u,d=t(48971),o=function(a){var f=(0,d.YB)().formatMessage({id:"component.PPAnnotationList.annotationList"}),c=(0,d.YB)().formatMessage({id:"component.PPAnnotationList.addAnnotation"});return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(D.ZP,{className:I().labelList,size:"large",header:(0,r.jsx)("div",{className:I().listHeader,children:f}),bordered:!0,dataSource:a.annotations,renderItem:function(i){var s;return(0,r.jsx)(m,{onClick:a.onAnnotationSelect,annotation:i,active:i.frontendId==((s=a.currAnnotation)===null||s===void 0?void 0:s.frontendId),onAnnotationDelete:a.onAnnotationDelete,onAnnotationModify:a.onAnnotationModify})},footer:(0,r.jsx)("div",{children:(0,r.jsx)(C.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){a.onAnnotationAdd()},block:!0,children:c})})})})},O=o},43801:function(h,b,t){"use strict";t.d(b,{Z:function(){return P}});var W=t(11849),D=t(2824),B=t(91220),C=t(67294),L=t(65031),M=t(85893);function I(n,l,_,r){if(!(!n||!l||!_||!r))return{width:n,color:l,points:_,tool:r}}function x(n,l,_,r,u,m,d){if(!n||!n.points)return(0,M.jsx)(M.Fragment,{});var o=(d==null?void 0:d.frontendId)==n.frontendId,O=o&&u=="mover",E=[],a=(0,B.Z)(n.points),f;try{for(a.s();!(f=a.n()).done;){var c=f.value;!c.width||!c.color||!c.tool||E.push((0,M.jsx)(L.x1,{stroke:c.color,strokeWidth:c.width,globalCompositeOperation:c.tool==="brush"?"source-over":"destination-out",lineCap:"round",points:c.points,tension:1,onDragMove:function(){},onDragEnd:function(){_()},shadowColor:"red",shadowBlur:10,shadowOffset:{x:5,y:5},shadowOpacity:O?1:0}))}}catch(v){a.e(v)}finally{a.f()}return(0,M.jsx)(L.ZA,{draggable:O,children:E})}function T(n,l){return n=="rubber"||l==2?"rubber":"brush"}function e(n){var l=0,_=(0,B.Z)(n),r;try{for(_.s();!(r=_.n()).done;){var u=r.value;!u||!u.frontendId||u.frontendId>l&&(l=u.frontendId)}}catch(m){_.e(m)}finally{_.f()}return l}function P(n){var l=(0,C.useState)(),_=(0,D.Z)(l,2),r=_[0],u=_[1],m=function(E,a,f,c){var v;if(!(n.currentTool!="brush"&&n.currentTool!="rubber"||!n.currentLabel.color)){var i=(E.evt.offsetX+a)/c,s=(E.evt.offsetY+f)/c,g=T(n.currentTool,E.evt.button),A=I(n.brushSize||10,(v=n.currentLabel)===null||v===void 0?void 0:v.color,[i,s,i,s],g);if(!!A)if(u(g),n.currentAnnotation){var y,j={type:"brush",frontendId:n.currentAnnotation.frontendId,label:n.currentAnnotation.label,points:(y=n.currentAnnotation.points)===null||y===void 0?void 0:y.concat([A])};n.onAnnotationModify(j)}else{if(g=="rubber")return;n.onAnnotationAdd({type:g,frontendId:e(n.annotations)+1,label:n.currentLabel,points:[A]})}}},d=function(E,a,f,c){var v;if(!(!r||!n.currentAnnotation||!n.currentLabel.color)){var i=(E.evt.offsetX+a)/c,s=(E.evt.offsetY+f)/c,g=[i,s],A=[];(v=n.currentAnnotation)!==null&&v!==void 0&&v.points&&(g=n.currentAnnotation.points[n.currentAnnotation.points.length-1].points.concat(g),A=n.currentAnnotation.points);var y=I(n.brushSize||10,n.currentLabel.color,g,r);!y||(A.pop(),A.push(y),n.onAnnotationModify((0,W.Z)((0,W.Z)({},n.currentAnnotation),{},{points:A,type:r})))}},o=function(){n.currentTool!="brush"&&n.currentTool!="rubber"||(u(void 0),n.onMouseUp())};return{onMouseDown:m,onMouseMove:d,onMouseUp:o,createElementsFunc:x}}},58967:function(h,b,t){"use strict";var W=t(20136),D=t(55241),B=t(77883),C=t(70507),L=t(57663),M=t(71577),I=t(2824),x=t(67294),T=t(61541),e=t(57560),P=t.n(e),n=t(85893),l=1,_=50,r=10;function u(d){return d?d<=l?l:d>=_?_:d:r}var m=function(o){var O=(0,x.useState)(u(o.size)),E=(0,I.Z)(O,2),a=E[0],f=E[1],c=function(i){f(u(i))};return(0,x.useEffect)(function(){c(o.size)},[o.size]),(0,n.jsxs)(D.Z,{overlayClassName:P().popover,placement:"right",content:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(M.Z,{type:"text",onClick:function(){var i,s=u(a-1);c(s),(i=o.onChange)===null||i===void 0||i.call(0,s)},children:"-"}),(0,n.jsx)(C.Z,{min:l,max:_,value:a,onChange:function(i){var s;(s=o.onChange)===null||s===void 0||s.call(0,i)},controls:!1,style:{textAlign:"center"}}),(0,n.jsx)(M.Z,{type:"text",onClick:function(){var i,s=u(a+1);c(s),(i=o.onChange)===null||i===void 0||i.call(0,s)},children:"+"})]}),trigger:o.active?"hover":"click",children:[" ",(0,n.jsx)(T.Z,{active:o.active,imgSrc:o.imgSrc||"./pics/buttons/brush.png",onClick:o.onClick,children:o.children||"Brush"})]})};b.Z=m},27992:function(h,b,t){"use strict";var W=t(20136),D=t(55241),B=t(77883),C=t(70507),L=t(57663),M=t(71577),I=t(2824),x=t(67294),T=t(61541),e=t(26647),P=t.n(e),n=t(85893),l=1,_=100,r=10;function u(d){return d?d<=l?l:d>=_?_:d:r}var m=function(o){var O=(0,x.useState)(u(o.size)),E=(0,I.Z)(O,2),a=E[0],f=E[1],c=function(i){f(u(i))};return(0,x.useEffect)(function(){c(o.size)},[o.size]),(0,n.jsxs)(D.Z,{overlayClassName:"".concat(P().popover," ").concat(o.disLoc=="left"?P().popoverLeft:""),placement:o.disLoc||"right",content:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(M.Z,{type:"text",onClick:function(){var i,s=u(a-1);c(s),(i=o.onChange)===null||i===void 0||i.call(0,s)},children:"-"}),(0,n.jsx)(C.Z,{min:l,max:_,value:a,onChange:function(i){var s;(s=o.onChange)===null||s===void 0||s.call(0,i)},controls:!1,style:{textAlign:"center"}}),(0,n.jsx)(M.Z,{type:"text",onClick:function(){var i,s=u(a+1);c(s),(i=o.onChange)===null||i===void 0||i.call(0,s)},children:"+"})]}),trigger:"hover",children:[" ",(0,n.jsx)(T.Z,{imgSrc:o.imgSrc,onClick:o.onClick,children:o.children})]})};b.Z=m},13931:function(h,b,t){"use strict";t.d(b,{Z:function(){return T}});var W=t(91220),D=t(11849),B=t(65031),C=t(85893);function L(e){var P=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return P?{r:parseInt(P[1],16),g:parseInt(P[2],16),b:parseInt(P[3],16)}:null}function M(e,P){if(!(!e||!P))return{color:e,points:P}}function I(e,P,n,l,_,r,u){if(!e||!e.lines||!e.lines[0])return[(0,C.jsx)(C.Fragment,{})];var m=e.lines[0].points,d=e.lines[0].color,o=L(d);if(!o)return[(0,C.jsx)(C.Fragment,{})];var O=(u==null?void 0:u.annotationId)==e.annotationId,E=O?.5:.1,a=void 0,f=[];return m.forEach(function(c,v){if(!a){a=c;return}f.push((0,C.jsx)(B.Cd,{onMouseDown:function(){_=="mover"&&r(e)},draggable:_=="mover",onDragMove:function(s){console.log("Circle onDrageMove");var g=s.evt.offsetX/l,A=s.evt.offsetY/l;m[v-1]=g,m[v]=A;var y=(0,D.Z)((0,D.Z)({},e),{},{lines:[{color:d,points:m}]});P(y)},onMouseOver:function(){console.log("Circle onMouseOver"),_=="mover"&&(document.body.style.cursor="pointer")},onMouseOut:function(){console.log("Circle onMouseOut"),document.body.style.cursor="default"},x:a,y:c,radius:5,fill:d})),a=void 0}),[(0,C.jsxs)(B.ZA,{children:[(0,C.jsx)(B.x1,{onMouseOver:function(){_=="mover"&&(document.body.style.cursor="pointer")},onMouseOut:function(){document.body.style.cursor="default"},onClick:function(){_=="mover"&&r(e)},stroke:d,strokeWidth:2,globalCompositeOperation:"source-over",lineCap:"round",points:m,tension:0,closed:!0,fill:"rgba(".concat(o.r,", ").concat(o.g,", ").concat(o.b,", ").concat(E,")")}),f]},e.annotationId)]}function x(e){var P=0,n=(0,W.Z)(e),l;try{for(n.s();!(l=n.n()).done;){var _=l.value;!_||_.annotationId>P&&(P=_.annotationId)}}catch(r){n.e(r)}finally{n.f()}return P}function T(e){var P=function(u,m){var d,o=u.evt.offsetX/m,O=u.evt.offsetY/m,E=M((d=e.currentLabel)===null||d===void 0?void 0:d.color,[o,O]);!E||e.onAnnotationAdd({tool:"polygon",annotationId:x(e.annotations)+1,label:e.currentLabel,lines:[E]})},n=function(u,m){var d,o;if(!!e.currentAnnotation){var O=u.evt.offsetX/m,E=u.evt.offsetY/m,a=e.currentAnnotation.lines||[],f=M((d=e.currentLabel)===null||d===void 0?void 0:d.color,(o=a[0])===null||o===void 0?void 0:o.points.concat([O,E]));if(!!f){var c={tool:"polygon",annotationId:e.currentAnnotation.annotationId,label:e.currentAnnotation.label,lines:[f]};e.onAnnotationModify(c)}}},l=function(u,m){e.currentTool=="polygon"&&(e.currentAnnotation?n(u,m):P(u,m))},_=function(){e.currentTool=="polygon"&&e.onMouseUp()};return{onMouseDown:l,onMouseMove:function(){},onMouseUp:_,createElementsFunc:I}}},29919:function(h,b,t){"use strict";var W=t(67294),D=t(61541),B=t(85893),C=function(M){return(0,B.jsx)(D.Z,{active:M.active,imgSrc:M.imgSrc||"./pics/buttons/polygon.png",onClick:M.onClick,children:M.children})};b.Z=C}}]);
