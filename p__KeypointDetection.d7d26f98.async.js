(self.webpackChunkpp_labeling_frontend=self.webpackChunkpp_labeling_frontend||[]).push([[267],{91220:function(S,P,r){"use strict";r.d(P,{Z:function(){return h}});var L=r(64254);function h(l,E){var a;if(typeof Symbol=="undefined"||l[Symbol.iterator]==null){if(Array.isArray(l)||(a=(0,L.Z)(l))||E&&l&&typeof l.length=="number"){a&&(l=a);var _=0,m=function(){};return{s:m,n:function(){return _>=l.length?{done:!0}:{done:!1,value:l[_++]}},e:function(u){throw u},f:m}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,v=!1,s;return{s:function(){a=l[Symbol.iterator]()},n:function(){var u=a.next();return c=u.done,u},e:function(u){v=!0,s=u},f:function(){try{!c&&a.return!=null&&a.return()}finally{if(v)throw s}}}}},71212:function(S){S.exports={key:"key___HbxlB",mainStage:"mainStage___2kPY7",draw:"draw___1d3zf",pblock:"pblock___13HlD",progress:"progress___1iogf",rightSideBar:"rightSideBar___2SKvQ",finished:"finished___nNiaq"}},82881:function(S,P,r){"use strict";r.r(P);var L=r(57663),h=r(71577),l=r(34669),E=r(54458),a=r(2824),_=r(67294),m=r(71212),c=r.n(m),v=r(8088),s=r(61541),d=r(44434),u=r(5041),k=r(57436),J=r(14836),w=r(29919),H=r(13931),e=r(85893),F=function(){var z=(0,_.useState)(void 0),C=(0,a.Z)(z,2),I=C[0],Q=C[1],Y=(0,_.useState)({color:"",name:""}),T=(0,a.Z)(Y,2),Z=T[0],j=T[1],G=(0,_.useState)(),B=(0,a.Z)(G,2),p=B[0],A=B[1],V=(0,_.useState)([]),N=(0,a.Z)(V,2),f=N[0],M=N[1],X=(0,_.useState)(1),R=(0,a.Z)(X,2),O=R[0],b=R[1],K=function(n){n||b(1),n<.1||n>3?b(1):b(n)},g=function(n){A(n),n!=null&&n.label&&j(n.label)},D=function(n){M(n)};(0,_.useEffect)(function(){localStorage.removeItem("history")},[]);function U(o,n){var t=localStorage.getItem("history"),i=t?JSON.parse(t):{index:-1,items:[]};console.log("history before set: ");var en=JSON.stringify(i);console.log(en);var x={currentAnnotation:n,annotations:o};if(JSON.stringify(i.items[i.index])==JSON.stringify(x)){console.log("equal with latest, do not add to history");return}var W=i.items.splice(0,i.index==0?1:i.index+1);console.log("itemsToKeep: ".concat(JSON.stringify(W))),console.log("itemsToAdd: ".concat(JSON.stringify(x))),i.items=W.concat([x]),i.index++,localStorage.setItem("history",JSON.stringify(i)),console.log("history after set: "),console.log(JSON.stringify(i))}var $=function(){var n=localStorage.getItem("history");if(!n){console.log("no historyStr, skip.");return}var t=JSON.parse(n);if(!!t){if(t.index>=t.items.length-1){console.log("already latest, skip. history.index:".concat(t.index," history.items.length:").concat(t.items.length));return}t.index++,localStorage.setItem("history",JSON.stringify(t)),console.log("After forward. history:".concat(JSON.stringify(t)));var i=t.items[t.index];A(i.currentAnnotation),M(i.annotations)}},q=function(){var n=localStorage.getItem("history");if(!!n){var t=JSON.parse(n);if(!(!t||!t.index)&&!(t.index<=0)){t.index--,localStorage.setItem("history",JSON.stringify(t));var i=t.items[t.index];console.log("after backward: ".concat(JSON.stringify(t))),A(i.currentAnnotation),M(i.annotations)}}},nn=function(n){for(var t=[],i=0;i<f.length;i++)f[i].annotationId==n.annotationId?t.push(n):t.push(f[i]);g(n),D(t),U(t,n)},tn=(0,H.Z)({currentLabel:Z,currentTool:I,annotations:f,currentAnnotation:p,onAnnotationAdd:function(n){var t=f.concat([n]);D(t),p||g(n),U(t,n)},onAnnotationModify:nn}),y=tn;return(0,e.jsxs)(v.Z,{className:c().key,children:[(0,e.jsxs)(d.Z,{children:[(0,e.jsx)(w.Z,{active:I=="polygon",onClick:function(){Q("polygon"),g(void 0)},children:"Polygon"}),(0,e.jsx)(s.Z,{imgSrc:"./pics/buttons/zoom_in.png",onClick:function(){K(O+.1)},children:"Zoom in"}),(0,e.jsx)(s.Z,{imgSrc:"./pics/buttons/zoom_out.png",onClick:function(){K(O-.1)},children:"Zoom out"}),(0,e.jsx)(s.Z,{imgSrc:"./pics/buttons/save.png",children:"Save"}),(0,e.jsx)(s.Z,{imgSrc:"./pics/buttons/move.png",children:"Move"}),(0,e.jsx)(s.Z,{imgSrc:"./pics/buttons/export.png",children:"Export"}),(0,e.jsx)(s.Z,{imgSrc:"./pics/buttons/data_division.png",children:"Divide Data"}),(0,e.jsx)(s.Z,{imgSrc:"./pics/buttons/prev.png",onClick:function(){q()},children:"Undo"}),(0,e.jsx)(s.Z,{imgSrc:"./pics/buttons/next.png",onClick:function(){$()},children:"Redo"}),(0,e.jsx)(s.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:"Clear Mark"})]}),(0,e.jsxs)("div",{className:c().mainStage,children:[(0,e.jsx)("div",{className:c().draw,children:(0,e.jsx)(k.Z,{scale:O,annotations:f,onMouseDown:y.onMouseDown,onMouseMove:y.onMouseMove,onMouseUp:y.onMouseUp,createElementsFunc:y.createElementsFunc})}),(0,e.jsx)("div",{className:c().pblock,children:(0,e.jsx)("div",{className:c().progress,children:(0,e.jsx)(E.Z,{percent:50,status:"active"})})})]}),(0,e.jsxs)("div",{className:c().rightSideBar,children:[(0,e.jsx)("div",{className:c().finished,children:(0,e.jsx)(h.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",block:!0,onClick:function(){g(void 0)},children:"Determine Outline"})}),(0,e.jsx)(u.Z,{selectedLabel:Z,onLabelSelect:function(n){j(n),g(void 0)},onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}}),(0,e.jsx)(J.Z,{selectedAnnotation:p,annotations:f,onAnnotationSelect:function(n){n!=null&&n.delete||g(n)},onAnnotationAdd:function(){},onAnnotationModify:function(){},onAnnotationDelete:function(n){D(f.filter(function(t){return t.annotationId!=n.annotationId})),g(void 0)}})]})]})};P.default=F}}]);
