(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[943],{13237:function(K){K.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___26yoA",toolBarButtonContainer:"toolBarButtonContainer___3TAcy",toolBarButton:"toolBarButton___utzQD",buttonText:"buttonText___10yo3",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___UC85Z",popover:"popover___V2uUa",slider:"slider___293AL",popoverLeft:"popoverLeft___2uQ3J"}},85024:function(K){K.exports={listItem:"listItem___u4Q82",eye:"eye___BwaRm",delete:"delete___31JB_",roundBall:"roundBall___23A7l",popover:"popover___1BNET",annotationId:"annotationId___zAzX4",labelName:"labelName___2ohxn",listItemActive:"listItemActive___2QnA3"}},56159:function(K){K.exports={labelList:"labelList___v7C6K",listHeader:"listHeader___1aY8R",eye:"eye___2MKbp",roundBall:"roundBall___187XH"}},26647:function(K){K.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1FTWb",toolBarButtonContainer:"toolBarButtonContainer___1Vahn",toolBarButton:"toolBarButton___3mR2H",buttonText:"buttonText___Y0WDm",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3lRZ8",popover:"popover___3zzu2",slider:"slider___ALra-",popoverLeft:"popoverLeft___15lGe"}},8978:function(K,$,n){"use strict";n.d($,{Z:function(){return tn}});var k=n(11849),H=n(2824),Y=n(91220),F=n(67294),S=n(85893);function _(e){if(!e||!e.width||!e.color||!e.points||e.points.length<2||e.frontendId==null)return"";var g=e.type=="rubber"?0:e.frontendId;return"".concat(e.width,",").concat(g,",").concat(e.points.join(","))}function u(e){var g,r=e.canvasRef,f=e.annotation,v=f.result;if(!v)return(0,S.jsx)(S.Fragment,{});var b=(g=r.current)===null||g===void 0?void 0:g.getContext("2d");if(!b)return(0,S.jsx)(S.Fragment,{});for(var B=[],t=0,m=0;m<v.length;m++)v.at(m)==","?(B.push(parseFloat(v.slice(t,m))),t=m+1):v.at(m)=="|"?(B.push(parseFloat(v.slice(t,m))),i(B,b,f),B=[],t=m+1):m==v.length-1&&(B.push(parseFloat(v.slice(t,v.length))),i(B,b,f));return(0,S.jsx)(S.Fragment,{})}function i(e,g,r){var f;if(e.length<4){console.log("found incorrect points:",e);return}var v=e[0],b=e[1];if(v==0){var B;C(g,e.slice(2),(B=r.label)===null||B===void 0?void 0:B.color);return}if(b==0){d(g,v,e.slice(2),void 0);return}d(g,v,e.slice(2),(f=r.label)===null||f===void 0?void 0:f.color)}function d(e,g,r,f){e.beginPath(),e.moveTo(r[0],r[1]);for(var v=0;v<=r.length/2-1;v++){var b=r[2*v],B=r[2*v+1];e.lineTo(b,B)}e.lineCap="round",e.lineJoin="round",e.lineWidth=g,f&&(e.strokeStyle=f),e.globalCompositeOperation=f?"source-over":"destination-out",e.stroke()}function C(e,g,r){e.globalCompositeOperation=r?"source-over":"destination-out",r&&(e.fillStyle=r);for(var f=0;f<=g.length/2-1;f++){var v=g[2*f],b=g[2*f+1];e.fillRect(v,b,1,1)}}function I(e){if(!e||e.length==0)return 0;var g=0,r=(0,Y.Z)(e),f;try{for(r.s();!(f=r.n()).done;){var v=f.value;v.frontendId>g&&(g=v.frontendId)}}catch(b){r.e(b)}finally{r.f()}return g}function en(e,g){return e=="rubber"||g==2?"rubber":"brush"}function tn(e){var g=(0,F.useState)(),r=(0,H.Z)(g,2),f=r[0],v=r[1],b=function(A){var M,V;if(!(e.currentTool!="brush"&&e.currentTool!="rubber"||!((M=e.currentLabel)!==null&&M!==void 0&&M.color)||!e.brushSize)){var w=A.mouseX,U=A.mouseY,J=en(e.currentTool,A.e.evt.button);console.log("frontendId: ",e.frontendIdOps.frontendId,"maxId:",I(e.annotations));var Z=e.frontendIdOps.frontendId>0?e.frontendIdOps.frontendId:I(e.annotations)+1;Z!=e.frontendIdOps.frontendId&&e.frontendIdOps.setFrontendId(Z);var nn=_({width:e.brushSize||10,color:(V=e.currentLabel)===null||V===void 0?void 0:V.color,points:[w,U,w,U],type:J,frontendId:Z});if(!!nn){v(J);var j={dataId:e.dataId,label:e.currentLabel,labelId:e.currentLabel.labelId,frontendId:Z,result:nn,type:"brush"};e.onAnnotationAdd(j)}}},B=function(A){var M;if(!(!f||!e.currentAnnotation||!e.currentAnnotation.result||e.currentAnnotation.result.length<2||!((M=e.currentLabel)!==null&&M!==void 0&&M.color))){var V=A.mouseX,w=A.mouseY,U=e.currentAnnotation.result+",".concat(V,",").concat(w);e.onAnnotationModify((0,k.Z)((0,k.Z)({},e.currentAnnotation),{},{result:U}))}},t=function(){e.currentTool!="brush"&&e.currentTool!="rubber"||(v(void 0),e.onMouseUp())};return{onMouseDown:b,onMouseMove:B,onMouseUp:t,drawAnnotation:u}}},57406:function(K,$,n){"use strict";n.d($,{pL:function(){return H},oo:function(){return Y}});var k=n(91220);function H(_){var u=0;if(!_)return u;var i=(0,k.Z)(_),d;try{for(i.s();!(d=i.n()).done;){var C=d.value;!C||!C.frontendId||C.frontendId>u&&(u=C.frontendId)}}catch(I){i.e(I)}finally{i.f()}return u}function Y(_){var u=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(_);return u?{r:parseInt(u[1],16),g:parseInt(u[2],16),b:parseInt(u[3],16)}:null}function F(_){var u=_.toString(16);return u.length==1?"0"+u:u}function S(_,u,i){return"#"+F(_)+F(u)+F(i)}},14836:function(K,$,n){"use strict";n.d($,{Z:function(){return t}});var k=n(54421),H=n(38272),Y=n(57663),F=n(71577),S=n(91220),_=n(67294),u=n(56159),i=n.n(u),d=n(49111),C=n(19650),I=n(2824),en=n(11849),tn=n(85024),e=n.n(tn),g=n(63097),r=n(85893),f=function(A){var M=(0,en.Z)({},A.annotation),V=(0,_.useState)(M.invisible),w=(0,I.Z)(V,2),U=w[0],J=w[1],Z=(0,_.useState)(0),nn=(0,I.Z)(Z,2),j=nn[0],on=nn[1];(0,_.useEffect)(function(){J(A.annotation.invisible)},[A.annotation.invisible]);var X=(0,r.jsxs)(H.ZP.Item,{className:"".concat(e().listItem," ").concat(A.active?e().listItemActive:""),unselectable:"on",onClick:function(){A.onClick(M)},children:[(0,r.jsxs)(C.Z,{align:"center",size:5,children:[(0,r.jsx)("a",{className:e().eye,style:{backgroundImage:U?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(cn){cn.stopPropagation(),J(!U),A.onAnnotationModify(M)}})," ",(0,r.jsx)("span",{className:e().annotationId,children:M.frontendId}),(0,r.jsx)("span",{className:e().labelName,children:M.label.name}),(0,r.jsx)(g.Z,{color:M.label.color})]}),(0,r.jsx)("a",{className:e().delete,onClick:function(cn){cn.stopPropagation();var fn=new Date().getTime();fn-j<300||(on(fn),A.onAnnotationDelete(M))}})]});return X},v=f,b=n(48971),B=function(A){var M=(0,b.YB)(),V=M.formatMessage({id:"component.PPAnnotationList.annotationList"}),w=M.formatMessage({id:"component.PPAnnotationList.addAnnotation"}),U=new Set,J=[],Z=(0,S.Z)(A.annotations),nn;try{for(Z.s();!(nn=Z.n()).done;){var j=nn.value;U.has(j.frontendId)||(J.push(j),U.add(j.frontendId))}}catch(on){Z.e(on)}finally{Z.f()}return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(H.ZP,{className:i().labelList,size:"large",header:(0,r.jsx)("div",{className:i().listHeader,children:V}),bordered:!0,dataSource:J,renderItem:function(X){var q;return(0,r.jsx)(v,{onClick:A.onAnnotationSelect,annotation:X,active:X.frontendId==((q=A.currAnnotation)===null||q===void 0?void 0:q.frontendId),onAnnotationDelete:A.onAnnotationDelete,onAnnotationModify:A.onAnnotationModify})},footer:function(){return A.onAnnotationAdd?(0,r.jsx)("div",{children:(0,r.jsx)(F.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){A.onAnnotationAdd()},block:!0,children:w})}):(0,r.jsx)("div",{})}})})},t=B},27992:function(K,$,n){"use strict";var k=n(20136),H=n(55241),Y=n(13062),F=n(71230),S=n(77883),_=n(70507),u=n(89032),i=n(15746),d=n(66126),C=n(75454),I=n(2824),en=n(67294),tn=n(61541),e=n(26647),g=n.n(e),r=n(85893),f=0,v=100,b=10,B=function(m){var A=(0,en.useState)(nn(m.size)),M=(0,I.Z)(A,2),V=M[0],w=M[1];function U(j){w(nn(j))}var J=m.minSize==null?f:m.minSize,Z=m.maxSize==null?v:m.maxSize;function nn(j){return j==null?b:j<=J?J:j>=Z?Z:j}return(0,en.useEffect)(function(){U(m.size)},[m.size]),(0,r.jsxs)(H.Z,{overlayClassName:"".concat(g().popover," ").concat(m.disLoc=="left"?g().popoverLeft:""),placement:m.disLoc||"right",content:(0,r.jsxs)(F.Z,{children:[(0,r.jsx)(i.Z,{span:16,children:(0,r.jsx)(C.Z,{className:g().slider,value:V,max:Z,min:J,onChange:function(on){var X;(X=m.onChange)===null||X===void 0||X.call(0,on)},tooltipVisible:!1})}),(0,r.jsx)(i.Z,{span:8,children:(0,r.jsx)(_.Z,{min:J,max:Z,value:V,onChange:function(on){var X;(X=m.onChange)===null||X===void 0||X.call(0,on)},step:10})})]}),trigger:"hover",children:[" ",(0,r.jsx)(tn.Z,{imgSrc:m.imgSrc||"",onClick:m.onClick,active:m.active,children:m.children})]})};$.Z=B},10137:function(K,$,n){"use strict";var k=n(34669),H=n(54458),Y=n(67294),F=n(85893),S=function(u){var i,d;return(0,F.jsxs)("div",{className:"progress",children:[(0,F.jsx)(H.Z,{className:"progressBar",percent:Math.ceil(u.project.finished/((i=u.task.all)===null||i===void 0?void 0:i.length)*100),status:"active",showInfo:!1})," ",(0,F.jsxs)("span",{className:"progressDesc",children:["Current labeling ",u.task.currIdx==null?1:u.task.currIdx+1," of"," ",(d=u.task.all)===null||d===void 0?void 0:d.length,". Already labeled ",u.project.finished||0,"."]})]})};$.Z=S},91861:function(K,$,n){"use strict";n.d($,{Ad:function(){return F},k3:function(){return S},Vd:function(){return _},td:function(){return u}});var k=n(34792),H=n(48086),Y=40;function F(){localStorage.removeItem("history"),S([])}function S(i){var d=localStorage.getItem("history"),C=d?JSON.parse(d):{index:-1,items:[]};if(JSON.stringify(C.items[C.index])!=JSON.stringify(i)){var I=C.index>Y?C.index-Y:0,en=C.items.splice(I,C.index==0?1:C.index+1);C.items=en.concat([i]),C.index<=Y?C.index++:C.index=Y+1,localStorage.setItem("history",JSON.stringify(C))}}function _(){var i=localStorage.getItem("history");if(!!i){var d=JSON.parse(i);if(!!d){if(d.index>=d.items.length-1){H.default.error("No next history!");return}return d.index++,localStorage.setItem("history",JSON.stringify(d)),d.items[d.index]}}}function u(){var i=localStorage.getItem("history");if(!!i){var d=JSON.parse(i);if(console.log("history",d),!d||!d.index||d.index<=1){H.default.error("No previous history!");return}return d.index--,localStorage.setItem("history",JSON.stringify(d)),d.items[d.index]}}},89943:function(K,$,n){"use strict";n.r($),n.d($,{MOST_HISTORY_STEPS:function(){return yn},default:function(){return bn}});var k=n(11849),H=n(57663),Y=n(71577),F=n(34792),S=n(48086),_=n(91220),u=n(2824),i=n(67294),d=n(48971),C=n(8088),I=n(61541),en=n(44434),tn=n(27992),e=n(5041),g=n(57436),r=n(14836),f=n(91861),v=n(8978),b=n(65031),B=n(57406),t=n(85893);function m(a,y){if(!(!a||!y))return y.join(",")}function A(a){var y,l=a.annotation;if(!l||!l.result||l.result.length<2||!((y=l.label)!==null&&y!==void 0&&y.color))return(0,t.jsx)(t.Fragment,{});var W=l.result.split(",").map(Number),z=l.label.color,O=(0,B.oo)(z);if(!O)return(0,t.jsx)(t.Fragment,{});var Q=.3,E=void 0,L=[];return W.forEach(function(h,T){if(!E){E=h;return}L.push((0,t.jsx)(b.Cd,{onMouseDown:function(){a.currentTool=="editor"&&a.onSelect(l)},draggable:a.currentTool=="editor",onDragMove:function(D){var sn;D.cancelBubble=!0;var R=(sn=a.stageRef)===null||sn===void 0?void 0:sn.current,P=R.findOne(".baseImage"),x=!1,G=D.target.x();G>P.width()/2&&(G=P.width()/2,x=!0),G<-P.width()/2&&(G=-P.width()/2,x=!0);var ln=D.target.y();ln>P.height()/2&&(ln=P.height()/2,x=!0),ln<-P.height()/2&&(ln=-P.height()/2,x=!0),x&&D.target.setPosition({x:G,y:ln}),W[T-1]=G,W[T]=ln;var dn=(0,k.Z)((0,k.Z)({},l),{},{result:W.join(",")});a.onDrag(dn)},onMouseOver:function(){var D;a.currentTool=="editor"&&(D=a.stageRef)!==null&&D!==void 0&&D.current&&(a.stageRef.current.container().style.cursor="cell")},onMouseOut:function(){var D;(D=a.stageRef)!==null&&D!==void 0&&D.current&&(a.stageRef.current.container().style.cursor="default")},x:E,y:h,radius:5/a.scale,fill:z})),E=void 0}),(0,t.jsxs)(b.ZA,{children:[(0,t.jsx)(b.x1,{onMouseOver:function(){a.currentTool=="editor"&&(document.body.style.cursor="pointer")},onMouseOut:function(){document.body.style.cursor="default"},onClick:function(){a.currentTool=="editor"&&a.onSelect(l)},stroke:z,strokeWidth:2/a.scale,globalCompositeOperation:"source-over",lineCap:"round",points:W,tension:0,closed:!0,fill:"rgba(".concat(O.r,", ").concat(O.g,", ").concat(O.b,", ").concat(Q,")")}),L]},l.frontendId)}function M(a){var y=0;if(!a)return y;var l=(0,_.Z)(a),W;try{for(l.s();!(W=l.n()).done;){var z=W.value;!z||!z.frontendId||z.frontendId>y&&(y=z.frontendId)}}catch(O){l.e(O)}finally{l.f()}return y}function V(a){var y=function(Q,E){var L,h,T=m((L=a.currentLabel)===null||L===void 0?void 0:L.color,[Q,E]);!T||(console.log(T),a.onAnnotationAdd({dataId:a.dataId,type:"polygon",frontendId:M(a.annotations)+1,label:a.currentLabel,labelId:(h=a.currentLabel)===null||h===void 0?void 0:h.labelId,result:T}))},l=function(Q,E){var L;if(!(!a.currentAnnotation||!a.currentAnnotation.result||!((L=a.currentLabel)!==null&&L!==void 0&&L.color))){var h=a.currentAnnotation.result+",".concat(Q,",").concat(E),T=(0,k.Z)((0,k.Z)({},a.currentAnnotation),{},{result:h});a.modifyAnnoByFrontendId(T)}},W=function(Q){if(a.currentTool=="polygon"){var E=Q.mouseX+Q.offsetX,L=Q.mouseY+Q.offsetY;console.log("currentAnnotation:",a.currentAnnotation),a.currentAnnotation?l(E,L):y(E,L)}},z=function(){a.currentTool=="polygon"&&a.onMouseUp&&a.onMouseUp()};return{onMouseDown:W,onMouseMove:function(){},onMouseUp:z,drawAnnotation:A}}var w=n(10137),U=n(45194),J=n(20136),Z=n(55241),nn=n(47673),j=n(24044),on=n(3182),X=n(9715),q=n(93766),cn=n(94043),fn=n.n(cn),Cn=n(37071),In=n(13237),mn=n.n(In),Mn=function(y){var l=(0,U.Gd)(i.useState),W=Cn.Z.getQueryVariable("projectId"),z=(0,U.RZ)(i.useState),O=q.Z.useForm(),Q=(0,u.Z)(O,1),E=Q[0];(0,i.useEffect)(function(){function h(){return T.apply(this,arguments)}function T(){return T=(0,on.Z)(fn().mark(function an(){var D,sn,R;return fn().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,(0,U.bo)();case 2:if(x.sent){x.next=4;break}return x.abrupt("return");case 4:if(l.getAll(),W){x.next=8;break}return S.default.error("Machine Learning settings are specific to every project. Please choose a project first."),x.abrupt("return");case 8:return x.next=10,l.getCurr(W);case 10:R=x.sent,R!=null&&(D=R.otherSettings)!==null&&D!==void 0&&D.mlBackendUrl&&z.setMlBackendUrl(R==null||(sn=R.otherSettings)===null||sn===void 0?void 0:sn.mlBackendUrl);case 12:case"end":return x.stop()}},an)})),T.apply(this,arguments)}h()},[]),(0,i.useEffect)(function(){if(!!l.curr){var h=l.curr.otherSettings?l.curr.otherSettings:{},T=h.models&&h.perviousModel?h.models[h.perviousModel]:{},an={mlBackendUrl:h.mlBackendUrl,modelName:h.perviousModel,trainBatchSize:T.trainBatchSize};E.setFieldsValue(an),h!=null&&h.mlBackendUrl&&z.setMlBackendUrl(h.mlBackendUrl)}},[l.curr]);function L(h){if(console.log("saveMlsettings",l.curr,h),!l.curr){S.default.error("Please select project first!");return}l.curr.otherSettings||(l.curr.otherSettings={}),l.curr.otherSettings.mlBackendUrl=E.getFieldValue("mlBackendUrl"),l.curr.otherSettings.mlModelAbsPath=E.getFieldValue("mlModelAbsPath"),l.curr.otherSettings.mlWeightAbsPath=E.getFieldValue("mlWeightAbsPath"),l.curr.otherSettings.perviousModel=h.modelName,l.update(l.curr.projectId,{otherSettings:l.curr.otherSettings}),S.default.info("Ml setting saved. Let's start trainig or inference!")}return(0,t.jsxs)(Z.Z,{overlayClassName:"".concat(mn().popover," ").concat(mn().popoverLeft),placement:"left",content:(0,t.jsxs)(q.Z,{form:E,layout:"horizontal",size:"large",onFinish:function(T){console.log("form finish",T),L(T)},hidden:l.curr==null,children:[(0,t.jsx)(q.Z.Item,{name:"mlBackendUrl",label:"ML Backend URL",labelCol:{span:6},wrapperCol:{span:18},initialValue:"http://127.0.0.1:1234/model",style:{fontSize:"1.5rem"},children:(0,t.jsx)(j.Z,{placeholder:"http://127.0.0.1:1234/model"})}),(0,t.jsx)(q.Z.Item,{name:"mlModelAbsPath",label:"Model Path",labelCol:{span:6},wrapperCol:{span:18},style:{fontSize:"1.5rem"},children:(0,t.jsx)(j.Z,{placeholder:"Absolute path"})}),(0,t.jsx)(q.Z.Item,{name:"mlWeightAbsPath",label:"Weight Path",labelCol:{span:6},wrapperCol:{span:18},style:{fontSize:"1.5rem"},children:(0,t.jsx)(j.Z,{placeholder:"Absolute path"})}),(0,t.jsx)(q.Z.Item,{wrapperCol:{span:16,offset:6},children:(0,t.jsx)(Y.Z,{htmlType:"submit",type:"primary",style:{height:"2.5rem",width:"48%"},block:!0,children:"Save"})})]}),trigger:"hover",children:[" ",(0,t.jsx)(I.Z,{imgSrc:y.imgSrc||"",onClick:y.onClick,active:y.active,children:y.children})]})},_n=Mn,yn=40,Sn=function(){var y,l=(0,i.useState)(0),W=(0,u.Z)(l,2),z=W[0],O=W[1],Q=(0,i.useState)(10),E=(0,u.Z)(Q,2),L=E[0],h=E[1],T=(0,i.useState)(60),an=(0,u.Z)(T,2),D=an[0],sn=an[1],R=(0,U.$L)(i.useState,i.useEffect,{effectTrigger:{postTaskChange:function(){return(0,f.Ad)()}},label:{oneHot:!0,postSelect:function(){c.setCurr(void 0),O(0)},preUnsetCurr:xn},tool:{defaultTool:"mover"},task:{push:!0}}),P=R.tool,x=R.task,G=R.data,ln=R.project,dn=R.scale,un=R.label,c=R.annotation;function xn(){c.setCurr(void 0),O(0),P.setCurr("mover")}var p=function(o){c.setCurr(o),o!=null&&o.frontendId?O(o.frontendId):O(0)};(0,i.useEffect)(function(){(0,f.Ad)()},[]),(0,i.useEffect)(function(){var s=setInterval(function(){var o;console.log("triggered!",G),c.pushToBackend((o=G.curr)===null||o===void 0?void 0:o.dataId)},2e4);return function(){clearInterval(s)}},[c,G,G.curr]);var Bn=function(o){!o||(c.all.pop(),c.all.push(o),p(o),c.setAll(c.all))},gn=function(o){var rn=[],vn=(0,_.Z)(c.all),Pn;try{for(vn.s();!(Pn=vn.n()).done;){var An=Pn.value;An.frontendId==o.frontendId?rn.push(o):rn.push(An)}}catch(Ln){vn.e(Ln)}finally{vn.f()}p(o),c.setAll(rn)},hn={dataId:(y=G.curr)===null||y===void 0?void 0:y.dataId,currentLabel:un.curr,brushSize:L,scale:dn.curr,currentTool:P.curr,annotations:c.all,currentAnnotation:c.curr,onAnnotationAdd:function(o){var rn=c.all.concat([o]);c.setAll(rn),p(o)},onAnnotationModify:Bn,modifyAnnoByFrontendId:gn,onMouseUp:function(){(0,f.k3)({annos:c.all,currAnno:c.curr})},frontendIdOps:{frontendId:z,setFrontendId:O}},N=(0,d.YB)(),jn=(0,v.Z)(hn),On=V(hn),En={polygon:On,brush:jn};return(0,t.jsxs)(C.Z,{className:"segment",children:[(0,t.jsxs)(en.Z,{children:[(0,t.jsx)(I.Z,{imgSrc:"./pics/buttons/polygon.png",active:P.curr=="polygon",onClick:function(){if(!un.curr){S.default.error("Please select a label first");return}P.setCurr("polygon"),p(void 0)},children:N.formatMessage({id:"pages.toolBar.polygon"})}),(0,t.jsx)(I.Z,{active:P.curr=="editor",imgSrc:"./pics/buttons/edit.png",onClick:function(){P.setCurr("editor"),p(void 0)},children:N.formatMessage({id:"pages.toolBar.edit"})}),(0,t.jsx)(tn.Z,{imgSrc:"./pics/buttons/brush.png",size:L,active:P.curr=="brush",onClick:function(){if(!un.curr){S.default.error("Please select a label first");return}P.curr!="rubber"&&P.curr!="brush"&&p(void 0),P.setCurr("brush")},onChange:function(o){h(o)},children:N.formatMessage({id:"pages.toolBar.brush"})}),(0,t.jsx)(tn.Z,{size:L,active:P.curr=="rubber",onClick:function(){P.curr!="rubber"&&P.curr!="brush"&&p(void 0),P.setCurr("rubber")},onChange:function(o){h(o)},imgSrc:"./pics/buttons/rubber.png",children:N.formatMessage({id:"pages.toolBar.rubber"})}),(0,t.jsx)(I.Z,{imgSrc:"./pics/buttons/zoom_in.png",onClick:function(){dn.change(.1)},children:N.formatMessage({id:"pages.toolBar.zoomIn"})}),(0,t.jsx)(I.Z,{imgSrc:"./pics/buttons/zoom_out.png",onClick:function(){dn.change(-.1)},children:N.formatMessage({id:"pages.toolBar.zoomOut"})}),(0,t.jsx)(I.Z,{imgSrc:"./pics/buttons/save.png",onClick:function(){var o;c.pushToBackend((o=G.curr)===null||o===void 0?void 0:o.dataId)},children:N.formatMessage({id:"pages.toolBar.save"})}),(0,t.jsx)(I.Z,{active:P.curr=="mover",imgSrc:"./pics/buttons/move.png",onClick:function(){P.setCurr("mover")},children:N.formatMessage({id:"pages.toolBar.move"})}),(0,t.jsx)(I.Z,{imgSrc:"./pics/buttons/prev.png",onClick:function(){var o=(0,f.td)();o&&(c.setAll(o.annos),p(o.currAnno))},children:N.formatMessage({id:"pages.toolBar.unDo"})}),(0,t.jsx)(I.Z,{imgSrc:"./pics/buttons/next.png",onClick:function(){var o=(0,f.Vd)();o&&(c.setAll(o.annos),p(o.currAnno))},children:N.formatMessage({id:"pages.toolBar.reDo"})}),(0,t.jsx)(I.Z,{imgSrc:"./pics/buttons/clear_mark.png",onClick:function(){c.setAll([]),c.setCurr(void 0)},children:N.formatMessage({id:"pages.toolBar.clearMark"})})]}),(0,t.jsxs)("div",{id:"dr",className:"mainStage",children:[(0,t.jsx)("div",{className:"draw",children:(0,t.jsx)(g.Z,{scale:dn.curr,annotations:c.all,currentTool:P.curr,currentAnnotation:c.curr,setCurrentAnnotation:p,onAnnotationModify:gn,onAnnotationModifyComplete:function(){(0,f.k3)({annos:c.all,currAnno:c.curr})},frontendIdOps:{frontendId:z,setFrontendId:O},imgSrc:G.imgSrc,transparency:D,onAnnotationAdd:function(o){var rn=c.all.concat([o]);c.setAll(rn),c.curr||p(o)},drawTool:En})}),(0,t.jsx)("div",{className:"pblock",children:(0,t.jsx)(w.Z,{task:x,project:ln})}),(0,t.jsx)("div",{className:"prevTask",onClick:function(){!x.prevTask()||p(void 0)}}),(0,t.jsx)("div",{className:"nextTask",onClick:function(){!x.nextTask()||p(void 0)}})]}),(0,t.jsxs)(en.Z,{disLoc:"right",children:[(0,t.jsx)(_n,{imgSrc:"./pics/buttons/intelligent_interaction.png",onClick:function(){return setShowPPAIModal(!0)},children:N.formatMessage({id:"pages.toolBar.interactor"})}),(0,t.jsx)(tn.Z,{imgSrc:"./pics/buttons/threshold.png",disLoc:"left",children:N.formatMessage({id:"pages.toolBar.segmentThreshold"})}),(0,t.jsx)(tn.Z,{imgSrc:"./pics/buttons/alpha.png",disLoc:"left",size:D,maxSize:100,minSize:0,onChange:function(o){sn(o)},children:N.formatMessage({id:"pages.toolBar.transparency"})}),(0,t.jsx)(tn.Z,{imgSrc:"./pics/buttons/radius.png",disLoc:"left",children:N.formatMessage({id:"pages.toolBar.visualRadius"})}),(0,t.jsx)(I.Z,{imgSrc:"./pics/buttons/data_division.png",onClick:function(){d.m8.push("/project_overview?projectId=".concat(ln.curr.projectId))},children:"Project Overview"})]}),(0,t.jsxs)("div",{className:"rightSideBar",children:[(0,t.jsx)("div",{className:"determinOutline",children:(0,t.jsx)(Y.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",block:!0,onClick:function(){p(void 0)},children:N.formatMessage({id:"pages.toolBar.determineOutline"})})}),(0,t.jsx)(e.Z,{hideColorPicker:!1,labels:un.all,activeIds:un.activeIds,onLabelSelect:un.onSelect,onLabelModify:function(){},onLabelDelete:un.remove,onLabelAdd:function(o){un.create((0,k.Z)((0,k.Z)({},o),{},{projectId:ln.curr.projectId})).then(function(rn){p(void 0),un.setCurr(rn)})}}),(0,t.jsx)(r.Z,{currAnnotation:c.curr,annotations:c.all,onAnnotationSelect:function(o){o!=null&&o.delete||p(o)},onAnnotationAdd:function(){p(void 0)},onAnnotationModify:function(){},onAnnotationDelete:function(o){c.setAll(c.all.filter(function(rn){return rn.frontendId!=o.frontendId})),p(void 0)}})]})]})},bn=Sn}}]);
