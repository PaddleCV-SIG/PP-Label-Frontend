(self.webpackChunkpp_labeling_frontend=self.webpackChunkpp_labeling_frontend||[]).push([[540],{26647:function(y){y.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1FTWb",toolBarButtonContainer:"toolBarButtonContainer___1Vahn",toolBarButton:"toolBarButton___3mR2H",buttonText:"buttonText___Y0WDm",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3lRZ8",popover:"popover___3zzu2"}},54777:function(y){y.exports={segment:"segment___1YMcl",mainStage:"mainStage___2otee",rightSideBar:"rightSideBar___2X7jK",determinOutline:"determinOutline___2ls57"}},49911:function(y,R,i){"use strict";i.r(R),i.d(R,{default:function(){return vn}});var xn=i(57663),z=i(71577),C=i(2824),S=i(67294),K=i(54777),j=i.n(K),V=i(8088),v=i(61541),G=i(44434),N=i(58967),bn=i(20136),J=i(55241),Cn=i(77883),Q=i(70507),w=i(26647),q=i.n(w),n=i(85893),I=1,T=100,_=10;function P(o){return o?o<=I?I:o>=T?T:o:_}var nn=function(t){var c=(0,S.useState)(P(t.size)),a=(0,C.Z)(c,2),d=a[0],f=a[1];return(0,S.useEffect)(function(){f(P(t.size))},[t.size]),(0,n.jsxs)(J.Z,{overlayClassName:q().popover,placement:"right",content:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(z.Z,{type:"text",onClick:function(){var r,l=P(d-1);f(l),(r=t.onChange)===null||r===void 0||r.call(0,l)},children:"-"}),(0,n.jsx)(Q.Z,{min:I,max:T,value:d,onChange:function(r){var l;(l=t.onChange)===null||l===void 0||l.call(0,r)},controls:!1,style:{textAlign:"center"}}),(0,n.jsx)(z.Z,{type:"text",onClick:function(){var r,l=P(d+1);f(l),(r=t.onChange)===null||r===void 0||r.call(0,l)},children:"+"})]}),trigger:t.active?"hover":"click",children:[" ",(0,n.jsx)(v.Z,{active:t.active,imgSrc:t.imgSrc||"./pics/buttons/brush.png",onClick:t.onClick,children:t.children||"Brush"})]})},D=nn,tn=i(5041),on=i(57436),en=i(14836),an=function(t){return(0,n.jsx)(v.Z,{active:t.active,imgSrc:t.imgSrc||"./pics/buttons/polygon.png",onClick:t.onClick,children:t.children})},rn=an,ln=i(43801),un=i(91220),W=i(65031);function sn(o){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function $(o,t){if(!(!o||!t)){var c=sn(o);if(!!c){var a=void 0,d=[];return t.forEach(function(f){if(!a){a=f;return}d.push((0,n.jsx)(W.Cd,{x:a,y:f,radius:5,fill:o})),a=void 0}),{color:o,points:t,element:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(W.x1,{stroke:o,strokeWidth:2,globalCompositeOperation:"source-over",lineCap:"round",points:t,tension:.01,closed:!0,fill:"rgba(".concat(c.r,", ").concat(c.g,", ").concat(c.b,", 0.5)")}),d]})}}}}function cn(o){var t=0,c=(0,un.Z)(o),a;try{for(c.s();!(a=c.n()).done;){var d=a.value;!d||d.annotationId>t&&(t=d.annotationId)}}catch(f){c.e(f)}finally{c.f()}return t}function dn(o){var t=function(s,r){var l,x=s.evt.offsetX/r,b=s.evt.offsetY/r;console.log("offsetX: ".concat(s.evt.offsetX,", offsetY: ").concat(s.evt.offsetY,", mouseX: ").concat(x,", mouseY: ").concat(b));var g=$((l=o.currentLabel)===null||l===void 0?void 0:l.color,[x,b]);!g||o.onAnnotationAdd({annotationId:cn(o.annotations)+1,label:o.currentLabel,lines:[g]})},c=function(s,r){var l,x;if(!!o.currentAnnotation){var b=s.evt.offsetX/r,g=s.evt.offsetY/r;console.log("offsetX: ".concat(s.evt.offsetX,", offsetY: ").concat(s.evt.offsetY,", mouseX: ").concat(b,", mouseY: ").concat(g));var Y=o.currentAnnotation.lines||[],Z=$((l=o.currentLabel)===null||l===void 0?void 0:l.color,(x=Y[0])===null||x===void 0?void 0:x.points.concat([b,g]));if(!!Z){var p={annotationId:o.currentAnnotation.annotationId,label:o.currentAnnotation.label,lines:[Z]};o.onAnnotationModify(p)}}},a=function(s,r){console.log(o.currentTool),o.currentTool=="polygon"&&(o.currentAnnotation?c(s,r):t(s,r))},d=function(){o.currentTool=="polygon"};return{onMouseDown:a,onMouseMove:function(){},onMouseUp:d}}var fn=function(){var t=(0,S.useState)(void 0),c=(0,C.Z)(t,2),a=c[0],d=c[1],f=(0,S.useState)({color:"",name:""}),s=(0,C.Z)(f,2),r=s[0],l=s[1],x=(0,S.useState)(),b=(0,C.Z)(x,2),g=b[0],Y=b[1],Z=(0,S.useState)([]),p=(0,C.Z)(Z,2),h=p[0],M=p[1],gn=(0,S.useState)(10),k=(0,C.Z)(gn,2),B=k[0],U=k[1],hn=(0,S.useState)(1),E=(0,C.Z)(hn,2),X=E[0],F=E[1],m=function(e){Y(e),e!=null&&e.label&&l(e.label)},H=function(e){for(var A=[],L=0;L<h.length;L++)h[L].annotationId==e.annotationId?A.push(e):A.push(h[L]);m(e),M(A)},mn=(0,ln.Z)({currentLabel:r,brushSize:B,currentTool:a,annotations:h,currentAnnotation:g,onAnnotationAdd:function(e){M(h.concat([e])),g||m(e)},onAnnotationModify:H}),Sn=dn({currentLabel:r,brushSize:B,currentTool:a,annotations:h,currentAnnotation:g,onAnnotationAdd:function(e){M(h.concat([e])),g||m(e)},onAnnotationModify:H}),O=a=="polygon"?Sn:mn;return(0,n.jsxs)(V.Z,{className:j().segment,children:[(0,n.jsxs)(G.Z,{children:[(0,n.jsx)(v.Z,{imgSrc:"./pics/buttons/intelligent_interaction.png",children:"Intelligent Interaction"}),(0,n.jsx)(rn,{active:a=="polygon",onClick:function(){d("polygon"),m(void 0)},children:"Polygon"}),(0,n.jsx)(N.Z,{size:B,active:a=="brush",onClick:function(){a!="rubber"&&a!="brush"&&m(void 0),d("brush")},onChange:function(e){U(e)},children:"Brush"}),(0,n.jsx)(N.Z,{size:B,active:a=="rubber",onClick:function(){a!="rubber"&&a!="brush"&&m(void 0),d("rubber")},onChange:function(e){U(e)},imgSrc:"./pics/buttons/rubber.png",children:"Rubber"}),(0,n.jsx)(v.Z,{imgSrc:"./pics/buttons/zoom_in.png",onClick:function(){F(X+.1)},children:"Zoom in"}),(0,n.jsx)(v.Z,{imgSrc:"./pics/buttons/zoom_out.png",onClick:function(){F(X-.1)},children:"Zoom out"}),(0,n.jsx)(v.Z,{imgSrc:"./pics/buttons/save.png",children:"Save"}),(0,n.jsx)(v.Z,{imgSrc:"./pics/buttons/move.png",children:"Move"}),(0,n.jsx)(v.Z,{imgSrc:"./pics/buttons/export.png",children:"Export"}),(0,n.jsx)(v.Z,{imgSrc:"./pics/buttons/data_division.png",children:"Divide Data"}),(0,n.jsx)(v.Z,{imgSrc:"./pics/buttons/prev.png",children:"Undo"}),(0,n.jsx)(v.Z,{imgSrc:"./pics/buttons/next.png",children:"Redo"}),(0,n.jsx)(v.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:"Clear Mark"}),(0,n.jsx)(D,{imgSrc:"./pics/buttons/threshold.png",children:"Segment Threshold"}),(0,n.jsx)(D,{imgSrc:"./pics/buttons/alpha.png",children:"Diaphaneity"}),(0,n.jsx)(D,{imgSrc:"./pics/buttons/radius.png",children:"Visual Radius"})]}),(0,n.jsx)("div",{className:j().mainStage,children:(0,n.jsx)(on.Z,{scale:X,annotations:h,onMouseDown:O.onMouseDown,onMouseMove:O.onMouseMove,onMouseUp:O.onMouseUp})}),(0,n.jsxs)("div",{className:j().rightSideBar,children:[(0,n.jsx)("div",{className:j().determinOutline,children:(0,n.jsx)(z.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",block:!0,onClick:function(){m(void 0)},children:"Determine Outline"})}),(0,n.jsx)(tn.Z,{selectedLabel:r,onLabelSelect:function(e){l(e),m(void 0)},onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}}),(0,n.jsx)(en.Z,{selectedAnnotation:g,annotations:h,onAnnotationSelect:function(e){e!=null&&e.delete||m(e)},onAnnotationAdd:function(){},onAnnotationModify:function(){},onAnnotationDelete:function(e){M(h.filter(function(A){return A.annotationId!=e.annotationId})),m(void 0)}})]})]})},vn=fn}}]);
