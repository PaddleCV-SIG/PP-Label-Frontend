(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[498],{91220:function(k,Z,e){"use strict";e.d(Z,{Z:function(){return P}});var j=e(64254);function P(a,c){var E;if(typeof Symbol=="undefined"||a[Symbol.iterator]==null){if(Array.isArray(a)||(E=(0,j.Z)(a))||c&&a&&typeof a.length=="number"){E&&(a=E);var I=0,A=function(){};return{s:A,n:function(){return I>=a.length?{done:!0}:{done:!1,value:a[I++]}},e:function(p){throw p},f:A}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var M=!0,T=!1,h;return{s:function(){E=a[Symbol.iterator]()},n:function(){var p=E.next();return M=p.done,p},e:function(p){T=!0,h=p},f:function(){try{!M&&E.return!=null&&E.return()}finally{if(T)throw h}}}}},41435:function(k,Z,e){"use strict";e.d(Z,{Z:function(){return I}});var j=e(94663),P=e(80112);function a(A){return Function.toString.call(A).indexOf("[native code]")!==-1}var c=e(18597);function E(A,M,T){return(0,c.Z)()?E=Reflect.construct:E=function(b,p,O){var B=[null];B.push.apply(B,p);var S=Function.bind.apply(b,B),D=new S;return O&&(0,P.Z)(D,O.prototype),D},E.apply(null,arguments)}function I(A){var M=typeof Map=="function"?new Map:void 0;return I=function(h){if(h===null||!a(h))return h;if(typeof h!="function")throw new TypeError("Super expression must either be null or a function");if(typeof M!="undefined"){if(M.has(h))return M.get(h);M.set(h,b)}function b(){return E(h,arguments,(0,j.Z)(this).constructor)}return b.prototype=Object.create(h.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),(0,P.Z)(b,h)},I(A)}},48627:function(k){k.exports={container:"container___2RXc3"}},18398:function(k){k.exports={_ppcard:"_ppcard___1sR0b",title:"title___2fjZe",shadow:"shadow___3SaOl",main:"main___IOVJu",block_l:"block_l___1ywNh",block_r:"block_r___Sg4L7",goup:"goup___1vznA"}},44943:function(){},11428:function(k,Z,e){"use strict";var j=e(67294),P=e(48627),a=e.n(P),c=e(85893),E=function(A){return(0,c.jsx)("div",{className:"".concat(a().container),style:{backgroundImage:"url(./pics/background.png)"},children:A.children})};Z.Z=E},68370:function(k,Z,e){"use strict";e.r(Z),e.d(Z,{default:function(){return l}});var j=e(34792),P=e(48086),a=e(67294),c=e(48971),E=e(57663),I=e(71577),A=e(88983),M=e(47933),T=e(47673),h=e(24044),b=e(9715),p=e(93766),O=e(2824),B=e(89032),S=e(15746),D=e(11849),y=e(13062),g=e(71230),x=e(11700),V=e(18398),K=e.n(V),Y=e(37071),z=e(91156),q=e(64322),u=e(85893),w=function(f){return(0,u.jsxs)("div",{className:K()._ppcard,style:f.style,children:[(0,u.jsx)(g.Z,{className:K().titleRow,style:{display:f.title?void 0:"none"},children:(0,u.jsx)(x.Z,{className:K().title,children:f.title})}),(0,u.jsx)(g.Z,{style:{marginTop:26},children:(0,u.jsx)(S.Z,{span:24,style:(0,D.Z)({paddingLeft:30,paddingRight:30,textAlign:"center"},f.innerStyle),children:f.children})})]})},ee=function(f){var U=(0,q.Gd)(a.useState),R=Y.Z.getQueryVariable("projectId");console.log("render ppcreater",f,R);var L=(0,c.YB)().formatMessage({id:"component.PPCreater.projectName"}),$=(0,c.YB)().formatMessage({id:"component.PPCreater.datasePath"}),H=(0,c.YB)().formatMessage({id:"component.PPCreater.description"}),Q=(0,c.YB)().formatMessage({id:"component.PPCreater.maxPoints"}),n=(0,c.YB)().formatMessage({id:"component.PPCreater.annotationMode"}),t=(0,c.YB)().formatMessage({id:"component.PPCreater.pixelMode"}),s=(0,c.YB)().formatMessage({id:"component.PPCreater.polygonMode"}),i=(0,c.YB)().formatMessage({id:"component.PPCreater.update"}),r=(0,c.YB)().formatMessage({id:"component.PPCreater.create"}),m=(0,c.YB)().formatMessage({id:"component.PPCreater.cancel"}),N=function(F){R?U.update(R,{name:F.name,description:F.description,dataDir:F.dataDir,labelDir:F.labelDir}).then(function(){c.m8.push("/welcome")}):U.create({name:F.name,description:F.description,taskCategoryId:z.ux[f.taskCategory].id,dataDir:F.dataDir,labelDir:F.labelDir}).then(function(re){c.m8.push("/".concat((0,z.LV)(f.taskCategory),"?projectId=").concat(re.projectId))}).catch(function(){})},te=f.taskCategory?z.ux[f.taskCategory].name:null,C=p.Z.useForm(),J=(0,O.Z)(C,1),X=J[0];return(0,a.useEffect)(function(){U.getCurr(R).then(function(W){console.log("project",W);var F={name:W==null?void 0:W.name,description:W==null?void 0:W.description,dataDir:W==null?void 0:W.dataDir};X.setFieldsValue(F)})},[]),(0,u.jsxs)("div",{className:K().shadow,style:f.style,children:[(0,u.jsx)("div",{id:"left",className:K().block_l,children:(0,u.jsx)(w,{title:te,style:{height:760,padding:"1.25rem 0"},children:(0,u.jsxs)(p.Z,{form:X,layout:"horizontal",size:"large",style:{marginTop:"5.69rem"},onFinish:function(F){N(F)},children:[(0,u.jsx)(p.Z.Item,{name:"name",label:L,labelCol:{span:6},wrapperCol:{span:16},rules:[{required:!0,message:"Please input project name!"}],style:{fontSize:"1.5rem"},children:(0,u.jsx)(h.Z,{size:"large",placeholder:"Words or numbers",style:{height:"3.13rem"}})}),(0,u.jsx)(p.Z.Item,{name:"dataDir",label:$,labelCol:{span:6},wrapperCol:{span:16},rules:[{required:!0,message:"Please input dataset path!"}],style:{fontSize:"1.5rem"},children:(0,u.jsx)(h.Z,{size:"large",placeholder:"Dataset Path",style:{height:"3.13rem"},disabled:R!=null})}),(0,u.jsx)(p.Z.Item,{name:"description",label:H,labelCol:{span:6},wrapperCol:{span:16},rules:[{required:!1}],style:{fontSize:"1.5rem"},children:(0,u.jsx)(h.Z,{size:"large",placeholder:"Words or numbers",style:{height:"3.13rem"}})}),(0,u.jsx)(p.Z.Item,{name:"maxPoints",label:Q,labelCol:{span:6},wrapperCol:{span:16},rules:[{required:f.taskCategory=="keypointDetection",message:"Please input max points!"}],style:{fontSize:"1.5rem",display:f.taskCategory=="keypointDetection"?void 0:"none"},children:(0,u.jsx)(h.Z,{size:"large",placeholder:"Numbers (Int)",style:{height:"3.13rem"}})}),(0,u.jsx)(p.Z.Item,{name:"segmentationMode",label:n,labelCol:{span:6},wrapperCol:{span:16},rules:[{required:f.taskCategory=="semanticSegmentation",message:"Please select task category!"}],style:{fontSize:"1.5rem",display:f.taskCategory=="semanticSegmentation"?void 0:"none"},children:(0,u.jsx)("div",{className:K().goup,children:(0,u.jsxs)(M.ZP.Group,{defaultValue:1,size:"large",style:{height:"3.13rem"},children:[(0,u.jsx)(M.ZP,{value:1,children:t}),(0,u.jsx)(M.ZP,{value:2,children:s})]})})}),(0,u.jsxs)(p.Z.Item,{wrapperCol:{span:16,offset:6},children:[(0,u.jsx)(I.Z,{htmlType:"submit",type:"primary",style:{height:"2.5rem",width:"48%"},block:!0,children:R?i:r}),"\xA0\xA0",(0,u.jsx)(I.Z,{htmlType:"button",style:{height:"2.5rem",width:"48%"},block:!0,onClick:function(){c.m8.push("/welcome")},children:m})]})]})})}),(0,u.jsx)("div",{id:"right",className:K().block_r,children:(0,u.jsx)(w,{style:{height:"43.63rem",padding:"0.5rem 0"},children:(0,u.jsx)("img",{src:f.imgSrc,style:{height:"43.63rem",width:"60rem"}})})})]})},o=ee,v=e(11428),_=function(){var f=(0,q.os)(Y.Z.getQueryVariable("taskCategory"));return f||(P.default.error("Task Category not present in url"),c.m8.push("/")),f in z.ux||(P.default.error("Invalid task category "+f),c.m8.push("/")),(0,u.jsx)(v.Z,{children:(0,u.jsx)(o,{imgSrc:"./pics/illustration.jpg",taskCategory:f})})},l=_},91156:function(k,Z,e){"use strict";e.d(Z,{F$:function(){return B},LV:function(){return K},ux:function(){return z}});var j=e(34792),P=e(94043),a=e.n(P),c=e(37071),E=e(81139),I=e(63891),A=e(13868),M=e(70676),T=e(54919),h=e(6276),b=e(59124),p=localStorage.getItem("basePath"),O=new E.VK(p?{basePath:p}:void 0),B=new I.U(O),S=new A.v(O),D=new T.W(O),y=new h.s(O),g=new b.C(O);function x(n){return JSON.parse(JSON.stringify(n))}var V=function(t,s,i){if(!i)return-1;for(var r=0;r<s.length;r++)if(t[i]==s[r][i])return r;return-1};function K(n){return n&&n.replace(/[A-Z]/g,function(t){return"_".concat(t.toLowerCase())})}function Y(n){return n&&(n.toLowerCase().replace(/([-_][a-z])/g,function(t){return t.toUpperCase().replace("-","").replace("_","")}),n)}var z={classification:{name:"Image Classification",avatar:"./pics/classification.jpg",id:1},detection:{name:"Detection",avatar:"./pics/object_detection.jpg",id:2},semanticSegmentation:{name:"Semantic Segmentation",avatar:"./pics/semantic_segmentation.jpg",id:3},instanceSegmentation:{name:"Instance Segmentation",avatar:"./pics/instance_segmentation.jpg",id:4},keypointDetection:{name:"Keypoint Detection",avatar:"./pics/keypoint_detection.jpg",id:5}},q=function(t,s){var i=_toConsumableArray(t);for(var r in t)i[r].active=!1;for(var m in t)V(t[m],s,"labelId")!=-1&&(i[m].active=!0);return console.log("activa labs",i),i};function u(n){return w.apply(this,arguments)}function w(){return w=_asyncToGenerator(_regeneratorRuntime.mark(function n(t){return _regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:B.getAll().then(function(r){console.log("get all projects",x(r)),t(x(r))}).catch(function(r){serviceUtils.parseError(r,_message)});case 1:case"end":return i.stop()}},n)})),w.apply(this,arguments)}function ee(n){return o.apply(this,arguments)}function o(){return o=_asyncToGenerator(_regeneratorRuntime.mark(function n(t){var s,i=arguments;return _regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:s=i.length>1&&i[1]!==void 0?i[1]:null,console.log("get project id ",t),B.get(t).then(function(N){return console.log("getProject res",N),s&&s(N),N}).catch(function(N){console.log("getProject err",N),serviceUtils.parseError(N,_message)});case 3:case"end":return m.stop()}},n)})),o.apply(this,arguments)}function v(n,t){return _.apply(this,arguments)}function _(){return _=_asyncToGenerator(_regeneratorRuntime.mark(function n(t,s){return _regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:console.log("delete pj, pjid",t),B.remove(t).then(function(m){console.log("delete project",m),u(s)}).catch(function(m){console.log(m),serviceUtils.parseError(m,_message)});case 2:case"end":return r.stop()}},n)})),_.apply(this,arguments)}function l(n){return d.apply(this,arguments)}function d(){return d=_asyncToGenerator(_regeneratorRuntime.mark(function n(t){return _regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:y.getAll().then(function(r){console.log("got tasks",r),t&&t(r)}).catch(function(r){console.log("get tasks err",r),serviceUtils.parseError(r,_message)});case 1:case"end":return i.stop()}},n)})),d.apply(this,arguments)}function f(n,t){return U.apply(this,arguments)}function U(){return U=_asyncToGenerator(_regeneratorRuntime.mark(function n(t,s){return _regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:console.log("get task id",t),y.get(t).then(function(m){console.log("got task ",m),s&&s(m)});case 2:case"end":return r.stop()}},n)})),U.apply(this,arguments)}function R(n){return L.apply(this,arguments)}function L(){return L=_asyncToGenerator(_regeneratorRuntime.mark(function n(t){var s,i,r,m,N;return _regeneratorRuntime.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(t){C.next=2;break}return C.abrupt("return",0);case 2:return C.prev=2,C.next=5,B.getTasks(t);case 5:s=C.sent,i=0,r=_createForOfIteratorHelper(s);try{for(r.s();!(m=r.n()).done;)N=m.value,N.annotations.length!=0&&i++}catch(J){r.e(J)}finally{r.f()}return console.log("progress",Math.ceil(i/s.length*100)),C.abrupt("return",Math.ceil(i/s.length*100));case 13:return C.prev=13,C.t0=C.catch(2),console.log("get progress err",C.t0),serviceUtils.parseError(C.t0,_message),C.abrupt("return",0);case 18:case"end":return C.stop()}},n,null,[[2,13]])})),L.apply(this,arguments)}function $(n,t){console.log("getLabels projectid",n),!!n&&B.getLabels(n).then(function(s){console.log("got labels ",s),t(x(s))}).catch(function(s){serviceUtils.parseError(s,_message)})}function H(n,t,s){var i=LabelFromJSON(t);i.projectId=n,S.create(i).then(function(){$(n,s)}).catch(function(r){serviceUtils.parseError(r,_message)})}function Q(n,t){console.log("delete label",n),S.remove(n.labelId).then(function(){_message.error("Label "+n.name+" is deleted!"),$(n.projectId,t)}).catch(function(s){serviceUtils.parseError(s,_message)})}},5467:function(k,Z,e){"use strict";e.d(Z,{Z:function(){return j}});function j(P){return Object.keys(P).reduce(function(a,c){return(c.substr(0,5)==="data-"||c.substr(0,5)==="aria-"||c==="role")&&c.substr(0,7)!=="data-__"&&(a[c]=P[c]),a},{})}},47933:function(k,Z,e){"use strict";e.d(Z,{ZP:function(){return ee}});var j=e(96156),P=e(22122),a=e(67294),c=e(50132),E=e(94184),I=e.n(E),A=e(42550),M=e(65632),T=a.createContext(null),h=T.Provider,b=T,p=e(21687),O=function(o,v){var _={};for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&v.indexOf(l)<0&&(_[l]=o[l]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,l=Object.getOwnPropertySymbols(o);d<l.length;d++)v.indexOf(l[d])<0&&Object.prototype.propertyIsEnumerable.call(o,l[d])&&(_[l[d]]=o[l[d]]);return _},B=function(v,_){var l,d=a.useContext(b),f=a.useContext(M.E_),U=f.getPrefixCls,R=f.direction,L=a.useRef(),$=(0,A.sQ)(_,L);a.useEffect(function(){(0,p.Z)(!("optionType"in v),"Radio","`optionType` is only support in Radio.Group.")},[]);var H=function(C){var J,X;(J=v.onChange)===null||J===void 0||J.call(v,C),(X=d==null?void 0:d.onChange)===null||X===void 0||X.call(d,C)},Q=v.prefixCls,n=v.className,t=v.children,s=v.style,i=O(v,["prefixCls","className","children","style"]),r=U("radio",Q),m=(0,P.Z)({},i);d&&(m.name=d.name,m.onChange=H,m.checked=v.value===d.value,m.disabled=v.disabled||d.disabled);var N=I()("".concat(r,"-wrapper"),(l={},(0,j.Z)(l,"".concat(r,"-wrapper-checked"),m.checked),(0,j.Z)(l,"".concat(r,"-wrapper-disabled"),m.disabled),(0,j.Z)(l,"".concat(r,"-wrapper-rtl"),R==="rtl"),l),n);return a.createElement("label",{className:N,style:s,onMouseEnter:v.onMouseEnter,onMouseLeave:v.onMouseLeave},a.createElement(c.Z,(0,P.Z)({},m,{type:"radio",prefixCls:r,ref:$})),t!==void 0?a.createElement("span",null,t):null)},S=a.forwardRef(B);S.displayName="Radio";var D=S,y=e(28481),g=e(21770),x=e(97647),V=e(5467),K=a.forwardRef(function(o,v){var _=a.useContext(M.E_),l=_.getPrefixCls,d=_.direction,f=a.useContext(x.Z),U=(0,g.Z)(o.defaultValue,{value:o.value}),R=(0,y.Z)(U,2),L=R[0],$=R[1],H=function(t){var s=L,i=t.target.value;"value"in o||$(i);var r=o.onChange;r&&i!==s&&r(t)},Q=function(){var t,s=o.prefixCls,i=o.className,r=i===void 0?"":i,m=o.options,N=o.optionType,te=o.buttonStyle,C=te===void 0?"outline":te,J=o.disabled,X=o.children,W=o.size,F=o.style,re=o.id,le=o.onMouseEnter,ce=o.onMouseLeave,ae=l("radio",s),ne="".concat(ae,"-group"),oe=X;if(m&&m.length>0){var se=N==="button"?"".concat(ae,"-button"):ae;oe=m.map(function(G){return typeof G=="string"||typeof G=="number"?a.createElement(D,{key:G.toString(),prefixCls:se,disabled:J,value:G,checked:L===G},G):a.createElement(D,{key:"radio-group-value-options-".concat(G.value),prefixCls:se,disabled:G.disabled||J,value:G.value,checked:L===G.value,style:G.style},G.label)})}var ie=W||f,ue=I()(ne,"".concat(ne,"-").concat(C),(t={},(0,j.Z)(t,"".concat(ne,"-").concat(ie),ie),(0,j.Z)(t,"".concat(ne,"-rtl"),d==="rtl"),t),r);return a.createElement("div",(0,P.Z)({},(0,V.Z)(o),{className:ue,style:F,onMouseEnter:le,onMouseLeave:ce,id:re,ref:v}),oe)};return a.createElement(h,{value:{onChange:H,value:L,disabled:o.disabled,name:o.name}},Q())}),Y=a.memo(K),z=function(o,v){var _={};for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&v.indexOf(l)<0&&(_[l]=o[l]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,l=Object.getOwnPropertySymbols(o);d<l.length;d++)v.indexOf(l[d])<0&&Object.prototype.propertyIsEnumerable.call(o,l[d])&&(_[l[d]]=o[l[d]]);return _},q=function(v,_){var l=a.useContext(b),d=a.useContext(M.E_),f=d.getPrefixCls,U=v.prefixCls,R=z(v,["prefixCls"]),L=f("radio-button",U);return l&&(R.checked=v.value===l.value,R.disabled=v.disabled||l.disabled),a.createElement(D,(0,P.Z)({prefixCls:L},R,{type:"radio",ref:_}))},u=a.forwardRef(q),w=D;w.Button=u,w.Group=Y;var ee=w},88983:function(k,Z,e){"use strict";var j=e(38663),P=e.n(j),a=e(44943),c=e.n(a)},50132:function(k,Z,e){"use strict";var j=e(22122),P=e(96156),a=e(81253),c=e(28991),E=e(6610),I=e(5991),A=e(10379),M=e(81907),T=e(67294),h=e(94184),b=e.n(h),p=function(O){(0,A.Z)(S,O);var B=(0,M.Z)(S);function S(D){var y;(0,E.Z)(this,S),y=B.call(this,D),y.handleChange=function(x){var V=y.props,K=V.disabled,Y=V.onChange;K||("checked"in y.props||y.setState({checked:x.target.checked}),Y&&Y({target:(0,c.Z)((0,c.Z)({},y.props),{},{checked:x.target.checked}),stopPropagation:function(){x.stopPropagation()},preventDefault:function(){x.preventDefault()},nativeEvent:x.nativeEvent}))},y.saveInput=function(x){y.input=x};var g="checked"in D?D.checked:D.defaultChecked;return y.state={checked:g},y}return(0,I.Z)(S,[{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"render",value:function(){var y,g=this.props,x=g.prefixCls,V=g.className,K=g.style,Y=g.name,z=g.id,q=g.type,u=g.disabled,w=g.readOnly,ee=g.tabIndex,o=g.onClick,v=g.onFocus,_=g.onBlur,l=g.onKeyDown,d=g.onKeyPress,f=g.onKeyUp,U=g.autoFocus,R=g.value,L=g.required,$=(0,a.Z)(g,["prefixCls","className","style","name","id","type","disabled","readOnly","tabIndex","onClick","onFocus","onBlur","onKeyDown","onKeyPress","onKeyUp","autoFocus","value","required"]),H=Object.keys($).reduce(function(t,s){return(s.substr(0,5)==="aria-"||s.substr(0,5)==="data-"||s==="role")&&(t[s]=$[s]),t},{}),Q=this.state.checked,n=b()(x,V,(y={},(0,P.Z)(y,"".concat(x,"-checked"),Q),(0,P.Z)(y,"".concat(x,"-disabled"),u),y));return T.createElement("span",{className:n,style:K},T.createElement("input",(0,j.Z)({name:Y,id:z,type:q,required:L,readOnly:w,disabled:u,tabIndex:ee,className:"".concat(x,"-input"),checked:!!Q,onClick:o,onFocus:v,onBlur:_,onKeyUp:f,onKeyDown:l,onKeyPress:d,onChange:this.handleChange,autoFocus:U,ref:this.saveInput,value:R},H)),T.createElement("span",{className:"".concat(x,"-inner")}))}}],[{key:"getDerivedStateFromProps",value:function(y,g){return"checked"in y?(0,c.Z)((0,c.Z)({},g),{},{checked:y.checked}):null}}]),S}(T.Component);p.defaultProps={prefixCls:"rc-checkbox",className:"",style:{},type:"checkbox",defaultChecked:!1,onFocus:function(){},onBlur:function(){},onChange:function(){},onKeyDown:function(){},onKeyPress:function(){},onKeyUp:function(){}},Z.Z=p}}]);
