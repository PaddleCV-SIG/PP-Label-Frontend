(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[507],{52822:function(r){r.exports={roundBall:"roundBall___1pqu1",popover:"popover___1-PR6"}},5882:function(r){r.exports={listItem:"listItem___vtDXn",eye:"eye___AsLBS",roundBall:"roundBall___1J_R3",popover:"popover___1x-2R",delete:"delete___WHPf2",listItemActive:"listItemActive___3FRb7"}},56131:function(r){r.exports={labelList:"labelList___jvD05",listHeader:"listHeader___UM5UF",eye:"eye___II3Po",roundBall:"roundBall___j752J"}},78677:function(r){r.exports={container:"container___G0FNe"}},83930:function(r){r.exports={stage:"stage___3H5QL"}},80961:function(r){r.exports={leftToolbar:"leftToolbar___1xi4t",rightToolbar:"rightToolbar___3dNSB"}},82499:function(r){r.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1SHWL",toolBarButtonContainer:"toolBarButtonContainer___1jKUz",toolBarButton:"toolBarButton___3Ouq1",buttonText:"buttonText___10ls7",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AA28"}},63097:function(r,M,e){"use strict";var Z=e(20136),_=e(55241),u=e(2824),i=e(67294),s=e(52822),l=e.n(s),f=e(63144),P=e(85893),v=function(y){var Y=(0,i.useState)(y.color||"#FFF"),b=(0,u.Z)(Y,2),n=b[0],a=b[1];return(0,i.useEffect)(function(){a(y.color||"#FFF")},[y]),y.changeable?(0,P.jsx)(_.Z,{getPopupContainer:function(o){return o.parentElement||document.body},overlayClassName:l().popover,openClassName:l().popoverOpenClassName,placement:"bottom",content:(0,P.jsx)(f.xS,{disableAlpha:!0,color:n,onChange:function(o){a(o.hex)},onChangeComplete:y.onChange}),trigger:"click",children:(0,P.jsx)("div",{className:l().roundBall,style:{backgroundColor:n}})}):(0,P.jsx)("div",{className:l().roundBall,style:{backgroundColor:n}})};M.Z=v},5041:function(r,M,e){"use strict";e.d(M,{Z:function(){return p}});var Z=e(54421),_=e(38272),u=e(57663),i=e(71577),s=e(2824),l=e(67294),f=e(56131),P=e.n(f),v=e(49111),N=e(19650),y=e(11849),Y=e(5882),b=e.n(Y),n=e(63097),a=e(85893),H=function(t){var d=(0,y.Z)({},t.label),C=(0,l.useState)(d.invisible),F=(0,s.Z)(C,2),E=F[0],I=F[1],T=(0,l.useState)(0),L=(0,s.Z)(T,2),A=L[0],h=L[1],B=t.hideEye?" ":(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("a",{className:b().eye,style:{backgroundImage:E?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(g){g.stopPropagation(),I(!E),t.onLabelModify(d)}})," "]}),U=t.hideColorPicker?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)(n.Z,{color:d.color,changeable:!0,onChange:function(g){d.color=g.hex,t.onLabelModify(d)}}),S=(0,a.jsxs)(_.ZP.Item,{className:"".concat(b().listItem," ").concat(t.active?b().listItemActive:""),unselectable:"on",onClick:function(){t.onClick(d)},children:[(0,a.jsxs)(N.Z,{align:"center",size:5,children:[B,d.name,U]}),(0,a.jsx)("a",{className:b().delete,onClick:function(g){g.stopPropagation();var j=new Date().getTime();j-A<300||(h(j),t.onLabelDelete(d))}})]});return S},o=H,G=e(71194),X=e(50146),Q=e(47673),k=e(24044),w=e(9715),x=e(93766),D=e(48971),$=["#FF0000","#008000","#0000FF","#FFFF00","#FFA500","#00FFFF","#8B00FF","#FFC0CB","#7CFC00","#007FFF","#800080","#36BF36","#DAA520","#800000","#008B8B","#B22222","#E6D933","#000080","#FF00FF","#FFFF99","#87CEEB","#5C50E6","#CD5C5C","#20B2AA","#E680FF","#4D1F00","#006374","#B399FF","#8B4513","#BA55D3","#C0C0C0","#808080","#000000"],V=function(t){var d,C,F=(0,D.YB)().formatMessage({id:"component.PPAddLabelModal.selectColor"}),E=(0,D.YB)().formatMessage({id:"component.PPAddLabelModal.addLabel"}),I=(0,D.YB)().formatMessage({id:"component.PPAddLabelModal.labelName"}),T=(0,D.YB)().formatMessage({id:"component.PPCreater.cancel"}),L=(0,D.YB)().formatMessage({id:"component.PPSegMode.ok"}),A=(0,l.useState)(((d=t.defaultLabel)===null||d===void 0?void 0:d.color)||$[t.order||0]),h=(0,s.Z)(A,2),B=h[0],U=h[1];(0,l.useEffect)(function(){var R;U(((R=t.defaultLabel)===null||R===void 0?void 0:R.color)||$[t.order||0])},[t]);var S=t.hideColorPicker?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)(x.Z.Item,{label:F,name:"color",children:(0,a.jsx)(n.Z,{color:B,onChange:function(W){U(W.hex)}})}),O=x.Z.useForm(),g=(0,s.Z)(O,1),j=g[0];return(0,a.jsx)(X.Z,{title:E,visible:t.visible,onCancel:t.onCancel,footer:null,children:(0,a.jsxs)(x.Z,{form:j,name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!1,labelname:(C=t.defaultLabel)===null||C===void 0?void 0:C.name},onFinish:function(W){var q={name:W.labelname,color:B};t.onLabelAdd(q),j.resetFields()},autoComplete:"off",children:[(0,a.jsx)(x.Z.Item,{label:I,name:"labelname",rules:[{required:!0,message:"Please input label name!"}],children:(0,a.jsx)(k.Z,{})}),S,(0,a.jsx)(x.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,a.jsxs)(N.Z,{children:[(0,a.jsx)(i.Z,{onClick:function(){var W;(W=t.onCancel)===null||W===void 0||W.call(0),j.resetFields()},children:T}),(0,a.jsx)(i.Z,{type:"primary",htmlType:"submit",children:L})]})})]})})},K=V,J=function(t){var d,C=(0,D.YB)().formatMessage({id:"component.PPLabelList.addLabel"}),F=(0,D.YB)().formatMessage({id:"component.PPLabelList.labelList"}),E=(0,l.useState)(!1),I=(0,s.Z)(E,2),T=I[0],L=I[1];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(_.ZP,{className:P().labelList,size:"large",header:(0,a.jsx)("div",{className:P().listHeader,children:F}),footer:(0,a.jsx)("div",{children:(0,a.jsx)(i.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){L(!0)},block:!0,children:C})}),bordered:!0,dataSource:t.labels,renderItem:function(h){var B;return(0,a.jsx)(o,{hideColorPicker:t.hideColorPicker,hideEye:t.hideEye,onClick:t.onLabelSelect,label:h,active:(B=t.activeIds)===null||B===void 0?void 0:B.has(h.labelId),onLabelDelete:t.onLabelDelete,onLabelModify:t.onLabelModify})}}),(0,a.jsx)(K,{hideColorPicker:t.hideColorPicker,order:(d=t.labels)===null||d===void 0?void 0:d.length,visible:T,onLabelAdd:function(h){t.onLabelAdd(h),L(!1)},onCancel:function(){L(!1)}})]})},p=J},8088:function(r,M,e){"use strict";var Z=e(67294),_=e(78677),u=e.n(_),i=e(85893),s=function(f){return(0,i.jsx)("div",{className:"".concat(u().container," ").concat(f.className),children:f.children})};M.Z=s},57436:function(r,M,e){"use strict";var Z=e(91220),_=e(2824),u=e(67294),i=e(65031),s=e(84420),l=e.n(s),f=e(83930),P=e.n(f),v=e(85893),N="./pics/basketball.jpg";function y(b){switch(b){case"mover":return"move";case"rectangle":case"polygon":return"crosshair";default:return"default"}}var Y=function(n){var a=l()(n.imgSrc||N),H=(0,_.Z)(a,1),o=H[0],G=(o==null?void 0:o.width)||0,X=(o==null?void 0:o.height)||0,Q=n.transparency==null?0:n.transparency*.01,k=(0,u.useState)(0),w=(0,_.Z)(k,2),x=w[0],D=w[1],$=(0,u.useState)(0),V=(0,_.Z)($,2),K=V[0],J=V[1],p=(0,u.useState)({x:0,y:0}),z=(0,_.Z)(p,2),t=z[0],d=z[1],C=(0,u.useRef)(null),F=(0,u.useRef)(null),E=(0,u.useRef)(null);function I(){var m=document.getElementById("dr");m&&(D(m.clientWidth),J(m.clientHeight))}(0,u.useEffect)(function(){window.removeEventListener("resize",I),window.addEventListener("resize",I);var m=document.getElementById("dr");m&&(D(m.clientWidth),J(m.clientHeight))},[]),(0,u.useEffect)(function(){!C.current||(C.current.container().style.cursor=y(n.currentTool))},[n.currentTool]);var T=function(c){return{e:c,offsetX:-x/2+G/2*n.scale-t.x,offsetY:-K/2+X/2*n.scale-t.y,mouseX:(c.evt.offsetX-t.x-x/2+G/2*n.scale)/n.scale,mouseY:(c.evt.offsetY-t.y-K/2+X/2*n.scale)/n.scale,canvasRef:E,layerRef:F}},L=function(c){n.drawTool.onMouseDown(T(c))},A=function(c){n.drawTool.onMouseMove(T(c))},h=function(c){n.drawTool.onMouseUp(T(c))},B=function(c){c.cancelBubble=!0,c.evt.preventDefault()},U=[];if(n.annotations){var S,O=(S=E.current)===null||S===void 0?void 0:S.getContext("2d");O&&O.clearRect(0,0,O.canvas.width,O.canvas.height);var g=(0,Z.Z)(n.annotations),j;try{for(g.s();!(j=g.n()).done;){var R=j.value;if(!!R){var W=n.drawTool.createElementsFunc({annotation:R,onDrag:n.onAnnotationModify,onDragEnd:n.onAnnotationModifyComplete,scale:n.scale,currentTool:n.currentTool,onSelect:n.setCurrentAnnotation,stageRef:C,currentAnnotation:n.currentAnnotation,transparency:Q,canvasRef:E,layerRef:F});U.push(W)}}}catch(m){g.e(m)}finally{g.f()}}var q=n.currentTool=="mover";return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("canvas",{style:{display:"none"},ref:E,width:o==null?void 0:o.width,height:o==null?void 0:o.height}),(0,v.jsxs)(i.Hf,{width:x,height:K,offsetX:-x/2,offsetY:-K/2,className:P().stage,ref:C,draggable:q,onDragMove:function(c){n.currentTool=="mover"},onDragEnd:function(c){n.currentTool=="mover"&&(console.log("dragEndPosX,Y: (".concat(c.target.x(),",").concat(c.target.y(),")")),d({x:c.target.x(),y:c.target.y()}))},children:[(0,v.jsx)(i.mh,{onMouseDown:L,onMouseMove:A,onMouseUp:h,onContextMenu:B,scaleX:n.scale,scaleY:n.scale,draggable:!1,children:(0,v.jsx)(i.Ee,{name:"baseImage",draggable:!1,image:o,x:-((o==null?void 0:o.width)||0)/2,y:-((o==null?void 0:o.height)||0)/2})}),(0,v.jsxs)(i.mh,{ref:F,name:"annotation",scaleX:n.scale,scaleY:n.scale,onMouseDown:L,onMouseMove:A,onMouseUp:h,onContextMenu:B,opacity:Q,children:[U,(0,v.jsx)(i.Ee,{x:-((o==null?void 0:o.width)||0)/2,y:-((o==null?void 0:o.height)||0)/2,image:E.current||void 0})]})]})]})};M.Z=Y},44434:function(r,M,e){"use strict";var Z=e(67294),_=e(80961),u=e.n(_),i=e(85893),s=function(f){var P=u().leftToolbar;return f.disLoc=="right"&&(P=u().rightToolbar),(0,i.jsx)("div",{className:P,children:f.children})};M.Z=s},61541:function(r,M,e){"use strict";var Z=e(49111),_=e(19650),u=e(67294),i=e(82499),s=e.n(i),l=e(85893),f=function(v){return(0,l.jsx)("div",{unselectable:"on",className:"".concat(s().toolBarButtonContainerWrapper," ").concat(v.active&&s().toolBarButtonContainerWrapperActive),onClick:v.onClick,children:(0,l.jsx)(_.Z,{align:"center",className:s().toolBarButtonContainer,size:0,children:(0,l.jsxs)(_.Z,{align:"center",direction:"vertical",className:s().toolBarButton,size:0,children:[(0,l.jsx)("img",{src:v.imgSrc}),(0,l.jsx)("div",{className:s().buttonText,children:v.children})]})})})};M.Z=f}}]);
