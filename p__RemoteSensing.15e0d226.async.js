(self.webpackChunkpp_labeling_frontend=self.webpackChunkpp_labeling_frontend||[]).push([[333],{57560:function(a){a.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___147XP",toolBarButtonContainer:"toolBarButtonContainer___ZEvhK",toolBarButton:"toolBarButton___1s2Rh",buttonText:"buttonText___3NTCv",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___2Utx8",popover:"popover___3PRoi"}},52822:function(a){a.exports={roundBall:"roundBall___1pqu1",popover:"popover___1-PR6"}},56131:function(a){a.exports={labelList:"labelList___jvD05",listHeader:"listHeader___UM5UF",eye:"eye___II3Po",roundBall:"roundBall___j752J"}},56623:function(a){a.exports={listItem:"listItem___3P4zY",eye:"eye___13vRl",roundBall:"roundBall___3rXBh",popover:"popover___2bsOT"}},78677:function(a){a.exports={container:"container___G0FNe"}},80961:function(a){a.exports={toolbar:"toolbar___3vxli"}},82499:function(a){a.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1SHWL",toolBarButtonContainer:"toolBarButtonContainer___1jKUz",toolBarButton:"toolBarButton___3Ouq1",buttonText:"buttonText___10ls7",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AA28"}},72869:function(a){a.exports={map:"map___92VPN",customControlIcon:"customControlIcon___3Ki2y"}},20474:function(a){a.exports={RSPop1:"RSPop1___vz5Me",RSPop2:"RSPop2___34pQA"}},2661:function(a){a.exports={toolbar:"toolbar___1o3he"}},93889:function(a){a.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___UtH8a",toolBarButtonContainer:"toolBarButtonContainer___1gFsH",toolBarButton:"toolBarButton___1Wqc1",buttonText:"buttonText___2zcKO",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AXHi"}},75513:function(a){a.exports={segment:"segment___3WmPw",mainStage:"mainStage___2kT1s",rightSideBar:"rightSideBar___11FX3"}},58967:function(a,x,e){"use strict";var Q=e(20136),u=e(19181),T=e(77883),h=e(70507),c=e(57663),r=e(71577),P=e(2824),d=e(67294),O=e(61541),$=e(57560),k=e.n($),B=e(85893),z=1,n=20,w=10;function G(L){return L?L<=z?z:L>=n?n:L:w}var H=function(t){var I=(0,d.useState)(G(t.size)),F=(0,P.Z)(I,2),A=F[0],q=F[1];return(0,B.jsxs)(u.Z,{overlayClassName:k().popover,placement:"right",content:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(r.Z,{type:"text",onClick:function(){var Z,j=G(A-1);q(j),(Z=t.onChange)===null||Z===void 0||Z.call(0,j)},children:"-"}),(0,B.jsx)(h.Z,{min:1,max:20,value:A,onChange:t.onChange,controls:!1,style:{textAlign:"center"}}),(0,B.jsx)(r.Z,{type:"text",onClick:function(){var Z,j=G(A+1);q(j),(Z=t.onChange)===null||Z===void 0||Z.call(0,j)},children:"+"})]}),trigger:t.active?"hover":"click",children:[" ",(0,B.jsx)(O.Z,{active:t.active,imgSrc:"./pics/buttons/brush.png",onClick:t.onClick,children:"Brush"})]})};x.Z=H},35475:function(a,x,e){"use strict";e.d(x,{Z:function(){return X}});var Q=e(54421),u=e(38272),T=e(57663),h=e(71577),c=e(2824),r=e(67294),P=e(56131),d=e.n(P),O=e(49111),$=e(19650),k=e(11849),B=e(56623),z=e.n(B),n=e(20136),w=e(19181),G=e(52822),H=e.n(G),L=e(63144),t=e(85893),I=function(m){var s=(0,r.useState)(m.color||"#FFF"),y=(0,c.Z)(s,2),C=y[0],p=y[1];return(0,t.jsx)(w.Z,{getPopupContainer:function(S){return S.parentElement||document.body},overlayClassName:H().popover,openClassName:H().popoverOpenClassName,placement:"bottom",content:(0,t.jsx)(L.xS,{disableAlpha:!0,color:C,onChange:function(S){p(S.hex)},onChangeComplete:m.onChange}),trigger:"click",children:(0,t.jsx)("div",{className:H().roundBall,style:{backgroundColor:C}})})},F=I,A=function(m){var s=(0,k.Z)({},m.label),y=(0,r.useState)(s.invisible),C=(0,c.Z)(y,2),p=C[0],M=C[1],S=(0,t.jsx)(u.ZP.Item,{className:z().listItem,unselectable:"on",children:(0,t.jsxs)($.Z,{align:"center",size:5,children:[(0,t.jsx)("a",{className:z().eye,style:{backgroundImage:p?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(){M(!p),m.onLabelModify(s)}})," ",s.name,(0,t.jsx)(F,{color:s.color,onChange:function(U){s.color=U.hex,m.onLabelModify(s)}})]})});return S},q=A,J=e(71194),Z=e(48889),j=e(9715),ee=e(93766),pe=e(47673),fe=e(24044),se=function(m){var s=m.defaultLabel,y=(0,r.useState)(m.visible),C=(0,c.Z)(y,2),p=C[0],M=C[1],S=(0,r.useState)((s==null?void 0:s.color)||"#FF0000"),N=(0,c.Z)(S,2),U=N[0],_=N[1],ne=(0,r.useState)((s==null?void 0:s.name)||""),le=(0,c.Z)(ne,2),ie=le[0],ce=le[1];return(0,t.jsx)(Z.Z,{title:"Add Label",visible:p,onCancel:m.onCancel,footer:null,children:(0,t.jsxs)(ee.Z,{name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!1},onFinish:function(W){var ue={name:W.labelname,color:U};m.onLabelAdd(ue),M(!1)},autoComplete:"off",children:[(0,t.jsx)(ee.Z.Item,{label:"Label Name",name:"labelname",rules:[{required:!0,message:"Please input label name!"}],children:(0,t.jsx)(fe.Z,{defaultValue:ie})}),(0,t.jsx)(ee.Z.Item,{label:"Select Color",name:"color",rules:[{required:!0,message:"Please select color!"}],children:(0,t.jsx)(F,{color:U,onChange:function(W){_(W.hex)}})}),(0,t.jsx)(ee.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,t.jsxs)($.Z,{children:[(0,t.jsx)(h.Z,{onClick:function(){var W;M(!1),(W=m.onCancel)===null||W===void 0||W.call(0)},children:"\u53D6\u6D88"}),(0,t.jsx)(h.Z,{type:"primary",htmlType:"submit",children:"\u786E\u5B9A"})]})})]})})},ge=se,E=[{color:"#FF0000",name:"Label 1"},{color:"#008000",name:"Label 2"}],xe=function(m){var s=(0,r.useState)(E),y=(0,c.Z)(s,2),C=y[0],p=y[1],M=(0,r.useState)(!1),S=(0,c.Z)(M,2),N=S[0],U=S[1];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.ZP,{className:d().labelList,size:"large",header:(0,t.jsx)("div",{className:d().listHeader,children:"Label List"}),footer:(0,t.jsx)("div",{children:(0,t.jsx)(h.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){U(!0)},block:!0,children:"Add Label"})}),bordered:!0,dataSource:C,renderItem:function(ne){return(0,t.jsx)(q,{label:ne,onLabelDelete:m.onLabelDelete,onLabelModify:m.onLabelModify})}}),(0,t.jsx)(ge,{visible:N,onLabelAdd:function(){}})]})},X=xe},8088:function(a,x,e){"use strict";var Q=e(67294),u=e(78677),T=e.n(u),h=e(85893),c=function(P){return(0,h.jsx)("div",{className:"".concat(T().container," ").concat(P.className),children:P.children})};x.Z=c},44434:function(a,x,e){"use strict";var Q=e(67294),u=e(80961),T=e.n(u),h=e(85893),c=function(P){return(0,h.jsx)("div",{className:T().toolbar,children:P.children})};x.Z=c},61541:function(a,x,e){"use strict";var Q=e(49111),u=e(19650),T=e(67294),h=e(82499),c=e.n(h),r=e(85893),P=function(O){return(0,r.jsx)("div",{unselectable:"on",className:"".concat(c().toolBarButtonContainerWrapper," ").concat(O.active&&c().toolBarButtonContainerWrapperActive),onClick:O.onClick,children:(0,r.jsx)(u.Z,{align:"center",className:c().toolBarButtonContainer,size:0,children:(0,r.jsxs)(u.Z,{align:"center",direction:"vertical",className:c().toolBarButton,size:0,children:[(0,r.jsx)("img",{src:O.imgSrc}),(0,r.jsx)("div",{className:c().buttonText,children:O.children})]})})})};x.Z=P},6779:function(a,x,e){"use strict";e.r(x),e.d(x,{default:function(){return Be}});var Q=e(20136),u=e(19181),T=e(2824),h=e(67294),c=e(75513),r=e.n(c),P=e(8088),d=e(61541),O=e(44434),$=e(58967),k=e(35475),B=e(2661),z=e.n(B),n=e(85893),w=function(f){return(0,n.jsx)("div",{className:z().toolbar,children:f.children})},G=w,H=e(49111),L=e(19650),t=e(93889),I=e.n(t),F=function(f){return(0,n.jsx)("div",{unselectable:"on",className:"".concat(I().toolBarButtonContainerWrapper," ").concat(f.active&&I().toolBarButtonContainerWrapperActive),onClick:f.onClick,children:(0,n.jsx)(L.Z,{align:"center",className:I().toolBarButtonContainer,size:0,children:(0,n.jsxs)(L.Z,{align:"center",direction:"vertical",className:I().toolBarButton,size:0,children:[(0,n.jsx)("img",{src:f.imgSrc}),(0,n.jsx)("div",{className:I().buttonText,children:f.children})]})})})},A=F,q=e(47673),J=e(24044),Z=e(13062),j=e(71230),ee=e(59250),pe=e(13013),fe=e(57663),se=e(71577),ge=e(89032),E=e(15746),xe=e(30887),X=e(54689),ae=e(34792),m=e(48086),s=e(89366),y=e(57254),C=e(20474),p=e.n(C);function M(V){m.default.info("Click on menu item."),console.log("click",V)}var S=(0,n.jsxs)(X.Z,{onClick:M,children:[(0,n.jsx)(X.Z.Item,{icon:(0,n.jsx)(s.Z,{}),children:"1st menu item"},"1"),(0,n.jsx)(X.Z.Item,{icon:(0,n.jsx)(s.Z,{}),children:"2nd menu item"},"2"),(0,n.jsx)(X.Z.Item,{icon:(0,n.jsx)(s.Z,{}),children:"3rd menu item"},"3")]}),N=function(){return(0,n.jsxs)("div",{children:[(0,n.jsxs)(j.Z,{children:[(0,n.jsx)(E.Z,{span:12,className:p().RSPop1,children:(0,n.jsx)("span",{children:"PD parameter"})}),(0,n.jsx)(E.Z,{span:12,className:p().RSPop2,children:(0,n.jsx)(pe.Z,{overlay:S,children:(0,n.jsxs)(se.Z,{style:{width:"100%"},children:["Dropdown ",(0,n.jsx)(y.Z,{})]})})})]}),(0,n.jsxs)(j.Z,{children:[(0,n.jsx)(E.Z,{span:12,className:p().RSPop1,children:(0,n.jsx)("span",{children:"Simplified distance"})}),(0,n.jsx)(E.Z,{span:12,className:p().RSPop2,children:(0,n.jsx)(J.Z,{placeholder:"Basic usage"})})]}),(0,n.jsxs)(j.Z,{children:[(0,n.jsx)(E.Z,{span:12,className:p().RSPop1,children:(0,n.jsx)("span",{children:"Simplified angle"})}),(0,n.jsx)(E.Z,{span:12,className:p().RSPop2,children:(0,n.jsx)(J.Z,{placeholder:"Basic usage"})})]}),(0,n.jsxs)(j.Z,{children:[(0,n.jsx)(E.Z,{span:12,className:p().RSPop1,children:(0,n.jsx)("span",{children:"Threshold of building simplification "})}),(0,n.jsx)(E.Z,{span:12,className:p().RSPop2,children:(0,n.jsx)(J.Z,{placeholder:"Basic usage"})})]})]})},U=N,_=e(11849),ne=e(93224),le=e(41004),ie=e(72869),ce=e.n(ie),de=e(74607),W=function(f){var Y=f.children,g=f.leafletMapRef,b=(0,ne.Z)(f,["children","leafletMapRef"]);return h.useEffect(function(){if(g.current){var i=g.current.leafletElement;i.pm.addControls({drawMarker:!1,drawCircle:!1,drawCircleMarker:!1,drawPolyline:!0,drawRectangle:!0,drawPolygon:!0,editMode:!0,dragMode:!0,cutPolygon:!0,rotateMode:!1,removalMode:!0}),i.pm.setGlobalOptions({pmIgnore:!1}),i.pm.Toolbar.createCustomControl({name:"StoreShapes",title:"Store all shapes",block:"custom",className:ce().customControlIcon,toggle:!1,afterClick:function(){var K=JSON.stringify(i.pm.getGeomanDrawLayers(!0).toGeoJSON()),oe="data.geojson",R=document.createElement("a");R.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(K)),R.setAttribute("download",oe),R.style.display="none",document.body.appendChild(R),R.click(),console.log(K)}}),i.on("pm:create",function(D){f.onShapeCreate(D)}),i.on("pm:edit",function(D){f.onShapeEdit(D)})}},[]),(0,n.jsx)(le.Z,(0,_.Z)((0,_.Z)({ref:g},b),{},{children:Y}))},ue=W,te=e(88014),re=e(3263),me={lat:0,lng:0,zoom:2},Pe=function(f){var Y=[me.lat,me.lng],g=h.useState([]),b=(0,T.Z)(g,2),i=b[0],D=b[1],K=function(o){R(o.layer),o.layer.bindPopup("Label: "+o.layer._uid).openPopup(),ve(o.layer)},oe=function(o){he(o.layer),console.log(o)};function R(l){var o=prompt("Please enter a Unique Id");if(o)if(i[o]){alert("Id already used, add another one"),R(l);return}else l._uid=o,i[o]=l,D(i);else{alert("Nothing entered, layer deleted ..."),l.remove();return}}function ve(l){var o=l._uid,v=l.toGeoJSON();v.properties={LabelID:Number(o)},console.log("Store Layer on DB. Id:"+o,v),console.log(JSON.stringify(v))}function he(l){var o=l._uid,v=l.toGeoJSON();console.log("Update Layer on DB. Id:"+o,v)}return(0,n.jsx)(ue,{leafletMapRef:f.leafletMapRef,className:ce().map,center:Y,zoom:me.zoom,onShapeCreate:K,onShapeEdit:oe,children:(0,n.jsxs)(te.Z,{position:"topright",children:[(0,n.jsx)(te.Z.BaseLayer,{checked:!0,name:"OpenStreetMap.Mapnik",children:(0,n.jsx)(re.Z,{attribution:'\xA9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"})}),(0,n.jsx)(te.Z.BaseLayer,{name:"TianDiTu.Satellite",children:(0,n.jsx)(re.Z,{attribution:"\xA9 TianDiTu",url:"https://t2.tianditu.gov.cn/DataServer?T=img_w&X={x}&Y={y}&L={z}&tk=174705aebfe31b79b3587279e211cb9a"})}),(0,n.jsx)(te.Z.BaseLayer,{name:"Esri.WorldImagery",children:(0,n.jsx)(re.Z,{attribution:"Tiles \xA9 Esri \u2014 Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"})}),(0,n.jsx)(te.Z.Overlay,{name:"Annotion.TianDiTu",children:(0,n.jsx)(re.Z,{url:"https://t2.tianditu.gov.cn/DataServer?T=cia_w&X={x}&Y={y}&L={z}&tk=174705aebfe31b79b3587279e211cb9a"})})]})})},Ce=Pe,Se=function(){var f=(0,h.useState)(void 0),Y=(0,T.Z)(f,2),g=Y[0],b=Y[1],i=h.useRef(null);if(g){var D,K;(D=i.current)===null||D===void 0||D.leafletElement.pm.enableDraw(g),console.log("drawTools: ",g),(K=i.current)===null||K===void 0||K.leafletElement.pm.setPathOptions({color:"orange",fillColor:"green",fillOpacity:.4})}var oe=function(){var o,v;console.log((o=i.current)===null||o===void 0?void 0:o.leafletElement.pm.Draw),(v=i.current)===null||v===void 0||v.leafletElement.pm.Draw.Polygon._removeLastVertex()},R=function(){var o,v;console.log((o=i.current)===null||o===void 0?void 0:o.leafletElement.pm.Draw),(v=i.current)===null||v===void 0||v.leafletElement.pm.toggleGlobalDragMode()},ve=function(){var o,v;console.log((o=i.current)===null||o===void 0?void 0:o.leafletElement.pm.Draw),(v=i.current)===null||v===void 0||v.leafletElement.pm.Draw.Polygon._finishShape()},he=function(){var o;(o=i.current)===null||o===void 0||o.leafletElement.pm.enableGlobalRemovalMode()};return(0,n.jsxs)(P.Z,{className:r().segment,children:[(0,n.jsxs)(O.Z,{children:[(0,n.jsx)(d.Z,{imgSrc:"./pics/buttons/intelligent_interaction.png",children:"Intelligent Interaction"}),(0,n.jsx)(u.Z,{placement:"rightTop",title:"Polygon Edit",defaultVisible:!0,content:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:function(){oe()},children:"Remove Last Vertex"}),(0,n.jsx)("button",{onClick:function(){ve()},children:"Finish"})]}),trigger:g=="Polygon"?"hover":"click",children:(0,n.jsx)(d.Z,{active:g=="Polygon",imgSrc:"./pics/buttons/polygon.png",onClick:function(){b("Polygon")},children:"Polygon"})}),(0,n.jsx)($.Z,{active:g=="brush",onClick:function(){b("brush")},onChange:function(o){console.log(o)}}),(0,n.jsxs)(u.Z,{placement:"rightTop",title:"title",content:"content",trigger:g=="rubber"?"hover":"click",children:[" ",(0,n.jsx)(d.Z,{imgSrc:"./pics/buttons/rubber.png",onClick:function(){he()},children:"Rubber"})]}),(0,n.jsx)(d.Z,{imgSrc:"./pics/buttons/zoom_in.png",children:"Zoom in"}),(0,n.jsx)(d.Z,{imgSrc:"./pics/buttons/zoom_out.png",children:"Zoom out"}),(0,n.jsx)(d.Z,{imgSrc:"./pics/buttons/save.png",children:"Save"}),(0,n.jsx)(d.Z,{imgSrc:"./pics/buttons/move.png",onClick:function(){return R()},children:"Move"}),(0,n.jsx)(d.Z,{imgSrc:"./pics/buttons/export.png",children:"Export"}),(0,n.jsx)(d.Z,{imgSrc:"./pics/buttons/data_division.png",children:"Divide Data"}),(0,n.jsx)(d.Z,{imgSrc:"./pics/buttons/prev.png",children:"Undo"}),(0,n.jsx)(d.Z,{imgSrc:"./pics/buttons/next.png",children:"Redo"}),(0,n.jsx)(d.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:"Clear Mark"})]}),(0,n.jsx)("div",{className:r().mainStage,children:(0,n.jsx)(Ce,{leafletMapRef:i})}),(0,n.jsxs)(G,{children:[(0,n.jsxs)(u.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Setting of boundary simplification",content:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(U,{})}),trigger:g=="boundry"?"click":"hover",children:[" ",(0,n.jsx)(A,{imgSrc:"./pics/buttons/border_simplify.png",onClick:function(){b("boundry")},children:(0,n.jsx)("h2",{children:"Boundary"})})]}),(0,n.jsxs)(u.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Setting of remote sensing",content:"content",trigger:g=="colorgun"?"click":"hover",children:[" ",(0,n.jsx)(A,{imgSrc:"./pics/buttons/remote_sensing_setting.png",onClick:function(){b("colorgun")},children:(0,n.jsx)("h2",{children:"Remote Sensing"})})]}),(0,n.jsxs)(u.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Switch grids",content:"content",trigger:g=="grid"?"click":"hover",children:[" ",(0,n.jsx)(A,{imgSrc:"./pics/buttons/switch_grid.png",onClick:function(){b("grid")},children:(0,n.jsx)("h2",{children:"Grids"})})]})]}),(0,n.jsx)("div",{className:r().rightSideBar,children:(0,n.jsx)(k.Z,{onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}})})]})},Be=Se}}]);
