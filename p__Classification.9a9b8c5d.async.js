(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[672],{70830:function(_,P,e){"use strict";e.d(P,{Z:function(){return b}});function b(u){throw new TypeError('"'+u+'" is read-only')}},41435:function(_,P,e){"use strict";e.d(P,{Z:function(){return i}});var b=e(94663),u=e(80112);function h(v){return Function.toString.call(v).indexOf("[native code]")!==-1}var m=e(18597);function l(v,c,f){return(0,m.Z)()?l=Reflect.construct:l=function(C,W,n){var L=[null];L.push.apply(L,W);var o=Function.bind.apply(C,L),M=new o;return n&&(0,u.Z)(M,n.prototype),M},l.apply(null,arguments)}function i(v){var c=typeof Map=="function"?new Map:void 0;return i=function(E){if(E===null||!h(E))return E;if(typeof E!="function")throw new TypeError("Super expression must either be null or a function");if(typeof c!="undefined"){if(c.has(E))return c.get(E);c.set(E,C)}function C(){return l(E,arguments,(0,b.Z)(this).constructor)}return C.prototype=Object.create(E.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),(0,u.Z)(C,E)},i(v)}},52822:function(_){_.exports={roundBall:"roundBall___1pqu1",popover:"popover___1-PR6"}},5882:function(_){_.exports={listItem:"listItem___vtDXn",eye:"eye___AsLBS",roundBall:"roundBall___1J_R3",popover:"popover___1x-2R",delete:"delete___WHPf2",listItemActive:"listItemActive___3FRb7"}},56131:function(_){_.exports={labelList:"labelList___jvD05",listHeader:"listHeader___UM5UF",eye:"eye___II3Po",roundBall:"roundBall___j752J"}},78677:function(_){_.exports={container:"container___G0FNe"}},83930:function(_){_.exports={stage:"stage___3H5QL"}},80961:function(_){_.exports={leftToolbar:"leftToolbar___1xi4t",rightToolbar:"rightToolbar___3dNSB"}},82499:function(_){_.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1SHWL",toolBarButtonContainer:"toolBarButtonContainer___1jKUz",toolBarButton:"toolBarButton___3Ouq1",buttonText:"buttonText___10ls7",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AA28"}},73199:function(){},63097:function(_,P,e){"use strict";var b=e(20136),u=e(55241),h=e(2824),m=e(67294),l=e(52822),i=e.n(l),v=e(63144),c=e(85893),f=function(C){var W=(0,m.useState)(C.color||"#FFF"),n=(0,h.Z)(W,2),L=n[0],o=n[1];return(0,m.useEffect)(function(){o(C.color||"#FFF")},[C]),C.changeable?(0,c.jsx)(u.Z,{getPopupContainer:function(j){return j.parentElement||document.body},overlayClassName:i().popover,openClassName:i().popoverOpenClassName,placement:"bottom",content:(0,c.jsx)(v.xS,{disableAlpha:!0,color:L,onChange:function(j){o(j.hex)},onChangeComplete:C.onChange}),trigger:"click",children:(0,c.jsx)("div",{className:i().roundBall,style:{backgroundColor:L}})}):(0,c.jsx)("div",{className:i().roundBall,style:{backgroundColor:L}})};P.Z=f},5041:function(_,P,e){"use strict";e.d(P,{Z:function(){return p}});var b=e(54421),u=e(38272),h=e(57663),m=e(71577),l=e(2824),i=e(67294),v=e(56131),c=e.n(v),f=e(49111),E=e(19650),C=e(11849),W=e(5882),n=e.n(W),L=e(63097),o=e(85893),M=function(t){var a=(0,C.Z)({},t.label),r=(0,i.useState)(a.invisible),B=(0,l.Z)(r,2),F=B[0],g=B[1],A=t.hideEye?" ":(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("a",{className:n().eye,style:{backgroundImage:F?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(){g(!F),t.onLabelModify(a)}})," "]}),I=t.hideColorPicker?(0,o.jsx)(o.Fragment,{}):(0,o.jsx)(L.Z,{color:a.color,changeable:!0,onChange:function(y){a.color=y.hex,t.onLabelModify(a)}}),d=(0,o.jsxs)(u.ZP.Item,{className:"".concat(n().listItem," ").concat(t.active?n().listItemActive:""),unselectable:"on",onClick:function(){t.onClick(a)},children:[(0,o.jsxs)(E.Z,{align:"center",size:5,children:[A,a.name,I]}),(0,o.jsx)("a",{className:n().delete,style:{backgroundImage:"url(./pics/delete.png)"},onClick:function(y){y.stopPropagation(),t.onLabelDelete(a)}})]});return d},j=M,s=e(71194),Z=e(50146),$=e(47673),R=e(24044),z=e(9715),x=e(93766),U=["#FF0000","#008000","#0000FF","#FFFF00","#FFA500","#00FFFF","#8B00FF","#FFC0CB","#7CFC00","#007FFF","#800080","#36BF36","#DAA520","#800000","#008B8B","#B22222","#E6D933","#000080","#FF00FF","#FFFF99","#87CEEB","#5C50E6","#CD5C5C","#20B2AA","#E680FF","#4D1F00","#006374","#B399FF","#8B4513","#BA55D3","#C0C0C0","#808080","#000000"],K=function(t){var a,r,B=(0,i.useState)(((a=t.defaultLabel)===null||a===void 0?void 0:a.color)||U[t.order||0]),F=(0,l.Z)(B,2),g=F[0],A=F[1];(0,i.useEffect)(function(){var H;A(((H=t.defaultLabel)===null||H===void 0?void 0:H.color)||U[t.order||0])},[t]);var I=t.hideColorPicker?(0,o.jsx)(o.Fragment,{}):(0,o.jsx)(x.Z.Item,{label:"Select Color",name:"color",children:(0,o.jsx)(L.Z,{color:g,onChange:function(S){A(S.hex)}})}),d=x.Z.useForm(),O=(0,l.Z)(d,1),y=O[0];return(0,o.jsx)(Z.Z,{title:"Add Label",visible:t.visible,onCancel:t.onCancel,footer:null,children:(0,o.jsxs)(x.Z,{form:y,name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!1,labelname:(r=t.defaultLabel)===null||r===void 0?void 0:r.name},onFinish:function(S){var k={name:S.labelname,color:g};t.onLabelAdd(k),y.resetFields()},autoComplete:"off",children:[(0,o.jsx)(x.Z.Item,{label:"Label Name",name:"labelname",rules:[{required:!0,message:"Please input label name!"}],children:(0,o.jsx)(R.Z,{})}),I,(0,o.jsx)(x.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,o.jsxs)(E.Z,{children:[(0,o.jsx)(m.Z,{onClick:function(){var S;(S=t.onCancel)===null||S===void 0||S.call(0),y.resetFields()},children:"\u53D6\u6D88"}),(0,o.jsx)(m.Z,{type:"primary",htmlType:"submit",children:"\u786E\u5B9A"})]})})]})})},N=K,D=function(t){var a,r=(0,i.useState)(!1),B=(0,l.Z)(r,2),F=B[0],g=B[1];return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(u.ZP,{className:c().labelList,size:"large",header:(0,o.jsx)("div",{className:c().listHeader,children:"Label List"}),footer:(0,o.jsx)("div",{children:(0,o.jsx)(m.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){g(!0)},block:!0,children:"Add Label"})}),bordered:!0,dataSource:t.labels,renderItem:function(I){var d;return(0,o.jsx)(j,{hideColorPicker:t.hideColorPicker,hideEye:t.hideEye,onClick:t.onLabelSelect,label:I,active:(d=t.activeIds)===null||d===void 0?void 0:d.has(I.labelId),onLabelDelete:t.onLabelDelete,onLabelModify:t.onLabelModify})}}),(0,o.jsx)(N,{hideColorPicker:t.hideColorPicker,order:(a=t.labels)===null||a===void 0?void 0:a.length,visible:F,onLabelAdd:function(I){t.onLabelAdd(I),g(!1)},onCancel:function(){g(!1)}})]})},p=D},8088:function(_,P,e){"use strict";var b=e(67294),u=e(78677),h=e.n(u),m=e(85893),l=function(v){return(0,m.jsx)("div",{className:"".concat(h().container," ").concat(v.className),children:v.children})};P.Z=l},57436:function(_,P,e){"use strict";var b=e(91220),u=e(2824),h=e(67294),m=e(65031),l=e(84420),i=e.n(l),v=e(83930),c=e.n(v),f=e(85893),E="./pics/basketball.jpg",C=function(n){var L=i()(n.imgSrc||""),o=(0,u.Z)(L,1),M=o[0],j=(0,h.useState)(0),s=(0,u.Z)(j,2),Z=s[0],$=s[1],R=(0,h.useState)(0),z=(0,u.Z)(R,2),x=z[0],U=z[1];console.log("scale: ",n.scale);function K(){var a=document.getElementById("dr");a&&($(a.clientWidth),U(a.clientHeight))}(0,h.useEffect)(function(){window.removeEventListener("resize",K),window.addEventListener("resize",K);var a=document.getElementById("dr");a&&($(a.clientWidth),U(a.clientHeight))},[]);var N=[];if(n.annotations){var D=(0,b.Z)(n.annotations),p;try{for(D.s();!(p=D.n()).done;){var T=p.value;if(!!T){var t=void 0;switch(T.tool){case"polygon":t=n.createPolygonFunc;break;case"brush":t=n.createBrushFunc;break;case"rubber":t=n.createBrushFunc;break;case"rectangle":t=n.createRectangleFunc;break;default:t=null}t&&N.push(t(T,n.onAnnotationModify,n.onAnnotationModifyComplete,n.scale,n.currentTool,n.setCurrentAnnotation,n.currentAnnotation))}}}catch(a){D.e(a)}finally{D.f()}}return(0,f.jsx)(m.Hf,{width:Z,height:x,offsetX:-Z/2,offsetY:-x/2,className:c().stage,children:(0,f.jsx)(m.mh,{onMouseDown:function(r){n.onMouseDown&&n.onMouseDown(r,-Z/2,-x/2,n.scale)},onMouseMove:function(r){n.onMouseMove&&n.onMouseMove(r,n.scale)},onMouseUp:function(r){n.onMouseUp&&n.onMouseUp(r,n.scale)},onContextMenu:function(r){r.evt.preventDefault()},draggable:!1,scaleX:n.scale,scaleY:n.scale,children:(0,f.jsxs)(m.ZA,{draggable:n.currentTool=="mover",onDragEnd:function(r){},children:[(0,f.jsx)(m.Ee,{draggable:!1,image:M,x:-((M==null?void 0:M.width)||0)/2,y:-((M==null?void 0:M.height)||0)/2}),N]})})})};P.Z=C},44434:function(_,P,e){"use strict";var b=e(67294),u=e(80961),h=e.n(u),m=e(85893),l=function(v){var c=h().leftToolbar;return v.disLoc=="right"&&(c=h().rightToolbar),(0,m.jsx)("div",{className:c,children:v.children})};P.Z=l},61541:function(_,P,e){"use strict";var b=e(49111),u=e(19650),h=e(67294),m=e(82499),l=e.n(m),i=e(85893),v=function(f){return(0,i.jsx)("div",{unselectable:"on",className:"".concat(l().toolBarButtonContainerWrapper," ").concat(f.active&&l().toolBarButtonContainerWrapperActive),onClick:f.onClick,children:(0,i.jsx)(u.Z,{align:"center",className:l().toolBarButtonContainer,size:0,children:(0,i.jsxs)(u.Z,{align:"center",direction:"vertical",className:l().toolBarButton,size:0,children:[(0,i.jsx)("img",{src:f.imgSrc}),(0,i.jsx)("div",{className:l().buttonText,children:f.children})]})})})};P.Z=v},29214:function(_,P,e){"use strict";e.r(P);var b=e(11849),u=e(20228),h=e(11382),m=e(34669),l=e(54458),i=e(34792),v=e(48086),c=e(2824),f=e(67294),E=e(73199),C=e.n(E),W=e(8088),n=e(61541),L=e(44434),o=e(5041),M=e(57436),j=e(64322),s=e(85893),Z=function(){var R,z=(0,f.useState)("mover"),x=(0,c.Z)(z,2),U=x[0],K=x[1],N=(0,j.$L)(f.useState,f.useEffect,{label:{oneHot:!1,postSetCurr:A},effectTrigger:{postTaskChange:I}}),D=(0,c.Z)(N,8),p=D[0],T=D[1],t=D[2],a=D[3],r=D[4],B=D[5],F=D[6],g=D[7];function A(d){if(g.isActive(d))a.create({taskId:r.curr.taskId,labelId:d.labelId,dataId:B.curr.dataId});else{var O=a.all.filter(function(y){return y.labelId==d.labelId})[0];a.remove(O.annotationId)}}function I(d,O){T(!0),!(!d||!O)&&(g.initActive(O),T(!1))}return(0,s.jsxs)(W.Z,{className:C().classes,children:[(0,s.jsxs)(L.Z,{children:[(0,s.jsx)(n.Z,{imgSrc:"./pics/buttons/zoom_in.png",onClick:function(){t.change(.1)},children:"Zoom in"}),(0,s.jsx)(n.Z,{imgSrc:"./pics/buttons/zoom_out.png",onClick:function(){t.change(-.1)},children:"Zoom out"}),(0,s.jsx)(n.Z,{imgSrc:"./pics/buttons/save.png",onClick:function(){v.default.info("Annotations are saved automatically. You don't need to click save.")},children:"Save"}),(0,s.jsx)(n.Z,{imgSrc:"./pics/buttons/move.png",onClick:function(){K("mover"),v.default.info("You can move the image now.")},children:"Move"})]}),(0,s.jsx)("div",{id:"dr",className:"mainStage",children:(0,s.jsxs)(h.Z,{tip:"loading",spinning:p,children:[(0,s.jsx)("div",{className:"draw",children:(0,s.jsx)(M.Z,{scale:t.curr,currentTool:U,setCurrentAnnotation:function(){},onAnnotationModify:function(){},onAnnotationModifyComplete:function(){},imgSrc:B.imgSrc})}),(0,s.jsx)("div",{className:"pblock",children:(0,s.jsxs)("div",{className:"progress",children:[(0,s.jsx)(l.Z,{className:"progressBar",percent:r.progress,status:"active",showInfo:!1})," ",(0,s.jsxs)("span",{className:"progressDesc",children:["Current labeling ",r.currIdx?r.currIdx+1:1," of ",(R=r.all)===null||R===void 0?void 0:R.length,". Already labeled ",r.finished||0,"."]})]})}),(0,s.jsx)("div",{className:"prevTask",onClick:r.prevTask}),(0,s.jsx)("div",{className:"nextTask",onClick:r.nextTask})]})}),(0,s.jsxs)(L.Z,{disLoc:"right",children:[(0,s.jsx)(n.Z,{imgSrc:"./pics/buttons/export.png",children:"Export"}),(0,s.jsx)(n.Z,{imgSrc:"./pics/buttons/data_division.png",children:"Split Dataset"})]}),(0,s.jsx)("div",{className:"rightSideBar",children:(0,s.jsx)(o.Z,{labels:g.all,activeIds:g.activeIds,onLabelSelect:g.setCurr,onLabelAdd:function(O){return g.create((0,b.Z)((0,b.Z)({},O),{},{projectId:F.curr.projectId}))},onLabelDelete:g.remove,onLabelModify:function(){},hideColorPicker:!0,hideEye:!0})})]})};P.default=Z}}]);
