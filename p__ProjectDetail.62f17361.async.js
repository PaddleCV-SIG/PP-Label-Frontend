(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[498],{91220:function(k,D,e){"use strict";e.d(D,{Z:function(){return h}});var O=e(64254);function h(a,c){var E;if(typeof Symbol=="undefined"||a[Symbol.iterator]==null){if(Array.isArray(a)||(E=(0,O.Z)(a))||c&&a&&typeof a.length=="number"){E&&(a=E);var I=0,A=function(){};return{s:A,n:function(){return I>=a.length?{done:!0}:{done:!1,value:a[I++]}},e:function(y){throw y},f:A}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var j=!0,L=!1,p;return{s:function(){E=a[Symbol.iterator]()},n:function(){var y=E.next();return j=y.done,y},e:function(y){L=!0,p=y},f:function(){try{!j&&E.return!=null&&E.return()}finally{if(L)throw p}}}}},70830:function(k,D,e){"use strict";e.d(D,{Z:function(){return O}});function O(h){throw new TypeError('"'+h+'" is read-only')}},41435:function(k,D,e){"use strict";e.d(D,{Z:function(){return I}});var O=e(94663),h=e(80112);function a(A){return Function.toString.call(A).indexOf("[native code]")!==-1}var c=e(18597);function E(A,j,L){return(0,c.Z)()?E=Reflect.construct:E=function(b,y,M){var B=[null];B.push.apply(B,y);var S=Function.bind.apply(b,B),R=new S;return M&&(0,h.Z)(R,M.prototype),R},E.apply(null,arguments)}function I(A){var j=typeof Map=="function"?new Map:void 0;return I=function(p){if(p===null||!a(p))return p;if(typeof p!="function")throw new TypeError("Super expression must either be null or a function");if(typeof j!="undefined"){if(j.has(p))return j.get(p);j.set(p,b)}function b(){return E(p,arguments,(0,O.Z)(this).constructor)}return b.prototype=Object.create(p.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),(0,h.Z)(b,p)},I(A)}},48627:function(k){k.exports={container:"container___2RXc3"}},18398:function(k){k.exports={_ppcard:"_ppcard___1sR0b",title:"title___2fjZe",shadow:"shadow___3SaOl",main:"main___IOVJu",block_l:"block_l___1ywNh",block_r:"block_r___Sg4L7",goup:"goup___1vznA"}},44943:function(){},11428:function(k,D,e){"use strict";var O=e(67294),h=e(48627),a=e.n(h),c=e(85893),E=function(A){return(0,c.jsx)("div",{className:"".concat(a().container),style:{backgroundImage:"url(./pics/background.png)"},children:A.children})};D.Z=E},68370:function(k,D,e){"use strict";e.r(D),e.d(D,{default:function(){return l}});var O=e(34792),h=e(48086),a=e(67294),c=e(48971),E=e(57663),I=e(71577),A=e(88983),j=e(47933),L=e(47673),p=e(24044),b=e(9715),y=e(93766),M=e(2824),B=e(89032),S=e(15746),R=e(11849),_=e(13062),g=e(71230),x=e(11700),V=e(18398),K=e.n(V),Y=e(37071),w=e(91156),q=e(64322),u=e(85893),z=function(f){return(0,u.jsxs)("div",{className:K()._ppcard,style:f.style,children:[(0,u.jsx)(g.Z,{className:K().titleRow,style:{display:f.title?void 0:"none"},children:(0,u.jsx)(x.Z,{className:K().title,children:f.title})}),(0,u.jsx)(g.Z,{style:{marginTop:26},children:(0,u.jsx)(S.Z,{span:24,style:(0,R.Z)({paddingLeft:30,paddingRight:30,textAlign:"center"},f.innerStyle),children:f.children})})]})},ee=function(f){var U=(0,q.Gd)(a.useState),Z=Y.Z.getQueryVariable("projectId");console.log("render ppcreater",f,Z);var T=(0,c.YB)().formatMessage({id:"component.PPCreater.projectName"}),$=(0,c.YB)().formatMessage({id:"component.PPCreater.datasePath"}),H=(0,c.YB)().formatMessage({id:"component.PPCreater.description"}),Q=(0,c.YB)().formatMessage({id:"component.PPCreater.maxPoints"}),n=(0,c.YB)().formatMessage({id:"component.PPCreater.annotationMode"}),t=(0,c.YB)().formatMessage({id:"component.PPCreater.pixelMode"}),s=(0,c.YB)().formatMessage({id:"component.PPCreater.polygonMode"}),i=(0,c.YB)().formatMessage({id:"component.PPCreater.update"}),r=(0,c.YB)().formatMessage({id:"component.PPCreater.create"}),m=(0,c.YB)().formatMessage({id:"component.PPCreater.cancel"}),N=function(F){Z?U.update(Z,{name:F.name,description:F.description,dataDir:F.dataDir,labelDir:F.labelDir}).then(function(){c.m8.push("/welcome")}):U.create({name:F.name,description:F.description,taskCategoryId:w.ux[f.taskCategory].id,dataDir:F.dataDir,labelDir:F.labelDir}).then(function(re){c.m8.push("/".concat((0,w.LV)(f.taskCategory),"?projectId=").concat(re.projectId))}).catch(function(){})},te=f.taskCategory?w.ux[f.taskCategory].name:null,C=y.Z.useForm(),J=(0,M.Z)(C,1),X=J[0];return(0,a.useEffect)(function(){U.getCurr(Z).then(function(W){console.log("project",W);var F={name:W==null?void 0:W.name,description:W==null?void 0:W.description,dataDir:W==null?void 0:W.dataDir};X.setFieldsValue(F)})},[]),(0,u.jsxs)("div",{className:K().shadow,style:f.style,children:[(0,u.jsx)("div",{id:"left",className:K().block_l,children:(0,u.jsx)(z,{title:te,style:{height:760,padding:"1.25rem 0"},children:(0,u.jsxs)(y.Z,{form:X,layout:"horizontal",size:"large",style:{marginTop:"5.69rem"},onFinish:function(F){N(F)},children:[(0,u.jsx)(y.Z.Item,{name:"name",label:T,labelCol:{span:6},wrapperCol:{span:16},rules:[{required:!0,message:"Please input project name!"}],style:{fontSize:"1.5rem"},children:(0,u.jsx)(p.Z,{size:"large",placeholder:"Words or numbers",style:{height:"3.13rem"}})}),(0,u.jsx)(y.Z.Item,{name:"dataDir",label:$,labelCol:{span:6},wrapperCol:{span:16},rules:[{required:!0,message:"Please input dataset path!"}],style:{fontSize:"1.5rem"},children:(0,u.jsx)(p.Z,{size:"large",placeholder:"Dataset Path",style:{height:"3.13rem"},disabled:Z!=null})}),(0,u.jsx)(y.Z.Item,{name:"description",label:H,labelCol:{span:6},wrapperCol:{span:16},rules:[{required:!1}],style:{fontSize:"1.5rem"},children:(0,u.jsx)(p.Z,{size:"large",placeholder:"Words or numbers",style:{height:"3.13rem"}})}),(0,u.jsx)(y.Z.Item,{name:"maxPoints",label:Q,labelCol:{span:6},wrapperCol:{span:16},rules:[{required:f.taskCategory=="keypointDetection",message:"Please input max points!"}],style:{fontSize:"1.5rem",display:f.taskCategory=="keypointDetection"?void 0:"none"},children:(0,u.jsx)(p.Z,{size:"large",placeholder:"Numbers (Int)",style:{height:"3.13rem"}})}),(0,u.jsx)(y.Z.Item,{name:"segmentationMode",label:n,labelCol:{span:6},wrapperCol:{span:16},rules:[{required:f.taskCategory=="semanticSegmentation",message:"Please select task category!"}],style:{fontSize:"1.5rem",display:f.taskCategory=="semanticSegmentation"?void 0:"none"},children:(0,u.jsx)("div",{className:K().goup,children:(0,u.jsxs)(j.ZP.Group,{defaultValue:1,size:"large",style:{height:"3.13rem"},children:[(0,u.jsx)(j.ZP,{value:1,children:t}),(0,u.jsx)(j.ZP,{value:2,children:s})]})})}),(0,u.jsxs)(y.Z.Item,{wrapperCol:{span:16,offset:6},children:[(0,u.jsx)(I.Z,{htmlType:"submit",type:"primary",style:{height:"2.5rem",width:"48%"},block:!0,children:Z?i:r}),"\xA0\xA0",(0,u.jsx)(I.Z,{htmlType:"button",style:{height:"2.5rem",width:"48%"},block:!0,onClick:function(){c.m8.push("/welcome")},children:m})]})]})})}),(0,u.jsx)("div",{id:"right",className:K().block_r,children:(0,u.jsx)(z,{style:{height:"43.63rem",padding:"0.5rem 0"},children:(0,u.jsx)("img",{src:f.imgSrc,style:{height:"43.63rem",width:"60rem"}})})})]})},o=ee,v=e(11428),P=function(){var f=(0,q.os)(Y.Z.getQueryVariable("taskCategory"));return f||(h.default.error("Task Category not present in url"),c.m8.push("/")),f in w.ux||(h.default.error("Invalid task category "+f),c.m8.push("/")),(0,u.jsx)(v.Z,{children:(0,u.jsx)(o,{imgSrc:"./pics/illustration.jpg",taskCategory:f})})},l=P},91156:function(k,D,e){"use strict";e.d(D,{F$:function(){return B},LV:function(){return K},ux:function(){return w}});var O=e(34792),h=e(94043),a=e.n(h),c=e(37071),E=e(81139),I=e(63891),A=e(13868),j=e(70676),L=e(54919),p=e(6276),b=e(59124),y=localStorage.getItem("basePath"),M=new E.VK(y?{basePath:y}:void 0),B=new I.U(M),S=new A.v(M),R=new L.W(M),_=new p.s(M),g=new b.C(M);function x(n){return JSON.parse(JSON.stringify(n))}var V=function(t,s,i){if(!i)return-1;for(var r=0;r<s.length;r++)if(t[i]==s[r][i])return r;return-1};function K(n){return n&&n.replace(/[A-Z]/g,function(t){return"_".concat(t.toLowerCase())})}function Y(n){return n&&(n.toLowerCase().replace(/([-_][a-z])/g,function(t){return t.toUpperCase().replace("-","").replace("_","")}),n)}var w={classification:{name:"Image Classification",avatar:"./pics/classification.jpg",id:1},detection:{name:"Detection",avatar:"./pics/object_detection.jpg",id:2},semanticSegmentation:{name:"Semantic Segmentation",avatar:"./pics/semantic_segmentation.jpg",id:3},instanceSegmentation:{name:"Instance Segmentation",avatar:"./pics/instance_segmentation.jpg",id:4},keypointDetection:{name:"Keypoint Detection",avatar:"./pics/keypoint_detection.jpg",id:5}},q=function(t,s){var i=_toConsumableArray(t);for(var r in t)i[r].active=!1;for(var m in t)V(t[m],s,"labelId")!=-1&&(i[m].active=!0);return console.log("activa labs",i),i};function u(n){return z.apply(this,arguments)}function z(){return z=_asyncToGenerator(_regeneratorRuntime.mark(function n(t){return _regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:B.getAll().then(function(r){console.log("get all projects",x(r)),t(x(r))}).catch(function(r){serviceUtils.parseError(r,_message)});case 1:case"end":return i.stop()}},n)})),z.apply(this,arguments)}function ee(n){return o.apply(this,arguments)}function o(){return o=_asyncToGenerator(_regeneratorRuntime.mark(function n(t){var s,i=arguments;return _regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:s=i.length>1&&i[1]!==void 0?i[1]:null,console.log("get project id ",t),B.get(t).then(function(N){return console.log("getProject res",N),s&&s(N),N}).catch(function(N){console.log("getProject err",N),serviceUtils.parseError(N,_message)});case 3:case"end":return m.stop()}},n)})),o.apply(this,arguments)}function v(n,t){return P.apply(this,arguments)}function P(){return P=_asyncToGenerator(_regeneratorRuntime.mark(function n(t,s){return _regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:console.log("delete pj, pjid",t),B.remove(t).then(function(m){console.log("delete project",m),u(s)}).catch(function(m){console.log(m),serviceUtils.parseError(m,_message)});case 2:case"end":return r.stop()}},n)})),P.apply(this,arguments)}function l(n){return d.apply(this,arguments)}function d(){return d=_asyncToGenerator(_regeneratorRuntime.mark(function n(t){return _regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:_.getAll().then(function(r){console.log("got tasks",r),t&&t(r)}).catch(function(r){console.log("get tasks err",r),serviceUtils.parseError(r,_message)});case 1:case"end":return i.stop()}},n)})),d.apply(this,arguments)}function f(n,t){return U.apply(this,arguments)}function U(){return U=_asyncToGenerator(_regeneratorRuntime.mark(function n(t,s){return _regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:console.log("get task id",t),_.get(t).then(function(m){console.log("got task ",m),s&&s(m)});case 2:case"end":return r.stop()}},n)})),U.apply(this,arguments)}function Z(n){return T.apply(this,arguments)}function T(){return T=_asyncToGenerator(_regeneratorRuntime.mark(function n(t){var s,i,r,m,N;return _regeneratorRuntime.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(t){C.next=2;break}return C.abrupt("return",0);case 2:return C.prev=2,C.next=5,B.getTasks(t);case 5:s=C.sent,i=0,r=_createForOfIteratorHelper(s);try{for(r.s();!(m=r.n()).done;)N=m.value,N.annotations.length!=0&&i++}catch(J){r.e(J)}finally{r.f()}return console.log("progress",Math.ceil(i/s.length*100)),C.abrupt("return",Math.ceil(i/s.length*100));case 13:return C.prev=13,C.t0=C.catch(2),console.log("get progress err",C.t0),serviceUtils.parseError(C.t0,_message),C.abrupt("return",0);case 18:case"end":return C.stop()}},n,null,[[2,13]])})),T.apply(this,arguments)}function $(n,t){console.log("getLabels projectid",n),!!n&&B.getLabels(n).then(function(s){console.log("got labels ",s),t(x(s))}).catch(function(s){serviceUtils.parseError(s,_message)})}function H(n,t,s){var i=LabelFromJSON(t);i.projectId=n,S.create(i).then(function(){$(n,s)}).catch(function(r){serviceUtils.parseError(r,_message)})}function Q(n,t){console.log("delete label",n),S.remove(n.labelId).then(function(){_message.error("Label "+n.name+" is deleted!"),$(n.projectId,t)}).catch(function(s){serviceUtils.parseError(s,_message)})}},5467:function(k,D,e){"use strict";e.d(D,{Z:function(){return O}});function O(h){return Object.keys(h).reduce(function(a,c){return(c.substr(0,5)==="data-"||c.substr(0,5)==="aria-"||c==="role")&&c.substr(0,7)!=="data-__"&&(a[c]=h[c]),a},{})}},47933:function(k,D,e){"use strict";e.d(D,{ZP:function(){return ee}});var O=e(96156),h=e(22122),a=e(67294),c=e(50132),E=e(94184),I=e.n(E),A=e(42550),j=e(65632),L=a.createContext(null),p=L.Provider,b=L,y=e(21687),M=function(o,v){var P={};for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&v.indexOf(l)<0&&(P[l]=o[l]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,l=Object.getOwnPropertySymbols(o);d<l.length;d++)v.indexOf(l[d])<0&&Object.prototype.propertyIsEnumerable.call(o,l[d])&&(P[l[d]]=o[l[d]]);return P},B=function(v,P){var l,d=a.useContext(b),f=a.useContext(j.E_),U=f.getPrefixCls,Z=f.direction,T=a.useRef(),$=(0,A.sQ)(P,T);a.useEffect(function(){(0,y.Z)(!("optionType"in v),"Radio","`optionType` is only support in Radio.Group.")},[]);var H=function(C){var J,X;(J=v.onChange)===null||J===void 0||J.call(v,C),(X=d==null?void 0:d.onChange)===null||X===void 0||X.call(d,C)},Q=v.prefixCls,n=v.className,t=v.children,s=v.style,i=M(v,["prefixCls","className","children","style"]),r=U("radio",Q),m=(0,h.Z)({},i);d&&(m.name=d.name,m.onChange=H,m.checked=v.value===d.value,m.disabled=v.disabled||d.disabled);var N=I()("".concat(r,"-wrapper"),(l={},(0,O.Z)(l,"".concat(r,"-wrapper-checked"),m.checked),(0,O.Z)(l,"".concat(r,"-wrapper-disabled"),m.disabled),(0,O.Z)(l,"".concat(r,"-wrapper-rtl"),Z==="rtl"),l),n);return a.createElement("label",{className:N,style:s,onMouseEnter:v.onMouseEnter,onMouseLeave:v.onMouseLeave},a.createElement(c.Z,(0,h.Z)({},m,{type:"radio",prefixCls:r,ref:$})),t!==void 0?a.createElement("span",null,t):null)},S=a.forwardRef(B);S.displayName="Radio";var R=S,_=e(28481),g=e(21770),x=e(97647),V=e(5467),K=a.forwardRef(function(o,v){var P=a.useContext(j.E_),l=P.getPrefixCls,d=P.direction,f=a.useContext(x.Z),U=(0,g.Z)(o.defaultValue,{value:o.value}),Z=(0,_.Z)(U,2),T=Z[0],$=Z[1],H=function(t){var s=T,i=t.target.value;"value"in o||$(i);var r=o.onChange;r&&i!==s&&r(t)},Q=function(){var t,s=o.prefixCls,i=o.className,r=i===void 0?"":i,m=o.options,N=o.optionType,te=o.buttonStyle,C=te===void 0?"outline":te,J=o.disabled,X=o.children,W=o.size,F=o.style,re=o.id,le=o.onMouseEnter,ce=o.onMouseLeave,ae=l("radio",s),ne="".concat(ae,"-group"),oe=X;if(m&&m.length>0){var se=N==="button"?"".concat(ae,"-button"):ae;oe=m.map(function(G){return typeof G=="string"||typeof G=="number"?a.createElement(R,{key:G.toString(),prefixCls:se,disabled:J,value:G,checked:T===G},G):a.createElement(R,{key:"radio-group-value-options-".concat(G.value),prefixCls:se,disabled:G.disabled||J,value:G.value,checked:T===G.value,style:G.style},G.label)})}var ie=W||f,ue=I()(ne,"".concat(ne,"-").concat(C),(t={},(0,O.Z)(t,"".concat(ne,"-").concat(ie),ie),(0,O.Z)(t,"".concat(ne,"-rtl"),d==="rtl"),t),r);return a.createElement("div",(0,h.Z)({},(0,V.Z)(o),{className:ue,style:F,onMouseEnter:le,onMouseLeave:ce,id:re,ref:v}),oe)};return a.createElement(p,{value:{onChange:H,value:T,disabled:o.disabled,name:o.name}},Q())}),Y=a.memo(K),w=function(o,v){var P={};for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&v.indexOf(l)<0&&(P[l]=o[l]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,l=Object.getOwnPropertySymbols(o);d<l.length;d++)v.indexOf(l[d])<0&&Object.prototype.propertyIsEnumerable.call(o,l[d])&&(P[l[d]]=o[l[d]]);return P},q=function(v,P){var l=a.useContext(b),d=a.useContext(j.E_),f=d.getPrefixCls,U=v.prefixCls,Z=w(v,["prefixCls"]),T=f("radio-button",U);return l&&(Z.checked=v.value===l.value,Z.disabled=v.disabled||l.disabled),a.createElement(R,(0,h.Z)({prefixCls:T},Z,{type:"radio",ref:P}))},u=a.forwardRef(q),z=R;z.Button=u,z.Group=Y;var ee=z},88983:function(k,D,e){"use strict";var O=e(38663),h=e.n(O),a=e(44943),c=e.n(a)},50132:function(k,D,e){"use strict";var O=e(22122),h=e(96156),a=e(81253),c=e(28991),E=e(6610),I=e(5991),A=e(10379),j=e(81907),L=e(67294),p=e(94184),b=e.n(p),y=function(M){(0,A.Z)(S,M);var B=(0,j.Z)(S);function S(R){var _;(0,E.Z)(this,S),_=B.call(this,R),_.handleChange=function(x){var V=_.props,K=V.disabled,Y=V.onChange;K||("checked"in _.props||_.setState({checked:x.target.checked}),Y&&Y({target:(0,c.Z)((0,c.Z)({},_.props),{},{checked:x.target.checked}),stopPropagation:function(){x.stopPropagation()},preventDefault:function(){x.preventDefault()},nativeEvent:x.nativeEvent}))},_.saveInput=function(x){_.input=x};var g="checked"in R?R.checked:R.defaultChecked;return _.state={checked:g},_}return(0,I.Z)(S,[{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"render",value:function(){var _,g=this.props,x=g.prefixCls,V=g.className,K=g.style,Y=g.name,w=g.id,q=g.type,u=g.disabled,z=g.readOnly,ee=g.tabIndex,o=g.onClick,v=g.onFocus,P=g.onBlur,l=g.onKeyDown,d=g.onKeyPress,f=g.onKeyUp,U=g.autoFocus,Z=g.value,T=g.required,$=(0,a.Z)(g,["prefixCls","className","style","name","id","type","disabled","readOnly","tabIndex","onClick","onFocus","onBlur","onKeyDown","onKeyPress","onKeyUp","autoFocus","value","required"]),H=Object.keys($).reduce(function(t,s){return(s.substr(0,5)==="aria-"||s.substr(0,5)==="data-"||s==="role")&&(t[s]=$[s]),t},{}),Q=this.state.checked,n=b()(x,V,(_={},(0,h.Z)(_,"".concat(x,"-checked"),Q),(0,h.Z)(_,"".concat(x,"-disabled"),u),_));return L.createElement("span",{className:n,style:K},L.createElement("input",(0,O.Z)({name:Y,id:w,type:q,required:T,readOnly:z,disabled:u,tabIndex:ee,className:"".concat(x,"-input"),checked:!!Q,onClick:o,onFocus:v,onBlur:P,onKeyUp:f,onKeyDown:l,onKeyPress:d,onChange:this.handleChange,autoFocus:U,ref:this.saveInput,value:Z},H)),L.createElement("span",{className:"".concat(x,"-inner")}))}}],[{key:"getDerivedStateFromProps",value:function(_,g){return"checked"in _?(0,c.Z)((0,c.Z)({},g),{},{checked:_.checked}):null}}]),S}(L.Component);y.defaultProps={prefixCls:"rc-checkbox",className:"",style:{},type:"checkbox",defaultChecked:!1,onFocus:function(){},onBlur:function(){},onChange:function(){},onKeyDown:function(){},onKeyPress:function(){},onKeyUp:function(){}},D.Z=y}}]);
