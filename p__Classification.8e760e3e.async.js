(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[672],{41435:function(c,D,e){"use strict";e.d(D,{Z:function(){return s}});var I=e(94663),_=e(80112);function E(u){return Function.toString.call(u).indexOf("[native code]")!==-1}var P=e(18597);function a(u,v,h){return(0,P.Z)()?a=Reflect.construct:a=function(M,S,n){var x=[null];x.push.apply(x,S);var o=Function.bind.apply(M,x),b=new o;return n&&(0,_.Z)(b,n.prototype),b},a.apply(null,arguments)}function s(u){var v=typeof Map=="function"?new Map:void 0;return s=function(C){if(C===null||!E(C))return C;if(typeof C!="function")throw new TypeError("Super expression must either be null or a function");if(typeof v!="undefined"){if(v.has(C))return v.get(C);v.set(C,M)}function M(){return a(C,arguments,(0,I.Z)(this).constructor)}return M.prototype=Object.create(C.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),(0,_.Z)(M,C)},s(u)}},52822:function(c){c.exports={roundBall:"roundBall___1pqu1",popover:"popover___1-PR6"}},5882:function(c){c.exports={listItem:"listItem___vtDXn",eye:"eye___AsLBS",roundBall:"roundBall___1J_R3",popover:"popover___1x-2R",delete:"delete___WHPf2",listItemActive:"listItemActive___3FRb7"}},56131:function(c){c.exports={labelList:"labelList___jvD05",listHeader:"listHeader___UM5UF",eye:"eye___II3Po",roundBall:"roundBall___j752J"}},78677:function(c){c.exports={container:"container___G0FNe"}},83930:function(c){c.exports={stage:"stage___3H5QL"}},80961:function(c){c.exports={leftToolbar:"leftToolbar___1xi4t",rightToolbar:"rightToolbar___3dNSB"}},82499:function(c){c.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1SHWL",toolBarButtonContainer:"toolBarButtonContainer___1jKUz",toolBarButton:"toolBarButton___3Ouq1",buttonText:"buttonText___10ls7",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AA28"}},73199:function(){},63097:function(c,D,e){"use strict";var I=e(20136),_=e(55241),E=e(2824),P=e(67294),a=e(52822),s=e.n(a),u=e(63144),v=e(85893),h=function(M){var S=(0,P.useState)(M.color||"#FFF"),n=(0,E.Z)(S,2),x=n[0],o=n[1];return(0,P.useEffect)(function(){o(M.color||"#FFF")},[M]),M.changeable?(0,v.jsx)(_.Z,{getPopupContainer:function(F){return F.parentElement||document.body},overlayClassName:s().popover,openClassName:s().popoverOpenClassName,placement:"bottom",content:(0,v.jsx)(u.xS,{disableAlpha:!0,color:x,onChange:function(F){o(F.hex)},onChangeComplete:M.onChange}),trigger:"click",children:(0,v.jsx)("div",{className:s().roundBall,style:{backgroundColor:x}})}):(0,v.jsx)("div",{className:s().roundBall,style:{backgroundColor:x}})};D.Z=h},5041:function(c,D,e){"use strict";e.d(D,{Z:function(){return H}});var I=e(54421),_=e(38272),E=e(57663),P=e(71577),a=e(2824),s=e(67294),u=e(56131),v=e.n(u),h=e(49111),C=e(19650),M=e(11849),S=e(5882),n=e.n(S),x=e(63097),o=e(85893),b=function(t){var f=(0,M.Z)({},t.label),A=(0,s.useState)(f.invisible),y=(0,a.Z)(A,2),O=y[0],l=y[1],g=(0,s.useState)(0),L=(0,a.Z)(g,2),i=L[0],d=L[1],K=t.hideEye?" ":(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("a",{className:n().eye,style:{backgroundImage:O?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(N){N.stopPropagation(),l(!O),t.onLabelModify(f)}})," "]}),J=t.hideColorPicker?(0,o.jsx)(o.Fragment,{}):(0,o.jsx)(x.Z,{color:f.color,changeable:!0,onChange:function(N){f.color=N.hex,t.onLabelModify(f)}}),G=(0,o.jsxs)(_.ZP.Item,{className:"".concat(n().listItem," ").concat(t.active?n().listItemActive:""),unselectable:"on",onClick:function(){t.onClick(f)},children:[(0,o.jsxs)(C.Z,{align:"center",size:5,children:[K,f.name,J]}),(0,o.jsx)("a",{className:n().delete,onClick:function(N){N.stopPropagation();var Y=new Date().getTime();Y-i<300||(d(Y),t.onLabelDelete(f))}})]});return G},F=b,r=e(71194),W=e(50146),V=e(47673),p=e(24044),$=e(9715),m=e(93766),B=e(48971),Z=["#FF0000","#008000","#0000FF","#FFFF00","#FFA500","#00FFFF","#8B00FF","#FFC0CB","#7CFC00","#007FFF","#800080","#36BF36","#DAA520","#800000","#008B8B","#B22222","#E6D933","#000080","#FF00FF","#FFFF99","#87CEEB","#5C50E6","#CD5C5C","#20B2AA","#E680FF","#4D1F00","#006374","#B399FF","#8B4513","#BA55D3","#C0C0C0","#808080","#000000"],R=function(t){var f,A,y=(0,B.YB)().formatMessage({id:"component.PPAddLabelModal.selectColor"}),O=(0,B.YB)().formatMessage({id:"component.PPAddLabelModal.addLabel"}),l=(0,B.YB)().formatMessage({id:"component.PPAddLabelModal.labelName"}),g=(0,B.YB)().formatMessage({id:"component.PPCreater.cancel"}),L=(0,B.YB)().formatMessage({id:"component.PPSegMode.ok"}),i=(0,s.useState)(((f=t.defaultLabel)===null||f===void 0?void 0:f.color)||Z[t.order||0]),d=(0,a.Z)(i,2),K=d[0],J=d[1];(0,s.useEffect)(function(){var z;J(((z=t.defaultLabel)===null||z===void 0?void 0:z.color)||Z[t.order||0])},[t]);var G=t.hideColorPicker?(0,o.jsx)(o.Fragment,{}):(0,o.jsx)(m.Z.Item,{label:y,name:"color",children:(0,o.jsx)(x.Z,{color:K,onChange:function(k){J(k.hex)}})}),X=m.Z.useForm(),N=(0,a.Z)(X,1),Y=N[0];return(0,o.jsx)(W.Z,{title:O,visible:t.visible,onCancel:t.onCancel,footer:null,children:(0,o.jsxs)(m.Z,{form:Y,name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!1,labelname:(A=t.defaultLabel)===null||A===void 0?void 0:A.name},onFinish:function(k){var Q={name:k.labelname,color:K};t.onLabelAdd(Q),Y.resetFields()},autoComplete:"off",children:[(0,o.jsx)(m.Z.Item,{label:l,name:"labelname",rules:[{required:!0,message:"Please input label name!"}],children:(0,o.jsx)(p.Z,{})}),G,(0,o.jsx)(m.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,o.jsxs)(C.Z,{children:[(0,o.jsx)(P.Z,{onClick:function(){var k;(k=t.onCancel)===null||k===void 0||k.call(0),Y.resetFields()},children:g}),(0,o.jsx)(P.Z,{type:"primary",htmlType:"submit",children:L})]})})]})})},U=R,j=function(t){var f,A=(0,B.YB)().formatMessage({id:"component.PPLabelList.addLabel"}),y=(0,B.YB)().formatMessage({id:"component.PPLabelList.labelList"}),O=(0,s.useState)(!1),l=(0,a.Z)(O,2),g=l[0],L=l[1];return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(_.ZP,{className:v().labelList,size:"large",header:(0,o.jsx)("div",{className:v().listHeader,children:y}),footer:(0,o.jsx)("div",{children:(0,o.jsx)(P.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){L(!0)},block:!0,children:A})}),bordered:!0,dataSource:t.labels,renderItem:function(d){var K;return(0,o.jsx)(F,{hideColorPicker:t.hideColorPicker,hideEye:t.hideEye,onClick:t.onLabelSelect,label:d,active:(K=t.activeIds)===null||K===void 0?void 0:K.has(d.labelId),onLabelDelete:t.onLabelDelete,onLabelModify:t.onLabelModify})}}),(0,o.jsx)(U,{hideColorPicker:t.hideColorPicker,order:(f=t.labels)===null||f===void 0?void 0:f.length,visible:g,onLabelAdd:function(d){t.onLabelAdd(d),L(!1)},onCancel:function(){L(!1)}})]})},H=j},8088:function(c,D,e){"use strict";var I=e(67294),_=e(78677),E=e.n(_),P=e(85893),a=function(u){return(0,P.jsx)("div",{className:"".concat(E().container," ").concat(u.className),children:u.children})};D.Z=a},57436:function(c,D,e){"use strict";var I=e(91220),_=e(2824),E=e(67294),P=e(65031),a=e(84420),s=e.n(a),u=e(83930),v=e.n(u),h=e(85893),C="./pics/basketball.jpg",M=function(n){var x=s()(n.imgSrc||""),o=(0,_.Z)(x,1),b=o[0],F=(0,E.useState)(0),r=(0,_.Z)(F,2),W=r[0],V=r[1],p=(0,E.useState)(0),$=(0,_.Z)(p,2),m=$[0],B=$[1],Z=(0,E.useState)({x:0,y:0}),R=(0,_.Z)(Z,2),U=R[0],j=R[1],H=(0,E.useState)({x:0,y:0}),T=(0,_.Z)(H,2),t=T[0],f=T[1];function A(){var i=document.getElementById("dr");i&&(V(i.clientWidth),B(i.clientHeight))}(0,E.useEffect)(function(){window.removeEventListener("resize",A),window.addEventListener("resize",A);var i=document.getElementById("dr");i&&(V(i.clientWidth),B(i.clientHeight))},[]);var y=[];if(n.annotations){var O=(0,I.Z)(n.annotations),l;try{for(O.s();!(l=O.n()).done;){var g=l.value;if(!!g){console.log("PPStage rendering annotation:",g,"annotation.tool:",g.tool);var L=void 0;switch(g.type){case"polygon":L=n.createPolygonFunc;break;case"brush":L=n.createBrushFunc;break;case"rubber":L=n.createBrushFunc;break;case"rectangle":L=n.createRectangleFunc;break;default:L=null}L&&y.push(L(g,n.onAnnotationModify,n.onAnnotationModifyComplete,n.scale,n.currentTool,n.setCurrentAnnotation,n.currentAnnotation,{x:-W/2-t.x,y:-m/2-t.y}))}}}catch(i){O.e(i)}finally{O.f()}}return(0,h.jsx)(P.Hf,{width:W,height:m,offsetX:-W/2,offsetY:-m/2,className:v().stage,children:(0,h.jsx)(P.mh,{onMouseDown:function(d){n.onMouseDown&&n.onMouseDown(d,-W/2-t.x,-m/2-t.y,n.scale)},onMouseMove:function(d){n.onMouseMove&&n.onMouseMove(d,n.scale)},onMouseUp:function(d){n.onMouseUp&&n.onMouseUp(d,n.scale)},onContextMenu:function(d){d.evt.preventDefault()},draggable:!1,children:(0,h.jsxs)(P.ZA,{draggable:n.currentTool=="mover",scaleX:n.scale,scaleY:n.scale,onDragEnd:function(d){n.currentTool=="mover"&&f({x:d.evt.offsetX-U.x,y:d.evt.offsetY-U.y})},onDragStart:function(d){n.currentTool=="mover"&&j({x:d.evt.offsetX,y:d.evt.offsetY})},children:[(0,h.jsx)(P.Ee,{draggable:!1,image:b,x:-((b==null?void 0:b.width)||0)/2,y:-((b==null?void 0:b.height)||0)/2}),y]})})})};D.Z=M},44434:function(c,D,e){"use strict";var I=e(67294),_=e(80961),E=e.n(_),P=e(85893),a=function(u){var v=E().leftToolbar;return u.disLoc=="right"&&(v=E().rightToolbar),(0,P.jsx)("div",{className:v,children:u.children})};D.Z=a},61541:function(c,D,e){"use strict";var I=e(49111),_=e(19650),E=e(67294),P=e(82499),a=e.n(P),s=e(85893),u=function(h){return(0,s.jsx)("div",{unselectable:"on",className:"".concat(a().toolBarButtonContainerWrapper," ").concat(h.active&&a().toolBarButtonContainerWrapperActive),onClick:h.onClick,children:(0,s.jsx)(_.Z,{align:"center",className:a().toolBarButtonContainer,size:0,children:(0,s.jsxs)(_.Z,{align:"center",direction:"vertical",className:a().toolBarButton,size:0,children:[(0,s.jsx)("img",{src:h.imgSrc}),(0,s.jsx)("div",{className:a().buttonText,children:h.children})]})})})};D.Z=u},29214:function(c,D,e){"use strict";e.r(D);var I=e(11849),_=e(20228),E=e(11382),P=e(34669),a=e(54458),s=e(34792),u=e(48086),v=e(2824),h=e(67294),C=e(73199),M=e.n(C),S=e(8088),n=e(61541),x=e(44434),o=e(5041),b=e(57436),F=e(64322),r=e(85893),W=function(){var p,$=(0,F.$L)(h.useState,h.useEffect,{label:{oneHot:!1,postSetCurr:y},tool:{defaultTool:"mover"},effectTrigger:{postTaskChange:O}}),m=(0,v.Z)($,10),B=m[0],Z=m[1],R=m[2],U=m[3],j=m[4],H=m[5],T=m[6],t=m[7],f=m[8],A=m[9];function y(l){if(t.isActive(l))U.create({taskId:j.curr.taskId,labelId:l.labelId,dataId:H.curr.dataId});else{var g=U.all.filter(function(L){return L.labelId==l.labelId})[0];U.remove(g.annotationId)}}function O(l,g){Z.setCurr(!0),!(!l||!g)&&(t.initActive(g),Z.setCurr(!1))}return(0,r.jsxs)(S.Z,{className:M().classes,children:[(0,r.jsxs)(x.Z,{children:[(0,r.jsx)(n.Z,{imgSrc:"./pics/buttons/zoom_in.png",onClick:function(){R.change(.1)},children:"Zoom in"}),(0,r.jsx)(n.Z,{imgSrc:"./pics/buttons/zoom_out.png",onClick:function(){R.change(-.1)},children:"Zoom out"}),(0,r.jsx)(n.Z,{imgSrc:"./pics/buttons/save.png",onClick:function(){u.default.info("Annotations are saved automatically. You don't need to click save.")},children:"Save"}),(0,r.jsx)(n.Z,{imgSrc:"./pics/buttons/move.png",active:B.curr=="mover",onClick:function(){B.setCurr("mover"),u.default.info("You can move the image now.")},children:"Move"})]}),(0,r.jsx)("div",{id:"dr",className:"mainStage",children:(0,r.jsxs)(E.Z,{tip:"loading",spinning:Z.curr,children:[(0,r.jsx)("div",{className:"draw",children:(0,r.jsx)(b.Z,{scale:R.curr,currentTool:B.curr,setCurrentAnnotation:function(){},onAnnotationModify:function(){},onAnnotationModifyComplete:function(){},imgSrc:H.imgSrc})}),(0,r.jsx)("div",{className:"pblock",children:(0,r.jsxs)("div",{className:"progress",children:[(0,r.jsx)(a.Z,{className:"progressBar",percent:T.progress,status:"active",showInfo:!1})," ",(0,r.jsxs)("span",{className:"progressDesc",children:["Current labeling ",j.currIdx==null?1:j.currIdx+1," of"," ",(p=j.all)===null||p===void 0?void 0:p.length,". Already labeled ",j.finished(T.progress)||0,"."]})]})}),(0,r.jsx)("div",{className:"prevTask",onClick:j.prevTask}),(0,r.jsx)("div",{className:"nextTask",onClick:j.nextTask})]})}),(0,r.jsxs)(x.Z,{disLoc:"right",children:[(0,r.jsx)(n.Z,{imgSrc:"./pics/buttons/export.png",onClick:function(){A(T.curr.projectId,"/home/lin/Desktop/data/pplabel/export/")},children:"Export"}),(0,r.jsx)(n.Z,{imgSrc:"./pics/buttons/data_division.png",onClick:function(){return f(T.curr.projectId,{train:.5,validation:.3,test:.2})},children:"Split Dataset"})]}),(0,r.jsx)("div",{className:"rightSideBar",children:(0,r.jsx)(o.Z,{labels:t.all,activeIds:t.activeIds,onLabelSelect:t.onSelect,onLabelAdd:function(g){return t.create((0,I.Z)((0,I.Z)({},g),{},{projectId:T.curr.projectId}))},onLabelDelete:t.remove,onLabelModify:function(){},hideColorPicker:!0,hideEye:!0})})]})};D.default=W}}]);
