(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[454],{85024:function(v){v.exports={listItem:"listItem___u4Q82",eye:"eye___BwaRm",delete:"delete___31JB_",roundBall:"roundBall___23A7l",popover:"popover___1BNET",annotationId:"annotationId___zAzX4",labelName:"labelName___2ohxn",listItemActive:"listItemActive___2QnA3"}},56159:function(v){v.exports={labelList:"labelList___v7C6K",listHeader:"listHeader___1aY8R",eye:"eye___2MKbp",roundBall:"roundBall___187XH"}},26647:function(v){v.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1FTWb",toolBarButtonContainer:"toolBarButtonContainer___1Vahn",toolBarButton:"toolBarButton___3mR2H",buttonText:"buttonText___Y0WDm",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3lRZ8",popover:"popover___3zzu2",slider:"slider___ALra-",popoverLeft:"popoverLeft___15lGe"}},8982:function(v){v.exports={RSPop1:"RSPop1___ei_bv",RSPop2:"RSPop2___9d5gM"}},75721:function(v){v.exports={segment:"segment___1EX9A",mainStage:"mainStage___nDwOp",draw:"draw___1Aue1",pblock:"pblock___19sdD",progress:"progress___1595f",rightSideBar:"rightSideBar___1JzJc",determinOutline:"determinOutline___2vG7S"}},14836:function(v,O,n){"use strict";n.d(O,{Z:function(){return J}});var tn=n(54421),D=n(38272),en=n(57663),N=n(71577),z=n(67294),Y=n(56159),A=n.n(Y),S=n(49111),H=n(19650),m=n(2824),W=n(11849),d=n(85024),x=n.n(d),Z=n(63097),l=n(85893),P=function(o){var c=(0,W.Z)({},o.annotation),L=(0,z.useState)(c.invisible),f=(0,m.Z)(L,2),i=f[0],t=f[1],E=(0,z.useState)(0),y=(0,m.Z)(E,2),p=y[0],g=y[1];(0,z.useEffect)(function(){t(o.annotation.invisible)},[o.annotation.invisible]);var I=(0,l.jsxs)(D.ZP.Item,{className:"".concat(x().listItem," ").concat(o.active?x().listItemActive:""),unselectable:"on",onClick:function(){o.onClick(c)},children:[(0,l.jsxs)(H.Z,{align:"center",size:5,children:[(0,l.jsx)("a",{className:x().eye,style:{backgroundImage:i?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(C){C.stopPropagation(),t(!i),o.onAnnotationModify(c)}})," ",(0,l.jsx)("span",{className:x().annotationId,children:c.frontendId}),(0,l.jsx)("span",{className:x().labelName,children:c.label.name}),(0,l.jsx)(Z.Z,{color:c.label.color})]}),(0,l.jsx)("a",{className:x().delete,onClick:function(C){C.stopPropagation();var T=new Date().getTime();T-p<300||(g(T),o.onAnnotationDelete(c))}})]});return I},_=P,U=n(48971),b=function(o){var c=(0,U.YB)().formatMessage({id:"component.PPAnnotationList.annotationList"}),L=(0,U.YB)().formatMessage({id:"component.PPAnnotationList.addAnnotation"});return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(D.ZP,{className:A().labelList,size:"large",header:(0,l.jsx)("div",{className:A().listHeader,children:c}),bordered:!0,dataSource:o.annotations,renderItem:function(i){var t;return(0,l.jsx)(_,{onClick:o.onAnnotationSelect,annotation:i,active:i.frontendId==((t=o.currAnnotation)===null||t===void 0?void 0:t.frontendId),onAnnotationDelete:o.onAnnotationDelete,onAnnotationModify:o.onAnnotationModify})},footer:(0,l.jsx)("div",{children:(0,l.jsx)(N.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){o.onAnnotationAdd()},block:!0,children:L})})})})},J=b},27992:function(v,O,n){"use strict";var tn=n(20136),D=n(55241),en=n(13062),N=n(71230),z=n(77883),Y=n(70507),A=n(89032),S=n(15746),H=n(66126),m=n(75454),W=n(2824),d=n(67294),x=n(61541),Z=n(26647),l=n.n(Z),P=n(85893),_=0,U=100,b=10,J=function(o){var c=(0,d.useState)(p(o.size)),L=(0,W.Z)(c,2),f=L[0],i=L[1];function t(g){i(p(g))}var E=o.minSize==null?_:o.minSize,y=o.maxSize==null?U:o.maxSize;function p(g){return g==null?b:g<=E?E:g>=y?y:g}return(0,d.useEffect)(function(){t(o.size)},[o.size]),(0,P.jsxs)(D.Z,{overlayClassName:"".concat(l().popover," ").concat(o.disLoc=="left"?l().popoverLeft:""),placement:o.disLoc||"right",content:(0,P.jsxs)(N.Z,{children:[(0,P.jsx)(S.Z,{span:16,children:(0,P.jsx)(m.Z,{className:l().slider,value:f,max:y,min:E,onChange:function(I){var h;(h=o.onChange)===null||h===void 0||h.call(0,I)},tooltipVisible:!1})}),(0,P.jsx)(S.Z,{span:8,children:(0,P.jsx)(Y.Z,{min:E,max:y,value:f,onChange:function(I){var h;(h=o.onChange)===null||h===void 0||h.call(0,I)},step:10})})]}),trigger:"hover",children:[" ",(0,P.jsx)(x.Z,{imgSrc:o.imgSrc||"",onClick:o.onClick,active:o.active,children:o.children})]})};O.Z=J},21028:function(v,O,n){"use strict";n.r(O),n.d(O,{MOST_HISTORY_STEPS:function(){return p},default:function(){return I}});var tn=n(57663),D=n(71577),en=n(20136),N=n(55241),z=n(34669),Y=n(54458),A=n(2824),S=n(67294),H=n(75721),m=n.n(H),W=n(8088),d=n(61541),x=n(44434),Z=n(27992),l=n(5041),P=n(57436),_=n(14836),U=n(13062),b=n(71230),J=n(66126),K=n(75454),o=n(89032),c=n(15746),L=n(8982),f=n.n(L),i=n(48971),t=n(85893),E=function(C){var T=(0,i.YB)().formatMessage({id:"component.PPMedical.windowWidth"}),F=(0,i.YB)().formatMessage({id:"component.PPMedical.windowLevel"});return(0,t.jsxs)("div",{children:[(0,t.jsxs)(b.Z,{children:[(0,t.jsx)(c.Z,{span:6,className:f().Pop1,children:(0,t.jsx)("span",{children:T})}),(0,t.jsx)(c.Z,{span:18,className:f().Pop2,children:(0,t.jsx)(K.Z,{min:1,max:C.wwValue||100,defaultValue:37})})]}),(0,t.jsxs)(b.Z,{children:[(0,t.jsx)(c.Z,{span:6,className:f().Pop1,children:(0,t.jsx)("span",{children:F})}),(0,t.jsx)(c.Z,{span:18,className:f().Pop2,children:(0,t.jsx)(K.Z,{min:1,max:C.wlValue||100,defaultValue:37})})]})]})},y=E,p=40,g=function(){var C,T=(0,S.useState)(void 0),F=(0,A.Z)(T,2),B=F[0],V=F[1],gn=(0,S.useState)({color:"",name:""}),on=(0,A.Z)(gn,2),G=on[0],an=on[1],hn=(0,S.useState)(),sn=(0,A.Z)(hn,2),j=sn[0],Q=sn[1],Sn=(0,S.useState)([]),rn=(0,A.Z)(Sn,2),u=rn[0],xn=rn[1],Pn=(0,S.useState)(10),ln=(0,A.Z)(Pn,2),$=ln[0],dn=ln[1],Bn=(0,S.useState)(1),cn=(0,A.Z)(Bn,2),k=cn[0],w=cn[1],un=function(e){e||w(1),e<.1||e>3?w(1):w(e)},M=function(e){Q(e),e!=null&&e.label&&an(e.label)},R=function(e){xn(e)};(0,S.useEffect)(function(){localStorage.removeItem("history"),X([])},[]);function X(a,e){var s=localStorage.getItem("history"),r=s?JSON.parse(s):{index:-1,items:[]},fn={currentAnnotation:e,annotations:a};if(JSON.stringify(r.items[r.index])!=JSON.stringify(fn)){var Kn=r.index>p?r.index-p:0,Hn=r.items.splice(Kn,r.index==0?1:r.index+1);r.items=Hn.concat([fn]),r.index<=p?r.index++:r.index=p+1,localStorage.setItem("history",JSON.stringify(r))}}var Mn=function(){var e=localStorage.getItem("history");if(!!e){var s=JSON.parse(e);if(!!s&&!(s.index>=s.items.length-1)){s.index++,localStorage.setItem("history",JSON.stringify(s));var r=s.items[s.index];Q(r.currentAnnotation),R(r.annotations)}}},An=function(){var e=localStorage.getItem("history");if(!!e){var s=JSON.parse(e);if(!(!s||!s.index)&&!(s.index<=0)){s.index--,localStorage.setItem("history",JSON.stringify(s));var r=s.items[s.index];Q(r.currentAnnotation),R(r.annotations)}}},q=function(e){for(var s=[],r=0;r<u.length;r++)u[r].annotationId==e.annotationId?s.push(e):s.push(u[r]);M(e),R(s)},vn=drawBrush({currentLabel:G,brushSize:$,currentTool:B,annotations:u,currentAnnotation:j,onAnnotationAdd:function(e){var s=u.concat([e]);R(s),j||M(e)},onAnnotationModify:q,onMouseUp:function(){X(u,j)}}),mn=drawPolygon({currentLabel:G,brushSize:$,currentTool:B,annotations:u,currentAnnotation:j,onAnnotationAdd:function(e){var s=u.concat([e]);R(s),j||M(e)},onAnnotationModify:q,onMouseUp:function(){X(u,j)}}),nn=B=="polygon"?mn:vn,pn=(0,i.YB)().formatMessage({id:"pages.toolBar.polygon"}),Cn=(0,i.YB)().formatMessage({id:"pages.toolBar.brush"}),yn=(0,i.YB)().formatMessage({id:"pages.toolBar.rubber"}),jn=(0,i.YB)().formatMessage({id:"pages.toolBar.zoomIn"}),Ln=(0,i.YB)().formatMessage({id:"pages.toolBar.zoomOut"}),En=(0,i.YB)().formatMessage({id:"pages.toolBar.move"}),Zn=(0,i.YB)().formatMessage({id:"pages.toolBar.unDo"}),In=(0,i.YB)().formatMessage({id:"pages.toolBar.reDo"}),On=(0,i.YB)().formatMessage({id:"pages.toolBar.save"}),Dn=(0,i.YB)().formatMessage({id:"pages.toolBar.edit"}),bn=(0,i.YB)().formatMessage({id:"pages.toolBar.clearMark"}),Tn=(0,i.YB)().formatMessage({id:"pages.toolBar.interactor"}),Rn=(0,i.YB)().formatMessage({id:"pages.toolBar.segmentThreshold"}),Nn=(0,i.YB)().formatMessage({id:"pages.toolBar.transparency"}),zn=(0,i.YB)().formatMessage({id:"pages.toolBar.visualRadius"}),Yn=(0,i.YB)().formatMessage({id:"pages.toolBar.determineOutline"}),Wn=(0,i.YB)().formatMessage({id:"pages.toolBar.medicalSetting"}),_n=(0,i.YB)().formatMessage({id:"pages.toolBar.divideData"}),Un=(0,i.YB)().formatMessage({id:"pages.toolBar.export"});return(0,t.jsxs)(W.Z,{className:m().segment,children:[(0,t.jsxs)(x.Z,{children:[(0,t.jsx)(d.Z,{imgSrc:"./pics/buttons/polygon.png",active:B=="polygon",onClick:function(){V("polygon"),M(void 0)},children:pn}),(0,t.jsx)(d.Z,{imgSrc:"./pics/buttons/edit.png",children:Dn}),(0,t.jsx)(PPBrush,{size:$,active:B=="brush",onClick:function(){B!="rubber"&&B!="brush"&&M(void 0),V("brush")},onChange:function(e){dn(e)},children:Cn}),(0,t.jsx)(PPBrush,{size:$,active:B=="rubber",onClick:function(){B!="rubber"&&B!="brush"&&M(void 0),V("rubber")},onChange:function(e){dn(e)},imgSrc:"./pics/buttons/rubber.png",children:yn}),(0,t.jsx)(d.Z,{imgSrc:"./pics/buttons/zoom_in.png",onClick:function(){un(k+.1)},children:jn}),(0,t.jsx)(d.Z,{imgSrc:"./pics/buttons/zoom_out.png",onClick:function(){un(k-.1)},children:Ln}),(0,t.jsx)(d.Z,{imgSrc:"./pics/buttons/save.png",children:On}),(0,t.jsx)(d.Z,{imgSrc:"./pics/buttons/move.png",onClick:function(){V("mover")},children:En}),(0,t.jsx)(d.Z,{imgSrc:"./pics/buttons/prev.png",onClick:function(){An()},children:Zn}),(0,t.jsx)(d.Z,{imgSrc:"./pics/buttons/next.png",onClick:function(){Mn()},children:In}),(0,t.jsx)(d.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:bn})]}),(0,t.jsxs)("div",{id:"dr",className:m().mainStage,children:[(0,t.jsx)("div",{className:m().draw,children:(0,t.jsx)(P.Z,{width:(C=document.getElementById("dr"))===null||C===void 0?void 0:C.clientWidth,scale:k,annotations:u,currentTool:B,currentAnnotation:j,setCurrentAnnotation:M,onAnnotationModify:q,onAnnotationModifyComplete:function(){X(u,j)},onMouseDown:nn.onMouseDown,onMouseMove:nn.onMouseMove,onMouseUp:nn.onMouseUp,createPolygonFunc:mn.createElementsFunc,createBrushFunc:vn.createElementsFunc})}),(0,t.jsx)("div",{className:m().pblock,children:(0,t.jsx)("div",{className:m().progress,children:(0,t.jsx)(Y.Z,{percent:50,status:"active"})})})]}),(0,t.jsxs)(x.Z,{disLoc:"right",children:[(0,t.jsx)(d.Z,{imgSrc:"./pics/buttons/intelligent_interaction.png",children:Tn}),(0,t.jsx)(Z.Z,{imgSrc:"./pics/buttons/threshold.png",disLoc:"left",children:Rn}),(0,t.jsx)(Z.Z,{imgSrc:"./pics/buttons/alpha.png",disLoc:"left",children:Nn}),(0,t.jsx)(Z.Z,{imgSrc:"./pics/buttons/radius.png",disLoc:"left",children:zn}),(0,t.jsxs)(N.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Setting of medical",content:(0,t.jsx)(y,{}),trigger:"hover",children:[" ",(0,t.jsx)(d.Z,{imgSrc:"./pics/buttons/medical_setting.png",children:Wn})]}),(0,t.jsx)(d.Z,{imgSrc:"./pics/buttons/data_division.png",children:_n}),(0,t.jsx)(d.Z,{imgSrc:"./pics/buttons/export.png",children:Un})]}),(0,t.jsxs)("div",{className:m().rightSideBar,children:[(0,t.jsx)("div",{className:m().determinOutline,children:(0,t.jsx)(D.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",block:!0,onClick:function(){M(void 0)},children:Yn})}),(0,t.jsx)(l.Z,{selectedLabel:G,onLabelSelect:function(e){an(e),M(void 0)},onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}}),(0,t.jsx)(_.Z,{selectedAnnotation:j,annotations:u,onAnnotationSelect:function(e){e!=null&&e.delete||M(e)},onAnnotationAdd:function(){},onAnnotationModify:function(){},onAnnotationDelete:function(e){R(u.filter(function(s){return s.annotationId!=e.annotationId})),M(void 0)}})]})]})},I=g}}]);
