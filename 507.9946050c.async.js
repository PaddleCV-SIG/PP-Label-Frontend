(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[507],{52822:function(v){v.exports={roundBall:"roundBall___1pqu1",popover:"popover___1-PR6"}},5882:function(v){v.exports={listItem:"listItem___vtDXn",eye:"eye___AsLBS",roundBall:"roundBall___1J_R3",popover:"popover___1x-2R",delete:"delete___WHPf2",listItemActive:"listItemActive___3FRb7"}},56131:function(v){v.exports={labelList:"labelList___jvD05",listHeader:"listHeader___UM5UF",eye:"eye___II3Po",roundBall:"roundBall___j752J"}},78677:function(v){v.exports={container:"container___G0FNe"}},80961:function(v){v.exports={leftToolbar:"leftToolbar___1xi4t",rightToolbar:"rightToolbar___3dNSB"}},82499:function(v){v.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1SHWL",toolBarButtonContainer:"toolBarButtonContainer___1jKUz",toolBarButton:"toolBarButton___3Ouq1",buttonText:"buttonText___10ls7",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AA28"}},63097:function(v,E,n){"use strict";var W=n(20136),_=n(55241),c=n(2824),u=n(67294),i=n(52822),r=n.n(i),s=n(63144),f=n(85893),x=function(M){var o=(0,u.useState)(M.color||"#FFF"),D=(0,c.Z)(o,2),T=D[0],e=D[1];return(0,u.useEffect)(function(){e(M.color||"#FFF")},[M]),M.changeable?(0,f.jsx)(_.Z,{getPopupContainer:function(U){return U.parentElement||document.body},overlayClassName:r().popover,openClassName:r().popoverOpenClassName,placement:"bottom",content:(0,f.jsx)(s.xS,{disableAlpha:!0,color:T,onChange:function(U){e(U.hex)},onChangeComplete:M.onChange}),trigger:"click",children:(0,f.jsx)("div",{className:r().roundBall,style:{backgroundColor:T}})}):(0,f.jsx)("div",{className:r().roundBall,style:{backgroundColor:T}})};E.Z=x},5041:function(v,E,n){"use strict";n.d(E,{Z:function(){return X}});var W=n(54421),_=n(38272),c=n(57663),u=n(71577),i=n(2824),r=n(67294),s=n(56131),f=n.n(s),x=n(49111),N=n(19650),M=n(11849),o=n(5882),D=n.n(o),T=n(63097),e=n(85893),H=function(t){var d=(0,M.Z)({},t.label),P=(0,r.useState)(d.invisible),y=(0,i.Z)(P,2),b=y[0],F=y[1],j=(0,r.useState)(0),h=(0,i.Z)(j,2),B=h[0],C=h[1],g=t.hideEye?" ":(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("a",{className:D().eye,style:{backgroundImage:b?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(O){O.stopPropagation(),F(!b),t.onLabelModify(d)}})," "]}),A=t.hideColorPicker?(0,e.jsx)(e.Fragment,{}):(0,e.jsx)(T.Z,{color:d.color,changeable:!0,onChange:function(O){d.color=O.hex,t.onLabelModify(d)}}),K=(0,e.jsxs)(_.ZP.Item,{className:"".concat(D().listItem," ").concat(t.active?D().listItemActive:""),unselectable:"on",onClick:function(){t.onClick(d)},children:[(0,e.jsxs)(N.Z,{align:"center",size:5,children:[g,d.name,A]}),(0,e.jsx)("a",{className:D().delete,onClick:function(O){O.stopPropagation();var R=new Date().getTime();R-B<300||(C(R),t.onLabelDelete(d))}})]});return K},U=H,J=n(71194),k=n(50146),Q=n(47673),Y=n(24044),w=n(9715),Z=n(93766),L=n(48971),S=["#FF0000","#008000","#0000FF","#FFFF00","#FFA500","#00FFFF","#8B00FF","#FFC0CB","#7CFC00","#007FFF","#800080","#36BF36","#DAA520","#800000","#008B8B","#B22222","#E6D933","#000080","#FF00FF","#FFFF99","#87CEEB","#5C50E6","#CD5C5C","#20B2AA","#E680FF","#4D1F00","#006374","#B399FF","#8B4513","#BA55D3","#C0C0C0","#808080","#000000"],$=function(t){var d,P,y=(0,L.YB)().formatMessage({id:"component.PPAddLabelModal.selectColor"}),b=(0,L.YB)().formatMessage({id:"component.PPAddLabelModal.addLabel"}),F=(0,L.YB)().formatMessage({id:"component.PPAddLabelModal.labelName"}),j=(0,L.YB)().formatMessage({id:"component.PPCreater.cancel"}),h=(0,L.YB)().formatMessage({id:"component.PPSegMode.ok"}),B=(0,r.useState)(((d=t.defaultLabel)===null||d===void 0?void 0:d.color)||S[t.order||0]),C=(0,i.Z)(B,2),g=C[0],A=C[1];(0,r.useEffect)(function(){var a;A(((a=t.defaultLabel)===null||a===void 0?void 0:a.color)||S[t.order||0])},[t]);var K=t.hideColorPicker?(0,e.jsx)(e.Fragment,{}):(0,e.jsx)(Z.Z.Item,{label:y,name:"color",children:(0,e.jsx)(T.Z,{color:g,onChange:function(l){A(l.hex)}})}),I=Z.Z.useForm(),O=(0,i.Z)(I,1),R=O[0];return(0,e.jsx)(k.Z,{title:b,visible:t.visible,onCancel:t.onCancel,footer:null,children:(0,e.jsxs)(Z.Z,{form:R,name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!1,labelname:(P=t.defaultLabel)===null||P===void 0?void 0:P.name},onFinish:function(l){var m={name:l.labelname,color:g};t.onLabelAdd(m),R.resetFields()},autoComplete:"off",children:[(0,e.jsx)(Z.Z.Item,{label:F,name:"labelname",rules:[{required:!0,message:"Please input label name!"}],children:(0,e.jsx)(Y.Z,{})}),K,(0,e.jsx)(Z.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,e.jsxs)(N.Z,{children:[(0,e.jsx)(u.Z,{onClick:function(){var l;(l=t.onCancel)===null||l===void 0||l.call(0),R.resetFields()},children:j}),(0,e.jsx)(u.Z,{type:"primary",htmlType:"submit",children:h})]})})]})})},p=$,z=function(t){var d,P=(0,L.YB)().formatMessage({id:"component.PPLabelList.addLabel"}),y=(0,L.YB)().formatMessage({id:"component.PPLabelList.labelList"}),b=(0,r.useState)(!1),F=(0,i.Z)(b,2),j=F[0],h=F[1];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(_.ZP,{className:f().labelList,size:"large",header:(0,e.jsx)("div",{className:f().listHeader,children:y}),footer:(0,e.jsx)("div",{children:(0,e.jsx)(u.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){h(!0)},block:!0,children:P})}),bordered:!0,dataSource:t.labels,renderItem:function(C){var g;return(0,e.jsx)(U,{hideColorPicker:t.hideColorPicker,hideEye:t.hideEye,onClick:t.onLabelSelect,label:C,active:(g=t.activeIds)===null||g===void 0?void 0:g.has(C.labelId),onLabelDelete:t.onLabelDelete,onLabelModify:t.onLabelModify})}}),(0,e.jsx)(p,{hideColorPicker:t.hideColorPicker,order:(d=t.labels)===null||d===void 0?void 0:d.length,visible:j,onLabelAdd:function(C){t.onLabelAdd(C),h(!1)},onCancel:function(){h(!1)}})]})},X=z},8088:function(v,E,n){"use strict";var W=n(67294),_=n(78677),c=n.n(_),u=n(85893),i=function(s){return(0,u.jsx)("div",{className:"".concat(c().container," ").concat(s.className),children:s.children})};E.Z=i},57436:function(v,E,n){"use strict";var W=n(91220),_=n(2824),c=n(67294),u=n(65031),i=n(84420),r=n.n(i),s=n(85893),f="./pics/basketball.jpg";function x(M){switch(M){case"mover":return"move";case"rectangle":case"polygon":return"crosshair";default:return"default"}}var N=function(o){var D=r()(o.imgSrc||f),T=(0,_.Z)(D,1),e=T[0],H=(e==null?void 0:e.width)||0,U=(e==null?void 0:e.height)||0,J=o.transparency==null?0:o.transparency*.01,k=(0,c.useState)(0),Q=(0,_.Z)(k,2),Y=Q[0],w=Q[1],Z=(0,c.useState)(0),L=(0,_.Z)(Z,2),S=L[0],$=L[1],p=(0,c.useState)({x:0,y:0}),z=(0,_.Z)(p,2),X=z[0],V=z[1],t=(0,c.useRef)(null),d=(0,c.useRef)(null),P=(0,c.useRef)(null);function y(){var a=document.getElementById("dr");a&&(w(a.clientWidth),$(a.clientHeight))}(0,c.useEffect)(function(){console.log("try to decode");var a=new XMLHttpRequest;a.open("GET","/test-10.bin",!0),a.responseType="arraybuffer",a.onload=function(l){console.log("onload");var m=a.response,q=new Uint8Array(m);console.log(m,q);var G=(0,W.Z)(q),ee;try{for(G.s();!(ee=G.n()).done;){var ne=ee.value;console.log(ne)}}catch(te){G.e(te)}finally{G.f()}},a.send()},[]),(0,c.useEffect)(function(){window.removeEventListener("resize",y),window.addEventListener("resize",y);var a=document.getElementById("dr");a&&(w(a.clientWidth),$(a.clientHeight))},[]),(0,c.useEffect)(function(){!t.current||(t.current.container().style.cursor=x(o.currentTool))},[o.currentTool]);var b=function(l){return{e:l,mouseX:(l.evt.offsetX-X.x-Y/2)/o.scale+H/2,mouseY:(l.evt.offsetY-X.y-S/2)/o.scale+U/2,canvasRef:P,layerRef:d}},F=function(l){var m;(m=o.drawTool)===null||m===void 0||m.onMouseDown(b(l))},j=function(l){var m;(m=o.drawTool)===null||m===void 0||m.onMouseMove(b(l))},h=function(l){var m;(m=o.drawTool)===null||m===void 0||m.onMouseUp(b(l))},B=function(l){l.cancelBubble=!0,l.evt.preventDefault()},C=[];if(o.annotations){var g={onDrag:o.onAnnotationModify,onDragEnd:o.onAnnotationModifyComplete,scale:o.scale,currentTool:o.currentTool,onSelect:o.setCurrentAnnotation,stageRef:t,currentAnnotation:o.currentAnnotation,transparency:J,canvasRef:P},A=(0,W.Z)(o.annotations),K;try{for(A.s();!(K=A.n()).done;){var I=K.value;if(!!I){g.annotation=I;var O=o.drawTool.createElementsFunc(g);C.push(O)}}}catch(a){A.e(a)}finally{A.f()}}var R=o.currentTool=="mover";return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("canvas",{style:{display:"none"},ref:P,width:e==null?void 0:e.width,height:e==null?void 0:e.height}),(0,s.jsxs)(u.Hf,{width:Y,height:S,offsetX:-Y/2,offsetY:-S/2,className:"stage",ref:t,draggable:R,onDragMove:function(l){o.currentTool=="mover"},onDragEnd:function(l){o.currentTool=="mover"&&(console.log("dragEndPosX,Y: (".concat(l.target.x(),",").concat(l.target.y(),")")),V({x:l.target.x(),y:l.target.y()}))},children:[(0,s.jsx)(u.mh,{onMouseDown:F,onMouseMove:j,onMouseUp:h,onContextMenu:B,scaleX:o.scale,scaleY:o.scale,draggable:!1,children:(0,s.jsx)(u.Ee,{name:"baseImage",draggable:!1,image:e,x:-((e==null?void 0:e.width)||0)/2,y:-((e==null?void 0:e.height)||0)/2})}),(0,s.jsxs)(u.mh,{ref:d,name:"annotation",scaleX:o.scale,scaleY:o.scale,onMouseDown:F,onMouseMove:j,onMouseUp:h,onContextMenu:B,opacity:J,children:[C,(0,s.jsx)(u.Ee,{x:-((e==null?void 0:e.width)||0)/2,y:-((e==null?void 0:e.height)||0)/2,image:P.current||void 0})]})]})]})};E.Z=N},44434:function(v,E,n){"use strict";var W=n(67294),_=n(80961),c=n.n(_),u=n(85893),i=function(s){var f=c().leftToolbar;return s.disLoc=="right"&&(f=c().rightToolbar),(0,u.jsx)("div",{className:f,children:s.children})};E.Z=i},61541:function(v,E,n){"use strict";var W=n(49111),_=n(19650),c=n(67294),u=n(82499),i=n.n(u),r=n(85893),s=function(x){return(0,r.jsx)("div",{unselectable:"on",className:"".concat(i().toolBarButtonContainerWrapper," ").concat(x.active&&i().toolBarButtonContainerWrapperActive),onClick:x.onClick,children:(0,r.jsx)(_.Z,{align:"center",className:i().toolBarButtonContainer,size:0,children:(0,r.jsxs)(_.Z,{align:"center",direction:"vertical",className:i().toolBarButton,size:0,children:[(0,r.jsx)("img",{src:x.imgSrc}),(0,r.jsx)("div",{className:i().buttonText,children:x.children})]})})})};E.Z=s}}]);
