(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[333],{41435:function(u,E,e){"use strict";e.d(E,{Z:function(){return l}});var I=e(94663),h=e(80112);function L(r){return Function.toString.call(r).indexOf("[native code]")!==-1}var P=e(18597);function x(r,o,Z){return(0,P.Z)()?x=Reflect.construct:x=function(d,g,_){var c=[null];c.push.apply(c,g);var a=Function.bind.apply(d,c),f=new a;return _&&(0,h.Z)(f,_.prototype),f},x.apply(null,arguments)}function l(r){var o=typeof Map=="function"?new Map:void 0;return l=function(i){if(i===null||!L(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof o!="undefined"){if(o.has(i))return o.get(i);o.set(i,d)}function d(){return x(i,arguments,(0,I.Z)(this).constructor)}return d.prototype=Object.create(i.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),(0,h.Z)(d,i)},l(r)}},26647:function(u){u.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1FTWb",toolBarButtonContainer:"toolBarButtonContainer___1Vahn",toolBarButton:"toolBarButton___3mR2H",buttonText:"buttonText___Y0WDm",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3lRZ8",popover:"popover___3zzu2",slider:"slider___ALra-",popoverLeft:"popoverLeft___15lGe"}},52822:function(u){u.exports={roundBall:"roundBall___1pqu1",popover:"popover___1-PR6"}},32495:function(u){u.exports={listItem:"listItem___1MXXF",eye:"eye___3nddM",delete:"delete___y9u-D",roundBall:"roundBall___DMczd",popover:"popover___E0HLD",annotationId:"annotationId___1ks8N",labelName:"labelName___130ie",listItemActive:"listItemActive___1rNB-"}},38670:function(u){u.exports={labelList:"labelList___3uLRO",listHeader:"listHeader___1ZPcO",eye:"eye___2yUvw",roundBall:"roundBall___1xKCU"}},5882:function(u){u.exports={listItem:"listItem___vtDXn",eye:"eye___AsLBS",roundBall:"roundBall___1J_R3",popover:"popover___1x-2R",delete:"delete___WHPf2",listItemActive:"listItemActive___3FRb7"}},56131:function(u){u.exports={labelList:"labelList___jvD05",listHeader:"listHeader___UM5UF",eye:"eye___II3Po",roundBall:"roundBall___j752J"}},78677:function(u){u.exports={container:"container___G0FNe"}},80961:function(u){u.exports={leftToolbar:"leftToolbar___1xi4t",rightToolbar:"rightToolbar___3dNSB"}},82499:function(u){u.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1SHWL",toolBarButtonContainer:"toolBarButtonContainer___1jKUz",toolBarButton:"toolBarButton___3Ouq1",buttonText:"buttonText___10ls7",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AA28"}},72869:function(u){u.exports={map:"map___92VPN",customControlIcon:"customControlIcon___3Ki2y"}},20474:function(u){u.exports={RSPop1:"RSPop1___vz5Me",RSPop2:"RSPop2___34pQA"}},87610:function(u){u.exports={RSPop1:"RSPop1___1iBEf",RSPop2:"RSPop2___1W841",RSPop3:"RSPop3___1Whcp"}},55252:function(u){u.exports={RSPop1:"RSPop1___17x8k",RSPop2:"RSPop2___27kK5"}},75513:function(u){u.exports={segment:"segment___3WmPw",mainStage:"mainStage___2kT1s",draw:"draw___Ff0QW",pblock:"pblock___3sGxC",progress:"progress___KQyBx",rightSideBar:"rightSideBar___11FX3",determinOutline:"determinOutline___1g1YI"}},27992:function(u,E,e){"use strict";var I=e(20136),h=e(55241),L=e(13062),P=e(71230),x=e(77883),l=e(70507),r=e(89032),o=e(15746),Z=e(66126),i=e(75454),d=e(2824),g=e(67294),_=e(61541),c=e(26647),a=e.n(c),f=e(85893),T=0,p=100,z=10,U=function(M){var j=(0,g.useState)(re(M.size)),y=(0,d.Z)(j,2),O=y[0],G=y[1];function A(m){G(re(m))}var te=M.minSize==null?T:M.minSize,K=M.maxSize==null?p:M.maxSize;function re(m){return m==null?z:m<=te?te:m>=K?K:m}return(0,g.useEffect)(function(){A(M.size),console.log("props.size changed to:".concat(M.size))},[M.size]),(0,f.jsxs)(h.Z,{overlayClassName:"".concat(a().popover," ").concat(M.disLoc=="left"?a().popoverLeft:""),placement:M.disLoc||"right",content:(0,f.jsxs)(P.Z,{children:[(0,f.jsx)(o.Z,{span:16,children:(0,f.jsx)(i.Z,{className:a().slider,value:O,max:K,min:te,onChange:function(C){var R;(R=M.onChange)===null||R===void 0||R.call(0,C)}})}),(0,f.jsx)(o.Z,{span:8,children:(0,f.jsx)(l.Z,{min:te,max:K,value:O,onChange:function(C){var R;(R=M.onChange)===null||R===void 0||R.call(0,C)}})})]}),trigger:"hover",children:[" ",(0,f.jsx)(_.Z,{imgSrc:M.imgSrc||"",onClick:M.onClick,children:M.children})]})};E.Z=U},63097:function(u,E,e){"use strict";var I=e(20136),h=e(55241),L=e(2824),P=e(67294),x=e(52822),l=e.n(x),r=e(63144),o=e(85893),Z=function(d){var g=(0,P.useState)(d.color||"#FFF"),_=(0,L.Z)(g,2),c=_[0],a=_[1];return(0,P.useEffect)(function(){a(d.color||"#FFF")},[d]),d.changeable?(0,o.jsx)(h.Z,{getPopupContainer:function(T){return T.parentElement||document.body},overlayClassName:l().popover,openClassName:l().popoverOpenClassName,placement:"bottom",content:(0,o.jsx)(r.xS,{disableAlpha:!0,color:c,onChange:function(T){a(T.hex)},onChangeComplete:d.onChange}),trigger:"click",children:(0,o.jsx)("div",{className:l().roundBall,style:{backgroundColor:c}})}):(0,o.jsx)("div",{className:l().roundBall,style:{backgroundColor:c}})};E.Z=Z},51327:function(u,E,e){"use strict";e.d(E,{Z:function(){return z}});var I=e(54421),h=e(38272),L=e(57663),P=e(71577),x=e(67294),l=e(38670),r=e.n(l),o=e(49111),Z=e(19650),i=e(11849),d=e(32495),g=e.n(d),_=e(63097),c=e(85893),a=function(n){var M=(0,i.Z)({},n.annotation),j=!1,y=(0,c.jsxs)(h.ZP.Item,{className:"".concat(g().listItem," ").concat(n.active?g().listItemActive:""),unselectable:"on",onClick:function(){console.log("click List.Item"),n.onClick(M)},children:[(0,c.jsxs)(Z.Z,{align:"center",size:5,children:[(0,c.jsx)("a",{className:g().eye,style:{backgroundImage:j?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(G){G.stopPropagation(),n.onAnnotationModify(M)}})," ",(0,c.jsx)("span",{className:g().annotationId,children:M.properties.annotationId}),(0,c.jsx)("span",{className:g().labelName,children:M.properties.labelName}),(0,c.jsx)(_.Z,{color:M.properties.stroke})]}),(0,c.jsx)("a",{className:g().delete,onClick:function(G){console.log("click List.Item.delete"),G.stopPropagation(),n.onAnnotationDelete(M)}})]});return y},f=a,T=e(48971),p=function(n){var M=(0,T.YB)().formatMessage({id:"component.PPAnnotationList.annotationList"}),j=(0,T.YB)().formatMessage({id:"component.PPAnnotationList.addAnnotation"});return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(h.ZP,{className:r().labelList,size:"large",header:(0,c.jsx)("div",{className:r().listHeader,children:M}),bordered:!0,dataSource:n.annotations.features,renderItem:function(O){return(0,c.jsx)(f,{onClick:n.onAnnotationSelect,annotation:O,active:!1,onAnnotationDelete:n.onAnnotationDelete,onAnnotationModify:n.onAnnotationModify})},footer:(0,c.jsx)("div",{children:(0,c.jsx)(P.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){n.onAnnotationSelect(void 0)},block:!0,children:j})})})})},z=p},5041:function(u,E,e){"use strict";e.d(E,{Z:function(){return K}});var I=e(54421),h=e(38272),L=e(57663),P=e(71577),x=e(2824),l=e(67294),r=e(56131),o=e.n(r),Z=e(49111),i=e(19650),d=e(11849),g=e(5882),_=e.n(g),c=e(63097),a=e(85893),f=function(m){var C=(0,d.Z)({},m.label),R=(0,l.useState)(C.invisible),ne=(0,x.Z)(R,2),F=ne[0],v=ne[1],t=(0,l.useState)(0),k=(0,x.Z)(t,2),$=k[0],Q=k[1],w=m.hideEye?" ":(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("a",{className:_().eye,style:{backgroundImage:F?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(q){q.stopPropagation(),v(!F),m.onLabelModify(C)}})," "]}),ie=m.hideColorPicker?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)(c.Z,{color:C.color,changeable:!0,onChange:function(q){C.color=q.hex,m.onLabelModify(C)}}),ce=(0,a.jsxs)(h.ZP.Item,{className:"".concat(_().listItem," ").concat(m.active?_().listItemActive:""),unselectable:"on",onClick:function(){m.onClick(C)},children:[(0,a.jsxs)(i.Z,{align:"center",size:5,children:[w,C.name,ie]}),(0,a.jsx)("a",{className:_().delete,onClick:function(q){q.stopPropagation();var oe=new Date().getTime();oe-$<300||(Q(oe),m.onLabelDelete(C))}})]});return ce},T=f,p=e(71194),z=e(50146),U=e(47673),n=e(24044),M=e(9715),j=e(93766),y=e(48971),O=["#FF0000","#008000","#0000FF","#FFFF00","#FFA500","#00FFFF","#8B00FF","#FFC0CB","#7CFC00","#007FFF","#800080","#36BF36","#DAA520","#800000","#008B8B","#B22222","#E6D933","#000080","#FF00FF","#FFFF99","#87CEEB","#5C50E6","#CD5C5C","#20B2AA","#E680FF","#4D1F00","#006374","#B399FF","#8B4513","#BA55D3","#C0C0C0","#808080","#000000"],G=function(m){var C,R,ne=(0,y.YB)().formatMessage({id:"component.PPAddLabelModal.selectColor"}),F=(0,y.YB)().formatMessage({id:"component.PPAddLabelModal.addLabel"}),v=(0,y.YB)().formatMessage({id:"component.PPAddLabelModal.labelName"}),t=(0,y.YB)().formatMessage({id:"component.PPCreater.cancel"}),k=(0,y.YB)().formatMessage({id:"component.PPSegMode.ok"}),$=(0,l.useState)(((C=m.defaultLabel)===null||C===void 0?void 0:C.color)||O[m.order||0]),Q=(0,x.Z)($,2),w=Q[0],ie=Q[1];(0,l.useEffect)(function(){var ee;ie(((ee=m.defaultLabel)===null||ee===void 0?void 0:ee.color)||O[m.order||0])},[m]);var ce=m.hideColorPicker?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)(j.Z.Item,{label:ne,name:"color",children:(0,a.jsx)(c.Z,{color:w,onChange:function(J){ie(J.hex)}})}),se=j.Z.useForm(),q=(0,x.Z)(se,1),oe=q[0];return(0,a.jsx)(z.Z,{title:F,visible:m.visible,onCancel:m.onCancel,footer:null,children:(0,a.jsxs)(j.Z,{form:oe,name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!1,labelname:(R=m.defaultLabel)===null||R===void 0?void 0:R.name},onFinish:function(J){var Ce={name:J.labelname,color:w};m.onLabelAdd(Ce),oe.resetFields()},autoComplete:"off",children:[(0,a.jsx)(j.Z.Item,{label:v,name:"labelname",rules:[{required:!0,message:"Please input label name!"}],children:(0,a.jsx)(n.Z,{})}),ce,(0,a.jsx)(j.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,a.jsxs)(i.Z,{children:[(0,a.jsx)(P.Z,{onClick:function(){var J;(J=m.onCancel)===null||J===void 0||J.call(0),oe.resetFields()},children:t}),(0,a.jsx)(P.Z,{type:"primary",htmlType:"submit",children:k})]})})]})})},A=G,te=function(m){var C,R=(0,y.YB)().formatMessage({id:"component.PPLabelList.addLabel"}),ne=(0,y.YB)().formatMessage({id:"component.PPLabelList.labelList"}),F=(0,l.useState)(!1),v=(0,x.Z)(F,2),t=v[0],k=v[1];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.ZP,{className:o().labelList,size:"large",header:(0,a.jsx)("div",{className:o().listHeader,children:ne}),footer:(0,a.jsx)("div",{children:(0,a.jsx)(P.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){k(!0)},block:!0,children:R})}),bordered:!0,dataSource:m.labels,renderItem:function(Q){var w;return(0,a.jsx)(T,{hideColorPicker:m.hideColorPicker,hideEye:m.hideEye,onClick:m.onLabelSelect,label:Q,active:(w=m.activeIds)===null||w===void 0?void 0:w.has(Q.labelId),onLabelDelete:m.onLabelDelete,onLabelModify:m.onLabelModify})}}),(0,a.jsx)(A,{hideColorPicker:m.hideColorPicker,order:(C=m.labels)===null||C===void 0?void 0:C.length,visible:t,onLabelAdd:function(Q){m.onLabelAdd(Q),k(!1)},onCancel:function(){k(!1)}})]})},K=te},8088:function(u,E,e){"use strict";var I=e(67294),h=e(78677),L=e.n(h),P=e(85893),x=function(r){return(0,P.jsx)("div",{className:"".concat(L().container," ").concat(r.className),children:r.children})};E.Z=x},44434:function(u,E,e){"use strict";var I=e(67294),h=e(80961),L=e.n(h),P=e(85893),x=function(r){var o=L().leftToolbar;return r.disLoc=="right"&&(o=L().rightToolbar),(0,P.jsx)("div",{className:o,children:r.children})};E.Z=x},61541:function(u,E,e){"use strict";var I=e(49111),h=e(19650),L=e(67294),P=e(82499),x=e.n(P),l=e(85893),r=function(Z){return(0,l.jsx)("div",{unselectable:"on",className:"".concat(x().toolBarButtonContainerWrapper," ").concat(Z.active&&x().toolBarButtonContainerWrapperActive),onClick:Z.onClick,children:(0,l.jsx)(h.Z,{align:"center",className:x().toolBarButtonContainer,size:0,children:(0,l.jsxs)(h.Z,{align:"center",direction:"vertical",className:x().toolBarButton,size:0,children:[(0,l.jsx)("img",{src:Z.imgSrc}),(0,l.jsx)("div",{className:x().buttonText,children:Z.children})]})})})};E.Z=r},37233:function(u,E,e){"use strict";e.d(E,{Z:function(){return f}});var I=e(67294),h=e(11849),L=e(93224),P=e(41004),x=e(72869),l=e.n(x),r=e(74607),o=e(85893),Z=function(p){var z=p.children,U=p.leafletMapRef,n=p.displayTools,M=(0,L.Z)(p,["children","leafletMapRef","displayTools"]);return I.useEffect(function(){if(U.current){var j=U.current.leafletElement;j.pm.addControls({drawMarker:!1,drawCircle:!1,drawCircleMarker:!1,drawPolyline:!1,drawRectangle:!1,drawPolygon:!1,editMode:!1,dragMode:!1,cutPolygon:!0,rotateMode:!1,removalMode:!1}),j.pm.setGlobalOptions({pmIgnore:!1}),p.displayTools&&j.pm.Toolbar.createCustomControl({name:"StoreShapes",title:"Store all shapes",block:"custom",className:l().customControlIcon,toggle:!1,afterClick:function(){var O=JSON.stringify(j.pm.getGeomanDrawLayers(!0).toGeoJSON()),G="data.geojson",A=document.createElement("a");A.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(O)),A.setAttribute("download",G),A.style.display="none",document.body.appendChild(A),A.click(),console.log(O)}}),j.on("pm:create",function(y){p.onShapeCreate(y)}),j.on("pm:edit",function(y){p.onShapeEdit(y)})}},[]),(0,o.jsx)(P.Z,(0,h.Z)((0,h.Z)({ref:U},M),{},{children:z}))},i=Z,d=e(88014),g=e(16072),_=e(18836),c={lat:0,lng:0,zoom:2},a=function(p){var z=[c.lat,c.lng];return(0,o.jsx)(i,{leafletMapRef:p.leafletMapRef,displayTools:p.displayTools,className:l().map,center:z,zoom:c.zoom,onShapeCreate:p.onShapeCreate,onShapeEdit:p.onShapeEdit,zoomControl:!1,children:(0,o.jsxs)(d.Z,{position:"topright",children:[(0,o.jsx)(d.Z.BaseLayer,{checked:!0,name:"TianDiTu.Vector",children:(0,o.jsxs)(g.Z,{attribution:'\xA9 <a href="https://www.tianditu.gov.cn/">TianDiTu</a> GS(2021)3715',children:[(0,o.jsx)(_.Z,{url:"https://t2.tianditu.gov.cn/DataServer?T=vec_w&X={x}&Y={y}&L={z}&tk=8e879a4cad078fd3ce7456f2737fc4cc"}),(0,o.jsx)(_.Z,{url:"https://t2.tianditu.gov.cn/DataServer?T=cva_w&X={x}&Y={y}&L={z}&tk=8e879a4cad078fd3ce7456f2737fc4cc"})]})}),(0,o.jsx)(d.Z.Overlay,{name:"Esri.WorldImagery",children:(0,o.jsx)(_.Z,{attribution:"Tiles \xA9 Esri \u2014 Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"})})]})})},f=a},49813:function(u,E,e){"use strict";var I=e(47673),h=e(24044),L=e(13062),P=e(71230),x=e(59250),l=e(13013),r=e(57663),o=e(71577),Z=e(89032),i=e(15746),d=e(30887),g=e(54689),_=e(34792),c=e(48086),a=e(89366),f=e(57254),T=e(20474),p=e.n(T),z=e(67294),U=e(48971),n=e(85893);function M(O){c.default.info("Click on menu item."),console.log("click",O)}var j=(0,n.jsxs)(g.Z,{onClick:M,children:[(0,n.jsx)(g.Z.Item,{icon:(0,n.jsx)(a.Z,{}),children:"1st menu item"},"1"),(0,n.jsx)(g.Z.Item,{icon:(0,n.jsx)(a.Z,{}),children:"2nd menu item"},"2"),(0,n.jsx)(g.Z.Item,{icon:(0,n.jsx)(a.Z,{}),children:"3rd menu item"},"3")]}),y=function(){var G=(0,U.YB)().formatMessage({id:"component.PPRS.pdParameter"}),A=(0,U.YB)().formatMessage({id:"component.PPRS.simplifiedDistance"}),te=(0,U.YB)().formatMessage({id:"component.PPRS.simplifiedAngle"}),K=(0,U.YB)().formatMessage({id:"component.PPRS.threshold"});return(0,n.jsxs)("div",{children:[(0,n.jsxs)(P.Z,{children:[(0,n.jsx)(i.Z,{span:12,className:p().RSPop1,children:(0,n.jsx)("span",{children:G})}),(0,n.jsx)(i.Z,{span:12,className:p().RSPop2,children:(0,n.jsx)(l.Z,{overlay:j,children:(0,n.jsxs)(o.Z,{style:{width:"100%"},children:["Dropdown ",(0,n.jsx)(f.Z,{})]})})})]}),(0,n.jsxs)(P.Z,{children:[(0,n.jsx)(i.Z,{span:12,className:p().RSPop1,children:(0,n.jsx)("span",{children:A})}),(0,n.jsx)(i.Z,{span:12,className:p().RSPop2,children:(0,n.jsx)(h.Z,{placeholder:"Basic usage"})})]}),(0,n.jsxs)(P.Z,{children:[(0,n.jsx)(i.Z,{span:12,className:p().RSPop1,children:(0,n.jsx)("span",{children:te})}),(0,n.jsx)(i.Z,{span:12,className:p().RSPop2,children:(0,n.jsx)(h.Z,{placeholder:"Basic usage"})})]}),(0,n.jsxs)(P.Z,{children:[(0,n.jsx)(i.Z,{span:12,className:p().RSPop1,children:(0,n.jsx)("span",{children:K})}),(0,n.jsx)(i.Z,{span:12,className:p().RSPop2,children:(0,n.jsx)(h.Z,{placeholder:"Basic usage"})})]})]})};E.Z=y},97927:function(u,E,e){"use strict";var I=e(13062),h=e(71230),L=e(47673),P=e(24044),x=e(89032),l=e(15746),r=e(87610),o=e.n(r),Z=e(67294),i=e(48971),d=e(85893),g=function(){var c=(0,i.YB)().formatMessage({id:"component.PPRS.gridSize"}),a=(0,i.YB)().formatMessage({id:"component.PPRS.overlap"}),f=(0,i.YB)().formatMessage({id:"component.PPRS.completed"},{show:1,total:16});return(0,d.jsxs)("div",{children:[(0,d.jsxs)(h.Z,{children:[(0,d.jsx)(l.Z,{span:12,className:o().RSPop1,children:(0,d.jsx)("span",{children:c})}),(0,d.jsx)(l.Z,{span:12,className:o().RSPop2,children:(0,d.jsx)(P.Z,{placeholder:"Basic usage"})})]}),(0,d.jsxs)(h.Z,{children:[(0,d.jsx)(l.Z,{span:12,className:o().RSPop1,children:(0,d.jsx)("span",{children:a})}),(0,d.jsx)(l.Z,{span:12,className:o().RSPop2,children:(0,d.jsx)(P.Z,{placeholder:"Basic usage"})})]}),(0,d.jsx)(h.Z,{children:(0,d.jsx)("span",{className:o().RSPop3,children:f})})]})};E.Z=g},91861:function(u,E,e){"use strict";e.d(E,{Ad:function(){return h},k3:function(){return L},Vd:function(){return P},td:function(){return x}});var I=40;function h(){localStorage.removeItem("history"),L([])}function L(l){var r=localStorage.getItem("history"),o=r?JSON.parse(r):{index:-1,items:[]};if(JSON.stringify(o.items[o.index])!=JSON.stringify(l)){var Z=o.index>I?o.index-I:0,i=o.items.splice(Z,o.index==0?1:o.index+1);o.items=i.concat([l]),o.index<=I?o.index++:o.index=I+1,localStorage.setItem("history",JSON.stringify(o))}}function P(){var l=localStorage.getItem("history");if(!!l){var r=JSON.parse(l);if(!!r&&!(r.index>=r.items.length-1))return r.index++,localStorage.setItem("history",JSON.stringify(r)),r.items[r.index]}}function x(){var l=localStorage.getItem("history");if(!!l){var r=JSON.parse(l);if(!(!r||!r.index)&&!(r.index<=0))return r.index--,localStorage.setItem("history",JSON.stringify(r)),r.items[r.index]}}},47712:function(u,E,e){"use strict";e.r(E),e.d(E,{default:function(){return Re}});var I=e(34669),h=e(54458),L=e(20136),P=e(55241),x=e(49111),l=e(19650),r=e(62350),o=e(75443),Z=e(57663),i=e(71577),d=e(2824),g=e(67294),_=e(75513),c=e.n(_),a=e(8088),f=e(61541),T=e(44434),p=e(5041),z=e(49813),U=e(98858),n=e(4914),M=e(13062),j=e(71230),y=e(59250),O=e(13013),G=e(89032),A=e(15746),te=e(30887),K=e(54689),re=e(34792),m=e(48086),C=e(89366),R=e(57254),ne=e(55252),F=e.n(ne),v=e(48971),t=e(85893);function k(B){m.default.info("Click on menu item."),console.log("click",B)}var $=(0,t.jsxs)(K.Z,{onClick:k,children:[(0,t.jsx)(K.Z.Item,{icon:(0,t.jsx)(C.Z,{}),children:"band_1"},"1"),(0,t.jsx)(K.Z.Item,{icon:(0,t.jsx)(C.Z,{}),children:"band_2"},"2"),(0,t.jsx)(K.Z.Item,{icon:(0,t.jsx)(C.Z,{}),children:"band_3"},"3")]}),Q=function(){var me=(0,v.YB)().formatMessage({id:"component.PPRS.r"}),W=(0,v.YB)().formatMessage({id:"component.PPRS.g"}),N=(0,v.YB)().formatMessage({id:"component.PPRS.b"}),fe=(0,v.YB)().formatMessage({id:"component.PPRS.dataInformation"}),Pe=(0,v.YB)().formatMessage({id:"component.PPRS.fileName"}),ve=(0,v.YB)().formatMessage({id:"component.PPRS.row"}),ge=(0,v.YB)().formatMessage({id:"component.PPRS.column"}),V=(0,v.YB)().formatMessage({id:"component.PPRS.bands"}),Y=(0,v.YB)().formatMessage({id:"component.PPRS.dataType"}),ae=(0,v.YB)().formatMessage({id:"component.PPRS.EPSG"}),he=(0,v.YB)().formatMessage({id:"component.PPRS.unit"});return(0,t.jsxs)("div",{children:[(0,t.jsxs)(j.Z,{children:[(0,t.jsx)(A.Z,{className:F().RSPop1,children:(0,t.jsx)("span",{children:me})}),(0,t.jsx)(A.Z,{className:F().RSPop2,children:(0,t.jsx)(O.Z,{overlay:$,children:(0,t.jsxs)(i.Z,{style:{width:"100%"},children:["Band ",(0,t.jsx)(R.Z,{})]})})}),(0,t.jsx)(A.Z,{className:F().RSPop1,children:(0,t.jsx)("span",{children:W})}),(0,t.jsx)(A.Z,{className:F().RSPop2,children:(0,t.jsx)(O.Z,{overlay:$,children:(0,t.jsxs)(i.Z,{style:{width:"100%"},children:["Band ",(0,t.jsx)(R.Z,{})]})})}),(0,t.jsx)(A.Z,{className:F().RSPop1,children:(0,t.jsx)("span",{children:N})}),(0,t.jsx)(A.Z,{className:F().RSPop2,children:(0,t.jsx)(O.Z,{overlay:$,children:(0,t.jsxs)(i.Z,{style:{width:"100%"},children:["Band ",(0,t.jsx)(R.Z,{})]})})})]}),(0,t.jsxs)(n.Z,{title:fe,column:1,bordered:!0,children:[(0,t.jsx)(n.Z.Item,{label:Pe,children:"A/XXX.tif"}),(0,t.jsx)(n.Z.Item,{label:ve,children:"1234"}),(0,t.jsx)(n.Z.Item,{label:ge,children:"897"}),(0,t.jsx)(n.Z.Item,{label:V,children:"7"}),(0,t.jsx)(n.Z.Item,{label:Y,children:"UInt16"}),(0,t.jsx)(n.Z.Item,{label:ae,children:"7030"}),(0,t.jsx)(n.Z.Item,{label:he,children:"m"})]})]})},w=Q,ie=e(97927),ce=e(37233),se=e(51327),q=e(11849);function oe(B){var me=(0,g.useState)(0),W=(0,d.Z)(me,2),N=W[0],fe=W[1],Pe=(0,g.useState)(!1),ve=(0,d.Z)(Pe,2),ge=ve[0],V=ve[1];(0,g.useEffect)(function(){localStorage.setItem("currentLabel",JSON.stringify(B.currentLabel||{}))},[B.currentLabel]),(0,g.useEffect)(function(){localStorage.setItem("annotations",JSON.stringify(B.annotations||{}))},[B.annotations]);var Y=function(){var s,S=(s=B.leafletMapRef.current)===null||s===void 0?void 0:s.leafletElement.pm.globalDrawModeEnabled();console.log(S)},ae=function(s){var S=localStorage.getItem("currentLabel");if(S!="{}"){var H,le;V(!0);var X=JSON.parse(S||"{}");(H=B.leafletMapRef.current)===null||H===void 0||H.leafletElement.pm.enableDraw(s),(le=B.leafletMapRef.current)===null||le===void 0||le.leafletElement.pm.setPathOptions({color:X==null?void 0:X.color,fillColor:X==null?void 0:X.color,fillOpacity:.4})}else{var ue;alert("Test"),(ue=B.leafletMapRef.current)===null||ue===void 0||ue.leafletElement.pm.disableDraw(s),V(!1)}},he=function(s){var S;(S=B.leafletMapRef.current)===null||S===void 0||S.leafletElement.pm.disableDraw(s),V(!1),Y()},xe=function(){var s;return(s=B.leafletMapRef.current)===null||s===void 0?void 0:s.leafletElement.pm.Draw.getActiveShape()},Be=function(){if(xe()=="Polygon"){var s;(s=B.leafletMapRef.current)===null||s===void 0||s.leafletElement.pm.Draw.Polygon._removeLastVertex(),Y()}else Y(),V(!1)},Me=function(){var s;(s=B.leafletMapRef.current)===null||s===void 0||s.leafletElement.pm.toggleGlobalDragMode(),Y()},De=function(){if(xe()=="Polygon"){var s;(s=B.leafletMapRef.current)===null||s===void 0||s.leafletElement.pm.Draw.Polygon._finishShape(),Y(),V(!1)}else Y(),V(!1)},Le=function(){var s;(s=B.leafletMapRef.current)===null||s===void 0||s.leafletElement.pm.enableGlobalRemovalMode(),Y()},_e=function(){var s;(s=B.leafletMapRef.current)===null||s===void 0||s.leafletElement.pm.toggleGlobalEditMode(),Y(),V(!1)},pe=function(){V(!1)},je=function(s){var S=s.toGeoJSON(),H=JSON.parse(localStorage.getItem("currentLabel")||"{}");fe(N+1),S.properties={labelName:H==null?void 0:H.name,stroke:H==null?void 0:H.color,annotationId:N+1};var le=JSON.parse(localStorage.getItem("annotations")||"{}"),X=(0,q.Z)((0,q.Z)({},le),{},{features:le.features.concat(S)});console.log(X),B.setAnnotations(X),B.recordHistory(X)};function Oe(b){V(!1),je(b.layer)}var ye=function(s){console.log(s)},Ee=function(){var s;(s=B.leafletMapRef.current)===null||s===void 0||s.leafletElement.zoomIn(),Y()},Se=function(){var s;(s=B.leafletMapRef.current)===null||s===void 0||s.leafletElement.zoomOut(),Y()};return{polyVisable:ge,RSDraw:ae,RSDrawDisable:he,removeLastVertex:Be,moveShape:Me,finishShape:De,removeShape:Le,editMode:_e,saveGeoJson:pe,storeOnDb:je,onShapeCreate:Oe,onShapeEdit:ye,toolZoomIn:Ee,toolZoomOut:Se,currentShape:xe}}var ee=e(27992),J=e(91861),Ce=e(64322),Ze=function(){var me=(0,Ce.$L)(g.useState,g.useEffect,{label:{oneHot:!1},tool:{defaultTool:"mover"},effectTrigger:{}}),W=(0,d.Z)(me,10),N=W[0],fe=W[1],Pe=W[2],ve=W[3],ge=W[4],V=W[5],Y=W[6],ae=W[7],he=W[8],xe=W[9],Be=(0,g.useState)(!1),Me=(0,d.Z)(Be,2),De=Me[0],Le=Me[1],_e=(0,g.useState)(!1),pe=(0,d.Z)(_e,2),je=pe[0],Oe=pe[1],ye=(0,g.useState)({type:"FeatureCollection",features:[]}),Ee=(0,d.Z)(ye,2),Se=Ee[0],b=Ee[1];(0,g.useEffect)(function(){(0,J.Ad)()},[]),console.log("rs is re-rendering! label.curr: ".concat(JSON.stringify(ae.curr)));var s=g.useRef(null),S=oe({leafletMapRef:s,currentLabel:ae.curr,setAnnotations:b,annotations:Se,recordHistory:J.k3}),H=(0,v.YB)().formatMessage({id:"pages.Maps.finished"}),le=(0,v.YB)().formatMessage({id:"pages.Maps.removeLastVertex"}),X=(0,v.YB)().formatMessage({id:"pages.Maps.cancel"}),ue=(0,v.YB)().formatMessage({id:"pages.Maps.boundary"}),Ie=(0,v.YB)().formatMessage({id:"pages.Maps.remoteSensing"}),Ae=(0,v.YB)().formatMessage({id:"pages.Maps.grids"}),Te=(0,v.YB)().formatMessage({id:"pages.toolBar.polygon"}),be=(0,v.YB)().formatMessage({id:"pages.toolBar.rubber"}),We=(0,v.YB)().formatMessage({id:"pages.toolBar.zoomIn"}),Ne=(0,v.YB)().formatMessage({id:"pages.toolBar.zoomOut"}),Ue=(0,v.YB)().formatMessage({id:"pages.toolBar.move"}),Ke=(0,v.YB)().formatMessage({id:"pages.toolBar.unDo"}),Fe=(0,v.YB)().formatMessage({id:"pages.toolBar.reDo"}),Ye=(0,v.YB)().formatMessage({id:"pages.toolBar.save"}),ze=(0,v.YB)().formatMessage({id:"pages.toolBar.edit"}),Ge=(0,v.YB)().formatMessage({id:"pages.toolBar.clearMark"}),Je=(0,v.YB)().formatMessage({id:"pages.toolBar.interactor"}),Ve=(0,v.YB)().formatMessage({id:"pages.toolBar.segmentThreshold"}),He=(0,v.YB)().formatMessage({id:"pages.toolBar.transparency"}),Xe=(0,v.YB)().formatMessage({id:"pages.toolBar.visualRadius"}),$e=(0,v.YB)().formatMessage({id:"pages.toolBar.determineOutline"}),Qe=(0,v.YB)().formatMessage({id:"pages.toolBar.divideData"}),ke=(0,v.YB)().formatMessage({id:"pages.toolBar.export"});return(0,t.jsxs)(a.Z,{className:c().segment,children:[(0,t.jsxs)(T.Z,{children:[(0,t.jsx)(P.Z,{placement:"rightTop",visible:S.polyVisable,content:(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(l.Z,{children:[(0,t.jsx)(i.Z,{type:"primary",onClick:function(){S.finishShape()},children:H}),(0,t.jsx)(i.Z,{type:"primary",onClick:function(){S.removeLastVertex()},children:le}),(0,t.jsx)(o.Z,{title:"Are you sure cancel this task?",okText:"Yes",cancelText:"No",children:(0,t.jsx)(i.Z,{type:"primary",onClick:function(){S.RSDrawDisable(S.currentShape())},children:X})})]})}),trigger:N.curr=="Polygon"?"hover":"click",children:(0,t.jsx)(f.Z,{active:N.curr=="Polygon",imgSrc:"./pics/buttons/polygon.png",onClick:function(){N.setCurr("Polygon"),S.RSDraw("Polygon")},children:Te})}),(0,t.jsx)(f.Z,{onClick:function(){S.editMode()},imgSrc:"./pics/buttons/edit.png",children:ze}),(0,t.jsxs)(P.Z,{placement:"rightTop",title:"title",content:"content",trigger:N.curr=="rubber"?"hover":"click",children:[" ",(0,t.jsx)(f.Z,{imgSrc:"./pics/buttons/rubber.png",onClick:function(){S.removeShape()},children:be})]}),(0,t.jsx)(f.Z,{onClick:function(){S.toolZoomIn()},imgSrc:"./pics/buttons/zoom_in.png",children:We}),(0,t.jsx)(f.Z,{onClick:function(){S.toolZoomOut()},imgSrc:"./pics/buttons/zoom_out.png",children:Ne}),(0,t.jsx)(f.Z,{onClick:function(){S.saveGeoJson()},imgSrc:"./pics/buttons/save.png",children:Ye}),(0,t.jsx)(f.Z,{imgSrc:"./pics/buttons/move.png",onClick:function(){return S.moveShape()},children:Ue}),(0,t.jsx)(f.Z,{onClick:function(){var de=(0,J.td)()},imgSrc:"./pics/buttons/prev.png",children:Ke}),(0,t.jsx)(f.Z,{onClick:function(){var de=(0,J.Vd)()},imgSrc:"./pics/buttons/next.png",children:Fe}),(0,t.jsx)(f.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:Ge})]}),(0,t.jsxs)("div",{className:c().mainStage,children:[(0,t.jsx)("div",{className:c().draw,children:(0,t.jsx)(ce.Z,{leafletMapRef:s,onShapeCreate:S.onShapeCreate,onShapeEdit:S.onShapeEdit})}),(0,t.jsx)("div",{className:c().pblock,children:(0,t.jsx)("div",{className:c().progress,children:(0,t.jsx)(h.Z,{percent:50,status:"active"})})})]}),(0,t.jsxs)(T.Z,{disLoc:"right",children:[(0,t.jsx)(f.Z,{imgSrc:"./pics/buttons/intelligent_interaction.png",children:Je}),(0,t.jsx)(ee.Z,{imgSrc:"./pics/buttons/threshold.png",disLoc:"left",children:Ve}),(0,t.jsx)(ee.Z,{imgSrc:"./pics/buttons/alpha.png",disLoc:"left",children:He}),(0,t.jsx)(ee.Z,{imgSrc:"./pics/buttons/radius.png",disLoc:"left",children:Xe}),(0,t.jsxs)(P.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Setting of boundary simplification",content:(0,t.jsx)(z.Z,{}),trigger:N.curr=="boundry"?"click":"hover",children:[" ",(0,t.jsx)(f.Z,{imgSrc:"./pics/buttons/border_simplify.png",onClick:function(){N.setCurr("boundry")},children:ue})]}),(0,t.jsxs)(P.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Setting of remote sensing",content:(0,t.jsx)(w,{}),trigger:N.curr=="colorgun"?"click":"hover",children:[" ",(0,t.jsx)(f.Z,{imgSrc:"./pics/buttons/remote_sensing_setting.png",onClick:function(){N.setCurr("colorgun")},children:Ie})]}),(0,t.jsxs)(P.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Switch grids",content:(0,t.jsx)(ie.Z,{}),trigger:N.curr=="grid"?"click":"hover",children:[" ",(0,t.jsx)(f.Z,{imgSrc:"./pics/buttons/switch_grid.png",onClick:function(){N.setCurr("grid")},children:Ae})]}),(0,t.jsx)(f.Z,{imgSrc:"./pics/buttons/data_division.png",children:Qe}),(0,t.jsx)(f.Z,{imgSrc:"./pics/buttons/export.png",children:ke})]}),(0,t.jsxs)("div",{className:c().rightSideBar,children:[(0,t.jsx)("div",{className:c().determinOutline,children:(0,t.jsx)(i.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",block:!0,children:$e})}),(0,t.jsx)(p.Z,{selectedLabel:ae.curr,onLabelSelect:function(de){ae.setCurr(de),console.log(de)},onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}}),(0,t.jsx)(se.Z,{annotations:Se,onAnnotationSelect:function(){},onAnnotationAdd:function(){},onAnnotationModify:function(){},onAnnotationDelete:function(){}})]})]})},Re=Ze}}]);
