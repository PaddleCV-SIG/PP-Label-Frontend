(self.webpackChunkpp_labeling_frontend=self.webpackChunkpp_labeling_frontend||[]).push([[540],{26647:function(y){y.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1FTWb",toolBarButtonContainer:"toolBarButtonContainer___1Vahn",toolBarButton:"toolBarButton___3mR2H",buttonText:"buttonText___Y0WDm",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3lRZ8",popover:"popover___3zzu2"}},54777:function(y){y.exports={segment:"segment___1YMcl",mainStage:"mainStage___2otee",rightSideBar:"rightSideBar___2X7jK",determinOutline:"determinOutline___2ls57"}},49911:function(y,R,i){"use strict";i.r(R),i.d(R,{default:function(){return vn}});var xn=i(57663),z=i(71577),b=i(2824),x=i(67294),V=i(54777),j=i.n(V),G=i(8088),g=i(61541),N=i(44434),W=i(58967),Cn=i(20136),J=i(55241),bn=i(77883),Q=i(70507),w=i(26647),q=i.n(w),n=i(85893),I=1,T=100,_=10;function Z(o){return o?o<=I?I:o>=T?T:o:_}var nn=function(t){var c=(0,x.useState)(Z(t.size)),a=(0,b.Z)(c,2),d=a[0],v=a[1],l=function(r){v(Z(r))};return(0,x.useEffect)(function(){l(t.size)},[t.size]),(0,n.jsxs)(J.Z,{overlayClassName:q().popover,placement:t.disLoc||"right",content:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(z.Z,{type:"text",onClick:function(){var r,s=Z(d-1);l(s),(r=t.onChange)===null||r===void 0||r.call(0,s)},children:"-"}),(0,n.jsx)(Q.Z,{min:I,max:T,value:d,onChange:function(r){var s;(s=t.onChange)===null||s===void 0||s.call(0,r)},controls:!1,style:{textAlign:"center"}}),(0,n.jsx)(z.Z,{type:"text",onClick:function(){var r,s=Z(d+1);l(s),(r=t.onChange)===null||r===void 0||r.call(0,s)},children:"+"})]}),trigger:"hover",children:[" ",(0,n.jsx)(g.Z,{imgSrc:t.imgSrc,onClick:t.onClick,children:t.children})]})},D=nn,tn=i(5041),on=i(57436),en=i(14836),an=function(t){return(0,n.jsx)(g.Z,{active:t.active,imgSrc:t.imgSrc||"./pics/buttons/polygon.png",onClick:t.onClick,children:t.children})},rn=an,ln=i(43801),un=i(91220),$=i(65031);function sn(o){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function U(o,t){if(!(!o||!t)){var c=sn(o);if(!!c){var a=void 0,d=[];return t.forEach(function(v){if(!a){a=v;return}d.push((0,n.jsx)($.Cd,{x:a,y:v,radius:5,fill:o})),a=void 0}),{color:o,points:t,element:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)($.x1,{stroke:o,strokeWidth:2,globalCompositeOperation:"source-over",lineCap:"round",points:t,tension:.01,closed:!0,fill:"rgba(".concat(c.r,", ").concat(c.g,", ").concat(c.b,", 0.5)")}),d]})}}}}function cn(o){var t=0,c=(0,un.Z)(o),a;try{for(c.s();!(a=c.n()).done;){var d=a.value;!d||d.annotationId>t&&(t=d.annotationId)}}catch(v){c.e(v)}finally{c.f()}return t}function dn(o){var t=function(l,f){var r,s=l.evt.offsetX/f,C=l.evt.offsetY/f;console.log("offsetX: ".concat(l.evt.offsetX,", offsetY: ").concat(l.evt.offsetY,", mouseX: ").concat(s,", mouseY: ").concat(C));var h=U((r=o.currentLabel)===null||r===void 0?void 0:r.color,[s,C]);!h||o.onAnnotationAdd({annotationId:cn(o.annotations)+1,label:o.currentLabel,lines:[h]})},c=function(l,f){var r,s;if(!!o.currentAnnotation){var C=l.evt.offsetX/f,h=l.evt.offsetY/f;console.log("offsetX: ".concat(l.evt.offsetX,", offsetY: ").concat(l.evt.offsetY,", mouseX: ").concat(C,", mouseY: ").concat(h));var Y=o.currentAnnotation.lines||[],P=U((r=o.currentLabel)===null||r===void 0?void 0:r.color,(s=Y[0])===null||s===void 0?void 0:s.points.concat([C,h]));if(!!P){var p={annotationId:o.currentAnnotation.annotationId,label:o.currentAnnotation.label,lines:[P]};o.onAnnotationModify(p)}}},a=function(l,f){console.log(o.currentTool),o.currentTool=="polygon"&&(o.currentAnnotation?c(l,f):t(l,f))},d=function(){o.currentTool=="polygon"};return{onMouseDown:a,onMouseMove:function(){},onMouseUp:d}}var fn=function(){var t=(0,x.useState)(void 0),c=(0,b.Z)(t,2),a=c[0],d=c[1],v=(0,x.useState)({color:"",name:""}),l=(0,b.Z)(v,2),f=l[0],r=l[1],s=(0,x.useState)(),C=(0,b.Z)(s,2),h=C[0],Y=C[1],P=(0,x.useState)([]),p=(0,b.Z)(P,2),m=p[0],M=p[1],gn=(0,x.useState)(10),k=(0,b.Z)(gn,2),B=k[0],E=k[1],hn=(0,x.useState)(1),F=(0,b.Z)(hn,2),X=F[0],H=F[1],S=function(e){Y(e),e!=null&&e.label&&r(e.label)},K=function(e){for(var A=[],L=0;L<m.length;L++)m[L].annotationId==e.annotationId?A.push(e):A.push(m[L]);S(e),M(A)},mn=(0,ln.Z)({currentLabel:f,brushSize:B,currentTool:a,annotations:m,currentAnnotation:h,onAnnotationAdd:function(e){M(m.concat([e])),h||S(e)},onAnnotationModify:K}),Sn=dn({currentLabel:f,brushSize:B,currentTool:a,annotations:m,currentAnnotation:h,onAnnotationAdd:function(e){M(m.concat([e])),h||S(e)},onAnnotationModify:K}),O=a=="polygon"?Sn:mn;return(0,n.jsxs)(G.Z,{className:j().segment,children:[(0,n.jsxs)(N.Z,{children:[(0,n.jsx)(g.Z,{imgSrc:"./pics/buttons/intelligent_interaction.png",children:"Intelligent Interaction"}),(0,n.jsx)(rn,{active:a=="polygon",onClick:function(){d("polygon"),S(void 0)},children:"Polygon"}),(0,n.jsx)(W.Z,{size:B,active:a=="brush",onClick:function(){a!="rubber"&&a!="brush"&&S(void 0),d("brush")},onChange:function(e){E(e)},children:"Brush"}),(0,n.jsx)(W.Z,{size:B,active:a=="rubber",onClick:function(){a!="rubber"&&a!="brush"&&S(void 0),d("rubber")},onChange:function(e){E(e)},imgSrc:"./pics/buttons/rubber.png",children:"Rubber"}),(0,n.jsx)(g.Z,{imgSrc:"./pics/buttons/zoom_in.png",onClick:function(){H(X+.1)},children:"Zoom in"}),(0,n.jsx)(g.Z,{imgSrc:"./pics/buttons/zoom_out.png",onClick:function(){H(X-.1)},children:"Zoom out"}),(0,n.jsx)(g.Z,{imgSrc:"./pics/buttons/save.png",children:"Save"}),(0,n.jsx)(g.Z,{imgSrc:"./pics/buttons/move.png",children:"Move"}),(0,n.jsx)(g.Z,{imgSrc:"./pics/buttons/export.png",children:"Export"}),(0,n.jsx)(g.Z,{imgSrc:"./pics/buttons/data_division.png",children:"Divide Data"}),(0,n.jsx)(g.Z,{imgSrc:"./pics/buttons/prev.png",children:"Undo"}),(0,n.jsx)(g.Z,{imgSrc:"./pics/buttons/next.png",children:"Redo"}),(0,n.jsx)(g.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:"Clear Mark"})]}),(0,n.jsx)("div",{className:j().mainStage,children:(0,n.jsx)(on.Z,{scale:X,annotations:m,onMouseDown:O.onMouseDown,onMouseMove:O.onMouseMove,onMouseUp:O.onMouseUp})}),(0,n.jsxs)(N.Z,{disLoc:"right",children:[(0,n.jsx)(D,{imgSrc:"./pics/buttons/threshold.png",disLoc:"left",children:"Segment Threshold"}),(0,n.jsx)(D,{imgSrc:"./pics/buttons/alpha.png",disLoc:"left",children:"Diaphaneity"}),(0,n.jsx)(D,{imgSrc:"./pics/buttons/radius.png",disLoc:"left",children:"Visual Radius"})]}),(0,n.jsxs)("div",{className:j().rightSideBar,children:[(0,n.jsx)("div",{className:j().determinOutline,children:(0,n.jsx)(z.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",block:!0,onClick:function(){S(void 0)},children:"Determine Outline"})}),(0,n.jsx)(tn.Z,{selectedLabel:f,onLabelSelect:function(e){r(e),S(void 0)},onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}}),(0,n.jsx)(en.Z,{selectedAnnotation:h,annotations:m,onAnnotationSelect:function(e){e!=null&&e.delete||S(e)},onAnnotationAdd:function(){},onAnnotationModify:function(){},onAnnotationDelete:function(e){M(m.filter(function(A){return A.annotationId!=e.annotationId})),S(void 0)}})]})]})},vn=fn}}]);
