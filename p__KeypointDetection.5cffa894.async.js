(self.webpackChunkpp_labeling_frontend=self.webpackChunkpp_labeling_frontend||[]).push([[267],{71212:function(M){M.exports={key:"key___HbxlB",mainStage:"mainStage___2kPY7",draw:"draw___1d3zf",pblock:"pblock___13HlD",progress:"progress___1iogf",rightSideBar:"rightSideBar___2SKvQ",finished:"finished___nNiaq"}},82881:function(M,h,a){"use strict";a.r(h);var tn=a(57663),j=a(71577),en=a(34669),Z=a(54458),d=a(2824),c=a(67294),B=a(71212),l=a.n(B),U=a(8088),s=a(61541),R=a(44434),K=a(5041),W=a(57436),N=a(14836),k=a(29919),H=a(13931),e=a(85893),P=40,J=function(){var F=(0,c.useState)(void 0),x=(0,d.Z)(F,2),g=x[0],Y=x[1],w=(0,c.useState)({color:"",name:""}),y=(0,d.Z)(w,2),A=y[0],p=y[1],z=(0,c.useState)(),O=(0,d.Z)(z,2),f=O[0],m=O[1],Q=(0,c.useState)([]),D=(0,d.Z)(Q,2),r=D[0],u=D[1],G=(0,c.useState)(1),L=(0,d.Z)(G,2),v=L[0],S=L[1],C=function(n){n||S(1),n<.1||n>3?S(1):S(n)},_=function(n){m(n),n!=null&&n.label&&p(n.label)};(0,c.useEffect)(function(){localStorage.removeItem("history"),b([])},[]);function b(i,n){var t=localStorage.getItem("history"),o=t?JSON.parse(t):{index:-1,items:[]},T={currentAnnotation:n,annotations:i};if(JSON.stringify(o.items[o.index])!=JSON.stringify(T)){var q=o.index>P?o.index-P:0,nn=o.items.splice(q,o.index==0?1:o.index+1);o.items=nn.concat([T]),o.index<=P?o.index++:o.index=P+1,localStorage.setItem("history",JSON.stringify(o))}}var V=function(){var n=localStorage.getItem("history");if(!!n){var t=JSON.parse(n);if(!!t&&!(t.index>=t.items.length-1)){t.index++,localStorage.setItem("history",JSON.stringify(t));var o=t.items[t.index];m(o.currentAnnotation),u(o.annotations)}}},X=function(){var n=localStorage.getItem("history");if(!!n){var t=JSON.parse(n);if(!(!t||!t.index)&&!(t.index<=0)){t.index--,localStorage.setItem("history",JSON.stringify(t));var o=t.items[t.index];m(o.currentAnnotation),u(o.annotations)}}},$=function(n){for(var t=[],o=0;o<r.length;o++)r[o].annotationId==n.annotationId?t.push(n):t.push(r[o]);_(n),u(t)},I=(0,H.Z)({currentLabel:A,currentTool:g,annotations:r,currentAnnotation:f,onAnnotationAdd:function(n){var t=r.concat([n]);u(t),f||_(n)},onAnnotationModify:$,onMouseUp:function(){b(r,f)}}),E=I;return(0,e.jsxs)(U.Z,{className:l().key,children:[(0,e.jsxs)(R.Z,{children:[(0,e.jsx)(k.Z,{active:g=="polygon",onClick:function(){Y("polygon"),_(void 0)},children:"Polygon"}),(0,e.jsx)(s.Z,{imgSrc:"./pics/buttons/zoom_in.png",onClick:function(){C(v+.1)},children:"Zoom in"}),(0,e.jsx)(s.Z,{imgSrc:"./pics/buttons/zoom_out.png",onClick:function(){C(v-.1)},children:"Zoom out"}),(0,e.jsx)(s.Z,{imgSrc:"./pics/buttons/save.png",children:"Save"}),(0,e.jsx)(s.Z,{imgSrc:"./pics/buttons/move.png",children:"Move"}),(0,e.jsx)(s.Z,{imgSrc:"./pics/buttons/export.png",children:"Export"}),(0,e.jsx)(s.Z,{imgSrc:"./pics/buttons/data_division.png",children:"Divide Data"}),(0,e.jsx)(s.Z,{imgSrc:"./pics/buttons/prev.png",onClick:function(){X()},children:"Undo"}),(0,e.jsx)(s.Z,{imgSrc:"./pics/buttons/next.png",onClick:function(){V()},children:"Redo"}),(0,e.jsx)(s.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:"Clear Mark"})]}),(0,e.jsxs)("div",{className:l().mainStage,children:[(0,e.jsx)("div",{className:l().draw,children:(0,e.jsx)(W.Z,{scale:v,annotations:r,currentTool:g,onMouseDown:E.onMouseDown,onMouseMove:E.onMouseMove,onMouseUp:E.onMouseUp,createPolygonFunc:I.createElementsFunc})}),(0,e.jsx)("div",{className:l().pblock,children:(0,e.jsx)("div",{className:l().progress,children:(0,e.jsx)(Z.Z,{percent:50,status:"active"})})})]}),(0,e.jsxs)("div",{className:l().rightSideBar,children:[(0,e.jsx)("div",{className:l().finished,children:(0,e.jsx)(j.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",block:!0,onClick:function(){_(void 0)},children:"Determine Outline"})}),(0,e.jsx)(K.Z,{selectedLabel:A,onLabelSelect:function(n){p(n),_(void 0)},onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}}),(0,e.jsx)(N.Z,{selectedAnnotation:f,annotations:r,onAnnotationSelect:function(n){n!=null&&n.delete||_(n)},onAnnotationAdd:function(){},onAnnotationModify:function(){},onAnnotationDelete:function(n){u(r.filter(function(t){return t.annotationId!=n.annotationId})),_(void 0)}})]})]})};h.default=J}}]);
