(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[498],{91220:function(k,I,e){"use strict";e.d(I,{Z:function(){return P}});var Z=e(64254);function P(a,l){var E;if(typeof Symbol=="undefined"||a[Symbol.iterator]==null){if(Array.isArray(a)||(E=(0,Z.Z)(a))||l&&a&&typeof a.length=="number"){E&&(a=E);var A=0,L=function(){};return{s:L,n:function(){return A>=a.length?{done:!0}:{done:!1,value:a[A++]}},e:function(p){throw p},f:L}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var j=!0,T=!1,h;return{s:function(){E=a[Symbol.iterator]()},n:function(){var p=E.next();return j=p.done,p},e:function(p){T=!0,h=p},f:function(){try{!j&&E.return!=null&&E.return()}finally{if(T)throw h}}}}},41435:function(k,I,e){"use strict";e.d(I,{Z:function(){return A}});var Z=e(94663),P=e(80112);function a(L){return Function.toString.call(L).indexOf("[native code]")!==-1}var l=e(18597);function E(L,j,T){return(0,l.Z)()?E=Reflect.construct:E=function(b,p,O){var S=[null];S.push.apply(S,p);var K=Function.bind.apply(b,S),R=new K;return O&&(0,P.Z)(R,O.prototype),R},E.apply(null,arguments)}function A(L){var j=typeof Map=="function"?new Map:void 0;return A=function(h){if(h===null||!a(h))return h;if(typeof h!="function")throw new TypeError("Super expression must either be null or a function");if(typeof j!="undefined"){if(j.has(h))return j.get(h);j.set(h,b)}function b(){return E(h,arguments,(0,Z.Z)(this).constructor)}return b.prototype=Object.create(h.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),(0,P.Z)(b,h)},A(L)}},48627:function(k){k.exports={container:"container___2RXc3"}},18398:function(k){k.exports={_ppcard:"_ppcard___1sR0b",title:"title___2fjZe",shadow:"shadow___3SaOl",main:"main___IOVJu",block_l:"block_l___1ywNh",block_r:"block_r___Sg4L7",goup:"goup___1vznA"}},44943:function(){},11428:function(k,I,e){"use strict";var Z=e(67294),P=e(48627),a=e.n(P),l=e(85893),E=function(L){return(0,l.jsx)("div",{className:"".concat(a().container),style:{backgroundImage:"url(./pics/background.png)"},children:L.children})};I.Z=E},68370:function(k,I,e){"use strict";e.r(I),e.d(I,{default:function(){return c}});var Z=e(34792),P=e(48086),a=e(67294),l=e(48971),E=e(57663),A=e(71577),L=e(88983),j=e(47933),T=e(47673),h=e(24044),b=e(9715),p=e(93766),O=e(2824),S=e(89032),K=e(15746),R=e(11849),y=e(13062),v=e(71230),x=e(11700),V=e(18398),U=e.n(V),Y=e(37071),z=e(91156),q=e(64322),u=e(85893),w=function(g){return(0,u.jsxs)("div",{className:U()._ppcard,style:g.style,children:[(0,u.jsx)(v.Z,{className:U().titleRow,style:{display:g.title?void 0:"none"},children:(0,u.jsx)(x.Z,{className:U().title,children:g.title})}),(0,u.jsx)(v.Z,{style:{marginTop:26},children:(0,u.jsx)(K.Z,{span:24,style:(0,R.Z)({paddingLeft:30,paddingRight:30,textAlign:"center"},g.innerStyle),children:g.children})})]})},ee=function(g){var M=(0,q.Gd)(a.useState),D=Y.Z.getQueryVariable("projectId");console.log("render ppcreater",g,D);var B=(0,l.YB)().formatMessage({id:"component.PPCreater.projectName"}),$=(0,l.YB)().formatMessage({id:"component.PPCreater.datasePath"}),H=(0,l.YB)().formatMessage({id:"component.PPCreater.description"}),Q=(0,l.YB)().formatMessage({id:"component.PPCreater.maxPoints"}),n=(0,l.YB)().formatMessage({id:"component.PPCreater.annotationMode"}),t=(0,l.YB)().formatMessage({id:"component.PPCreater.pixelMode"}),s=(0,l.YB)().formatMessage({id:"component.PPCreater.polygonMode"}),i=(0,l.YB)().formatMessage({id:"component.PPCreater.update"}),r=(0,l.YB)().formatMessage({id:"component.PPCreater.create"}),f=(0,l.YB)().formatMessage({id:"component.PPCreater.cancel"}),N=function(F){D?M.update(D,{name:F.name,description:F.description,dataDir:F.dataDir,labelDir:F.labelDir}).then(function(){l.m8.push("/welcome")}):M.create({name:F.name,description:F.description,taskCategoryId:z.ux[g.taskCategory].id,dataDir:F.dataDir,labelDir:F.labelDir}).then(function(re){l.m8.push("/".concat((0,z.LV)(g.taskCategory),"?projectId=").concat(re.projectId))}).catch(function(){})},te=g.taskCategory?z.ux[g.taskCategory].name:null,C=p.Z.useForm(),J=(0,O.Z)(C,1),X=J[0];return(0,a.useEffect)(function(){M.getCurr(D).then(function(W){console.log("project",W);var F={name:W==null?void 0:W.name,description:W==null?void 0:W.description,dataDir:W==null?void 0:W.dataDir};X.setFieldsValue(F)})},[]),(0,u.jsxs)("div",{className:U().shadow,style:g.style,children:[(0,u.jsx)("div",{id:"left",className:U().block_l,children:(0,u.jsx)(w,{title:te,style:{height:760,padding:"1.25rem 0"},children:(0,u.jsxs)(p.Z,{form:X,layout:"horizontal",size:"large",style:{marginTop:"5.69rem"},onFinish:function(F){N(F)},children:[(0,u.jsx)(p.Z.Item,{name:"name",label:B,labelCol:{span:6},wrapperCol:{span:16},rules:[{required:!0,message:"Please input project name!"}],style:{fontSize:"1.5rem"},children:(0,u.jsx)(h.Z,{size:"large",placeholder:"Words or numbers",style:{height:"3.13rem"}})}),(0,u.jsx)(p.Z.Item,{name:"dataDir",label:$,labelCol:{span:6},wrapperCol:{span:16},rules:[{required:!0,message:"Please input dataset path!"}],style:{fontSize:"1.5rem"},children:(0,u.jsx)(h.Z,{size:"large",placeholder:"Dataset Path",style:{height:"3.13rem"},disabled:D!=null})}),(0,u.jsx)(p.Z.Item,{name:"description",label:H,labelCol:{span:6},wrapperCol:{span:16},rules:[{required:!1}],style:{fontSize:"1.5rem"},children:(0,u.jsx)(h.Z,{size:"large",placeholder:"Words or numbers",style:{height:"3.13rem"}})}),(0,u.jsx)(p.Z.Item,{name:"maxPoints",label:Q,labelCol:{span:6},wrapperCol:{span:16},rules:[{required:g.taskCategory=="keypointDetection",message:"Please input max points!"}],style:{fontSize:"1.5rem",display:g.taskCategory=="keypointDetection"?void 0:"none"},children:(0,u.jsx)(h.Z,{size:"large",placeholder:"Numbers (Int)",style:{height:"3.13rem"}})}),(0,u.jsx)(p.Z.Item,{name:"segmentationMode",label:n,labelCol:{span:6},wrapperCol:{span:16},rules:[{required:g.taskCategory=="semanticSegmentation",message:"Please select task category!"}],style:{fontSize:"1.5rem",display:g.taskCategory=="semanticSegmentation"?void 0:"none"},children:(0,u.jsx)("div",{className:U().goup,children:(0,u.jsxs)(j.ZP.Group,{defaultValue:1,size:"large",style:{height:"3.13rem"},children:[(0,u.jsx)(j.ZP,{value:1,children:t}),(0,u.jsx)(j.ZP,{value:2,children:s})]})})}),(0,u.jsxs)(p.Z.Item,{wrapperCol:{span:16,offset:6},children:[(0,u.jsx)(A.Z,{htmlType:"submit",type:"primary",style:{height:"2.5rem",width:"48%"},block:!0,children:D?i:r}),"\xA0\xA0",(0,u.jsx)(A.Z,{htmlType:"button",style:{height:"2.5rem",width:"48%"},block:!0,onClick:function(){l.m8.push("/welcome")},children:f})]})]})})}),(0,u.jsx)("div",{id:"right",className:U().block_r,children:(0,u.jsx)(w,{style:{height:"43.63rem",padding:"0.5rem 0"},children:(0,u.jsx)("img",{src:g.imgSrc,style:{height:"43.63rem",width:"60rem"}})})})]})},o=ee,m=e(11428),_=function(){var g=(0,l.YB)().formatMessage({id:"pages.ProjectDetail.taskNot"}),M=(0,q.os)(Y.Z.getQueryVariable("taskCategory")),D=(0,l.YB)().formatMessage({id:"pages.ProjectDetail.taskCtg"},{category:M});return M||(P.default.error(g),l.m8.push("/")),M in z.ux||(P.default.error(D),l.m8.push("/")),(0,u.jsx)(m.Z,{children:(0,u.jsx)(o,{imgSrc:"./pics/illustration.jpg",taskCategory:M})})},c=_},91156:function(k,I,e){"use strict";e.d(I,{F$:function(){return S},LV:function(){return U},ux:function(){return z}});var Z=e(34792),P=e(94043),a=e.n(P),l=e(37071),E=e(9992),A=e(63891),L=e(13868),j=e(70676),T=e(54919),h=e(6276),b=e(59124),p=localStorage.getItem("basePath"),O=new E.VK(p?{basePath:p}:void 0),S=new A.U(O),K=new L.v(O),R=new T.W(O),y=new h.s(O),v=new b.C(O);function x(n){return JSON.parse(JSON.stringify(n))}var V=function(t,s,i){if(!i)return-1;for(var r=0;r<s.length;r++)if(t[i]==s[r][i])return r;return-1};function U(n){return n&&n.replace(/[A-Z]/g,function(t){return"_".concat(t.toLowerCase())})}function Y(n){return n&&(n.toLowerCase().replace(/([-_][a-z])/g,function(t){return t.toUpperCase().replace("-","").replace("_","")}),n)}var z={classification:{name:"Image Classification",avatar:"./pics/classification.jpg",id:1},detection:{name:"Detection",avatar:"./pics/object_detection.jpg",id:2},semanticSegmentation:{name:"Semantic Segmentation",avatar:"./pics/semantic_segmentation.jpg",id:3},instanceSegmentation:{name:"Instance Segmentation",avatar:"./pics/instance_segmentation.jpg",id:4},keypointDetection:{name:"Keypoint Detection",avatar:"./pics/keypoint_detection.jpg",id:5}},q=function(t,s){var i=_toConsumableArray(t);for(var r in t)i[r].active=!1;for(var f in t)V(t[f],s,"labelId")!=-1&&(i[f].active=!0);return console.log("activa labs",i),i};function u(n){return w.apply(this,arguments)}function w(){return w=_asyncToGenerator(_regeneratorRuntime.mark(function n(t){return _regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:S.getAll().then(function(r){console.log("get all projects",x(r)),t(x(r))}).catch(function(r){serviceUtils.parseError(r,_message)});case 1:case"end":return i.stop()}},n)})),w.apply(this,arguments)}function ee(n){return o.apply(this,arguments)}function o(){return o=_asyncToGenerator(_regeneratorRuntime.mark(function n(t){var s,i=arguments;return _regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:s=i.length>1&&i[1]!==void 0?i[1]:null,console.log("get project id ",t),S.get(t).then(function(N){return console.log("getProject res",N),s&&s(N),N}).catch(function(N){console.log("getProject err",N),serviceUtils.parseError(N,_message)});case 3:case"end":return f.stop()}},n)})),o.apply(this,arguments)}function m(n,t){return _.apply(this,arguments)}function _(){return _=_asyncToGenerator(_regeneratorRuntime.mark(function n(t,s){return _regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:console.log("delete pj, pjid",t),S.remove(t).then(function(f){console.log("delete project",f),u(s)}).catch(function(f){console.log(f),serviceUtils.parseError(f,_message)});case 2:case"end":return r.stop()}},n)})),_.apply(this,arguments)}function c(n){return d.apply(this,arguments)}function d(){return d=_asyncToGenerator(_regeneratorRuntime.mark(function n(t){return _regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:y.getAll().then(function(r){console.log("got tasks",r),t&&t(r)}).catch(function(r){console.log("get tasks err",r),serviceUtils.parseError(r,_message)});case 1:case"end":return i.stop()}},n)})),d.apply(this,arguments)}function g(n,t){return M.apply(this,arguments)}function M(){return M=_asyncToGenerator(_regeneratorRuntime.mark(function n(t,s){return _regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:console.log("get task id",t),y.get(t).then(function(f){console.log("got task ",f),s&&s(f)});case 2:case"end":return r.stop()}},n)})),M.apply(this,arguments)}function D(n){return B.apply(this,arguments)}function B(){return B=_asyncToGenerator(_regeneratorRuntime.mark(function n(t){var s,i,r,f,N;return _regeneratorRuntime.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(t){C.next=2;break}return C.abrupt("return",0);case 2:return C.prev=2,C.next=5,S.getTasks(t);case 5:s=C.sent,i=0,r=_createForOfIteratorHelper(s);try{for(r.s();!(f=r.n()).done;)N=f.value,N.annotations.length!=0&&i++}catch(J){r.e(J)}finally{r.f()}return console.log("progress",Math.ceil(i/s.length*100)),C.abrupt("return",Math.ceil(i/s.length*100));case 13:return C.prev=13,C.t0=C.catch(2),console.log("get progress err",C.t0),serviceUtils.parseError(C.t0,_message),C.abrupt("return",0);case 18:case"end":return C.stop()}},n,null,[[2,13]])})),B.apply(this,arguments)}function $(n,t){console.log("getLabels projectid",n),!!n&&S.getLabels(n).then(function(s){console.log("got labels ",s),t(x(s))}).catch(function(s){serviceUtils.parseError(s,_message)})}function H(n,t,s){var i=LabelFromJSON(t);i.projectId=n,K.create(i).then(function(){$(n,s)}).catch(function(r){serviceUtils.parseError(r,_message)})}function Q(n,t){console.log("delete label",n),K.remove(n.labelId).then(function(){_message.error("Label "+n.name+" is deleted!"),$(n.projectId,t)}).catch(function(s){serviceUtils.parseError(s,_message)})}},5467:function(k,I,e){"use strict";e.d(I,{Z:function(){return Z}});function Z(P){return Object.keys(P).reduce(function(a,l){return(l.substr(0,5)==="data-"||l.substr(0,5)==="aria-"||l==="role")&&l.substr(0,7)!=="data-__"&&(a[l]=P[l]),a},{})}},47933:function(k,I,e){"use strict";e.d(I,{ZP:function(){return ee}});var Z=e(96156),P=e(22122),a=e(67294),l=e(50132),E=e(94184),A=e.n(E),L=e(42550),j=e(65632),T=a.createContext(null),h=T.Provider,b=T,p=e(21687),O=function(o,m){var _={};for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&m.indexOf(c)<0&&(_[c]=o[c]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,c=Object.getOwnPropertySymbols(o);d<c.length;d++)m.indexOf(c[d])<0&&Object.prototype.propertyIsEnumerable.call(o,c[d])&&(_[c[d]]=o[c[d]]);return _},S=function(m,_){var c,d=a.useContext(b),g=a.useContext(j.E_),M=g.getPrefixCls,D=g.direction,B=a.useRef(),$=(0,L.sQ)(_,B);a.useEffect(function(){(0,p.Z)(!("optionType"in m),"Radio","`optionType` is only support in Radio.Group.")},[]);var H=function(C){var J,X;(J=m.onChange)===null||J===void 0||J.call(m,C),(X=d==null?void 0:d.onChange)===null||X===void 0||X.call(d,C)},Q=m.prefixCls,n=m.className,t=m.children,s=m.style,i=O(m,["prefixCls","className","children","style"]),r=M("radio",Q),f=(0,P.Z)({},i);d&&(f.name=d.name,f.onChange=H,f.checked=m.value===d.value,f.disabled=m.disabled||d.disabled);var N=A()("".concat(r,"-wrapper"),(c={},(0,Z.Z)(c,"".concat(r,"-wrapper-checked"),f.checked),(0,Z.Z)(c,"".concat(r,"-wrapper-disabled"),f.disabled),(0,Z.Z)(c,"".concat(r,"-wrapper-rtl"),D==="rtl"),c),n);return a.createElement("label",{className:N,style:s,onMouseEnter:m.onMouseEnter,onMouseLeave:m.onMouseLeave},a.createElement(l.Z,(0,P.Z)({},f,{type:"radio",prefixCls:r,ref:$})),t!==void 0?a.createElement("span",null,t):null)},K=a.forwardRef(S);K.displayName="Radio";var R=K,y=e(28481),v=e(21770),x=e(97647),V=e(5467),U=a.forwardRef(function(o,m){var _=a.useContext(j.E_),c=_.getPrefixCls,d=_.direction,g=a.useContext(x.Z),M=(0,v.Z)(o.defaultValue,{value:o.value}),D=(0,y.Z)(M,2),B=D[0],$=D[1],H=function(t){var s=B,i=t.target.value;"value"in o||$(i);var r=o.onChange;r&&i!==s&&r(t)},Q=function(){var t,s=o.prefixCls,i=o.className,r=i===void 0?"":i,f=o.options,N=o.optionType,te=o.buttonStyle,C=te===void 0?"outline":te,J=o.disabled,X=o.children,W=o.size,F=o.style,re=o.id,le=o.onMouseEnter,ce=o.onMouseLeave,ae=c("radio",s),ne="".concat(ae,"-group"),oe=X;if(f&&f.length>0){var se=N==="button"?"".concat(ae,"-button"):ae;oe=f.map(function(G){return typeof G=="string"||typeof G=="number"?a.createElement(R,{key:G.toString(),prefixCls:se,disabled:J,value:G,checked:B===G},G):a.createElement(R,{key:"radio-group-value-options-".concat(G.value),prefixCls:se,disabled:G.disabled||J,value:G.value,checked:B===G.value,style:G.style},G.label)})}var ie=W||g,ue=A()(ne,"".concat(ne,"-").concat(C),(t={},(0,Z.Z)(t,"".concat(ne,"-").concat(ie),ie),(0,Z.Z)(t,"".concat(ne,"-rtl"),d==="rtl"),t),r);return a.createElement("div",(0,P.Z)({},(0,V.Z)(o),{className:ue,style:F,onMouseEnter:le,onMouseLeave:ce,id:re,ref:m}),oe)};return a.createElement(h,{value:{onChange:H,value:B,disabled:o.disabled,name:o.name}},Q())}),Y=a.memo(U),z=function(o,m){var _={};for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&m.indexOf(c)<0&&(_[c]=o[c]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,c=Object.getOwnPropertySymbols(o);d<c.length;d++)m.indexOf(c[d])<0&&Object.prototype.propertyIsEnumerable.call(o,c[d])&&(_[c[d]]=o[c[d]]);return _},q=function(m,_){var c=a.useContext(b),d=a.useContext(j.E_),g=d.getPrefixCls,M=m.prefixCls,D=z(m,["prefixCls"]),B=g("radio-button",M);return c&&(D.checked=m.value===c.value,D.disabled=m.disabled||c.disabled),a.createElement(R,(0,P.Z)({prefixCls:B},D,{type:"radio",ref:_}))},u=a.forwardRef(q),w=R;w.Button=u,w.Group=Y;var ee=w},88983:function(k,I,e){"use strict";var Z=e(38663),P=e.n(Z),a=e(44943),l=e.n(a)},50132:function(k,I,e){"use strict";var Z=e(22122),P=e(96156),a=e(81253),l=e(28991),E=e(6610),A=e(5991),L=e(10379),j=e(81907),T=e(67294),h=e(94184),b=e.n(h),p=function(O){(0,L.Z)(K,O);var S=(0,j.Z)(K);function K(R){var y;(0,E.Z)(this,K),y=S.call(this,R),y.handleChange=function(x){var V=y.props,U=V.disabled,Y=V.onChange;U||("checked"in y.props||y.setState({checked:x.target.checked}),Y&&Y({target:(0,l.Z)((0,l.Z)({},y.props),{},{checked:x.target.checked}),stopPropagation:function(){x.stopPropagation()},preventDefault:function(){x.preventDefault()},nativeEvent:x.nativeEvent}))},y.saveInput=function(x){y.input=x};var v="checked"in R?R.checked:R.defaultChecked;return y.state={checked:v},y}return(0,A.Z)(K,[{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"render",value:function(){var y,v=this.props,x=v.prefixCls,V=v.className,U=v.style,Y=v.name,z=v.id,q=v.type,u=v.disabled,w=v.readOnly,ee=v.tabIndex,o=v.onClick,m=v.onFocus,_=v.onBlur,c=v.onKeyDown,d=v.onKeyPress,g=v.onKeyUp,M=v.autoFocus,D=v.value,B=v.required,$=(0,a.Z)(v,["prefixCls","className","style","name","id","type","disabled","readOnly","tabIndex","onClick","onFocus","onBlur","onKeyDown","onKeyPress","onKeyUp","autoFocus","value","required"]),H=Object.keys($).reduce(function(t,s){return(s.substr(0,5)==="aria-"||s.substr(0,5)==="data-"||s==="role")&&(t[s]=$[s]),t},{}),Q=this.state.checked,n=b()(x,V,(y={},(0,P.Z)(y,"".concat(x,"-checked"),Q),(0,P.Z)(y,"".concat(x,"-disabled"),u),y));return T.createElement("span",{className:n,style:U},T.createElement("input",(0,Z.Z)({name:Y,id:z,type:q,required:B,readOnly:w,disabled:u,tabIndex:ee,className:"".concat(x,"-input"),checked:!!Q,onClick:o,onFocus:m,onBlur:_,onKeyUp:g,onKeyDown:c,onKeyPress:d,onChange:this.handleChange,autoFocus:M,ref:this.saveInput,value:D},H)),T.createElement("span",{className:"".concat(x,"-inner")}))}}],[{key:"getDerivedStateFromProps",value:function(y,v){return"checked"in y?(0,l.Z)((0,l.Z)({},v),{},{checked:y.checked}):null}}]),K}(T.Component);p.defaultProps={prefixCls:"rc-checkbox",className:"",style:{},type:"checkbox",defaultChecked:!1,onFocus:function(){},onBlur:function(){},onChange:function(){},onKeyDown:function(){},onKeyPress:function(){},onKeyUp:function(){}},I.Z=p}}]);
