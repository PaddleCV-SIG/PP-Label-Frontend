(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[885],{85024:function(g){g.exports={listItem:"listItem___u4Q82",eye:"eye___BwaRm",delete:"delete___31JB_",roundBall:"roundBall___23A7l",popover:"popover___1BNET",annotationId:"annotationId___zAzX4",labelName:"labelName___2ohxn",listItemActive:"listItemActive___2QnA3"}},56159:function(g){g.exports={labelList:"labelList___v7C6K",listHeader:"listHeader___1aY8R",eye:"eye___2MKbp",roundBall:"roundBall___187XH"}},57560:function(g){g.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___147XP",toolBarButtonContainer:"toolBarButtonContainer___ZEvhK",toolBarButton:"toolBarButton___1s2Rh",buttonText:"buttonText___3NTCv",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___2Utx8",popover:"popover___3PRoi"}},26647:function(g){g.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1FTWb",toolBarButtonContainer:"toolBarButtonContainer___1Vahn",toolBarButton:"toolBarButton___3mR2H",buttonText:"buttonText___Y0WDm",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3lRZ8",popover:"popover___3zzu2",slider:"slider___ALra-",popoverLeft:"popoverLeft___15lGe"}},14836:function(g,b,n){"use strict";n.d(b,{Z:function(){return c}});var U=n(54421),L=n(38272),I=n(57663),h=n(71577),x=n(67294),M=n(56159),R=n.n(M),T=n(49111),j=n(19650),e=n(2824),v=n(11849),m=n(85024),t=n.n(m),l=n(63097),o=n(85893),r=function(a){var s=(0,v.Z)({},a.annotation),E=(0,x.useState)(s.invisible),f=(0,e.Z)(E,2),i=f[0],P=f[1],y=(0,x.useState)(0),O=(0,e.Z)(y,2),D=O[0],A=O[1];(0,x.useEffect)(function(){P(a.annotation.invisible)},[a.annotation.invisible]);var W=(0,o.jsxs)(L.ZP.Item,{className:"".concat(t().listItem," ").concat(a.active?t().listItemActive:""),unselectable:"on",onClick:function(){a.onClick(s)},children:[(0,o.jsxs)(j.Z,{align:"center",size:5,children:[(0,o.jsx)("a",{className:t().eye,style:{backgroundImage:i?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(S){S.stopPropagation(),P(!i),a.onAnnotationModify(s)}})," ",(0,o.jsx)("span",{className:t().annotationId,children:s.frontendId}),(0,o.jsx)("span",{className:t().labelName,children:s.label.name}),(0,o.jsx)(l.Z,{color:s.label.color})]}),(0,o.jsx)("a",{className:t().delete,onClick:function(S){S.stopPropagation();var K=new Date().getTime();K-D<300||(A(K),a.onAnnotationDelete(s))}})]});return W},_=r,d=n(48971),u=function(a){var s=(0,d.YB)().formatMessage({id:"component.PPAnnotationList.annotationList"}),E=(0,d.YB)().formatMessage({id:"component.PPAnnotationList.addAnnotation"});return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(L.ZP,{className:R().labelList,size:"large",header:(0,o.jsx)("div",{className:R().listHeader,children:s}),bordered:!0,dataSource:a.annotations,renderItem:function(i){var P;return(0,o.jsx)(_,{onClick:a.onAnnotationSelect,annotation:i,active:i.frontendId==((P=a.currAnnotation)===null||P===void 0?void 0:P.frontendId),onAnnotationDelete:a.onAnnotationDelete,onAnnotationModify:a.onAnnotationModify})},footer:(0,o.jsx)("div",{children:(0,o.jsx)(h.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){a.onAnnotationAdd()},block:!0,children:E})})})})},c=u},43801:function(g,b,n){"use strict";n.d(b,{Z:function(){return m}});var U=n(11849),L=n(2824),I=n(91220),h=n(67294),x=n(65031),M=n(85893);function R(t){var l=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return l?{r:parseInt(l[1],16),g:parseInt(l[2],16),b:parseInt(l[3],16)}:null}function T(t,l,o,r){if(!(!t||!l||!o||!r))return{width:t,color:l,points:o,tool:r}}function j(t){if(!t.annotation||!t.annotation.points)return(0,M.jsx)(M.Fragment,{});var l=[],o=(0,I.Z)(t.annotation.points),r;try{for(o.s();!(r=o.n()).done;){var _=r.value;if(!(!_.width||!_.color||!_.tool)){var d=R(_.color);!d||l.push((0,M.jsx)(x.x1,{stroke:"rgba(".concat(d.r,", ").concat(d.g,", ").concat(d.b,", ").concat(t.transparency*.01,")"),strokeWidth:_.width,globalCompositeOperation:_.tool==="brush"?"source-over":"destination-out",lineCap:"round",points:_.points,tension:1}))}}}catch(u){o.e(u)}finally{o.f()}return(0,M.jsx)(x.ZA,{draggable:!1,children:l})}function e(t,l){return t=="rubber"||l==2?"rubber":"brush"}function v(t){var l=0,o=(0,I.Z)(t),r;try{for(o.s();!(r=o.n()).done;){var _=r.value;!_||!_.frontendId||_.frontendId>l&&(l=_.frontendId)}}catch(d){o.e(d)}finally{o.f()}return l}function m(t){var l=(0,h.useState)(),o=(0,L.Z)(l,2),r=o[0],_=o[1],d=function(a,s,E,f){var i,P;if(!(t.currentTool!="brush"&&t.currentTool!="rubber"||!((i=t.currentLabel)!==null&&i!==void 0&&i.color))){var y=(a.evt.offsetX+s)/f,O=(a.evt.offsetY+E)/f,D=e(t.currentTool,a.evt.button),A=T(t.brushSize||10,(P=t.currentLabel)===null||P===void 0?void 0:P.color,[y,O,y,O],D);if(!!A)if(_(D),t.currentAnnotation){var W,B={type:"brush",frontendId:t.currentAnnotation.frontendId,label:t.currentAnnotation.label,points:(W=t.currentAnnotation.points)===null||W===void 0?void 0:W.concat([A])};t.onAnnotationModify(B)}else{if(D=="rubber")return;t.onAnnotationAdd({type:D,frontendId:v(t.annotations)+1,label:t.currentLabel,points:[A]})}}},u=function(a,s,E,f){var i;if(!(!r||!t.currentAnnotation||!t.currentLabel.color)){var P=(a.evt.offsetX+s)/f,y=(a.evt.offsetY+E)/f,O=[P,y],D=[];(i=t.currentAnnotation)!==null&&i!==void 0&&i.points&&(O=t.currentAnnotation.points[t.currentAnnotation.points.length-1].points.concat(O),D=t.currentAnnotation.points);var A=T(t.brushSize||10,t.currentLabel.color,O,r);!A||(D.pop(),D.push(A),t.onAnnotationModify((0,U.Z)((0,U.Z)({},t.currentAnnotation),{},{points:D,type:r})))}},c=function(){t.currentTool!="brush"&&t.currentTool!="rubber"||(_(void 0),t.onMouseUp())};return{onMouseDown:d,onMouseMove:u,onMouseUp:c,createElementsFunc:j}}},58967:function(g,b,n){"use strict";var U=n(20136),L=n(55241),I=n(77883),h=n(70507),x=n(57663),M=n(71577),R=n(2824),T=n(67294),j=n(61541),e=n(57560),v=n.n(e),m=n(85893),t=1,l=50,o=10;function r(d){return d?d<=t?t:d>=l?l:d:o}var _=function(u){var c=(0,T.useState)(r(u.size)),C=(0,R.Z)(c,2),a=C[0],s=C[1],E=function(i){s(r(i))};return(0,T.useEffect)(function(){E(u.size)},[u.size]),(0,m.jsxs)(L.Z,{overlayClassName:v().popover,placement:"right",content:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(M.Z,{type:"text",onClick:function(){var i,P=r(a-1);E(P),(i=u.onChange)===null||i===void 0||i.call(0,P)},children:"-"}),(0,m.jsx)(h.Z,{min:t,max:l,value:a,onChange:function(i){var P;(P=u.onChange)===null||P===void 0||P.call(0,i)},controls:!1,style:{textAlign:"center"}}),(0,m.jsx)(M.Z,{type:"text",onClick:function(){var i,P=r(a+1);E(P),(i=u.onChange)===null||i===void 0||i.call(0,P)},children:"+"})]}),trigger:u.active?"hover":"click",children:[" ",(0,m.jsx)(j.Z,{active:u.active,imgSrc:u.imgSrc||"./pics/buttons/brush.png",onClick:u.onClick,children:u.children||"Brush"})]})};b.Z=_},27992:function(g,b,n){"use strict";var U=n(20136),L=n(55241),I=n(13062),h=n(71230),x=n(77883),M=n(70507),R=n(89032),T=n(15746),j=n(66126),e=n(75454),v=n(2824),m=n(67294),t=n(61541),l=n(26647),o=n.n(l),r=n(85893),_=0,d=100,u=10,c=function(a){var s=(0,m.useState)(D(a.size)),E=(0,v.Z)(s,2),f=E[0],i=E[1];function P(A){i(D(A))}var y=a.minSize==null?_:a.minSize,O=a.maxSize==null?d:a.maxSize;function D(A){return A==null?u:A<=y?y:A>=O?O:A}return(0,m.useEffect)(function(){P(a.size),console.log("props.size changed to:".concat(a.size))},[a.size]),(0,r.jsxs)(L.Z,{overlayClassName:"".concat(o().popover," ").concat(a.disLoc=="left"?o().popoverLeft:""),placement:a.disLoc||"right",content:(0,r.jsxs)(h.Z,{children:[(0,r.jsx)(T.Z,{span:16,children:(0,r.jsx)(e.Z,{className:o().slider,value:f,max:O,min:y,onChange:function(W){var B;(B=a.onChange)===null||B===void 0||B.call(0,W)},tooltipVisible:!1})}),(0,r.jsx)(T.Z,{span:8,children:(0,r.jsx)(M.Z,{min:y,max:O,value:f,onChange:function(W){var B;(B=a.onChange)===null||B===void 0||B.call(0,W)},step:10})})]}),trigger:"hover",children:[" ",(0,r.jsx)(t.Z,{imgSrc:a.imgSrc||"",onClick:a.onClick,children:a.children})]})};b.Z=c},13931:function(g,b,n){"use strict";n.d(b,{Z:function(){return j}});var U=n(91220),L=n(11849),I=n(65031),h=n(85893);function x(e){var v=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return v?{r:parseInt(v[1],16),g:parseInt(v[2],16),b:parseInt(v[3],16)}:null}function M(e,v){if(!(!e||!v))return{color:e,points:v}}function R(e){if(!e.annotation||!e.annotation.points||!e.annotation.points[0])return[(0,h.jsx)(h.Fragment,{})];var v=e.annotation.points[0].points,m=e.annotation.points[0].color,t=x(m);if(!t)return[(0,h.jsx)(h.Fragment,{})];var l=.3,o=void 0,r=[];return v.forEach(function(_,d){if(!o){o=_;return}r.push((0,h.jsx)(I.Cd,{onMouseDown:function(){e.currentTool=="editor"&&e.onSelect(e.annotation)},draggable:e.currentTool=="editor",onDragMove:function(c){var C;c.cancelBubble=!0;var a=(C=e.stageRef)===null||C===void 0?void 0:C.current,s=a.findOne(".baseImage"),E=!1,f=c.target.x();f>s.width()/2&&(f=s.width()/2,E=!0),f<-s.width()/2&&(f=-s.width()/2,E=!0);var i=c.target.y();i>s.height()/2&&(i=s.height()/2,E=!0),i<-s.height()/2&&(i=-s.height()/2,E=!0),E&&c.target.setPosition({x:f,y:i}),v[d-1]=f,v[d]=i;var P=(0,L.Z)((0,L.Z)({},e.annotation),{},{points:[{color:m,points:v}]});e.onDrag(P)},onMouseOver:function(){var c;e.currentTool=="editor"&&(c=e.stageRef)!==null&&c!==void 0&&c.current&&(e.stageRef.current.container().style.cursor="cell")},onMouseOut:function(){var c;e.currentTool=="editor"&&(c=e.stageRef)!==null&&c!==void 0&&c.current&&(e.stageRef.current.container().style.cursor="default")},x:o,y:_,radius:5/e.scale,fill:m})),o=void 0}),[(0,h.jsxs)(I.ZA,{children:[(0,h.jsx)(I.x1,{onMouseOver:function(){e.currentTool=="editor"&&(document.body.style.cursor="pointer")},onMouseOut:function(){document.body.style.cursor="default"},onClick:function(){e.currentTool=="editor"&&e.onSelect(e.annotation)},stroke:m,strokeWidth:2/e.scale,globalCompositeOperation:"source-over",lineCap:"round",points:v,tension:0,closed:!0,fill:"rgba(".concat(t.r,", ").concat(t.g,", ").concat(t.b,", ").concat(l,")")}),r]},e.annotation.frontendId)]}function T(e){var v=0,m=(0,U.Z)(e),t;try{for(m.s();!(t=m.n()).done;){var l=t.value;!l||!l.frontendId||l.frontendId>v&&(v=l.frontendId)}}catch(o){m.e(o)}finally{m.f()}return v}function j(e){var v=function(r,_,d,u){var c,C=(r.evt.offsetX+_)/u,a=(r.evt.offsetY+d)/u,s=M((c=e.currentLabel)===null||c===void 0?void 0:c.color,[C,a]);!s||e.onAnnotationAdd({type:"polygon",frontendId:T(e.annotations)+1,label:e.currentLabel,points:[s]})},m=function(r,_,d,u){var c,C;if(!!e.currentAnnotation){var a=(r.evt.offsetX+_)/u,s=(r.evt.offsetY+d)/u,E=e.currentAnnotation.points||[],f=M((c=e.currentLabel)===null||c===void 0?void 0:c.color,(C=E[0])===null||C===void 0?void 0:C.points.concat([a,s]));if(!!f){var i={type:"polygon",frontendId:e.currentAnnotation.frontendId,label:e.currentAnnotation.label,points:[f]};e.onAnnotationModify(i)}}},t=function(r,_,d,u){e.currentTool=="polygon"&&(e.currentAnnotation?m(r,_,d,u):v(r,_,d,u))},l=function(){e.currentTool=="polygon"&&e.onMouseUp()};return{onMouseDown:t,onMouseMove:function(){},onMouseUp:l,createElementsFunc:R}}},29919:function(g,b,n){"use strict";var U=n(67294),L=n(61541),I=n(85893),h=function(M){return(0,I.jsx)(L.Z,{active:M.active,imgSrc:M.imgSrc||"./pics/buttons/polygon.png",onClick:M.onClick,children:M.children})};b.Z=h}}]);
