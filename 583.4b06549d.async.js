(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[583],{85024:function(N){N.exports={listItem:"listItem___u4Q82",eye:"eye___BwaRm",delete:"delete___31JB_",roundBall:"roundBall___23A7l",popover:"popover___1BNET",annotationId:"annotationId___zAzX4",labelName:"labelName___2ohxn",listItemActive:"listItemActive___2QnA3"}},56159:function(N){N.exports={labelList:"labelList___v7C6K",listHeader:"listHeader___1aY8R",eye:"eye___2MKbp",roundBall:"roundBall___187XH"}},26647:function(N){N.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1FTWb",toolBarButtonContainer:"toolBarButtonContainer___1Vahn",toolBarButton:"toolBarButton___3mR2H",buttonText:"buttonText___Y0WDm",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3lRZ8",popover:"popover___3zzu2",slider:"slider___ALra-",popoverLeft:"popoverLeft___15lGe"}},6277:function(N){N.exports={modal:"modal___26yNn"}},45092:function(N){N.exports={modal:"modal___1H_FQ"}},8978:function(N,Y,n){"use strict";n.d(Y,{Z:function(){return en}});var w=n(8870),V=n(2824),rn=n(91220),G=n(67294),M=n(85893);function P(t){if(!t||!t.width||!t.color||!t.points||t.points.length<2||t.frontendId==null)return"";var f=t.type=="rubber"?0:t.frontendId;return"".concat(t.width,",").concat(f,",").concat(t.points.join(","))}function u(t){var f;console.log("PPBrush.drawAnnotation, param:",t);var r=t.canvasRef,c=t.annotation,s=c.result;if(!s)return(0,M.jsx)(M.Fragment,{});var A=(f=r.current)===null||f===void 0?void 0:f.getContext("2d");if(!A)return(0,M.jsx)(M.Fragment,{});console.log("PPBrush.drawAnnotation, result:",s);for(var C=[],D=0,i=0;i<s.length;i++)s.at(i)==","?(C.push(parseFloat(s.slice(D,i))),D=i+1):s.at(i)=="|"?(C.push(parseFloat(s.slice(D,i))),g(C,A,c),C=[],D=i+1):i==s.length-1&&(C.push(parseFloat(s.slice(D,s.length))),g(C,A,c));return(0,M.jsx)(M.Fragment,{})}function g(t,f,r){var c;if(t.length<4){console.log("found incorrect points:",t);return}var s=t[0],A=t[1];if(s==0){var C;K(f,t.slice(2),(C=r.label)===null||C===void 0?void 0:C.color);return}if(A==0){L(f,s,t.slice(2),void 0);return}L(f,s,t.slice(2),(c=r.label)===null||c===void 0?void 0:c.color)}function L(t,f,r,c){t.beginPath(),t.moveTo(r[0],r[1]);for(var s=0;s<=r.length/2-1;s++){var A=r[2*s],C=r[2*s+1];t.lineTo(A,C)}t.lineCap="round",t.lineJoin="round",t.lineWidth=f,c&&(t.strokeStyle=c),t.globalCompositeOperation=c?"source-over":"destination-out",t.stroke()}function K(t,f,r){t.globalCompositeOperation=r?"source-over":"destination-out",r&&(t.fillStyle=r);for(var c=0;c<=f.length/2-1;c++){var s=f[2*c],A=f[2*c+1];t.fillRect(s,A,1,1)}}function X(t){if(!t||t.length==0)return 0;var f=0,r=(0,rn.Z)(t),c;try{for(r.s();!(c=r.n()).done;){var s=c.value;s.frontendId>f&&(f=s.frontendId)}}catch(A){r.e(A)}finally{r.f()}return f}function F(t,f){return t=="rubber"||f==2?"rubber":"brush"}function en(t){var f=(0,G.useState)(),r=(0,V.Z)(f,2),c=r[0],s=r[1],A=function(_){var m,O;if(!(t.currentTool!="brush"&&t.currentTool!="rubber"||!((m=t.currentLabel)!==null&&m!==void 0&&m.color)||!t.brushSize)){var o=_.mouseX,j=_.mouseY,T=F(t.currentTool,_.e.evt.button),h=t.frontendIdOps.frontendId>0?t.frontendIdOps.frontendId:X(t.annotations)+1;h!=t.frontendIdOps.frontendId&&t.frontendIdOps.setFrontendId(h);var Z=P({width:t.brushSize||10,color:(O=t.currentLabel)===null||O===void 0?void 0:O.color,points:[o,j,o,j],type:T,frontendId:h});if(!!Z){s(T);var x={dataId:t.dataId,label:t.currentLabel,frontendId:h,result:Z,type:"brush"};t.onAnnotationAdd(x)}}},C=function(_){var m;if(!(!c||!t.currentAnnotation||!t.currentAnnotation.result||t.currentAnnotation.result.length<2||!((m=t.currentLabel)!==null&&m!==void 0&&m.color))){var O=_.mouseX,o=_.mouseY,j=t.currentAnnotation.result+",".concat(O,",").concat(o);t.onAnnotationModify((0,w.Z)((0,w.Z)({},t.currentAnnotation),{},{result:j}))}},D=function(){t.currentTool!="brush"&&t.currentTool!="rubber"||(s(void 0),t.onMouseUp())};return{onMouseDown:A,onMouseMove:C,onMouseUp:D,drawAnnotation:u}}},14836:function(N,Y,n){"use strict";n.d(Y,{Z:function(){return D}});var w=n(54421),V=n(38272),rn=n(57663),G=n(71577),M=n(91220),P=n(67294),u=n(56159),g=n.n(u),L=n(49111),K=n(19650),X=n(2824),F=n(8870),en=n(85024),t=n.n(en),f=n(63097),r=n(85893),c=function(_){var m=(0,F.Z)({},_.annotation),O=(0,P.useState)(m.invisible),o=(0,X.Z)(O,2),j=o[0],T=o[1],h=(0,P.useState)(0),Z=(0,X.Z)(h,2),x=Z[0],b=Z[1];(0,P.useEffect)(function(){T(_.annotation.invisible)},[_.annotation.invisible]);var S=(0,r.jsxs)(V.ZP.Item,{className:"".concat(t().listItem," ").concat(_.active?t().listItemActive:""),unselectable:"on",onClick:function(){_.onClick(m)},children:[(0,r.jsxs)(K.Z,{align:"center",size:5,children:[(0,r.jsx)("a",{className:t().eye,style:{backgroundImage:j?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(e){e.stopPropagation(),T(!j),_.onAnnotationModify(m)}})," ",(0,r.jsx)("span",{className:t().annotationId,children:m.frontendId}),(0,r.jsx)("span",{className:t().labelName,children:m.label.name}),(0,r.jsx)(f.Z,{color:m.label.color})]}),(0,r.jsx)("a",{className:t().delete,onClick:function(e){e.stopPropagation();var l=new Date().getTime();l-x<300||(b(l),_.onAnnotationDelete(m))}})]});return S},s=c,A=n(48971),C=function(_){var m=(0,A.YB)(),O=m.formatMessage({id:"component.PPAnnotationList.annotationList"}),o=m.formatMessage({id:"component.PPAnnotationList.addAnnotation"}),j=new Set,T=[],h=(0,M.Z)(_.annotations),Z;try{for(h.s();!(Z=h.n()).done;){var x=Z.value;j.has(x.frontendId)||(T.push(x),j.add(x.frontendId))}}catch(b){h.e(b)}finally{h.f()}return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(V.ZP,{className:g().labelList,size:"large",header:(0,r.jsx)("div",{className:g().listHeader,children:O}),bordered:!0,dataSource:T,renderItem:function(S){var J;return(0,r.jsx)(s,{onClick:_.onAnnotationSelect,annotation:S,active:S.frontendId==((J=_.currAnnotation)===null||J===void 0?void 0:J.frontendId),onAnnotationDelete:_.onAnnotationDelete,onAnnotationModify:_.onAnnotationModify})},footer:(0,r.jsx)("div",{children:(0,r.jsx)(G.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){_.onAnnotationAdd()},block:!0,children:o})})})})},D=C},27992:function(N,Y,n){"use strict";var w=n(20136),V=n(55241),rn=n(13062),G=n(71230),M=n(77883),P=n(70507),u=n(89032),g=n(15746),L=n(66126),K=n(75454),X=n(2824),F=n(67294),en=n(61541),t=n(26647),f=n.n(t),r=n(85893),c=0,s=100,A=10,C=function(i){var _=(0,F.useState)(Z(i.size)),m=(0,X.Z)(_,2),O=m[0],o=m[1];function j(x){o(Z(x))}var T=i.minSize==null?c:i.minSize,h=i.maxSize==null?s:i.maxSize;function Z(x){return x==null?A:x<=T?T:x>=h?h:x}return(0,F.useEffect)(function(){j(i.size)},[i.size]),(0,r.jsxs)(V.Z,{overlayClassName:"".concat(f().popover," ").concat(i.disLoc=="left"?f().popoverLeft:""),placement:i.disLoc||"right",content:(0,r.jsxs)(G.Z,{children:[(0,r.jsx)(g.Z,{span:16,children:(0,r.jsx)(K.Z,{className:f().slider,value:O,max:h,min:T,onChange:function(b){var S;(S=i.onChange)===null||S===void 0||S.call(0,b)},tooltipVisible:!1})}),(0,r.jsx)(g.Z,{span:8,children:(0,r.jsx)(P.Z,{min:T,max:h,value:O,onChange:function(b){var S;(S=i.onChange)===null||S===void 0||S.call(0,b)},step:10})})]}),trigger:"hover",children:[" ",(0,r.jsx)(en.Z,{imgSrc:i.imgSrc||"",onClick:i.onClick,active:i.active,children:i.children})]})};Y.Z=C},85871:function(N,Y,n){"use strict";var w=n(71194),V=n(50146),rn=n(49111),G=n(19650),M=n(57663),P=n(71577),u=n(13062),g=n(71230),L=n(89032),K=n(15746),X=n(77883),F=n(70507),en=n(34792),t=n(48086),f=n(9715),r=n(93766),c=n(2824),s=n(67294),A=n(48971),C=n(6277),D=n.n(C),i=n(85893),_=function(O){var o=(0,A.YB)(),j=(0,s.useState)(60),T=(0,c.Z)(j,2),h=T[0],Z=T[1],x=(0,s.useState)(20),b=(0,c.Z)(x,2),S=b[0],J=b[1],e=(0,s.useState)(20),l=(0,c.Z)(e,2),v=l[0],I=l[1],E=(0,s.useState)(!1),p=(0,c.Z)(E,2),R=p[0],Q=p[1],y=o.formatMessage({id:"pages.toolBar.divideData"}),q=o.formatMessage({id:"component.PPDivideDataModal.train"}),on=o.formatMessage({id:"component.PPDivideDataModal.validation"}),z=o.formatMessage({id:"component.PPDivideDataModal.test"}),sn=o.formatMessage({id:"component.PPCreater.cancel"}),cn=o.formatMessage({id:"component.PPSegMode.ok"}),k=r.Z.useForm(),B=(0,c.Z)(k,1),$=B[0];return(0,i.jsx)(V.Z,{className:D().modal,title:y,visible:O.visible,onCancel:O.onCancel,footer:null,children:(0,i.jsxs)(r.Z,{form:$,name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!1},onFinish:function(){if(h+S+v!=100){t.default.error("Train, Validation and Test total percent should equal 100!");return}console.log("x trainData: ".concat(h,", validationData: ").concat(S,", testData: ").concat(v,", props.project.curr.projectId: ").concat(O.project.curr.projectId)),Q(!0),O.splitDataset(O.project.curr.projectId,{train:h*.01,val:S*.01,test:v*.01}).then(function(){var nn;console.log("success"),t.default.success(o.formatMessage({id:"component.PPDivideDataModal.success"})),(nn=O.onFinish)===null||nn===void 0||nn.call(0)}).finally(function(){Q(!1)})},autoComplete:"off",layout:"vertical",children:[(0,i.jsxs)(g.Z,{children:[(0,i.jsx)(K.Z,{span:8,children:(0,i.jsx)(r.Z.Item,{label:q,name:"train",children:(0,i.jsx)(F.Z,{addonAfter:"%",defaultValue:60,precision:0,min:0,max:100,value:h,onChange:Z})})}),(0,i.jsx)(K.Z,{span:8,children:(0,i.jsx)(r.Z.Item,{label:on,name:"validation",children:(0,i.jsx)(F.Z,{addonAfter:"%",defaultValue:20,precision:0,min:0,max:100,value:S,onChange:J})})}),(0,i.jsx)(K.Z,{span:8,children:(0,i.jsx)(r.Z.Item,{label:z,name:"test",children:(0,i.jsx)(F.Z,{addonAfter:"%",defaultValue:20,precision:0,min:0,max:100,value:v,onChange:I})})})]}),(0,i.jsx)(r.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,i.jsxs)(G.Z,{children:[(0,i.jsx)(P.Z,{onClick:function(){var nn;(nn=O.onCancel)===null||nn===void 0||nn.call(0),$.resetFields()},children:sn}),(0,i.jsx)(P.Z,{type:"primary",htmlType:"submit",loading:R,children:cn})]})})]})})};Y.Z=_},62850:function(N,Y,n){"use strict";var w=n(71194),V=n(50146),rn=n(49111),G=n(19650),M=n(57663),P=n(71577),u=n(47673),g=n(24044),L=n(34792),K=n(48086),X=n(9715),F=n(93766),en=n(2824),t=n(67294),f=n(48971),r=n(45092),c=n.n(r),s=n(85893),A=function(D){var i=(0,f.YB)(),_=(0,t.useState)(!1),m=(0,en.Z)(_,2),O=m[0],o=m[1],j=i.formatMessage({id:"component.PPCreater.cancel"}),T=F.Z.useForm(),h=(0,en.Z)(T,1),Z=h[0];return(0,s.jsx)(V.Z,{className:c().modal,title:i.formatMessage({id:"component.PPExportModal.title"}),visible:D.visible,onCancel:D.onCancel,footer:null,children:(0,s.jsxs)(F.Z,{form:Z,name:"basic",labelCol:{span:6},wrapperCol:{span:16},initialValues:{remember:!1},onFinish:function(b){console.log(b);var S=b.path;if(!S){K.default.error(i.formatMessage({id:"component.PPExportModal.pathNotNull"}));return}o(!0),D.exportDataset(D.project.curr.projectId,S).then(function(){var J;K.default.success(i.formatMessage({id:"component.PPExportModal.exportSuccess"})),(J=D.onFinish)===null||J===void 0||J.call(0)}).finally(function(){o(!1)})},autoComplete:"off",children:[(0,s.jsx)(F.Z.Item,{label:i.formatMessage({id:"component.PPExportModal.path"}),name:"path",children:(0,s.jsx)(g.Z,{})}),(0,s.jsx)(F.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,s.jsxs)(G.Z,{children:[(0,s.jsx)(P.Z,{onClick:function(){var b;(b=D.onCancel)===null||b===void 0||b.call(0),Z.resetFields()},children:j}),(0,s.jsx)(P.Z,{type:"primary",htmlType:"submit",loading:O,children:i.formatMessage({id:"component.PPExportModal.export"})})]})})]})})};Y.Z=A},91861:function(N,Y,n){"use strict";n.d(Y,{Ad:function(){return V},k3:function(){return rn},Vd:function(){return G},td:function(){return M}});var w=40;function V(){localStorage.removeItem("history"),rn([])}function rn(P){var u=localStorage.getItem("history"),g=u?JSON.parse(u):{index:-1,items:[]};if(JSON.stringify(g.items[g.index])!=JSON.stringify(P)){var L=g.index>w?g.index-w:0,K=g.items.splice(L,g.index==0?1:g.index+1);g.items=K.concat([P]),g.index<=w?g.index++:g.index=w+1,localStorage.setItem("history",JSON.stringify(g))}}function G(){var P=localStorage.getItem("history");if(!!P){var u=JSON.parse(P);if(!!u&&!(u.index>=u.items.length-1))return u.index++,localStorage.setItem("history",JSON.stringify(u)),u.items[u.index]}}function M(){var P=localStorage.getItem("history");if(!!P){var u=JSON.parse(P);if(!(!u||!u.index)&&!(u.index<=0))return u.index--,localStorage.setItem("history",JSON.stringify(u)),u.items[u.index]}}},44583:function(N,Y,n){"use strict";n.r(Y),n.d(Y,{MOST_HISTORY_STEPS:function(){return x},default:function(){return J}});var w=n(57663),V=n(71577),rn=n(34669),G=n(54458),M=n(2824),P=n(91220),u=n(67294),g=n(8088),L=n(61541),K=n(44434),X=n(27992),F=n(5041),en=n(57436),t=n(14836),f=n(48971),r=n(91861),c=n(85871),s=n(62850),A=n(8978),C=n(8870),D=n(65031);function i(e){var l=0;if(!e)return l;var v=_createForOfIteratorHelper(e),I;try{for(v.s();!(I=v.n()).done;){var E=I.value;!E||!E.frontendId||E.frontendId>l&&(l=E.frontendId)}}catch(p){v.e(p)}finally{v.f()}return l}function _(e){var l=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return l?{r:parseInt(l[1],16),g:parseInt(l[2],16),b:parseInt(l[3],16)}:null}function m(e){var l=e.toString(16);return l.length==1?"0"+l:l}function O(e,l,v){return"#"+m(e)+m(l)+m(v)}var o=n(85893);function j(e,l){if(!(!e||!l))return l.join(",")}function T(e){var l;if(!e.annotation||!e.annotation.result||e.annotation.result.length<2||!((l=e.annotation.label)!==null&&l!==void 0&&l.color))return(0,o.jsx)(o.Fragment,{});var v=e.annotation.result.split(",").map(Number),I=e.annotation.label.color,E=_(I);if(!E)return(0,o.jsx)(o.Fragment,{});var p=.3,R=void 0,Q=[];return v.forEach(function(y,q){if(!R){R=y;return}Q.push((0,o.jsx)(D.Cd,{onMouseDown:function(){e.currentTool=="editor"&&e.onSelect(e.annotation)},draggable:e.currentTool=="editor",onDragMove:function(z){var sn;z.cancelBubble=!0;var cn=(sn=e.stageRef)===null||sn===void 0?void 0:sn.current,k=cn.findOne(".baseImage"),B=!1,$=z.target.x();$>k.width()/2&&($=k.width()/2,B=!0),$<-k.width()/2&&($=-k.width()/2,B=!0);var an=z.target.y();an>k.height()/2&&(an=k.height()/2,B=!0),an<-k.height()/2&&(an=-k.height()/2,B=!0),B&&z.target.setPosition({x:$,y:an}),v[q-1]=$,v[q]=an;var nn=(0,C.Z)((0,C.Z)({},e.annotation),{},{points:[{color:I,points:v}]});e.onDrag(nn)},onMouseOver:function(){var z;e.currentTool=="editor"&&(z=e.stageRef)!==null&&z!==void 0&&z.current&&(e.stageRef.current.container().style.cursor="cell")},onMouseOut:function(){var z;e.currentTool=="editor"&&(z=e.stageRef)!==null&&z!==void 0&&z.current&&(e.stageRef.current.container().style.cursor="default")},x:R,y,radius:5/e.scale,fill:I})),R=void 0}),(0,o.jsxs)(D.ZA,{children:[(0,o.jsx)(D.x1,{onMouseOver:function(){e.currentTool=="editor"&&(document.body.style.cursor="pointer")},onMouseOut:function(){document.body.style.cursor="default"},onClick:function(){e.currentTool=="editor"&&e.onSelect(e.annotation)},stroke:I,strokeWidth:2/e.scale,globalCompositeOperation:"source-over",lineCap:"round",points:v,tension:0,closed:!0,fill:"rgba(".concat(E.r,", ").concat(E.g,", ").concat(E.b,", ").concat(p,")")}),Q]},e.annotation.frontendId)}function h(e){var l=0;if(!e)return l;var v=(0,P.Z)(e),I;try{for(v.s();!(I=v.n()).done;){var E=I.value;!E||!E.frontendId||E.frontendId>l&&(l=E.frontendId)}}catch(p){v.e(p)}finally{v.f()}return l}function Z(e){var l=function(R,Q){var y,q=j((y=e.currentLabel)===null||y===void 0?void 0:y.color,[R,Q]);!q||(console.log(q),e.onAnnotationAdd({dataId:e.dataId,type:"polygon",frontendId:h(e.annotations)+1,label:e.currentLabel,result:q}))},v=function(R,Q){var y;if(!(!e.currentAnnotation||!e.currentAnnotation.result||!((y=e.currentLabel)!==null&&y!==void 0&&y.color))){var q=e.currentAnnotation.result+",".concat(R,",").concat(Q),on={dataId:e.dataId,type:"polygon",frontendId:e.currentAnnotation.frontendId,label:e.currentAnnotation.label,result:q};e.modifyAnnoByFrontendId(on)}},I=function(R){if(e.currentTool=="polygon"){var Q=R.mouseX+R.offsetX,y=R.mouseY+R.offsetY;e.currentAnnotation?v(Q,y):l(Q,y)}},E=function(){e.currentTool=="polygon"&&e.onMouseUp()};return{onMouseDown:I,onMouseMove:function(){},onMouseUp:E,drawAnnotation:T}}var x=40;function b(e){var l=0;if(!e)return l;var v=(0,P.Z)(e),I;try{for(v.s();!(I=v.n()).done;){var E=I.value;!E.labelId||E.labelId>l&&(l=E.labelId)}}catch(p){v.e(p)}finally{v.f()}return l}var S=function(){var l=(0,u.useState)([]),v=(0,M.Z)(l,2),I=v[0],E=v[1],p=(0,u.useState)(!1),R=(0,M.Z)(p,2),Q=R[0],y=R[1],q=(0,u.useState)(!1),on=(0,M.Z)(q,2),z=on[0],sn=on[1],cn=(0,u.useState)(void 0),k=(0,M.Z)(cn,2),B=k[0],$=k[1],an=(0,u.useState)(new Set),nn=(0,M.Z)(an,2),gn=nn[0],jn=nn[1],Zn=(0,u.useState)(),Cn=(0,M.Z)(Zn,2),un=Cn[0],Rn=Cn[1],Un=(0,u.useState)([]),In=(0,M.Z)(Un,2),tn=In[0],ln=In[1],Wn=(0,u.useState)(0),An=(0,M.Z)(Wn,2),Dn=An[0],_n=An[1],Kn=(0,u.useState)(10),On=(0,M.Z)(Kn,2),Mn=On[0],xn=On[1],Fn=(0,u.useState)(60),Sn=(0,M.Z)(Fn,2),yn=Sn[0],pn=Sn[1],Nn=(0,u.useState)(1),Ln=(0,M.Z)(Nn,2),mn=Ln[0],hn=Ln[1],bn=function(a){a||hn(1),a<.1||a>20?hn(1):hn(a)},Pn=function(a){var H=new Set;a!=null&&a.labelId&&H.add(a.labelId),jn(H)},U=function(a){Rn(a),a!=null&&a.label&&Pn(a.label),_n(a?a.frontendId:0)};(0,u.useEffect)(function(){(0,r.Ad)()},[]);var Tn=function(a){!a||(tn.pop(),tn.push(a),U(a),ln(tn))},zn=function(a){var H=[],dn=(0,P.Z)(tn),fn;try{for(dn.s();!(fn=dn.n()).done;){var vn=fn.value;vn.frontendId==a.frontendId?H.push(a):H.push(vn)}}catch(En){dn.e(En)}finally{dn.f()}U(a),ln(H)},Bn={dataId:0,currentLabel:I.find(function(d){return d.labelId==gn.values().next().value}),brushSize:Mn,scale:mn,currentTool:B,annotations:tn,currentAnnotation:un,onAnnotationAdd:function(a){var H=tn.concat([a]);ln(H),U(a)},onAnnotationModify:Tn,modifyAnnoByFrontendId:zn,onMouseUp:function(){(0,r.k3)({annos:tn,currAnno:un})},frontendIdOps:{frontendId:Dn,setFrontendId:_n}},W=(0,f.YB)(),$n=(0,A.Z)(Bn),Hn=Z(Bn),Yn={polygon:Hn,brush:$n};return(0,o.jsxs)(g.Z,{className:"segment",children:[(0,o.jsxs)(K.Z,{children:[(0,o.jsx)(L.Z,{imgSrc:"./pics/buttons/polygon.png",active:B=="polygon",onClick:function(){$("polygon"),U(void 0)},children:W.formatMessage({id:"pages.toolBar.polygon"})}),(0,o.jsx)(L.Z,{active:B=="editor",imgSrc:"./pics/buttons/edit.png",onClick:function(){$("editor"),U(void 0)},children:W.formatMessage({id:"pages.toolBar.edit"})}),(0,o.jsx)(X.Z,{imgSrc:"./pics/buttons/brush.png",size:Mn,active:B=="brush",onClick:function(){B!="rubber"&&B!="brush"&&U(void 0),$("brush")},onChange:function(a){xn(a)},children:W.formatMessage({id:"pages.toolBar.brush"})}),(0,o.jsx)(X.Z,{size:Mn,active:B=="rubber",onClick:function(){B!="rubber"&&B!="brush"&&U(void 0),$("rubber")},onChange:function(a){xn(a)},imgSrc:"./pics/buttons/rubber.png",children:W.formatMessage({id:"pages.toolBar.rubber"})}),(0,o.jsx)(L.Z,{imgSrc:"./pics/buttons/zoom_in.png",onClick:function(){bn(mn+.1)},children:W.formatMessage({id:"pages.toolBar.zoomIn"})}),(0,o.jsx)(L.Z,{imgSrc:"./pics/buttons/zoom_out.png",onClick:function(){bn(mn-.1)},children:W.formatMessage({id:"pages.toolBar.zoomOut"})}),(0,o.jsx)(L.Z,{imgSrc:"./pics/buttons/save.png",children:W.formatMessage({id:"pages.toolBar.save"})}),(0,o.jsx)(L.Z,{active:B=="mover",imgSrc:"./pics/buttons/move.png",onClick:function(){$("mover")},children:W.formatMessage({id:"pages.toolBar.move"})}),(0,o.jsx)(L.Z,{imgSrc:"./pics/buttons/prev.png",onClick:function(){var a=(0,r.td)();a&&(ln(a.annos),U(a.currAnno))},children:W.formatMessage({id:"pages.toolBar.unDo"})}),(0,o.jsx)(L.Z,{imgSrc:"./pics/buttons/next.png",onClick:function(){var a=(0,r.Vd)();a&&(ln(a.annos),U(a.currAnno))},children:W.formatMessage({id:"pages.toolBar.reDo"})}),(0,o.jsx)(L.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:W.formatMessage({id:"pages.toolBar.clearMark"})})]}),(0,o.jsxs)("div",{id:"dr",className:"mainStage",children:[(0,o.jsx)("div",{className:"draw",children:(0,o.jsx)(en.Z,{scale:mn,annotations:tn,currentTool:B,currentAnnotation:un,setCurrentAnnotation:U,onAnnotationModify:Tn,onAnnotationModifyComplete:function(){(0,r.k3)({annos:tn,currAnno:un})},frontendIdOps:{frontendId:Dn,setFrontendId:_n},imgSrc:void 0,transparency:yn,onAnnotationAdd:function(a){var H=tn.concat([a]);ln(H),un||U(a)},drawTool:Yn})}),(0,o.jsx)("div",{className:"pblock",children:(0,o.jsxs)("div",{className:"progress",children:[(0,o.jsx)(G.Z,{className:"progressBar",percent:10,status:"active",showInfo:!1})," ",(0,o.jsx)("span",{className:"progressDesc",children:"Current labeling 1 of 300. Already labeled 20."})]})}),(0,o.jsx)("div",{className:"prevTask",onClick:function(){!task.prevTask()||(U(void 0),ln([]))}}),(0,o.jsx)("div",{className:"nextTask",onClick:function(){!task.nextTask()||(U(void 0),ln([]))}})]}),(0,o.jsxs)(K.Z,{disLoc:"right",children:[(0,o.jsx)(L.Z,{imgSrc:"./pics/buttons/intelligent_interaction.png",children:W.formatMessage({id:"pages.toolBar.interactor"})}),(0,o.jsx)(X.Z,{imgSrc:"./pics/buttons/threshold.png",disLoc:"left",children:W.formatMessage({id:"pages.toolBar.segmentThreshold"})}),(0,o.jsx)(X.Z,{imgSrc:"./pics/buttons/alpha.png",disLoc:"left",size:yn,maxSize:100,minSize:0,onChange:function(a){pn(a)},children:W.formatMessage({id:"pages.toolBar.transparency"})}),(0,o.jsx)(X.Z,{imgSrc:"./pics/buttons/radius.png",disLoc:"left",children:W.formatMessage({id:"pages.toolBar.visualRadius"})}),(0,o.jsx)(L.Z,{imgSrc:"./pics/buttons/data_division.png",onClick:function(){y(!0)},children:W.formatMessage({id:"pages.toolBar.divideData"})}),(0,o.jsx)(L.Z,{imgSrc:"./pics/buttons/export.png",onClick:function(){sn(!0)},children:W.formatMessage({id:"pages.toolBar.export"})})]}),(0,o.jsxs)("div",{className:"rightSideBar",children:[(0,o.jsx)("div",{className:"determinOutline",children:(0,o.jsx)(V.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",block:!0,onClick:function(){U(void 0)},children:W.formatMessage({id:"pages.toolBar.determineOutline"})})}),(0,o.jsx)(F.Z,{labels:I,activeIds:gn,onLabelSelect:function(a){Pn(a),U(void 0)},onLabelModify:function(){},onLabelDelete:function(a){var H=[],dn=(0,P.Z)(I),fn;try{for(dn.s();!(fn=dn.n()).done;){var vn=fn.value;vn.labelId!=a.labelId&&H.push(vn)}}catch(En){dn.e(En)}finally{dn.f()}E(H),a.labelId&&gn.has(a.labelId)&&Pn(void 0)},onLabelAdd:function(a){a.labelId||(a.labelId=b(I)+1),I.push(a),E(I),Pn(a),U(void 0)}}),(0,o.jsx)(t.Z,{currAnnotation:un,annotations:tn,onAnnotationSelect:function(a){a!=null&&a.delete||U(a)},onAnnotationAdd:function(){},onAnnotationModify:function(){},onAnnotationDelete:function(a){ln(tn.filter(function(H){return H.frontendId!=a.frontendId})),U(void 0)}})]}),(0,o.jsx)(c.Z,{visible:Q,onCancel:function(){y(!1)},onFinish:function(){y(!1)}}),(0,o.jsx)(s.Z,{visible:z,onCancel:function(){sn(!1)},onFinish:function(){sn(!1)}})]})},J=S}}]);
