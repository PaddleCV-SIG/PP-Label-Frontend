(self.webpackChunkpp_labeling_frontend=self.webpackChunkpp_labeling_frontend||[]).push([[972],{91220:function(i,b,n){"use strict";n.d(b,{Z:function(){return P}});var I=n(64254);function P(s,_){var a;if(typeof Symbol=="undefined"||s[Symbol.iterator]==null){if(Array.isArray(s)||(a=(0,I.Z)(s))||_&&s&&typeof s.length=="number"){a&&(s=a);var l=0,v=function(){};return{s:v,n:function(){return l>=s.length?{done:!0}:{done:!1,value:s[l++]}},e:function(o){throw o},f:v}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var m=!0,h=!1,x;return{s:function(){a=s[Symbol.iterator]()},n:function(){var o=a.next();return m=o.done,o},e:function(o){h=!0,x=o},f:function(){try{!m&&a.return!=null&&a.return()}finally{if(h)throw x}}}}},85024:function(i){i.exports={listItem:"listItem___u4Q82",eye:"eye___BwaRm",delete:"delete___31JB_",roundBall:"roundBall___23A7l",popover:"popover___1BNET",annotationId:"annotationId___zAzX4",labelName:"labelName___2ohxn",listItemActive:"listItemActive___2QnA3"}},56159:function(i){i.exports={labelList:"labelList___v7C6K",listHeader:"listHeader___1aY8R",eye:"eye___2MKbp",roundBall:"roundBall___187XH"}},57560:function(i){i.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___147XP",toolBarButtonContainer:"toolBarButtonContainer___ZEvhK",toolBarButton:"toolBarButton___1s2Rh",buttonText:"buttonText___3NTCv",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___2Utx8",popover:"popover___3PRoi"}},52822:function(i){i.exports={roundBall:"roundBall___1pqu1",popover:"popover___1-PR6"}},5882:function(i){i.exports={listItem:"listItem___vtDXn",eye:"eye___AsLBS",roundBall:"roundBall___1J_R3",popover:"popover___1x-2R",listItemActive:"listItemActive___3FRb7"}},56131:function(i){i.exports={labelList:"labelList___jvD05",listHeader:"listHeader___UM5UF",eye:"eye___II3Po",roundBall:"roundBall___j752J"}},78677:function(i){i.exports={container:"container___G0FNe"}},83930:function(i){i.exports={stage:"stage___3H5QL"}},80961:function(i){i.exports={toolbar:"toolbar___3vxli"}},82499:function(i){i.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1SHWL",toolBarButtonContainer:"toolBarButtonContainer___1jKUz",toolBarButton:"toolBarButton___3Ouq1",buttonText:"buttonText___10ls7",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AA28"}},14836:function(i,b,n){"use strict";n.d(b,{Z:function(){return u}});var I=n(54421),P=n(38272),s=n(57663),_=n(71577),a=n(67294),l=n(56159),v=n.n(l),m=n(49111),h=n(19650),x=n(2824),t=n(11849),o=n(85024),r=n.n(o),d=n(63097),e=n(85893),D=function(f){var A=(0,t.Z)({},f.annotation),B=(0,a.useState)(A.invisible),M=(0,x.Z)(B,2),C=M[0],E=M[1];(0,a.useEffect)(function(){E(f.annotation.invisible)},[f.annotation.invisible]);var j=(0,e.jsxs)(P.ZP.Item,{className:"".concat(r().listItem," ").concat(f.active?r().listItemActive:""),unselectable:"on",onClick:function(){f.onClick(A)},children:[(0,e.jsxs)(h.Z,{align:"center",size:5,children:[(0,e.jsx)("a",{className:r().eye,style:{backgroundImage:C?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(){E(!C),f.onAnnotationModify(A)}})," ",(0,e.jsx)("span",{className:r().annotationId,children:A.annotationId}),(0,e.jsx)("span",{className:r().labelName,children:A.label.name}),(0,e.jsx)(d.Z,{color:A.label.color})]}),(0,e.jsx)("a",{className:r().delete,onClick:function(){A.delete=!0,f.onAnnotationDelete(A)}})]});return j},O=D,L=function(f){return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(P.ZP,{className:v().labelList,size:"large",header:(0,e.jsx)("div",{className:v().listHeader,children:"Annotation List"}),bordered:!0,dataSource:f.annotations,renderItem:function(B){var M;return(0,e.jsx)(O,{onClick:f.onAnnotationSelect,annotation:B,active:B.annotationId==((M=f.selectedAnnotation)===null||M===void 0?void 0:M.annotationId),onAnnotationDelete:f.onAnnotationDelete,onAnnotationModify:f.onAnnotationModify})},footer:(0,e.jsx)("div",{children:(0,e.jsx)(_.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){f.onAnnotationSelect(void 0)},block:!0,children:"Add Annotation"})})})})},u=L},43801:function(i,b,n){"use strict";n.d(b,{Z:function(){return x}});var I=n(11849),P=n(2824),s=n(91220),_=n(67294),a=n(65031),l=n(85893);function v(t,o,r,d){if(!(!t||!o||!r||!d))return{width:t,color:o,points:r,tool:d,element:(0,l.jsx)(a.x1,{stroke:o,strokeWidth:t,globalCompositeOperation:d==="brush"?"source-over":"destination-out",lineCap:"round",points:r,tension:.01})}}function m(t,o){return t=="rubber"||o==2?"rubber":"brush"}function h(t){var o=0,r=(0,s.Z)(t),d;try{for(r.s();!(d=r.n()).done;){var e=d.value;!e||e.annotationId>o&&(o=e.annotationId)}}catch(D){r.e(D)}finally{r.f()}return o}function x(t){var o=(0,_.useState)(),r=(0,P.Z)(o,2),d=r[0],e=r[1],D=(0,_.useState)(t.currentTool),O=(0,P.Z)(D,2),L=O[0],u=O[1];(0,_.useEffect)(function(){u(t.currentTool)},[t.currentTool]);var U=function(M){var C;if(console.log(L),!(L!="brush"&&L!="rubber")){var E=m(t.currentTool,M.evt.button),j=v(t.brushSize||10,(C=t.currentLabel)===null||C===void 0?void 0:C.color,[M.evt.offsetX,M.evt.offsetY,M.evt.offsetX,M.evt.offsetY],E);if(!!j)if(e(E),t.currentAnnotation){var T,$={annotationId:t.currentAnnotation.annotationId,label:t.currentAnnotation.label,lines:(T=t.currentAnnotation.lines)===null||T===void 0?void 0:T.concat([j])};t.onAnnotationModify($),console.log($)}else{if(E=="rubber")return;t.onAnnotationAdd({annotationId:h(t.annotations)+1,label:t.currentLabel,lines:[j]})}}},f=function(M){var C;if(!(!d||!t.currentAnnotation)){var E=[M.evt.offsetX,M.evt.offsetY],j=[];(C=t.currentAnnotation)!==null&&C!==void 0&&C.lines&&(E=t.currentAnnotation.lines[t.currentAnnotation.lines.length-1].points.concat(E),j=t.currentAnnotation.lines);var T=v(t.brushSize||10,t.currentLabel.color,E,d);!T||(j.pop(),j.push(T),t.onAnnotationModify((0,I.Z)((0,I.Z)({},t.currentAnnotation),{},{lines:j})))}},A=function(){L!="brush"&&L!="rubber"||e(void 0)};return{onMouseDown:U,onMouseMove:f,onMouseUp:A}}},58967:function(i,b,n){"use strict";var I=n(20136),P=n(55241),s=n(77883),_=n(70507),a=n(57663),l=n(71577),v=n(2824),m=n(67294),h=n(61541),x=n(57560),t=n.n(x),o=n(85893),r=1,d=50,e=10;function D(L){return L?L<=r?r:L>=d?d:L:e}var O=function(u){var U=(0,m.useState)(D(u.size)),f=(0,v.Z)(U,2),A=f[0],B=f[1];return(0,m.useEffect)(function(){B(D(u.size))},[u.size]),(0,o.jsxs)(P.Z,{overlayClassName:t().popover,placement:"right",content:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(l.Z,{type:"text",onClick:function(){var C,E=D(A-1);B(E),(C=u.onChange)===null||C===void 0||C.call(0,E)},children:"-"}),(0,o.jsx)(_.Z,{min:r,max:d,value:A,onChange:function(C){var E;(E=u.onChange)===null||E===void 0||E.call(0,C)},controls:!1,style:{textAlign:"center"}}),(0,o.jsx)(l.Z,{type:"text",onClick:function(){var C,E=D(A+1);B(E),(C=u.onChange)===null||C===void 0||C.call(0,E)},children:"+"})]}),trigger:u.active?"hover":"click",children:[" ",(0,o.jsx)(h.Z,{active:u.active,imgSrc:u.imgSrc||"./pics/buttons/brush.png",onClick:u.onClick,children:u.children||"Brush"})]})};b.Z=O},63097:function(i,b,n){"use strict";var I=n(20136),P=n(55241),s=n(2824),_=n(67294),a=n(52822),l=n.n(a),v=n(63144),m=n(85893),h=function(t){var o=(0,_.useState)(t.color||"#FFF"),r=(0,s.Z)(o,2),d=r[0],e=r[1];return(0,_.useEffect)(function(){e(t.color||"#FFF")},[t]),t.changeable?(0,m.jsx)(P.Z,{getPopupContainer:function(O){return O.parentElement||document.body},overlayClassName:l().popover,openClassName:l().popoverOpenClassName,placement:"bottom",content:(0,m.jsx)(v.xS,{disableAlpha:!0,color:d,onChange:function(O){e(O.hex)},onChangeComplete:t.onChange}),trigger:"click",children:(0,m.jsx)("div",{className:l().roundBall,style:{backgroundColor:d}})}):(0,m.jsx)("div",{className:l().roundBall,style:{backgroundColor:d}})};b.Z=h},5041:function(i,b,n){"use strict";n.d(b,{Z:function(){return $}});var I=n(54421),P=n(38272),s=n(57663),_=n(71577),a=n(2824),l=n(67294),v=n(56131),m=n.n(v),h=n(49111),x=n(19650),t=n(11849),o=n(5882),r=n.n(o),d=n(63097),e=n(85893),D=function(c){var g=(0,t.Z)({},c.label),S=(0,l.useState)(g.invisible),F=(0,a.Z)(S,2),R=F[0],z=F[1],Z=(0,e.jsx)(P.ZP.Item,{className:"".concat(r().listItem," ").concat(c.active?r().listItemActive:""),unselectable:"on",onClick:function(){c.onClick(g)},children:(0,e.jsxs)(x.Z,{align:"center",size:5,children:[(0,e.jsx)("a",{className:r().eye,style:{backgroundImage:R?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(){z(!R),c.onLabelModify(g)}})," ",g.name,(0,e.jsx)(d.Z,{color:g.color,changeable:!0,onChange:function(K){g.color=K.hex,c.onLabelModify(g)}})]})});return Z},O=D,L=n(71194),u=n(50146),U=n(47673),f=n(24044),A=n(9715),B=n(93766),M=["#FF0000","#008000","#0000FF","#FFFF00","#FFA500","#00FFFF","#8B00FF","#FFC0CB","#7CFC00","#007FFF","#800080","#36BF36","#DAA520","#800000","#008B8B","#B22222","#E6D933","#000080","#FF00FF","#FFFF99","#87CEEB","#5C50E6","#CD5C5C","#20B2AA","#E680FF","#4D1F00","#006374","#B399FF","#8B4513","#BA55D3","#C0C0C0","#808080","#000000"],C=function(c){var g,S,F=(0,l.useState)(((g=c.defaultLabel)===null||g===void 0?void 0:g.color)||M[c.order||0]),R=(0,a.Z)(F,2),z=R[0],Z=R[1];(0,l.useEffect)(function(){var y;Z(((y=c.defaultLabel)===null||y===void 0?void 0:y.color)||M[c.order||0])},[c]);var H=B.Z.useForm(),K=(0,a.Z)(H,1),N=K[0];return(0,e.jsx)(u.Z,{title:"Add Label",visible:c.visible,onCancel:c.onCancel,footer:null,children:(0,e.jsxs)(B.Z,{form:N,name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!1,labelname:(S=c.defaultLabel)===null||S===void 0?void 0:S.name},onFinish:function(W){var Y={name:W.labelname,color:z};c.onLabelAdd(Y),N.resetFields()},autoComplete:"off",children:[(0,e.jsx)(B.Z.Item,{label:"Label Name",name:"labelname",rules:[{required:!0,message:"Please input label name!"}],children:(0,e.jsx)(f.Z,{})}),(0,e.jsx)(B.Z.Item,{label:"Select Color",name:"color",children:(0,e.jsx)(d.Z,{color:z,onChange:function(W){Z(W.hex)}})}),(0,e.jsx)(B.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,e.jsxs)(x.Z,{children:[(0,e.jsx)(_.Z,{onClick:function(){var W;(W=c.onCancel)===null||W===void 0||W.call(0),N.resetFields()},children:"\u53D6\u6D88"}),(0,e.jsx)(_.Z,{type:"primary",htmlType:"submit",children:"\u786E\u5B9A"})]})})]})})},E=C,j=[{color:"#FF0000",name:"Label 1"},{color:"#008000",name:"Label 2"}],T=function(c){var g=(0,l.useState)(j),S=(0,a.Z)(g,2),F=S[0],R=S[1],z=(0,l.useState)(!1),Z=(0,a.Z)(z,2),H=Z[0],K=Z[1];return(0,l.useEffect)(function(){c.selectedLabel||c.onLabelSelect(F[0])},[F,c]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(P.ZP,{className:m().labelList,size:"large",header:(0,e.jsx)("div",{className:m().listHeader,children:"Label List"}),footer:(0,e.jsx)("div",{children:(0,e.jsx)(_.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){K(!0)},block:!0,children:"Add Label"})}),bordered:!0,dataSource:F,renderItem:function(y){var W;return(0,e.jsx)(O,{onClick:c.onLabelSelect,label:y,active:y.name==((W=c.selectedLabel)===null||W===void 0?void 0:W.name),onLabelDelete:c.onLabelDelete,onLabelModify:c.onLabelModify})}}),(0,e.jsx)(E,{order:F.length,visible:H,onLabelAdd:function(y){F.push(y),R(F),K(!1)},onCancel:function(){K(!1)}})]})},$=T},8088:function(i,b,n){"use strict";var I=n(67294),P=n(78677),s=n.n(P),_=n(85893),a=function(v){return(0,_.jsx)("div",{className:"".concat(s().container," ").concat(v.className),children:v.children})};b.Z=a},57436:function(i,b,n){"use strict";var I=n(2824),P=n(67294),s=n(65031),_=n(84420),a=n.n(_),l=n(83930),v=n.n(l),m=n(85893),h="./pics/basketball.jpg",x=function(o){var r=a()(h),d=(0,I.Z)(r,1),e=d[0],D=(e==null?void 0:e.width)||0,O=(e==null?void 0:e.height)||0;return(0,m.jsxs)(s.Hf,{width:D,height:O,className:v().stage,children:[(0,m.jsx)(s.mh,{children:(0,m.jsx)(s.Ee,{image:e})}),(0,m.jsxs)(s.mh,{onMouseDown:function(u){o.onMouseDown&&o.onMouseDown(u)},onMouseMove:function(u){o.onMouseMove&&o.onMouseMove(u)},onMouseUp:function(u){o.onMouseUp&&o.onMouseUp(u)},onContextMenu:function(u){u.evt.preventDefault()},children:[(0,m.jsx)(s.Ee,{image:e}),o.annotations.map(function(L,u){var U;return(U=L.lines)===null||U===void 0?void 0:U.map(function(f,A){return f.element})})]})]})};b.Z=x},44434:function(i,b,n){"use strict";var I=n(67294),P=n(80961),s=n.n(P),_=n(85893),a=function(v){return(0,_.jsx)("div",{className:s().toolbar,children:v.children})};b.Z=a},61541:function(i,b,n){"use strict";var I=n(49111),P=n(19650),s=n(67294),_=n(82499),a=n.n(_),l=n(85893),v=function(h){return(0,l.jsx)("div",{unselectable:"on",className:"".concat(a().toolBarButtonContainerWrapper," ").concat(h.active&&a().toolBarButtonContainerWrapperActive),onClick:h.onClick,children:(0,l.jsx)(P.Z,{align:"center",className:a().toolBarButtonContainer,size:0,children:(0,l.jsxs)(P.Z,{align:"center",direction:"vertical",className:a().toolBarButton,size:0,children:[(0,l.jsx)("img",{src:h.imgSrc}),(0,l.jsx)("div",{className:a().buttonText,children:h.children})]})})})};b.Z=v}}]);
