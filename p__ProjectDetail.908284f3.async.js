(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[498],{91220:function(k,W,n){"use strict";n.d(W,{Z:function(){return R}});var $=n(64254);function R(g,F){var u;if(typeof Symbol=="undefined"||g[Symbol.iterator]==null){if(Array.isArray(g)||(u=(0,$.Z)(g))||F&&g&&typeof g.length=="number"){u&&(g=u);var P=0,w=function(){};return{s:w,n:function(){return P>=g.length?{done:!0}:{done:!1,value:g[P++]}},e:function(Z){throw Z},f:w}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,I=!1,A;return{s:function(){u=g[Symbol.iterator]()},n:function(){var Z=u.next();return o=Z.done,Z},e:function(Z){I=!0,A=Z},f:function(){try{!o&&u.return!=null&&u.return()}finally{if(I)throw A}}}}},41435:function(k,W,n){"use strict";n.d(W,{Z:function(){return P}});var $=n(94663),R=n(80112);function g(w){return Function.toString.call(w).indexOf("[native code]")!==-1}var F=n(18597);function u(w,o,I){return(0,F.Z)()?u=Reflect.construct:u=function(C,Z,L){var j=[null];j.push.apply(j,Z);var z=Function.bind.apply(C,j),J=new z;return L&&(0,R.Z)(J,L.prototype),J},u.apply(null,arguments)}function P(w){var o=typeof Map=="function"?new Map:void 0;return P=function(A){if(A===null||!g(A))return A;if(typeof A!="function")throw new TypeError("Super expression must either be null or a function");if(typeof o!="undefined"){if(o.has(A))return o.get(A);o.set(A,C)}function C(){return u(A,arguments,(0,$.Z)(this).constructor)}return C.prototype=Object.create(A.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),(0,R.Z)(C,A)},P(w)}},48627:function(k){k.exports={container:"container___2RXc3"}},18398:function(k){k.exports={_ppcard:"_ppcard___1sR0b",title:"title___2fjZe",shadow:"shadow___3SaOl",main:"main___IOVJu",block_l:"block_l___1ywNh",block_r:"block_r___Sg4L7",goup:"goup___1vznA"}},11428:function(k,W,n){"use strict";var $=n(67294),R=n(48627),g=n.n(R),F=n(85893),u=function(w){return(0,F.jsx)("div",{className:"".concat(g().container),style:{backgroundImage:"url(./pics/background.png)"},children:w.children})};W.Z=u},68370:function(k,W,n){"use strict";n.r(W),n.d(W,{default:function(){return p}});var $=n(34792),R=n(48086),g=n(67294),F=n(48971),u=n(57663),P=n(71577),w=n(88983),o=n(47933),I=n(36877),A=n(96607),C=n(47673),Z=n(24044),L=n(9715),j=n(93766),z=n(2824),J=n(91220),Y=n(89032),ee=n(15746),G=n(11849),re=n(13062),Q=n(71230),x=n(11700),q=n(18398),D=n.n(q),m=n(37071),d=n(91156),b=n(64322),l=n(85893),U=[{value:"/app",label:"/app",children:[{value:"data",label:"data",children:[{value:"pplabel",label:"pplabel",children:[{value:"clas_single",label:"clas_single",children:[{value:"PetImages",label:"PetImages"}]}]}]}]}],M=function(i){return(0,l.jsxs)("div",{className:D()._ppcard,style:i.style,children:[(0,l.jsx)(Q.Z,{className:D().titleRow,style:{display:i.title?void 0:"none"},children:(0,l.jsx)(x.Z,{className:D().title,children:i.title})}),(0,l.jsx)(Q.Z,{style:{marginTop:26},children:(0,l.jsx)(ee.Z,{span:24,style:(0,G.Z)({paddingLeft:30,paddingRight:30,textAlign:"center"},i.innerStyle),children:i.children})})]})};function O(h){var i="",f=(0,J.Z)(h),e;try{for(f.s();!(e=f.n()).done;){var a=e.value;a.endsWith("/")?i+=a:i+=a+"/"}}catch(r){f.e(r)}finally{f.f()}return i}var c=function(i){console.log("render ppcreater",i);var f=(0,b.Gd)(g.useState),e=m.Z.getQueryVariable("projectId");console.log("projectId",e);var a=function(S){e?f.update(e,{name:S.name,description:S.description,dataDir:O(S.dataDir),labelDir:S.labelDir}).then(function(){F.m8.push("/welcome")}):f.create({name:S.name,description:S.description,taskCategoryId:d.ux[i.taskCategory].id,dataDir:O(S.dataDir),labelDir:S.labelDir}).then(function(y){F.m8.push("/".concat((0,d.LV)(i.taskCategory),"?projectId=").concat(y.projectId))}).catch(function(){})},r=i.taskCategory?d.ux[i.taskCategory].name:null,s=j.Z.useForm(),t=(0,z.Z)(s,1),_=t[0];return(0,g.useEffect)(function(){f.getCurr(e).then(function(E){console.log("project",E);var S={name:E==null?void 0:E.name,description:E==null?void 0:E.description};_.setFieldsValue(S)})},[]),(0,l.jsxs)("div",{className:D().shadow,style:i.style,children:[(0,l.jsx)("div",{id:"left",className:D().block_l,children:(0,l.jsx)(M,{title:r,style:{height:760,padding:"1.25rem 0"},children:(0,l.jsxs)(j.Z,{form:_,layout:"horizontal",size:"large",style:{marginTop:"5.69rem"},onFinish:function(S){a(S)},children:[(0,l.jsx)(j.Z.Item,{name:"name",label:"Project Name",labelCol:{span:6},wrapperCol:{span:16},rules:[{required:!0,message:"Please input project name!"}],style:{fontSize:"1.5rem"},children:(0,l.jsx)(Z.Z,{size:"large",placeholder:"Words or numbers",style:{height:"3.13rem"}})}),(0,l.jsx)(j.Z.Item,{name:"dataDir",label:"Dataset Path",labelCol:{span:6},wrapperCol:{span:16},rules:[{required:!0,message:"Please input dataset path!"}],style:{fontSize:"1.5rem"},children:(0,l.jsx)(A.Z,{options:U,onChange:function(S){console.log(S)},changeOnSelect:!0})}),(0,l.jsx)(j.Z.Item,{name:"description",label:"Description",labelCol:{span:6},wrapperCol:{span:16},rules:[{required:!1}],style:{fontSize:"1.5rem"},children:(0,l.jsx)(Z.Z,{size:"large",placeholder:"Words or numbers",style:{height:"3.13rem"}})}),(0,l.jsx)(j.Z.Item,{name:"maxPoints",label:"MaxPoints",labelCol:{span:6},wrapperCol:{span:16},rules:[{required:i.taskCategory=="keypointDetection",message:"Please input max points!"}],style:{fontSize:"1.5rem",display:i.taskCategory=="keypointDetection"?void 0:"none"},children:(0,l.jsx)(Z.Z,{size:"large",placeholder:"Numbers (Int)",style:{height:"3.13rem"}})}),(0,l.jsx)(j.Z.Item,{name:"segmentationMode",label:"AnnotationMode",labelCol:{span:6},wrapperCol:{span:16},rules:[{required:i.taskCategory=="semanticSegmentation",message:"Please select task category!"}],style:{fontSize:"1.5rem",display:i.taskCategory=="semanticSegmentation"?void 0:"none"},children:(0,l.jsx)("div",{className:D().goup,children:(0,l.jsxs)(o.ZP.Group,{defaultValue:1,size:"large",style:{height:"3.13rem"},children:[(0,l.jsx)(o.ZP,{value:1,children:"Pixel model"}),(0,l.jsx)(o.ZP,{value:2,children:"Polygon mode"})]})})}),(0,l.jsxs)(j.Z.Item,{wrapperCol:{span:16,offset:6},children:[(0,l.jsx)(P.Z,{htmlType:"submit",type:"primary",style:{height:"2.5rem",width:"48%"},block:!0,children:e?"Update":"Create"}),"\xA0\xA0",(0,l.jsx)(P.Z,{htmlType:"button",style:{height:"2.5rem",width:"48%"},block:!0,onClick:function(){F.m8.push("/welcome")},children:"Cancel"})]})]})})}),(0,l.jsx)("div",{id:"right",className:D().block_r,children:(0,l.jsx)(M,{style:{height:"43.63rem",padding:"0.5rem 0"},children:(0,l.jsx)("img",{src:i.imgSrc,style:{height:"43.63rem",width:"60rem"}})})})]})},T=c,v=n(11428),K=function(){var i=(0,d.os)(m.Z.getQueryVariable("taskCategory"));return i||(R.default.error("Task Category not present in url"),F.m8.push("/project_creation")),i in d.ux||(R.default.error("Invalid task category "+i),F.m8.push("/project_creation")),(0,l.jsx)(v.Z,{children:(0,l.jsx)(T,{imgSrc:"./pics/illustration.jpg",taskCategory:i})})},p=K},91156:function(k,W,n){"use strict";n.d(W,{F$:function(){return j},LV:function(){return Q},os:function(){return x},ux:function(){return q}});var $=n(34792),R=n(94043),g=n.n(R),F=n(37071),u=n(81139),P=n(63891),w=n(13868),o=n(70676),I=n(54919),A=n(6276),C=n(59124),Z=localStorage.getItem("basePath"),L=new u.VK(Z?{basePath:Z}:void 0),j=new P.U(L),z=new w.v(L),J=new I.W(L),Y=new A.s(L),ee=new C.C(L);function G(e){return JSON.parse(JSON.stringify(e))}var re=function(a,r,s){if(!s)return-1;for(var t=0;t<r.length;t++)if(a[s]==r[t][s])return t;return-1};function Q(e){return e&&e.replace(/[A-Z]/g,function(a){return"_".concat(a.toLowerCase())})}function x(e){return e&&(e.toLowerCase().replace(/([-_][a-z])/g,function(a){return a.toUpperCase().replace("-","").replace("_","")}),e)}var q={classification:{name:"Image Classification",avatar:"./pics/classification.jpg",id:1},detection:{name:"Detection",avatar:"./pics/object_detection.jpg",id:2},semanticSegmentation:{name:"Semantic Segmentation",avatar:"./pics/semantic_segmentation.jpg",id:3},instanceSegmentation:{name:"Instance Segmentation",avatar:"./pics/instance_segmentation.jpg",id:4},keypointDetection:{name:"Keypoint Detection",avatar:"./pics/keypoint_detection.jpg",id:5}},D=function(a,r){var s=_toConsumableArray(a);for(var t in a)s[t].active=!1;for(var _ in a)re(a[_],r,"labelId")!=-1&&(s[_].active=!0);return console.log("activa labs",s),s};function m(e){return d.apply(this,arguments)}function d(){return d=_asyncToGenerator(_regeneratorRuntime.mark(function e(a){return _regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:j.getAll().then(function(t){console.log("get all projects",G(t)),a(G(t))}).catch(function(t){serviceUtils.parseError(t,_message)});case 1:case"end":return s.stop()}},e)})),d.apply(this,arguments)}function b(e){return l.apply(this,arguments)}function l(){return l=_asyncToGenerator(_regeneratorRuntime.mark(function e(a){var r,s=arguments;return _regeneratorRuntime.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:r=s.length>1&&s[1]!==void 0?s[1]:null,console.log("get project id ",a),j.get(a).then(function(E){return console.log("getProject res",E),r&&r(E),E}).catch(function(E){console.log("getProject err",E),serviceUtils.parseError(E,_message)});case 3:case"end":return _.stop()}},e)})),l.apply(this,arguments)}function U(e,a){return M.apply(this,arguments)}function M(){return M=_asyncToGenerator(_regeneratorRuntime.mark(function e(a,r){return _regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log("delete pj, pjid",a),j.remove(a).then(function(_){console.log("delete project",_),m(r)}).catch(function(_){console.log(_),serviceUtils.parseError(_,_message)});case 2:case"end":return t.stop()}},e)})),M.apply(this,arguments)}function O(e){return c.apply(this,arguments)}function c(){return c=_asyncToGenerator(_regeneratorRuntime.mark(function e(a){return _regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:Y.getAll().then(function(t){console.log("got tasks",t),a&&a(t)}).catch(function(t){console.log("get tasks err",t),serviceUtils.parseError(t,_message)});case 1:case"end":return s.stop()}},e)})),c.apply(this,arguments)}function T(e,a){return v.apply(this,arguments)}function v(){return v=_asyncToGenerator(_regeneratorRuntime.mark(function e(a,r){return _regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log("get task id",a),Y.get(a).then(function(_){console.log("got task ",_),r&&r(_)});case 2:case"end":return t.stop()}},e)})),v.apply(this,arguments)}function K(e){return p.apply(this,arguments)}function p(){return p=_asyncToGenerator(_regeneratorRuntime.mark(function e(a){var r,s,t,_,E;return _regeneratorRuntime.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(a){y.next=2;break}return y.abrupt("return",0);case 2:return y.prev=2,y.next=5,j.getTasks(a);case 5:r=y.sent,s=0,t=_createForOfIteratorHelper(r);try{for(t.s();!(_=t.n()).done;)E=_.value,E.annotations.length!=0&&s++}catch(X){t.e(X)}finally{t.f()}return console.log("progress",Math.ceil(s/r.length*100)),y.abrupt("return",Math.ceil(s/r.length*100));case 13:return y.prev=13,y.t0=y.catch(2),console.log("get progress err",y.t0),serviceUtils.parseError(y.t0,_message),y.abrupt("return",0);case 18:case"end":return y.stop()}},e,null,[[2,13]])})),p.apply(this,arguments)}function h(e,a){console.log("getLabels projectid",e),!!e&&j.getLabels(e).then(function(r){console.log("got labels ",r),a(G(r))}).catch(function(r){serviceUtils.parseError(r,_message)})}function i(e,a,r){var s=LabelFromJSON(a);s.projectId=e,z.create(s).then(function(){h(e,r)}).catch(function(t){serviceUtils.parseError(t,_message)})}function f(e,a){console.log("delete label",e),z.remove(e.labelId).then(function(){_message.error("Label "+e.name+" is deleted!"),h(e.projectId,a)}).catch(function(r){serviceUtils.parseError(r,_message)})}},64322:function(k,W,n){"use strict";n.d(W,{gu:function(){return z},_D:function(){return ee},Gd:function(){return G},jL:function(){return re},iA:function(){return Q},CV:function(){return x},A5:function(){return q}});var $=n(86582),R=n(91220),g=n(3182),F=n(34792),u=n(48086),P=n(2824),w=n(94043),o=n.n(w),I=n(37071),A=n(81139),C=localStorage.getItem("basePath"),Z=new A.VK(C?{basePath:C}:void 0),L=new A.U(Z),j=new A.sD(Z),z=function(m){return JSON.parse(JSON.stringify(m))};function J(D){return D&&(D.toLowerCase().replace(/([-_][a-z])/g,function(m){return m.toUpperCase().replace("-","").replace("_","")}),D)}var Y=function(m,d,b){if(!!b){for(var l=0;l<d.length;l++)if(m[b]==d[l][b])return l}},ee=function(m){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[.1,3],b=m(1),l=(0,P.Z)(b,2),U=l[0],M=l[1],O=function(T){var v=U;v+=T,v<d[0]&&(v=d[0],u.default.error("Smallest scale is "+d[0])),v>d[1]&&(v=d[1],u.default.error("Largest scale is "+d[1])),M(v)};return{curr:U,change:O}},G=function(m){var d=m([]),b=(0,P.Z)(d,2),l=b[0],U=b[1],M=m(),O=(0,P.Z)(M,2),c=O[0],T=O[1],v=function(){var f=(0,g.Z)(o().mark(function e(){var a;return o().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,L.getAll();case 3:return a=s.sent,U(a),s.abrupt("return",a);case 8:s.prev=8,s.t0=s.catch(0),console.log("project getAll err",s.t0),I.Z.parseError(s.t0,u.default);case 12:case"end":return s.stop()}},e,null,[[0,8]])}));return function(){return f.apply(this,arguments)}}(),K=function(){var f=(0,g.Z)(o().mark(function e(a){var r;return o().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a!=null){t.next=2;break}return t.abrupt("return",void 0);case 2:if(!(l.length>1)){t.next=5;break}return u.default.error("Currently have multiple projects stored, use turnTo instead"),t.abrupt("return");case 5:return t.prev=5,t.next=8,L.get(a);case 8:return r=t.sent,U([r]),T(0),t.abrupt("return",r);case 14:t.prev=14,t.t0=t.catch(5),console.log("prject getcurr err",t.t0),I.Z.parseError(t.t0,u.default);case 18:case"end":return t.stop()}},e,null,[[5,14]])}));return function(a){return f.apply(this,arguments)}}(),p=function(){var f=(0,g.Z)(o().mark(function e(a){return o().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:typeof a=="number"?L.remove(a):L.remove(a.projectId),v();case 2:case"end":return s.stop()}},e)}));return function(a){return f.apply(this,arguments)}}(),h=function(){var f=(0,g.Z)(o().mark(function e(a){var r;return o().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L.create(a);case 3:return r=t.sent,console.log(r),t.abrupt("return",r);case 8:t.prev=8,t.t0=t.catch(0),console.log("project create err",t.t0),I.Z.parseError(t.t0,u.default);case 12:case"end":return t.stop()}},e,null,[[0,8]])}));return function(a){return f.apply(this,arguments)}}(),i=function(){var f=(0,g.Z)(o().mark(function e(a,r){return o().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:L.update(a,r).then(function(_){console.log("project update res",_)}).catch(function(_){console.log("project update err ",_),I.Z.parseError(_,u.default)});case 1:case"end":return t.stop()}},e)}));return function(a,r){return f.apply(this,arguments)}}();return{all:l,getAll:v,getCurr:K,remove:p,create:h,update:i,get curr(){if(c!=null)return l[c]}}},re=function(m,d){var b=d.oneHot,l=b===void 0?!0:b,U=d.pageOnSelect,M=m([]),O=(0,P.Z)(M,2),c=O[0],T=O[1],v=m(),K=(0,P.Z)(v,2),p=K[0],h=K[1],i=m(l),f=(0,P.Z)(i,2),e=f[0],a=f[1],r=function(){var y=(0,g.Z)(o().mark(function X(H){var N,V,te,ne;return o().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.prev=0,B.next=3,L.getLabels(H);case 3:N=B.sent,V=(0,R.Z)(N);try{for(V.s();!(te=V.n()).done;)ne=te.value,ne.active=!1}catch(ae){V.e(ae)}finally{V.f()}return T(N),B.abrupt("return",N);case 10:B.prev=10,B.t0=B.catch(0),console.log("label getall err ",B.t0),I.Z.parseError(B.t0,u.default);case 14:case"end":return B.stop()}},X,null,[[0,10]])}));return function(H){return y.apply(this,arguments)}}(),s=function(X){var H=Y(X,c,"labelId");if(h(H),console.log("onehot",e),e){var N=(0,R.Z)(c),V;try{for(N.s();!(V=N.n()).done;){var te=V.value;te.active=!1}}catch(ne){N.e(ne)}finally{N.f()}c[H].active=!0,console.log("all",c)}else c[H].active=!c[H].active;U(c[H]),T((0,$.Z)(c))},t=function(){},_=function(){},E=function(){},S=function(){a(!e)};return{all:c,getAll:r,onSelect:s,onAdd:t,onDelete:_,onModify:E,toggleOneHot:S,get curr(){if(p!=null)return c[p]}}},Q=function(m){var d=m([]),b=(0,P.Z)(d,2),l=b[0],U=b[1],M=m(0),O=(0,P.Z)(M,2),c=O[0],T=O[1],v=function(h){if(console.log("turnto",l,h),l.length!=0){if(h==-1){u.default.error("This is the first image. No previous image.");return}if(h==l.length){u.default.error("This is the final image. No next image.");return}T(h)}},K=function(){var p=(0,g.Z)(o().mark(function h(i,f){var e;return o().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,L.getTasks(i);case 3:return e=r.sent,U(e),f!=null&&v(f),r.abrupt("return",e);case 9:r.prev=9,r.t0=r.catch(0),console.log("task getall err ",r.t0),I.Z.parseError(r.t0,u.default);case 13:case"end":return r.stop()}},h,null,[[0,9]])}));return function(i,f){return p.apply(this,arguments)}}();return{currIdx:c,all:l,turnTo:v,getAll:K,get curr(){if(c!=null)return l[c]}}},x=function(m){var d=m([]),b=(0,P.Z)(d,2),l=b[0],U=b[1],M=function(){var O=(0,g.Z)(o().mark(function c(T){var v;return o().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.prev=0,v=dataApi.getAnnotations(T),U(v),p.abrupt("return",v);case 6:p.prev=6,p.t0=p.catch(0),console.log("ann getAll err",p.t0),I.Z.parseError(p.t0,u.default);case 10:case"end":return p.stop()}},c,null,[[0,6]])}));return function(T){return O.apply(this,arguments)}}();return{all:l,getAll:M}},q=function(m){var d=m(),b=(0,P.Z)(d,2),l=b[0],U=b[1],M=m([]),O=(0,P.Z)(M,2),c=O[0],T=O[1],v=function(){var p=(0,g.Z)(o().mark(function h(i){return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:U(i);case 1:case"end":return e.stop()}},h)}));return function(i){return p.apply(this,arguments)}}(),K=function(){var p=(0,g.Z)(o().mark(function h(i,f){var e;return o().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,j.getDatas(i);case 3:return e=r.sent,f!=null&&v(f),T(e),r.abrupt("return",e);case 9:r.prev=9,r.t0=r.catch(0),console.log("data getall err ",r.t0),I.Z.parseError(r.t0,u.default);case 13:case"end":return r.stop()}},h,null,[[0,9]])}));return function(i,f){return p.apply(this,arguments)}}();return{all:c,getAll:K,turnTo:v,get curr(){if(c.length!=0)return c[l]}}}}}]);
