(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[507],{52822:function(d){d.exports={roundBall:"roundBall___1pqu1",popover:"popover___1-PR6"}},5882:function(d){d.exports={listItem:"listItem___vtDXn",eye:"eye___AsLBS",roundBall:"roundBall___1J_R3",popover:"popover___1x-2R",delete:"delete___WHPf2",listItemActive:"listItemActive___3FRb7"}},56131:function(d){d.exports={labelList:"labelList___jvD05",listHeader:"listHeader___UM5UF",eye:"eye___II3Po",roundBall:"roundBall___j752J"}},78677:function(d){d.exports={container:"container___G0FNe"}},80961:function(d){d.exports={leftToolbar:"leftToolbar___1xi4t",rightToolbar:"rightToolbar___3dNSB"}},82499:function(d){d.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1SHWL",toolBarButtonContainer:"toolBarButtonContainer___1jKUz",toolBarButton:"toolBarButton___3Ouq1",buttonText:"buttonText___10ls7",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AA28"}},63097:function(d,M,n){"use strict";var K=n(20136),c=n(55241),u=n(2824),s=n(67294),i=n(52822),r=n.n(i),a=n(63144),f=n(85893),y=function(x){var o=(0,s.useState)(x.color||"#FFF"),F=(0,u.Z)(o,2),R=F[0],e=F[1];return(0,s.useEffect)(function(){e(x.color||"#FFF")},[x]),x.changeable?(0,f.jsx)(c.Z,{getPopupContainer:function(S){return S.parentElement||document.body},overlayClassName:r().popover,openClassName:r().popoverOpenClassName,placement:"bottom",content:(0,f.jsx)(a.xS,{disableAlpha:!0,color:R,onChange:function(S){e(S.hex)},onChangeComplete:x.onChange}),trigger:"click",children:(0,f.jsx)("div",{className:r().roundBall,style:{backgroundColor:R}})}):(0,f.jsx)("div",{className:r().roundBall,style:{backgroundColor:R}})};M.Z=y},5041:function(d,M,n){"use strict";n.d(M,{Z:function(){return k}});var K=n(54421),c=n(38272),u=n(57663),s=n(71577),i=n(2824),r=n(67294),a=n(56131),f=n.n(a),y=n(49111),z=n(19650),x=n(8870),o=n(5882),F=n.n(o),R=n(63097),e=n(85893),N=function(t){var l=(0,x.Z)({},t.label),h=(0,r.useState)(l.invisible),v=(0,i.Z)(h,2),A=v[0],j=v[1],O=(0,r.useState)(0),I=(0,i.Z)(O,2),D=I[0],B=I[1],C=t.hideEye?" ":(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("a",{className:F().eye,style:{backgroundImage:A?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(g){g.stopPropagation(),j(!A),t.onLabelModify(l)}})," "]}),P=t.hideColorPicker?(0,e.jsx)(e.Fragment,{}):(0,e.jsx)(R.Z,{color:l.color,changeable:!0,onChange:function(g){l.color=g.hex,t.onLabelModify(l)}}),Z=(0,e.jsxs)(c.ZP.Item,{className:"".concat(F().listItem," ").concat(t.active?F().listItemActive:""),unselectable:"on",onClick:function(){t.onClick(l)},children:[(0,e.jsxs)(z.Z,{align:"center",size:5,children:[C,l.name,P]}),(0,e.jsx)("a",{className:F().delete,onClick:function(g){g.stopPropagation();var W=new Date().getTime();W-D<300||(B(W),t.onLabelDelete(l))}})]});return Z},S=N,Q=n(71194),L=n(50146),ee=n(47673),V=n(24044),$=n(9715),U=n(93766),J=n(48971),Y=["#FF0000","#008000","#0000FF","#FFFF00","#FFA500","#00FFFF","#8B00FF","#FFC0CB","#7CFC00","#007FFF","#800080","#36BF36","#DAA520","#800000","#008B8B","#B22222","#E6D933","#000080","#FF00FF","#FFFF99","#87CEEB","#5C50E6","#CD5C5C","#20B2AA","#E680FF","#4D1F00","#006374","#B399FF","#8B4513","#BA55D3","#C0C0C0","#808080","#000000"],X=function(t){var l,h,v=(0,J.YB)(),A=v.formatMessage({id:"component.PPAddLabelModal.selectColor"}),j=v.formatMessage({id:"component.PPAddLabelModal.addLabel"}),O=v.formatMessage({id:"component.PPAddLabelModal.labelName"}),I=v.formatMessage({id:"component.PPCreater.cancel"}),D=v.formatMessage({id:"component.PPSegMode.ok"}),B=(0,r.useState)(((l=t.defaultLabel)===null||l===void 0?void 0:l.color)||Y[t.order||0]),C=(0,i.Z)(B,2),P=C[0],Z=C[1];(0,r.useEffect)(function(){var E;Z(((E=t.defaultLabel)===null||E===void 0?void 0:E.color)||Y[t.order||0])},[t]);var T=t.hideColorPicker?(0,e.jsx)(e.Fragment,{}):(0,e.jsx)(U.Z.Item,{label:A,name:"color",children:(0,e.jsx)(R.Z,{color:P,onChange:function(b){Z(b.hex)}})}),g=U.Z.useForm(),W=(0,i.Z)(g,1),H=W[0];return(0,e.jsx)(L.Z,{title:j,visible:t.visible,onCancel:t.onCancel,footer:null,children:(0,e.jsxs)(U.Z,{form:H,name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!1,labelname:(h=t.defaultLabel)===null||h===void 0?void 0:h.name},onFinish:function(b){var q={name:b.labelname,color:P};t.onLabelAdd(q),H.resetFields()},autoComplete:"off",children:[(0,e.jsx)(U.Z.Item,{label:O,name:"labelname",rules:[{required:!0,message:"Please input label name!"}],children:(0,e.jsx)(V.Z,{})}),T,(0,e.jsx)(U.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,e.jsxs)(z.Z,{children:[(0,e.jsx)(s.Z,{onClick:function(){var b;(b=t.onCancel)===null||b===void 0||b.call(0),H.resetFields()},children:I}),(0,e.jsx)(s.Z,{type:"primary",htmlType:"submit",children:D})]})})]})})},G=X,p=function(t){var l,h=(0,J.YB)(),v=h.formatMessage({id:"component.PPLabelList.addLabel"}),A=h.formatMessage({id:"component.PPLabelList.labelList"}),j=(0,r.useState)(!1),O=(0,i.Z)(j,2),I=O[0],D=O[1];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(c.ZP,{className:f().labelList,size:"large",header:(0,e.jsx)("div",{className:f().listHeader,children:A}),footer:(0,e.jsx)("div",{children:(0,e.jsx)(s.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){D(!0)},block:!0,children:v})}),bordered:!0,dataSource:t.labels,renderItem:function(C){var P;return(0,e.jsx)(S,{hideColorPicker:t.hideColorPicker,hideEye:t.hideEye,onClick:t.onLabelSelect,label:C,active:(P=t.activeIds)===null||P===void 0?void 0:P.has(C.labelId),onLabelDelete:t.onLabelDelete,onLabelModify:t.onLabelModify})}}),(0,e.jsx)(G,{hideColorPicker:t.hideColorPicker,order:(l=t.labels)===null||l===void 0?void 0:l.length,visible:I,onLabelAdd:function(C){t.onLabelAdd(C),D(!1)},onCancel:function(){D(!1)}})]})},k=p},8088:function(d,M,n){"use strict";var K=n(67294),c=n(78677),u=n.n(c),s=n(85893),i=function(a){return(0,s.jsx)("div",{className:"".concat(u().container," ").concat(a.className),children:a.children})};M.Z=i},57436:function(d,M,n){"use strict";var K=n(91220),c=n(2824),u=n(67294),s=n(65031),i=n(84420),r=n.n(i),a=n(85893),f="./pics/basketball.jpg";function y(x){switch(x){case"mover":return"move";case"rectangle":case"polygon":return"crosshair";default:return"default"}}var z=function(o){var F=r()(o.imgSrc||f),R=(0,c.Z)(F,1),e=R[0],N=(e==null?void 0:e.width)||0,S=(e==null?void 0:e.height)||0,Q=o.transparency==null?0:o.transparency*.01,L=o.currentTool=="polygon"?o.drawTool.polygon:o.drawTool.brush,ee=(0,u.useState)(0),V=(0,c.Z)(ee,2),$=V[0],U=V[1],J=(0,u.useState)(0),Y=(0,c.Z)(J,2),X=Y[0],G=Y[1],p=(0,u.useState)({x:0,y:0}),k=(0,c.Z)(p,2),w=k[0],t=k[1],l=(0,u.useRef)(null),h=(0,u.useRef)(null),v=(0,u.useRef)(null);function A(){var _=document.getElementById("dr");_&&(U(_.clientWidth),G(_.clientHeight))}(0,u.useEffect)(function(){window.removeEventListener("resize",A),window.addEventListener("resize",A);var _=document.getElementById("dr");_&&(U(_.clientWidth),G(_.clientHeight))},[]),(0,u.useEffect)(function(){!l.current||(l.current.container().style.cursor=y(o.currentTool))},[o.currentTool]);var j=function(m){return{e:m,mouseX:(m.evt.offsetX-w.x-$/2)/o.scale+N/2,mouseY:(m.evt.offsetY-w.y-X/2)/o.scale+S/2,offsetX:-N/2,offsetY:-S/2,canvasRef:v,layerRef:h}},O=function(m){L==null||L.onMouseDown(j(m))},I=function(m){L==null||L.onMouseMove(j(m))},D=function(m){L==null||L.onMouseUp(j(m))},B=function(m){m.cancelBubble=!0,m.evt.preventDefault()},C=[];if(o.annotations){var P,Z,T={onDrag:o.onAnnotationModify,onDragEnd:o.onAnnotationModifyComplete,scale:o.scale,currentTool:o.currentTool,onSelect:o.setCurrentAnnotation,stageRef:l,currentAnnotation:o.currentAnnotation,transparency:Q,canvasRef:v},g=(P=v.current)===null||P===void 0?void 0:P.getContext("2d");g&&g.clearRect(0,0,g.canvas.width,g.canvas.height);var W=(0,K.Z)(o.annotations),H;try{for(W.s();!(H=W.n()).done;){var E=H.value;if(!!E){T.annotation=E;var b=void 0;if(E.type=="polygon")b=o.drawTool.polygon.drawAnnotation(T);else if(E.type=="brush"||E.type=="rubber")b=o.drawTool.brush.drawAnnotation(T);else continue;C.push(b)}}}catch(_){W.e(_)}finally{W.f()}(Z=h.current)===null||Z===void 0||Z.batchDraw()}var q=o.currentTool=="mover";return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("canvas",{style:{display:"none"},id:"virtualCanvas",width:e==null?void 0:e.width,height:e==null?void 0:e.height}),(0,a.jsx)("canvas",{style:{display:"none"},id:"singleLineCanvas",width:e==null?void 0:e.width,height:e==null?void 0:e.height}),(0,a.jsx)("canvas",{style:{display:"none"},id:"canvasId",ref:v,width:e==null?void 0:e.width,height:e==null?void 0:e.height}),(0,a.jsx)("svg",{width:"0",height:"0",style:{position:"absolute",zIndex:"-1"},children:(0,a.jsx)("defs",{children:(0,a.jsx)("filter",{id:"remove-alpha",x:"0",y:"0",width:"100%",height:"100%",children:(0,a.jsx)("feComponentTransfer",{children:(0,a.jsx)("feFuncA",{type:"discrete",tableValues:"0 1"})})})})}),(0,a.jsxs)(s.Hf,{width:$,height:X,offsetX:-$/2,offsetY:-X/2,className:"stage",ref:l,draggable:q,onDragMove:function(m){o.currentTool=="mover"},onDragEnd:function(m){o.currentTool=="mover"&&t({x:m.target.x(),y:m.target.y()})},children:[(0,a.jsx)(s.mh,{onMouseDown:O,onMouseMove:I,onMouseUp:D,onContextMenu:B,scaleX:o.scale,scaleY:o.scale,draggable:!1,children:(0,a.jsx)(s.Ee,{name:"baseImage",draggable:!1,image:e,x:-((e==null?void 0:e.width)||0)/2,y:-((e==null?void 0:e.height)||0)/2})}),(0,a.jsxs)(s.mh,{ref:h,name:"annotation",scaleX:o.scale,scaleY:o.scale,onMouseDown:O,onMouseMove:I,onMouseUp:D,onContextMenu:B,opacity:Q,children:[(0,a.jsx)(s.Ee,{x:-((e==null?void 0:e.width)||0)/2,y:-((e==null?void 0:e.height)||0)/2,image:v.current||void 0}),C]})]})]})};M.Z=z},44434:function(d,M,n){"use strict";var K=n(67294),c=n(80961),u=n.n(c),s=n(85893),i=function(a){var f=u().leftToolbar;return a.disLoc=="right"&&(f=u().rightToolbar),(0,s.jsx)("div",{className:f,children:a.children})};M.Z=i},61541:function(d,M,n){"use strict";var K=n(49111),c=n(19650),u=n(67294),s=n(82499),i=n.n(s),r=n(85893),a=function(y){return(0,r.jsx)("div",{unselectable:"on",className:"".concat(i().toolBarButtonContainerWrapper," ").concat(y.active&&i().toolBarButtonContainerWrapperActive),onClick:y.onClick,children:(0,r.jsx)(c.Z,{align:"center",className:i().toolBarButtonContainer,size:0,children:(0,r.jsxs)(c.Z,{align:"center",direction:"vertical",className:i().toolBarButton,size:0,children:[(0,r.jsx)("img",{src:y.imgSrc}),(0,r.jsx)("div",{className:i().buttonText,children:y.children})]})})})};M.Z=a}}]);
