(self.webpackChunkpp_labeling_frontend=self.webpackChunkpp_labeling_frontend||[]).push([[540],{85024:function(a){a.exports={listItem:"listItem___u4Q82",eye:"eye___BwaRm",delete:"delete___31JB_",roundBall:"roundBall___23A7l",popover:"popover___1BNET",annotationId:"annotationId___zAzX4",labelName:"labelName___2ohxn",listItemActive:"listItemActive___2QnA3"}},56159:function(a){a.exports={labelList:"labelList___v7C6K",listHeader:"listHeader___1aY8R",eye:"eye___2MKbp",roundBall:"roundBall___187XH"}},57560:function(a){a.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___147XP",toolBarButtonContainer:"toolBarButtonContainer___ZEvhK",toolBarButton:"toolBarButton___1s2Rh",buttonText:"buttonText___3NTCv",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___2Utx8",popover:"popover___3PRoi"}},52822:function(a){a.exports={roundBall:"roundBall___1pqu1",popover:"popover___1-PR6"}},5882:function(a){a.exports={listItem:"listItem___vtDXn",eye:"eye___AsLBS",roundBall:"roundBall___1J_R3",popover:"popover___1x-2R",listItemActive:"listItemActive___3FRb7"}},56131:function(a){a.exports={labelList:"labelList___jvD05",listHeader:"listHeader___UM5UF",eye:"eye___II3Po",roundBall:"roundBall___j752J"}},78677:function(a){a.exports={container:"container___G0FNe"}},83930:function(a){a.exports={stage:"stage___3H5QL"}},80961:function(a){a.exports={toolbar:"toolbar___3vxli"}},82499:function(a){a.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1SHWL",toolBarButtonContainer:"toolBarButtonContainer___1jKUz",toolBarButton:"toolBarButton___3Ouq1",buttonText:"buttonText___10ls7",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AA28"}},54777:function(a){a.exports={segment:"segment___1YMcl",mainStage:"mainStage___2otee",rightSideBar:"rightSideBar___2X7jK",determinOutline:"determinOutline___2ls57"}},14836:function(a,g,n){"use strict";n.d(g,{Z:function(){return B}});var W=n(54421),P=n(38272),_=n(57663),d=n(71577),c=n(67294),l=n(56159),L=n.n(l),i=n(49111),O=n(19650),K=n(2824),t=n(11849),v=n(85024),s=n.n(v),f=n(63097),e=n(85893),o=function(u){var C=(0,t.Z)({},u.annotation),h=(0,c.useState)(C.invisible),E=(0,K.Z)(h,2),z=E[0],p=E[1];(0,c.useEffect)(function(){p(u.annotation.invisible)},[u.annotation.invisible]);var Q=(0,e.jsxs)(P.ZP.Item,{className:"".concat(s().listItem," ").concat(u.active?s().listItemActive:""),unselectable:"on",onClick:function(){u.onClick(C)},children:[(0,e.jsxs)(O.Z,{align:"center",size:5,children:[(0,e.jsx)("a",{className:s().eye,style:{backgroundImage:z?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(){p(!z),u.onAnnotationModify(C)}})," ",(0,e.jsx)("span",{className:s().annotationId,children:C.annotationId}),(0,e.jsx)("span",{className:s().labelName,children:C.label.name}),(0,e.jsx)(f.Z,{color:C.label.color})]}),(0,e.jsx)("a",{className:s().delete,onClick:function(){C.delete=!0,u.onAnnotationDelete(C)}})]});return Q},Z=o,y=function(u){return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(P.ZP,{className:L().labelList,size:"large",header:(0,e.jsx)("div",{className:L().listHeader,children:"Annotation List"}),bordered:!0,dataSource:u.annotations,renderItem:function(h){var E;return(0,e.jsx)(Z,{onClick:u.onAnnotationSelect,annotation:h,active:h.annotationId==((E=u.selectedAnnotation)===null||E===void 0?void 0:E.annotationId),onAnnotationDelete:u.onAnnotationDelete,onAnnotationModify:u.onAnnotationModify})},footer:(0,e.jsx)("div",{children:(0,e.jsx)(d.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){u.onAnnotationSelect(void 0)},block:!0,children:"Add Annotation"})})})})},B=y},31154:function(a,g,n){"use strict";n.d(g,{Z:function(){return K}});var W=n(11849),P=n(2824),_=n(91220),d=n(67294),c=n(65031),l=n(85893);function L(t,v,s,f){if(!(!t||!v||!s||!f))return{width:t,color:v,points:s,tool:f,element:(0,l.jsx)(c.x1,{stroke:v,strokeWidth:t,globalCompositeOperation:f==="brush"?"source-over":"destination-out",lineCap:"round",points:s,tension:.01})}}function i(t,v){return t=="rubber"||v==2?"rubber":"brush"}function O(t){var v=0,s=(0,_.Z)(t),f;try{for(s.s();!(f=s.n()).done;){var e=f.value;!e||e.annotationId>v&&(v=e.annotationId)}}catch(o){s.e(o)}finally{s.f()}return v}function K(t){var v=(0,d.useState)(),s=(0,P.Z)(v,2),f=s[0],e=s[1],o=function(M){var u,C=i(t.currentTool,M.evt.button),h=L(t.brushSize||10,(u=t.currentLabel)===null||u===void 0?void 0:u.color,[M.evt.offsetX,M.evt.offsetY,M.evt.offsetX,M.evt.offsetY],C);if(!!h)if(e(C),!t.currentAnnotation)t.onAnnotationAdd({annotationId:O(t.annotations)+1,label:t.currentLabel,lines:[h]});else{var E,z={annotationId:t.currentAnnotation.annotationId,label:t.currentAnnotation.label,lines:(E=t.currentAnnotation.lines)===null||E===void 0?void 0:E.concat([h])};t.onAnnotationModify(z),console.log(z)}},Z=function(M){var u;if(!(!f||!t.currentAnnotation)){var C=[M.evt.offsetX,M.evt.offsetY],h=[];(u=t.currentAnnotation)!==null&&u!==void 0&&u.lines&&(C=t.currentAnnotation.lines[t.currentAnnotation.lines.length-1].points.concat(C),h=t.currentAnnotation.lines);var E=L(t.brushSize||10,t.currentLabel.color,C,f);!E||(h.pop(),h.push(E),t.onAnnotationModify((0,W.Z)((0,W.Z)({},t.currentAnnotation),{},{lines:h})))}},y=function(){e(void 0)};return{onMouseDown:o,onMouseMove:Z,onMouseUp:y}}},63097:function(a,g,n){"use strict";var W=n(20136),P=n(55241),_=n(2824),d=n(67294),c=n(52822),l=n.n(c),L=n(63144),i=n(85893),O=function(t){var v=(0,d.useState)(t.color||"#FFF"),s=(0,_.Z)(v,2),f=s[0],e=s[1];return(0,d.useEffect)(function(){e(t.color||"#FFF")},[t]),t.changeable?(0,i.jsx)(P.Z,{getPopupContainer:function(Z){return Z.parentElement||document.body},overlayClassName:l().popover,openClassName:l().popoverOpenClassName,placement:"bottom",content:(0,i.jsx)(L.xS,{disableAlpha:!0,color:f,onChange:function(Z){e(Z.hex)},onChangeComplete:t.onChange}),trigger:"click",children:(0,i.jsx)("div",{className:l().roundBall,style:{backgroundColor:f}})}):(0,i.jsx)("div",{className:l().roundBall,style:{backgroundColor:f}})};g.Z=O},5041:function(a,g,n){"use strict";n.d(g,{Z:function(){return H}});var W=n(54421),P=n(38272),_=n(57663),d=n(71577),c=n(2824),l=n(67294),L=n(56131),i=n.n(L),O=n(49111),K=n(19650),t=n(11849),v=n(5882),s=n.n(v),f=n(63097),e=n(85893),o=function(r){var A=(0,t.Z)({},r.label),S=(0,l.useState)(A.invisible),D=(0,c.Z)(S,2),F=D[0],b=D[1],x=(0,e.jsx)(P.ZP.Item,{className:"".concat(s().listItem," ").concat(r.active?s().listItemActive:""),unselectable:"on",onClick:function(){r.onClick(A)},children:(0,e.jsxs)(K.Z,{align:"center",size:5,children:[(0,e.jsx)("a",{className:s().eye,style:{backgroundImage:F?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(){b(!F),r.onLabelModify(A)}})," ",A.name,(0,e.jsx)(f.Z,{color:A.color,changeable:!0,onChange:function(N){A.color=N.hex,r.onLabelModify(A)}})]})});return x},Z=o,y=n(71194),B=n(50146),M=n(47673),u=n(24044),C=n(9715),h=n(93766),E=["#FF0000","#008000","#0000FF","#FFFF00","#FFA500","#00FFFF","#8B00FF","#FFC0CB","#7CFC00","#007FFF","#800080","#36BF36","#DAA520","#800000","#008B8B","#B22222","#E6D933","#000080","#FF00FF","#FFFF99","#87CEEB","#5C50E6","#CD5C5C","#20B2AA","#E680FF","#4D1F00","#006374","#B399FF","#8B4513","#BA55D3","#C0C0C0","#808080","#000000"],z=function(r){var A,S,D=(0,l.useState)(((A=r.defaultLabel)===null||A===void 0?void 0:A.color)||E[r.order||0]),F=(0,c.Z)(D,2),b=F[0],x=F[1];(0,l.useEffect)(function(){var T;x(((T=r.defaultLabel)===null||T===void 0?void 0:T.color)||E[r.order||0])},[r]);var $=h.Z.useForm(),N=(0,c.Z)($,1),R=N[0];return(0,e.jsx)(B.Z,{title:"Add Label",visible:r.visible,onCancel:r.onCancel,footer:null,children:(0,e.jsxs)(h.Z,{form:R,name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!1,labelname:(S=r.defaultLabel)===null||S===void 0?void 0:S.name},onFinish:function(U){var G={name:U.labelname,color:b};r.onLabelAdd(G),R.resetFields()},autoComplete:"off",children:[(0,e.jsx)(h.Z.Item,{label:"Label Name",name:"labelname",rules:[{required:!0,message:"Please input label name!"}],children:(0,e.jsx)(u.Z,{})}),(0,e.jsx)(h.Z.Item,{label:"Select Color",name:"color",children:(0,e.jsx)(f.Z,{color:b,onChange:function(U){x(U.hex)}})}),(0,e.jsx)(h.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,e.jsxs)(K.Z,{children:[(0,e.jsx)(d.Z,{onClick:function(){var U;(U=r.onCancel)===null||U===void 0||U.call(0),R.resetFields()},children:"\u53D6\u6D88"}),(0,e.jsx)(d.Z,{type:"primary",htmlType:"submit",children:"\u786E\u5B9A"})]})})]})})},p=z,Q=[{color:"#FF0000",name:"Label 1"},{color:"#008000",name:"Label 2"}],Y=function(r){var A=(0,l.useState)(Q),S=(0,c.Z)(A,2),D=S[0],F=S[1],b=(0,l.useState)(!1),x=(0,c.Z)(b,2),$=x[0],N=x[1];return(0,l.useEffect)(function(){r.selectedLabel||r.onLabelSelect(D[0])},[D,r]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(P.ZP,{className:i().labelList,size:"large",header:(0,e.jsx)("div",{className:i().listHeader,children:"Label List"}),footer:(0,e.jsx)("div",{children:(0,e.jsx)(d.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){N(!0)},block:!0,children:"Add Label"})}),bordered:!0,dataSource:D,renderItem:function(T){var U;return(0,e.jsx)(Z,{onClick:r.onLabelSelect,label:T,active:T.name==((U=r.selectedLabel)===null||U===void 0?void 0:U.name),onLabelDelete:r.onLabelDelete,onLabelModify:r.onLabelModify})}}),(0,e.jsx)(p,{order:D.length,visible:$,onLabelAdd:function(T){D.push(T),F(D),N(!1)},onCancel:function(){N(!1)}})]})},H=Y},8088:function(a,g,n){"use strict";var W=n(67294),P=n(78677),_=n.n(P),d=n(85893),c=function(L){return(0,d.jsx)("div",{className:"".concat(_().container," ").concat(L.className),children:L.children})};g.Z=c},57436:function(a,g,n){"use strict";var W=n(2824),P=n(67294),_=n(65031),d=n(84420),c=n.n(d),l=n(83930),L=n.n(l),i=n(85893),O="./pics/basketball.jpg",K=function(v){var s=c()(O),f=(0,W.Z)(s,1),e=f[0],o=(e==null?void 0:e.width)||0,Z=(e==null?void 0:e.height)||0;return(0,i.jsxs)(_.Hf,{width:o,height:Z,className:L().stage,children:[(0,i.jsx)(_.mh,{children:(0,i.jsx)(_.Ee,{image:e})}),(0,i.jsxs)(_.mh,{onMouseDown:function(B){v.onMouseDown&&v.onMouseDown(B)},onMouseMove:function(B){v.onMouseMove&&v.onMouseMove(B)},onMouseUp:function(B){v.onMouseUp&&v.onMouseUp(B)},onContextMenu:function(B){B.evt.preventDefault()},children:[(0,i.jsx)(_.Ee,{image:e}),v.annotations.map(function(y,B){var M;return(M=y.lines)===null||M===void 0?void 0:M.map(function(u,C){return u.element})})]})]})};g.Z=K},44434:function(a,g,n){"use strict";var W=n(67294),P=n(80961),_=n.n(P),d=n(85893),c=function(L){return(0,d.jsx)("div",{className:_().toolbar,children:L.children})};g.Z=c},61541:function(a,g,n){"use strict";var W=n(49111),P=n(19650),_=n(67294),d=n(82499),c=n.n(d),l=n(85893),L=function(O){return(0,l.jsx)("div",{unselectable:"on",className:"".concat(c().toolBarButtonContainerWrapper," ").concat(O.active&&c().toolBarButtonContainerWrapperActive),onClick:O.onClick,children:(0,l.jsx)(P.Z,{align:"center",className:c().toolBarButtonContainer,size:0,children:(0,l.jsxs)(P.Z,{align:"center",direction:"vertical",className:c().toolBarButton,size:0,children:[(0,l.jsx)("img",{src:O.imgSrc}),(0,l.jsx)("div",{className:c().buttonText,children:O.children})]})})})};g.Z=L},65935:function(a,g,n){"use strict";n.r(g),n.d(g,{default:function(){return Y}});var W=n(57663),P=n(71577),_=n(2824),d=n(67294),c=n(54777),l=n.n(c),L=n(8088),i=n(61541),O=n(44434),K=n(20136),t=n(55241),v=n(77883),s=n(70507),f=n(57560),e=n.n(f),o=n(85893),Z=1,y=50,B=10;function M(H){return H?H<=Z?Z:H>=y?y:H:B}var u=function(j){var r=(0,d.useState)(M(j.size)),A=(0,_.Z)(r,2),S=A[0],D=A[1];return(0,d.useEffect)(function(){D(M(j.size))},[j.size]),(0,o.jsxs)(t.Z,{overlayClassName:e().popover,placement:"right",content:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(P.Z,{type:"text",onClick:function(){var b,x=M(S-1);D(x),(b=j.onChange)===null||b===void 0||b.call(0,x)},children:"-"}),(0,o.jsx)(s.Z,{min:Z,max:y,value:S,onChange:function(b){var x;(x=j.onChange)===null||x===void 0||x.call(0,b)},controls:!1,style:{textAlign:"center"}}),(0,o.jsx)(P.Z,{type:"text",onClick:function(){var b,x=M(S+1);D(x),(b=j.onChange)===null||b===void 0||b.call(0,x)},children:"+"})]}),trigger:j.active?"hover":"click",children:[" ",(0,o.jsx)(i.Z,{active:j.active,imgSrc:j.imgSrc||"./pics/buttons/brush.png",onClick:j.onClick,children:j.children||"Brush"})]})},C=u,h=n(5041),E=n(57436),z=n(14836),p=n(31154),Q=function(){var j=(0,d.useState)(void 0),r=(0,_.Z)(j,2),A=r[0],S=r[1],D=(0,d.useState)({color:"",name:""}),F=(0,_.Z)(D,2),b=F[0],x=F[1],$=(0,d.useState)(),N=(0,_.Z)($,2),R=N[0],T=N[1],U=(0,d.useState)([]),G=(0,_.Z)(U,2),X=G[0],w=G[1],on=(0,d.useState)(10),en=(0,_.Z)(on,2),q=en[0],tn=en[1],J=function(m){T(m),m!=null&&m.label&&x(m.label)},an=function(m){for(var V=[],k=0;k<X.length;k++)X[k].annotationId==m.annotationId?V.push(m):V.push(X[k]);J(m),w(V)},nn=(0,p.Z)({currentLabel:b,brushSize:q,currentTool:A,annotations:X,currentAnnotation:R,onAnnotationAdd:function(m){w(X.concat([m])),R||J(m)},onAnnotationModify:an});return(0,o.jsxs)(L.Z,{className:l().segment,children:[(0,o.jsxs)(O.Z,{children:[(0,o.jsx)(i.Z,{imgSrc:"./pics/buttons/intelligent_interaction.png",children:"Intelligent Interaction"}),(0,o.jsx)(i.Z,{active:A=="polygon",imgSrc:"./pics/buttons/polygon.png",onClick:function(){S("polygon")},children:"Polygon"}),(0,o.jsx)(C,{size:q,active:A=="brush",onClick:function(){S("brush")},onChange:function(m){tn(m)},children:"Brush"}),(0,o.jsx)(C,{size:q,active:A=="rubber",onClick:function(){S("rubber")},onChange:function(m){tn(m)},imgSrc:"./pics/buttons/rubber.png",children:"Rubber"}),(0,o.jsx)(i.Z,{imgSrc:"./pics/buttons/zoom_in.png",children:"Zoom in"}),(0,o.jsx)(i.Z,{imgSrc:"./pics/buttons/zoom_out.png",children:"Zoom out"}),(0,o.jsx)(i.Z,{imgSrc:"./pics/buttons/save.png",children:"Save"}),(0,o.jsx)(i.Z,{imgSrc:"./pics/buttons/move.png",children:"Move"}),(0,o.jsx)(i.Z,{imgSrc:"./pics/buttons/export.png",children:"Export"}),(0,o.jsx)(i.Z,{imgSrc:"./pics/buttons/data_division.png",children:"Divide Data"}),(0,o.jsx)(i.Z,{imgSrc:"./pics/buttons/prev.png",children:"Undo"}),(0,o.jsx)(i.Z,{imgSrc:"./pics/buttons/next.png",children:"Redo"}),(0,o.jsx)(i.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:"Clear Mark"})]}),(0,o.jsx)("div",{className:l().mainStage,children:(0,o.jsx)(E.Z,{annotations:X,onMouseDown:nn.onMouseDown,onMouseMove:nn.onMouseMove,onMouseUp:nn.onMouseUp})}),(0,o.jsxs)("div",{className:l().rightSideBar,children:[(0,o.jsx)("div",{className:l().determinOutline,children:(0,o.jsx)(P.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",block:!0,onClick:function(){J(void 0)},children:"Determine Outline"})}),(0,o.jsx)(h.Z,{selectedLabel:b,onLabelSelect:function(m){x(m),J(void 0)},onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}}),(0,o.jsx)(z.Z,{selectedAnnotation:R,annotations:X,onAnnotationSelect:function(m){m!=null&&m.delete||J(m)},onAnnotationAdd:function(){},onAnnotationModify:function(){},onAnnotationDelete:function(m){w(X.filter(function(V){return V.annotationId!=m.annotationId})),J(void 0)}})]})]})},Y=Q}}]);
