(self.webpackChunkpp_labeling_frontend=self.webpackChunkpp_labeling_frontend||[]).push([[89],{57560:function(L){L.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___147XP",toolBarButtonContainer:"toolBarButtonContainer___ZEvhK",toolBarButton:"toolBarButton___1s2Rh",buttonText:"buttonText___3NTCv",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___2Utx8",popover:"popover___3PRoi"}},26647:function(L){L.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1FTWb",toolBarButtonContainer:"toolBarButtonContainer___1Vahn",toolBarButton:"toolBarButton___3mR2H",buttonText:"buttonText___Y0WDm",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3lRZ8",popover:"popover___3zzu2",popoverLeft:"popoverLeft___15lGe"}},54777:function(L){L.exports={segment:"segment___1YMcl",mainStage:"mainStage___2otee",draw:"draw___equn4",pblock:"pblock___2bT7z",progress:"progress___1porz",rightSideBar:"rightSideBar___2X7jK",determinOutline:"determinOutline___2ls57"}},43801:function(L,B,n){"use strict";n.d(B,{Z:function(){return x}});var Z=n(11849),R=n(2824),K=n(91220),U=n(67294),S=n(65031),f=n(85893);function I(t,u,d,g){if(!(!t||!u||!d||!g))return{width:t,color:u,points:d,tool:g}}function h(t,u,d,g,P,b,E){if(!t||!t.lines)return[(0,f.jsx)(f.Fragment,{})];var i=[],o=(0,K.Z)(t.lines),v;try{for(o.s();!(v=o.n()).done;){var l=v.value;!l.width||!l.color||!l.points||!l.tool||i.push((0,f.jsx)(S.x1,{stroke:l.color,strokeWidth:l.width,globalCompositeOperation:l.tool==="brush"?"source-over":"destination-out",lineCap:"round",points:l.points,tension:.01,onDragMove:function(){},onDragEnd:function(){d()}}))}}catch(M){o.e(M)}finally{o.f()}return i}function W(t,u){return t=="rubber"||u==2?"rubber":"brush"}function m(t){var u=0,d=(0,K.Z)(t),g;try{for(d.s();!(g=d.n()).done;){var P=g.value;!P||P.annotationId>u&&(u=P.annotationId)}}catch(b){d.e(b)}finally{d.f()}return u}function x(t){var u=(0,U.useState)(),d=(0,R.Z)(u,2),g=d[0],P=d[1],b=function(v,l){var M;if(!(t.currentTool!="brush"&&t.currentTool!="rubber")){var O=v.evt.offsetX/l,C=v.evt.offsetY/l,e=W(t.currentTool,v.evt.button),a=I(t.brushSize||10,(M=t.currentLabel)===null||M===void 0?void 0:M.color,[O,C,O,C],e);if(!!a)if(P(e),t.currentAnnotation){var y,p={tool:"brush",annotationId:t.currentAnnotation.annotationId,label:t.currentAnnotation.label,lines:(y=t.currentAnnotation.lines)===null||y===void 0?void 0:y.concat([a])};t.onAnnotationModify(p)}else{if(e=="rubber")return;t.onAnnotationAdd({tool:"brush",annotationId:m(t.annotations)+1,label:t.currentLabel,lines:[a]})}}},E=function(v,l){var M;if(!(!g||!t.currentAnnotation)){var O=v.evt.offsetX/l,C=v.evt.offsetY/l,e=[O,C],a=[];(M=t.currentAnnotation)!==null&&M!==void 0&&M.lines&&(e=t.currentAnnotation.lines[t.currentAnnotation.lines.length-1].points.concat(e),a=t.currentAnnotation.lines);var y=I(t.brushSize||10,t.currentLabel.color,e,g);!y||(a.pop(),a.push(y),t.onAnnotationModify((0,Z.Z)((0,Z.Z)({},t.currentAnnotation),{},{lines:a})))}},i=function(){t.currentTool!="brush"&&t.currentTool!="rubber"||(P(void 0),t.onMouseUp())};return{onMouseDown:b,onMouseMove:E,onMouseUp:i,createElementsFunc:h}}},58967:function(L,B,n){"use strict";var Z=n(20136),R=n(55241),K=n(77883),U=n(70507),S=n(57663),f=n(71577),I=n(2824),h=n(67294),W=n(61541),m=n(57560),x=n.n(m),t=n(85893),u=1,d=50,g=10;function P(E){return E?E<=u?u:E>=d?d:E:g}var b=function(i){var o=(0,h.useState)(P(i.size)),v=(0,I.Z)(o,2),l=v[0],M=v[1],O=function(e){M(P(e))};return(0,h.useEffect)(function(){O(i.size)},[i.size]),(0,t.jsxs)(R.Z,{overlayClassName:x().popover,placement:"right",content:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f.Z,{type:"text",onClick:function(){var e,a=P(l-1);O(a),(e=i.onChange)===null||e===void 0||e.call(0,a)},children:"-"}),(0,t.jsx)(U.Z,{min:u,max:d,value:l,onChange:function(e){var a;(a=i.onChange)===null||a===void 0||a.call(0,e)},controls:!1,style:{textAlign:"center"}}),(0,t.jsx)(f.Z,{type:"text",onClick:function(){var e,a=P(l+1);O(a),(e=i.onChange)===null||e===void 0||e.call(0,a)},children:"+"})]}),trigger:i.active?"hover":"click",children:[" ",(0,t.jsx)(W.Z,{active:i.active,imgSrc:i.imgSrc||"./pics/buttons/brush.png",onClick:i.onClick,children:i.children||"Brush"})]})};B.Z=b},27992:function(L,B,n){"use strict";var Z=n(20136),R=n(55241),K=n(77883),U=n(70507),S=n(57663),f=n(71577),I=n(2824),h=n(67294),W=n(61541),m=n(26647),x=n.n(m),t=n(85893),u=1,d=100,g=10;function P(E){return E?E<=u?u:E>=d?d:E:g}var b=function(i){var o=(0,h.useState)(P(i.size)),v=(0,I.Z)(o,2),l=v[0],M=v[1],O=function(e){M(P(e))};return(0,h.useEffect)(function(){O(i.size)},[i.size]),(0,t.jsxs)(R.Z,{overlayClassName:"".concat(x().popover," ").concat(i.disLoc=="left"?x().popoverLeft:""),placement:i.disLoc||"right",content:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f.Z,{type:"text",onClick:function(){var e,a=P(l-1);O(a),(e=i.onChange)===null||e===void 0||e.call(0,a)},children:"-"}),(0,t.jsx)(U.Z,{min:u,max:d,value:l,onChange:function(e){var a;(a=i.onChange)===null||a===void 0||a.call(0,e)},controls:!1,style:{textAlign:"center"}}),(0,t.jsx)(f.Z,{type:"text",onClick:function(){var e,a=P(l+1);O(a),(e=i.onChange)===null||e===void 0||e.call(0,a)},children:"+"})]}),trigger:"hover",children:[" ",(0,t.jsx)(W.Z,{imgSrc:i.imgSrc,onClick:i.onClick,children:i.children})]})};B.Z=b},86089:function(L,B,n){"use strict";n.r(B),n.d(B,{MOST_HISTORY_STEPS:function(){return v}});var Z=n(57663),R=n(71577),K=n(34669),U=n(54458),S=n(2824),f=n(67294),I=n(54777),h=n.n(I),W=n(8088),m=n(61541),x=n(44434),t=n(58967),u=n(27992),d=n(5041),g=n(57436),P=n(14836),b=n(29919),E=n(43801),i=n(13931),o=n(85893),v=40,l=function(){var O=(0,f.useState)(void 0),C=(0,S.Z)(O,2),e=C[0],a=C[1],y=(0,f.useState)({color:"",name:""}),p=(0,S.Z)(y,2),N=p[0],k=p[1],rn=(0,f.useState)(),V=(0,S.Z)(rn,2),T=V[0],H=V[1],an=(0,f.useState)([]),G=(0,S.Z)(an,2),D=G[0],j=G[1],_n=(0,f.useState)(10),Q=(0,S.Z)(_n,2),z=Q[0],w=Q[1],sn=(0,f.useState)(1),q=(0,S.Z)(sn,2),J=q[0],Y=q[1],nn=function(r){r||Y(1),r<.1||r>3?Y(1):Y(r)},A=function(r){H(r),r!=null&&r.label&&k(r.label)};(0,f.useEffect)(function(){localStorage.removeItem("history"),F([])},[]);function F(_,r){var s=localStorage.getItem("history"),c=s?JSON.parse(s):{index:-1,items:[]},on={currentAnnotation:r,annotations:_};if(JSON.stringify(c.items[c.index])!=JSON.stringify(on)){var cn=c.index>v?c.index-v:0,dn=c.items.splice(cn,c.index==0?1:c.index+1);c.items=dn.concat([on]),c.index<=v?c.index++:c.index=v+1,localStorage.setItem("history",JSON.stringify(c))}}var ln=function(){var r=localStorage.getItem("history");if(!!r){var s=JSON.parse(r);if(!!s&&!(s.index>=s.items.length-1)){s.index++,localStorage.setItem("history",JSON.stringify(s));var c=s.items[s.index];H(c.currentAnnotation),j(c.annotations)}}},un=function(){var r=localStorage.getItem("history");if(!!r){var s=JSON.parse(r);if(!(!s||!s.index)&&!(s.index<=0)){s.index--,localStorage.setItem("history",JSON.stringify(s));var c=s.items[s.index];H(c.currentAnnotation),j(c.annotations)}}},X=function(r){for(var s=[],c=0;c<D.length;c++)D[c].annotationId==r.annotationId?s.push(r):s.push(D[c]);A(r),j(s)},tn=(0,E.Z)({currentLabel:N,brushSize:z,currentTool:e,annotations:D,currentAnnotation:T,onAnnotationAdd:function(r){var s=D.concat([r]);j(s),T||A(r)},onAnnotationModify:X,onMouseUp:function(){F(D,T)}}),en=(0,i.Z)({currentLabel:N,brushSize:z,currentTool:e,annotations:D,currentAnnotation:T,onAnnotationAdd:function(r){var s=D.concat([r]);j(s),T||A(r)},onAnnotationModify:X,onMouseUp:function(){F(D,T)}}),$=e=="polygon"?en:tn;return(0,o.jsxs)(W.Z,{className:h().segment,children:[(0,o.jsxs)(x.Z,{children:[(0,o.jsx)(m.Z,{imgSrc:"./pics/buttons/intelligent_interaction.png",children:"Intelligent Interaction"}),(0,o.jsx)(b.Z,{active:e=="polygon",onClick:function(){a("polygon"),A(void 0)},children:"Polygon"}),(0,o.jsx)(t.Z,{size:z,active:e=="brush",onClick:function(){e!="rubber"&&e!="brush"&&A(void 0),a("brush")},onChange:function(r){w(r)},children:"Brush"}),(0,o.jsx)(t.Z,{size:z,active:e=="rubber",onClick:function(){e!="rubber"&&e!="brush"&&A(void 0),a("rubber")},onChange:function(r){w(r)},imgSrc:"./pics/buttons/rubber.png",children:"Rubber"}),(0,o.jsx)(m.Z,{imgSrc:"./pics/buttons/zoom_in.png",onClick:function(){nn(J+.1)},children:"Zoom in"}),(0,o.jsx)(m.Z,{imgSrc:"./pics/buttons/zoom_out.png",onClick:function(){nn(J-.1)},children:"Zoom out"}),(0,o.jsx)(m.Z,{imgSrc:"./pics/buttons/save.png",children:"Save"}),(0,o.jsx)(m.Z,{imgSrc:"./pics/buttons/move.png",onClick:function(){a("mover")},children:"Move"}),(0,o.jsx)(m.Z,{imgSrc:"./pics/buttons/export.png",children:"Export"}),(0,o.jsx)(m.Z,{imgSrc:"./pics/buttons/data_division.png",children:"Divide Data"}),(0,o.jsx)(m.Z,{imgSrc:"./pics/buttons/prev.png",onClick:function(){un()},children:"Undo"}),(0,o.jsx)(m.Z,{imgSrc:"./pics/buttons/next.png",onClick:function(){ln()},children:"Redo"}),(0,o.jsx)(m.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:"Clear Mark"})]}),(0,o.jsxs)("div",{className:h().mainStage,children:[(0,o.jsx)("div",{className:h().draw,children:(0,o.jsx)(g.Z,{scale:J,annotations:D,currentTool:e,currentAnnotation:T,setCurrentAnnotation:A,onAnnotationModify:X,onAnnotationModifyComplete:function(){F(D,T)},onMouseDown:$.onMouseDown,onMouseMove:$.onMouseMove,onMouseUp:$.onMouseUp,createPolygonFunc:en.createElementsFunc,createBrushFunc:tn.createElementsFunc})}),(0,o.jsx)("div",{className:h().pblock,children:(0,o.jsx)("div",{className:h().progress,children:(0,o.jsx)(U.Z,{percent:50,status:"active"})})})]}),(0,o.jsxs)(x.Z,{disLoc:"right",children:[(0,o.jsx)(u.Z,{imgSrc:"./pics/buttons/threshold.png",disLoc:"left",children:"Segment Threshold"}),(0,o.jsx)(u.Z,{imgSrc:"./pics/buttons/alpha.png",disLoc:"left",children:"Diaphaneity"}),(0,o.jsx)(u.Z,{imgSrc:"./pics/buttons/radius.png",disLoc:"left",children:"Visual Radius"})]}),(0,o.jsxs)("div",{className:h().rightSideBar,children:[(0,o.jsx)("div",{className:h().determinOutline,children:(0,o.jsx)(R.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",block:!0,onClick:function(){A(void 0)},children:"Determine Outline"})}),(0,o.jsx)(d.Z,{selectedLabel:N,onLabelSelect:function(r){k(r),A(void 0)},onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}}),(0,o.jsx)(P.Z,{selectedAnnotation:T,annotations:D,onAnnotationSelect:function(r){r!=null&&r.delete||A(r)},onAnnotationAdd:function(){},onAnnotationModify:function(){},onAnnotationDelete:function(r){j(D.filter(function(s){return s.annotationId!=r.annotationId})),A(void 0)}})]})]})};B.default=l}}]);
