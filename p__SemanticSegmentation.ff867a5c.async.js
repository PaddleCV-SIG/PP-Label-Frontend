(self.webpackChunkpp_labeling_frontend=self.webpackChunkpp_labeling_frontend||[]).push([[540],{54777:function(L){L.exports={segment:"segment___1YMcl",mainStage:"mainStage___2otee",rightSideBar:"rightSideBar___2X7jK",determinOutline:"determinOutline___2ls57"}},47e3:function(L,D,i){"use strict";i.r(D),i.d(D,{default:function(){return $}});var on=i(57663),N=i(71577),S=i(2824),b=i(67294),E=i(54777),M=i.n(E),X=i(8088),s=i(61541),Y=i(44434),B=i(58967),F=i(5041),K=i(57436),k=i(14836),n=i(85893),H=function(e){return(0,n.jsx)(s.Z,{active:e.active,imgSrc:e.imgSrc||"./pics/buttons/polygon.png",onClick:e.onClick,children:e.children})},W=H,G=i(43801),J=i(91220),O=i(65031);function Q(o){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}function z(o,e,u){if(console.log(o,e),!(!o||!e)){var a=Q(o);if(!!a){var r=void 0,c=[];return e.forEach(function(d){if(!r){r=d;return}c.push((0,n.jsx)(O.Cd,{x:r,y:d,radius:5,fill:o})),r=void 0}),console.log(a),console.log(c),{color:o,points:e,element:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(O.x1,{stroke:o,strokeWidth:2,globalCompositeOperation:"source-over",lineCap:"round",points:e,tension:.01,closed:u,fill:"rgba(".concat(a.r,", ").concat(a.g,", ").concat(a.b,", 0.5)")}),c]})}}}}function V(o){var e=0,u=(0,J.Z)(o),a;try{for(u.s();!(a=u.n()).done;){var r=a.value;!r||r.annotationId>e&&(e=r.annotationId)}}catch(c){u.e(c)}finally{u.f()}return e}function p(o){console.log("drawPolygon");var e=function(r){if(console.log(o.currentAnnotation),o.currentAnnotation){var v,g,x,j=((v=o.currentAnnotation)===null||v===void 0?void 0:v.lines)||[],m=z((g=o.currentLabel)===null||g===void 0?void 0:g.color,(x=j[0])===null||x===void 0?void 0:x.points.concat([r.evt.offsetX,r.evt.offsetY]));if(!m)return;var C={annotationId:o.currentAnnotation.annotationId,label:o.currentAnnotation.label,lines:[m]};o.onAnnotationModify(C),console.log(C)}else{var c,d=z((c=o.currentLabel)===null||c===void 0?void 0:c.color,[r.evt.offsetX,r.evt.offsetY]);if(!d)return;o.onAnnotationAdd({annotationId:V(o.annotations)+1,label:o.currentLabel,lines:[d]})}},u=function(){};return{onMouseDown:e,onMouseMove:function(){},onMouseUp:u}}var w=function(){var e=(0,b.useState)(void 0),u=(0,S.Z)(e,2),a=u[0],r=u[1],c=(0,b.useState)({color:"",name:""}),d=(0,S.Z)(c,2),v=d[0],g=d[1],x=(0,b.useState)(),j=(0,S.Z)(x,2),m=j[0],C=j[1],q=(0,b.useState)([]),T=(0,S.Z)(q,2),f=T[0],P=T[1],_=(0,b.useState)(10),U=(0,S.Z)(_,2),y=U[0],R=U[1],h=function(t){C(t),t!=null&&t.label&&g(t.label)},nn=function(t){for(var A=[],Z=0;Z<f.length;Z++)f[Z].annotationId==t.annotationId?A.push(t):A.push(f[Z]);h(t),P(A)},tn=a=="brush"?G.Z:p,I=tn({currentLabel:v,brushSize:y,currentTool:a,annotations:f,currentAnnotation:m,onAnnotationAdd:function(t){P(f.concat([t])),m||h(t)},onAnnotationModify:nn});return(0,n.jsxs)(X.Z,{className:M().segment,children:[(0,n.jsxs)(Y.Z,{children:[(0,n.jsx)(s.Z,{imgSrc:"./pics/buttons/intelligent_interaction.png",children:"Intelligent Interaction"}),(0,n.jsx)(W,{active:a=="polygon",onClick:function(){r("polygon")},children:"Polygon"}),(0,n.jsx)(B.Z,{size:y,active:a=="brush",onClick:function(){r("brush")},onChange:function(t){R(t)},children:"Brush"}),(0,n.jsx)(B.Z,{size:y,active:a=="rubber",onClick:function(){r("rubber")},onChange:function(t){R(t)},imgSrc:"./pics/buttons/rubber.png",children:"Rubber"}),(0,n.jsx)(s.Z,{imgSrc:"./pics/buttons/zoom_in.png",children:"Zoom in"}),(0,n.jsx)(s.Z,{imgSrc:"./pics/buttons/zoom_out.png",children:"Zoom out"}),(0,n.jsx)(s.Z,{imgSrc:"./pics/buttons/save.png",children:"Save"}),(0,n.jsx)(s.Z,{imgSrc:"./pics/buttons/move.png",children:"Move"}),(0,n.jsx)(s.Z,{imgSrc:"./pics/buttons/export.png",children:"Export"}),(0,n.jsx)(s.Z,{imgSrc:"./pics/buttons/data_division.png",children:"Divide Data"}),(0,n.jsx)(s.Z,{imgSrc:"./pics/buttons/prev.png",children:"Undo"}),(0,n.jsx)(s.Z,{imgSrc:"./pics/buttons/next.png",children:"Redo"}),(0,n.jsx)(s.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:"Clear Mark"})]}),(0,n.jsx)("div",{className:M().mainStage,children:(0,n.jsx)(K.Z,{annotations:f,onMouseDown:I.onMouseDown,onMouseMove:I.onMouseMove,onMouseUp:I.onMouseUp})}),(0,n.jsxs)("div",{className:M().rightSideBar,children:[(0,n.jsx)("div",{className:M().determinOutline,children:(0,n.jsx)(N.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",block:!0,onClick:function(){h(void 0)},children:"Determine Outline"})}),(0,n.jsx)(F.Z,{selectedLabel:v,onLabelSelect:function(t){g(t),h(void 0)},onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}}),(0,n.jsx)(k.Z,{selectedAnnotation:m,annotations:f,onAnnotationSelect:function(t){t!=null&&t.delete||h(t)},onAnnotationAdd:function(){},onAnnotationModify:function(){},onAnnotationDelete:function(t){P(f.filter(function(A){return A.annotationId!=t.annotationId})),h(void 0)}})]})]})},$=w}}]);
