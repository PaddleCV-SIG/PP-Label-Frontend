(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[267],{85024:function(M){M.exports={listItem:"listItem___u4Q82",eye:"eye___BwaRm",delete:"delete___31JB_",roundBall:"roundBall___23A7l",popover:"popover___1BNET",annotationId:"annotationId___zAzX4",labelName:"labelName___2ohxn",listItemActive:"listItemActive___2QnA3"}},56159:function(M){M.exports={labelList:"labelList___v7C6K",listHeader:"listHeader___1aY8R",eye:"eye___2MKbp",roundBall:"roundBall___187XH"}},71212:function(M){M.exports={key:"key___HbxlB",mainStage:"mainStage___2kPY7",draw:"draw___1d3zf",pblock:"pblock___13HlD",progress:"progress___1iogf",rightSideBar:"rightSideBar___2SKvQ",finished:"finished___nNiaq"}},14836:function(M,B,n){"use strict";n.d(B,{Z:function(){return E}});var w=n(54421),D=n(38272),q=n(57663),N=n(71577),m=n(67294),v=n(56159),O=n.n(v),f=n(49111),R=n(19650),l=n(2824),b=n(11849),K=n(85024),g=n.n(K),U=n(63097),r=n(85893),o=function(s){var d=(0,b.Z)({},s.annotation),y=(0,m.useState)(d.invisible),p=(0,l.Z)(y,2),h=p[0],_=p[1],P=(0,m.useState)(0),j=(0,l.Z)(P,2),Z=j[0],A=j[1];(0,m.useEffect)(function(){_(s.annotation.invisible)},[s.annotation.invisible]);var L=(0,r.jsxs)(D.ZP.Item,{className:"".concat(g().listItem," ").concat(s.active?g().listItemActive:""),unselectable:"on",onClick:function(){s.onClick(d)},children:[(0,r.jsxs)(R.Z,{align:"center",size:5,children:[(0,r.jsx)("a",{className:g().eye,style:{backgroundImage:h?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(C){C.stopPropagation(),_(!h),s.onAnnotationModify(d)}})," ",(0,r.jsx)("span",{className:g().annotationId,children:d.frontendId}),(0,r.jsx)("span",{className:g().labelName,children:d.label.name}),(0,r.jsx)(U.Z,{color:d.label.color})]}),(0,r.jsx)("a",{className:g().delete,onClick:function(C){C.stopPropagation();var c=new Date().getTime();c-Z<300||(A(c),s.onAnnotationDelete(d))}})]});return L},x=o,W=n(48971),Y=function(s){var d=(0,W.YB)(),y=d.formatMessage({id:"component.PPAnnotationList.annotationList"}),p=d.formatMessage({id:"component.PPAnnotationList.addAnnotation"});return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(D.ZP,{className:O().labelList,size:"large",header:(0,r.jsx)("div",{className:O().listHeader,children:y}),bordered:!0,dataSource:s.annotations,renderItem:function(_){var P;return(0,r.jsx)(x,{onClick:s.onAnnotationSelect,annotation:_,active:_.frontendId==((P=s.currAnnotation)===null||P===void 0?void 0:P.frontendId),onAnnotationDelete:s.onAnnotationDelete,onAnnotationModify:s.onAnnotationModify})},footer:(0,r.jsx)("div",{children:(0,r.jsx)(N.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){s.onAnnotationAdd()},block:!0,children:p})})})})},E=Y},82881:function(M,B,n){"use strict";n.r(B);var w=n(57663),D=n(71577),q=n(34669),N=n(54458),m=n(2824),v=n(67294),O=n(71212),f=n.n(O),R=n(8088),l=n(61541),b=n(44434),K=n(5041),g=n(57436),U=n(14836),r=n(48971),o=n(85893),x=40,W=function(){var E,k=(0,v.useState)(void 0),s=(0,m.Z)(k,2),d=s[0],y=s[1],p=(0,v.useState)({color:"",name:""}),h=(0,m.Z)(p,2),_=h[0],P=h[1],j=(0,v.useState)(),Z=(0,m.Z)(j,2),A=Z[0],L=Z[1],T=(0,v.useState)([]),C=(0,m.Z)(T,2),c=C[0],I=C[1],nn=(0,v.useState)(1),Q=(0,m.Z)(nn,2),H=Q[0],z=Q[1],X=function(t){t||z(1),t<.1||t>3?z(1):z(t)},S=function(t){L(t),t!=null&&t.label&&P(t.label)};(0,v.useEffect)(function(){localStorage.removeItem("history"),J([])},[]);function J(a,t){var e=localStorage.getItem("history"),i=e?JSON.parse(e):{index:-1,items:[]},V={currentAnnotation:t,annotations:a};if(JSON.stringify(i.items[i.index])!=JSON.stringify(V)){var _n=i.index>x?i.index-x:0,Pn=i.items.splice(_n,i.index==0?1:i.index+1);i.items=Pn.concat([V]),i.index<=x?i.index++:i.index=x+1,localStorage.setItem("history",JSON.stringify(i))}}var tn=function(){var t=localStorage.getItem("history");if(!!t){var e=JSON.parse(t);if(!!e&&!(e.index>=e.items.length-1)){e.index++,localStorage.setItem("history",JSON.stringify(e));var i=e.items[e.index];L(i.currentAnnotation),I(i.annotations)}}},on=function(){var t=localStorage.getItem("history");if(!!t){var e=JSON.parse(t);if(!(!e||!e.index)&&!(e.index<=0)){e.index--,localStorage.setItem("history",JSON.stringify(e));var i=e.items[e.index];L(i.currentAnnotation),I(i.annotations)}}},$=function(t){for(var e=[],i=0;i<c.length;i++)c[i].annotationId==t.annotationId?e.push(t):e.push(c[i]);S(t),I(e)},G=drawPolygon({currentLabel:_,currentTool:d,annotations:c,currentAnnotation:A,onAnnotationAdd:function(t){var e=c.concat([t]);I(e),A||S(t)},onAnnotationModify:$,onMouseUp:function(){J(c,A)}}),F=G,u=(0,r.YB)(),en=u.formatMessage({id:"pages.toolBar.polygon"}),an=u.formatMessage({id:"pages.toolBar.zoomIn"}),sn=u.formatMessage({id:"pages.toolBar.zoomOut"}),rn=u.formatMessage({id:"pages.toolBar.move"}),ln=u.formatMessage({id:"pages.toolBar.unDo"}),dn=u.formatMessage({id:"pages.toolBar.reDo"}),cn=u.formatMessage({id:"pages.toolBar.save"}),un=u.formatMessage({id:"pages.toolBar.edit"}),mn=u.formatMessage({id:"pages.toolBar.clearMark"}),vn=u.formatMessage({id:"pages.toolBar.determineOutline"}),fn=u.formatMessage({id:"pages.toolBar.divideData"}),gn=u.formatMessage({id:"pages.toolBar.export"});return(0,o.jsxs)(R.Z,{className:f().key,children:[(0,o.jsxs)(b.Z,{children:[(0,o.jsx)(l.Z,{imgSrc:"./pics/buttons/polygon.png",active:d=="polygon",onClick:function(){y("polygon"),S(void 0)},children:en}),(0,o.jsx)(l.Z,{imgSrc:"./pics/buttons/edit.png",children:un}),(0,o.jsx)(l.Z,{imgSrc:"./pics/buttons/zoom_in.png",onClick:function(){X(H+.1)},children:an}),(0,o.jsx)(l.Z,{imgSrc:"./pics/buttons/zoom_out.png",onClick:function(){X(H-.1)},children:sn}),(0,o.jsx)(l.Z,{imgSrc:"./pics/buttons/save.png",children:cn}),(0,o.jsx)(l.Z,{imgSrc:"./pics/buttons/move.png",onClick:function(){y("mover")},children:rn}),(0,o.jsx)(l.Z,{imgSrc:"./pics/buttons/prev.png",onClick:function(){on()},children:ln}),(0,o.jsx)(l.Z,{imgSrc:"./pics/buttons/next.png",onClick:function(){tn()},children:dn}),(0,o.jsx)(l.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:mn})]}),(0,o.jsxs)("div",{id:"dr",className:f().mainStage,children:[(0,o.jsx)("div",{className:f().draw,children:(0,o.jsx)(g.Z,{width:(E=document.getElementById("dr"))===null||E===void 0?void 0:E.clientWidth,scale:H,annotations:c,currentTool:d,currentAnnotation:A,setCurrentAnnotation:S,onAnnotationModify:$,onAnnotationModifyComplete:function(){J(c,A)},onMouseDown:F.onMouseDown,onMouseMove:F.onMouseMove,onMouseUp:F.onMouseUp,createPolygonFunc:G.createElementsFunc})}),(0,o.jsx)("div",{className:f().pblock,children:(0,o.jsx)("div",{className:f().progress,children:(0,o.jsx)(N.Z,{percent:50,status:"active"})})})]}),(0,o.jsxs)(b.Z,{disLoc:"right",children:[(0,o.jsx)(l.Z,{imgSrc:"./pics/buttons/data_division.png",children:fn}),(0,o.jsx)(l.Z,{imgSrc:"./pics/buttons/export.png",children:gn})]}),(0,o.jsxs)("div",{className:f().rightSideBar,children:[(0,o.jsx)("div",{className:f().finished,children:(0,o.jsx)(D.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",block:!0,onClick:function(){S(void 0)},children:vn})}),(0,o.jsx)(K.Z,{selectedLabel:_,onLabelSelect:function(t){P(t),S(void 0)},onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}}),(0,o.jsx)(U.Z,{selectedAnnotation:A,annotations:c,onAnnotationSelect:function(t){t!=null&&t.delete||S(t)},onAnnotationAdd:function(){},onAnnotationModify:function(){},onAnnotationDelete:function(t){I(c.filter(function(e){return e.annotationId!=t.annotationId})),S(void 0)}})]})]})};B.default=W}}]);
