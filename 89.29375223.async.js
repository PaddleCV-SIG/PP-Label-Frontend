(self.webpackChunkpp_labeling_frontend=self.webpackChunkpp_labeling_frontend||[]).push([[89],{57560:function(L){L.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___147XP",toolBarButtonContainer:"toolBarButtonContainer___ZEvhK",toolBarButton:"toolBarButton___1s2Rh",buttonText:"buttonText___3NTCv",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___2Utx8",popover:"popover___3PRoi"}},26647:function(L){L.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1FTWb",toolBarButtonContainer:"toolBarButtonContainer___1Vahn",toolBarButton:"toolBarButton___3mR2H",buttonText:"buttonText___Y0WDm",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3lRZ8",popover:"popover___3zzu2",popoverLeft:"popoverLeft___15lGe"}},54777:function(L){L.exports={segment:"segment___1YMcl",mainStage:"mainStage___2otee",draw:"draw___equn4",pblock:"pblock___2bT7z",progress:"progress___1porz",rightSideBar:"rightSideBar___2X7jK",determinOutline:"determinOutline___2ls57"}},43801:function(L,B,n){"use strict";n.d(B,{Z:function(){return x}});var Z=n(11849),y=n(2824),K=n(91220),R=n(67294),A=n(65031),P=n(85893);function T(t,u,c,f){if(!(!t||!u||!c||!f))return{width:t,color:u,points:c,tool:f}}function E(t){if(!t||!t.lines)return[(0,P.jsx)(P.Fragment,{})];var u=[],c=(0,K.Z)(t.lines),f;try{for(c.s();!(f=c.n()).done;){var s=f.value;!s.width||!s.color||!s.points||!s.tool||u.push((0,P.jsx)(A.x1,{stroke:s.color,strokeWidth:s.width,globalCompositeOperation:s.tool==="brush"?"source-over":"destination-out",lineCap:"round",points:s.points,tension:.01}))}}catch(S){c.e(S)}finally{c.f()}return u}function U(t,u){return t=="rubber"||u==2?"rubber":"brush"}function m(t){var u=0,c=(0,K.Z)(t),f;try{for(c.s();!(f=c.n()).done;){var s=f.value;!s||s.annotationId>u&&(u=s.annotationId)}}catch(S){c.e(S)}finally{c.f()}return u}function x(t){var u=(0,R.useState)(),c=(0,y.Z)(u,2),f=c[0],s=c[1],S=function(v,M){var O;if(console.log(t.currentTool),!(t.currentTool!="brush"&&t.currentTool!="rubber")){var C=v.evt.offsetX/M,g=v.evt.offsetY/M,e=U(t.currentTool,v.evt.button),a=T(t.brushSize||10,(O=t.currentLabel)===null||O===void 0?void 0:O.color,[C,g,C,g],e);if(!!a)if(s(e),t.currentAnnotation){var I,p={tool:"brush",annotationId:t.currentAnnotation.annotationId,label:t.currentAnnotation.label,lines:(I=t.currentAnnotation.lines)===null||I===void 0?void 0:I.concat([a])};t.onAnnotationModify(p)}else{if(e=="rubber")return;t.onAnnotationAdd({tool:"brush",annotationId:m(t.annotations)+1,label:t.currentLabel,lines:[a]})}}},h=function(v,M){var O;if(!(!f||!t.currentAnnotation)){var C=v.evt.offsetX/M,g=v.evt.offsetY/M,e=[C,g],a=[];(O=t.currentAnnotation)!==null&&O!==void 0&&O.lines&&(e=t.currentAnnotation.lines[t.currentAnnotation.lines.length-1].points.concat(e),a=t.currentAnnotation.lines);var I=T(t.brushSize||10,t.currentLabel.color,e,f);!I||(a.pop(),a.push(I),t.onAnnotationModify((0,Z.Z)((0,Z.Z)({},t.currentAnnotation),{},{lines:a})))}},l=function(){t.currentTool!="brush"&&t.currentTool!="rubber"||(s(void 0),t.onMouseUp())};return{onMouseDown:S,onMouseMove:h,onMouseUp:l,createElementsFunc:E}}},58967:function(L,B,n){"use strict";var Z=n(20136),y=n(55241),K=n(77883),R=n(70507),A=n(57663),P=n(71577),T=n(2824),E=n(67294),U=n(61541),m=n(57560),x=n.n(m),t=n(85893),u=1,c=50,f=10;function s(h){return h?h<=u?u:h>=c?c:h:f}var S=function(l){var r=(0,E.useState)(s(l.size)),v=(0,T.Z)(r,2),M=v[0],O=v[1],C=function(e){O(s(e))};return(0,E.useEffect)(function(){C(l.size)},[l.size]),(0,t.jsxs)(y.Z,{overlayClassName:x().popover,placement:"right",content:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(P.Z,{type:"text",onClick:function(){var e,a=s(M-1);C(a),(e=l.onChange)===null||e===void 0||e.call(0,a)},children:"-"}),(0,t.jsx)(R.Z,{min:u,max:c,value:M,onChange:function(e){var a;(a=l.onChange)===null||a===void 0||a.call(0,e)},controls:!1,style:{textAlign:"center"}}),(0,t.jsx)(P.Z,{type:"text",onClick:function(){var e,a=s(M+1);C(a),(e=l.onChange)===null||e===void 0||e.call(0,a)},children:"+"})]}),trigger:l.active?"hover":"click",children:[" ",(0,t.jsx)(U.Z,{active:l.active,imgSrc:l.imgSrc||"./pics/buttons/brush.png",onClick:l.onClick,children:l.children||"Brush"})]})};B.Z=S},27992:function(L,B,n){"use strict";var Z=n(20136),y=n(55241),K=n(77883),R=n(70507),A=n(57663),P=n(71577),T=n(2824),E=n(67294),U=n(61541),m=n(26647),x=n.n(m),t=n(85893),u=1,c=100,f=10;function s(h){return h?h<=u?u:h>=c?c:h:f}var S=function(l){var r=(0,E.useState)(s(l.size)),v=(0,T.Z)(r,2),M=v[0],O=v[1],C=function(e){O(s(e))};return(0,E.useEffect)(function(){C(l.size)},[l.size]),(0,t.jsxs)(y.Z,{overlayClassName:"".concat(x().popover," ").concat(l.disLoc=="left"?x().popoverLeft:""),placement:l.disLoc||"right",content:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(P.Z,{type:"text",onClick:function(){var e,a=s(M-1);C(a),(e=l.onChange)===null||e===void 0||e.call(0,a)},children:"-"}),(0,t.jsx)(R.Z,{min:u,max:c,value:M,onChange:function(e){var a;(a=l.onChange)===null||a===void 0||a.call(0,e)},controls:!1,style:{textAlign:"center"}}),(0,t.jsx)(P.Z,{type:"text",onClick:function(){var e,a=s(M+1);C(a),(e=l.onChange)===null||e===void 0||e.call(0,a)},children:"+"})]}),trigger:"hover",children:[" ",(0,t.jsx)(U.Z,{imgSrc:l.imgSrc,onClick:l.onClick,children:l.children})]})};B.Z=S},86089:function(L,B,n){"use strict";n.r(B),n.d(B,{MOST_HISTORY_STEPS:function(){return v}});var Z=n(57663),y=n(71577),K=n(34669),R=n(54458),A=n(2824),P=n(67294),T=n(54777),E=n.n(T),U=n(8088),m=n(61541),x=n(44434),t=n(58967),u=n(27992),c=n(5041),f=n(57436),s=n(14836),S=n(29919),h=n(43801),l=n(13931),r=n(85893),v=40,M=function(){var C=(0,P.useState)(void 0),g=(0,A.Z)(C,2),e=g[0],a=g[1],I=(0,P.useState)({color:"",name:""}),p=(0,A.Z)(I,2),F=p[0],$=p[1],rn=(0,P.useState)(),k=(0,A.Z)(rn,2),W=k[0],N=k[1],an=(0,P.useState)([]),V=(0,A.Z)(an,2),D=V[0],j=V[1],_n=(0,P.useState)(10),G=(0,A.Z)(_n,2),z=G[0],Q=G[1],sn=(0,P.useState)(1),w=(0,A.Z)(sn,2),H=w[0],J=w[1],q=function(o){o||J(1),o<.1||o>3?J(1):J(o)},b=function(o){N(o),o!=null&&o.label&&$(o.label)};(0,P.useEffect)(function(){localStorage.removeItem("history"),Y([])},[]);function Y(i,o){var _=localStorage.getItem("history"),d=_?JSON.parse(_):{index:-1,items:[]},on={currentAnnotation:o,annotations:i};if(JSON.stringify(d.items[d.index])!=JSON.stringify(on)){var cn=d.index>v?d.index-v:0,dn=d.items.splice(cn,d.index==0?1:d.index+1);d.items=dn.concat([on]),d.index<=v?d.index++:d.index=v+1,localStorage.setItem("history",JSON.stringify(d))}}var ln=function(){var o=localStorage.getItem("history");if(!!o){var _=JSON.parse(o);if(!!_&&!(_.index>=_.items.length-1)){_.index++,localStorage.setItem("history",JSON.stringify(_));var d=_.items[_.index];N(d.currentAnnotation),j(d.annotations)}}},un=function(){var o=localStorage.getItem("history");if(!!o){var _=JSON.parse(o);if(!(!_||!_.index)&&!(_.index<=0)){_.index--,localStorage.setItem("history",JSON.stringify(_));var d=_.items[_.index];N(d.currentAnnotation),j(d.annotations)}}},nn=function(o){for(var _=[],d=0;d<D.length;d++)D[d].annotationId==o.annotationId?_.push(o):_.push(D[d]);b(o),j(_)},tn=(0,h.Z)({currentLabel:F,brushSize:z,currentTool:e,annotations:D,currentAnnotation:W,onAnnotationAdd:function(o){var _=D.concat([o]);j(_),W||b(o)},onAnnotationModify:nn,onMouseUp:function(){Y(D,W)}}),en=(0,l.Z)({currentLabel:F,brushSize:z,currentTool:e,annotations:D,currentAnnotation:W,onAnnotationAdd:function(o){var _=D.concat([o]);j(_),W||b(o)},onAnnotationModify:nn,onMouseUp:function(){Y(D,W)}}),X=e=="polygon"?en:tn;return(0,r.jsxs)(U.Z,{className:E().segment,children:[(0,r.jsxs)(x.Z,{children:[(0,r.jsx)(m.Z,{imgSrc:"./pics/buttons/intelligent_interaction.png",children:"Intelligent Interaction"}),(0,r.jsx)(S.Z,{active:e=="polygon",onClick:function(){a("polygon"),b(void 0)},children:"Polygon"}),(0,r.jsx)(t.Z,{size:z,active:e=="brush",onClick:function(){e!="rubber"&&e!="brush"&&b(void 0),a("brush")},onChange:function(o){Q(o)},children:"Brush"}),(0,r.jsx)(t.Z,{size:z,active:e=="rubber",onClick:function(){e!="rubber"&&e!="brush"&&b(void 0),a("rubber")},onChange:function(o){Q(o)},imgSrc:"./pics/buttons/rubber.png",children:"Rubber"}),(0,r.jsx)(m.Z,{imgSrc:"./pics/buttons/zoom_in.png",onClick:function(){q(H+.1)},children:"Zoom in"}),(0,r.jsx)(m.Z,{imgSrc:"./pics/buttons/zoom_out.png",onClick:function(){q(H-.1)},children:"Zoom out"}),(0,r.jsx)(m.Z,{imgSrc:"./pics/buttons/save.png",children:"Save"}),(0,r.jsx)(m.Z,{imgSrc:"./pics/buttons/move.png",children:"Move"}),(0,r.jsx)(m.Z,{imgSrc:"./pics/buttons/export.png",children:"Export"}),(0,r.jsx)(m.Z,{imgSrc:"./pics/buttons/data_division.png",children:"Divide Data"}),(0,r.jsx)(m.Z,{imgSrc:"./pics/buttons/prev.png",onClick:function(){un()},children:"Undo"}),(0,r.jsx)(m.Z,{imgSrc:"./pics/buttons/next.png",onClick:function(){ln()},children:"Redo"}),(0,r.jsx)(m.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:"Clear Mark"})]}),(0,r.jsxs)("div",{className:E().mainStage,children:[(0,r.jsx)("div",{className:E().draw,children:(0,r.jsx)(f.Z,{scale:H,annotations:D,currentTool:e,onMouseDown:X.onMouseDown,onMouseMove:X.onMouseMove,onMouseUp:X.onMouseUp,createPolygonFunc:en.createElementsFunc,createBrushFunc:tn.createElementsFunc})}),(0,r.jsx)("div",{className:E().pblock,children:(0,r.jsx)("div",{className:E().progress,children:(0,r.jsx)(R.Z,{percent:50,status:"active"})})})]}),(0,r.jsxs)(x.Z,{disLoc:"right",children:[(0,r.jsx)(u.Z,{imgSrc:"./pics/buttons/threshold.png",disLoc:"left",children:"Segment Threshold"}),(0,r.jsx)(u.Z,{imgSrc:"./pics/buttons/alpha.png",disLoc:"left",children:"Diaphaneity"}),(0,r.jsx)(u.Z,{imgSrc:"./pics/buttons/radius.png",disLoc:"left",children:"Visual Radius"})]}),(0,r.jsxs)("div",{className:E().rightSideBar,children:[(0,r.jsx)("div",{className:E().determinOutline,children:(0,r.jsx)(y.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",block:!0,onClick:function(){b(void 0)},children:"Determine Outline"})}),(0,r.jsx)(c.Z,{selectedLabel:F,onLabelSelect:function(o){$(o),b(void 0)},onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}}),(0,r.jsx)(s.Z,{selectedAnnotation:W,annotations:D,onAnnotationSelect:function(o){o!=null&&o.delete||b(o)},onAnnotationAdd:function(){},onAnnotationModify:function(){},onAnnotationDelete:function(o){j(D.filter(function(_){return _.annotationId!=o.annotationId})),b(void 0)}})]})]})};B.default=M}}]);
