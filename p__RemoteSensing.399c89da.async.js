(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[333],{26647:function(f){f.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1FTWb",toolBarButtonContainer:"toolBarButtonContainer___1Vahn",toolBarButton:"toolBarButton___3mR2H",buttonText:"buttonText___Y0WDm",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3lRZ8",popover:"popover___3zzu2",slider:"slider___ALra-",popoverLeft:"popoverLeft___15lGe"}},52822:function(f){f.exports={roundBall:"roundBall___1pqu1",popover:"popover___1-PR6"}},32495:function(f){f.exports={listItem:"listItem___1MXXF",eye:"eye___3nddM",delete:"delete___y9u-D",roundBall:"roundBall___DMczd",popover:"popover___E0HLD",annotationId:"annotationId___1ks8N",labelName:"labelName___130ie",listItemActive:"listItemActive___1rNB-"}},38670:function(f){f.exports={labelList:"labelList___3uLRO",listHeader:"listHeader___1ZPcO",eye:"eye___2yUvw",roundBall:"roundBall___1xKCU"}},5882:function(f){f.exports={listItem:"listItem___vtDXn",eye:"eye___AsLBS",roundBall:"roundBall___1J_R3",popover:"popover___1x-2R",delete:"delete___WHPf2",listItemActive:"listItemActive___3FRb7"}},56131:function(f){f.exports={labelList:"labelList___jvD05",listHeader:"listHeader___UM5UF",eye:"eye___II3Po",roundBall:"roundBall___j752J"}},78677:function(f){f.exports={container:"container___G0FNe"}},80961:function(f){f.exports={leftToolbar:"leftToolbar___1xi4t",rightToolbar:"rightToolbar___3dNSB"}},82499:function(f){f.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1SHWL",toolBarButtonContainer:"toolBarButtonContainer___1jKUz",toolBarButton:"toolBarButton___3Ouq1",buttonText:"buttonText___10ls7",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AA28"}},72869:function(f){f.exports={map:"map___92VPN",customControlIcon:"customControlIcon___3Ki2y"}},20474:function(f){f.exports={RSPop1:"RSPop1___vz5Me",RSPop2:"RSPop2___34pQA"}},87610:function(f){f.exports={RSPop1:"RSPop1___1iBEf",RSPop2:"RSPop2___1W841",RSPop3:"RSPop3___1Whcp"}},55252:function(f){f.exports={RSPop1:"RSPop1___17x8k",RSPop2:"RSPop2___27kK5"}},75513:function(f){f.exports={segment:"segment___3WmPw",mainStage:"mainStage___2kT1s",draw:"draw___Ff0QW",pblock:"pblock___3sGxC",progress:"progress___KQyBx",rightSideBar:"rightSideBar___11FX3",determinOutline:"determinOutline___1g1YI"}},57719:function(){},27992:function(f,L,e){"use strict";var X=e(20136),g=e(55241),y=e(13062),h=e(71230),D=e(77883),n=e(70507),B=e(89032),c=e(15746),E=e(66126),m=e(75454),u=e(2824),P=e(67294),b=e(61541),v=e(26647),r=e.n(v),x=e(85893),W=0,O=100,ae=10,ie=function(C){var R=(0,P.useState)(d(C.size)),K=(0,u.Z)(R,2),T=K[0],l=K[1];function i(M){l(d(M))}var U=C.step?C.step:10,s=C.minSize==null?W:C.minSize,S=C.maxSize==null?O:C.maxSize;function d(M){return M==null?ae:M<=s?s:M>=S?S:M}return(0,P.useEffect)(function(){i(C.size)},[C.size]),(0,x.jsxs)(g.Z,{overlayClassName:"".concat(r().popover," ").concat(C.disLoc=="left"?r().popoverLeft:""),placement:C.disLoc||"right",content:(0,x.jsxs)(h.Z,{children:[(0,x.jsx)(c.Z,{span:16,children:(0,x.jsx)(m.Z,{className:r().slider,value:T,max:S,min:s,onChange:function(A){var Z;(Z=C.onChange)===null||Z===void 0||Z.call(0,A)},tooltipVisible:!1})}),(0,x.jsx)(c.Z,{span:8,children:(0,x.jsx)(n.Z,{min:s,max:S,value:T,onChange:function(A){var Z;(Z=C.onChange)===null||Z===void 0||Z.call(0,A)},step:U})})]}),trigger:"hover",children:[" ",(0,x.jsx)(b.Z,{imgSrc:C.imgSrc||"",onClick:C.onClick,active:C.active,children:C.children})]})};L.Z=ie},63097:function(f,L,e){"use strict";var X=e(20136),g=e(55241),y=e(2824),h=e(67294),D=e(52822),n=e.n(D),B=e(63144),c=e(85893),E=function(u){var P=(0,h.useState)(u.color||"#FFF"),b=(0,y.Z)(P,2),v=b[0],r=b[1];return(0,h.useEffect)(function(){r(u.color||"#FFF")},[u]),u.changeable?(0,c.jsx)(g.Z,{getPopupContainer:function(W){return W.parentElement||document.body},overlayClassName:n().popover,openClassName:n().popoverOpenClassName,placement:"bottom",content:(0,c.jsx)(B.xS,{disableAlpha:!0,color:v,onChange:function(W){r(W.hex)},onChangeComplete:u.onChange}),trigger:"click",children:(0,c.jsx)("div",{className:n().roundBall,style:{backgroundColor:v}})}):(0,c.jsx)("div",{className:n().roundBall,style:{backgroundColor:v}})};L.Z=E},51327:function(f,L,e){"use strict";e.d(L,{Z:function(){return ae}});var X=e(54421),g=e(38272),y=e(57663),h=e(71577),D=e(67294),n=e(38670),B=e.n(n),c=e(49111),E=e(19650),m=e(11849),u=e(32495),P=e.n(u),b=e(63097),v=e(85893),r=function(o){var C=(0,m.Z)({},o.annotation),R=!1,K=(0,v.jsxs)(g.ZP.Item,{className:"".concat(P().listItem," ").concat(o.active?P().listItemActive:""),unselectable:"on",onClick:function(){console.log("click List.Item"),o.onClick(C)},children:[(0,v.jsxs)(E.Z,{align:"center",size:5,children:[(0,v.jsx)("a",{className:P().eye,style:{backgroundImage:R?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(l){l.stopPropagation(),o.onAnnotationModify(C)}})," ",(0,v.jsx)("span",{className:P().annotationId,children:C.properties.annotationId}),(0,v.jsx)("span",{className:P().labelName,children:C.properties.labelName}),(0,v.jsx)(b.Z,{color:C.properties.stroke})]}),(0,v.jsx)("a",{className:P().delete,onClick:function(l){console.log("click List.Item.delete"),l.stopPropagation(),o.onAnnotationDelete(C)}})]});return K},x=r,W=e(48971),O=function(o){var C=(0,W.YB)(),R=C.formatMessage({id:"component.PPAnnotationList.annotationList"}),K=C.formatMessage({id:"component.PPAnnotationList.addAnnotation"});return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(g.ZP,{className:B().labelList,size:"large",header:(0,v.jsx)("div",{className:B().listHeader,children:R}),bordered:!0,dataSource:o.annotations.features,renderItem:function(l){return(0,v.jsx)(x,{onClick:o.onAnnotationSelect,annotation:l,active:!1,onAnnotationDelete:o.onAnnotationDelete,onAnnotationModify:o.onAnnotationModify})},footer:(0,v.jsx)("div",{children:(0,v.jsx)(h.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){o.onAnnotationSelect(void 0)},block:!0,children:K})})})})},ae=O},5041:function(f,L,e){"use strict";e.d(L,{Z:function(){return s}});var X=e(54421),g=e(38272),y=e(57663),h=e(71577),D=e(2824),n=e(67294),B=e(56131),c=e.n(B),E=e(49111),m=e(19650),u=e(11849),P=e(5882),b=e.n(P),v=e(63097),r=e(85893),x=function(d){var M=(0,u.Z)({},d.label),A=(0,n.useState)(M.invisible),Z=(0,D.Z)(A,2),F=Z[0],z=Z[1],t=(0,n.useState)(0),oe=(0,D.Z)(t,2),_=oe[0],re=oe[1],V=d.hideEye?" ":(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("a",{className:b().eye,style:{backgroundImage:F?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(ee){ee.stopPropagation(),z(!F),d.onLabelModify(M)}})," "]}),G=d.hideColorPicker?(0,r.jsx)(r.Fragment,{}):(0,r.jsx)(v.Z,{color:M.color,changeable:!0,onChange:function(ee){M.color=ee.hex,d.onLabelModify(M)}}),de=(0,r.jsxs)(g.ZP.Item,{className:"".concat(b().listItem," ").concat(d.active?b().listItemActive:""),unselectable:"on",onClick:function(){d.onClick(M)},children:[(0,r.jsxs)(m.Z,{align:"center",size:5,children:[V,M.name,G]}),(0,r.jsx)("a",{className:b().delete,onClick:function(ee){ee.stopPropagation();var me=new Date().getTime();me-_<300||(re(me),d.onLabelDelete(M))}})]});return de},W=x,O=e(71194),ae=e(50146),ie=e(47673),o=e(24044),C=e(9715),R=e(93766),K=e(48971),T=["#FF0000","#008000","#0000FF","#FFFF00","#FFA500","#00FFFF","#8B00FF","#FFC0CB","#7CFC00","#007FFF","#800080","#36BF36","#DAA520","#800000","#008B8B","#B22222","#E6D933","#000080","#FF00FF","#FFFF99","#87CEEB","#5C50E6","#CD5C5C","#20B2AA","#E680FF","#4D1F00","#006374","#B399FF","#8B4513","#BA55D3","#C0C0C0","#808080","#000000"],l=function(d){var M,A,Z=(0,K.YB)(),F=Z.formatMessage({id:"component.PPAddLabelModal.selectColor"}),z=Z.formatMessage({id:"component.PPAddLabelModal.addLabel"}),t=Z.formatMessage({id:"component.PPAddLabelModal.labelName"}),oe=Z.formatMessage({id:"component.PPCreater.cancel"}),_=Z.formatMessage({id:"component.PPSegMode.ok"}),re=(0,n.useState)(((M=d.defaultLabel)===null||M===void 0?void 0:M.color)||T[d.order||0]),V=(0,D.Z)(re,2),G=V[0],de=V[1];(0,n.useEffect)(function(){var te;de(((te=d.defaultLabel)===null||te===void 0?void 0:te.color)||T[d.order||0])},[d]);var ce=d.hideColorPicker?(0,r.jsx)(r.Fragment,{}):(0,r.jsx)(R.Z.Item,{label:F,name:"color",children:(0,r.jsx)(v.Z,{color:G,changeable:!0,onChange:function(ve){de(ve.hex)}})}),ee=R.Z.useForm(),me=(0,D.Z)(ee,1),$=me[0];return(0,r.jsx)(ae.Z,{title:z,visible:d.visible,onCancel:d.onCancel,footer:null,children:(0,r.jsxs)(R.Z,{form:$,name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!1,labelname:(A=d.defaultLabel)===null||A===void 0?void 0:A.name},onFinish:function(ve){var Ie={name:ve.labelname,color:G};d.onLabelAdd(Ie),$.resetFields()},autoComplete:"off",children:[(0,r.jsx)(R.Z.Item,{label:t,name:"labelname",rules:[{required:!0,message:"Please input label name!"}],children:(0,r.jsx)(o.Z,{})}),ce,(0,r.jsx)(R.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,r.jsxs)(m.Z,{children:[(0,r.jsx)(h.Z,{onClick:function(){var ve;(ve=d.onCancel)===null||ve===void 0||ve.call(0),$.resetFields()},children:oe}),(0,r.jsx)(h.Z,{type:"primary",htmlType:"submit",children:_})]})})]})})},i=l,U=function(d){var M,A=(0,K.YB)(),Z=A.formatMessage({id:"component.PPLabelList.addLabel"}),F=A.formatMessage({id:"component.PPLabelList.labelList"}),z=(0,n.useState)(!1),t=(0,D.Z)(z,2),oe=t[0],_=t[1];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.ZP,{className:c().labelList,size:"large",header:(0,r.jsx)("div",{className:c().listHeader,children:F}),footer:(0,r.jsx)("div",{children:(0,r.jsx)(h.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){_(!0)},block:!0,children:Z})}),bordered:!0,dataSource:d.labels,renderItem:function(V){var G;return(0,r.jsx)(W,{hideColorPicker:d.hideColorPicker,hideEye:d.hideEye,onClick:d.onLabelSelect,label:V,active:(G=d.activeIds)===null||G===void 0?void 0:G.has(V.labelId),onLabelDelete:d.onLabelDelete,onLabelModify:d.onLabelModify})}}),(0,r.jsx)(i,{hideColorPicker:d.hideColorPicker,order:(M=d.labels)===null||M===void 0?void 0:M.length,visible:oe,onLabelAdd:function(V){d.onLabelAdd(V),_(!1)},onCancel:function(){_(!1)}})]})},s=U},8088:function(f,L,e){"use strict";var X=e(67294),g=e(78677),y=e.n(g),h=e(85893),D=function(B){return(0,h.jsx)("div",{className:"".concat(y().container," ").concat(B.className),children:B.children})};L.Z=D},44434:function(f,L,e){"use strict";var X=e(67294),g=e(80961),y=e.n(g),h=e(85893),D=function(B){var c=y().leftToolbar;return B.disLoc=="right"&&(c=y().rightToolbar),(0,h.jsx)("div",{className:c,children:B.children})};L.Z=D},61541:function(f,L,e){"use strict";var X=e(49111),g=e(19650),y=e(67294),h=e(82499),D=e.n(h),n=e(85893),B=function(E){return(0,n.jsx)("div",{unselectable:"on",className:"".concat(D().toolBarButtonContainerWrapper," ").concat(E.active&&D().toolBarButtonContainerWrapperActive),onClick:E.onClick,children:(0,n.jsx)(g.Z,{align:"center",className:D().toolBarButtonContainer,size:0,children:(0,n.jsxs)(g.Z,{align:"center",direction:"vertical",className:D().toolBarButton,size:0,children:[(0,n.jsx)("img",{src:E.imgSrc}),(0,n.jsx)("div",{className:D().buttonText,children:E.children})]})})})};L.Z=B},37233:function(f,L,e){"use strict";e.d(L,{Z:function(){return x}});var X=e(67294),g=e(11849),y=e(93224),h=e(41004),D=e(72869),n=e.n(D),B=e(74607),c=e(85893),E=function(O){var ae=O.children,ie=O.leafletMapRef,o=O.displayTools,C=(0,y.Z)(O,["children","leafletMapRef","displayTools"]);return X.useEffect(function(){if(ie.current){var R=ie.current.leafletElement;R.pm.addControls({drawMarker:!1,drawCircle:!1,drawCircleMarker:!1,drawPolyline:!1,drawRectangle:!1,drawPolygon:!1,editMode:!1,dragMode:!1,cutPolygon:!0,rotateMode:!1,removalMode:!1}),R.pm.setGlobalOptions({pmIgnore:!1}),O.displayTools&&R.pm.Toolbar.createCustomControl({name:"StoreShapes",title:"Store all shapes",block:"custom",className:n().customControlIcon,toggle:!1,afterClick:function(){var T=JSON.stringify(R.pm.getGeomanDrawLayers(!0).toGeoJSON()),l="data.geojson",i=document.createElement("a");i.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(T)),i.setAttribute("download",l),i.style.display="none",document.body.appendChild(i),i.click(),console.log(T)}}),R.on("pm:create",function(K){O.onShapeCreate(K)}),R.on("pm:edit",function(K){O.onShapeEdit(K)})}},[]),(0,c.jsx)(h.Z,(0,g.Z)((0,g.Z)({ref:ie},C),{},{children:ae}))},m=E,u=e(88014),P=e(16072),b=e(18836),v={lat:0,lng:0,zoom:2},r=function(O){var ae=[v.lat,v.lng];return(0,c.jsx)(m,{leafletMapRef:O.leafletMapRef,displayTools:O.displayTools,className:n().map,center:ae,zoom:v.zoom,onShapeCreate:O.onShapeCreate,onShapeEdit:O.onShapeEdit,zoomControl:!1,children:(0,c.jsxs)(u.Z,{position:"topright",children:[(0,c.jsx)(u.Z.BaseLayer,{checked:!0,name:"TianDiTu.Vector",children:(0,c.jsxs)(P.Z,{attribution:'\xA9 <a href="https://www.tianditu.gov.cn/">TianDiTu</a> GS(2021)3715',children:[(0,c.jsx)(b.Z,{url:"https://t2.tianditu.gov.cn/DataServer?T=vec_w&X={x}&Y={y}&L={z}&tk=8e879a4cad078fd3ce7456f2737fc4cc"}),(0,c.jsx)(b.Z,{url:"https://t2.tianditu.gov.cn/DataServer?T=cva_w&X={x}&Y={y}&L={z}&tk=8e879a4cad078fd3ce7456f2737fc4cc"})]})}),(0,c.jsx)(u.Z.Overlay,{name:"Esri.WorldImagery",children:(0,c.jsx)(b.Z,{attribution:"Tiles \xA9 Esri \u2014 Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"})})]})})},x=r},49813:function(f,L,e){"use strict";var X=e(47673),g=e(24044),y=e(13062),h=e(71230),D=e(59250),n=e(13013),B=e(57663),c=e(71577),E=e(89032),m=e(15746),u=e(30887),P=e(54689),b=e(34792),v=e(48086),r=e(89366),x=e(57254),W=e(20474),O=e.n(W),ae=e(67294),ie=e(48971),o=e(85893);function C(T){v.default.info("Click on menu item."),console.log("click",T)}var R=(0,o.jsxs)(P.Z,{onClick:C,children:[(0,o.jsx)(P.Z.Item,{icon:(0,o.jsx)(r.Z,{}),children:"1st menu item"},"1"),(0,o.jsx)(P.Z.Item,{icon:(0,o.jsx)(r.Z,{}),children:"2nd menu item"},"2"),(0,o.jsx)(P.Z.Item,{icon:(0,o.jsx)(r.Z,{}),children:"3rd menu item"},"3")]}),K=function(){var l=(0,ie.YB)(),i=l.formatMessage({id:"component.PPRS.pdParameter"}),U=l.formatMessage({id:"component.PPRS.simplifiedDistance"}),s=l.formatMessage({id:"component.PPRS.simplifiedAngle"}),S=l.formatMessage({id:"component.PPRS.threshold"});return(0,o.jsxs)("div",{children:[(0,o.jsxs)(h.Z,{children:[(0,o.jsx)(m.Z,{span:12,className:O().RSPop1,children:(0,o.jsx)("span",{children:i})}),(0,o.jsx)(m.Z,{span:12,className:O().RSPop2,children:(0,o.jsx)(n.Z,{overlay:R,children:(0,o.jsxs)(c.Z,{style:{width:"100%"},children:["Dropdown ",(0,o.jsx)(x.Z,{})]})})})]}),(0,o.jsxs)(h.Z,{children:[(0,o.jsx)(m.Z,{span:12,className:O().RSPop1,children:(0,o.jsx)("span",{children:U})}),(0,o.jsx)(m.Z,{span:12,className:O().RSPop2,children:(0,o.jsx)(g.Z,{placeholder:"Basic usage"})})]}),(0,o.jsxs)(h.Z,{children:[(0,o.jsx)(m.Z,{span:12,className:O().RSPop1,children:(0,o.jsx)("span",{children:s})}),(0,o.jsx)(m.Z,{span:12,className:O().RSPop2,children:(0,o.jsx)(g.Z,{placeholder:"Basic usage"})})]}),(0,o.jsxs)(h.Z,{children:[(0,o.jsx)(m.Z,{span:12,className:O().RSPop1,children:(0,o.jsx)("span",{children:S})}),(0,o.jsx)(m.Z,{span:12,className:O().RSPop2,children:(0,o.jsx)(g.Z,{placeholder:"Basic usage"})})]})]})};L.Z=K},97927:function(f,L,e){"use strict";var X=e(13062),g=e(71230),y=e(47673),h=e(24044),D=e(89032),n=e(15746),B=e(87610),c=e.n(B),E=e(67294),m=e(48971),u=e(85893),P=function(){var v=(0,m.YB)(),r=v.formatMessage({id:"component.PPRS.gridSize"}),x=v.formatMessage({id:"component.PPRS.overlap"}),W=v.formatMessage({id:"component.PPRS.completed"},{show:1,total:16});return(0,u.jsxs)("div",{children:[(0,u.jsxs)(g.Z,{children:[(0,u.jsx)(n.Z,{span:12,className:c().RSPop1,children:(0,u.jsx)("span",{children:r})}),(0,u.jsx)(n.Z,{span:12,className:c().RSPop2,children:(0,u.jsx)(h.Z,{placeholder:"Basic usage"})})]}),(0,u.jsxs)(g.Z,{children:[(0,u.jsx)(n.Z,{span:12,className:c().RSPop1,children:(0,u.jsx)("span",{children:x})}),(0,u.jsx)(n.Z,{span:12,className:c().RSPop2,children:(0,u.jsx)(h.Z,{placeholder:"Basic usage"})})]}),(0,u.jsx)(g.Z,{children:(0,u.jsx)("span",{className:c().RSPop3,children:W})})]})};L.Z=P},91861:function(f,L,e){"use strict";e.d(L,{Ad:function(){return h},k3:function(){return D},Vd:function(){return n},td:function(){return B}});var X=e(34792),g=e(48086),y=40;function h(){localStorage.removeItem("history"),D([])}function D(c){var E=localStorage.getItem("history"),m=E?JSON.parse(E):{index:-1,items:[]};if(JSON.stringify(m.items[m.index])!=JSON.stringify(c)){var u=m.index>y?m.index-y:0,P=m.items.splice(u,m.index==0?1:m.index+1);m.items=P.concat([c]),m.index<=y?m.index++:m.index=y+1,localStorage.setItem("history",JSON.stringify(m))}}function n(){var c=localStorage.getItem("history");if(!!c){var E=JSON.parse(c);if(!!E){if(E.index>=E.items.length-1){g.default.error("No next history!");return}return E.index++,localStorage.setItem("history",JSON.stringify(E)),E.items[E.index]}}}function B(){var c=localStorage.getItem("history");if(!!c){var E=JSON.parse(c);if(console.log("history",E),!E||!E.index||E.index<=1){g.default.error("No previous history!");return}return E.index--,localStorage.setItem("history",JSON.stringify(E)),E.items[E.index]}}},47712:function(f,L,e){"use strict";e.r(L),e.d(L,{default:function(){return Ne}});var X=e(34669),g=e(54458),y=e(20136),h=e(55241),D=e(49111),n=e(19650),B=e(62350),c=e(75443),E=e(57663),m=e(71577),u=e(2824),P=e(67294),b=e(75513),v=e.n(b),r=e(8088),x=e(61541),W=e(44434),O=e(5041),ae=e(49813),ie=e(98858),o=e(4914),C=e(13062),R=e(71230),K=e(59250),T=e(13013),l=e(89032),i=e(15746),U=e(30887),s=e(54689),S=e(34792),d=e(48086),M=e(89366),A=e(57254),Z=e(55252),F=e.n(Z),z=e(48971),t=e(85893);function oe(I){d.default.info("Click on menu item."),console.log("click",I)}var _=(0,t.jsxs)(s.Z,{onClick:oe,children:[(0,t.jsx)(s.Z.Item,{icon:(0,t.jsx)(M.Z,{}),children:"band_1"},"1"),(0,t.jsx)(s.Z.Item,{icon:(0,t.jsx)(M.Z,{}),children:"band_2"},"2"),(0,t.jsx)(s.Z.Item,{icon:(0,t.jsx)(M.Z,{}),children:"band_3"},"3")]}),re=function(){var H=(0,z.YB)(),Q=H.formatMessage({id:"component.PPRS.r"}),k=H.formatMessage({id:"component.PPRS.g"}),De=H.formatMessage({id:"component.PPRS.b"}),pe=H.formatMessage({id:"component.PPRS.dataInformation"}),Se=H.formatMessage({id:"component.PPRS.fileName"}),Oe=H.formatMessage({id:"component.PPRS.row"}),ne=H.formatMessage({id:"component.PPRS.column"}),le=H.formatMessage({id:"component.PPRS.bands"}),ge=H.formatMessage({id:"component.PPRS.dataType"}),je=H.formatMessage({id:"component.PPRS.EPSG"}),Ee=H.formatMessage({id:"component.PPRS.unit"});return(0,t.jsxs)("div",{children:[(0,t.jsxs)(R.Z,{children:[(0,t.jsx)(i.Z,{className:F().RSPop1,children:(0,t.jsx)("span",{children:Q})}),(0,t.jsx)(i.Z,{className:F().RSPop2,children:(0,t.jsx)(T.Z,{overlay:_,children:(0,t.jsxs)(m.Z,{style:{width:"100%"},children:["Band ",(0,t.jsx)(A.Z,{})]})})}),(0,t.jsx)(i.Z,{className:F().RSPop1,children:(0,t.jsx)("span",{children:k})}),(0,t.jsx)(i.Z,{className:F().RSPop2,children:(0,t.jsx)(T.Z,{overlay:_,children:(0,t.jsxs)(m.Z,{style:{width:"100%"},children:["Band ",(0,t.jsx)(A.Z,{})]})})}),(0,t.jsx)(i.Z,{className:F().RSPop1,children:(0,t.jsx)("span",{children:De})}),(0,t.jsx)(i.Z,{className:F().RSPop2,children:(0,t.jsx)(T.Z,{overlay:_,children:(0,t.jsxs)(m.Z,{style:{width:"100%"},children:["Band ",(0,t.jsx)(A.Z,{})]})})})]}),(0,t.jsxs)(o.Z,{title:pe,column:1,bordered:!0,children:[(0,t.jsx)(o.Z.Item,{label:Se,children:"A/XXX.tif"}),(0,t.jsx)(o.Z.Item,{label:Oe,children:"1234"}),(0,t.jsx)(o.Z.Item,{label:ne,children:"897"}),(0,t.jsx)(o.Z.Item,{label:le,children:"7"}),(0,t.jsx)(o.Z.Item,{label:ge,children:"UInt16"}),(0,t.jsx)(o.Z.Item,{label:je,children:"7030"}),(0,t.jsx)(o.Z.Item,{label:Ee,children:"m"})]})]})},V=re,G=e(97927),de=e(37233),ce=e(51327),ee=e(11849);function me(I){var H=(0,P.useState)(0),Q=(0,u.Z)(H,2),k=Q[0],De=Q[1],pe=(0,P.useState)(!1),Se=(0,u.Z)(pe,2),Oe=Se[0],ne=Se[1];(0,P.useEffect)(function(){localStorage.setItem("currentLabel",JSON.stringify(I.currentLabel||{}))},[I.currentLabel]),(0,P.useEffect)(function(){localStorage.setItem("annotations",JSON.stringify(I.annotations||{}))},[I.annotations]);var le=function(){var a,j=(a=I.leafletMapRef.current)===null||a===void 0?void 0:a.leafletElement.pm.globalDrawModeEnabled();console.log(j)},ge=function(a){var j=localStorage.getItem("currentLabel");if(j!="{}"){var p,ue;ne(!0);var se=JSON.parse(j||"{}");(p=I.leafletMapRef.current)===null||p===void 0||p.leafletElement.pm.enableDraw(a),(ue=I.leafletMapRef.current)===null||ue===void 0||ue.leafletElement.pm.setPathOptions({color:se==null?void 0:se.color,fillColor:se==null?void 0:se.color,fillOpacity:.4})}else{var he;alert("Test"),(he=I.leafletMapRef.current)===null||he===void 0||he.leafletElement.pm.disableDraw(a),ne(!1)}},je=function(a){var j;(j=I.leafletMapRef.current)===null||j===void 0||j.leafletElement.pm.disableDraw(a),ne(!1),le()},Ee=function(){var a;return(a=I.leafletMapRef.current)===null||a===void 0?void 0:a.leafletElement.pm.Draw.getActiveShape()},Le=function(){if(Ee()=="Polygon"){var a;(a=I.leafletMapRef.current)===null||a===void 0||a.leafletElement.pm.Draw.Polygon._removeLastVertex(),le()}else le(),ne(!1)},ye=function(){var a;(a=I.leafletMapRef.current)===null||a===void 0||a.leafletElement.pm.toggleGlobalDragMode(),le()},be=function(){if(Ee()=="Polygon"){var a;(a=I.leafletMapRef.current)===null||a===void 0||a.leafletElement.pm.Draw.Polygon._finishShape(),le(),ne(!1)}else le(),ne(!1)},We=function(){var a;(a=I.leafletMapRef.current)===null||a===void 0||a.leafletElement.pm.enableGlobalRemovalMode(),le()},Re=function(){var a;(a=I.leafletMapRef.current)===null||a===void 0||a.leafletElement.pm.toggleGlobalEditMode(),le(),ne(!1)},Ze=function(){ne(!1)},Ae=function(a){var j=a.toGeoJSON(),p=JSON.parse(localStorage.getItem("currentLabel")||"{}");De(k+1),j.properties={labelName:p==null?void 0:p.name,stroke:p==null?void 0:p.color,annotationId:k+1};var ue=JSON.parse(localStorage.getItem("annotations")||"{}"),se=(0,ee.Z)((0,ee.Z)({},ue),{},{features:ue.features.concat(j)});console.log(se),I.setAnnotations(se),I.recordHistory(se)};function w(J){ne(!1),Ae(J.layer)}var Pe=function(a){console.log(a)},Me=function(){var a;(a=I.leafletMapRef.current)===null||a===void 0||a.leafletElement.zoomIn(),le()},Ce=function(){var a;(a=I.leafletMapRef.current)===null||a===void 0||a.leafletElement.zoomOut(),le()};return{polyVisable:Oe,RSDraw:ge,RSDrawDisable:je,removeLastVertex:Le,moveShape:ye,finishShape:be,removeShape:We,editMode:Re,saveGeoJson:Ze,storeOnDb:Ae,onShapeCreate:w,onShapeEdit:Pe,toolZoomIn:Me,toolZoomOut:Ce,currentShape:Ee}}var $=e(27992),te=e(91861),ve=e(98731),Ie=function(){var H=(0,ve.$L)(P.useState,P.useEffect,{label:{oneHot:!1},tool:{defaultTool:"mover"},effectTrigger:{}}),Q=(0,u.Z)(H,10),k=Q[0],De=Q[1],pe=Q[2],Se=Q[3],Oe=Q[4],ne=Q[5],le=Q[6],ge=Q[7],je=Q[8],Ee=Q[9],Le=(0,P.useState)(!1),ye=(0,u.Z)(Le,2),be=ye[0],We=ye[1],Re=(0,P.useState)(!1),Ze=(0,u.Z)(Re,2),Ae=Ze[0],w=Ze[1],Pe=(0,P.useState)({type:"FeatureCollection",features:[]}),Me=(0,u.Z)(Pe,2),Ce=Me[0],J=Me[1];(0,P.useEffect)(function(){(0,te.Ad)()},[]),console.log("rs is re-rendering! label.curr: ".concat(JSON.stringify(ge.curr)));var a=P.useRef(null),j=me({leafletMapRef:a,currentLabel:ge.curr,setAnnotations:J,annotations:Ce,recordHistory:te.k3}),p=(0,z.YB)(),ue=p.formatMessage({id:"pages.Maps.finished"}),se=p.formatMessage({id:"pages.Maps.removeLastVertex"}),he=p.formatMessage({id:"pages.Maps.cancel"}),Ke=p.formatMessage({id:"pages.Maps.boundary"}),Te=p.formatMessage({id:"pages.Maps.remoteSensing"}),Ue=p.formatMessage({id:"pages.Maps.grids"}),Fe=p.formatMessage({id:"pages.toolBar.polygon"}),_e=p.formatMessage({id:"pages.toolBar.rubber"}),ze=p.formatMessage({id:"pages.toolBar.zoomIn"}),q=p.formatMessage({id:"pages.toolBar.zoomOut"}),Y=p.formatMessage({id:"pages.toolBar.move"}),xe=p.formatMessage({id:"pages.toolBar.unDo"}),fe=p.formatMessage({id:"pages.toolBar.reDo"}),Ge=p.formatMessage({id:"pages.toolBar.save"}),Je=p.formatMessage({id:"pages.toolBar.edit"}),Ve=p.formatMessage({id:"pages.toolBar.clearMark"}),$e=p.formatMessage({id:"pages.toolBar.interactor"}),He=p.formatMessage({id:"pages.toolBar.segmentThreshold"}),Ye=p.formatMessage({id:"pages.toolBar.transparency"}),Xe=p.formatMessage({id:"pages.toolBar.visualRadius"}),Qe=p.formatMessage({id:"pages.toolBar.determineOutline"}),ke=p.formatMessage({id:"pages.toolBar.divideData"}),we=p.formatMessage({id:"pages.toolBar.export"});return(0,t.jsxs)(r.Z,{className:v().segment,children:[(0,t.jsxs)(W.Z,{children:[(0,t.jsx)(h.Z,{placement:"rightTop",visible:j.polyVisable,content:(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(n.Z,{children:[(0,t.jsx)(m.Z,{type:"primary",onClick:function(){j.finishShape()},children:ue}),(0,t.jsx)(m.Z,{type:"primary",onClick:function(){j.removeLastVertex()},children:se}),(0,t.jsx)(c.Z,{title:"Are you sure cancel this task?",okText:"Yes",cancelText:"No",children:(0,t.jsx)(m.Z,{type:"primary",onClick:function(){j.RSDrawDisable(j.currentShape())},children:he})})]})}),trigger:k.curr=="Polygon"?"hover":"click",children:(0,t.jsx)(x.Z,{active:k.curr=="Polygon",imgSrc:"./pics/buttons/polygon.png",onClick:function(){k.setCurr("Polygon"),j.RSDraw("Polygon")},children:Fe})}),(0,t.jsx)(x.Z,{onClick:function(){j.editMode()},imgSrc:"./pics/buttons/edit.png",children:Je}),(0,t.jsxs)(h.Z,{placement:"rightTop",title:"title",content:"content",trigger:k.curr=="rubber"?"hover":"click",children:[" ",(0,t.jsx)(x.Z,{imgSrc:"./pics/buttons/rubber.png",onClick:function(){j.removeShape()},children:_e})]}),(0,t.jsx)(x.Z,{onClick:function(){j.toolZoomIn()},imgSrc:"./pics/buttons/zoom_in.png",children:ze}),(0,t.jsx)(x.Z,{onClick:function(){j.toolZoomOut()},imgSrc:"./pics/buttons/zoom_out.png",children:q}),(0,t.jsx)(x.Z,{onClick:function(){j.saveGeoJson()},imgSrc:"./pics/buttons/save.png",children:Ge}),(0,t.jsx)(x.Z,{imgSrc:"./pics/buttons/move.png",onClick:function(){return j.moveShape()},children:Y}),(0,t.jsx)(x.Z,{onClick:function(){var Be=(0,te.td)()},imgSrc:"./pics/buttons/prev.png",children:xe}),(0,t.jsx)(x.Z,{onClick:function(){var Be=(0,te.Vd)()},imgSrc:"./pics/buttons/next.png",children:fe}),(0,t.jsx)(x.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:Ve})]}),(0,t.jsxs)("div",{className:v().mainStage,children:[(0,t.jsx)("div",{className:v().draw,children:(0,t.jsx)(de.Z,{leafletMapRef:a,onShapeCreate:j.onShapeCreate,onShapeEdit:j.onShapeEdit})}),(0,t.jsx)("div",{className:v().pblock,children:(0,t.jsx)("div",{className:v().progress,children:(0,t.jsx)(g.Z,{percent:50,status:"active"})})})]}),(0,t.jsxs)(W.Z,{disLoc:"right",children:[(0,t.jsx)(x.Z,{imgSrc:"./pics/buttons/intelligent_interaction.png",children:$e}),(0,t.jsx)($.Z,{imgSrc:"./pics/buttons/threshold.png",disLoc:"left",children:He}),(0,t.jsx)($.Z,{imgSrc:"./pics/buttons/alpha.png",disLoc:"left",children:Ye}),(0,t.jsx)($.Z,{imgSrc:"./pics/buttons/radius.png",disLoc:"left",children:Xe}),(0,t.jsxs)(h.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Setting of boundary simplification",content:(0,t.jsx)(ae.Z,{}),trigger:k.curr=="boundry"?"click":"hover",children:[" ",(0,t.jsx)(x.Z,{imgSrc:"./pics/buttons/border_simplify.png",onClick:function(){k.setCurr("boundry")},children:Ke})]}),(0,t.jsxs)(h.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Setting of remote sensing",content:(0,t.jsx)(V,{}),trigger:k.curr=="colorgun"?"click":"hover",children:[" ",(0,t.jsx)(x.Z,{imgSrc:"./pics/buttons/remote_sensing_setting.png",onClick:function(){k.setCurr("colorgun")},children:Te})]}),(0,t.jsxs)(h.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Switch grids",content:(0,t.jsx)(G.Z,{}),trigger:k.curr=="grid"?"click":"hover",children:[" ",(0,t.jsx)(x.Z,{imgSrc:"./pics/buttons/switch_grid.png",onClick:function(){k.setCurr("grid")},children:Ue})]}),(0,t.jsx)(x.Z,{imgSrc:"./pics/buttons/data_division.png",children:ke}),(0,t.jsx)(x.Z,{imgSrc:"./pics/buttons/export.png",children:we})]}),(0,t.jsxs)("div",{className:v().rightSideBar,children:[(0,t.jsx)("div",{className:v().determinOutline,children:(0,t.jsx)(m.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",block:!0,children:Qe})}),(0,t.jsx)(O.Z,{selectedLabel:ge.curr,onLabelSelect:function(Be){ge.setCurr(Be),console.log(Be)},onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}}),(0,t.jsx)(ce.Z,{annotations:Ce,onAnnotationSelect:function(){},onAnnotationAdd:function(){},onAnnotationModify:function(){},onAnnotationDelete:function(){}})]})]})},Ne=Ie},38272:function(f,L,e){"use strict";e.d(L,{ZM:function(){return C},ZP:function(){return T}});var X=e(85061),g=e(22122),y=e(96156),h=e(28481),D=e(90484),n=e(67294),B=e(94184),c=e.n(B),E=e(11382),m=e(25378),u=e(24308),P=e(65632),b=e(40308),v=e(92820),r=e(21584),x=e(96159),W=function(l,i){var U={};for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&i.indexOf(s)<0&&(U[s]=l[s]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var S=0,s=Object.getOwnPropertySymbols(l);S<s.length;S++)i.indexOf(s[S])<0&&Object.prototype.propertyIsEnumerable.call(l,s[S])&&(U[s[S]]=l[s[S]]);return U},O=function(i){var U=i.prefixCls,s=i.className,S=i.avatar,d=i.title,M=i.description,A=W(i,["prefixCls","className","avatar","title","description"]),Z=n.useContext(P.E_),F=Z.getPrefixCls,z=F("list",U),t=c()("".concat(z,"-item-meta"),s),oe=n.createElement("div",{className:"".concat(z,"-item-meta-content")},d&&n.createElement("h4",{className:"".concat(z,"-item-meta-title")},d),M&&n.createElement("div",{className:"".concat(z,"-item-meta-description")},M));return n.createElement("div",(0,g.Z)({},A,{className:t}),S&&n.createElement("div",{className:"".concat(z,"-item-meta-avatar")},S),(d||M)&&oe)},ae=function(i){var U=i.prefixCls,s=i.children,S=i.actions,d=i.extra,M=i.className,A=i.colStyle,Z=W(i,["prefixCls","children","actions","extra","className","colStyle"]),F=n.useContext(C),z=F.grid,t=F.itemLayout,oe=n.useContext(P.E_),_=oe.getPrefixCls,re=function(){var $;return n.Children.forEach(s,function(te){typeof te=="string"&&($=!0)}),$&&n.Children.count(s)>1},V=function(){return t==="vertical"?!!d:!re()},G=_("list",U),de=S&&S.length>0&&n.createElement("ul",{className:"".concat(G,"-item-action"),key:"actions"},S.map(function(me,$){return n.createElement("li",{key:"".concat(G,"-item-action-").concat($)},me,$!==S.length-1&&n.createElement("em",{className:"".concat(G,"-item-action-split")}))})),ce=z?"div":"li",ee=n.createElement(ce,(0,g.Z)({},Z,{className:c()("".concat(G,"-item"),(0,y.Z)({},"".concat(G,"-item-no-flex"),!V()),M)}),t==="vertical"&&d?[n.createElement("div",{className:"".concat(G,"-item-main"),key:"content"},s,de),n.createElement("div",{className:"".concat(G,"-item-extra"),key:"extra"},d)]:[s,de,(0,x.Tm)(d,{key:"extra"})]);return z?n.createElement(r.Z,{flex:1,style:A},ee):ee};ae.Meta=O;var ie=ae,o=function(l,i){var U={};for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&i.indexOf(s)<0&&(U[s]=l[s]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var S=0,s=Object.getOwnPropertySymbols(l);S<s.length;S++)i.indexOf(s[S])<0&&Object.prototype.propertyIsEnumerable.call(l,s[S])&&(U[s[S]]=l[s[S]]);return U},C=n.createContext({}),R=C.Consumer;function K(l){var i,U=l.pagination,s=U===void 0?!1:U,S=l.prefixCls,d=l.bordered,M=d===void 0?!1:d,A=l.split,Z=A===void 0?!0:A,F=l.className,z=l.children,t=l.itemLayout,oe=l.loadMore,_=l.grid,re=l.dataSource,V=re===void 0?[]:re,G=l.size,de=l.header,ce=l.footer,ee=l.loading,me=ee===void 0?!1:ee,$=l.rowKey,te=l.renderItem,ve=l.locale,Ie=o(l,["pagination","prefixCls","bordered","split","className","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]),Ne=s&&(0,D.Z)(s)==="object"?s:{},I=n.useState(Ne.defaultCurrent||1),H=(0,h.Z)(I,2),Q=H[0],k=H[1],De=n.useState(Ne.defaultPageSize||10),pe=(0,h.Z)(De,2),Se=pe[0],Oe=pe[1],ne=n.useContext(P.E_),le=ne.getPrefixCls,ge=ne.renderEmpty,je=ne.direction,Ee={current:1,total:0},Le={},ye=function(Y){return function(xe,fe){k(xe),Oe(fe),s&&s[Y]&&s[Y](xe,fe)}},be=ye("onChange"),We=ye("onShowSizeChange"),Re=function(Y,xe){if(!te)return null;var fe;return typeof $=="function"?fe=$(Y):$?fe=Y[$]:fe=Y.key,fe||(fe="list-item-".concat(xe)),Le[xe]=fe,te(Y,xe)},Ze=function(){return!!(oe||s||ce)},Ae=function(Y,xe){return n.createElement("div",{className:"".concat(Y,"-empty-text")},ve&&ve.emptyText||xe("List"))},w=le("list",S),Pe=me;typeof Pe=="boolean"&&(Pe={spinning:Pe});var Me=Pe&&Pe.spinning,Ce="";switch(G){case"large":Ce="lg";break;case"small":Ce="sm";break;default:break}var J=c()(w,(i={},(0,y.Z)(i,"".concat(w,"-vertical"),t==="vertical"),(0,y.Z)(i,"".concat(w,"-").concat(Ce),Ce),(0,y.Z)(i,"".concat(w,"-split"),Z),(0,y.Z)(i,"".concat(w,"-bordered"),M),(0,y.Z)(i,"".concat(w,"-loading"),Me),(0,y.Z)(i,"".concat(w,"-grid"),!!_),(0,y.Z)(i,"".concat(w,"-something-after-last-item"),Ze()),(0,y.Z)(i,"".concat(w,"-rtl"),je==="rtl"),i),F),a=(0,g.Z)((0,g.Z)((0,g.Z)({},Ee),{total:V.length,current:Q,pageSize:Se}),s||{}),j=Math.ceil(a.total/a.pageSize);a.current>j&&(a.current=j);var p=s?n.createElement("div",{className:"".concat(w,"-pagination")},n.createElement(b.Z,(0,g.Z)({},a,{onChange:be,onShowSizeChange:We}))):null,ue=(0,X.Z)(V);s&&V.length>(a.current-1)*a.pageSize&&(ue=(0,X.Z)(V).splice((a.current-1)*a.pageSize,a.pageSize));var se=(0,m.Z)(),he=n.useMemo(function(){for(var q=0;q<u.c4.length;q+=1){var Y=u.c4[q];if(se[Y])return Y}},[se]),Ke=n.useMemo(function(){if(!!_){var q=he&&_[he]?_[he]:_.column;if(q)return{width:"".concat(100/q,"%"),maxWidth:"".concat(100/q,"%")}}},[_==null?void 0:_.column,he]),Te=Me&&n.createElement("div",{style:{minHeight:53}});if(ue.length>0){var Ue=ue.map(function(q,Y){return Re(q,Y)}),Fe=n.Children.map(Ue,function(q,Y){return n.createElement("div",{key:Le[Y],style:Ke},q)});Te=_?n.createElement(v.Z,{gutter:_.gutter},Fe):n.createElement("ul",{className:"".concat(w,"-items")},Ue)}else!z&&!Me&&(Te=Ae(w,ge));var _e=a.position||"bottom",ze=n.useMemo(function(){return{grid:_,itemLayout:t}},[JSON.stringify(_),t]);return n.createElement(C.Provider,{value:ze},n.createElement("div",(0,g.Z)({className:J},Ie),(_e==="top"||_e==="both")&&p,de&&n.createElement("div",{className:"".concat(w,"-header")},de),n.createElement(E.Z,Pe,Te,z),ce&&n.createElement("div",{className:"".concat(w,"-footer")},ce),oe||(_e==="bottom"||_e==="both")&&p))}K.Item=ie;var T=K},54421:function(f,L,e){"use strict";var X=e(38663),g=e.n(X),y=e(57719),h=e.n(y),D=e(13254),n=e(20228),B=e(14781),c=e(6999)}}]);
