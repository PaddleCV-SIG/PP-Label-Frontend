(self.webpackChunkpp_labeling_frontend=self.webpackChunkpp_labeling_frontend||[]).push([[572],{73762:function(I){I.exports={RSPop1:"RSPop1___2Uh31",RSPop2:"RSPop2___2Q-T8"}},35524:function(I){I.exports={segment:"segment___3c01P",mainStage:"mainStage___2jlIH",halfMap:"halfMap___1HRmv",rightSideBar:"rightSideBar___25YC7",determinOutline:"determinOutline___2lYb0"}},76233:function(I,U,t){"use strict";t.r(U),t.d(U,{default:function(){return se}});var Ze=t(20136),R=t(55241),je=t(49111),Y=t(19650),pe=t(62350),H=t(75443),ye=t(57663),h=t(71577),Z=t(2824),S=t(67294),Q=t(35524),B=t.n(Q),K=t(8088),i=t(61541),X=t(44434),W=t(5041),$=t(49813),be=t(98858),x=t(4914),Pe=t(13062),z=t(71230),Re=t(59250),j=t(13013),Ce=t(89032),u=t(15746),De=t(30887),E=t(54689),Le=t(34792),w=t(48086),O=t(89366),p=t(57254),q=t(73762),v=t.n(q),e=t(85893);function _(o){w.default.info("Click on menu item."),console.log("click",o)}var y=(0,e.jsxs)(E.Z,{onClick:_,children:[(0,e.jsx)(E.Z.Item,{icon:(0,e.jsx)(O.Z,{}),children:"band_1"},"1"),(0,e.jsx)(E.Z.Item,{icon:(0,e.jsx)(O.Z,{}),children:"band_2"},"2"),(0,e.jsx)(E.Z.Item,{icon:(0,e.jsx)(O.Z,{}),children:"band_3"},"3")]}),ee=function(){return(0,e.jsxs)("div",{children:[(0,e.jsxs)(z.Z,{children:[(0,e.jsx)(u.Z,{className:v().RSPop1,children:(0,e.jsx)("span",{children:"R"})}),(0,e.jsx)(u.Z,{className:v().RSPop2,children:(0,e.jsx)(j.Z,{overlay:y,children:(0,e.jsxs)(h.Z,{style:{width:"100%"},children:["Band ",(0,e.jsx)(p.Z,{})]})})}),(0,e.jsx)(u.Z,{className:v().RSPop1,children:(0,e.jsx)("span",{children:"G"})}),(0,e.jsx)(u.Z,{className:v().RSPop2,children:(0,e.jsx)(j.Z,{overlay:y,children:(0,e.jsxs)(h.Z,{style:{width:"100%"},children:["Band ",(0,e.jsx)(p.Z,{})]})})}),(0,e.jsx)(u.Z,{className:v().RSPop1,children:(0,e.jsx)("span",{children:"B"})}),(0,e.jsx)(u.Z,{className:v().RSPop2,children:(0,e.jsx)(j.Z,{overlay:y,children:(0,e.jsxs)(h.Z,{style:{width:"100%"},children:["Band ",(0,e.jsx)(p.Z,{})]})})})]}),(0,e.jsxs)(z.Z,{children:[(0,e.jsx)(u.Z,{className:v().RSPop1,children:(0,e.jsx)("span",{children:"R"})}),(0,e.jsx)(u.Z,{className:v().RSPop2,children:(0,e.jsx)(j.Z,{overlay:y,children:(0,e.jsxs)(h.Z,{style:{width:"100%"},children:["Band ",(0,e.jsx)(p.Z,{})]})})}),(0,e.jsx)(u.Z,{className:v().RSPop1,children:(0,e.jsx)("span",{children:"G"})}),(0,e.jsx)(u.Z,{className:v().RSPop2,children:(0,e.jsx)(j.Z,{overlay:y,children:(0,e.jsxs)(h.Z,{style:{width:"100%"},children:["Band ",(0,e.jsx)(p.Z,{})]})})}),(0,e.jsx)(u.Z,{className:v().RSPop1,children:(0,e.jsx)("span",{children:"B"})}),(0,e.jsx)(u.Z,{className:v().RSPop2,children:(0,e.jsx)(j.Z,{overlay:y,children:(0,e.jsxs)(h.Z,{style:{width:"100%"},children:["Band ",(0,e.jsx)(p.Z,{})]})})})]}),(0,e.jsxs)(x.Z,{title:"Data source information",column:1,bordered:!0,children:[(0,e.jsx)(x.Z.Item,{label:"FileName",children:"A/XXX.tif B/XXX.tf"}),(0,e.jsx)(x.Z.Item,{label:"Row",children:"1234"}),(0,e.jsx)(x.Z.Item,{label:"Column",children:"897"}),(0,e.jsx)(x.Z.Item,{label:"Bands",children:"7 7"}),(0,e.jsx)(x.Z.Item,{label:"DataType",children:"UInt16"}),(0,e.jsx)(x.Z.Item,{label:"EPSG",children:"7030"}),(0,e.jsx)(x.Z.Item,{label:"Unit",children:"m"})]})]})},ne=ee,te=t(97927),oe=t(37233),le=t(51327),N=t(11849);function ae(o){var G=(0,S.useState)(0),C=(0,Z.Z)(G,2),f=C[0],b=C[1],T=(0,S.useState)(!1),D=(0,Z.Z)(T,2),L=D[0],m=D[1],V=(0,S.useState)(o.currentLabel),M=(0,Z.Z)(V,2),s=M[0],J=M[1];(0,S.useEffect)(function(){J(o.currentLabel)},[o.currentLabel]);var r=function(){var n,d=(n=o.leafletMapRef.current)===null||n===void 0?void 0:n.leafletElement.pm.globalDrawModeEnabled();console.log(d)},c=function(n){if(m(!0),n){var d,g;(d=o.leafletMapRef.current)===null||d===void 0||d.leafletElement.pm.enableDraw(n),(g=o.leafletMapRef.current)===null||g===void 0||g.leafletElement.pm.setPathOptions({color:s==null?void 0:s.color,fillColor:s==null?void 0:s.color,fillOpacity:.4}),r()}else{var k;(k=o.leafletMapRef.current)===null||k===void 0||k.leafletElement.pm.disableDraw(n),m(!1),r()}},l=function(n){var d;(d=o.leafletMapRef.current)===null||d===void 0||d.leafletElement.pm.disableDraw(n),m(!1),r()},P=function(){var n;return(n=o.leafletMapRef.current)===null||n===void 0?void 0:n.leafletElement.pm.Draw.getActiveShape()},re=function(){if(P()=="Polygon"){var n;(n=o.leafletMapRef.current)===null||n===void 0||n.leafletElement.pm.Draw.Polygon._removeLastVertex(),r()}else r(),m(!1)},ce=function(){var n;(n=o.leafletMapRef.current)===null||n===void 0||n.leafletElement.pm.toggleGlobalDragMode(),r()},de=function(){if(P()=="Polygon"){var n;(n=o.leafletMapRef.current)===null||n===void 0||n.leafletElement.pm.Draw.Polygon._finishShape(),r(),m(!1)}else r(),m(!1)},ue=function(){var n;(n=o.leafletMapRef.current)===null||n===void 0||n.leafletElement.pm.enableGlobalRemovalMode(),r()},ve=function(){var n;(n=o.leafletMapRef.current)===null||n===void 0||n.leafletElement.pm.toggleGlobalEditMode(),r(),m(!1)},me=function(){var n;console.log((n=o.leafletMapRef.current)===null||n===void 0?void 0:n.leafletElement.pm.getGeomanDrawLayers(!0)),m(!1)};console.log("operation re-rendering. currentLabel:".concat(o.currentLabel));var F=function(n){var d=n._uid,g=n.toGeoJSON();b(f+1),console.log("storeOnDb. currentLabel:".concat(o.currentLabel)),g.properties={labelName:s==null?void 0:s.name,stroke:s==null?void 0:s.color,annotationId:f+1},console.log("Store Layer on DB. Id:"+d,g),console.log(JSON.stringify(g)),o.setAnnotations((0,N.Z)((0,N.Z)({},o.annotations),{},{features:o.annotations.features.concat(g)})),console.log((0,N.Z)((0,N.Z)({},o.annotations),{},{features:o.annotations.features.concat(g)}))};function he(a){console.log(o.currentLabel),a.layer.bindPopup("Label: "+a.layer._uid).openPopup(),m(!1),F(a.layer)}var fe=function(n){ge(n.layer),console.log(n)};function ge(a){console.log(o.currentLabel);var n=a._uid,d=a.toGeoJSON();console.log("Update Layer on DB. Id:"+n,d)}var Se=function(){var n;(n=o.leafletMapRef.current)===null||n===void 0||n.leafletElement.zoomIn(),r()},xe=function(){var n;(n=o.leafletMapRef.current)===null||n===void 0||n.leafletElement.zoomOut(),r()};return{polyVisable:L,RSDraw:c,RSDrawDisable:l,removeLastVertex:re,moveShape:ce,finishShape:de,removeShape:ue,editMode:ve,saveGeoJson:me,storeOnDb:F,onShapeCreate:he,onShapeEdit:fe,toolZoomIn:Se,toolZoomOut:xe,currentShape:P}}var A=t(27992),ie=function(){var G=(0,S.useState)(void 0),C=(0,Z.Z)(G,2),f=C[0],b=C[1],T=(0,S.useState)(),D=(0,Z.Z)(T,2),L=D[0],m=D[1],V=(0,S.useState)({type:"FeatureCollection",features:[]}),M=(0,Z.Z)(V,2),s=M[0],J=M[1];console.log("rs is re-rendering! currentLabel: ".concat(JSON.stringify(L)));var r=S.useRef(null),c=ae({leafletMapRef:r,currentLabel:L,setAnnotations:J,annotations:s});return(0,e.jsxs)(K.Z,{className:B().segment,children:[(0,e.jsxs)(X.Z,{children:[(0,e.jsx)(i.Z,{imgSrc:"./pics/buttons/intelligent_interaction.png",children:"Intelligent Interaction"}),(0,e.jsx)(R.Z,{placement:"rightTop",visible:c.polyVisable,content:(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(Y.Z,{children:[(0,e.jsx)(h.Z,{type:"primary",onClick:function(){c.finishShape()},children:"Finish"}),(0,e.jsx)(h.Z,{type:"primary",onClick:function(){c.removeLastVertex()},children:"Remove Last Vertex"}),(0,e.jsx)(H.Z,{title:"Are you sure cancel this task?",okText:"Yes",cancelText:"No",children:(0,e.jsx)(h.Z,{type:"primary",onClick:function(){c.RSDrawDisable(c.currentShape())},children:"Cancel"})})]})}),trigger:f=="Polygon"?"hover":"click",children:(0,e.jsx)(i.Z,{active:f=="Polygon",imgSrc:"./pics/buttons/polygon.png",onClick:function(){b("Polygon"),c.RSDraw("Polygon")},children:"Polygon"})}),(0,e.jsx)(i.Z,{onClick:function(){c.editMode()},imgSrc:"./pics/buttons/brush.png",children:"Edit"}),(0,e.jsxs)(R.Z,{placement:"rightTop",title:"title",content:"content",trigger:f=="rubber"?"hover":"click",children:[" ",(0,e.jsx)(i.Z,{imgSrc:"./pics/buttons/rubber.png",onClick:function(){c.removeShape()},children:"Rubber"})]}),(0,e.jsx)(i.Z,{onClick:function(){c.toolZoomIn()},imgSrc:"./pics/buttons/zoom_in.png",children:"Zoom in"}),(0,e.jsx)(i.Z,{onClick:function(){c.toolZoomOut()},imgSrc:"./pics/buttons/zoom_out.png",children:"Zoom out"}),(0,e.jsx)(i.Z,{onClick:function(){c.saveGeoJson()},imgSrc:"./pics/buttons/save.png",children:"Save"}),(0,e.jsx)(i.Z,{imgSrc:"./pics/buttons/move.png",onClick:function(){return moveShape()},children:"Move"}),(0,e.jsx)(i.Z,{imgSrc:"./pics/buttons/export.png",children:"Export"}),(0,e.jsx)(i.Z,{imgSrc:"./pics/buttons/data_division.png",children:"Divide Data"}),(0,e.jsx)(i.Z,{imgSrc:"./pics/buttons/prev.png",children:"Undo"}),(0,e.jsx)(i.Z,{imgSrc:"./pics/buttons/next.png",children:"Redo"}),(0,e.jsx)(i.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:"Clear Mark"})]}),(0,e.jsx)("div",{className:B().mainStage,children:(0,e.jsx)(oe.Z,{leafletMapRef:r,onShapeCreate:c.onShapeCreate,onShapeEdit:c.onShapeEdit})}),(0,e.jsxs)(X.Z,{disLoc:"right",children:[(0,e.jsx)(A.Z,{imgSrc:"./pics/buttons/threshold.png",disLoc:"left",children:"Segment Threshold"}),(0,e.jsx)(A.Z,{imgSrc:"./pics/buttons/alpha.png",disLoc:"left",children:"Diaphaneity"}),(0,e.jsx)(A.Z,{imgSrc:"./pics/buttons/radius.png",disLoc:"left",children:"Visual Radius"}),(0,e.jsxs)(R.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Setting of boundary simplification",content:(0,e.jsx)($.Z,{}),trigger:f=="boundry"?"click":"hover",children:[" ",(0,e.jsx)(i.Z,{imgSrc:"./pics/buttons/border_simplify.png",onClick:function(){b("boundry")},children:"Boundary"})]}),(0,e.jsxs)(R.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Setting of remote sensing",content:(0,e.jsx)(ne,{}),trigger:f=="colorgun"?"click":"hover",children:[" ",(0,e.jsx)(i.Z,{imgSrc:"./pics/buttons/remote_sensing_setting.png",onClick:function(){b("colorgun")},children:"Remote Sensing"})]}),(0,e.jsxs)(R.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Switch grids",content:(0,e.jsx)(te.Z,{}),trigger:f=="grid"?"click":"hover",children:[" ",(0,e.jsx)(i.Z,{imgSrc:"./pics/buttons/switch_grid.png",onClick:function(){b("grid")},children:"Grids"})]})]}),(0,e.jsxs)("div",{className:B().rightSideBar,children:[(0,e.jsx)("div",{className:B().determinOutline,children:(0,e.jsx)(h.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",block:!0,children:"Determine Outline"})}),(0,e.jsx)(W.Z,{selectedLabel:L,onLabelSelect:function(P){m(P),console.log(P)},onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}}),(0,e.jsx)(le.Z,{annotations:s,onAnnotationSelect:function(){},onAnnotationAdd:function(){},onAnnotationModify:function(){},onAnnotationDelete:function(){}})]})]})},se=ie}}]);
