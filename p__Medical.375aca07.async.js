(self.webpackChunkpp_labeling_frontend=self.webpackChunkpp_labeling_frontend||[]).push([[454],{57560:function(O){O.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___147XP",toolBarButtonContainer:"toolBarButtonContainer___ZEvhK",toolBarButton:"toolBarButton___1s2Rh",buttonText:"buttonText___3NTCv",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___2Utx8",popover:"popover___3PRoi"}},26647:function(O){O.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1FTWb",toolBarButtonContainer:"toolBarButtonContainer___1Vahn",toolBarButton:"toolBarButton___3mR2H",buttonText:"buttonText___Y0WDm",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3lRZ8",popover:"popover___3zzu2",popoverLeft:"popoverLeft___15lGe"}},8982:function(O){O.exports={RSPop1:"RSPop1___ei_bv",RSPop2:"RSPop2___9d5gM"}},75721:function(O){O.exports={segment:"segment___1EX9A",mainStage:"mainStage___nDwOp",draw:"draw___1Aue1",pblock:"pblock___19sdD",progress:"progress___1595f",rightSideBar:"rightSideBar___1JzJc",determinOutline:"determinOutline___2vG7S"}},43801:function(O,j,n){"use strict";n.d(j,{Z:function(){return T}});var K=n(11849),I=n(2824),z=n(91220),p=n(67294),N=n(65031),A=n(85893);function M(t,d,u,g){if(!(!t||!d||!u||!g))return{width:t,color:d,points:u,tool:g}}function C(t,d,u,g,_,y,f){if(!t||!t.lines)return(0,A.jsx)(A.Fragment,{});var s=(f==null?void 0:f.annotationId)==t.annotationId,b=s&&_=="mover",P=[],m=(0,z.Z)(t.lines),S;try{for(m.s();!(S=m.n()).done;){var v=S.value;!v.width||!v.color||!v.points||!v.tool||P.push((0,A.jsx)(N.x1,{stroke:v.color,strokeWidth:v.width,globalCompositeOperation:v.tool==="brush"?"source-over":"destination-out",lineCap:"round",points:v.points,tension:.01,onDragMove:function(){},onDragEnd:function(){u()},shadowColor:"red",shadowBlur:10,shadowOffset:{x:5,y:5},shadowOpacity:b?1:0}))}}catch(h){m.e(h)}finally{m.f()}return(0,A.jsx)(N.ZA,{draggable:b,children:P})}function R(t,d){return t=="rubber"||d==2?"rubber":"brush"}function x(t){var d=0,u=(0,z.Z)(t),g;try{for(u.s();!(g=u.n()).done;){var _=g.value;!_||_.annotationId>d&&(d=_.annotationId)}}catch(y){u.e(y)}finally{u.f()}return d}function T(t){var d=(0,p.useState)(),u=(0,I.Z)(d,2),g=u[0],_=u[1],y=function(P,m){var S;if(!(t.currentTool!="brush"&&t.currentTool!="rubber")){var v=P.evt.offsetX/m,h=P.evt.offsetY/m,a=R(t.currentTool,P.evt.button),r=M(t.brushSize||10,(S=t.currentLabel)===null||S===void 0?void 0:S.color,[v,h,v,h],a);if(!!r)if(_(a),t.currentAnnotation){var Z,W={tool:"brush",annotationId:t.currentAnnotation.annotationId,label:t.currentAnnotation.label,lines:(Z=t.currentAnnotation.lines)===null||Z===void 0?void 0:Z.concat([r])};t.onAnnotationModify(W)}else{if(a=="rubber")return;t.onAnnotationAdd({tool:"brush",annotationId:x(t.annotations)+1,label:t.currentLabel,lines:[r]})}}},f=function(P,m){var S;if(!(!g||!t.currentAnnotation)){var v=P.evt.offsetX/m,h=P.evt.offsetY/m,a=[v,h],r=[];(S=t.currentAnnotation)!==null&&S!==void 0&&S.lines&&(a=t.currentAnnotation.lines[t.currentAnnotation.lines.length-1].points.concat(a),r=t.currentAnnotation.lines);var Z=M(t.brushSize||10,t.currentLabel.color,a,g);!Z||(r.pop(),r.push(Z),t.onAnnotationModify((0,K.Z)((0,K.Z)({},t.currentAnnotation),{},{lines:r})))}},s=function(){t.currentTool!="brush"&&t.currentTool!="rubber"||(_(void 0),t.onMouseUp())};return{onMouseDown:y,onMouseMove:f,onMouseUp:s,createElementsFunc:C}}},58967:function(O,j,n){"use strict";var K=n(20136),I=n(55241),z=n(77883),p=n(70507),N=n(57663),A=n(71577),M=n(2824),C=n(67294),R=n(61541),x=n(57560),T=n.n(x),t=n(85893),d=1,u=50,g=10;function _(f){return f?f<=d?d:f>=u?u:f:g}var y=function(s){var b=(0,C.useState)(_(s.size)),P=(0,M.Z)(b,2),m=P[0],S=P[1],v=function(a){S(_(a))};return(0,C.useEffect)(function(){v(s.size)},[s.size]),(0,t.jsxs)(I.Z,{overlayClassName:T().popover,placement:"right",content:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(A.Z,{type:"text",onClick:function(){var a,r=_(m-1);v(r),(a=s.onChange)===null||a===void 0||a.call(0,r)},children:"-"}),(0,t.jsx)(p.Z,{min:d,max:u,value:m,onChange:function(a){var r;(r=s.onChange)===null||r===void 0||r.call(0,a)},controls:!1,style:{textAlign:"center"}}),(0,t.jsx)(A.Z,{type:"text",onClick:function(){var a,r=_(m+1);v(r),(a=s.onChange)===null||a===void 0||a.call(0,r)},children:"+"})]}),trigger:s.active?"hover":"click",children:[" ",(0,t.jsx)(R.Z,{active:s.active,imgSrc:s.imgSrc||"./pics/buttons/brush.png",onClick:s.onClick,children:s.children||"Brush"})]})};j.Z=y},27992:function(O,j,n){"use strict";var K=n(20136),I=n(55241),z=n(77883),p=n(70507),N=n(57663),A=n(71577),M=n(2824),C=n(67294),R=n(61541),x=n(26647),T=n.n(x),t=n(85893),d=1,u=100,g=10;function _(f){return f?f<=d?d:f>=u?u:f:g}var y=function(s){var b=(0,C.useState)(_(s.size)),P=(0,M.Z)(b,2),m=P[0],S=P[1],v=function(a){S(_(a))};return(0,C.useEffect)(function(){v(s.size)},[s.size]),(0,t.jsxs)(I.Z,{overlayClassName:"".concat(T().popover," ").concat(s.disLoc=="left"?T().popoverLeft:""),placement:s.disLoc||"right",content:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(A.Z,{type:"text",onClick:function(){var a,r=_(m-1);v(r),(a=s.onChange)===null||a===void 0||a.call(0,r)},children:"-"}),(0,t.jsx)(p.Z,{min:d,max:u,value:m,onChange:function(a){var r;(r=s.onChange)===null||r===void 0||r.call(0,a)},controls:!1,style:{textAlign:"center"}}),(0,t.jsx)(A.Z,{type:"text",onClick:function(){var a,r=_(m+1);v(r),(a=s.onChange)===null||a===void 0||a.call(0,r)},children:"+"})]}),trigger:"hover",children:[" ",(0,t.jsx)(R.Z,{imgSrc:s.imgSrc,onClick:s.onClick,children:s.children})]})};j.Z=y},21028:function(O,j,n){"use strict";n.r(j),n.d(j,{MOST_HISTORY_STEPS:function(){return F},default:function(){return mn}});var K=n(57663),I=n(71577),z=n(20136),p=n(55241),N=n(34669),A=n(54458),M=n(2824),C=n(67294),R=n(75721),x=n.n(R),T=n(8088),t=n(61541),d=n(44434),u=n(58967),g=n(27992),_=n(5041),y=n(57436),f=n(14836),s=n(29919),b=n(43801),P=n(13931),m=n(13062),S=n(71230),v=n(66126),h=n(75454),a=n(89032),r=n(15746),Z=n(8982),W=n.n(Z),e=n(85893),vn=function(J){return(0,e.jsxs)("div",{children:[(0,e.jsxs)(S.Z,{children:[(0,e.jsx)(r.Z,{span:6,className:W().Pop1,children:(0,e.jsx)("span",{children:"Ww"})}),(0,e.jsx)(r.Z,{span:18,className:W().Pop2,children:(0,e.jsx)(h.Z,{min:1,max:J.wwValue||100,defaultValue:37})})]}),(0,e.jsxs)(S.Z,{children:[(0,e.jsx)(r.Z,{span:6,className:W().Pop1,children:(0,e.jsx)("span",{children:"Wl"})}),(0,e.jsx)(r.Z,{span:18,className:W().Pop2,children:(0,e.jsx)(h.Z,{min:1,max:J.wlValue||100,defaultValue:37})})]})]})},_n=vn,F=40,fn=function(){var J=(0,C.useState)(void 0),q=(0,M.Z)(J,2),D=q[0],H=q[1],gn=(0,C.useState)({color:"",name:""}),nn=(0,M.Z)(gn,2),V=nn[0],tn=nn[1],Pn=(0,C.useState)(),en=(0,M.Z)(Pn,2),L=en[0],$=en[1],Sn=(0,C.useState)([]),on=(0,M.Z)(Sn,2),E=on[0],Cn=on[1],Mn=(0,C.useState)(10),rn=(0,M.Z)(Mn,2),X=rn[0],an=rn[1],xn=(0,C.useState)(1),sn=(0,M.Z)(xn,2),G=sn[0],Q=sn[1],ln=function(o){o||Q(1),o<.1||o>3?Q(1):Q(o)},B=function(o){$(o),o!=null&&o.label&&tn(o.label)},U=function(o){Cn(o)};(0,C.useEffect)(function(){localStorage.removeItem("history"),Y([])},[]);function Y(i,o){var l=localStorage.getItem("history"),c=l?JSON.parse(l):{index:-1,items:[]},dn={currentAnnotation:o,annotations:i};if(JSON.stringify(c.items[c.index])!=JSON.stringify(dn)){var On=c.index>F?c.index-F:0,bn=c.items.splice(On,c.index==0?1:c.index+1);c.items=bn.concat([dn]),c.index<=F?c.index++:c.index=F+1,localStorage.setItem("history",JSON.stringify(c))}}var En=function(){var o=localStorage.getItem("history");if(!!o){var l=JSON.parse(o);if(!!l&&!(l.index>=l.items.length-1)){l.index++,localStorage.setItem("history",JSON.stringify(l));var c=l.items[l.index];$(c.currentAnnotation),U(c.annotations)}}},An=function(){var o=localStorage.getItem("history");if(!!o){var l=JSON.parse(o);if(!(!l||!l.index)&&!(l.index<=0)){l.index--,localStorage.setItem("history",JSON.stringify(l));var c=l.items[l.index];$(c.currentAnnotation),U(c.annotations)}}},k=function(o){for(var l=[],c=0;c<E.length;c++)E[c].annotationId==o.annotationId?l.push(o):l.push(E[c]);B(o),U(l)},un=(0,b.Z)({currentLabel:V,brushSize:X,currentTool:D,annotations:E,currentAnnotation:L,onAnnotationAdd:function(o){var l=E.concat([o]);U(l),L||B(o)},onAnnotationModify:k,onMouseUp:function(){Y(E,L)}}),cn=(0,P.Z)({currentLabel:V,brushSize:X,currentTool:D,annotations:E,currentAnnotation:L,onAnnotationAdd:function(o){var l=E.concat([o]);U(l),L||B(o)},onAnnotationModify:k,onMouseUp:function(){Y(E,L)}}),w=D=="polygon"?cn:un;return(0,e.jsxs)(T.Z,{className:x().segment,children:[(0,e.jsxs)(d.Z,{children:[(0,e.jsx)(t.Z,{imgSrc:"./pics/buttons/intelligent_interaction.png",children:"Intelligent Interaction"}),(0,e.jsx)(s.Z,{active:D=="polygon",onClick:function(){H("polygon"),B(void 0)},children:"Polygon"}),(0,e.jsx)(u.Z,{size:X,active:D=="brush",onClick:function(){D!="rubber"&&D!="brush"&&B(void 0),H("brush")},onChange:function(o){an(o)},children:"Brush"}),(0,e.jsx)(u.Z,{size:X,active:D=="rubber",onClick:function(){D!="rubber"&&D!="brush"&&B(void 0),H("rubber")},onChange:function(o){an(o)},imgSrc:"./pics/buttons/rubber.png",children:"Rubber"}),(0,e.jsx)(t.Z,{imgSrc:"./pics/buttons/zoom_in.png",onClick:function(){ln(G+.1)},children:"Zoom in"}),(0,e.jsx)(t.Z,{imgSrc:"./pics/buttons/zoom_out.png",onClick:function(){ln(G-.1)},children:"Zoom out"}),(0,e.jsx)(t.Z,{imgSrc:"./pics/buttons/save.png",children:"Save"}),(0,e.jsx)(t.Z,{imgSrc:"./pics/buttons/move.png",onClick:function(){H("mover")},children:"Move"}),(0,e.jsx)(t.Z,{imgSrc:"./pics/buttons/export.png",children:"Export"}),(0,e.jsx)(t.Z,{imgSrc:"./pics/buttons/data_division.png",children:"Divide Data"}),(0,e.jsx)(t.Z,{imgSrc:"./pics/buttons/prev.png",onClick:function(){An()},children:"Undo"}),(0,e.jsx)(t.Z,{imgSrc:"./pics/buttons/next.png",onClick:function(){En()},children:"Redo"}),(0,e.jsx)(t.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:"Clear Mark"})]}),(0,e.jsxs)("div",{className:x().mainStage,children:[(0,e.jsx)("div",{className:x().draw,children:(0,e.jsx)(y.Z,{scale:G,annotations:E,currentTool:D,currentAnnotation:L,setCurrentAnnotation:B,onAnnotationModify:k,onAnnotationModifyComplete:function(){Y(E,L)},onMouseDown:w.onMouseDown,onMouseMove:w.onMouseMove,onMouseUp:w.onMouseUp,createPolygonFunc:cn.createElementsFunc,createBrushFunc:un.createElementsFunc})}),(0,e.jsx)("div",{className:x().pblock,children:(0,e.jsx)("div",{className:x().progress,children:(0,e.jsx)(A.Z,{percent:50,status:"active"})})})]}),(0,e.jsxs)(d.Z,{disLoc:"right",children:[(0,e.jsx)(g.Z,{imgSrc:"./pics/buttons/threshold.png",disLoc:"left",children:"Segment Threshold"}),(0,e.jsx)(g.Z,{imgSrc:"./pics/buttons/alpha.png",disLoc:"left",children:"Diaphaneity"}),(0,e.jsx)(g.Z,{imgSrc:"./pics/buttons/radius.png",disLoc:"left",children:"Visual Radius"}),(0,e.jsxs)(p.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Setting of medical",content:(0,e.jsx)(_n,{}),trigger:"hover",children:[" ",(0,e.jsx)(t.Z,{imgSrc:"./pics/buttons/medical_setting.png",children:"Medical Setting"})]})]}),(0,e.jsxs)("div",{className:x().rightSideBar,children:[(0,e.jsx)("div",{className:x().determinOutline,children:(0,e.jsx)(I.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",block:!0,onClick:function(){B(void 0)},children:"Determine Outline"})}),(0,e.jsx)(_.Z,{selectedLabel:V,onLabelSelect:function(o){tn(o),B(void 0)},onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}}),(0,e.jsx)(f.Z,{selectedAnnotation:L,annotations:E,onAnnotationSelect:function(o){o!=null&&o.delete||B(o)},onAnnotationAdd:function(){},onAnnotationModify:function(){},onAnnotationDelete:function(o){U(E.filter(function(l){return l.annotationId!=o.annotationId})),B(void 0)}})]})]})},mn=fn}}]);
