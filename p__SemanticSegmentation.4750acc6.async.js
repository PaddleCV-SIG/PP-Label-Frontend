(self.webpackChunkpp_labeling_frontend=self.webpackChunkpp_labeling_frontend||[]).push([[540],{54777:function(L){L.exports={segment:"segment___1YMcl",mainStage:"mainStage___2otee",rightSideBar:"rightSideBar___2X7jK",determinOutline:"determinOutline___2ls57"}},47e3:function(L,D,i){"use strict";i.r(D),i.d(D,{default:function(){return q}});var en=i(57663),E=i(71577),S=i(2824),b=i(67294),X=i(54777),M=i.n(X),Y=i(8088),s=i(61541),F=i(44434),B=i(58967),K=i(5041),k=i(57436),H=i(14836),t=i(85893),W=function(e){return(0,t.jsx)(s.Z,{active:e.active,imgSrc:e.imgSrc||"./pics/buttons/polygon.png",onClick:e.onClick,children:e.children})},G=W,J=i(43801),Q=i(91220),O=i(65031);function V(o){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}function z(o,e,u){if(console.log(o,e),!(!o||!e)){var a=V(o);if(!!a){var r=void 0,c=[];return e.forEach(function(f){if(!r){r=f;return}c.push((0,t.jsx)(O.Cd,{x:r,y:f,radius:5,fill:o})),r=void 0}),console.log(a),console.log(c),{color:o,points:e,element:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(O.x1,{stroke:o,strokeWidth:2,globalCompositeOperation:"source-over",lineCap:"round",points:e,tension:.01,closed:u,fill:"rgba(".concat(a.r,", ").concat(a.g,", ").concat(a.b,", 0.5)")}),c]})}}}}function p(o){var e=0,u=(0,Q.Z)(o),a;try{for(u.s();!(a=u.n()).done;){var r=a.value;!r||r.annotationId>e&&(e=r.annotationId)}}catch(c){u.e(c)}finally{u.f()}return e}function w(o){console.log("drawPolygon");var e=function(r){if(console.log(o.currentAnnotation),o.currentAnnotation){var g,m,A,j=((g=o.currentAnnotation)===null||g===void 0?void 0:g.lines)||[],v=z((m=o.currentLabel)===null||m===void 0?void 0:m.color,(A=j[0])===null||A===void 0?void 0:A.points.concat([r.evt.offsetX,r.evt.offsetY]));if(!v)return;var C={annotationId:o.currentAnnotation.annotationId,label:o.currentAnnotation.label,lines:[v]};o.onAnnotationModify(C),console.log(C)}else{var c,f=z((c=o.currentLabel)===null||c===void 0?void 0:c.color,[r.evt.offsetX,r.evt.offsetY]);if(!f)return;o.onAnnotationAdd({annotationId:p(o.annotations)+1,label:o.currentLabel,lines:[f]})}},u=function(){};return{onMouseDown:e,onMouseMove:function(){},onMouseUp:u}}var $=function(){var e=(0,b.useState)(void 0),u=(0,S.Z)(e,2),a=u[0],r=u[1],c=(0,b.useState)({color:"",name:""}),f=(0,S.Z)(c,2),g=f[0],m=f[1],A=(0,b.useState)(),j=(0,S.Z)(A,2),v=j[0],C=j[1],_=(0,b.useState)([]),T=(0,S.Z)(_,2),d=T[0],Z=T[1],nn=(0,b.useState)(10),U=(0,S.Z)(nn,2),y=U[0],R=U[1],h=function(n){C(n),n!=null&&n.label&&m(n.label)},N=function(n){for(var x=[],P=0;P<d.length;P++)d[P].annotationId==n.annotationId?x.push(n):x.push(d[P]);h(n),Z(x)},tn=(0,J.Z)({currentLabel:g,brushSize:y,currentTool:a,annotations:d,currentAnnotation:v,onAnnotationAdd:function(n){Z(d.concat([n])),v||h(n)},onAnnotationModify:N}),on=w({currentLabel:g,brushSize:y,currentTool:a,annotations:d,currentAnnotation:v,onAnnotationAdd:function(n){Z(d.concat([n])),v||h(n)},onAnnotationModify:N}),I=a=="brush"?tn:on;return(0,t.jsxs)(Y.Z,{className:M().segment,children:[(0,t.jsxs)(F.Z,{children:[(0,t.jsx)(s.Z,{imgSrc:"./pics/buttons/intelligent_interaction.png",children:"Intelligent Interaction"}),(0,t.jsx)(G,{active:a=="polygon",onClick:function(){r("polygon")},children:"Polygon"}),(0,t.jsx)(B.Z,{size:y,active:a=="brush",onClick:function(){r("brush")},onChange:function(n){R(n)},children:"Brush"}),(0,t.jsx)(B.Z,{size:y,active:a=="rubber",onClick:function(){r("rubber")},onChange:function(n){R(n)},imgSrc:"./pics/buttons/rubber.png",children:"Rubber"}),(0,t.jsx)(s.Z,{imgSrc:"./pics/buttons/zoom_in.png",children:"Zoom in"}),(0,t.jsx)(s.Z,{imgSrc:"./pics/buttons/zoom_out.png",children:"Zoom out"}),(0,t.jsx)(s.Z,{imgSrc:"./pics/buttons/save.png",children:"Save"}),(0,t.jsx)(s.Z,{imgSrc:"./pics/buttons/move.png",children:"Move"}),(0,t.jsx)(s.Z,{imgSrc:"./pics/buttons/export.png",children:"Export"}),(0,t.jsx)(s.Z,{imgSrc:"./pics/buttons/data_division.png",children:"Divide Data"}),(0,t.jsx)(s.Z,{imgSrc:"./pics/buttons/prev.png",children:"Undo"}),(0,t.jsx)(s.Z,{imgSrc:"./pics/buttons/next.png",children:"Redo"}),(0,t.jsx)(s.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:"Clear Mark"})]}),(0,t.jsx)("div",{className:M().mainStage,children:(0,t.jsx)(k.Z,{annotations:d,onMouseDown:I.onMouseDown,onMouseMove:I.onMouseMove,onMouseUp:I.onMouseUp})}),(0,t.jsxs)("div",{className:M().rightSideBar,children:[(0,t.jsx)("div",{className:M().determinOutline,children:(0,t.jsx)(E.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",block:!0,onClick:function(){h(void 0)},children:"Determine Outline"})}),(0,t.jsx)(K.Z,{selectedLabel:g,onLabelSelect:function(n){m(n),h(void 0)},onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}}),(0,t.jsx)(H.Z,{selectedAnnotation:v,annotations:d,onAnnotationSelect:function(n){n!=null&&n.delete||h(n)},onAnnotationAdd:function(){},onAnnotationModify:function(){},onAnnotationDelete:function(n){Z(d.filter(function(x){return x.annotationId!=n.annotationId})),h(void 0)}})]})]})},q=$}}]);
