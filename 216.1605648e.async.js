(self.webpackChunkpp_labeling_frontend=self.webpackChunkpp_labeling_frontend||[]).push([[216],{85024:function(r){r.exports={listItem:"listItem___u4Q82",eye:"eye___BwaRm",delete:"delete___31JB_",roundBall:"roundBall___23A7l",popover:"popover___1BNET",annotationId:"annotationId___zAzX4",labelName:"labelName___2ohxn",listItemActive:"listItemActive___2QnA3"}},56159:function(r){r.exports={labelList:"labelList___v7C6K",listHeader:"listHeader___1aY8R",eye:"eye___2MKbp",roundBall:"roundBall___187XH"}},52822:function(r){r.exports={roundBall:"roundBall___1pqu1",popover:"popover___1-PR6"}},5882:function(r){r.exports={listItem:"listItem___vtDXn",eye:"eye___AsLBS",roundBall:"roundBall___1J_R3",popover:"popover___1x-2R",listItemActive:"listItemActive___3FRb7"}},56131:function(r){r.exports={labelList:"labelList___jvD05",listHeader:"listHeader___UM5UF",eye:"eye___II3Po",roundBall:"roundBall___j752J"}},78677:function(r){r.exports={container:"container___G0FNe"}},83930:function(r){r.exports={stage:"stage___3H5QL"}},80961:function(r){r.exports={leftToolbar:"leftToolbar___1xi4t",rightToolbar:"rightToolbar___3dNSB"}},82499:function(r){r.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1SHWL",toolBarButtonContainer:"toolBarButtonContainer___1jKUz",toolBarButton:"toolBarButton___3Ouq1",buttonText:"buttonText___10ls7",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AA28"}},14836:function(r,E,n){"use strict";n.d(E,{Z:function(){return A}});var j=n(54421),f=n(38272),D=n(57663),a=n(71577),d=n(67294),l=n(56159),M=n.n(l),g=n(49111),L=n(19650),t=n(2824),s=n(11849),x=n(85024),o=n.n(x),v=n(63097),e=n(85893),i=function(u){var m=(0,s.Z)({},u.annotation),C=(0,d.useState)(m.invisible),_=(0,t.Z)(C,2),h=_[0],T=_[1];(0,d.useEffect)(function(){T(u.annotation.invisible)},[u.annotation.invisible]);var S=(0,e.jsxs)(f.ZP.Item,{className:"".concat(o().listItem," ").concat(u.active?o().listItemActive:""),unselectable:"on",onClick:function(){u.onClick(m)},children:[(0,e.jsxs)(L.Z,{align:"center",size:5,children:[(0,e.jsx)("a",{className:o().eye,style:{backgroundImage:h?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(){T(!h),u.onAnnotationModify(m)}})," ",(0,e.jsx)("span",{className:o().annotationId,children:m.annotationId}),(0,e.jsx)("span",{className:o().labelName,children:m.label.name}),(0,e.jsx)(v.Z,{color:m.label.color})]}),(0,e.jsx)("a",{className:o().delete,onClick:function(){m.delete=!0,u.onAnnotationDelete(m)}})]});return S},c=i,b=function(u){return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(f.ZP,{className:M().labelList,size:"large",header:(0,e.jsx)("div",{className:M().listHeader,children:"Annotation List"}),bordered:!0,dataSource:u.annotations,renderItem:function(C){var _;return(0,e.jsx)(c,{onClick:u.onAnnotationSelect,annotation:C,active:C.annotationId==((_=u.selectedAnnotation)===null||_===void 0?void 0:_.annotationId),onAnnotationDelete:u.onAnnotationDelete,onAnnotationModify:u.onAnnotationModify})},footer:(0,e.jsx)("div",{children:(0,e.jsx)(a.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){u.onAnnotationSelect(void 0)},block:!0,children:"Add Annotation"})})})})},A=b},63097:function(r,E,n){"use strict";var j=n(20136),f=n(55241),D=n(2824),a=n(67294),d=n(52822),l=n.n(d),M=n(63144),g=n(85893),L=function(s){var x=(0,a.useState)(s.color||"#FFF"),o=(0,D.Z)(x,2),v=o[0],e=o[1];return(0,a.useEffect)(function(){e(s.color||"#FFF")},[s]),s.changeable?(0,g.jsx)(f.Z,{getPopupContainer:function(c){return c.parentElement||document.body},overlayClassName:l().popover,openClassName:l().popoverOpenClassName,placement:"bottom",content:(0,g.jsx)(M.xS,{disableAlpha:!0,color:v,onChange:function(c){e(c.hex)},onChangeComplete:s.onChange}),trigger:"click",children:(0,g.jsx)("div",{className:l().roundBall,style:{backgroundColor:v}})}):(0,g.jsx)("div",{className:l().roundBall,style:{backgroundColor:v}})};E.Z=L},5041:function(r,E,n){"use strict";n.d(E,{Z:function(){return z}});var j=n(54421),f=n(38272),D=n(57663),a=n(71577),d=n(2824),l=n(67294),M=n(56131),g=n.n(M),L=n(49111),t=n(19650),s=n(11849),x=n(5882),o=n.n(x),v=n(63097),e=n(85893),i=function(P){var O=(0,s.Z)({},P.label),U=(0,l.useState)(O.invisible),F=(0,d.Z)(U,2),Z=F[0],H=F[1],W=(0,e.jsx)(f.ZP.Item,{className:"".concat(o().listItem," ").concat(P.active?o().listItemActive:""),unselectable:"on",onClick:function(){P.onClick(O)},children:(0,e.jsxs)(t.Z,{align:"center",size:5,children:[(0,e.jsx)("a",{className:o().eye,style:{backgroundImage:Z?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(){H(!Z),P.onLabelModify(O)}})," ",O.name,(0,e.jsx)(v.Z,{color:O.color,changeable:!0,onChange:function(R){O.color=R.hex,P.onLabelModify(O)}})]})});return W},c=i,b=n(71194),A=n(50146),B=n(47673),u=n(24044),m=n(9715),C=n(93766),_=["#FF0000","#008000","#0000FF","#FFFF00","#FFA500","#00FFFF","#8B00FF","#FFC0CB","#7CFC00","#007FFF","#800080","#36BF36","#DAA520","#800000","#008B8B","#B22222","#E6D933","#000080","#FF00FF","#FFFF99","#87CEEB","#5C50E6","#CD5C5C","#20B2AA","#E680FF","#4D1F00","#006374","#B399FF","#8B4513","#BA55D3","#C0C0C0","#808080","#000000"],h=function(P){var O,U,F=(0,l.useState)(((O=P.defaultLabel)===null||O===void 0?void 0:O.color)||_[P.order||0]),Z=(0,d.Z)(F,2),H=Z[0],W=Z[1];(0,l.useEffect)(function(){var I;W(((I=P.defaultLabel)===null||I===void 0?void 0:I.color)||_[P.order||0])},[P]);var X=C.Z.useForm(),R=(0,d.Z)(X,1),K=R[0];return(0,e.jsx)(A.Z,{title:"Add Label",visible:P.visible,onCancel:P.onCancel,footer:null,children:(0,e.jsxs)(C.Z,{form:K,name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!1,labelname:(U=P.defaultLabel)===null||U===void 0?void 0:U.name},onFinish:function(y){var Y={name:y.labelname,color:H};P.onLabelAdd(Y),K.resetFields()},autoComplete:"off",children:[(0,e.jsx)(C.Z.Item,{label:"Label Name",name:"labelname",rules:[{required:!0,message:"Please input label name!"}],children:(0,e.jsx)(u.Z,{})}),(0,e.jsx)(C.Z.Item,{label:"Select Color",name:"color",children:(0,e.jsx)(v.Z,{color:H,onChange:function(y){W(y.hex)}})}),(0,e.jsx)(C.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,e.jsxs)(t.Z,{children:[(0,e.jsx)(a.Z,{onClick:function(){var y;(y=P.onCancel)===null||y===void 0||y.call(0),K.resetFields()},children:"\u53D6\u6D88"}),(0,e.jsx)(a.Z,{type:"primary",htmlType:"submit",children:"\u786E\u5B9A"})]})})]})})},T=h,S=[{color:"#FF0000",name:"Label 1"},{color:"#008000",name:"Label 2"}],N=function(P){var O=(0,l.useState)(S),U=(0,d.Z)(O,2),F=U[0],Z=U[1],H=(0,l.useState)(!1),W=(0,d.Z)(H,2),X=W[0],R=W[1];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(f.ZP,{className:g().labelList,size:"large",header:(0,e.jsx)("div",{className:g().listHeader,children:"Label List"}),footer:(0,e.jsx)("div",{children:(0,e.jsx)(a.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){R(!0)},block:!0,children:"Add Label"})}),bordered:!0,dataSource:F,renderItem:function(I){var y;return(0,e.jsx)(c,{onClick:P.onLabelSelect,label:I,active:I.name==((y=P.selectedLabel)===null||y===void 0?void 0:y.name),onLabelDelete:P.onLabelDelete,onLabelModify:P.onLabelModify})}}),(0,e.jsx)(T,{order:F.length,visible:X,onLabelAdd:function(I){F.push(I),Z(F),R(!1)},onCancel:function(){R(!1)}})]})},z=N},8088:function(r,E,n){"use strict";var j=n(67294),f=n(78677),D=n.n(f),a=n(85893),d=function(M){return(0,a.jsx)("div",{className:"".concat(D().container," ").concat(M.className),children:M.children})};E.Z=d},13931:function(r,E,n){"use strict";n.d(E,{Z:function(){return L}});var j=n(91220),f=n(11849),D=n(65031),a=n(85893);function d(t){var s=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return s?{r:parseInt(s[1],16),g:parseInt(s[2],16),b:parseInt(s[3],16)}:null}function l(t,s){if(!(!t||!s))return{color:t,points:s}}function M(t,s,x,o,v,e,i){if(!t||!t.lines||!t.lines[0])return[(0,a.jsx)(a.Fragment,{})];var c=t.lines[0].points,b=t.lines[0].color,A=d(b);if(!A)return[(0,a.jsx)(a.Fragment,{})];var B=(i==null?void 0:i.annotationId)==t.annotationId,u=B?.5:.1,m=void 0,C=[];return c.forEach(function(_,h){if(!m){m=_;return}C.push((0,a.jsx)(D.Cd,{onMouseDown:function(){v=="mover"&&e(t)},draggable:v=="mover",onDragMove:function(S){console.log("Circle onDrageMove");var N=S.evt.offsetX/o,z=S.evt.offsetY/o;c[h-1]=N,c[h]=z;var $=(0,f.Z)((0,f.Z)({},t),{},{lines:[{color:b,points:c}]});s($)},onMouseOver:function(){console.log("Circle onMouseOver"),v=="mover"&&(document.body.style.cursor="pointer")},onMouseOut:function(){console.log("Circle onMouseOut"),document.body.style.cursor="default"},x:m,y:_,radius:5,fill:b})),m=void 0}),[(0,a.jsxs)(D.ZA,{children:[(0,a.jsx)(D.x1,{onMouseOver:function(){v=="mover"&&(document.body.style.cursor="pointer")},onMouseOut:function(){document.body.style.cursor="default"},onClick:function(){v=="mover"&&e(t)},stroke:b,strokeWidth:2,globalCompositeOperation:"source-over",lineCap:"round",points:c,tension:0,closed:!0,fill:"rgba(".concat(A.r,", ").concat(A.g,", ").concat(A.b,", ").concat(u,")")}),C]},t.annotationId)]}function g(t){var s=0,x=(0,j.Z)(t),o;try{for(x.s();!(o=x.n()).done;){var v=o.value;!v||v.annotationId>s&&(s=v.annotationId)}}catch(e){x.e(e)}finally{x.f()}return s}function L(t){var s=function(i,c){var b,A=i.evt.offsetX/c,B=i.evt.offsetY/c,u=l((b=t.currentLabel)===null||b===void 0?void 0:b.color,[A,B]);!u||t.onAnnotationAdd({tool:"polygon",annotationId:g(t.annotations)+1,label:t.currentLabel,lines:[u]})},x=function(i,c){var b,A;if(!!t.currentAnnotation){var B=i.evt.offsetX/c,u=i.evt.offsetY/c,m=t.currentAnnotation.lines||[],C=l((b=t.currentLabel)===null||b===void 0?void 0:b.color,(A=m[0])===null||A===void 0?void 0:A.points.concat([B,u]));if(!!C){var _={tool:"polygon",annotationId:t.currentAnnotation.annotationId,label:t.currentAnnotation.label,lines:[C]};t.onAnnotationModify(_)}}},o=function(i,c){t.currentTool=="polygon"&&(t.currentAnnotation?x(i,c):s(i,c))},v=function(){t.currentTool=="polygon"&&t.onMouseUp()};return{onMouseDown:o,onMouseMove:function(){},onMouseUp:v,createElementsFunc:M}}},29919:function(r,E,n){"use strict";var j=n(67294),f=n(61541),D=n(85893),a=function(l){return(0,D.jsx)(f.Z,{active:l.active,imgSrc:l.imgSrc||"./pics/buttons/polygon.png",onClick:l.onClick,children:l.children})};E.Z=a},57436:function(r,E,n){"use strict";var j=n(91220),f=n(2824),D=n(67294),a=n(65031),d=n(84420),l=n.n(d),M=n(83930),g=n.n(M),L=n(85893),t="./pics/basketball.jpg",s=function(o){var v=l()(t),e=(0,f.Z)(v,1),i=e[0],c=(i==null?void 0:i.width)||0,b=(i==null?void 0:i.height)||0,A=[];if(o.annotations){var B=(0,j.Z)(o.annotations),u;try{for(B.s();!(u=B.n()).done;){var m=u.value;if(!!m){var C=m.tool=="polygon"?o.createPolygonFunc:o.createBrushFunc;C&&A.push(C(m,o.onAnnotationModify,o.onAnnotationModifyComplete,o.scale,o.currentTool,o.setCurrentAnnotation,o.currentAnnotation))}}}catch(_){B.e(_)}finally{B.f()}}return(0,L.jsxs)(a.Hf,{width:c*o.scale,height:b*o.scale,className:g().stage,children:[(0,L.jsx)(a.mh,{scaleX:o.scale,scaleY:o.scale,draggable:!1,children:(0,L.jsx)(a.Ee,{image:i,draggable:!1})}),(0,L.jsxs)(a.mh,{scaleX:o.scale,scaleY:o.scale,onMouseDown:function(h){o.onMouseDown&&o.onMouseDown(h,o.scale)},onMouseMove:function(h){o.onMouseMove&&o.onMouseMove(h,o.scale)},onMouseUp:function(h){o.onMouseUp&&o.onMouseUp(h,o.scale)},onContextMenu:function(h){h.evt.preventDefault()},draggable:!1,children:[(0,L.jsx)(a.Ee,{draggable:!1,image:i}),A]})]})};E.Z=s},44434:function(r,E,n){"use strict";var j=n(67294),f=n(80961),D=n.n(f),a=n(85893),d=function(M){var g=D().leftToolbar;return M.disLoc=="right"&&(g=D().rightToolbar),(0,a.jsx)("div",{className:g,children:M.children})};E.Z=d},61541:function(r,E,n){"use strict";var j=n(49111),f=n(19650),D=n(67294),a=n(82499),d=n.n(a),l=n(85893),M=function(L){return(0,l.jsx)("div",{unselectable:"on",className:"".concat(d().toolBarButtonContainerWrapper," ").concat(L.active&&d().toolBarButtonContainerWrapperActive),onClick:L.onClick,children:(0,l.jsx)(f.Z,{align:"center",className:d().toolBarButtonContainer,size:0,children:(0,l.jsxs)(f.Z,{align:"center",direction:"vertical",className:d().toolBarButton,size:0,children:[(0,l.jsx)("img",{src:L.imgSrc}),(0,l.jsx)("div",{className:d().buttonText,children:L.children})]})})})};E.Z=M}}]);
