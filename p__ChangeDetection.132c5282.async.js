(self.webpackChunkpp_labeling_frontend=self.webpackChunkpp_labeling_frontend||[]).push([[572],{73762:function(I){I.exports={RSPop1:"RSPop1___2Uh31",RSPop2:"RSPop2___2Q-T8"}},35524:function(I){I.exports={segment:"segment___3c01P",mainStage:"mainStage___2jlIH",draw:"draw___3Ftm7",halfMap:"halfMap___1HRmv",interval:"interval___21ItQ",pblock:"pblock___10iZ8",progress:"progress___wlToW",rightSideBar:"rightSideBar___25YC7",determinOutline:"determinOutline___2lYb0"}},76233:function(I,U,t){"use strict";t.r(U),t.d(U,{default:function(){return re}});var je=t(34669),H=t(54458),Ze=t(20136),C=t(55241),ye=t(49111),Q=t(19650),Pe=t(62350),W=t(75443),Re=t(57663),m=t(71577),j=t(2824),x=t(67294),K=t(35524),f=t.n(K),$=t(8088),s=t(61541),X=t(44434),w=t(5041),q=t(49813),be=t(98858),p=t(4914),Ce=t(13062),z=t(71230),De=t(59250),Z=t(13013),Me=t(89032),v=t(15746),Le=t(30887),E=t(54689),Ne=t(34792),_=t(48086),O=t(89366),y=t(57254),ee=t(73762),u=t.n(ee),e=t(85893);function ne(l){_.default.info("Click on menu item."),console.log("click",l)}var P=(0,e.jsxs)(E.Z,{onClick:ne,children:[(0,e.jsx)(E.Z.Item,{icon:(0,e.jsx)(O.Z,{}),children:"band_1"},"1"),(0,e.jsx)(E.Z.Item,{icon:(0,e.jsx)(O.Z,{}),children:"band_2"},"2"),(0,e.jsx)(E.Z.Item,{icon:(0,e.jsx)(O.Z,{}),children:"band_3"},"3")]}),te=function(){return(0,e.jsxs)("div",{children:[(0,e.jsxs)(z.Z,{children:[(0,e.jsx)(v.Z,{className:u().RSPop1,children:(0,e.jsx)("span",{children:"R"})}),(0,e.jsx)(v.Z,{className:u().RSPop2,children:(0,e.jsx)(Z.Z,{overlay:P,children:(0,e.jsxs)(m.Z,{style:{width:"100%"},children:["Band ",(0,e.jsx)(y.Z,{})]})})}),(0,e.jsx)(v.Z,{className:u().RSPop1,children:(0,e.jsx)("span",{children:"G"})}),(0,e.jsx)(v.Z,{className:u().RSPop2,children:(0,e.jsx)(Z.Z,{overlay:P,children:(0,e.jsxs)(m.Z,{style:{width:"100%"},children:["Band ",(0,e.jsx)(y.Z,{})]})})}),(0,e.jsx)(v.Z,{className:u().RSPop1,children:(0,e.jsx)("span",{children:"B"})}),(0,e.jsx)(v.Z,{className:u().RSPop2,children:(0,e.jsx)(Z.Z,{overlay:P,children:(0,e.jsxs)(m.Z,{style:{width:"100%"},children:["Band ",(0,e.jsx)(y.Z,{})]})})})]}),(0,e.jsxs)(z.Z,{children:[(0,e.jsx)(v.Z,{className:u().RSPop1,children:(0,e.jsx)("span",{children:"R"})}),(0,e.jsx)(v.Z,{className:u().RSPop2,children:(0,e.jsx)(Z.Z,{overlay:P,children:(0,e.jsxs)(m.Z,{style:{width:"100%"},children:["Band ",(0,e.jsx)(y.Z,{})]})})}),(0,e.jsx)(v.Z,{className:u().RSPop1,children:(0,e.jsx)("span",{children:"G"})}),(0,e.jsx)(v.Z,{className:u().RSPop2,children:(0,e.jsx)(Z.Z,{overlay:P,children:(0,e.jsxs)(m.Z,{style:{width:"100%"},children:["Band ",(0,e.jsx)(y.Z,{})]})})}),(0,e.jsx)(v.Z,{className:u().RSPop1,children:(0,e.jsx)("span",{children:"B"})}),(0,e.jsx)(v.Z,{className:u().RSPop2,children:(0,e.jsx)(Z.Z,{overlay:P,children:(0,e.jsxs)(m.Z,{style:{width:"100%"},children:["Band ",(0,e.jsx)(y.Z,{})]})})})]}),(0,e.jsxs)(p.Z,{title:"Data source information",column:1,bordered:!0,children:[(0,e.jsx)(p.Z.Item,{label:"FileName",children:"A/XXX.tif B/XXX.tf"}),(0,e.jsx)(p.Z.Item,{label:"Row",children:"1234"}),(0,e.jsx)(p.Z.Item,{label:"Column",children:"897"}),(0,e.jsx)(p.Z.Item,{label:"Bands",children:"7 7"}),(0,e.jsx)(p.Z.Item,{label:"DataType",children:"UInt16"}),(0,e.jsx)(p.Z.Item,{label:"EPSG",children:"7030"}),(0,e.jsx)(p.Z.Item,{label:"Unit",children:"m"})]})]})},le=te,oe=t(97927),F=t(37233),ae=t(51327),B=t(11849);function ie(l){var G=(0,x.useState)(0),D=(0,j.Z)(G,2),g=D[0],R=D[1],T=(0,x.useState)(!1),M=(0,j.Z)(T,2),L=M[0],h=M[1],V=(0,x.useState)(l.currentLabel),N=(0,j.Z)(V,2),r=N[0],J=N[1];(0,x.useEffect)(function(){J(l.currentLabel)},[l.currentLabel]);var c=function(){var n,d=(n=l.leafletMapRef.current)===null||n===void 0?void 0:n.leafletElement.pm.globalDrawModeEnabled();console.log(d)},i=function(n){if(h(!0),r){var d,S;(d=l.leafletMapRef.current)===null||d===void 0||d.leafletElement.pm.enableDraw(n),(S=l.leafletMapRef.current)===null||S===void 0||S.leafletElement.pm.setPathOptions({color:r==null?void 0:r.color,fillColor:r==null?void 0:r.color,fillOpacity:.4})}else{var k;(k=l.leafletMapRef.current)===null||k===void 0||k.leafletElement.pm.disableDraw(n),h(!1)}},o=function(n){var d;(d=l.leafletMapRef.current)===null||d===void 0||d.leafletElement.pm.disableDraw(n),h(!1),c()},b=function(){var n;return(n=l.leafletMapRef.current)===null||n===void 0?void 0:n.leafletElement.pm.Draw.getActiveShape()},ce=function(){if(b()=="Polygon"){var n;(n=l.leafletMapRef.current)===null||n===void 0||n.leafletElement.pm.Draw.Polygon._removeLastVertex(),c()}else c(),h(!1)},de=function(){var n;(n=l.leafletMapRef.current)===null||n===void 0||n.leafletElement.pm.toggleGlobalDragMode(),c()},ve=function(){if(b()=="Polygon"){var n;(n=l.leafletMapRef.current)===null||n===void 0||n.leafletElement.pm.Draw.Polygon._finishShape(),c(),h(!1)}else c(),h(!1)},ue=function(){var n;(n=l.leafletMapRef.current)===null||n===void 0||n.leafletElement.pm.enableGlobalRemovalMode(),c()},he=function(){var n;(n=l.leafletMapRef.current)===null||n===void 0||n.leafletElement.pm.toggleGlobalEditMode(),c(),h(!1)},me=function(){var n;console.log((n=l.leafletMapRef.current)===null||n===void 0?void 0:n.leafletElement.pm.getGeomanDrawLayers(!0)),h(!1)},Y=function(n){var d=n._uid,S=n.toGeoJSON();R(g+1),S.properties={labelName:r==null?void 0:r.name,stroke:r==null?void 0:r.color,annotationId:g+1},console.log("Store Layer on DB. Id:"+d,S),console.log(JSON.stringify(S)),l.setAnnotations((0,B.Z)((0,B.Z)({},l.annotations),{},{features:l.annotations.features.concat(S)})),console.log((0,B.Z)((0,B.Z)({},l.annotations),{},{features:l.annotations.features.concat(S)}))};function fe(a){a.layer.bindPopup("Label: "+a.layer._uid).openPopup(),h(!1),Y(a.layer)}var ge=function(n){Se(n.layer)};function Se(a){var n=a._uid,d=a.toGeoJSON();console.log("Update Layer on DB. Id:"+n,d)}var xe=function(){var n;(n=l.leafletMapRef.current)===null||n===void 0||n.leafletElement.zoomIn(),c()},pe=function(){var n;(n=l.leafletMapRef.current)===null||n===void 0||n.leafletElement.zoomOut(),c()};return{polyVisable:L,RSDraw:i,RSDrawDisable:o,removeLastVertex:ce,moveShape:de,finishShape:ve,removeShape:ue,editMode:he,saveGeoJson:me,storeOnDb:Y,onShapeCreate:fe,onShapeEdit:ge,toolZoomIn:xe,toolZoomOut:pe,currentShape:b}}var A=t(27992),se=function(){var G=(0,x.useState)(void 0),D=(0,j.Z)(G,2),g=D[0],R=D[1],T=(0,x.useState)(),M=(0,j.Z)(T,2),L=M[0],h=M[1],V=(0,x.useState)({type:"FeatureCollection",features:[]}),N=(0,j.Z)(V,2),r=N[0],J=N[1];console.log("rs is re-rendering! currentLabel: ".concat(JSON.stringify(L)));var c=x.useRef(null),i=ie({leafletMapRef:c,currentLabel:L,setAnnotations:J,annotations:r});return(0,e.jsxs)($.Z,{className:f().segment,children:[(0,e.jsxs)(X.Z,{children:[(0,e.jsx)(s.Z,{imgSrc:"./pics/buttons/intelligent_interaction.png",children:"Intelligent Interaction"}),(0,e.jsx)(C.Z,{placement:"rightTop",visible:i.polyVisable,content:(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(Q.Z,{children:[(0,e.jsx)(m.Z,{type:"primary",onClick:function(){i.finishShape()},children:"Finish"}),(0,e.jsx)(m.Z,{type:"primary",onClick:function(){i.removeLastVertex()},children:"Remove Last Vertex"}),(0,e.jsx)(W.Z,{title:"Are you sure cancel this task?",okText:"Yes",cancelText:"No",children:(0,e.jsx)(m.Z,{type:"primary",onClick:function(){i.RSDrawDisable(i.currentShape())},children:"Cancel"})})]})}),trigger:g=="Polygon"?"hover":"click",children:(0,e.jsx)(s.Z,{active:g=="Polygon",imgSrc:"./pics/buttons/polygon.png",onClick:function(){R("Polygon"),i.RSDraw("Polygon")},children:"Polygon"})}),(0,e.jsx)(s.Z,{onClick:function(){i.editMode()},imgSrc:"./pics/buttons/brush.png",children:"Edit"}),(0,e.jsxs)(C.Z,{placement:"rightTop",title:"title",content:"content",trigger:g=="rubber"?"hover":"click",children:[" ",(0,e.jsx)(s.Z,{imgSrc:"./pics/buttons/rubber.png",onClick:function(){i.removeShape()},children:"Rubber"})]}),(0,e.jsx)(s.Z,{onClick:function(){i.toolZoomIn()},imgSrc:"./pics/buttons/zoom_in.png",children:"Zoom in"}),(0,e.jsx)(s.Z,{onClick:function(){i.toolZoomOut()},imgSrc:"./pics/buttons/zoom_out.png",children:"Zoom out"}),(0,e.jsx)(s.Z,{onClick:function(){i.saveGeoJson()},imgSrc:"./pics/buttons/save.png",children:"Save"}),(0,e.jsx)(s.Z,{imgSrc:"./pics/buttons/move.png",onClick:function(){return i.moveShape()},children:"Move"}),(0,e.jsx)(s.Z,{imgSrc:"./pics/buttons/export.png",children:"Export"}),(0,e.jsx)(s.Z,{imgSrc:"./pics/buttons/data_division.png",children:"Divide Data"}),(0,e.jsx)(s.Z,{imgSrc:"./pics/buttons/prev.png",children:"Undo"}),(0,e.jsx)(s.Z,{imgSrc:"./pics/buttons/next.png",children:"Redo"}),(0,e.jsx)(s.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:"Clear Mark"})]}),(0,e.jsxs)("div",{className:f().mainStage,children:[(0,e.jsxs)("div",{className:f().draw,children:[(0,e.jsx)("div",{className:f().halfMap,children:(0,e.jsx)(F.Z,{leafletMapRef:c,onShapeCreate:i.onShapeCreate,onShapeEdit:i.onShapeEdit})}),(0,e.jsx)("div",{className:f().interval}),(0,e.jsx)("div",{className:f().halfMap,children:(0,e.jsx)(F.Z,{leafletMapRef:c,displayTools:!1,onShapeCreate:i.onShapeCreate,onShapeEdit:i.onShapeEdit})})]}),(0,e.jsx)("div",{className:f().pblock,children:(0,e.jsx)("div",{className:f().progress,children:(0,e.jsx)(H.Z,{percent:50,status:"active"})})})]}),(0,e.jsxs)(X.Z,{disLoc:"right",children:[(0,e.jsx)(A.Z,{imgSrc:"./pics/buttons/threshold.png",disLoc:"left",children:"Segment Threshold"}),(0,e.jsx)(A.Z,{imgSrc:"./pics/buttons/alpha.png",disLoc:"left",children:"Diaphaneity"}),(0,e.jsx)(A.Z,{imgSrc:"./pics/buttons/radius.png",disLoc:"left",children:"Visual Radius"}),(0,e.jsxs)(C.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Setting of boundary simplification",content:(0,e.jsx)(q.Z,{}),trigger:g=="boundry"?"click":"hover",children:[" ",(0,e.jsx)(s.Z,{imgSrc:"./pics/buttons/border_simplify.png",onClick:function(){R("boundry")},children:"Boundary"})]}),(0,e.jsxs)(C.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Setting of remote sensing",content:(0,e.jsx)(le,{}),trigger:g=="colorgun"?"click":"hover",children:[" ",(0,e.jsx)(s.Z,{imgSrc:"./pics/buttons/remote_sensing_setting.png",onClick:function(){R("colorgun")},children:"Remote Sensing"})]}),(0,e.jsxs)(C.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Switch grids",content:(0,e.jsx)(oe.Z,{}),trigger:g=="grid"?"click":"hover",children:[" ",(0,e.jsx)(s.Z,{imgSrc:"./pics/buttons/switch_grid.png",onClick:function(){R("grid")},children:"Grids"})]})]}),(0,e.jsxs)("div",{className:f().rightSideBar,children:[(0,e.jsx)("div",{className:f().determinOutline,children:(0,e.jsx)(m.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",block:!0,children:"Determine Outline"})}),(0,e.jsx)(w.Z,{selectedLabel:L,onLabelSelect:function(b){h(b),console.log(b)},onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}}),(0,e.jsx)(ae.Z,{annotations:r,onAnnotationSelect:function(){},onAnnotationAdd:function(){},onAnnotationModify:function(){},onAnnotationDelete:function(){}})]})]})},re=se}}]);
