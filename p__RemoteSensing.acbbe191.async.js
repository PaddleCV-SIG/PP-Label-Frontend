(self.webpackChunkpp_labeling_frontend=self.webpackChunkpp_labeling_frontend||[]).push([[333],{72869:function(d){d.exports={map:"map___92VPN",customControlIcon:"customControlIcon___3Ki2y"}},20474:function(d){d.exports={RSPop1:"RSPop1___vz5Me",RSPop2:"RSPop2___34pQA"}},55252:function(d){d.exports={RSPop1:"RSPop1___17x8k",RSPop2:"RSPop2___27kK5"}},2661:function(d){d.exports={toolbar:"toolbar___1o3he"}},93889:function(d){d.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___UtH8a",toolBarButtonContainer:"toolBarButtonContainer___1gFsH",toolBarButton:"toolBarButton___1Wqc1",buttonText:"buttonText___2zcKO",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AXHi"}},75513:function(d){d.exports={segment:"segment___3WmPw",mainStage:"mainStage___2kT1s",rightSideBar:"rightSideBar___11FX3",determinOutline:"determinOutline___1g1YI"}},15373:function(d,J,n){"use strict";n.r(J),n.d(J,{default:function(){return ye}});var Ne=n(57663),f=n(71577),Me=n(20136),I=n(19181),G=n(2824),R=n(67294),K=n(75513),E=n.n(K),Y=n(8088),u=n(61541),Q=n(44434),w=n(58967),q=n(5041),_=n(14836),ee=n(2661),ne=n.n(ee),e=n(85893),te=function(r){return(0,e.jsx)("div",{className:ne().toolbar,children:r.children})},oe=te,Te=n(49111),V=n(19650),le=n(93889),A=n.n(le),ae=function(r){return(0,e.jsx)("div",{unselectable:"on",className:"".concat(A().toolBarButtonContainerWrapper," ").concat(r.active&&A().toolBarButtonContainerWrapperActive),onClick:r.onClick,children:(0,e.jsx)(V.Z,{align:"center",className:A().toolBarButtonContainer,size:0,children:(0,e.jsxs)(V.Z,{align:"center",direction:"vertical",className:A().toolBarButton,size:0,children:[(0,e.jsx)("img",{src:r.imgSrc}),(0,e.jsx)("div",{className:A().buttonText,children:r.children})]})})})},U=ae,Ie=n(47673),W=n(24044),Ae=n(13062),C=n(71230),De=n(59250),P=n(13013),Le=n(89032),a=n(15746),Ge=n(30887),j=n(54689),Ee=n(34792),$=n(48086),b=n(89366),y=n(57254),re=n(20474),S=n.n(re);function ie(p){$.default.info("Click on menu item."),console.log("click",p)}var se=(0,e.jsxs)(j.Z,{onClick:ie,children:[(0,e.jsx)(j.Z.Item,{icon:(0,e.jsx)(b.Z,{}),children:"1st menu item"},"1"),(0,e.jsx)(j.Z.Item,{icon:(0,e.jsx)(b.Z,{}),children:"2nd menu item"},"2"),(0,e.jsx)(j.Z.Item,{icon:(0,e.jsx)(b.Z,{}),children:"3rd menu item"},"3")]}),ce=function(){return(0,e.jsxs)("div",{children:[(0,e.jsxs)(C.Z,{children:[(0,e.jsx)(a.Z,{span:12,className:S().RSPop1,children:(0,e.jsx)("span",{children:"PD parameter"})}),(0,e.jsx)(a.Z,{span:12,className:S().RSPop2,children:(0,e.jsx)(P.Z,{overlay:se,children:(0,e.jsxs)(f.Z,{style:{width:"100%"},children:["Dropdown ",(0,e.jsx)(y.Z,{})]})})})]}),(0,e.jsxs)(C.Z,{children:[(0,e.jsx)(a.Z,{span:12,className:S().RSPop1,children:(0,e.jsx)("span",{children:"Simplified distance"})}),(0,e.jsx)(a.Z,{span:12,className:S().RSPop2,children:(0,e.jsx)(W.Z,{placeholder:"Basic usage"})})]}),(0,e.jsxs)(C.Z,{children:[(0,e.jsx)(a.Z,{span:12,className:S().RSPop1,children:(0,e.jsx)("span",{children:"Simplified angle"})}),(0,e.jsx)(a.Z,{span:12,className:S().RSPop2,children:(0,e.jsx)(W.Z,{placeholder:"Basic usage"})})]}),(0,e.jsxs)(C.Z,{children:[(0,e.jsx)(a.Z,{span:12,className:S().RSPop1,children:(0,e.jsx)("span",{children:"Threshold of building simplification "})}),(0,e.jsx)(a.Z,{span:12,className:S().RSPop2,children:(0,e.jsx)(W.Z,{placeholder:"Basic usage"})})]})]})},de=ce,Oe=n(98858),Z=n(4914),ue=n(55252),m=n.n(ue);function me(p){$.default.info("Click on menu item."),console.log("click",p)}var N=(0,e.jsxs)(j.Z,{onClick:me,children:[(0,e.jsx)(j.Z.Item,{icon:(0,e.jsx)(b.Z,{}),children:"band_1"},"1"),(0,e.jsx)(j.Z.Item,{icon:(0,e.jsx)(b.Z,{}),children:"band_2"},"2"),(0,e.jsx)(j.Z.Item,{icon:(0,e.jsx)(b.Z,{}),children:"band_3"},"3")]}),he=function(){return(0,e.jsxs)("div",{children:[(0,e.jsxs)(C.Z,{children:[(0,e.jsx)(a.Z,{className:m().RSPop1,children:(0,e.jsx)("span",{children:"R"})}),(0,e.jsx)(a.Z,{className:m().RSPop2,children:(0,e.jsx)(P.Z,{overlay:N,children:(0,e.jsxs)(f.Z,{style:{width:"100%"},children:["Band ",(0,e.jsx)(y.Z,{})]})})}),(0,e.jsx)(a.Z,{className:m().RSPop1,children:(0,e.jsx)("span",{children:"G"})}),(0,e.jsx)(a.Z,{className:m().RSPop2,children:(0,e.jsx)(P.Z,{overlay:N,children:(0,e.jsxs)(f.Z,{style:{width:"100%"},children:["Band ",(0,e.jsx)(y.Z,{})]})})}),(0,e.jsx)(a.Z,{className:m().RSPop1,children:(0,e.jsx)("span",{children:"B"})}),(0,e.jsx)(a.Z,{className:m().RSPop2,children:(0,e.jsx)(P.Z,{overlay:N,children:(0,e.jsxs)(f.Z,{style:{width:"100%"},children:["Band ",(0,e.jsx)(y.Z,{})]})})})]}),(0,e.jsxs)(C.Z,{children:[(0,e.jsx)(a.Z,{className:m().RSPop1,children:(0,e.jsx)("span",{children:"R"})}),(0,e.jsx)(a.Z,{className:m().RSPop2,children:(0,e.jsx)(P.Z,{overlay:N,children:(0,e.jsxs)(f.Z,{style:{width:"100%"},children:["Band ",(0,e.jsx)(y.Z,{})]})})}),(0,e.jsx)(a.Z,{className:m().RSPop1,children:(0,e.jsx)("span",{children:"G"})}),(0,e.jsx)(a.Z,{className:m().RSPop2,children:(0,e.jsx)(P.Z,{overlay:N,children:(0,e.jsxs)(f.Z,{style:{width:"100%"},children:["Band ",(0,e.jsx)(y.Z,{})]})})}),(0,e.jsx)(a.Z,{className:m().RSPop1,children:(0,e.jsx)("span",{children:"B"})}),(0,e.jsx)(a.Z,{className:m().RSPop2,children:(0,e.jsx)(P.Z,{overlay:N,children:(0,e.jsxs)(f.Z,{style:{width:"100%"},children:["Band ",(0,e.jsx)(y.Z,{})]})})})]}),(0,e.jsxs)(Z.Z,{title:"Data source information",column:1,bordered:!0,children:[(0,e.jsx)(Z.Z.Item,{label:"FileName",children:"A/XXX.tif B/XXX.tf"}),(0,e.jsx)(Z.Z.Item,{label:"Row",children:"1234"}),(0,e.jsx)(Z.Z.Item,{label:"Column",children:"897"}),(0,e.jsx)(Z.Z.Item,{label:"Bands",children:"7 7"}),(0,e.jsx)(Z.Z.Item,{label:"DataType",children:"UInt16"}),(0,e.jsx)(Z.Z.Item,{label:"EPSG",children:"7030"}),(0,e.jsx)(Z.Z.Item,{label:"Unit",children:"m"})]})]})},pe=he,k=n(11849),ve=n(93224),xe=n(41004),ge=n(72869),H=n.n(ge),ze=n(74607),fe=function(r){var M=r.children,s=r.leafletMapRef,v=(0,ve.Z)(r,["children","leafletMapRef"]);return R.useEffect(function(){if(s.current){var h=s.current.leafletElement;h.pm.addControls({drawMarker:!1,drawCircle:!1,drawCircleMarker:!1,drawPolyline:!0,drawRectangle:!0,drawPolygon:!0,editMode:!0,dragMode:!0,cutPolygon:!0,rotateMode:!1,removalMode:!0}),h.pm.setGlobalOptions({pmIgnore:!1}),h.pm.Toolbar.createCustomControl({name:"StoreShapes",title:"Store all shapes",block:"custom",className:H().customControlIcon,toggle:!1,afterClick:function(){var T=JSON.stringify(h.pm.getGeomanDrawLayers(!0).toGeoJSON()),L="data.geojson",x=document.createElement("a");x.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(T)),x.setAttribute("download",L),x.style.display="none",document.body.appendChild(x),x.click(),console.log(T)}}),h.on("pm:create",function(g){r.onShapeCreate(g)}),h.on("pm:edit",function(g){r.onShapeEdit(g)})}},[]),(0,e.jsx)(xe.Z,(0,k.Z)((0,k.Z)({ref:s},v),{},{children:M}))},je=fe,D=n(88014),O=n(3263),X={lat:0,lng:0,zoom:2},Se=function(r){var M=[X.lat,X.lng],s=R.useState([]),v=(0,G.Z)(s,2),h=v[0],g=v[1],T=function(t){x(t.layer),t.layer.bindPopup("Label: "+t.layer._uid).openPopup(),z(t.layer)},L=function(t){F(t.layer),console.log(t)};function x(c){var t=prompt("Please enter a Unique Id");if(t)if(h[t]){alert("Id already used, add another one"),x(c);return}else c._uid=t,h[t]=c,g(h);else{alert("Nothing entered, layer deleted ..."),c.remove();return}}function z(c){var t=c._uid,B=c.toGeoJSON();B.properties={LabelID:Number(t)},console.log("Store Layer on DB. Id:"+t,B),console.log(JSON.stringify(B))}function F(c){var t=c._uid,B=c.toGeoJSON();console.log("Update Layer on DB. Id:"+t,B)}return(0,e.jsx)(je,{leafletMapRef:r.leafletMapRef,className:H().map,center:M,zoom:X.zoom,onShapeCreate:T,onShapeEdit:L,children:(0,e.jsxs)(D.Z,{position:"topright",children:[(0,e.jsx)(D.Z.BaseLayer,{checked:!0,name:"OpenStreetMap.Mapnik",children:(0,e.jsx)(O.Z,{attribution:'\xA9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"})}),(0,e.jsx)(D.Z.BaseLayer,{name:"TianDiTu.Satellite",children:(0,e.jsx)(O.Z,{attribution:"\xA9 TianDiTu",url:"https://t2.tianditu.gov.cn/DataServer?T=img_w&X={x}&Y={y}&L={z}&tk=174705aebfe31b79b3587279e211cb9a"})}),(0,e.jsx)(D.Z.BaseLayer,{name:"Esri.WorldImagery",children:(0,e.jsx)(O.Z,{attribution:"Tiles \xA9 Esri \u2014 Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"})}),(0,e.jsx)(D.Z.Overlay,{name:"Annotion.TianDiTu",children:(0,e.jsx)(O.Z,{url:"https://t2.tianditu.gov.cn/DataServer?T=cia_w&X={x}&Y={y}&L={z}&tk=174705aebfe31b79b3587279e211cb9a"})})]})})},Ze=Se,Pe=function(){var r=(0,R.useState)(void 0),M=(0,G.Z)(r,2),s=M[0],v=M[1],h=(0,R.useState)(),g=(0,G.Z)(h,2),T=g[0],L=g[1],x=(0,R.useState)(),z=(0,G.Z)(x,2),F=z[0],c=z[1],t=R.useRef(null);function B(l){if(l){var o,i;(o=t.current)===null||o===void 0||o.leafletElement.pm.enableDraw(l),console.log("drawTools: ",s),(i=t.current)===null||i===void 0||i.leafletElement.pm.setPathOptions({color:"orange",fillColor:"green",fillOpacity:.4})}}var Be=function(){var o,i;console.log((o=t.current)===null||o===void 0?void 0:o.leafletElement.pm.Draw),(i=t.current)===null||i===void 0||i.leafletElement.pm.Draw.Polygon._removeLastVertex()},Re=function(){var o,i;console.log((o=t.current)===null||o===void 0?void 0:o.leafletElement.pm.Draw),(i=t.current)===null||i===void 0||i.leafletElement.pm.toggleGlobalDragMode()},Ce=function(){var o,i;console.log((o=t.current)===null||o===void 0?void 0:o.leafletElement.pm.Draw),(i=t.current)===null||i===void 0||i.leafletElement.pm.Draw.Polygon._finishShape()},be=function(){var o;(o=t.current)===null||o===void 0||o.leafletElement.pm.enableGlobalRemovalMode()};return(0,e.jsxs)(Y.Z,{className:E().segment,children:[(0,e.jsxs)(Q.Z,{children:[(0,e.jsx)(u.Z,{imgSrc:"./pics/buttons/intelligent_interaction.png",children:"Intelligent Interaction"}),(0,e.jsx)(I.Z,{placement:"rightTop",title:"Polygon Edit",defaultVisible:!0,content:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("button",{onClick:function(){Be()},children:"Remove Last Vertex"}),(0,e.jsx)("button",{onClick:function(){Ce()},children:"Finish"})]}),trigger:s=="Polygon"?"hover":"click",children:(0,e.jsx)(u.Z,{active:s=="Polygon",imgSrc:"./pics/buttons/polygon.png",onClick:function(){v("Polygon"),B("Polygon")},children:"Polygon"})}),(0,e.jsx)(w.Z,{active:s=="brush",onClick:function(){v("brush")},onChange:function(o){console.log(o)}}),(0,e.jsxs)(I.Z,{placement:"rightTop",title:"title",content:"content",trigger:s=="rubber"?"hover":"click",children:[" ",(0,e.jsx)(u.Z,{imgSrc:"./pics/buttons/rubber.png",onClick:function(){be()},children:"Rubber"})]}),(0,e.jsx)(u.Z,{imgSrc:"./pics/buttons/zoom_in.png",children:"Zoom in"}),(0,e.jsx)(u.Z,{imgSrc:"./pics/buttons/zoom_out.png",children:"Zoom out"}),(0,e.jsx)(u.Z,{imgSrc:"./pics/buttons/save.png",children:"Save"}),(0,e.jsx)(u.Z,{imgSrc:"./pics/buttons/move.png",onClick:function(){return Re()},children:"Move"}),(0,e.jsx)(u.Z,{imgSrc:"./pics/buttons/export.png",children:"Export"}),(0,e.jsx)(u.Z,{imgSrc:"./pics/buttons/data_division.png",children:"Divide Data"}),(0,e.jsx)(u.Z,{imgSrc:"./pics/buttons/prev.png",children:"Undo"}),(0,e.jsx)(u.Z,{imgSrc:"./pics/buttons/next.png",children:"Redo"}),(0,e.jsx)(u.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:"Clear Mark"})]}),(0,e.jsx)("div",{className:E().mainStage,children:(0,e.jsx)(Ze,{leafletMapRef:t})}),(0,e.jsxs)(oe,{children:[(0,e.jsxs)(I.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Setting of boundary simplification",content:(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(de,{})}),trigger:s=="boundry"?"click":"hover",children:[" ",(0,e.jsx)(U,{imgSrc:"./pics/buttons/border_simplify.png",onClick:function(){v("boundry")},children:(0,e.jsx)("h2",{children:"Boundary"})})]}),(0,e.jsxs)(I.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Setting of remote sensing",content:(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(pe,{})}),trigger:s=="colorgun"?"click":"hover",children:[" ",(0,e.jsx)(U,{imgSrc:"./pics/buttons/remote_sensing_setting.png",onClick:function(){v("colorgun")},children:(0,e.jsx)("h2",{children:"Remote Sensing"})})]}),(0,e.jsxs)(I.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Switch grids",content:"content",trigger:s=="grid"?"click":"hover",children:[" ",(0,e.jsx)(U,{imgSrc:"./pics/buttons/switch_grid.png",onClick:function(){v("grid")},children:(0,e.jsx)("h2",{children:"Grids"})})]})]}),(0,e.jsxs)("div",{className:E().rightSideBar,children:[(0,e.jsx)("div",{className:E().determinOutline,children:(0,e.jsx)(f.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",block:!0,children:"Determine Outline"})}),(0,e.jsx)(q.Z,{selectedLabel:T,onLabelSelect:function(o){L(o)},onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}}),(0,e.jsx)(_.Z,{selectedAnnotation:F,onAnnotationSelect:function(o){c(o)},onAnnotationAdd:function(){},onAnnotationModify:function(){},onAnnotationDelete:function(){}})]})]})},ye=Pe}}]);
