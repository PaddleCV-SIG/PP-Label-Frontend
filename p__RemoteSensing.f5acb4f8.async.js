(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[333],{26647:function(u){u.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1FTWb",toolBarButtonContainer:"toolBarButtonContainer___1Vahn",toolBarButton:"toolBarButton___3mR2H",buttonText:"buttonText___Y0WDm",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3lRZ8",popover:"popover___3zzu2",slider:"slider___ALra-",popoverLeft:"popoverLeft___15lGe"}},52822:function(u){u.exports={roundBall:"roundBall___1pqu1",popover:"popover___1-PR6"}},32495:function(u){u.exports={listItem:"listItem___1MXXF",eye:"eye___3nddM",delete:"delete___y9u-D",roundBall:"roundBall___DMczd",popover:"popover___E0HLD",annotationId:"annotationId___1ks8N",labelName:"labelName___130ie",listItemActive:"listItemActive___1rNB-"}},38670:function(u){u.exports={labelList:"labelList___3uLRO",listHeader:"listHeader___1ZPcO",eye:"eye___2yUvw",roundBall:"roundBall___1xKCU"}},5882:function(u){u.exports={listItem:"listItem___vtDXn",eye:"eye___AsLBS",roundBall:"roundBall___1J_R3",popover:"popover___1x-2R",delete:"delete___WHPf2",listItemActive:"listItemActive___3FRb7"}},56131:function(u){u.exports={labelList:"labelList___jvD05",listHeader:"listHeader___UM5UF",eye:"eye___II3Po",roundBall:"roundBall___j752J"}},78677:function(u){u.exports={container:"container___G0FNe"}},80961:function(u){u.exports={leftToolbar:"leftToolbar___1xi4t",rightToolbar:"rightToolbar___3dNSB"}},82499:function(u){u.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1SHWL",toolBarButtonContainer:"toolBarButtonContainer___1jKUz",toolBarButton:"toolBarButton___3Ouq1",buttonText:"buttonText___10ls7",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AA28"}},72869:function(u){u.exports={map:"map___92VPN",customControlIcon:"customControlIcon___3Ki2y"}},20474:function(u){u.exports={RSPop1:"RSPop1___vz5Me",RSPop2:"RSPop2___34pQA"}},87610:function(u){u.exports={RSPop1:"RSPop1___1iBEf",RSPop2:"RSPop2___1W841",RSPop3:"RSPop3___1Whcp"}},55252:function(u){u.exports={RSPop1:"RSPop1___17x8k",RSPop2:"RSPop2___27kK5"}},75513:function(u){u.exports={segment:"segment___3WmPw",mainStage:"mainStage___2kT1s",draw:"draw___Ff0QW",pblock:"pblock___3sGxC",progress:"progress___KQyBx",rightSideBar:"rightSideBar___11FX3",determinOutline:"determinOutline___1g1YI"}},57719:function(){},27992:function(u,L,e){"use strict";var b=e(20136),f=e(55241),y=e(13062),P=e(71230),D=e(77883),n=e(70507),v=e(89032),s=e(15746),G=e(66126),M=e(75454),g=e(2824),h=e(67294),N=e(61541),m=e(26647),c=e.n(m),x=e(85893),W=0,j=100,ae=10,ie=function(E){var R=(0,h.useState)(p(E.size)),U=(0,g.Z)(R,2),A=U[0],l=U[1];function d(r){l(p(r))}var I=E.minSize==null?W:E.minSize,i=E.maxSize==null?j:E.maxSize;function p(r){return r==null?ae:r<=I?I:r>=i?i:r}return(0,h.useEffect)(function(){d(E.size)},[E.size]),(0,x.jsxs)(f.Z,{overlayClassName:"".concat(c().popover," ").concat(E.disLoc=="left"?c().popoverLeft:""),placement:E.disLoc||"right",content:(0,x.jsxs)(P.Z,{children:[(0,x.jsx)(s.Z,{span:16,children:(0,x.jsx)(M.Z,{className:c().slider,value:A,max:i,min:I,onChange:function(S){var Z;(Z=E.onChange)===null||Z===void 0||Z.call(0,S)},tooltipVisible:!1})}),(0,x.jsx)(s.Z,{span:8,children:(0,x.jsx)(n.Z,{min:I,max:i,value:A,onChange:function(S){var Z;(Z=E.onChange)===null||Z===void 0||Z.call(0,S)},step:10})})]}),trigger:"hover",children:[" ",(0,x.jsx)(N.Z,{imgSrc:E.imgSrc||"",onClick:E.onClick,active:E.active,children:E.children})]})};L.Z=ie},63097:function(u,L,e){"use strict";var b=e(20136),f=e(55241),y=e(2824),P=e(67294),D=e(52822),n=e.n(D),v=e(63144),s=e(85893),G=function(g){var h=(0,P.useState)(g.color||"#FFF"),N=(0,y.Z)(h,2),m=N[0],c=N[1];return(0,P.useEffect)(function(){c(g.color||"#FFF")},[g]),g.changeable?(0,s.jsx)(f.Z,{getPopupContainer:function(W){return W.parentElement||document.body},overlayClassName:n().popover,openClassName:n().popoverOpenClassName,placement:"bottom",content:(0,s.jsx)(v.xS,{disableAlpha:!0,color:m,onChange:function(W){c(W.hex)},onChangeComplete:g.onChange}),trigger:"click",children:(0,s.jsx)("div",{className:n().roundBall,style:{backgroundColor:m}})}):(0,s.jsx)("div",{className:n().roundBall,style:{backgroundColor:m}})};L.Z=G},51327:function(u,L,e){"use strict";e.d(L,{Z:function(){return ae}});var b=e(54421),f=e(38272),y=e(57663),P=e(71577),D=e(67294),n=e(38670),v=e.n(n),s=e(49111),G=e(19650),M=e(11849),g=e(32495),h=e.n(g),N=e(63097),m=e(85893),c=function(o){var E=(0,M.Z)({},o.annotation),R=!1,U=(0,m.jsxs)(f.ZP.Item,{className:"".concat(h().listItem," ").concat(o.active?h().listItemActive:""),unselectable:"on",onClick:function(){console.log("click List.Item"),o.onClick(E)},children:[(0,m.jsxs)(G.Z,{align:"center",size:5,children:[(0,m.jsx)("a",{className:h().eye,style:{backgroundImage:R?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(l){l.stopPropagation(),o.onAnnotationModify(E)}})," ",(0,m.jsx)("span",{className:h().annotationId,children:E.properties.annotationId}),(0,m.jsx)("span",{className:h().labelName,children:E.properties.labelName}),(0,m.jsx)(N.Z,{color:E.properties.stroke})]}),(0,m.jsx)("a",{className:h().delete,onClick:function(l){console.log("click List.Item.delete"),l.stopPropagation(),o.onAnnotationDelete(E)}})]});return U},x=c,W=e(48971),j=function(o){var E=(0,W.YB)(),R=E.formatMessage({id:"component.PPAnnotationList.annotationList"}),U=E.formatMessage({id:"component.PPAnnotationList.addAnnotation"});return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(f.ZP,{className:v().labelList,size:"large",header:(0,m.jsx)("div",{className:v().listHeader,children:R}),bordered:!0,dataSource:o.annotations.features,renderItem:function(l){return(0,m.jsx)(x,{onClick:o.onAnnotationSelect,annotation:l,active:!1,onAnnotationDelete:o.onAnnotationDelete,onAnnotationModify:o.onAnnotationModify})},footer:(0,m.jsx)("div",{children:(0,m.jsx)(P.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){o.onAnnotationSelect(void 0)},block:!0,children:U})})})})},ae=j},5041:function(u,L,e){"use strict";e.d(L,{Z:function(){return i}});var b=e(54421),f=e(38272),y=e(57663),P=e(71577),D=e(2824),n=e(67294),v=e(56131),s=e.n(v),G=e(49111),M=e(19650),g=e(11849),h=e(5882),N=e.n(h),m=e(63097),c=e(85893),x=function(r){var S=(0,g.Z)({},r.label),Z=(0,n.useState)(S.invisible),V=(0,D.Z)(Z,2),K=V[0],F=V[1],t=(0,n.useState)(0),oe=(0,D.Z)(t,2),B=oe[0],se=oe[1],$=r.hideEye?" ":(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("a",{className:N().eye,style:{backgroundImage:K?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(ee){ee.stopPropagation(),F(!K),r.onLabelModify(S)}})," "]}),z=r.hideColorPicker?(0,c.jsx)(c.Fragment,{}):(0,c.jsx)(m.Z,{color:S.color,changeable:!0,onChange:function(ee){S.color=ee.hex,r.onLabelModify(S)}}),de=(0,c.jsxs)(f.ZP.Item,{className:"".concat(N().listItem," ").concat(r.active?N().listItemActive:""),unselectable:"on",onClick:function(){r.onClick(S)},children:[(0,c.jsxs)(M.Z,{align:"center",size:5,children:[$,S.name,z]}),(0,c.jsx)("a",{className:N().delete,onClick:function(ee){ee.stopPropagation();var me=new Date().getTime();me-B<300||(se(me),r.onLabelDelete(S))}})]});return de},W=x,j=e(71194),ae=e(50146),ie=e(47673),o=e(24044),E=e(9715),R=e(93766),U=e(48971),A=["#FF0000","#008000","#0000FF","#FFFF00","#FFA500","#00FFFF","#8B00FF","#FFC0CB","#7CFC00","#007FFF","#800080","#36BF36","#DAA520","#800000","#008B8B","#B22222","#E6D933","#000080","#FF00FF","#FFFF99","#87CEEB","#5C50E6","#CD5C5C","#20B2AA","#E680FF","#4D1F00","#006374","#B399FF","#8B4513","#BA55D3","#C0C0C0","#808080","#000000"],l=function(r){var S,Z,V=(0,U.YB)(),K=V.formatMessage({id:"component.PPAddLabelModal.selectColor"}),F=V.formatMessage({id:"component.PPAddLabelModal.addLabel"}),t=V.formatMessage({id:"component.PPAddLabelModal.labelName"}),oe=V.formatMessage({id:"component.PPCreater.cancel"}),B=V.formatMessage({id:"component.PPSegMode.ok"}),se=(0,n.useState)(((S=r.defaultLabel)===null||S===void 0?void 0:S.color)||A[r.order||0]),$=(0,D.Z)(se,2),z=$[0],de=$[1];(0,n.useEffect)(function(){var te;de(((te=r.defaultLabel)===null||te===void 0?void 0:te.color)||A[r.order||0])},[r]);var ce=r.hideColorPicker?(0,c.jsx)(c.Fragment,{}):(0,c.jsx)(R.Z.Item,{label:K,name:"color",children:(0,c.jsx)(m.Z,{color:z,changeable:!0,onChange:function(ve){de(ve.hex)}})}),ee=R.Z.useForm(),me=(0,D.Z)(ee,1),H=me[0];return(0,c.jsx)(ae.Z,{title:F,visible:r.visible,onCancel:r.onCancel,footer:null,children:(0,c.jsxs)(R.Z,{form:H,name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!1,labelname:(Z=r.defaultLabel)===null||Z===void 0?void 0:Z.name},onFinish:function(ve){var Ie={name:ve.labelname,color:z};r.onLabelAdd(Ie),H.resetFields()},autoComplete:"off",children:[(0,c.jsx)(R.Z.Item,{label:t,name:"labelname",rules:[{required:!0,message:"Please input label name!"}],children:(0,c.jsx)(o.Z,{})}),ce,(0,c.jsx)(R.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,c.jsxs)(M.Z,{children:[(0,c.jsx)(P.Z,{onClick:function(){var ve;(ve=r.onCancel)===null||ve===void 0||ve.call(0),H.resetFields()},children:oe}),(0,c.jsx)(P.Z,{type:"primary",htmlType:"submit",children:B})]})})]})})},d=l,I=function(r){var S,Z=(0,U.YB)(),V=Z.formatMessage({id:"component.PPLabelList.addLabel"}),K=Z.formatMessage({id:"component.PPLabelList.labelList"}),F=(0,n.useState)(!1),t=(0,D.Z)(F,2),oe=t[0],B=t[1];return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(f.ZP,{className:s().labelList,size:"large",header:(0,c.jsx)("div",{className:s().listHeader,children:K}),footer:(0,c.jsx)("div",{children:(0,c.jsx)(P.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){B(!0)},block:!0,children:V})}),bordered:!0,dataSource:r.labels,renderItem:function($){var z;return(0,c.jsx)(W,{hideColorPicker:r.hideColorPicker,hideEye:r.hideEye,onClick:r.onLabelSelect,label:$,active:(z=r.activeIds)===null||z===void 0?void 0:z.has($.labelId),onLabelDelete:r.onLabelDelete,onLabelModify:r.onLabelModify})}}),(0,c.jsx)(d,{hideColorPicker:r.hideColorPicker,order:(S=r.labels)===null||S===void 0?void 0:S.length,visible:oe,onLabelAdd:function($){r.onLabelAdd($),B(!1)},onCancel:function(){B(!1)}})]})},i=I},8088:function(u,L,e){"use strict";var b=e(67294),f=e(78677),y=e.n(f),P=e(85893),D=function(v){return(0,P.jsx)("div",{className:"".concat(y().container," ").concat(v.className),children:v.children})};L.Z=D},44434:function(u,L,e){"use strict";var b=e(67294),f=e(80961),y=e.n(f),P=e(85893),D=function(v){var s=y().leftToolbar;return v.disLoc=="right"&&(s=y().rightToolbar),(0,P.jsx)("div",{className:s,children:v.children})};L.Z=D},61541:function(u,L,e){"use strict";var b=e(49111),f=e(19650),y=e(67294),P=e(82499),D=e.n(P),n=e(85893),v=function(G){return(0,n.jsx)("div",{unselectable:"on",className:"".concat(D().toolBarButtonContainerWrapper," ").concat(G.active&&D().toolBarButtonContainerWrapperActive),onClick:G.onClick,children:(0,n.jsx)(f.Z,{align:"center",className:D().toolBarButtonContainer,size:0,children:(0,n.jsxs)(f.Z,{align:"center",direction:"vertical",className:D().toolBarButton,size:0,children:[(0,n.jsx)("img",{src:G.imgSrc}),(0,n.jsx)("div",{className:D().buttonText,children:G.children})]})})})};L.Z=v},37233:function(u,L,e){"use strict";e.d(L,{Z:function(){return x}});var b=e(67294),f=e(11849),y=e(93224),P=e(41004),D=e(72869),n=e.n(D),v=e(74607),s=e(85893),G=function(j){var ae=j.children,ie=j.leafletMapRef,o=j.displayTools,E=(0,y.Z)(j,["children","leafletMapRef","displayTools"]);return b.useEffect(function(){if(ie.current){var R=ie.current.leafletElement;R.pm.addControls({drawMarker:!1,drawCircle:!1,drawCircleMarker:!1,drawPolyline:!1,drawRectangle:!1,drawPolygon:!1,editMode:!1,dragMode:!1,cutPolygon:!0,rotateMode:!1,removalMode:!1}),R.pm.setGlobalOptions({pmIgnore:!1}),j.displayTools&&R.pm.Toolbar.createCustomControl({name:"StoreShapes",title:"Store all shapes",block:"custom",className:n().customControlIcon,toggle:!1,afterClick:function(){var A=JSON.stringify(R.pm.getGeomanDrawLayers(!0).toGeoJSON()),l="data.geojson",d=document.createElement("a");d.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(A)),d.setAttribute("download",l),d.style.display="none",document.body.appendChild(d),d.click(),console.log(A)}}),R.on("pm:create",function(U){j.onShapeCreate(U)}),R.on("pm:edit",function(U){j.onShapeEdit(U)})}},[]),(0,s.jsx)(P.Z,(0,f.Z)((0,f.Z)({ref:ie},E),{},{children:ae}))},M=G,g=e(88014),h=e(16072),N=e(18836),m={lat:0,lng:0,zoom:2},c=function(j){var ae=[m.lat,m.lng];return(0,s.jsx)(M,{leafletMapRef:j.leafletMapRef,displayTools:j.displayTools,className:n().map,center:ae,zoom:m.zoom,onShapeCreate:j.onShapeCreate,onShapeEdit:j.onShapeEdit,zoomControl:!1,children:(0,s.jsxs)(g.Z,{position:"topright",children:[(0,s.jsx)(g.Z.BaseLayer,{checked:!0,name:"TianDiTu.Vector",children:(0,s.jsxs)(h.Z,{attribution:'\xA9 <a href="https://www.tianditu.gov.cn/">TianDiTu</a> GS(2021)3715',children:[(0,s.jsx)(N.Z,{url:"https://t2.tianditu.gov.cn/DataServer?T=vec_w&X={x}&Y={y}&L={z}&tk=8e879a4cad078fd3ce7456f2737fc4cc"}),(0,s.jsx)(N.Z,{url:"https://t2.tianditu.gov.cn/DataServer?T=cva_w&X={x}&Y={y}&L={z}&tk=8e879a4cad078fd3ce7456f2737fc4cc"})]})}),(0,s.jsx)(g.Z.Overlay,{name:"Esri.WorldImagery",children:(0,s.jsx)(N.Z,{attribution:"Tiles \xA9 Esri \u2014 Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"})})]})})},x=c},49813:function(u,L,e){"use strict";var b=e(47673),f=e(24044),y=e(13062),P=e(71230),D=e(59250),n=e(13013),v=e(57663),s=e(71577),G=e(89032),M=e(15746),g=e(30887),h=e(54689),N=e(34792),m=e(48086),c=e(89366),x=e(57254),W=e(20474),j=e.n(W),ae=e(67294),ie=e(48971),o=e(85893);function E(A){m.default.info("Click on menu item."),console.log("click",A)}var R=(0,o.jsxs)(h.Z,{onClick:E,children:[(0,o.jsx)(h.Z.Item,{icon:(0,o.jsx)(c.Z,{}),children:"1st menu item"},"1"),(0,o.jsx)(h.Z.Item,{icon:(0,o.jsx)(c.Z,{}),children:"2nd menu item"},"2"),(0,o.jsx)(h.Z.Item,{icon:(0,o.jsx)(c.Z,{}),children:"3rd menu item"},"3")]}),U=function(){var l=(0,ie.YB)(),d=l.formatMessage({id:"component.PPRS.pdParameter"}),I=l.formatMessage({id:"component.PPRS.simplifiedDistance"}),i=l.formatMessage({id:"component.PPRS.simplifiedAngle"}),p=l.formatMessage({id:"component.PPRS.threshold"});return(0,o.jsxs)("div",{children:[(0,o.jsxs)(P.Z,{children:[(0,o.jsx)(M.Z,{span:12,className:j().RSPop1,children:(0,o.jsx)("span",{children:d})}),(0,o.jsx)(M.Z,{span:12,className:j().RSPop2,children:(0,o.jsx)(n.Z,{overlay:R,children:(0,o.jsxs)(s.Z,{style:{width:"100%"},children:["Dropdown ",(0,o.jsx)(x.Z,{})]})})})]}),(0,o.jsxs)(P.Z,{children:[(0,o.jsx)(M.Z,{span:12,className:j().RSPop1,children:(0,o.jsx)("span",{children:I})}),(0,o.jsx)(M.Z,{span:12,className:j().RSPop2,children:(0,o.jsx)(f.Z,{placeholder:"Basic usage"})})]}),(0,o.jsxs)(P.Z,{children:[(0,o.jsx)(M.Z,{span:12,className:j().RSPop1,children:(0,o.jsx)("span",{children:i})}),(0,o.jsx)(M.Z,{span:12,className:j().RSPop2,children:(0,o.jsx)(f.Z,{placeholder:"Basic usage"})})]}),(0,o.jsxs)(P.Z,{children:[(0,o.jsx)(M.Z,{span:12,className:j().RSPop1,children:(0,o.jsx)("span",{children:p})}),(0,o.jsx)(M.Z,{span:12,className:j().RSPop2,children:(0,o.jsx)(f.Z,{placeholder:"Basic usage"})})]})]})};L.Z=U},97927:function(u,L,e){"use strict";var b=e(13062),f=e(71230),y=e(47673),P=e(24044),D=e(89032),n=e(15746),v=e(87610),s=e.n(v),G=e(67294),M=e(48971),g=e(85893),h=function(){var m=(0,M.YB)(),c=m.formatMessage({id:"component.PPRS.gridSize"}),x=m.formatMessage({id:"component.PPRS.overlap"}),W=m.formatMessage({id:"component.PPRS.completed"},{show:1,total:16});return(0,g.jsxs)("div",{children:[(0,g.jsxs)(f.Z,{children:[(0,g.jsx)(n.Z,{span:12,className:s().RSPop1,children:(0,g.jsx)("span",{children:c})}),(0,g.jsx)(n.Z,{span:12,className:s().RSPop2,children:(0,g.jsx)(P.Z,{placeholder:"Basic usage"})})]}),(0,g.jsxs)(f.Z,{children:[(0,g.jsx)(n.Z,{span:12,className:s().RSPop1,children:(0,g.jsx)("span",{children:x})}),(0,g.jsx)(n.Z,{span:12,className:s().RSPop2,children:(0,g.jsx)(P.Z,{placeholder:"Basic usage"})})]}),(0,g.jsx)(f.Z,{children:(0,g.jsx)("span",{className:s().RSPop3,children:W})})]})};L.Z=h},91861:function(u,L,e){"use strict";e.d(L,{Ad:function(){return f},k3:function(){return y},Vd:function(){return P},td:function(){return D}});var b=40;function f(){localStorage.removeItem("history"),y([])}function y(n){var v=localStorage.getItem("history"),s=v?JSON.parse(v):{index:-1,items:[]};if(JSON.stringify(s.items[s.index])!=JSON.stringify(n)){var G=s.index>b?s.index-b:0,M=s.items.splice(G,s.index==0?1:s.index+1);s.items=M.concat([n]),s.index<=b?s.index++:s.index=b+1,localStorage.setItem("history",JSON.stringify(s))}}function P(){var n=localStorage.getItem("history");if(!!n){var v=JSON.parse(n);if(!!v&&!(v.index>=v.items.length-1))return v.index++,localStorage.setItem("history",JSON.stringify(v)),v.items[v.index]}}function D(){var n=localStorage.getItem("history");if(!!n){var v=JSON.parse(n);if(!(!v||!v.index)&&!(v.index<=0))return v.index--,localStorage.setItem("history",JSON.stringify(v)),v.items[v.index]}}},47712:function(u,L,e){"use strict";e.r(L),e.d(L,{default:function(){return be}});var b=e(34669),f=e(54458),y=e(20136),P=e(55241),D=e(49111),n=e(19650),v=e(62350),s=e(75443),G=e(57663),M=e(71577),g=e(2824),h=e(67294),N=e(75513),m=e.n(N),c=e(8088),x=e(61541),W=e(44434),j=e(5041),ae=e(49813),ie=e(98858),o=e(4914),E=e(13062),R=e(71230),U=e(59250),A=e(13013),l=e(89032),d=e(15746),I=e(30887),i=e(54689),p=e(34792),r=e(48086),S=e(89366),Z=e(57254),V=e(55252),K=e.n(V),F=e(48971),t=e(85893);function oe(_){r.default.info("Click on menu item."),console.log("click",_)}var B=(0,t.jsxs)(i.Z,{onClick:oe,children:[(0,t.jsx)(i.Z.Item,{icon:(0,t.jsx)(S.Z,{}),children:"band_1"},"1"),(0,t.jsx)(i.Z.Item,{icon:(0,t.jsx)(S.Z,{}),children:"band_2"},"2"),(0,t.jsx)(i.Z.Item,{icon:(0,t.jsx)(S.Z,{}),children:"band_3"},"3")]}),se=function(){var Y=(0,F.YB)(),Q=Y.formatMessage({id:"component.PPRS.r"}),k=Y.formatMessage({id:"component.PPRS.g"}),je=Y.formatMessage({id:"component.PPRS.b"}),pe=Y.formatMessage({id:"component.PPRS.dataInformation"}),Se=Y.formatMessage({id:"component.PPRS.fileName"}),De=Y.formatMessage({id:"component.PPRS.row"}),ne=Y.formatMessage({id:"component.PPRS.column"}),le=Y.formatMessage({id:"component.PPRS.bands"}),ge=Y.formatMessage({id:"component.PPRS.dataType"}),Oe=Y.formatMessage({id:"component.PPRS.EPSG"}),Ee=Y.formatMessage({id:"component.PPRS.unit"});return(0,t.jsxs)("div",{children:[(0,t.jsxs)(R.Z,{children:[(0,t.jsx)(d.Z,{className:K().RSPop1,children:(0,t.jsx)("span",{children:Q})}),(0,t.jsx)(d.Z,{className:K().RSPop2,children:(0,t.jsx)(A.Z,{overlay:B,children:(0,t.jsxs)(M.Z,{style:{width:"100%"},children:["Band ",(0,t.jsx)(Z.Z,{})]})})}),(0,t.jsx)(d.Z,{className:K().RSPop1,children:(0,t.jsx)("span",{children:k})}),(0,t.jsx)(d.Z,{className:K().RSPop2,children:(0,t.jsx)(A.Z,{overlay:B,children:(0,t.jsxs)(M.Z,{style:{width:"100%"},children:["Band ",(0,t.jsx)(Z.Z,{})]})})}),(0,t.jsx)(d.Z,{className:K().RSPop1,children:(0,t.jsx)("span",{children:je})}),(0,t.jsx)(d.Z,{className:K().RSPop2,children:(0,t.jsx)(A.Z,{overlay:B,children:(0,t.jsxs)(M.Z,{style:{width:"100%"},children:["Band ",(0,t.jsx)(Z.Z,{})]})})})]}),(0,t.jsxs)(o.Z,{title:pe,column:1,bordered:!0,children:[(0,t.jsx)(o.Z.Item,{label:Se,children:"A/XXX.tif"}),(0,t.jsx)(o.Z.Item,{label:De,children:"1234"}),(0,t.jsx)(o.Z.Item,{label:ne,children:"897"}),(0,t.jsx)(o.Z.Item,{label:le,children:"7"}),(0,t.jsx)(o.Z.Item,{label:ge,children:"UInt16"}),(0,t.jsx)(o.Z.Item,{label:Oe,children:"7030"}),(0,t.jsx)(o.Z.Item,{label:Ee,children:"m"})]})]})},$=se,z=e(97927),de=e(37233),ce=e(51327),ee=e(11849);function me(_){var Y=(0,h.useState)(0),Q=(0,g.Z)(Y,2),k=Q[0],je=Q[1],pe=(0,h.useState)(!1),Se=(0,g.Z)(pe,2),De=Se[0],ne=Se[1];(0,h.useEffect)(function(){localStorage.setItem("currentLabel",JSON.stringify(_.currentLabel||{}))},[_.currentLabel]),(0,h.useEffect)(function(){localStorage.setItem("annotations",JSON.stringify(_.annotations||{}))},[_.annotations]);var le=function(){var a,O=(a=_.leafletMapRef.current)===null||a===void 0?void 0:a.leafletElement.pm.globalDrawModeEnabled();console.log(O)},ge=function(a){var O=localStorage.getItem("currentLabel");if(O!="{}"){var C,ue;ne(!0);var re=JSON.parse(O||"{}");(C=_.leafletMapRef.current)===null||C===void 0||C.leafletElement.pm.enableDraw(a),(ue=_.leafletMapRef.current)===null||ue===void 0||ue.leafletElement.pm.setPathOptions({color:re==null?void 0:re.color,fillColor:re==null?void 0:re.color,fillOpacity:.4})}else{var he;alert("Test"),(he=_.leafletMapRef.current)===null||he===void 0||he.leafletElement.pm.disableDraw(a),ne(!1)}},Oe=function(a){var O;(O=_.leafletMapRef.current)===null||O===void 0||O.leafletElement.pm.disableDraw(a),ne(!1),le()},Ee=function(){var a;return(a=_.leafletMapRef.current)===null||a===void 0?void 0:a.leafletElement.pm.Draw.getActiveShape()},Le=function(){if(Ee()=="Polygon"){var a;(a=_.leafletMapRef.current)===null||a===void 0||a.leafletElement.pm.Draw.Polygon._removeLastVertex(),le()}else le(),ne(!1)},ye=function(){var a;(a=_.leafletMapRef.current)===null||a===void 0||a.leafletElement.pm.toggleGlobalDragMode(),le()},Ne=function(){if(Ee()=="Polygon"){var a;(a=_.leafletMapRef.current)===null||a===void 0||a.leafletElement.pm.Draw.Polygon._finishShape(),le(),ne(!1)}else le(),ne(!1)},We=function(){var a;(a=_.leafletMapRef.current)===null||a===void 0||a.leafletElement.pm.enableGlobalRemovalMode(),le()},Re=function(){var a;(a=_.leafletMapRef.current)===null||a===void 0||a.leafletElement.pm.toggleGlobalEditMode(),le(),ne(!1)},Ze=function(){ne(!1)},Ae=function(a){var O=a.toGeoJSON(),C=JSON.parse(localStorage.getItem("currentLabel")||"{}");je(k+1),O.properties={labelName:C==null?void 0:C.name,stroke:C==null?void 0:C.color,annotationId:k+1};var ue=JSON.parse(localStorage.getItem("annotations")||"{}"),re=(0,ee.Z)((0,ee.Z)({},ue),{},{features:ue.features.concat(O)});console.log(re),_.setAnnotations(re),_.recordHistory(re)};function w(J){ne(!1),Ae(J.layer)}var Pe=function(a){console.log(a)},Me=function(){var a;(a=_.leafletMapRef.current)===null||a===void 0||a.leafletElement.zoomIn(),le()},Ce=function(){var a;(a=_.leafletMapRef.current)===null||a===void 0||a.leafletElement.zoomOut(),le()};return{polyVisable:De,RSDraw:ge,RSDrawDisable:Oe,removeLastVertex:Le,moveShape:ye,finishShape:Ne,removeShape:We,editMode:Re,saveGeoJson:Ze,storeOnDb:Ae,onShapeCreate:w,onShapeEdit:Pe,toolZoomIn:Me,toolZoomOut:Ce,currentShape:Ee}}var H=e(27992),te=e(91861),ve=e(45194),Ie=function(){var Y=(0,ve.$L)(h.useState,h.useEffect,{label:{oneHot:!1},tool:{defaultTool:"mover"},effectTrigger:{}}),Q=(0,g.Z)(Y,10),k=Q[0],je=Q[1],pe=Q[2],Se=Q[3],De=Q[4],ne=Q[5],le=Q[6],ge=Q[7],Oe=Q[8],Ee=Q[9],Le=(0,h.useState)(!1),ye=(0,g.Z)(Le,2),Ne=ye[0],We=ye[1],Re=(0,h.useState)(!1),Ze=(0,g.Z)(Re,2),Ae=Ze[0],w=Ze[1],Pe=(0,h.useState)({type:"FeatureCollection",features:[]}),Me=(0,g.Z)(Pe,2),Ce=Me[0],J=Me[1];(0,h.useEffect)(function(){(0,te.Ad)()},[]),console.log("rs is re-rendering! label.curr: ".concat(JSON.stringify(ge.curr)));var a=h.useRef(null),O=me({leafletMapRef:a,currentLabel:ge.curr,setAnnotations:J,annotations:Ce,recordHistory:te.k3}),C=(0,F.YB)(),ue=C.formatMessage({id:"pages.Maps.finished"}),re=C.formatMessage({id:"pages.Maps.removeLastVertex"}),he=C.formatMessage({id:"pages.Maps.cancel"}),Ke=C.formatMessage({id:"pages.Maps.boundary"}),Te=C.formatMessage({id:"pages.Maps.remoteSensing"}),Ue=C.formatMessage({id:"pages.Maps.grids"}),Fe=C.formatMessage({id:"pages.toolBar.polygon"}),Be=C.formatMessage({id:"pages.toolBar.rubber"}),ze=C.formatMessage({id:"pages.toolBar.zoomIn"}),q=C.formatMessage({id:"pages.toolBar.zoomOut"}),X=C.formatMessage({id:"pages.toolBar.move"}),xe=C.formatMessage({id:"pages.toolBar.unDo"}),fe=C.formatMessage({id:"pages.toolBar.reDo"}),Ge=C.formatMessage({id:"pages.toolBar.save"}),Je=C.formatMessage({id:"pages.toolBar.edit"}),Ve=C.formatMessage({id:"pages.toolBar.clearMark"}),$e=C.formatMessage({id:"pages.toolBar.interactor"}),He=C.formatMessage({id:"pages.toolBar.segmentThreshold"}),Ye=C.formatMessage({id:"pages.toolBar.transparency"}),Xe=C.formatMessage({id:"pages.toolBar.visualRadius"}),Qe=C.formatMessage({id:"pages.toolBar.determineOutline"}),ke=C.formatMessage({id:"pages.toolBar.divideData"}),we=C.formatMessage({id:"pages.toolBar.export"});return(0,t.jsxs)(c.Z,{className:m().segment,children:[(0,t.jsxs)(W.Z,{children:[(0,t.jsx)(P.Z,{placement:"rightTop",visible:O.polyVisable,content:(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(n.Z,{children:[(0,t.jsx)(M.Z,{type:"primary",onClick:function(){O.finishShape()},children:ue}),(0,t.jsx)(M.Z,{type:"primary",onClick:function(){O.removeLastVertex()},children:re}),(0,t.jsx)(s.Z,{title:"Are you sure cancel this task?",okText:"Yes",cancelText:"No",children:(0,t.jsx)(M.Z,{type:"primary",onClick:function(){O.RSDrawDisable(O.currentShape())},children:he})})]})}),trigger:k.curr=="Polygon"?"hover":"click",children:(0,t.jsx)(x.Z,{active:k.curr=="Polygon",imgSrc:"./pics/buttons/polygon.png",onClick:function(){k.setCurr("Polygon"),O.RSDraw("Polygon")},children:Fe})}),(0,t.jsx)(x.Z,{onClick:function(){O.editMode()},imgSrc:"./pics/buttons/edit.png",children:Je}),(0,t.jsxs)(P.Z,{placement:"rightTop",title:"title",content:"content",trigger:k.curr=="rubber"?"hover":"click",children:[" ",(0,t.jsx)(x.Z,{imgSrc:"./pics/buttons/rubber.png",onClick:function(){O.removeShape()},children:Be})]}),(0,t.jsx)(x.Z,{onClick:function(){O.toolZoomIn()},imgSrc:"./pics/buttons/zoom_in.png",children:ze}),(0,t.jsx)(x.Z,{onClick:function(){O.toolZoomOut()},imgSrc:"./pics/buttons/zoom_out.png",children:q}),(0,t.jsx)(x.Z,{onClick:function(){O.saveGeoJson()},imgSrc:"./pics/buttons/save.png",children:Ge}),(0,t.jsx)(x.Z,{imgSrc:"./pics/buttons/move.png",onClick:function(){return O.moveShape()},children:X}),(0,t.jsx)(x.Z,{onClick:function(){var _e=(0,te.td)()},imgSrc:"./pics/buttons/prev.png",children:xe}),(0,t.jsx)(x.Z,{onClick:function(){var _e=(0,te.Vd)()},imgSrc:"./pics/buttons/next.png",children:fe}),(0,t.jsx)(x.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:Ve})]}),(0,t.jsxs)("div",{className:m().mainStage,children:[(0,t.jsx)("div",{className:m().draw,children:(0,t.jsx)(de.Z,{leafletMapRef:a,onShapeCreate:O.onShapeCreate,onShapeEdit:O.onShapeEdit})}),(0,t.jsx)("div",{className:m().pblock,children:(0,t.jsx)("div",{className:m().progress,children:(0,t.jsx)(f.Z,{percent:50,status:"active"})})})]}),(0,t.jsxs)(W.Z,{disLoc:"right",children:[(0,t.jsx)(x.Z,{imgSrc:"./pics/buttons/intelligent_interaction.png",children:$e}),(0,t.jsx)(H.Z,{imgSrc:"./pics/buttons/threshold.png",disLoc:"left",children:He}),(0,t.jsx)(H.Z,{imgSrc:"./pics/buttons/alpha.png",disLoc:"left",children:Ye}),(0,t.jsx)(H.Z,{imgSrc:"./pics/buttons/radius.png",disLoc:"left",children:Xe}),(0,t.jsxs)(P.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Setting of boundary simplification",content:(0,t.jsx)(ae.Z,{}),trigger:k.curr=="boundry"?"click":"hover",children:[" ",(0,t.jsx)(x.Z,{imgSrc:"./pics/buttons/border_simplify.png",onClick:function(){k.setCurr("boundry")},children:Ke})]}),(0,t.jsxs)(P.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Setting of remote sensing",content:(0,t.jsx)($,{}),trigger:k.curr=="colorgun"?"click":"hover",children:[" ",(0,t.jsx)(x.Z,{imgSrc:"./pics/buttons/remote_sensing_setting.png",onClick:function(){k.setCurr("colorgun")},children:Te})]}),(0,t.jsxs)(P.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Switch grids",content:(0,t.jsx)(z.Z,{}),trigger:k.curr=="grid"?"click":"hover",children:[" ",(0,t.jsx)(x.Z,{imgSrc:"./pics/buttons/switch_grid.png",onClick:function(){k.setCurr("grid")},children:Ue})]}),(0,t.jsx)(x.Z,{imgSrc:"./pics/buttons/data_division.png",children:ke}),(0,t.jsx)(x.Z,{imgSrc:"./pics/buttons/export.png",children:we})]}),(0,t.jsxs)("div",{className:m().rightSideBar,children:[(0,t.jsx)("div",{className:m().determinOutline,children:(0,t.jsx)(M.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",block:!0,children:Qe})}),(0,t.jsx)(j.Z,{selectedLabel:ge.curr,onLabelSelect:function(_e){ge.setCurr(_e),console.log(_e)},onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}}),(0,t.jsx)(ce.Z,{annotations:Ce,onAnnotationSelect:function(){},onAnnotationAdd:function(){},onAnnotationModify:function(){},onAnnotationDelete:function(){}})]})]})},be=Ie},38272:function(u,L,e){"use strict";e.d(L,{ZM:function(){return E},ZP:function(){return A}});var b=e(85061),f=e(22122),y=e(96156),P=e(28481),D=e(90484),n=e(67294),v=e(94184),s=e.n(v),G=e(11382),M=e(25378),g=e(24308),h=e(65632),N=e(40308),m=e(92820),c=e(21584),x=e(96159),W=function(l,d){var I={};for(var i in l)Object.prototype.hasOwnProperty.call(l,i)&&d.indexOf(i)<0&&(I[i]=l[i]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var p=0,i=Object.getOwnPropertySymbols(l);p<i.length;p++)d.indexOf(i[p])<0&&Object.prototype.propertyIsEnumerable.call(l,i[p])&&(I[i[p]]=l[i[p]]);return I},j=function(d){var I=d.prefixCls,i=d.className,p=d.avatar,r=d.title,S=d.description,Z=W(d,["prefixCls","className","avatar","title","description"]),V=n.useContext(h.E_),K=V.getPrefixCls,F=K("list",I),t=s()("".concat(F,"-item-meta"),i),oe=n.createElement("div",{className:"".concat(F,"-item-meta-content")},r&&n.createElement("h4",{className:"".concat(F,"-item-meta-title")},r),S&&n.createElement("div",{className:"".concat(F,"-item-meta-description")},S));return n.createElement("div",(0,f.Z)({},Z,{className:t}),p&&n.createElement("div",{className:"".concat(F,"-item-meta-avatar")},p),(r||S)&&oe)},ae=function(d){var I=d.prefixCls,i=d.children,p=d.actions,r=d.extra,S=d.className,Z=d.colStyle,V=W(d,["prefixCls","children","actions","extra","className","colStyle"]),K=n.useContext(E),F=K.grid,t=K.itemLayout,oe=n.useContext(h.E_),B=oe.getPrefixCls,se=function(){var H;return n.Children.forEach(i,function(te){typeof te=="string"&&(H=!0)}),H&&n.Children.count(i)>1},$=function(){return t==="vertical"?!!r:!se()},z=B("list",I),de=p&&p.length>0&&n.createElement("ul",{className:"".concat(z,"-item-action"),key:"actions"},p.map(function(me,H){return n.createElement("li",{key:"".concat(z,"-item-action-").concat(H)},me,H!==p.length-1&&n.createElement("em",{className:"".concat(z,"-item-action-split")}))})),ce=F?"div":"li",ee=n.createElement(ce,(0,f.Z)({},V,{className:s()("".concat(z,"-item"),(0,y.Z)({},"".concat(z,"-item-no-flex"),!$()),S)}),t==="vertical"&&r?[n.createElement("div",{className:"".concat(z,"-item-main"),key:"content"},i,de),n.createElement("div",{className:"".concat(z,"-item-extra"),key:"extra"},r)]:[i,de,(0,x.Tm)(r,{key:"extra"})]);return F?n.createElement(c.Z,{flex:1,style:Z},ee):ee};ae.Meta=j;var ie=ae,o=function(l,d){var I={};for(var i in l)Object.prototype.hasOwnProperty.call(l,i)&&d.indexOf(i)<0&&(I[i]=l[i]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var p=0,i=Object.getOwnPropertySymbols(l);p<i.length;p++)d.indexOf(i[p])<0&&Object.prototype.propertyIsEnumerable.call(l,i[p])&&(I[i[p]]=l[i[p]]);return I},E=n.createContext({}),R=E.Consumer;function U(l){var d,I=l.pagination,i=I===void 0?!1:I,p=l.prefixCls,r=l.bordered,S=r===void 0?!1:r,Z=l.split,V=Z===void 0?!0:Z,K=l.className,F=l.children,t=l.itemLayout,oe=l.loadMore,B=l.grid,se=l.dataSource,$=se===void 0?[]:se,z=l.size,de=l.header,ce=l.footer,ee=l.loading,me=ee===void 0?!1:ee,H=l.rowKey,te=l.renderItem,ve=l.locale,Ie=o(l,["pagination","prefixCls","bordered","split","className","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]),be=i&&(0,D.Z)(i)==="object"?i:{},_=n.useState(be.defaultCurrent||1),Y=(0,P.Z)(_,2),Q=Y[0],k=Y[1],je=n.useState(be.defaultPageSize||10),pe=(0,P.Z)(je,2),Se=pe[0],De=pe[1],ne=n.useContext(h.E_),le=ne.getPrefixCls,ge=ne.renderEmpty,Oe=ne.direction,Ee={current:1,total:0},Le={},ye=function(X){return function(xe,fe){k(xe),De(fe),i&&i[X]&&i[X](xe,fe)}},Ne=ye("onChange"),We=ye("onShowSizeChange"),Re=function(X,xe){if(!te)return null;var fe;return typeof H=="function"?fe=H(X):H?fe=X[H]:fe=X.key,fe||(fe="list-item-".concat(xe)),Le[xe]=fe,te(X,xe)},Ze=function(){return!!(oe||i||ce)},Ae=function(X,xe){return n.createElement("div",{className:"".concat(X,"-empty-text")},ve&&ve.emptyText||xe("List"))},w=le("list",p),Pe=me;typeof Pe=="boolean"&&(Pe={spinning:Pe});var Me=Pe&&Pe.spinning,Ce="";switch(z){case"large":Ce="lg";break;case"small":Ce="sm";break;default:break}var J=s()(w,(d={},(0,y.Z)(d,"".concat(w,"-vertical"),t==="vertical"),(0,y.Z)(d,"".concat(w,"-").concat(Ce),Ce),(0,y.Z)(d,"".concat(w,"-split"),V),(0,y.Z)(d,"".concat(w,"-bordered"),S),(0,y.Z)(d,"".concat(w,"-loading"),Me),(0,y.Z)(d,"".concat(w,"-grid"),!!B),(0,y.Z)(d,"".concat(w,"-something-after-last-item"),Ze()),(0,y.Z)(d,"".concat(w,"-rtl"),Oe==="rtl"),d),K),a=(0,f.Z)((0,f.Z)((0,f.Z)({},Ee),{total:$.length,current:Q,pageSize:Se}),i||{}),O=Math.ceil(a.total/a.pageSize);a.current>O&&(a.current=O);var C=i?n.createElement("div",{className:"".concat(w,"-pagination")},n.createElement(N.Z,(0,f.Z)({},a,{onChange:Ne,onShowSizeChange:We}))):null,ue=(0,b.Z)($);i&&$.length>(a.current-1)*a.pageSize&&(ue=(0,b.Z)($).splice((a.current-1)*a.pageSize,a.pageSize));var re=(0,M.Z)(),he=n.useMemo(function(){for(var q=0;q<g.c4.length;q+=1){var X=g.c4[q];if(re[X])return X}},[re]),Ke=n.useMemo(function(){if(!!B){var q=he&&B[he]?B[he]:B.column;if(q)return{width:"".concat(100/q,"%"),maxWidth:"".concat(100/q,"%")}}},[B==null?void 0:B.column,he]),Te=Me&&n.createElement("div",{style:{minHeight:53}});if(ue.length>0){var Ue=ue.map(function(q,X){return Re(q,X)}),Fe=n.Children.map(Ue,function(q,X){return n.createElement("div",{key:Le[X],style:Ke},q)});Te=B?n.createElement(m.Z,{gutter:B.gutter},Fe):n.createElement("ul",{className:"".concat(w,"-items")},Ue)}else!F&&!Me&&(Te=Ae(w,ge));var Be=a.position||"bottom",ze=n.useMemo(function(){return{grid:B,itemLayout:t}},[JSON.stringify(B),t]);return n.createElement(E.Provider,{value:ze},n.createElement("div",(0,f.Z)({className:J},Ie),(Be==="top"||Be==="both")&&C,de&&n.createElement("div",{className:"".concat(w,"-header")},de),n.createElement(G.Z,Pe,Te,F),ce&&n.createElement("div",{className:"".concat(w,"-footer")},ce),oe||(Be==="bottom"||Be==="both")&&C))}U.Item=ie;var A=U},54421:function(u,L,e){"use strict";var b=e(38663),f=e.n(b),y=e(57719),P=e.n(y),D=e(13254),n=e(20228),v=e(14781),s=e(6999)}}]);
