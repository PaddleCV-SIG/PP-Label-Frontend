(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[672],{41435:function(i,M,e){"use strict";e.d(M,{Z:function(){return r}});var I=e(94663),u=e(80112);function C(d){return Function.toString.call(d).indexOf("[native code]")!==-1}var m=e(18597);function l(d,c,L){return(0,m.Z)()?l=Reflect.construct:l=function(v,y,n){var x=[null];x.push.apply(x,y);var t=Function.bind.apply(v,x),g=new t;return n&&(0,u.Z)(g,n.prototype),g},l.apply(null,arguments)}function r(d){var c=typeof Map=="function"?new Map:void 0;return r=function(P){if(P===null||!C(P))return P;if(typeof P!="function")throw new TypeError("Super expression must either be null or a function");if(typeof c!="undefined"){if(c.has(P))return c.get(P);c.set(P,v)}function v(){return l(P,arguments,(0,I.Z)(this).constructor)}return v.prototype=Object.create(P.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),(0,u.Z)(v,P)},r(d)}},52822:function(i){i.exports={roundBall:"roundBall___1pqu1",popover:"popover___1-PR6"}},5882:function(i){i.exports={listItem:"listItem___vtDXn",eye:"eye___AsLBS",roundBall:"roundBall___1J_R3",popover:"popover___1x-2R",delete:"delete___WHPf2",listItemActive:"listItemActive___3FRb7"}},56131:function(i){i.exports={labelList:"labelList___jvD05",listHeader:"listHeader___UM5UF",eye:"eye___II3Po",roundBall:"roundBall___j752J"}},78677:function(i){i.exports={container:"container___G0FNe"}},83930:function(i){i.exports={stage:"stage___3H5QL"}},80961:function(i){i.exports={leftToolbar:"leftToolbar___1xi4t",rightToolbar:"rightToolbar___3dNSB"}},82499:function(i){i.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1SHWL",toolBarButtonContainer:"toolBarButtonContainer___1jKUz",toolBarButton:"toolBarButton___3Ouq1",buttonText:"buttonText___10ls7",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AA28"}},73199:function(i){i.exports={classes:"classes___3trCU",mainStage:"mainStage___3ajeT",prevTask:"prevTask___1O-ND",nextTask:"nextTask___2SQX8",draw:"draw___3nlFC",pblock:"pblock___2fZaD",progress:"progress___K3vmc",progressBar:"progressBar___2JlFh",progressDesc:"progressDesc___2iARv",rightSideBar:"rightSideBar___aFTer"}},63097:function(i,M,e){"use strict";var I=e(20136),u=e(55241),C=e(2824),m=e(67294),l=e(52822),r=e.n(l),d=e(63144),c=e(85893),L=function(v){var y=(0,m.useState)(v.color||"#FFF"),n=(0,C.Z)(y,2),x=n[0],t=n[1];return(0,m.useEffect)(function(){t(v.color||"#FFF")},[v]),v.changeable?(0,c.jsx)(u.Z,{getPopupContainer:function(j){return j.parentElement||document.body},overlayClassName:r().popover,openClassName:r().popoverOpenClassName,placement:"bottom",content:(0,c.jsx)(d.xS,{disableAlpha:!0,color:x,onChange:function(j){t(j.hex)},onChangeComplete:v.onChange}),trigger:"click",children:(0,c.jsx)("div",{className:r().roundBall,style:{backgroundColor:x}})}):(0,c.jsx)("div",{className:r().roundBall,style:{backgroundColor:x}})};M.Z=L},5041:function(i,M,e){"use strict";e.d(M,{Z:function(){return R}});var I=e(54421),u=e(38272),C=e(57663),m=e(71577),l=e(2824),r=e(67294),d=e(56131),c=e.n(d),L=e(49111),P=e(19650),v=e(11849),y=e(5882),n=e.n(y),x=e(63097),t=e(85893),g=function(o){var _=(0,v.Z)({},o.label),f=(0,r.useState)(_.invisible),B=(0,l.Z)(f,2),T=B[0],D=B[1],b=o.hideEye?" ":(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("a",{className:n().eye,style:{backgroundImage:T?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(){D(!T),o.onLabelModify(_)}})," "]}),a=o.hideColorPicker?(0,t.jsx)(t.Fragment,{}):(0,t.jsx)(x.Z,{color:_.color,changeable:!0,onChange:function(A){_.color=A.hex,o.onLabelModify(_)}}),O=(0,t.jsxs)(u.ZP.Item,{className:"".concat(n().listItem," ").concat(_.active?n().listItemActive:""),unselectable:"on",onClick:function(){o.onClick(_)},children:[(0,t.jsxs)(P.Z,{align:"center",size:5,children:[b,_.name,a]}),(0,t.jsx)("a",{className:n().delete,style:{backgroundImage:"url(./pics/delete.png)"},onClick:function(A){A.stopPropagation(),o.onLabelDelete(_)}})]});return O},j=g,$=e(71194),N=e(50146),s=e(47673),X=e(24044),H=e(9715),W=e(93766),F=["#FF0000","#008000","#0000FF","#FFFF00","#FFA500","#00FFFF","#8B00FF","#FFC0CB","#7CFC00","#007FFF","#800080","#36BF36","#DAA520","#800000","#008B8B","#B22222","#E6D933","#000080","#FF00FF","#FFFF99","#87CEEB","#5C50E6","#CD5C5C","#20B2AA","#E680FF","#4D1F00","#006374","#B399FF","#8B4513","#BA55D3","#C0C0C0","#808080","#000000"],z=function(o){var _,f,B=(0,r.useState)(((_=o.defaultLabel)===null||_===void 0?void 0:_.color)||F[o.order||0]),T=(0,l.Z)(B,2),D=T[0],b=T[1];(0,r.useEffect)(function(){var h;b(((h=o.defaultLabel)===null||h===void 0?void 0:h.color)||F[o.order||0])},[o]);var a=o.hideColorPicker?(0,t.jsx)(t.Fragment,{}):(0,t.jsx)(W.Z.Item,{label:"Select Color",name:"color",children:(0,t.jsx)(x.Z,{color:D,onChange:function(E){b(E.hex)}})}),O=W.Z.useForm(),U=(0,l.Z)(O,1),A=U[0];return(0,t.jsx)(N.Z,{title:"Add Label",visible:o.visible,onCancel:o.onCancel,footer:null,children:(0,t.jsxs)(W.Z,{form:A,name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!1,labelname:(f=o.defaultLabel)===null||f===void 0?void 0:f.name},onFinish:function(E){var K={name:E.labelname,color:D};o.onLabelAdd(K),A.resetFields()},autoComplete:"off",children:[(0,t.jsx)(W.Z.Item,{label:"Label Name",name:"labelname",rules:[{required:!0,message:"Please input label name!"}],children:(0,t.jsx)(X.Z,{})}),a,(0,t.jsx)(W.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,t.jsxs)(P.Z,{children:[(0,t.jsx)(m.Z,{onClick:function(){var E;(E=o.onCancel)===null||E===void 0||E.call(0),A.resetFields()},children:"\u53D6\u6D88"}),(0,t.jsx)(m.Z,{type:"primary",htmlType:"submit",children:"\u786E\u5B9A"})]})})]})})},Z=z,k=function(o){var _;console.log("render pplabellist");var f=(0,r.useState)(!1),B=(0,l.Z)(f,2),T=B[0],D=B[1];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.ZP,{className:c().labelList,size:"large",header:(0,t.jsx)("div",{className:c().listHeader,children:"Label List"}),footer:(0,t.jsx)("div",{children:(0,t.jsx)(m.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){D(!0)},block:!0,children:"Add Label"})}),bordered:!0,dataSource:o.labels,renderItem:function(a){return(0,t.jsx)(j,{hideColorPicker:o.hideColorPicker,hideEye:o.hideEye,onClick:o.onLabelSelect,label:a,onLabelDelete:o.onLabelDelete,onLabelModify:o.onLabelModify})}}),(0,t.jsx)(Z,{hideColorPicker:o.hideColorPicker,order:(_=o.labels)===null||_===void 0?void 0:_.length,visible:T,onLabelAdd:function(a){o.onLabelAdd(a),D(!1)},onCancel:function(){D(!1)}})]})},R=k},8088:function(i,M,e){"use strict";var I=e(67294),u=e(78677),C=e.n(u),m=e(85893),l=function(d){return(0,m.jsx)("div",{className:"".concat(C().container," ").concat(d.className),children:d.children})};M.Z=l},57436:function(i,M,e){"use strict";var I=e(91220),u=e(2824),C=e(67294),m=e(65031),l=e(84420),r=e.n(l),d=e(83930),c=e.n(d),L=e(85893),P="./pics/basketball.jpg",v=function(n){var x=r()(n.imgSrc||""),t=(0,u.Z)(x,1),g=t[0],j=(g==null?void 0:g.width)||0,$=(g==null?void 0:g.height)||0,N=(0,C.useState)(),s=(0,u.Z)(N,2),X=s[0],H=s[1],W=(0,C.useState)(),F=(0,u.Z)(W,2),z=F[0],Z=F[1],k=(0,C.useState)({x:0,y:0}),R=(0,u.Z)(k,2),S=R[0],o=R[1];function _(){var a=document.getElementById("dr");a&&(H(a.clientWidth),Z(a.clientHeight))}(0,C.useEffect)(function(){window.removeEventListener("resize",_),window.addEventListener("resize",_);var a=document.getElementById("dr");a&&(H(a.clientWidth),Z(a.clientHeight),o({x:a.clientWidth/2,y:a.clientHeight/2}))},[]);var f=[];if(n.annotations){var B=(0,I.Z)(n.annotations),T;try{for(B.s();!(T=B.n()).done;){var D=T.value;if(!!D){var b=D.tool=="polygon"?n.createPolygonFunc:n.createBrushFunc;b&&f.push(b(D,n.onAnnotationModify,n.onAnnotationModifyComplete,n.scale,n.currentTool,n.setCurrentAnnotation,n.currentAnnotation))}}}catch(a){B.e(a)}finally{B.f()}}return(0,L.jsx)(m.Hf,{width:X,height:z,className:c().stage,children:(0,L.jsx)(m.mh,{onMouseDown:function(O){n.onMouseDown&&n.onMouseDown(O,n.scale)},onMouseMove:function(O){n.onMouseMove&&n.onMouseMove(O,n.scale)},onMouseUp:function(O){n.onMouseUp&&n.onMouseUp(O,n.scale)},onContextMenu:function(O){O.evt.preventDefault()},draggable:!1,children:(0,L.jsxs)(m.ZA,{draggable:n.currentTool=="mover",onDragEnd:function(O){},children:[(0,L.jsx)(m.Ee,{draggable:!1,image:g,x:S.x,y:S.y,offsetX:j/2,offsetY:$/2,scaleX:n.scale,scaleY:n.scale}),f]})})})};M.Z=v},44434:function(i,M,e){"use strict";var I=e(67294),u=e(80961),C=e.n(u),m=e(85893),l=function(d){var c=C().leftToolbar;return d.disLoc=="right"&&(c=C().rightToolbar),(0,m.jsx)("div",{className:c,children:d.children})};M.Z=l},61541:function(i,M,e){"use strict";var I=e(49111),u=e(19650),C=e(67294),m=e(82499),l=e.n(m),r=e(85893),d=function(L){return(0,r.jsx)("div",{unselectable:"on",className:"".concat(l().toolBarButtonContainerWrapper," ").concat(L.active&&l().toolBarButtonContainerWrapperActive),onClick:L.onClick,children:(0,r.jsx)(u.Z,{align:"center",className:l().toolBarButtonContainer,size:0,children:(0,r.jsxs)(u.Z,{align:"center",direction:"vertical",className:l().toolBarButton,size:0,children:[(0,r.jsx)("img",{src:L.imgSrc}),(0,r.jsx)("div",{className:l().buttonText,children:L.children})]})})})};M.Z=d},29214:function(i,M,e){"use strict";e.r(M);var I=e(11849),u=e(20228),C=e(11382),m=e(34669),l=e(54458),r=e(34792),d=e(48086),c=e(86582),L=e(91220),P=e(2824),v=e(67294),y=e(73199),n=e.n(y),x=e(8088),t=e(61541),g=e(44434),j=e(5041),$=e(57436),N=e(64322),s=e(85893),X=localStorage.getItem("basePath"),H=function(){var F,z=(0,v.useState)("mover"),Z=(0,P.Z)(z,2),k=Z[0],R=Z[1],S=function(E){if(console.log("selectLabel",a.curr,O.curr,b.all),E.active)b.create({taskId:a.curr.taskId,labelId:E.labelId,dataId:O.curr.dataId});else{var K=b.all.filter(function(p){return p.labelId==E.labelId})[0];console.log("filter ann ",K),b.remove(K.annotationId)}console.log("selectlabel",E)},o=function(E,K){if(!!E){var p=(0,L.Z)(E),Y;try{var Q=function(){var V=Y.value,G=K.filter(function(w){return w.label.labelId==V.labelId});G.length!=0&&(V.active=!0)};for(p.s();!(Y=p.n()).done;)Q()}catch(J){p.e(J)}finally{p.f()}console.log("label.all toggled",A.all),A.setAll((0,c.Z)(E))}},_=(0,N.$L)(v.useState,v.useEffect,{label:{oneHot:!1,postSetCurr:S},effectTrigger:{postTaskChange:o}}),f=(0,P.Z)(_,8),B=f[0],T=f[1],D=f[2],b=f[3],a=f[4],O=f[5],U=f[6],A=f[7];return(0,s.jsxs)(x.Z,{className:n().classes,children:[(0,s.jsxs)(g.Z,{children:[(0,s.jsx)(t.Z,{imgSrc:"./pics/buttons/zoom_in.png",onClick:function(){D.change(.1)},children:"Zoom in"}),(0,s.jsx)(t.Z,{imgSrc:"./pics/buttons/zoom_out.png",onClick:function(){D.change(-.1)},children:"Zoom out"}),(0,s.jsx)(t.Z,{imgSrc:"./pics/buttons/save.png",onClick:function(){d.default.info("Annotations are saved automatically. You don't need to click save.")},children:"Save"}),(0,s.jsx)(t.Z,{imgSrc:"./pics/buttons/move.png",onClick:function(){R("mover"),d.default.info("You can move the image now.")},children:"Move"})]}),(0,s.jsx)("div",{id:"dr",className:n().mainStage,children:(0,s.jsxs)(C.Z,{tip:"loading",spinning:B,children:[(0,s.jsx)("div",{className:n().draw,children:(0,s.jsx)($.Z,{scale:D.curr,currentTool:k,setCurrentAnnotation:function(){},onAnnotationModify:function(){},onAnnotationModifyComplete:function(){},imgSrc:O.imgSrc})}),(0,s.jsx)("div",{className:n().pblock,children:(0,s.jsxs)("div",{className:n().progress,children:[(0,s.jsx)(l.Z,{className:n().progressBar,percent:a.progress,status:"active",showInfo:!1})," ",(0,s.jsxs)("span",{className:n().progressDesc,children:["Current labeling ",a.currIdx," of ",(F=a.all)===null||F===void 0?void 0:F.length,". Already labeled"," ",a.finished,"."]})]})}),(0,s.jsx)("div",{className:n().prevTask,onClick:a.prevTask}),(0,s.jsx)("div",{className:n().nextTask,onClick:a.nextTask})]})}),(0,s.jsxs)(g.Z,{disLoc:"right",children:[(0,s.jsx)(t.Z,{imgSrc:"./pics/buttons/export.png",children:"Export"}),(0,s.jsx)(t.Z,{imgSrc:"./pics/buttons/data_division.png",children:"Split Dataset"})]}),(0,s.jsx)("div",{className:n().rightSideBar,children:(0,s.jsx)(j.Z,{labels:A.all,onLabelSelect:A.setCurr,onLabelAdd:function(E){return A.create((0,I.Z)((0,I.Z)({},E),{},{projectId:U.curr.projectId}))},onLabelDelete:A.remove,onLabelModify:function(){},hideColorPicker:!0,hideEye:!0})})]})};M.default=H}}]);
