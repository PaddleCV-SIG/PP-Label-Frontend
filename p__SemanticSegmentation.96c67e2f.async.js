(self.webpackChunkpp_labeling_frontend=self.webpackChunkpp_labeling_frontend||[]).push([[540],{54777:function(L){L.exports={segment:"segment___1YMcl",mainStage:"mainStage___2otee",rightSideBar:"rightSideBar___2X7jK",determinOutline:"determinOutline___2ls57"}},47e3:function(L,p,a){"use strict";a.r(p),a.d(p,{default:function(){return w}});var en=a(57663),U=a(71577),b=a(2824),S=a(67294),R=a(54777),y=a.n(R),$=a(8088),s=a(61541),E=a(44434),I=a(58967),X=a(5041),Y=a(57436),F=a(14836),t=a(85893),K=function(e){return(0,t.jsx)(s.Z,{active:e.active,imgSrc:e.imgSrc||"./pics/buttons/polygon.png",onClick:e.onClick,children:e.children})},k=K,H=a(43801),W=a(91220),D=a(65031);function G(o){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}function T(o,e){if(!(!o||!e)){var u=G(o);if(!!u){var i=void 0,l=[];return e.forEach(function(c){if(!i){i=c;return}l.push((0,t.jsx)(D.Cd,{x:i,y:c,radius:5,fill:o})),i=void 0}),{color:o,points:e,element:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(D.x1,{stroke:o,strokeWidth:2,globalCompositeOperation:"source-over",lineCap:"round",points:e,tension:.01,closed:!0,fill:"rgba(".concat(u.r,", ").concat(u.g,", ").concat(u.b,", 0.5)")}),l]})}}}}function J(o){var e=0,u=(0,W.Z)(o),i;try{for(u.s();!(i=u.n()).done;){var l=i.value;!l||l.annotationId>e&&(e=l.annotationId)}}catch(c){u.e(c)}finally{u.f()}return e}function Q(o){var e=function(d){var f,h=T((f=o.currentLabel)===null||f===void 0?void 0:f.color,[d.evt.offsetX,d.evt.offsetY]);!h||o.onAnnotationAdd({annotationId:J(o.annotations)+1,label:o.currentLabel,lines:[h]})},u=function(d){var f,h;if(!!o.currentAnnotation){var Z=o.currentAnnotation.lines||[],A=T((f=o.currentLabel)===null||f===void 0?void 0:f.color,(h=Z[0])===null||h===void 0?void 0:h.points.concat([d.evt.offsetX,d.evt.offsetY]));if(!!A){var m={annotationId:o.currentAnnotation.annotationId,label:o.currentAnnotation.label,lines:[A]};o.onAnnotationModify(m)}}},i=function(d){console.log(o.currentTool),o.currentTool=="polygon"&&(o.currentAnnotation?u(d):e(d))},l=function(){o.currentTool=="polygon"};return{onMouseDown:i,onMouseMove:function(){},onMouseUp:l}}var V=function(){var e=(0,S.useState)(void 0),u=(0,b.Z)(e,2),i=u[0],l=u[1],c=(0,S.useState)({color:"",name:""}),d=(0,b.Z)(c,2),f=d[0],h=d[1],Z=(0,S.useState)(),A=(0,b.Z)(Z,2),m=A[0],q=A[1],_=(0,S.useState)([]),B=(0,b.Z)(_,2),v=B[0],M=B[1],nn=(0,S.useState)(10),O=(0,b.Z)(nn,2),j=O[0],z=O[1],g=function(n){q(n),n!=null&&n.label&&h(n.label)},N=function(n){for(var x=[],C=0;C<v.length;C++)v[C].annotationId==n.annotationId?x.push(n):x.push(v[C]);g(n),M(x)},tn=(0,H.Z)({currentLabel:f,brushSize:j,currentTool:i,annotations:v,currentAnnotation:m,onAnnotationAdd:function(n){M(v.concat([n])),m||g(n)},onAnnotationModify:N}),on=Q({currentLabel:f,brushSize:j,currentTool:i,annotations:v,currentAnnotation:m,onAnnotationAdd:function(n){M(v.concat([n])),m||g(n)},onAnnotationModify:N}),P=i=="polygon"?on:tn;return(0,t.jsxs)($.Z,{className:y().segment,children:[(0,t.jsxs)(E.Z,{children:[(0,t.jsx)(s.Z,{imgSrc:"./pics/buttons/intelligent_interaction.png",children:"Intelligent Interaction"}),(0,t.jsx)(k,{active:i=="polygon",onClick:function(){l("polygon"),g(void 0)},children:"Polygon"}),(0,t.jsx)(I.Z,{size:j,active:i=="brush",onClick:function(){i!="rubber"&&i!="brush"&&g(void 0),l("brush")},onChange:function(n){z(n)},children:"Brush"}),(0,t.jsx)(I.Z,{size:j,active:i=="rubber",onClick:function(){i!="rubber"&&i!="brush"&&g(void 0),l("rubber")},onChange:function(n){z(n)},imgSrc:"./pics/buttons/rubber.png",children:"Rubber"}),(0,t.jsx)(s.Z,{imgSrc:"./pics/buttons/zoom_in.png",children:"Zoom in"}),(0,t.jsx)(s.Z,{imgSrc:"./pics/buttons/zoom_out.png",children:"Zoom out"}),(0,t.jsx)(s.Z,{imgSrc:"./pics/buttons/save.png",children:"Save"}),(0,t.jsx)(s.Z,{imgSrc:"./pics/buttons/move.png",children:"Move"}),(0,t.jsx)(s.Z,{imgSrc:"./pics/buttons/export.png",children:"Export"}),(0,t.jsx)(s.Z,{imgSrc:"./pics/buttons/data_division.png",children:"Divide Data"}),(0,t.jsx)(s.Z,{imgSrc:"./pics/buttons/prev.png",children:"Undo"}),(0,t.jsx)(s.Z,{imgSrc:"./pics/buttons/next.png",children:"Redo"}),(0,t.jsx)(s.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:"Clear Mark"})]}),(0,t.jsx)("div",{className:y().mainStage,children:(0,t.jsx)(Y.Z,{annotations:v,onMouseDown:P.onMouseDown,onMouseMove:P.onMouseMove,onMouseUp:P.onMouseUp})}),(0,t.jsxs)("div",{className:y().rightSideBar,children:[(0,t.jsx)("div",{className:y().determinOutline,children:(0,t.jsx)(U.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",block:!0,onClick:function(){g(void 0)},children:"Determine Outline"})}),(0,t.jsx)(X.Z,{selectedLabel:f,onLabelSelect:function(n){h(n),g(void 0)},onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}}),(0,t.jsx)(F.Z,{selectedAnnotation:m,annotations:v,onAnnotationSelect:function(n){n!=null&&n.delete||g(n)},onAnnotationAdd:function(){},onAnnotationModify:function(){},onAnnotationDelete:function(n){M(v.filter(function(x){return x.annotationId!=n.annotationId})),g(void 0)}})]})]})},w=V}}]);
