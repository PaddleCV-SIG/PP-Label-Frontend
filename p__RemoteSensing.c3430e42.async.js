(self.webpackChunkpp_labeling_frontend=self.webpackChunkpp_labeling_frontend||[]).push([[333],{57560:function(o){o.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___147XP",toolBarButtonContainer:"toolBarButtonContainer___ZEvhK",toolBarButton:"toolBarButton___1s2Rh",buttonText:"buttonText___3NTCv",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___2Utx8",popover:"popover___3PRoi"}},52822:function(o){o.exports={roundBall:"roundBall___1pqu1",popover:"popover___1-PR6"}},56131:function(o){o.exports={labelList:"labelList___jvD05",listHeader:"listHeader___UM5UF",eye:"eye___II3Po",roundBall:"roundBall___j752J"}},56623:function(o){o.exports={listItem:"listItem___3P4zY",eye:"eye___13vRl",roundBall:"roundBall___3rXBh",popover:"popover___2bsOT"}},78677:function(o){o.exports={container:"container___G0FNe"}},80961:function(o){o.exports={toolbar:"toolbar___3vxli"}},82499:function(o){o.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1SHWL",toolBarButtonContainer:"toolBarButtonContainer___1jKUz",toolBarButton:"toolBarButton___3Ouq1",buttonText:"buttonText___10ls7",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AA28"}},72869:function(o){o.exports={map:"map___92VPN",customControlIcon:"customControlIcon___3Ki2y"}},20474:function(o){o.exports={RSPop1:"RSPop1___vz5Me",RSPop2:"RSPop2___34pQA"}},2661:function(o){o.exports={toolbar:"toolbar___1o3he"}},93889:function(o){o.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___UtH8a",toolBarButtonContainer:"toolBarButtonContainer___1gFsH",toolBarButton:"toolBarButton___1Wqc1",buttonText:"buttonText___2zcKO",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AXHi"}},75513:function(o){o.exports={segment:"segment___3WmPw",mainStage:"mainStage___2kT1s",rightSideBar:"rightSideBar___11FX3"}},58967:function(o,C,e){"use strict";var Q=e(20136),u=e(19181),R=e(77883),f=e(70507),s=e(57663),l=e(71577),S=e(2824),c=e(67294),O=e(61541),V=e(57560),k=e.n(V),y=e(85893),K=1,n=20,w=10;function z(E){return E?E<=K?K:E>=n?n:E:w}var $=function(t){var I=(0,c.useState)(z(t.size)),F=(0,S.Z)(I,2),A=F[0],q=F[1];return(0,y.jsxs)(u.Z,{overlayClassName:k().popover,placement:"right",content:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(l.Z,{type:"text",onClick:function(){var M,L=z(A-1);q(L),(M=t.onChange)===null||M===void 0||M.call(0,L)},children:"-"}),(0,y.jsx)(f.Z,{min:1,max:20,value:A,onChange:t.onChange,controls:!1,style:{textAlign:"center"}}),(0,y.jsx)(l.Z,{type:"text",onClick:function(){var M,L=z(A+1);q(L),(M=t.onChange)===null||M===void 0||M.call(0,L)},children:"+"})]}),trigger:t.active?"hover":"click",children:[" ",(0,y.jsx)(O.Z,{active:t.active,imgSrc:"./pics/buttons/brush.png",onClick:t.onClick,children:"Brush"})]})};C.Z=$},35475:function(o,C,e){"use strict";e.d(C,{Z:function(){return J}});var Q=e(54421),u=e(38272),R=e(57663),f=e(71577),s=e(2824),l=e(67294),S=e(56131),c=e.n(S),O=e(49111),V=e(19650),k=e(11849),y=e(56623),K=e.n(y),n=e(20136),w=e(19181),z=e(52822),$=e.n(z),E=e(63144),t=e(85893),I=function(m){var r=(0,l.useState)(m.color||"#FFF"),Z=(0,s.Z)(r,2),B=Z[0],x=Z[1];return(0,t.jsx)(w.Z,{getPopupContainer:function(j){return j.parentElement||document.body},overlayClassName:$().popover,openClassName:$().popoverOpenClassName,placement:"bottom",content:(0,t.jsx)(E.xS,{disableAlpha:!0,color:B,onChange:function(j){x(j.hex)},onChangeComplete:m.onChange}),trigger:"click",children:(0,t.jsx)("div",{className:$().roundBall,style:{backgroundColor:B}})})},F=I,A=function(m){var r=(0,k.Z)({},m.label),Z=(0,l.useState)(r.invisible),B=(0,s.Z)(Z,2),x=B[0],D=B[1],j=(0,t.jsx)(u.ZP.Item,{className:K().listItem,unselectable:"on",children:(0,t.jsxs)(V.Z,{align:"center",size:5,children:[(0,t.jsx)("a",{className:K().eye,style:{backgroundImage:x?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(){D(!x),m.onLabelModify(r)}})," ",r.name,(0,t.jsx)(F,{color:r.color,onChange:function(N){r.color=N.hex,m.onLabelModify(r)}})]})});return j},q=A,H=e(71194),M=e(48889),L=e(9715),ee=e(93766),he=e(47673),pe=e(24044),ie=function(m){var r=m.defaultLabel,Z=(0,l.useState)(m.visible),B=(0,s.Z)(Z,2),x=B[0],D=B[1],j=(0,l.useState)((r==null?void 0:r.color)||"#FF0000"),W=(0,s.Z)(j,2),N=W[0],G=W[1],ne=(0,l.useState)((r==null?void 0:r.name)||""),re=(0,s.Z)(ne,2),ce=re[0],de=re[1];return(0,t.jsx)(M.Z,{title:"Add Label",visible:x,onCancel:m.onCancel,footer:null,children:(0,t.jsxs)(ee.Z,{name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!1},onFinish:function(d){var me={name:d.labelname,color:N};m.onLabelAdd(me),D(!1)},autoComplete:"off",children:[(0,t.jsx)(ee.Z.Item,{label:"Label Name",name:"labelname",rules:[{required:!0,message:"Please input label name!"}],children:(0,t.jsx)(pe.Z,{defaultValue:ce})}),(0,t.jsx)(ee.Z.Item,{label:"Select Color",name:"color",rules:[{required:!0,message:"Please select color!"}],children:(0,t.jsx)(F,{color:N,onChange:function(d){G(d.hex)}})}),(0,t.jsx)(ee.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,t.jsxs)(V.Z,{children:[(0,t.jsx)(f.Z,{onClick:function(){var d;D(!1),(d=m.onCancel)===null||d===void 0||d.call(0)},children:"\u53D6\u6D88"}),(0,t.jsx)(f.Z,{type:"primary",htmlType:"submit",children:"\u786E\u5B9A"})]})})]})})},fe=ie,b=[{color:"#FF0000",name:"Label 1"},{color:"#008000",name:"Label 2"}],xe=function(m){var r=(0,l.useState)(b),Z=(0,s.Z)(r,2),B=Z[0],x=Z[1],D=(0,l.useState)(!1),j=(0,s.Z)(D,2),W=j[0],N=j[1];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.ZP,{className:c().labelList,size:"large",header:(0,t.jsx)("div",{className:c().listHeader,children:"Label List"}),footer:(0,t.jsx)("div",{children:(0,t.jsx)(f.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){N(!0)},block:!0,children:"Add Label"})}),bordered:!0,dataSource:B,renderItem:function(ne){return(0,t.jsx)(q,{label:ne,onLabelDelete:m.onLabelDelete,onLabelModify:m.onLabelModify})}}),(0,t.jsx)(fe,{visible:W,onLabelAdd:function(){}})]})},J=xe},8088:function(o,C,e){"use strict";var Q=e(67294),u=e(78677),R=e.n(u),f=e(85893),s=function(S){return(0,f.jsx)("div",{className:"".concat(R().container," ").concat(S.className),children:S.children})};C.Z=s},44434:function(o,C,e){"use strict";var Q=e(67294),u=e(80961),R=e.n(u),f=e(85893),s=function(S){return(0,f.jsx)("div",{className:R().toolbar,children:S.children})};C.Z=s},61541:function(o,C,e){"use strict";var Q=e(49111),u=e(19650),R=e(67294),f=e(82499),s=e.n(f),l=e(85893),S=function(O){return(0,l.jsx)("div",{unselectable:"on",className:"".concat(s().toolBarButtonContainerWrapper," ").concat(O.active&&s().toolBarButtonContainerWrapperActive),onClick:O.onClick,children:(0,l.jsx)(u.Z,{align:"center",className:s().toolBarButtonContainer,size:0,children:(0,l.jsxs)(u.Z,{align:"center",direction:"vertical",className:s().toolBarButton,size:0,children:[(0,l.jsx)("img",{src:O.imgSrc}),(0,l.jsx)("div",{className:s().buttonText,children:O.children})]})})})};C.Z=S},62065:function(o,C,e){"use strict";e.r(C),e.d(C,{default:function(){return Be}});var Q=e(20136),u=e(19181),R=e(2824),f=e(67294),s=e(75513),l=e.n(s),S=e(8088),c=e(61541),O=e(44434),V=e(58967),k=e(35475),y=e(2661),K=e.n(y),n=e(85893),w=function(g){return(0,n.jsx)("div",{className:K().toolbar,children:g.children})},z=w,$=e(49111),E=e(19650),t=e(93889),I=e.n(t),F=function(g){return(0,n.jsx)("div",{unselectable:"on",className:"".concat(I().toolBarButtonContainerWrapper," ").concat(g.active&&I().toolBarButtonContainerWrapperActive),onClick:g.onClick,children:(0,n.jsx)(E.Z,{align:"center",className:I().toolBarButtonContainer,size:0,children:(0,n.jsxs)(E.Z,{align:"center",direction:"vertical",className:I().toolBarButton,size:0,children:[(0,n.jsx)("img",{src:g.imgSrc}),(0,n.jsx)("div",{className:I().buttonText,children:g.children})]})})})},A=F,q=e(47673),H=e(24044),M=e(13062),L=e(71230),ee=e(59250),he=e(13013),pe=e(57663),ie=e(71577),fe=e(89032),b=e(15746),xe=e(30887),J=e(54689),le=e(34792),m=e(48086),r=e(89366),Z=e(57254),B=e(20474),x=e.n(B);function D(_){m.default.info("Click on menu item."),console.log("click",_)}var j=(0,n.jsxs)(J.Z,{onClick:D,children:[(0,n.jsx)(J.Z.Item,{icon:(0,n.jsx)(r.Z,{}),children:"1st menu item"},"1"),(0,n.jsx)(J.Z.Item,{icon:(0,n.jsx)(r.Z,{}),children:"2nd menu item"},"2"),(0,n.jsx)(J.Z.Item,{icon:(0,n.jsx)(r.Z,{}),children:"3rd menu item"},"3")]}),W=function(){return(0,n.jsxs)("div",{children:[(0,n.jsxs)(L.Z,{children:[(0,n.jsx)(b.Z,{span:12,className:x().RSPop1,children:(0,n.jsx)("span",{children:"PD parameter"})}),(0,n.jsx)(b.Z,{span:12,className:x().RSPop2,children:(0,n.jsx)(he.Z,{overlay:j,children:(0,n.jsxs)(ie.Z,{style:{width:"100%"},children:["Dropdown ",(0,n.jsx)(Z.Z,{})]})})})]}),(0,n.jsxs)(L.Z,{children:[(0,n.jsx)(b.Z,{span:12,className:x().RSPop1,children:(0,n.jsx)("span",{children:"Simplified distance"})}),(0,n.jsx)(b.Z,{span:12,className:x().RSPop2,children:(0,n.jsx)(H.Z,{placeholder:"Basic usage"})})]}),(0,n.jsxs)(L.Z,{children:[(0,n.jsx)(b.Z,{span:12,className:x().RSPop1,children:(0,n.jsx)("span",{children:"Simplified angle"})}),(0,n.jsx)(b.Z,{span:12,className:x().RSPop2,children:(0,n.jsx)(H.Z,{placeholder:"Basic usage"})})]}),(0,n.jsxs)(L.Z,{children:[(0,n.jsx)(b.Z,{span:12,className:x().RSPop1,children:(0,n.jsx)("span",{children:"Threshold of building simplification "})}),(0,n.jsx)(b.Z,{span:12,className:x().RSPop2,children:(0,n.jsx)(H.Z,{placeholder:"Basic usage"})})]})]})},N=W,G=e(11849),ne=e(93224),re=e(41004),ce=e(72869),de=e.n(ce),ue=e(74607),d=f.createRef(),me=function(g){var X=g.children,P=(0,ne.Z)(g,["children"]);return f.useEffect(function(){if(d.current){var v=d.current.leafletElement;v.pm.addControls({drawMarker:!1,drawCircle:!1,drawCircleMarker:!1,drawPolyline:!0,drawRectangle:!0,drawPolygon:!0,editMode:!0,dragMode:!0,cutPolygon:!0,rotateMode:!1,removalMode:!0}),v.pm.setGlobalOptions({pmIgnore:!1}),v.pm.Toolbar.createCustomControl({name:"StoreShapes",title:"Store all shapes",block:"custom",className:de().customControlIcon,toggle:!1,afterClick:function(){var Y=JSON.stringify(v.pm.getGeomanDrawLayers(!0).toGeoJSON()),oe="data.geojson",T=document.createElement("a");T.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(Y)),T.setAttribute("download",oe),T.style.display="none",document.body.appendChild(T),T.click(),console.log(Y)}}),v.on("pm:create",function(U){g.onShapeCreate(U)}),v.on("pm:edit",function(U){g.onShapeEdit(U)})}},[]),(0,n.jsx)(re.Z,(0,G.Z)((0,G.Z)({ref:d},P),{},{children:X}))},ge=me,te=e(88014),se=e(3263),ve={lat:0,lng:0,zoom:2},Pe=function(){var g=[ve.lat,ve.lng],X=f.useState([]),P=(0,R.Z)(X,2),v=P[0],U=P[1],Y=function(p){T(p.layer),p.layer.bindPopup("Label: "+p.layer._uid).openPopup(),h(p.layer)},oe=function(p){i(p.layer),console.log(p)};function T(a){var p=prompt("Please enter a Unique Id");if(p)if(v[p]){alert("Id already used, add another one"),T(a);return}else a._uid=p,v[p]=a,U(v);else{alert("Nothing entered, layer deleted ..."),a.remove();return}}function h(a){var p=a._uid,ae=a.toGeoJSON();ae.properties={LabelID:Number(p)},console.log("Store Layer on DB. Id:"+p,ae),console.log(JSON.stringify(ae))}function i(a){var p=a._uid,ae=a.toGeoJSON();console.log("Update Layer on DB. Id:"+p,ae)}return(0,n.jsx)(ge,{className:de().map,center:g,zoom:ve.zoom,onShapeCreate:Y,onShapeEdit:oe,children:(0,n.jsxs)(te.Z,{position:"topright",children:[(0,n.jsx)(te.Z.BaseLayer,{checked:!0,name:"OpenStreetMap.Mapnik",children:(0,n.jsx)(se.Z,{attribution:'\xA9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"})}),(0,n.jsx)(te.Z.BaseLayer,{name:"TianDiTu.Satellite",children:(0,n.jsx)(se.Z,{attribution:"\xA9 TianDiTu",url:"https://t2.tianditu.gov.cn/DataServer?T=img_w&X={x}&Y={y}&L={z}&tk=174705aebfe31b79b3587279e211cb9a"})}),(0,n.jsx)(te.Z.BaseLayer,{name:"Esri.WorldImagery",children:(0,n.jsx)(se.Z,{attribution:"Tiles \xA9 Esri \u2014 Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"})}),(0,n.jsx)(te.Z.Overlay,{name:"Annotion.TianDiTu",children:(0,n.jsx)(se.Z,{url:"https://t2.tianditu.gov.cn/DataServer?T=cia_w&X={x}&Y={y}&L={z}&tk=174705aebfe31b79b3587279e211cb9a"})})]})})},Ce=Pe,Se=function(){var g=(0,f.useState)(void 0),X=(0,R.Z)(g,2),P=X[0],v=X[1];setTimeout(function(){console.log(P)},5e3);var U=function(){var i;(i=d.current)===null||i===void 0||i.leafletElement.pm.enableDraw(P),console.log("drawTools",P)},Y=function(){var i,a;console.log((i=d.current)===null||i===void 0?void 0:i.leafletElement.pm.Draw),(a=d.current)===null||a===void 0||a.leafletElement.pm.Draw.Polygon._removeLastVertex()},oe=function(){var i,a;console.log((i=d.current)===null||i===void 0?void 0:i.leafletElement.pm.Draw),(a=d.current)===null||a===void 0||a.leafletElement.pm.Draw.currentTool._finishShape()},T=function(){var i,a;console.log((i=d.current)===null||i===void 0?void 0:i.leafletElement.pm.Draw),(a=d.current)===null||a===void 0||a.leafletElement.pm.enableGlobalRemovalMode()};return(0,n.jsxs)(S.Z,{className:l().segment,children:[(0,n.jsxs)(O.Z,{children:[(0,n.jsx)(c.Z,{imgSrc:"./pics/buttons/intelligent_interaction.png",children:"Intelligent Interaction"}),(0,n.jsx)(u.Z,{placement:"rightTop",title:"Polygon Edit",defaultVisible:!0,content:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:function(){Y()},children:"Remove Last Vertex"}),(0,n.jsx)("button",{onClick:function(){oe()},children:"Finish"})]}),trigger:P=="Polygon"?"hover":"click",children:(0,n.jsx)(c.Z,{active:P=="Polygon",imgSrc:"./pics/buttons/polygon.png",onClick:function(){v("Polygon"),U()},children:"Polygon"})}),(0,n.jsx)(V.Z,{active:P=="brush",onClick:function(){v("brush")},onChange:function(i){console.log(i)}}),(0,n.jsxs)(u.Z,{placement:"rightTop",title:"title",content:"content",trigger:P=="rubber"?"hover":"click",children:[" ",(0,n.jsx)(c.Z,{imgSrc:"./pics/buttons/rubber.png",onClick:function(){v("rubber"),T()},children:"Rubber"})]}),(0,n.jsx)(c.Z,{imgSrc:"./pics/buttons/zoom_in.png",children:"Zoom in"}),(0,n.jsx)(c.Z,{imgSrc:"./pics/buttons/zoom_out.png",children:"Zoom out"}),(0,n.jsx)(c.Z,{imgSrc:"./pics/buttons/save.png",children:"Save"}),(0,n.jsx)(c.Z,{imgSrc:"./pics/buttons/move.png",children:"Move"}),(0,n.jsx)(c.Z,{imgSrc:"./pics/buttons/export.png",children:"Export"}),(0,n.jsx)(c.Z,{imgSrc:"./pics/buttons/data_division.png",children:"Divide Data"}),(0,n.jsx)(c.Z,{imgSrc:"./pics/buttons/prev.png",children:"Undo"}),(0,n.jsx)(c.Z,{imgSrc:"./pics/buttons/next.png",children:"Redo"}),(0,n.jsx)(c.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:"Clear Mark"})]}),(0,n.jsx)("div",{className:l().mainStage,children:(0,n.jsx)(Ce,{})}),(0,n.jsxs)(z,{children:[(0,n.jsxs)(u.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Setting of boundary simplification",content:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(N,{})}),trigger:P=="boundry"?"click":"hover",children:[" ",(0,n.jsx)(A,{imgSrc:"./pics/buttons/border_simplify.png",onClick:function(){v("boundry")},children:(0,n.jsx)("h2",{children:"Boundary"})})]}),(0,n.jsxs)(u.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Setting of remote sensing",content:"content",trigger:P=="colorgun"?"click":"hover",children:[" ",(0,n.jsx)(A,{imgSrc:"./pics/buttons/remote_sensing_setting.png",onClick:function(){v("colorgun")},children:(0,n.jsx)("h2",{children:"Remote Sensing"})})]}),(0,n.jsxs)(u.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Switch grids",content:"content",trigger:P=="grid"?"click":"hover",children:[" ",(0,n.jsx)(A,{imgSrc:"./pics/buttons/switch_grid.png",onClick:function(){v("grid")},children:(0,n.jsx)("h2",{children:"Grids"})})]})]}),(0,n.jsx)("div",{className:l().rightSideBar,children:(0,n.jsx)(k.Z,{onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}})})]})},Be=Se}}]);
