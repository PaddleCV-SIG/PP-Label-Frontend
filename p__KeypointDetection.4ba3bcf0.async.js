(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[267],{85024:function(b){b.exports={listItem:"listItem___u4Q82",eye:"eye___BwaRm",delete:"delete___31JB_",roundBall:"roundBall___23A7l",popover:"popover___1BNET",annotationId:"annotationId___zAzX4",labelName:"labelName___2ohxn",listItemActive:"listItemActive___2QnA3"}},56159:function(b){b.exports={labelList:"labelList___v7C6K",listHeader:"listHeader___1aY8R",eye:"eye___2MKbp",roundBall:"roundBall___187XH"}},71212:function(b){b.exports={key:"key___HbxlB",mainStage:"mainStage___2kPY7",draw:"draw___1d3zf",pblock:"pblock___13HlD",progress:"progress___1iogf",rightSideBar:"rightSideBar___2SKvQ",finished:"finished___nNiaq"}},14836:function(b,U,n){"use strict";n.d(U,{Z:function(){return M}});var F=n(54421),p=n(38272),R=n(57663),y=n(71577),x=n(67294),f=n(56159),W=n.n(f),D=n(49111),Y=n(19650),t=n(2824),c=n(11849),I=n(85024),m=n.n(I),g=n(63097),a=n(85893),P=function(s){var u=(0,c.Z)({},s.annotation),L=(0,x.useState)(u.invisible),v=(0,t.Z)(L,2),h=v[0],O=v[1],j=(0,x.useState)(0),N=(0,t.Z)(j,2),E=N[0],T=N[1];(0,x.useEffect)(function(){O(s.annotation.invisible)},[s.annotation.invisible]);var C=(0,a.jsxs)(p.ZP.Item,{className:"".concat(m().listItem," ").concat(s.active?m().listItemActive:""),unselectable:"on",onClick:function(){s.onClick(u)},children:[(0,a.jsxs)(Y.Z,{align:"center",size:5,children:[(0,a.jsx)("a",{className:m().eye,style:{backgroundImage:h?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(Z){Z.stopPropagation(),O(!h),s.onAnnotationModify(u)}})," ",(0,a.jsx)("span",{className:m().annotationId,children:u.frontendId}),(0,a.jsx)("span",{className:m().labelName,children:u.label.name}),(0,a.jsx)(g.Z,{color:u.label.color})]}),(0,a.jsx)("a",{className:m().delete,onClick:function(Z){Z.stopPropagation();var H=new Date().getTime();H-E<300||(T(H),s.onAnnotationDelete(u))}})]});return C},r=P,o=n(48971),_=function(s){var u=(0,o.YB)().formatMessage({id:"component.PPAnnotationList.annotationList"}),L=(0,o.YB)().formatMessage({id:"component.PPAnnotationList.addAnnotation"});return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(p.ZP,{className:W().labelList,size:"large",header:(0,a.jsx)("div",{className:W().listHeader,children:u}),bordered:!0,dataSource:s.annotations,renderItem:function(h){var O;return(0,a.jsx)(r,{onClick:s.onAnnotationSelect,annotation:h,active:h.frontendId==((O=s.currAnnotation)===null||O===void 0?void 0:O.frontendId),onAnnotationDelete:s.onAnnotationDelete,onAnnotationModify:s.onAnnotationModify})},footer:(0,a.jsx)("div",{children:(0,a.jsx)(y.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){s.onAnnotationAdd()},block:!0,children:L})})})})},M=_},13931:function(b,U,n){"use strict";n.d(U,{Z:function(){return Y}});var F=n(91220),p=n(11849),R=n(65031),y=n(85893);function x(t){var c=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return c?{r:parseInt(c[1],16),g:parseInt(c[2],16),b:parseInt(c[3],16)}:null}function f(t,c){if(!(!t||!c))return{color:t,points:c}}function W(t,c,I,m,g,a,P,r){if(!t||!t.points||!t.points[0])return[(0,y.jsx)(y.Fragment,{})];var o=t.points[0].points,_=t.points[0].color,M=x(_);if(!M)return[(0,y.jsx)(y.Fragment,{})];var B=(r==null?void 0:r.frontendId)==t.frontendId,s=B?.5:.1,u=void 0,L=[];return o.forEach(function(v,h){if(!u){u=v;return}L.push((0,y.jsx)(R.Cd,{onMouseDown:function(){g=="editor"&&a(t)},draggable:g=="editor",onDragMove:function(j){j.cancelBubble=!0;var N=P==null?void 0:P.current,E=N.findOne(".baseImage"),T=!1,C=j.target.x();C>E.width()/2&&(C=E.width()/2,T=!0),C<-E.width()/2&&(C=-E.width()/2,T=!0);var A=j.target.y();A>E.height()/2&&(A=E.height()/2,T=!0),A<-E.height()/2&&(A=-E.height()/2,T=!0),T&&j.target.setPosition({x:C,y:A}),o[h-1]=C,o[h]=A;var Z=(0,p.Z)((0,p.Z)({},t),{},{points:[{color:_,points:o}]});c(Z)},onMouseOver:function(){g=="editor"&&(document.body.style.cursor="pointer")},onMouseOut:function(){document.body.style.cursor="default"},x:u,y:v,radius:5/m,fill:_})),u=void 0}),[(0,y.jsxs)(R.ZA,{children:[(0,y.jsx)(R.x1,{onMouseOver:function(){g=="editor"&&(document.body.style.cursor="pointer")},onMouseOut:function(){document.body.style.cursor="default"},onClick:function(){g=="editor"&&a(t)},stroke:_,strokeWidth:2/m,globalCompositeOperation:"source-over",lineCap:"round",points:o,tension:0,closed:!0,fill:"rgba(".concat(M.r,", ").concat(M.g,", ").concat(M.b,", ").concat(s,")")}),L]},t.frontendId)]}function D(t){var c=0,I=(0,F.Z)(t),m;try{for(I.s();!(m=I.n()).done;){var g=m.value;!g||!g.frontendId||g.frontendId>c&&(c=g.frontendId)}}catch(a){I.e(a)}finally{I.f()}return c}function Y(t){var c=function(P,r,o,_){var M,B=(P.evt.offsetX+r)/_,s=(P.evt.offsetY+o)/_,u=f((M=t.currentLabel)===null||M===void 0?void 0:M.color,[B,s]);!u||t.onAnnotationAdd({type:"polygon",frontendId:D(t.annotations)+1,label:t.currentLabel,points:[u]})},I=function(P,r,o,_){var M,B;if(!!t.currentAnnotation){var s=(P.evt.offsetX+r)/_,u=(P.evt.offsetY+o)/_,L=t.currentAnnotation.points||[],v=f((M=t.currentLabel)===null||M===void 0?void 0:M.color,(B=L[0])===null||B===void 0?void 0:B.points.concat([s,u]));if(!!v){var h={type:"polygon",frontendId:t.currentAnnotation.frontendId,label:t.currentAnnotation.label,points:[v]};t.onAnnotationModify(h)}}},m=function(P,r,o,_){t.currentTool=="polygon"&&(t.currentAnnotation?I(P,r,o,_):c(P,r,o,_))},g=function(){t.currentTool=="polygon"&&t.onMouseUp()};return{onMouseDown:m,onMouseMove:function(){},onMouseUp:g,createElementsFunc:W}}},29919:function(b,U,n){"use strict";var F=n(67294),p=n(61541),R=n(85893),y=function(f){return(0,R.jsx)(p.Z,{active:f.active,imgSrc:f.imgSrc||"./pics/buttons/polygon.png",onClick:f.onClick,children:f.children})};U.Z=y},82881:function(b,U,n){"use strict";n.r(U);var F=n(57663),p=n(71577),R=n(34669),y=n(54458),x=n(2824),f=n(67294),W=n(71212),D=n.n(W),Y=n(8088),t=n(61541),c=n(44434),I=n(5041),m=n(57436),g=n(14836),a=n(29919),P=n(13931),r=n(48971),o=n(85893),_=40,M=function(){var s,u=(0,f.useState)(void 0),L=(0,x.Z)(u,2),v=L[0],h=L[1],O=(0,f.useState)({color:"",name:""}),j=(0,x.Z)(O,2),N=j[0],E=j[1],T=(0,f.useState)(),C=(0,x.Z)(T,2),A=C[0],Z=C[1],H=(0,f.useState)([]),Q=(0,x.Z)(H,2),S=Q[0],k=Q[1],tn=(0,f.useState)(1),w=(0,x.Z)(tn,2),z=w[0],J=w[1],G=function(e){e||J(1),e<.1||e>3?J(1):J(e)},K=function(e){Z(e),e!=null&&e.label&&E(e.label)};(0,f.useEffect)(function(){localStorage.removeItem("history"),X([])},[]);function X(l,e){var i=localStorage.getItem("history"),d=i?JSON.parse(i):{index:-1,items:[]},nn={currentAnnotation:e,annotations:l};if(JSON.stringify(d.items[d.index])!=JSON.stringify(nn)){var Pn=d.index>_?d.index-_:0,Mn=d.items.splice(Pn,d.index==0?1:d.index+1);d.items=Mn.concat([nn]),d.index<=_?d.index++:d.index=_+1,localStorage.setItem("history",JSON.stringify(d))}}var on=function(){var e=localStorage.getItem("history");if(!!e){var i=JSON.parse(e);if(!!i&&!(i.index>=i.items.length-1)){i.index++,localStorage.setItem("history",JSON.stringify(i));var d=i.items[i.index];Z(d.currentAnnotation),k(d.annotations)}}},en=function(){var e=localStorage.getItem("history");if(!!e){var i=JSON.parse(e);if(!(!i||!i.index)&&!(i.index<=0)){i.index--,localStorage.setItem("history",JSON.stringify(i));var d=i.items[i.index];Z(d.currentAnnotation),k(d.annotations)}}},V=function(e){for(var i=[],d=0;d<S.length;d++)S[d].annotationId==e.annotationId?i.push(e):i.push(S[d]);K(e),k(i)},q=(0,P.Z)({currentLabel:N,currentTool:v,annotations:S,currentAnnotation:A,onAnnotationAdd:function(e){var i=S.concat([e]);k(i),A||K(e)},onAnnotationModify:V,onMouseUp:function(){X(S,A)}}),$=q,an=(0,r.YB)().formatMessage({id:"pages.toolBar.polygon"}),rn=(0,r.YB)().formatMessage({id:"pages.toolBar.zoomIn"}),sn=(0,r.YB)().formatMessage({id:"pages.toolBar.zoomOut"}),ln=(0,r.YB)().formatMessage({id:"pages.toolBar.move"}),dn=(0,r.YB)().formatMessage({id:"pages.toolBar.unDo"}),un=(0,r.YB)().formatMessage({id:"pages.toolBar.reDo"}),cn=(0,r.YB)().formatMessage({id:"pages.toolBar.save"}),_n=(0,r.YB)().formatMessage({id:"pages.toolBar.edit"}),vn=(0,r.YB)().formatMessage({id:"pages.toolBar.clearMark"}),fn=(0,r.YB)().formatMessage({id:"pages.toolBar.determineOutline"}),mn=(0,r.YB)().formatMessage({id:"pages.toolBar.divideData"}),gn=(0,r.YB)().formatMessage({id:"pages.toolBar.export"});return(0,o.jsxs)(Y.Z,{className:D().key,children:[(0,o.jsxs)(c.Z,{children:[(0,o.jsx)(a.Z,{active:v=="polygon",onClick:function(){h("polygon"),K(void 0)},children:an}),(0,o.jsx)(t.Z,{imgSrc:"./pics/buttons/edit.png",children:_n}),(0,o.jsx)(t.Z,{imgSrc:"./pics/buttons/zoom_in.png",onClick:function(){G(z+.1)},children:rn}),(0,o.jsx)(t.Z,{imgSrc:"./pics/buttons/zoom_out.png",onClick:function(){G(z-.1)},children:sn}),(0,o.jsx)(t.Z,{imgSrc:"./pics/buttons/save.png",children:cn}),(0,o.jsx)(t.Z,{imgSrc:"./pics/buttons/move.png",onClick:function(){h("mover")},children:ln}),(0,o.jsx)(t.Z,{imgSrc:"./pics/buttons/prev.png",onClick:function(){en()},children:dn}),(0,o.jsx)(t.Z,{imgSrc:"./pics/buttons/next.png",onClick:function(){on()},children:un}),(0,o.jsx)(t.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:vn})]}),(0,o.jsxs)("div",{id:"dr",className:D().mainStage,children:[(0,o.jsx)("div",{className:D().draw,children:(0,o.jsx)(m.Z,{width:(s=document.getElementById("dr"))===null||s===void 0?void 0:s.clientWidth,scale:z,annotations:S,currentTool:v,currentAnnotation:A,setCurrentAnnotation:K,onAnnotationModify:V,onAnnotationModifyComplete:function(){X(S,A)},onMouseDown:$.onMouseDown,onMouseMove:$.onMouseMove,onMouseUp:$.onMouseUp,createPolygonFunc:q.createElementsFunc})}),(0,o.jsx)("div",{className:D().pblock,children:(0,o.jsx)("div",{className:D().progress,children:(0,o.jsx)(y.Z,{percent:50,status:"active"})})})]}),(0,o.jsxs)(c.Z,{disLoc:"right",children:[(0,o.jsx)(t.Z,{imgSrc:"./pics/buttons/data_division.png",children:mn}),(0,o.jsx)(t.Z,{imgSrc:"./pics/buttons/export.png",children:gn})]}),(0,o.jsxs)("div",{className:D().rightSideBar,children:[(0,o.jsx)("div",{className:D().finished,children:(0,o.jsx)(p.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",block:!0,onClick:function(){K(void 0)},children:fn})}),(0,o.jsx)(I.Z,{selectedLabel:N,onLabelSelect:function(e){E(e),K(void 0)},onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}}),(0,o.jsx)(g.Z,{selectedAnnotation:A,annotations:S,onAnnotationSelect:function(e){e!=null&&e.delete||K(e)},onAnnotationAdd:function(){},onAnnotationModify:function(){},onAnnotationDelete:function(e){k(S.filter(function(i){return i.annotationId!=e.annotationId})),K(void 0)}})]})]})};U.default=M}}]);
