(self.webpackChunkpp_labeling_frontend=self.webpackChunkpp_labeling_frontend||[]).push([[572],{26647:function(s){s.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1FTWb",toolBarButtonContainer:"toolBarButtonContainer___1Vahn",toolBarButton:"toolBarButton___3mR2H",buttonText:"buttonText___Y0WDm",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3lRZ8",popover:"popover___3zzu2",popoverLeft:"popoverLeft___15lGe"}},52822:function(s){s.exports={roundBall:"roundBall___1pqu1",popover:"popover___1-PR6"}},32495:function(s){s.exports={listItem:"listItem___1MXXF",eye:"eye___3nddM",delete:"delete___y9u-D",roundBall:"roundBall___DMczd",popover:"popover___E0HLD",annotationId:"annotationId___1ks8N",labelName:"labelName___130ie",listItemActive:"listItemActive___1rNB-"}},38670:function(s){s.exports={labelList:"labelList___3uLRO",listHeader:"listHeader___1ZPcO",eye:"eye___2yUvw",roundBall:"roundBall___1xKCU"}},5882:function(s){s.exports={listItem:"listItem___vtDXn",eye:"eye___AsLBS",roundBall:"roundBall___1J_R3",popover:"popover___1x-2R",listItemActive:"listItemActive___3FRb7"}},56131:function(s){s.exports={labelList:"labelList___jvD05",listHeader:"listHeader___UM5UF",eye:"eye___II3Po",roundBall:"roundBall___j752J"}},78677:function(s){s.exports={container:"container___G0FNe"}},80961:function(s){s.exports={leftToolbar:"leftToolbar___1xi4t",rightToolbar:"rightToolbar___3dNSB"}},82499:function(s){s.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1SHWL",toolBarButtonContainer:"toolBarButtonContainer___1jKUz",toolBarButton:"toolBarButton___3Ouq1",buttonText:"buttonText___10ls7",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AA28"}},72869:function(s){s.exports={map:"map___92VPN",customControlIcon:"customControlIcon___3Ki2y"}},20474:function(s){s.exports={RSPop1:"RSPop1___vz5Me",RSPop2:"RSPop2___34pQA"}},73762:function(s){s.exports={RSPop1:"RSPop1___2Uh31",RSPop2:"RSPop2___2Q-T8"}},87610:function(s){s.exports={RSPop1:"RSPop1___1iBEf",RSPop2:"RSPop2___1W841",RSPop3:"RSPop3___1Whcp"}},35524:function(s){s.exports={segment:"segment___3c01P",mainStage:"mainStage___2jlIH",draw:"draw___3Ftm7",halfMap:"halfMap___1HRmv",interval:"interval___21ItQ",pblock:"pblock___10iZ8",progress:"progress___wlToW",rightSideBar:"rightSideBar___25YC7",determinOutline:"determinOutline___2lYb0"}},27992:function(s,g,e){"use strict";var J=e(20136),h=e(55241),b=e(77883),u=e(70507),E=e(57663),d=e(71577),S=e(2824),i=e(67294),O=e(61541),a=e(26647),x=e.n(a),c=e(85893),Z=1,l=100,r=10;function m(v){return v?v<=Z?Z:v>=l?l:v:r}var A=function(p){var o=(0,i.useState)(m(p.size)),C=(0,S.Z)(o,2),K=C[0],M=C[1],y=function(I){M(m(I))};return(0,i.useEffect)(function(){y(p.size)},[p.size]),(0,c.jsxs)(h.Z,{overlayClassName:"".concat(x().popover," ").concat(p.disLoc=="left"?x().popoverLeft:""),placement:p.disLoc||"right",content:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(d.Z,{type:"text",onClick:function(){var I,f=m(K-1);y(f),(I=p.onChange)===null||I===void 0||I.call(0,f)},children:"-"}),(0,c.jsx)(u.Z,{min:Z,max:l,value:K,onChange:function(I){var f;(f=p.onChange)===null||f===void 0||f.call(0,I)},controls:!1,style:{textAlign:"center"}}),(0,c.jsx)(d.Z,{type:"text",onClick:function(){var I,f=m(K+1);y(f),(I=p.onChange)===null||I===void 0||I.call(0,f)},children:"+"})]}),trigger:"hover",children:[" ",(0,c.jsx)(O.Z,{imgSrc:p.imgSrc,onClick:p.onClick,children:p.children})]})};g.Z=A},63097:function(s,g,e){"use strict";var J=e(20136),h=e(55241),b=e(2824),u=e(67294),E=e(52822),d=e.n(E),S=e(63144),i=e(85893),O=function(x){var c=(0,u.useState)(x.color||"#FFF"),Z=(0,b.Z)(c,2),l=Z[0],r=Z[1];return(0,u.useEffect)(function(){r(x.color||"#FFF")},[x]),x.changeable?(0,i.jsx)(h.Z,{getPopupContainer:function(A){return A.parentElement||document.body},overlayClassName:d().popover,openClassName:d().popoverOpenClassName,placement:"bottom",content:(0,i.jsx)(S.xS,{disableAlpha:!0,color:l,onChange:function(A){r(A.hex)},onChangeComplete:x.onChange}),trigger:"click",children:(0,i.jsx)("div",{className:d().roundBall,style:{backgroundColor:l}})}):(0,i.jsx)("div",{className:d().roundBall,style:{backgroundColor:l}})};g.Z=O},51327:function(s,g,e){"use strict";e.d(g,{Z:function(){return v}});var J=e(54421),h=e(38272),b=e(57663),u=e(71577),E=e(67294),d=e(38670),S=e.n(d),i=e(49111),O=e(19650),a=e(11849),x=e(32495),c=e.n(x),Z=e(63097),l=e(85893),r=function(o){var C=(0,a.Z)({},o.annotation),K=!1,M=(0,l.jsxs)(h.ZP.Item,{className:"".concat(c().listItem," ").concat(o.active?c().listItemActive:""),unselectable:"on",onClick:function(){o.onClick(C)},children:[(0,l.jsxs)(O.Z,{align:"center",size:5,children:[(0,l.jsx)("a",{className:c().eye,style:{backgroundImage:K?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(){o.onAnnotationModify(C)}})," ",(0,l.jsx)("span",{className:c().annotationId,children:C.properties.annotationId}),(0,l.jsx)("span",{className:c().labelName,children:C.properties.labelName}),(0,l.jsx)(Z.Z,{color:C.properties.stroke})]}),(0,l.jsx)("a",{className:c().delete,onClick:function(){o.onAnnotationDelete(C)}})]});return M},m=r,A=function(o){return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(h.ZP,{className:S().labelList,size:"large",header:(0,l.jsx)("div",{className:S().listHeader,children:"Annotation List"}),bordered:!0,dataSource:o.annotations.features,renderItem:function(K){return(0,l.jsx)(m,{onClick:o.onAnnotationSelect,annotation:K,active:!1,onAnnotationDelete:o.onAnnotationDelete,onAnnotationModify:o.onAnnotationModify})},footer:(0,l.jsx)("div",{children:(0,l.jsx)(u.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){o.onAnnotationSelect(void 0)},block:!0,children:"Add Annotation"})})})})},v=A},5041:function(s,g,e){"use strict";e.d(g,{Z:function(){return q}});var J=e(54421),h=e(38272),b=e(57663),u=e(71577),E=e(2824),d=e(67294),S=e(56131),i=e.n(S),O=e(49111),a=e(19650),x=e(11849),c=e(5882),Z=e.n(c),l=e(63097),r=e(85893),m=function(j){var R=(0,x.Z)({},j.label),N=(0,d.useState)(R.invisible),X=(0,E.Z)(N,2),D=X[0],n=X[1],$=(0,r.jsx)(h.ZP.Item,{className:"".concat(Z().listItem," ").concat(j.active?Z().listItemActive:""),unselectable:"on",onClick:function(){j.onClick(R)},children:(0,r.jsxs)(a.Z,{align:"center",size:5,children:[(0,r.jsx)("a",{className:Z().eye,style:{backgroundImage:D?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(){n(!D),j.onLabelModify(R)}})," ",R.name,(0,r.jsx)(l.Z,{color:R.color,changeable:!0,onChange:function(Y){R.color=Y.hex,j.onLabelModify(R)}})]})});return $},A=m,v=e(71194),p=e(50146),o=e(47673),C=e(24044),K=e(9715),M=e(93766),y=["#FF0000","#008000","#0000FF","#FFFF00","#FFA500","#00FFFF","#8B00FF","#FFC0CB","#7CFC00","#007FFF","#800080","#36BF36","#DAA520","#800000","#008B8B","#B22222","#E6D933","#000080","#FF00FF","#FFFF99","#87CEEB","#5C50E6","#CD5C5C","#20B2AA","#E680FF","#4D1F00","#006374","#B399FF","#8B4513","#BA55D3","#C0C0C0","#808080","#000000"],W=function(j){var R,N,X=(0,d.useState)(((R=j.defaultLabel)===null||R===void 0?void 0:R.color)||y[j.order||0]),D=(0,E.Z)(X,2),n=D[0],$=D[1];(0,d.useEffect)(function(){var z;$(((z=j.defaultLabel)===null||z===void 0?void 0:z.color)||y[j.order||0])},[j]);var G=M.Z.useForm(),Y=(0,E.Z)(G,1),Q=Y[0];return(0,r.jsx)(p.Z,{title:"Add Label",visible:j.visible,onCancel:j.onCancel,footer:null,children:(0,r.jsxs)(M.Z,{form:Q,name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!1,labelname:(N=j.defaultLabel)===null||N===void 0?void 0:N.name},onFinish:function(U){var re={name:U.labelname,color:n};j.onLabelAdd(re),Q.resetFields()},autoComplete:"off",children:[(0,r.jsx)(M.Z.Item,{label:"Label Name",name:"labelname",rules:[{required:!0,message:"Please input label name!"}],children:(0,r.jsx)(C.Z,{})}),(0,r.jsx)(M.Z.Item,{label:"Select Color",name:"color",children:(0,r.jsx)(l.Z,{color:n,onChange:function(U){$(U.hex)}})}),(0,r.jsx)(M.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,r.jsxs)(a.Z,{children:[(0,r.jsx)(u.Z,{onClick:function(){var U;(U=j.onCancel)===null||U===void 0||U.call(0),Q.resetFields()},children:"\u53D6\u6D88"}),(0,r.jsx)(u.Z,{type:"primary",htmlType:"submit",children:"\u786E\u5B9A"})]})})]})})},I=W,f=[{color:"#FF0000",name:"Label 1"},{color:"#008000",name:"Label 2"}],he=function(j){var R=(0,d.useState)(f),N=(0,E.Z)(R,2),X=N[0],D=N[1],n=(0,d.useState)(!1),$=(0,E.Z)(n,2),G=$[0],Y=$[1];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.ZP,{className:i().labelList,size:"large",header:(0,r.jsx)("div",{className:i().listHeader,children:"Label List"}),footer:(0,r.jsx)("div",{children:(0,r.jsx)(u.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){Y(!0)},block:!0,children:"Add Label"})}),bordered:!0,dataSource:X,renderItem:function(z){var U;return(0,r.jsx)(A,{onClick:j.onLabelSelect,label:z,active:z.name==((U=j.selectedLabel)===null||U===void 0?void 0:U.name),onLabelDelete:j.onLabelDelete,onLabelModify:j.onLabelModify})}}),(0,r.jsx)(I,{order:X.length,visible:G,onLabelAdd:function(z){X.push(z),D(X),Y(!1)},onCancel:function(){Y(!1)}})]})},q=he},8088:function(s,g,e){"use strict";var J=e(67294),h=e(78677),b=e.n(h),u=e(85893),E=function(S){return(0,u.jsx)("div",{className:"".concat(b().container," ").concat(S.className),children:S.children})};g.Z=E},44434:function(s,g,e){"use strict";var J=e(67294),h=e(80961),b=e.n(h),u=e(85893),E=function(S){var i=b().leftToolbar;return S.disLoc=="right"&&(i=b().rightToolbar),(0,u.jsx)("div",{className:i,children:S.children})};g.Z=E},61541:function(s,g,e){"use strict";var J=e(49111),h=e(19650),b=e(67294),u=e(82499),E=e.n(u),d=e(85893),S=function(O){return(0,d.jsx)("div",{unselectable:"on",className:"".concat(E().toolBarButtonContainerWrapper," ").concat(O.active&&E().toolBarButtonContainerWrapperActive),onClick:O.onClick,children:(0,d.jsx)(h.Z,{align:"center",className:E().toolBarButtonContainer,size:0,children:(0,d.jsxs)(h.Z,{align:"center",direction:"vertical",className:E().toolBarButton,size:0,children:[(0,d.jsx)("img",{src:O.imgSrc}),(0,d.jsx)("div",{className:E().buttonText,children:O.children})]})})})};g.Z=S},37233:function(s,g,e){"use strict";e.d(g,{Z:function(){return m}});var J=e(67294),h=e(11849),b=e(93224),u=e(41004),E=e(72869),d=e.n(E),S=e(74607),i=e(85893),O=function(v){var p=v.children,o=v.leafletMapRef,C=v.displayTools,K=(0,b.Z)(v,["children","leafletMapRef","displayTools"]);return J.useEffect(function(){if(o.current){var M=o.current.leafletElement;M.pm.addControls({drawMarker:!1,drawCircle:!1,drawCircleMarker:!1,drawPolyline:!1,drawRectangle:!1,drawPolygon:!1,editMode:!1,dragMode:!1,cutPolygon:!0,rotateMode:!1,removalMode:!1}),M.pm.setGlobalOptions({pmIgnore:!1}),v.displayTools&&M.pm.Toolbar.createCustomControl({name:"StoreShapes",title:"Store all shapes",block:"custom",className:d().customControlIcon,toggle:!1,afterClick:function(){var W=JSON.stringify(M.pm.getGeomanDrawLayers(!0).toGeoJSON()),I="data.geojson",f=document.createElement("a");f.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(W)),f.setAttribute("download",I),f.style.display="none",document.body.appendChild(f),f.click(),console.log(W)}}),M.on("pm:create",function(y){v.onShapeCreate(y)}),M.on("pm:edit",function(y){v.onShapeEdit(y)})}},[]),(0,i.jsx)(u.Z,(0,h.Z)((0,h.Z)({ref:o},K),{},{children:p}))},a=O,x=e(88014),c=e(16072),Z=e(18836),l={lat:0,lng:0,zoom:2},r=function(v){var p=[l.lat,l.lng];return(0,i.jsx)(a,{leafletMapRef:v.leafletMapRef,displayTools:v.displayTools,className:d().map,center:p,zoom:l.zoom,onShapeCreate:v.onShapeCreate,onShapeEdit:v.onShapeEdit,zoomControl:!1,children:(0,i.jsxs)(x.Z,{position:"topright",children:[(0,i.jsx)(x.Z.BaseLayer,{checked:!0,name:"TianDiTu.Vector",children:(0,i.jsxs)(c.Z,{attribution:'\xA9 <a href="https://www.tianditu.gov.cn/">TianDiTu</a> GS(2021)3715',children:[(0,i.jsx)(Z.Z,{url:"https://t2.tianditu.gov.cn/DataServer?T=vec_w&X={x}&Y={y}&L={z}&tk=8e879a4cad078fd3ce7456f2737fc4cc"}),(0,i.jsx)(Z.Z,{url:"https://t2.tianditu.gov.cn/DataServer?T=cva_w&X={x}&Y={y}&L={z}&tk=8e879a4cad078fd3ce7456f2737fc4cc"})]})}),(0,i.jsx)(x.Z.BaseLayer,{name:"OpenStreetMap.Mapnik",children:(0,i.jsx)(Z.Z,{attribution:'\xA9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"})}),(0,i.jsx)(x.Z.Overlay,{name:"Esri.WorldImagery",children:(0,i.jsx)(Z.Z,{attribution:"Tiles \xA9 Esri \u2014 Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"})})]})})},m=r},49813:function(s,g,e){"use strict";var J=e(47673),h=e(24044),b=e(13062),u=e(71230),E=e(59250),d=e(13013),S=e(57663),i=e(71577),O=e(89032),a=e(15746),x=e(30887),c=e(54689),Z=e(34792),l=e(48086),r=e(89366),m=e(57254),A=e(20474),v=e.n(A),p=e(67294),o=e(85893);function C(y){l.default.info("Click on menu item."),console.log("click",y)}var K=(0,o.jsxs)(c.Z,{onClick:C,children:[(0,o.jsx)(c.Z.Item,{icon:(0,o.jsx)(r.Z,{}),children:"1st menu item"},"1"),(0,o.jsx)(c.Z.Item,{icon:(0,o.jsx)(r.Z,{}),children:"2nd menu item"},"2"),(0,o.jsx)(c.Z.Item,{icon:(0,o.jsx)(r.Z,{}),children:"3rd menu item"},"3")]}),M=function(){return(0,o.jsxs)("div",{children:[(0,o.jsxs)(u.Z,{children:[(0,o.jsx)(a.Z,{span:12,className:v().RSPop1,children:(0,o.jsx)("span",{children:"PD parameter"})}),(0,o.jsx)(a.Z,{span:12,className:v().RSPop2,children:(0,o.jsx)(d.Z,{overlay:K,children:(0,o.jsxs)(i.Z,{style:{width:"100%"},children:["Dropdown ",(0,o.jsx)(m.Z,{})]})})})]}),(0,o.jsxs)(u.Z,{children:[(0,o.jsx)(a.Z,{span:12,className:v().RSPop1,children:(0,o.jsx)("span",{children:"Simplified distance"})}),(0,o.jsx)(a.Z,{span:12,className:v().RSPop2,children:(0,o.jsx)(h.Z,{placeholder:"Basic usage"})})]}),(0,o.jsxs)(u.Z,{children:[(0,o.jsx)(a.Z,{span:12,className:v().RSPop1,children:(0,o.jsx)("span",{children:"Simplified angle"})}),(0,o.jsx)(a.Z,{span:12,className:v().RSPop2,children:(0,o.jsx)(h.Z,{placeholder:"Basic usage"})})]}),(0,o.jsxs)(u.Z,{children:[(0,o.jsx)(a.Z,{span:12,className:v().RSPop1,children:(0,o.jsx)("span",{children:"Threshold of building simplification "})}),(0,o.jsx)(a.Z,{span:12,className:v().RSPop2,children:(0,o.jsx)(h.Z,{placeholder:"Basic usage"})})]})]})};g.Z=M},97927:function(s,g,e){"use strict";var J=e(13062),h=e(71230),b=e(47673),u=e(24044),E=e(89032),d=e(15746),S=e(87610),i=e.n(S),O=e(67294),a=e(85893),x=function(){return(0,a.jsxs)("div",{children:[(0,a.jsxs)(h.Z,{children:[(0,a.jsx)(d.Z,{span:12,className:i().RSPop1,children:(0,a.jsx)("span",{children:"Size of Grid"})}),(0,a.jsx)(d.Z,{span:12,className:i().RSPop2,children:(0,a.jsx)(u.Z,{placeholder:"Basic usage"})})]}),(0,a.jsxs)(h.Z,{children:[(0,a.jsx)(d.Z,{span:12,className:i().RSPop1,children:(0,a.jsx)("span",{children:"Overlap of Grid"})}),(0,a.jsx)(d.Z,{span:12,className:i().RSPop2,children:(0,a.jsx)(u.Z,{placeholder:"Basic usage"})})]}),(0,a.jsx)(h.Z,{children:(0,a.jsx)("span",{className:i().RSPop3,children:"Current annotation completed 1 / 16"})})]})};g.Z=x},76233:function(s,g,e){"use strict";e.r(g),e.d(g,{default:function(){return Ee}});var J=e(34669),h=e(54458),b=e(20136),u=e(55241),E=e(49111),d=e(19650),S=e(62350),i=e(75443),O=e(57663),a=e(71577),x=e(2824),c=e(67294),Z=e(35524),l=e.n(Z),r=e(8088),m=e(61541),A=e(44434),v=e(5041),p=e(49813),o=e(98858),C=e(4914),K=e(13062),M=e(71230),y=e(59250),W=e(13013),I=e(89032),f=e(15746),he=e(30887),q=e(54689),ie=e(34792),j=e(48086),R=e(89366),N=e(57254),X=e(73762),D=e.n(X),n=e(85893);function $(P){j.default.info("Click on menu item."),console.log("click",P)}var G=(0,n.jsxs)(q.Z,{onClick:$,children:[(0,n.jsx)(q.Z.Item,{icon:(0,n.jsx)(R.Z,{}),children:"band_1"},"1"),(0,n.jsx)(q.Z.Item,{icon:(0,n.jsx)(R.Z,{}),children:"band_2"},"2"),(0,n.jsx)(q.Z.Item,{icon:(0,n.jsx)(R.Z,{}),children:"band_3"},"3")]}),Y=function(){return(0,n.jsxs)("div",{children:[(0,n.jsxs)(M.Z,{children:[(0,n.jsx)(f.Z,{className:D().RSPop1,children:(0,n.jsx)("span",{children:"R"})}),(0,n.jsx)(f.Z,{className:D().RSPop2,children:(0,n.jsx)(W.Z,{overlay:G,children:(0,n.jsxs)(a.Z,{style:{width:"100%"},children:["Band ",(0,n.jsx)(N.Z,{})]})})}),(0,n.jsx)(f.Z,{className:D().RSPop1,children:(0,n.jsx)("span",{children:"G"})}),(0,n.jsx)(f.Z,{className:D().RSPop2,children:(0,n.jsx)(W.Z,{overlay:G,children:(0,n.jsxs)(a.Z,{style:{width:"100%"},children:["Band ",(0,n.jsx)(N.Z,{})]})})}),(0,n.jsx)(f.Z,{className:D().RSPop1,children:(0,n.jsx)("span",{children:"B"})}),(0,n.jsx)(f.Z,{className:D().RSPop2,children:(0,n.jsx)(W.Z,{overlay:G,children:(0,n.jsxs)(a.Z,{style:{width:"100%"},children:["Band ",(0,n.jsx)(N.Z,{})]})})})]}),(0,n.jsxs)(M.Z,{children:[(0,n.jsx)(f.Z,{className:D().RSPop1,children:(0,n.jsx)("span",{children:"R"})}),(0,n.jsx)(f.Z,{className:D().RSPop2,children:(0,n.jsx)(W.Z,{overlay:G,children:(0,n.jsxs)(a.Z,{style:{width:"100%"},children:["Band ",(0,n.jsx)(N.Z,{})]})})}),(0,n.jsx)(f.Z,{className:D().RSPop1,children:(0,n.jsx)("span",{children:"G"})}),(0,n.jsx)(f.Z,{className:D().RSPop2,children:(0,n.jsx)(W.Z,{overlay:G,children:(0,n.jsxs)(a.Z,{style:{width:"100%"},children:["Band ",(0,n.jsx)(N.Z,{})]})})}),(0,n.jsx)(f.Z,{className:D().RSPop1,children:(0,n.jsx)("span",{children:"B"})}),(0,n.jsx)(f.Z,{className:D().RSPop2,children:(0,n.jsx)(W.Z,{overlay:G,children:(0,n.jsxs)(a.Z,{style:{width:"100%"},children:["Band ",(0,n.jsx)(N.Z,{})]})})})]}),(0,n.jsxs)(C.Z,{title:"Data source information",column:1,bordered:!0,children:[(0,n.jsx)(C.Z.Item,{label:"FileName",children:"A/XXX.tif B/XXX.tf"}),(0,n.jsx)(C.Z.Item,{label:"Row",children:"1234"}),(0,n.jsx)(C.Z.Item,{label:"Column",children:"897"}),(0,n.jsx)(C.Z.Item,{label:"Bands",children:"7 7"}),(0,n.jsx)(C.Z.Item,{label:"DataType",children:"UInt16"}),(0,n.jsx)(C.Z.Item,{label:"EPSG",children:"7030"}),(0,n.jsx)(C.Z.Item,{label:"Unit",children:"m"})]})]})},Q=Y,z=e(97927),U=e(37233),re=e(51327),se=e(11849);function Pe(P){var ce=(0,c.useState)(0),te=(0,x.Z)(ce,2),k=te[0],ee=te[1],ue=(0,c.useState)(!1),oe=(0,x.Z)(ue,2),ae=oe[0],H=oe[1],ve=(0,c.useState)(P.currentLabel),le=(0,x.Z)(ve,2),T=le[0],me=le[1];(0,c.useEffect)(function(){me(P.currentLabel)},[P.currentLabel]);var F=function(){var t,V=(t=P.leafletMapRef.current)===null||t===void 0?void 0:t.leafletElement.pm.globalDrawModeEnabled();console.log(V)},B=function(t){if(H(!0),T){var V,w;(V=P.leafletMapRef.current)===null||V===void 0||V.leafletElement.pm.enableDraw(t),(w=P.leafletMapRef.current)===null||w===void 0||w.leafletElement.pm.setPathOptions({color:T==null?void 0:T.color,fillColor:T==null?void 0:T.color,fillOpacity:.4})}else{var fe;(fe=P.leafletMapRef.current)===null||fe===void 0||fe.leafletElement.pm.disableDraw(t),H(!1)}},_=function(t){var V;(V=P.leafletMapRef.current)===null||V===void 0||V.leafletElement.pm.disableDraw(t),H(!1),F()},ne=function(){var t;return(t=P.leafletMapRef.current)===null||t===void 0?void 0:t.leafletElement.pm.Draw.getActiveShape()},je=function(){if(ne()=="Polygon"){var t;(t=P.leafletMapRef.current)===null||t===void 0||t.leafletElement.pm.Draw.Polygon._removeLastVertex(),F()}else F(),H(!1)},ge=function(){var t;(t=P.leafletMapRef.current)===null||t===void 0||t.leafletElement.pm.toggleGlobalDragMode(),F()},pe=function(){if(ne()=="Polygon"){var t;(t=P.leafletMapRef.current)===null||t===void 0||t.leafletElement.pm.Draw.Polygon._finishShape(),F(),H(!1)}else F(),H(!1)},_e=function(){var t;(t=P.leafletMapRef.current)===null||t===void 0||t.leafletElement.pm.enableGlobalRemovalMode(),F()},Se=function(){var t;(t=P.leafletMapRef.current)===null||t===void 0||t.leafletElement.pm.toggleGlobalEditMode(),F(),H(!1)},Me=function(){var t;console.log((t=P.leafletMapRef.current)===null||t===void 0?void 0:t.leafletElement.pm.getGeomanDrawLayers(!0)),H(!1)},xe=function(t){var V=t._uid,w=t.toGeoJSON();ee(k+1),w.properties={labelName:T==null?void 0:T.name,stroke:T==null?void 0:T.color,annotationId:k+1},console.log("Store Layer on DB. Id:"+V,w),console.log(JSON.stringify(w)),P.setAnnotations((0,se.Z)((0,se.Z)({},P.annotations),{},{features:P.annotations.features.concat(w)})),console.log((0,se.Z)((0,se.Z)({},P.annotations),{},{features:P.annotations.features.concat(w)}))};function Ze(L){L.layer.bindPopup("Label: "+L.layer._uid).openPopup(),H(!1),xe(L.layer)}var De=function(t){Le(t.layer)};function Le(L){var t=L._uid,V=L.toGeoJSON();console.log("Update Layer on DB. Id:"+t,V)}var ye=function(){var t;(t=P.leafletMapRef.current)===null||t===void 0||t.leafletElement.zoomIn(),F()},Be=function(){var t;(t=P.leafletMapRef.current)===null||t===void 0||t.leafletElement.zoomOut(),F()};return{polyVisable:ae,RSDraw:B,RSDrawDisable:_,removeLastVertex:je,moveShape:ge,finishShape:pe,removeShape:_e,editMode:Se,saveGeoJson:Me,storeOnDb:xe,onShapeCreate:Ze,onShapeEdit:De,toolZoomIn:ye,toolZoomOut:Be,currentShape:ne}}var de=e(27992),Ce=function(){var ce=(0,c.useState)(void 0),te=(0,x.Z)(ce,2),k=te[0],ee=te[1],ue=(0,c.useState)(),oe=(0,x.Z)(ue,2),ae=oe[0],H=oe[1],ve=(0,c.useState)({type:"FeatureCollection",features:[]}),le=(0,x.Z)(ve,2),T=le[0],me=le[1];console.log("rs is re-rendering! currentLabel: ".concat(JSON.stringify(ae)));var F=c.useRef(null),B=Pe({leafletMapRef:F,currentLabel:ae,setAnnotations:me,annotations:T});return(0,n.jsxs)(r.Z,{className:l().segment,children:[(0,n.jsxs)(A.Z,{children:[(0,n.jsx)(m.Z,{imgSrc:"./pics/buttons/intelligent_interaction.png",children:"Intelligent Interaction"}),(0,n.jsx)(u.Z,{placement:"rightTop",visible:B.polyVisable,content:(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(d.Z,{children:[(0,n.jsx)(a.Z,{type:"primary",onClick:function(){B.finishShape()},children:"Finish"}),(0,n.jsx)(a.Z,{type:"primary",onClick:function(){B.removeLastVertex()},children:"Remove Last Vertex"}),(0,n.jsx)(i.Z,{title:"Are you sure cancel this task?",okText:"Yes",cancelText:"No",children:(0,n.jsx)(a.Z,{type:"primary",onClick:function(){B.RSDrawDisable(B.currentShape())},children:"Cancel"})})]})}),trigger:k=="Polygon"?"hover":"click",children:(0,n.jsx)(m.Z,{active:k=="Polygon",imgSrc:"./pics/buttons/polygon.png",onClick:function(){ee("Polygon"),B.RSDraw("Polygon")},children:"Polygon"})}),(0,n.jsx)(m.Z,{onClick:function(){B.editMode()},imgSrc:"./pics/buttons/brush.png",children:"Edit"}),(0,n.jsxs)(u.Z,{placement:"rightTop",title:"title",content:"content",trigger:k=="rubber"?"hover":"click",children:[" ",(0,n.jsx)(m.Z,{imgSrc:"./pics/buttons/rubber.png",onClick:function(){B.removeShape()},children:"Rubber"})]}),(0,n.jsx)(m.Z,{onClick:function(){B.toolZoomIn()},imgSrc:"./pics/buttons/zoom_in.png",children:"Zoom in"}),(0,n.jsx)(m.Z,{onClick:function(){B.toolZoomOut()},imgSrc:"./pics/buttons/zoom_out.png",children:"Zoom out"}),(0,n.jsx)(m.Z,{onClick:function(){B.saveGeoJson()},imgSrc:"./pics/buttons/save.png",children:"Save"}),(0,n.jsx)(m.Z,{imgSrc:"./pics/buttons/move.png",onClick:function(){return B.moveShape()},children:"Move"}),(0,n.jsx)(m.Z,{imgSrc:"./pics/buttons/export.png",children:"Export"}),(0,n.jsx)(m.Z,{imgSrc:"./pics/buttons/data_division.png",children:"Divide Data"}),(0,n.jsx)(m.Z,{imgSrc:"./pics/buttons/prev.png",children:"Undo"}),(0,n.jsx)(m.Z,{imgSrc:"./pics/buttons/next.png",children:"Redo"}),(0,n.jsx)(m.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:"Clear Mark"})]}),(0,n.jsxs)("div",{className:l().mainStage,children:[(0,n.jsxs)("div",{className:l().draw,children:[(0,n.jsx)("div",{className:l().halfMap,children:(0,n.jsx)(U.Z,{leafletMapRef:F,onShapeCreate:B.onShapeCreate,onShapeEdit:B.onShapeEdit})}),(0,n.jsx)("div",{className:l().interval}),(0,n.jsx)("div",{className:l().halfMap,children:(0,n.jsx)(U.Z,{leafletMapRef:F,displayTools:!1,onShapeCreate:B.onShapeCreate,onShapeEdit:B.onShapeEdit})})]}),(0,n.jsx)("div",{className:l().pblock,children:(0,n.jsx)("div",{className:l().progress,children:(0,n.jsx)(h.Z,{percent:50,status:"active"})})})]}),(0,n.jsxs)(A.Z,{disLoc:"right",children:[(0,n.jsx)(de.Z,{imgSrc:"./pics/buttons/threshold.png",disLoc:"left",children:"Segment Threshold"}),(0,n.jsx)(de.Z,{imgSrc:"./pics/buttons/alpha.png",disLoc:"left",children:"Diaphaneity"}),(0,n.jsx)(de.Z,{imgSrc:"./pics/buttons/radius.png",disLoc:"left",children:"Visual Radius"}),(0,n.jsxs)(u.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Setting of boundary simplification",content:(0,n.jsx)(p.Z,{}),trigger:k=="boundry"?"click":"hover",children:[" ",(0,n.jsx)(m.Z,{imgSrc:"./pics/buttons/border_simplify.png",onClick:function(){ee("boundry")},children:"Boundary"})]}),(0,n.jsxs)(u.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Setting of remote sensing",content:(0,n.jsx)(Q,{}),trigger:k=="colorgun"?"click":"hover",children:[" ",(0,n.jsx)(m.Z,{imgSrc:"./pics/buttons/remote_sensing_setting.png",onClick:function(){ee("colorgun")},children:"Remote Sensing"})]}),(0,n.jsxs)(u.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Switch grids",content:(0,n.jsx)(z.Z,{}),trigger:k=="grid"?"click":"hover",children:[" ",(0,n.jsx)(m.Z,{imgSrc:"./pics/buttons/switch_grid.png",onClick:function(){ee("grid")},children:"Grids"})]})]}),(0,n.jsxs)("div",{className:l().rightSideBar,children:[(0,n.jsx)("div",{className:l().determinOutline,children:(0,n.jsx)(a.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",block:!0,children:"Determine Outline"})}),(0,n.jsx)(v.Z,{selectedLabel:ae,onLabelSelect:function(ne){H(ne),console.log(ne)},onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}}),(0,n.jsx)(re.Z,{annotations:T,onAnnotationSelect:function(){},onAnnotationAdd:function(){},onAnnotationModify:function(){},onAnnotationDelete:function(){}})]})]})},Ee=Ce}}]);
