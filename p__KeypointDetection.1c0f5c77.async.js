(self.webpackChunkpp_labeling_frontend=self.webpackChunkpp_labeling_frontend||[]).push([[267],{71212:function(h){h.exports={key:"key___HbxlB",mainStage:"mainStage___2kPY7",draw:"draw___1d3zf",pblock:"pblock___13HlD",progress:"progress___1iogf",rightSideBar:"rightSideBar___2SKvQ",finished:"finished___nNiaq"}},82881:function(h,E,s){"use strict";s.r(E);var tn=s(57663),j=s(71577),on=s(34669),Z=s(54458),d=s(2824),_=s(67294),B=s(71212),l=s.n(B),N=s(8088),a=s(61541),R=s(44434),K=s(5041),U=s(57436),W=s(14836),k=s(29919),J=s(13931),o=s(85893),H=function(){var w=(0,_.useState)(void 0),A=(0,d.Z)(w,2),M=A[0],F=A[1],z=(0,_.useState)({color:"",name:""}),O=(0,d.Z)(z,2),p=O[0],x=O[1],Q=(0,_.useState)(),D=(0,d.Z)(Q,2),g=D[0],f=D[1],Y=(0,_.useState)([]),L=(0,d.Z)(Y,2),r=L[0],P=L[1],G=(0,_.useState)(1),b=(0,d.Z)(G,2),m=b[0],v=b[1],C=function(n){n||v(1),n<.1||n>3?v(1):v(n)},c=function(n){f(n),n!=null&&n.label&&x(n.label)},S=function(n){P(n)};(0,_.useEffect)(function(){localStorage.removeItem("history")},[]);function I(e,n){var t=localStorage.getItem("history"),i=t?JSON.parse(t):{index:-1,items:[]};console.log("history before set: ");var nn=JSON.stringify(i);console.log(nn);var y={currentAnnotation:n,annotations:e};if(JSON.stringify(i.items[i.index])==JSON.stringify(y)){console.log("equal with latest, do not add to history");return}var T=i.items.splice(0,i.index==0?1:i.index+1);console.log("itemsToKeep: ".concat(JSON.stringify(T))),console.log("itemsToAdd: ".concat(JSON.stringify(y))),i.items=T.concat([y]),i.index++,localStorage.setItem("history",JSON.stringify(i)),console.log("history after set: "),console.log(JSON.stringify(i))}var V=function(){var n=localStorage.getItem("history");if(!n){console.log("no historyStr, skip.");return}var t=JSON.parse(n);if(!!t){if(t.index>=t.items.length-1){console.log("already latest, skip. history.index:".concat(t.index," history.items.length:").concat(t.items.length));return}t.index++,localStorage.setItem("history",JSON.stringify(t)),console.log("After forward. history:".concat(JSON.stringify(t)));var i=t.items[t.index];f(i.currentAnnotation),P(i.annotations)}},X=function(){var n=localStorage.getItem("history");if(!!n){var t=JSON.parse(n);if(!(!t||!t.index)&&!(t.index<=0)){t.index--,localStorage.setItem("history",JSON.stringify(t));var i=t.items[t.index];console.log("after backward: ".concat(JSON.stringify(t))),f(i.currentAnnotation),P(i.annotations)}}},$=function(n){for(var t=[],i=0;i<r.length;i++)r[i].annotationId==n.annotationId?t.push(n):t.push(r[i]);c(n),S(t),I(t,n)},q=(0,J.Z)({currentLabel:p,currentTool:M,annotations:r,currentAnnotation:g,onAnnotationAdd:function(n){var t=r.concat([n]);S(t),g||c(n),I(t,n)},onAnnotationModify:$}),u=q;return(0,o.jsxs)(N.Z,{className:l().key,children:[(0,o.jsxs)(R.Z,{children:[(0,o.jsx)(k.Z,{active:M=="polygon",onClick:function(){F("polygon"),c(void 0)},children:"Polygon"}),(0,o.jsx)(a.Z,{imgSrc:"./pics/buttons/zoom_in.png",onClick:function(){C(m+.1)},children:"Zoom in"}),(0,o.jsx)(a.Z,{imgSrc:"./pics/buttons/zoom_out.png",onClick:function(){C(m-.1)},children:"Zoom out"}),(0,o.jsx)(a.Z,{imgSrc:"./pics/buttons/save.png",children:"Save"}),(0,o.jsx)(a.Z,{imgSrc:"./pics/buttons/move.png",children:"Move"}),(0,o.jsx)(a.Z,{imgSrc:"./pics/buttons/export.png",children:"Export"}),(0,o.jsx)(a.Z,{imgSrc:"./pics/buttons/data_division.png",children:"Divide Data"}),(0,o.jsx)(a.Z,{imgSrc:"./pics/buttons/prev.png",onClick:function(){X()},children:"Undo"}),(0,o.jsx)(a.Z,{imgSrc:"./pics/buttons/next.png",onClick:function(){V()},children:"Redo"}),(0,o.jsx)(a.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:"Clear Mark"})]}),(0,o.jsxs)("div",{className:l().mainStage,children:[(0,o.jsx)("div",{className:l().draw,children:(0,o.jsx)(U.Z,{scale:m,annotations:r,onMouseDown:u.onMouseDown,onMouseMove:u.onMouseMove,onMouseUp:u.onMouseUp,createElementsFunc:u.createElementsFunc})}),(0,o.jsx)("div",{className:l().pblock,children:(0,o.jsx)("div",{className:l().progress,children:(0,o.jsx)(Z.Z,{percent:50,status:"active"})})})]}),(0,o.jsxs)("div",{className:l().rightSideBar,children:[(0,o.jsx)("div",{className:l().finished,children:(0,o.jsx)(j.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",block:!0,onClick:function(){c(void 0)},children:"Determine Outline"})}),(0,o.jsx)(K.Z,{selectedLabel:p,onLabelSelect:function(n){x(n),c(void 0)},onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}}),(0,o.jsx)(W.Z,{selectedAnnotation:g,annotations:r,onAnnotationSelect:function(n){n!=null&&n.delete||c(n)},onAnnotationAdd:function(){},onAnnotationModify:function(){},onAnnotationDelete:function(n){S(r.filter(function(t){return t.annotationId!=n.annotationId})),c(void 0)}})]})]})};E.default=H}}]);
