(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[672],{41435:function(d,L,e){"use strict";e.d(L,{Z:function(){return r}});var I=e(94663),m=e(80112);function g(c){return Function.toString.call(c).indexOf("[native code]")!==-1}var v=e(18597);function s(c,_,M){return(0,v.Z)()?s=Reflect.construct:s=function(C,S,n){var B=[null];B.push.apply(B,S);var o=Function.bind.apply(C,B),h=new o;return n&&(0,m.Z)(h,n.prototype),h},s.apply(null,arguments)}function r(c){var _=typeof Map=="function"?new Map:void 0;return r=function(E){if(E===null||!g(E))return E;if(typeof E!="function")throw new TypeError("Super expression must either be null or a function");if(typeof _!="undefined"){if(_.has(E))return _.get(E);_.set(E,C)}function C(){return s(E,arguments,(0,I.Z)(this).constructor)}return C.prototype=Object.create(E.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),(0,m.Z)(C,E)},r(c)}},52822:function(d){d.exports={roundBall:"roundBall___1pqu1",popover:"popover___1-PR6"}},5882:function(d){d.exports={listItem:"listItem___vtDXn",eye:"eye___AsLBS",roundBall:"roundBall___1J_R3",popover:"popover___1x-2R",delete:"delete___WHPf2",listItemActive:"listItemActive___3FRb7"}},56131:function(d){d.exports={labelList:"labelList___jvD05",listHeader:"listHeader___UM5UF",eye:"eye___II3Po",roundBall:"roundBall___j752J"}},78677:function(d){d.exports={container:"container___G0FNe"}},83930:function(d){d.exports={stage:"stage___3H5QL"}},80961:function(d){d.exports={leftToolbar:"leftToolbar___1xi4t",rightToolbar:"rightToolbar___3dNSB"}},82499:function(d){d.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1SHWL",toolBarButtonContainer:"toolBarButtonContainer___1jKUz",toolBarButton:"toolBarButton___3Ouq1",buttonText:"buttonText___10ls7",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AA28"}},73199:function(){},63097:function(d,L,e){"use strict";var I=e(20136),m=e(55241),g=e(2824),v=e(67294),s=e(52822),r=e.n(s),c=e(63144),_=e(85893),M=function(C){var S=(0,v.useState)(C.color||"#FFF"),n=(0,g.Z)(S,2),B=n[0],o=n[1];return(0,v.useEffect)(function(){o(C.color||"#FFF")},[C]),C.changeable?(0,_.jsx)(m.Z,{getPopupContainer:function(W){return W.parentElement||document.body},overlayClassName:r().popover,openClassName:r().popoverOpenClassName,placement:"bottom",content:(0,_.jsx)(c.xS,{disableAlpha:!0,color:B,onChange:function(W){o(W.hex)},onChangeComplete:C.onChange}),trigger:"click",children:(0,_.jsx)("div",{className:r().roundBall,style:{backgroundColor:B}})}):(0,_.jsx)("div",{className:r().roundBall,style:{backgroundColor:B}})};L.Z=M},5041:function(d,L,e){"use strict";e.d(L,{Z:function(){return x}});var I=e(54421),m=e(38272),g=e(57663),v=e(71577),s=e(2824),r=e(67294),c=e(56131),_=e.n(c),M=e(49111),E=e(19650),C=e(11849),S=e(5882),n=e.n(S),B=e(63097),o=e(85893),h=function(t){var l=(0,C.Z)({},t.label),b=(0,r.useState)(l.invisible),D=(0,s.Z)(b,2),i=D[0],f=D[1],H=(0,r.useState)(0),F=(0,s.Z)(H,2),Z=F[0],j=F[1],y=t.hideEye?" ":(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("a",{className:n().eye,style:{backgroundImage:i?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(R){R.stopPropagation(),f(!i),t.onLabelModify(l)}})," "]}),$=t.hideColorPicker?(0,o.jsx)(o.Fragment,{}):(0,o.jsx)(B.Z,{color:l.color,changeable:!0,onChange:function(R){l.color=R.hex,t.onLabelModify(l)}}),P=(0,o.jsxs)(m.ZP.Item,{className:"".concat(n().listItem," ").concat(t.active?n().listItemActive:""),unselectable:"on",onClick:function(){t.onClick(l)},children:[(0,o.jsxs)(E.Z,{align:"center",size:5,children:[y,l.name,$]}),(0,o.jsx)("a",{className:n().delete,onClick:function(R){R.stopPropagation();var V=new Date().getTime();V-Z<300||(j(V),t.onLabelDelete(l))}})]});return P},W=h,T=e(71194),a=e(50146),J=e(47673),G=e(24044),Y=e(9715),A=e(93766),u=e(48971),U=["#FF0000","#008000","#0000FF","#FFFF00","#FFA500","#00FFFF","#8B00FF","#FFC0CB","#7CFC00","#007FFF","#800080","#36BF36","#DAA520","#800000","#008B8B","#B22222","#E6D933","#000080","#FF00FF","#FFFF99","#87CEEB","#5C50E6","#CD5C5C","#20B2AA","#E680FF","#4D1F00","#006374","#B399FF","#8B4513","#BA55D3","#C0C0C0","#808080","#000000"],K=function(t){var l,b,D=(0,u.YB)().formatMessage({id:"component.PPAddLabelModal.selectColor"}),i=(0,u.YB)().formatMessage({id:"component.PPAddLabelModal.addLabel"}),f=(0,u.YB)().formatMessage({id:"component.PPAddLabelModal.labelName"}),H=(0,u.YB)().formatMessage({id:"component.PPCreater.cancel"}),F=(0,u.YB)().formatMessage({id:"component.PPSegMode.ok"}),Z=(0,r.useState)(((l=t.defaultLabel)===null||l===void 0?void 0:l.color)||U[t.order||0]),j=(0,s.Z)(Z,2),y=j[0],$=j[1];(0,r.useEffect)(function(){var X;$(((X=t.defaultLabel)===null||X===void 0?void 0:X.color)||U[t.order||0])},[t]);var P=t.hideColorPicker?(0,o.jsx)(o.Fragment,{}):(0,o.jsx)(A.Z.Item,{label:D,name:"color",children:(0,o.jsx)(B.Z,{color:y,onChange:function(k){$(k.hex)}})}),O=A.Z.useForm(),R=(0,s.Z)(O,1),V=R[0];return(0,o.jsx)(a.Z,{title:i,visible:t.visible,onCancel:t.onCancel,footer:null,children:(0,o.jsxs)(A.Z,{form:V,name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!1,labelname:(b=t.defaultLabel)===null||b===void 0?void 0:b.name},onFinish:function(k){var Q={name:k.labelname,color:y};t.onLabelAdd(Q),V.resetFields()},autoComplete:"off",children:[(0,o.jsx)(A.Z.Item,{label:f,name:"labelname",rules:[{required:!0,message:"Please input label name!"}],children:(0,o.jsx)(G.Z,{})}),P,(0,o.jsx)(A.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,o.jsxs)(E.Z,{children:[(0,o.jsx)(v.Z,{onClick:function(){var k;(k=t.onCancel)===null||k===void 0||k.call(0),V.resetFields()},children:H}),(0,o.jsx)(v.Z,{type:"primary",htmlType:"submit",children:F})]})})]})})},p=K,z=function(t){var l,b=(0,u.YB)().formatMessage({id:"component.PPLabelList.addLabel"}),D=(0,u.YB)().formatMessage({id:"component.PPLabelList.labelList"}),i=(0,r.useState)(!1),f=(0,s.Z)(i,2),H=f[0],F=f[1];return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(m.ZP,{className:_().labelList,size:"large",header:(0,o.jsx)("div",{className:_().listHeader,children:D}),footer:(0,o.jsx)("div",{children:(0,o.jsx)(v.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){F(!0)},block:!0,children:b})}),bordered:!0,dataSource:t.labels,renderItem:function(j){var y;return(0,o.jsx)(W,{hideColorPicker:t.hideColorPicker,hideEye:t.hideEye,onClick:t.onLabelSelect,label:j,active:(y=t.activeIds)===null||y===void 0?void 0:y.has(j.labelId),onLabelDelete:t.onLabelDelete,onLabelModify:t.onLabelModify})}}),(0,o.jsx)(p,{hideColorPicker:t.hideColorPicker,order:(l=t.labels)===null||l===void 0?void 0:l.length,visible:H,onLabelAdd:function(j){t.onLabelAdd(j),F(!1)},onCancel:function(){F(!1)}})]})},x=z},8088:function(d,L,e){"use strict";var I=e(67294),m=e(78677),g=e.n(m),v=e(85893),s=function(c){return(0,v.jsx)("div",{className:"".concat(g().container," ").concat(c.className),children:c.children})};L.Z=s},57436:function(d,L,e){"use strict";var I=e(91220),m=e(2824),g=e(67294),v=e(65031),s=e(84420),r=e.n(s),c=e(83930),_=e.n(c),M=e(85893),E="./pics/basketball.jpg",C=function(n){var B=r()(n.imgSrc||""),o=(0,m.Z)(B,1),h=o[0],W=(0,g.useState)(0),T=(0,m.Z)(W,2),a=T[0],J=T[1],G=(0,g.useState)(0),Y=(0,m.Z)(G,2),A=Y[0],u=Y[1],U=(0,g.useState)({x:0,y:0}),K=(0,m.Z)(U,2),p=K[0],z=K[1];function x(){var i=document.getElementById("dr");i&&(J(i.clientWidth),u(i.clientHeight))}(0,g.useEffect)(function(){window.removeEventListener("resize",x),window.addEventListener("resize",x);var i=document.getElementById("dr");i&&(J(i.clientWidth),u(i.clientHeight))},[]);var N=[];if(n.annotations){var t=(0,I.Z)(n.annotations),l;try{for(t.s();!(l=t.n()).done;){var b=l.value;if(!!b){console.log("PPStage rendering annotation:",b,"annotation.tool:",b.tool);var D=void 0;switch(b.type){case"polygon":D=n.createPolygonFunc;break;case"brush":D=n.createBrushFunc;break;case"rubber":D=n.createBrushFunc;break;case"rectangle":D=n.createRectangleFunc;break;default:D=null}D&&N.push(D(b,n.onAnnotationModify,n.onAnnotationModifyComplete,n.scale,n.currentTool,n.setCurrentAnnotation,n.currentAnnotation))}}}catch(i){t.e(i)}finally{t.f()}}return(0,M.jsx)(v.Hf,{width:a,height:A,offsetX:-a/2,offsetY:-A/2,className:_().stage,children:(0,M.jsx)(v.mh,{onMouseDown:function(f){n.onMouseDown&&n.onMouseDown(f,-a/2-p.x,-A/2-p.y,n.scale)},onMouseMove:function(f){n.onMouseMove&&n.onMouseMove(f,n.scale)},onMouseUp:function(f){n.onMouseUp&&n.onMouseUp(f,n.scale)},onContextMenu:function(f){f.evt.preventDefault()},draggable:!1,children:(0,M.jsxs)(v.ZA,{draggable:n.currentTool=="mover",scaleX:n.scale,scaleY:n.scale,onDragEnd:function(f){n.currentTool=="mover"&&z({x:f.target.x(),y:f.target.y()})},children:[(0,M.jsx)(v.Ee,{draggable:!1,image:h,x:-((h==null?void 0:h.width)||0)/2,y:-((h==null?void 0:h.height)||0)/2}),N]})})})};L.Z=C},44434:function(d,L,e){"use strict";var I=e(67294),m=e(80961),g=e.n(m),v=e(85893),s=function(c){var _=g().leftToolbar;return c.disLoc=="right"&&(_=g().rightToolbar),(0,v.jsx)("div",{className:_,children:c.children})};L.Z=s},61541:function(d,L,e){"use strict";var I=e(49111),m=e(19650),g=e(67294),v=e(82499),s=e.n(v),r=e(85893),c=function(M){return(0,r.jsx)("div",{unselectable:"on",className:"".concat(s().toolBarButtonContainerWrapper," ").concat(M.active&&s().toolBarButtonContainerWrapperActive),onClick:M.onClick,children:(0,r.jsx)(m.Z,{align:"center",className:s().toolBarButtonContainer,size:0,children:(0,r.jsxs)(m.Z,{align:"center",direction:"vertical",className:s().toolBarButton,size:0,children:[(0,r.jsx)("img",{src:M.imgSrc}),(0,r.jsx)("div",{className:s().buttonText,children:M.children})]})})})};L.Z=c},29214:function(d,L,e){"use strict";e.r(L);var I=e(11849),m=e(20228),g=e(11382),v=e(34669),s=e(54458),r=e(34792),c=e(48086),_=e(2824),M=e(67294),E=e(73199),C=e.n(E),S=e(8088),n=e(61541),B=e(44434),o=e(5041),h=e(57436),W=e(64322),T=e(48971),a=e(85893),J=function(){var Y,A=(0,W.$L)(M.useState,M.useEffect,{label:{oneHot:!1,postSetCurr:y},tool:{defaultTool:"mover"},effectTrigger:{postTaskChange:$}}),u=(0,_.Z)(A,10),U=u[0],K=u[1],p=u[2],z=u[3],x=u[4],N=u[5],t=u[6],l=u[7],b=u[8],D=u[9],i=(0,T.YB)().formatMessage({id:"pages.toolBar.zoomIn"}),f=(0,T.YB)().formatMessage({id:"pages.toolBar.zoomOut"}),H=(0,T.YB)().formatMessage({id:"pages.toolBar.move"}),F=(0,T.YB)().formatMessage({id:"pages.toolBar.save"}),Z=(0,T.YB)().formatMessage({id:"pages.toolBar.divideData"}),j=(0,T.YB)().formatMessage({id:"pages.toolBar.export"});function y(P){if(l.isActive(P))z.create({taskId:x.curr.taskId,labelId:P.labelId,dataId:N.curr.dataId});else{var O=z.all.filter(function(R){return R.labelId==P.labelId})[0];z.remove(O.annotationId)}}function $(P,O){K.setCurr(!0),!(!P||!O)&&(l.initActive(O),K.setCurr(!1))}return(0,a.jsxs)(S.Z,{className:C().classes,children:[(0,a.jsxs)(B.Z,{children:[(0,a.jsx)(n.Z,{imgSrc:"./pics/buttons/zoom_in.png",onClick:function(){p.change(.1)},children:i}),(0,a.jsx)(n.Z,{imgSrc:"./pics/buttons/zoom_out.png",onClick:function(){p.change(-.1)},children:f}),(0,a.jsx)(n.Z,{imgSrc:"./pics/buttons/save.png",onClick:function(){c.default.info("Annotations are saved automatically. You don't need to click save.")},children:F}),(0,a.jsx)(n.Z,{imgSrc:"./pics/buttons/move.png",active:U.curr=="mover",onClick:function(){U.setCurr("mover"),c.default.info("You can move the image now.")},children:H})]}),(0,a.jsx)("div",{id:"dr",className:"mainStage",children:(0,a.jsxs)(g.Z,{tip:"loading",spinning:K.curr,children:[(0,a.jsx)("div",{className:"draw",children:(0,a.jsx)(h.Z,{scale:p.curr,currentTool:U.curr,setCurrentAnnotation:function(){},onAnnotationModify:function(){},onAnnotationModifyComplete:function(){},imgSrc:N.imgSrc})}),(0,a.jsx)("div",{className:"pblock",children:(0,a.jsxs)("div",{className:"progress",children:[(0,a.jsx)(s.Z,{className:"progressBar",percent:t.progress,status:"active",showInfo:!1})," ",(0,a.jsxs)("span",{className:"progressDesc",children:["Current labeling ",x.currIdx==null?1:x.currIdx+1," of"," ",(Y=x.all)===null||Y===void 0?void 0:Y.length,". Already labeled ",x.finished(t.progress)||0,"."]})]})}),(0,a.jsx)("div",{className:"prevTask",onClick:x.prevTask}),(0,a.jsx)("div",{className:"nextTask",onClick:x.nextTask})]})}),(0,a.jsxs)(B.Z,{disLoc:"right",children:[(0,a.jsx)(n.Z,{imgSrc:"./pics/buttons/data_division.png",onClick:function(){return b(t.curr.projectId,{train:.5,validation:.3,test:.2})},children:Z}),(0,a.jsx)(n.Z,{imgSrc:"./pics/buttons/export.png",onClick:function(){D(t.curr.projectId,"/home/lin/Desktop/data/pplabel/export/")},children:j})]}),(0,a.jsx)("div",{className:"rightSideBar",children:(0,a.jsx)(o.Z,{labels:l.all,activeIds:l.activeIds,onLabelSelect:l.onSelect,onLabelAdd:function(O){return l.create((0,I.Z)((0,I.Z)({},O),{},{projectId:t.curr.projectId}))},onLabelDelete:l.remove,onLabelModify:function(){},hideColorPicker:!0,hideEye:!0})})]})};L.default=J}}]);
