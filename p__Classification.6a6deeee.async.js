(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[672],{41435:function(u,h,e){"use strict";e.d(h,{Z:function(){return i}});var j=e(94663),v=e(80112);function E(m){return Function.toString.call(m).indexOf("[native code]")!==-1}var P=e(18597);function a(m,c,C){return(0,P.Z)()?a=Reflect.construct:a=function(g,Z,n){var b=[null];b.push.apply(b,Z);var o=Function.bind.apply(g,b),D=new o;return n&&(0,v.Z)(D,n.prototype),D},a.apply(null,arguments)}function i(m){var c=typeof Map=="function"?new Map:void 0;return i=function(M){if(M===null||!E(M))return M;if(typeof M!="function")throw new TypeError("Super expression must either be null or a function");if(typeof c!="undefined"){if(c.has(M))return c.get(M);c.set(M,g)}function g(){return a(M,arguments,(0,j.Z)(this).constructor)}return g.prototype=Object.create(M.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),(0,v.Z)(g,M)},i(m)}},52822:function(u){u.exports={roundBall:"roundBall___1pqu1",popover:"popover___1-PR6"}},5882:function(u){u.exports={listItem:"listItem___vtDXn",eye:"eye___AsLBS",roundBall:"roundBall___1J_R3",popover:"popover___1x-2R",delete:"delete___WHPf2",listItemActive:"listItemActive___3FRb7"}},56131:function(u){u.exports={labelList:"labelList___jvD05",listHeader:"listHeader___UM5UF",eye:"eye___II3Po",roundBall:"roundBall___j752J"}},78677:function(u){u.exports={container:"container___G0FNe"}},83930:function(u){u.exports={stage:"stage___3H5QL"}},80961:function(u){u.exports={leftToolbar:"leftToolbar___1xi4t",rightToolbar:"rightToolbar___3dNSB"}},82499:function(u){u.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1SHWL",toolBarButtonContainer:"toolBarButtonContainer___1jKUz",toolBarButton:"toolBarButton___3Ouq1",buttonText:"buttonText___10ls7",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AA28"}},73199:function(){},63097:function(u,h,e){"use strict";var j=e(20136),v=e(55241),E=e(2824),P=e(67294),a=e(52822),i=e.n(a),m=e(63144),c=e(85893),C=function(g){var Z=(0,P.useState)(g.color||"#FFF"),n=(0,E.Z)(Z,2),b=n[0],o=n[1];return(0,P.useEffect)(function(){o(g.color||"#FFF")},[g]),g.changeable?(0,c.jsx)(v.Z,{getPopupContainer:function(S){return S.parentElement||document.body},overlayClassName:i().popover,openClassName:i().popoverOpenClassName,placement:"bottom",content:(0,c.jsx)(m.xS,{disableAlpha:!0,color:b,onChange:function(S){o(S.hex)},onChangeComplete:g.onChange}),trigger:"click",children:(0,c.jsx)("div",{className:i().roundBall,style:{backgroundColor:b}})}):(0,c.jsx)("div",{className:i().roundBall,style:{backgroundColor:b}})};h.Z=C},5041:function(u,h,e){"use strict";e.d(h,{Z:function(){return K}});var j=e(54421),v=e(38272),E=e(57663),P=e(71577),a=e(2824),i=e(67294),m=e(56131),c=e.n(m),C=e(49111),M=e(19650),g=e(11849),Z=e(5882),n=e.n(Z),b=e(63097),o=e(85893),D=function(t){var f=(0,g.Z)({},t.label),B=(0,i.useState)(f.invisible),L=(0,a.Z)(B,2),O=L[0],T=L[1],d=t.hideEye?" ":(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("a",{className:n().eye,style:{backgroundImage:O?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(){T(!O),t.onLabelModify(f)}})," "]}),_=t.hideColorPicker?(0,o.jsx)(o.Fragment,{}):(0,o.jsx)(b.Z,{color:f.color,changeable:!0,onChange:function(F){f.color=F.hex,t.onLabelModify(f)}}),s=(0,o.jsxs)(v.ZP.Item,{className:"".concat(n().listItem," ").concat(t.active?n().listItemActive:""),unselectable:"on",onClick:function(){t.onClick(f)},children:[(0,o.jsxs)(M.Z,{align:"center",size:5,children:[d,f.name,_]}),(0,o.jsx)("a",{className:n().delete,style:{backgroundImage:"url(./pics/delete.png)"},onClick:function(F){F.stopPropagation(),t.onLabelDelete(f)}})]});return s},S=D,l=e(71194),y=e(50146),$=e(47673),R=e(24044),z=e(9715),x=e(93766),A=e(48971),p=["#FF0000","#008000","#0000FF","#FFFF00","#FFA500","#00FFFF","#8B00FF","#FFC0CB","#7CFC00","#007FFF","#800080","#36BF36","#DAA520","#800000","#008B8B","#B22222","#E6D933","#000080","#FF00FF","#FFFF99","#87CEEB","#5C50E6","#CD5C5C","#20B2AA","#E680FF","#4D1F00","#006374","#B399FF","#8B4513","#BA55D3","#C0C0C0","#808080","#000000"],H=function(t){var f,B,L=(0,A.YB)().formatMessage({id:"component.PPAddLabelModal.selectColor"}),O=(0,A.YB)().formatMessage({id:"component.PPAddLabelModal.addLabel"}),T=(0,A.YB)().formatMessage({id:"component.PPAddLabelModal.labelName"}),d=(0,A.YB)().formatMessage({id:"component.PPCreater.cancel"}),_=(0,A.YB)().formatMessage({id:"component.PPSegMode.ok"}),s=(0,i.useState)(((f=t.defaultLabel)===null||f===void 0?void 0:f.color)||p[t.order||0]),r=(0,a.Z)(s,2),F=r[0],X=r[1];(0,i.useEffect)(function(){var Y;X(((Y=t.defaultLabel)===null||Y===void 0?void 0:Y.color)||p[t.order||0])},[t]);var V=t.hideColorPicker?(0,o.jsx)(o.Fragment,{}):(0,o.jsx)(x.Z.Item,{label:L,name:"color",children:(0,o.jsx)(b.Z,{color:F,onChange:function(N){X(N.hex)}})}),J=x.Z.useForm(),G=(0,a.Z)(J,1),k=G[0];return(0,o.jsx)(y.Z,{title:O,visible:t.visible,onCancel:t.onCancel,footer:null,children:(0,o.jsxs)(x.Z,{form:k,name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!1,labelname:(B=t.defaultLabel)===null||B===void 0?void 0:B.name},onFinish:function(N){var Q={name:N.labelname,color:F};t.onLabelAdd(Q),k.resetFields()},autoComplete:"off",children:[(0,o.jsx)(x.Z.Item,{label:T,name:"labelname",rules:[{required:!0,message:"Please input label name!"}],children:(0,o.jsx)(R.Z,{})}),V,(0,o.jsx)(x.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,o.jsxs)(M.Z,{children:[(0,o.jsx)(P.Z,{onClick:function(){var N;(N=t.onCancel)===null||N===void 0||N.call(0),k.resetFields()},children:d}),(0,o.jsx)(P.Z,{type:"primary",htmlType:"submit",children:_})]})})]})})},I=H,U=function(t){var f;console.log("render labellist",t.activeIds);var B=(0,A.YB)().formatMessage({id:"component.PPLabelList.addLabel"}),L=(0,A.YB)().formatMessage({id:"component.PPLabelList.labelList"}),O=(0,i.useState)(!1),T=(0,a.Z)(O,2),d=T[0],_=T[1];return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(v.ZP,{className:c().labelList,size:"large",header:(0,o.jsx)("div",{className:c().listHeader,children:L}),footer:(0,o.jsx)("div",{children:(0,o.jsx)(P.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){_(!0)},block:!0,children:B})}),bordered:!0,dataSource:t.labels,renderItem:function(r){var F;return(0,o.jsx)(S,{hideColorPicker:t.hideColorPicker,hideEye:t.hideEye,onClick:t.onLabelSelect,label:r,active:(F=t.activeIds)===null||F===void 0?void 0:F.has(r.labelId),onLabelDelete:t.onLabelDelete,onLabelModify:t.onLabelModify})}}),(0,o.jsx)(I,{hideColorPicker:t.hideColorPicker,order:(f=t.labels)===null||f===void 0?void 0:f.length,visible:d,onLabelAdd:function(r){t.onLabelAdd(r),_(!1)},onCancel:function(){_(!1)}})]})},K=U},8088:function(u,h,e){"use strict";var j=e(67294),v=e(78677),E=e.n(v),P=e(85893),a=function(m){return(0,P.jsx)("div",{className:"".concat(E().container," ").concat(m.className),children:m.children})};h.Z=a},57436:function(u,h,e){"use strict";var j=e(91220),v=e(2824),E=e(67294),P=e(65031),a=e(84420),i=e.n(a),m=e(83930),c=e.n(m),C=e(85893),M="./pics/basketball.jpg",g=function(n){var b=i()(n.imgSrc||""),o=(0,v.Z)(b,1),D=o[0],S=(0,E.useState)(0),l=(0,v.Z)(S,2),y=l[0],$=l[1],R=(0,E.useState)(0),z=(0,v.Z)(R,2),x=z[0],A=z[1],p=(0,E.useState)({x:0,y:0}),H=(0,v.Z)(p,2),I=H[0],U=H[1],K=(0,E.useState)({x:0,y:0}),W=(0,v.Z)(K,2),t=W[0],f=W[1];function B(){var s=document.getElementById("dr");s&&($(s.clientWidth),A(s.clientHeight))}(0,E.useEffect)(function(){window.removeEventListener("resize",B),window.addEventListener("resize",B);var s=document.getElementById("dr");s&&($(s.clientWidth),A(s.clientHeight))},[]);var L=[];if(n.annotations){var O=(0,j.Z)(n.annotations),T;try{for(O.s();!(T=O.n()).done;){var d=T.value;if(!!d){var _=void 0;switch(d.tool){case"polygon":_=n.createPolygonFunc;break;case"brush":_=n.createBrushFunc;break;case"rubber":_=n.createBrushFunc;break;case"rectangle":_=n.createRectangleFunc;break;default:_=null}_&&L.push(_(d,n.onAnnotationModify,n.onAnnotationModifyComplete,n.scale,n.currentTool,n.setCurrentAnnotation,n.currentAnnotation,{x:-y/2-t.x,y:-x/2-t.y}))}}}catch(s){O.e(s)}finally{O.f()}}return console.log("canvas: (".concat(y,", ").concat(x,"), offset: (").concat(-y/2,", ").concat(-x/2,")")),(0,C.jsx)(P.Hf,{width:y,height:x,offsetX:-y/2,offsetY:-x/2,className:c().stage,children:(0,C.jsx)(P.mh,{onMouseDown:function(r){n.onMouseDown&&n.onMouseDown(r,-y/2-t.x,-x/2-t.y,n.scale)},onMouseMove:function(r){n.onMouseMove&&n.onMouseMove(r,n.scale)},onMouseUp:function(r){n.onMouseUp&&n.onMouseUp(r,n.scale)},onContextMenu:function(r){r.evt.preventDefault()},draggable:!1,children:(0,C.jsxs)(P.ZA,{draggable:n.currentTool=="mover",scaleX:n.scale,scaleY:n.scale,onDragEnd:function(r){n.currentTool=="mover"&&f({x:r.evt.offsetX-I.x,y:r.evt.offsetY-I.y})},onDragStart:function(r){n.currentTool=="mover"&&U({x:r.evt.offsetX,y:r.evt.offsetY})},children:[(0,C.jsx)(P.Ee,{draggable:!1,image:D,x:-((D==null?void 0:D.width)||0)/2,y:-((D==null?void 0:D.height)||0)/2}),L]})})})};h.Z=g},44434:function(u,h,e){"use strict";var j=e(67294),v=e(80961),E=e.n(v),P=e(85893),a=function(m){var c=E().leftToolbar;return m.disLoc=="right"&&(c=E().rightToolbar),(0,P.jsx)("div",{className:c,children:m.children})};h.Z=a},61541:function(u,h,e){"use strict";var j=e(49111),v=e(19650),E=e(67294),P=e(82499),a=e.n(P),i=e(85893),m=function(C){return(0,i.jsx)("div",{unselectable:"on",className:"".concat(a().toolBarButtonContainerWrapper," ").concat(C.active&&a().toolBarButtonContainerWrapperActive),onClick:C.onClick,children:(0,i.jsx)(v.Z,{align:"center",className:a().toolBarButtonContainer,size:0,children:(0,i.jsxs)(v.Z,{align:"center",direction:"vertical",className:a().toolBarButton,size:0,children:[(0,i.jsx)("img",{src:C.imgSrc}),(0,i.jsx)("div",{className:a().buttonText,children:C.children})]})})})};h.Z=m},29214:function(u,h,e){"use strict";e.r(h);var j=e(11849),v=e(20228),E=e(11382),P=e(34669),a=e(54458),i=e(34792),m=e(48086),c=e(2824),C=e(67294),M=e(73199),g=e.n(M),Z=e(8088),n=e(61541),b=e(44434),o=e(5041),D=e(57436),S=e(64322),l=e(85893),y=function(){var R,z=(0,C.useState)("mover"),x=(0,c.Z)(z,2),A=x[0],p=x[1],H=(0,S.$L)(C.useState,C.useEffect,{label:{oneHot:!1,postSetCurr:O},effectTrigger:{postTaskChange:T}}),I=(0,c.Z)(H,7),U=I[0],K=I[1],W=I[2],t=I[3],f=I[4],B=I[5],L=I[6];function O(d){if(L.isActive(d))W.create({taskId:t.curr.taskId,labelId:d.labelId,dataId:f.curr.dataId});else{var _=W.all.filter(function(s){return s.labelId==d.labelId})[0];W.remove(_.annotationId)}}function T(d,_){U.setCurr(!0),!(!d||!_)&&(L.initActive(_),U.setCurr(!1))}return(0,l.jsxs)(Z.Z,{className:g().classes,children:[(0,l.jsxs)(b.Z,{children:[(0,l.jsx)(n.Z,{imgSrc:"./pics/buttons/zoom_in.png",onClick:function(){K.change(.1)},children:"Zoom in"}),(0,l.jsx)(n.Z,{imgSrc:"./pics/buttons/zoom_out.png",onClick:function(){K.change(-.1)},children:"Zoom out"}),(0,l.jsx)(n.Z,{imgSrc:"./pics/buttons/save.png",onClick:function(){m.default.info("Annotations are saved automatically. You don't need to click save.")},children:"Save"}),(0,l.jsx)(n.Z,{imgSrc:"./pics/buttons/move.png",onClick:function(){p("mover"),m.default.info("You can move the image now.")},children:"Move"})]}),(0,l.jsx)("div",{id:"dr",className:"mainStage",children:(0,l.jsxs)(E.Z,{tip:"loading",spinning:U.curr,children:[(0,l.jsx)("div",{className:"draw",children:(0,l.jsx)(D.Z,{scale:K.curr,currentTool:A,setCurrentAnnotation:function(){},onAnnotationModify:function(){},onAnnotationModifyComplete:function(){},imgSrc:f.imgSrc})}),(0,l.jsx)("div",{className:"pblock",children:(0,l.jsxs)("div",{className:"progress",children:[(0,l.jsx)(a.Z,{className:"progressBar",percent:B.progress,status:"active",showInfo:!1})," ",(0,l.jsxs)("span",{className:"progressDesc",children:["Current labeling ",t.currIdx==null?1:t.currIdx+1," of"," ",(R=t.all)===null||R===void 0?void 0:R.length,". Already labeled ",t.finished(B.progress)||0,"."]})]})}),(0,l.jsx)("div",{className:"prevTask",onClick:t.prevTask}),(0,l.jsx)("div",{className:"nextTask",onClick:t.nextTask})]})}),(0,l.jsxs)(b.Z,{disLoc:"right",children:[(0,l.jsx)(n.Z,{imgSrc:"./pics/buttons/export.png",children:"Export"}),(0,l.jsx)(n.Z,{imgSrc:"./pics/buttons/data_division.png",children:"Split Dataset"})]}),(0,l.jsx)("div",{className:"rightSideBar",children:(0,l.jsx)(o.Z,{labels:L.all,activeIds:L.activeIds,onLabelSelect:L.onSelect,onLabelAdd:function(_){return L.create((0,j.Z)((0,j.Z)({},_),{},{projectId:B.curr.projectId}))},onLabelDelete:L.remove,onLabelModify:function(){},hideColorPicker:!0,hideEye:!0})})]})};h.default=y}}]);
