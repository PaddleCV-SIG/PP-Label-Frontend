(self.webpackChunkpp_labeling_frontend=self.webpackChunkpp_labeling_frontend||[]).push([[333],{57560:function(o){o.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___147XP",toolBarButtonContainer:"toolBarButtonContainer___ZEvhK",toolBarButton:"toolBarButton___1s2Rh",buttonText:"buttonText___3NTCv",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___2Utx8",popover:"popover___3PRoi"}},52822:function(o){o.exports={roundBall:"roundBall___1pqu1",popover:"popover___1-PR6"}},56131:function(o){o.exports={labelList:"labelList___jvD05",listHeader:"listHeader___UM5UF",eye:"eye___II3Po",roundBall:"roundBall___j752J"}},56623:function(o){o.exports={listItem:"listItem___3P4zY",eye:"eye___13vRl",roundBall:"roundBall___3rXBh",popover:"popover___2bsOT"}},78677:function(o){o.exports={container:"container___G0FNe"}},80961:function(o){o.exports={toolbar:"toolbar___3vxli"}},82499:function(o){o.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1SHWL",toolBarButtonContainer:"toolBarButtonContainer___1jKUz",toolBarButton:"toolBarButton___3Ouq1",buttonText:"buttonText___10ls7",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AA28"}},72869:function(o){o.exports={map:"map___92VPN"}},20474:function(o){o.exports={RSPop1:"RSPop1___vz5Me",RSPop2:"RSPop2___34pQA"}},2661:function(o){o.exports={toolbar:"toolbar___1o3he"}},93889:function(o){o.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___UtH8a",toolBarButtonContainer:"toolBarButtonContainer___1gFsH",toolBarButton:"toolBarButton___1Wqc1",buttonText:"buttonText___2zcKO",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AXHi"}},75513:function(o){o.exports={segment:"segment___3WmPw",mainStage:"mainStage___2kT1s",rightSideBar:"rightSideBar___11FX3"}},58967:function(o,g,e){"use strict";var $=e(20136),d=e(19181),O=e(77883),v=e(70507),r=e(57663),l=e(71577),P=e(2824),s=e(67294),b=e(61541),F=e(57560),Q=e.n(F),S=e(85893),W=1,n=20,k=10;function N(y){return y?y<=W?W:y>=n?n:y:k}var H=function(t){var E=(0,s.useState)(N(t.size)),U=(0,P.Z)(E,2),D=U[0],w=U[1];return(0,S.jsxs)(d.Z,{overlayClassName:Q().popover,placement:"right",content:(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(l.Z,{type:"text",onClick:function(){var Z,B=N(D-1);w(B),(Z=t.onChange)===null||Z===void 0||Z.call(0,B)},children:"-"}),(0,S.jsx)(v.Z,{min:1,max:20,value:D,onChange:t.onChange,controls:!1,style:{textAlign:"center"}}),(0,S.jsx)(l.Z,{type:"text",onClick:function(){var Z,B=N(D+1);w(B),(Z=t.onChange)===null||Z===void 0||Z.call(0,B)},children:"+"})]}),trigger:t.active?"hover":"click",children:[" ",(0,S.jsx)(b.Z,{active:t.active,imgSrc:"./pics/buttons/brush.png",onClick:t.onClick,children:"Brush"})]})};g.Z=H},35475:function(o,g,e){"use strict";e.d(g,{Z:function(){return V}});var $=e(54421),d=e(38272),O=e(57663),v=e(71577),r=e(2824),l=e(67294),P=e(56131),s=e.n(P),b=e(49111),F=e(19650),Q=e(11849),S=e(56623),W=e.n(S),n=e(20136),k=e(19181),N=e(52822),H=e.n(N),y=e(63144),t=e(85893),E=function(c){var a=(0,l.useState)(c.color||"#FFF"),j=(0,r.Z)(a,2),C=j[0],u=j[1];return(0,t.jsx)(k.Z,{getPopupContainer:function(p){return p.parentElement||document.body},overlayClassName:H().popover,openClassName:H().popoverOpenClassName,placement:"bottom",content:(0,t.jsx)(y.xS,{disableAlpha:!0,color:C,onChange:function(p){u(p.hex)},onChangeComplete:c.onChange}),trigger:"click",children:(0,t.jsx)("div",{className:H().roundBall,style:{backgroundColor:C}})})},U=E,D=function(c){var a=(0,Q.Z)({},c.label),j=(0,l.useState)(a.invisible),C=(0,r.Z)(j,2),u=C[0],M=C[1],p=(0,t.jsx)(d.ZP.Item,{className:W().listItem,unselectable:"on",children:(0,t.jsxs)(F.Z,{align:"center",size:5,children:[(0,t.jsx)("a",{className:W().eye,style:{backgroundImage:u?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(){M(!u),c.onLabelModify(a)}})," ",a.name,(0,t.jsx)(U,{color:a.color,onChange:function(I){a.color=I.hex,c.onLabelModify(a)}})]})});return p},w=D,J=e(71194),Z=e(48889),B=e(9715),q=e(93766),ce=e(47673),de=e(24044),ae=function(c){var a=c.defaultLabel,j=(0,l.useState)(c.visible),C=(0,r.Z)(j,2),u=C[0],M=C[1],p=(0,l.useState)((a==null?void 0:a.color)||"#FF0000"),R=(0,r.Z)(p,2),I=R[0],K=R[1],ee=(0,l.useState)((a==null?void 0:a.name)||""),oe=(0,r.Z)(ee,2),ve=oe[0],he=oe[1];return(0,t.jsx)(Z.Z,{title:"Add Label",visible:u,onCancel:c.onCancel,footer:null,children:(0,t.jsxs)(q.Z,{name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!1},onFinish:function(h){var X={name:h.labelname,color:I};c.onLabelAdd(X),M(!1)},autoComplete:"off",children:[(0,t.jsx)(q.Z.Item,{label:"Label Name",name:"labelname",rules:[{required:!0,message:"Please input label name!"}],children:(0,t.jsx)(de.Z,{defaultValue:ve})}),(0,t.jsx)(q.Z.Item,{label:"Select Color",name:"color",rules:[{required:!0,message:"Please select color!"}],children:(0,t.jsx)(U,{color:I,onChange:function(h){K(h.hex)}})}),(0,t.jsx)(q.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,t.jsxs)(F.Z,{children:[(0,t.jsx)(v.Z,{onClick:function(){var h;M(!1),(h=c.onCancel)===null||h===void 0||h.call(0)},children:"\u53D6\u6D88"}),(0,t.jsx)(v.Z,{type:"primary",htmlType:"submit",children:"\u786E\u5B9A"})]})})]})})},ue=ae,L=[{color:"#FF0000",name:"Label 1"},{color:"#008000",name:"Label 2"}],me=function(c){var a=(0,l.useState)(L),j=(0,r.Z)(a,2),C=j[0],u=j[1],M=(0,l.useState)(!1),p=(0,r.Z)(M,2),R=p[0],I=p[1];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.ZP,{className:s().labelList,size:"large",header:(0,t.jsx)("div",{className:s().listHeader,children:"Label List"}),footer:(0,t.jsx)("div",{children:(0,t.jsx)(v.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){I(!0)},block:!0,children:"Add Label"})}),bordered:!0,dataSource:C,renderItem:function(ee){return(0,t.jsx)(w,{label:ee,onLabelDelete:c.onLabelDelete,onLabelModify:c.onLabelModify})}}),(0,t.jsx)(ue,{visible:R,onLabelAdd:function(){}})]})},V=me},8088:function(o,g,e){"use strict";var $=e(67294),d=e(78677),O=e.n(d),v=e(85893),r=function(P){return(0,v.jsx)("div",{className:"".concat(O().container," ").concat(P.className),children:P.children})};g.Z=r},44434:function(o,g,e){"use strict";var $=e(67294),d=e(80961),O=e.n(d),v=e(85893),r=function(P){return(0,v.jsx)("div",{className:O().toolbar,children:P.children})};g.Z=r},61541:function(o,g,e){"use strict";var $=e(49111),d=e(19650),O=e(67294),v=e(82499),r=e.n(v),l=e(85893),P=function(b){return(0,l.jsx)("div",{unselectable:"on",className:"".concat(r().toolBarButtonContainerWrapper," ").concat(b.active&&r().toolBarButtonContainerWrapperActive),onClick:b.onClick,children:(0,l.jsx)(d.Z,{align:"center",className:r().toolBarButtonContainer,size:0,children:(0,l.jsxs)(d.Z,{align:"center",direction:"vertical",className:r().toolBarButton,size:0,children:[(0,l.jsx)("img",{src:b.imgSrc}),(0,l.jsx)("div",{className:r().buttonText,children:b.children})]})})})};g.Z=P},6779:function(o,g,e){"use strict";e.r(g),e.d(g,{default:function(){return Be}});var $=e(20136),d=e(19181),O=e(2824),v=e(67294),r=e(75513),l=e.n(r),P=e(8088),s=e(61541),b=e(44434),F=e(58967),Q=e(35475),S=e(2661),W=e.n(S),n=e(85893),k=function(m){return(0,n.jsx)("div",{className:W().toolbar,children:m.children})},N=k,H=e(49111),y=e(19650),t=e(93889),E=e.n(t),U=function(m){return(0,n.jsx)("div",{unselectable:"on",className:"".concat(E().toolBarButtonContainerWrapper," ").concat(m.active&&E().toolBarButtonContainerWrapperActive),onClick:m.onClick,children:(0,n.jsx)(y.Z,{align:"center",className:E().toolBarButtonContainer,size:0,children:(0,n.jsxs)(y.Z,{align:"center",direction:"vertical",className:E().toolBarButton,size:0,children:[(0,n.jsx)("img",{src:m.imgSrc}),(0,n.jsx)("div",{className:E().buttonText,children:m.children})]})})})},D=U,w=e(47673),J=e(24044),Z=e(13062),B=e(71230),q=e(59250),ce=e(13013),de=e(57663),ae=e(71577),ue=e(89032),L=e(15746),me=e(30887),V=e(54689),te=e(34792),c=e(48086),a=e(89366),j=e(57254),C=e(20474),u=e.n(C);function M(z){c.default.info("Click on menu item."),console.log("click",z)}var p=(0,n.jsxs)(V.Z,{onClick:M,children:[(0,n.jsx)(V.Z.Item,{icon:(0,n.jsx)(a.Z,{}),children:"1st menu item"},"1"),(0,n.jsx)(V.Z.Item,{icon:(0,n.jsx)(a.Z,{}),children:"2nd menu item"},"2"),(0,n.jsx)(V.Z.Item,{icon:(0,n.jsx)(a.Z,{}),children:"3rd menu item"},"3")]}),R=function(){return(0,n.jsxs)("div",{children:[(0,n.jsxs)(B.Z,{children:[(0,n.jsx)(L.Z,{span:12,className:u().RSPop1,children:(0,n.jsx)("span",{children:"PD parameter"})}),(0,n.jsx)(L.Z,{span:12,className:u().RSPop2,children:(0,n.jsx)(ce.Z,{overlay:p,children:(0,n.jsxs)(ae.Z,{style:{width:"100%"},children:["Dropdown ",(0,n.jsx)(j.Z,{})]})})})]}),(0,n.jsxs)(B.Z,{children:[(0,n.jsx)(L.Z,{span:12,className:u().RSPop1,children:(0,n.jsx)("span",{children:"Simplified distance"})}),(0,n.jsx)(L.Z,{span:12,className:u().RSPop2,children:(0,n.jsx)(J.Z,{placeholder:"Basic usage"})})]}),(0,n.jsxs)(B.Z,{children:[(0,n.jsx)(L.Z,{span:12,className:u().RSPop1,children:(0,n.jsx)("span",{children:"Simplified angle"})}),(0,n.jsx)(L.Z,{span:12,className:u().RSPop2,children:(0,n.jsx)(J.Z,{placeholder:"Basic usage"})})]}),(0,n.jsxs)(B.Z,{children:[(0,n.jsx)(L.Z,{span:12,className:u().RSPop1,children:(0,n.jsx)("span",{children:"Threshold of building simplification "})}),(0,n.jsx)(L.Z,{span:12,className:u().RSPop2,children:(0,n.jsx)(J.Z,{placeholder:"Basic usage"})})]})]})},I=R,K=e(11849),ee=e(93224),oe=e(41004),ve=e(74607),he=function(m){var _=m.children,T=m.onSelectionCircleAdded,A=m.onSelectionCircleMoved,x=m.onSelectionCircleRemoved,se=(0,ee.Z)(m,["children","onSelectionCircleAdded","onSelectionCircleMoved","onSelectionCircleRemoved"]),ie=v.useRef(null);return v.useEffect(function(){if(ie.current){let ge=function(i){var f=prompt("Please enter a Unique Id");if(f)if(xe[f]){alert("Id already used, add another one"),ge(i);return}else i._uid=f,xe[f]=i;else{alert("Nothing entered, layer deleted ..."),i.remove();return}},je=function(i){var f=i._uid,G=i.toGeoJSON();G.properties={LabelID:Number(f)},console.log("Store Layer on DB. Id:"+f,G),console.log(JSON.stringify(G))},ye=function(i){var f=i._uid,G=i.toGeoJSON();console.log("Update Layer on DB. Id:"+f,G)};var Y=ie.current.leafletElement;Y.pm.addControls({drawMarker:!1,drawCircle:!1,drawCircleMarker:!1,drawPolyline:!0,drawRectangle:!0,drawPolygon:!0,editMode:!0,dragMode:!0,cutPolygon:!0}),Y.pm.setGlobalOptions({pmIgnore:!1}),Y.pm.Toolbar.createCustomControl({name:"StoreShapes",title:"Store all shapes",block:"custom",className:"custom-control-icon",toggle:!1,afterClick:function(){var f=JSON.stringify(Y.pm.getGeomanDrawLayers(!0).toGeoJSON()),G="data.geojson",ne=document.createElement("a");ne.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(f)),ne.setAttribute("download",G),ne.style.display="none",document.body.appendChild(ne),ne.click(),console.log(f)}});var xe={};Y.on("pm:create",function(i){ge(i.layer),i.layer.bindPopup("Label: "+i.layer._uid).openPopup(),je(i.layer)}),Y.on("pm:edit",function(i){ye(i.layer)})}}),(0,n.jsx)(oe.Z,(0,K.Z)((0,K.Z)({ref:ie},se),{},{children:_}))},le=he,h=e(88014),X=e(3263),Pe=e(72869),Ce=e.n(Pe),re={lat:0,lng:0,zoom:2},pe=function(){var m=[re.lat,re.lng],_=function(){return console.log("circle added")},T=function(){return console.log("circle moved")},A=function(){return console.log("circle removed")};return(0,n.jsx)(le,{className:Ce().map,center:m,zoom:re.zoom,onSelectionCircleAdded:_,onSelectionCircleMoved:T,onSelectionCircleRemoved:A,children:(0,n.jsxs)(h.Z,{position:"topright",children:[(0,n.jsx)(h.Z.BaseLayer,{checked:!0,name:"OpenStreetMap.Mapnik",children:(0,n.jsx)(X.Z,{attribution:'\xA9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"})}),(0,n.jsx)(h.Z.BaseLayer,{name:"TianDiTu.Satellite",children:(0,n.jsx)(X.Z,{attribution:"\xA9 TianDiTu",url:"https://t2.tianditu.gov.cn/DataServer?T=img_w&X={x}&Y={y}&L={z}&tk=174705aebfe31b79b3587279e211cb9a"})}),(0,n.jsx)(h.Z.BaseLayer,{name:"Esri.WorldImagery",children:(0,n.jsx)(X.Z,{attribution:"Tiles \xA9 Esri \u2014 Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"})}),(0,n.jsx)(h.Z.Overlay,{name:"Annotion.TianDiTu",children:(0,n.jsx)(X.Z,{url:"https://t2.tianditu.gov.cn/DataServer?T=cia_w&X={x}&Y={y}&L={z}&tk=174705aebfe31b79b3587279e211cb9a"})})]})})},fe=pe,Se=function(){var m=(0,v.useState)(void 0),_=(0,O.Z)(m,2),T=_[0],A=_[1];return(0,n.jsxs)(P.Z,{className:l().segment,children:[(0,n.jsxs)(b.Z,{children:[(0,n.jsx)(s.Z,{imgSrc:"./pics/buttons/intelligent_interaction.png",children:"Intelligent Interaction"}),(0,n.jsx)(s.Z,{active:T=="polygon",imgSrc:"./pics/buttons/polygon.png",onClick:function(){A("polygon")},children:"Polygon"}),(0,n.jsx)(F.Z,{active:T=="brush",onClick:function(){A("brush")},onChange:function(se){console.log(se)}}),(0,n.jsxs)(d.Z,{placement:"rightTop",title:"title",content:"content",trigger:T=="rubber"?"hover":"click",children:[" ",(0,n.jsx)(s.Z,{imgSrc:"./pics/buttons/rubber.png",onClick:function(){A("rubber")},children:"Rubber"})]}),(0,n.jsx)(s.Z,{imgSrc:"./pics/buttons/zoom_in.png",children:"Zoom in"}),(0,n.jsx)(s.Z,{imgSrc:"./pics/buttons/zoom_out.png",children:"Zoom out"}),(0,n.jsx)(s.Z,{imgSrc:"./pics/buttons/save.png",children:"Save"}),(0,n.jsx)(s.Z,{imgSrc:"./pics/buttons/move.png",children:"Move"}),(0,n.jsx)(s.Z,{imgSrc:"./pics/buttons/export.png",children:"Export"}),(0,n.jsx)(s.Z,{imgSrc:"./pics/buttons/data_division.png",children:"Divide Data"}),(0,n.jsx)(s.Z,{imgSrc:"./pics/buttons/prev.png",children:"Undo"}),(0,n.jsx)(s.Z,{imgSrc:"./pics/buttons/next.png",children:"Redo"}),(0,n.jsx)(s.Z,{imgSrc:"./pics/buttons/clear_mark.png",children:"Clear Mark"})]}),(0,n.jsx)("div",{className:l().mainStage,children:(0,n.jsx)(fe,{})}),(0,n.jsxs)(N,{children:[(0,n.jsxs)(d.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Setting of boundary simplification",content:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(I,{})}),trigger:T=="boundry"?"click":"hover",children:[" ",(0,n.jsx)(D,{imgSrc:"./pics/buttons/border_simplify.png",onClick:function(){A("boundry")},children:(0,n.jsx)("h2",{children:"Boundary"})})]}),(0,n.jsxs)(d.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Setting of remote sensing",content:"content",trigger:T=="colorgun"?"click":"hover",children:[" ",(0,n.jsx)(D,{imgSrc:"./pics/buttons/remote_sensing_setting.png",onClick:function(){A("colorgun")},children:(0,n.jsx)("h2",{children:"Remote Sensing"})})]}),(0,n.jsxs)(d.Z,{overlayInnerStyle:{borderRadius:"0.5rem"},placement:"leftTop",title:"Switch grids",content:"content",trigger:T=="grid"?"click":"hover",children:[" ",(0,n.jsx)(D,{imgSrc:"./pics/buttons/switch_grid.png",onClick:function(){A("grid")},children:(0,n.jsx)("h2",{children:"Grids"})})]})]}),(0,n.jsx)("div",{className:l().rightSideBar,children:(0,n.jsx)(Q.Z,{onLabelModify:function(){},onLabelDelete:function(){},onLabelAdd:function(){}})})]})},Be=Se}}]);
