(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[507],{52822:function(r){r.exports={roundBall:"roundBall___1pqu1",popover:"popover___1-PR6"}},5882:function(r){r.exports={listItem:"listItem___vtDXn",eye:"eye___AsLBS",roundBall:"roundBall___1J_R3",popover:"popover___1x-2R",delete:"delete___WHPf2",listItemActive:"listItemActive___3FRb7"}},56131:function(r){r.exports={labelList:"labelList___jvD05",listHeader:"listHeader___UM5UF",eye:"eye___II3Po",roundBall:"roundBall___j752J"}},78677:function(r){r.exports={container:"container___G0FNe"}},83930:function(r){r.exports={stage:"stage___3H5QL"}},80961:function(r){r.exports={leftToolbar:"leftToolbar___1xi4t",rightToolbar:"rightToolbar___3dNSB"}},82499:function(r){r.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1SHWL",toolBarButtonContainer:"toolBarButtonContainer___1jKUz",toolBarButton:"toolBarButton___3Ouq1",buttonText:"buttonText___10ls7",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AA28"}},63097:function(r,g,e){"use strict";var Z=e(20136),_=e(55241),u=e(2824),i=e(67294),s=e(52822),l=e.n(s),f=e(63144),P=e(85893),v=function(A){var N=(0,i.useState)(A.color||"#FFF"),b=(0,u.Z)(N,2),a=b[0],n=b[1];return(0,i.useEffect)(function(){n(A.color||"#FFF")},[A]),A.changeable?(0,P.jsx)(_.Z,{getPopupContainer:function(o){return o.parentElement||document.body},overlayClassName:l().popover,openClassName:l().popoverOpenClassName,placement:"bottom",content:(0,P.jsx)(f.xS,{disableAlpha:!0,color:a,onChange:function(o){n(o.hex)},onChangeComplete:A.onChange}),trigger:"click",children:(0,P.jsx)("div",{className:l().roundBall,style:{backgroundColor:a}})}):(0,P.jsx)("div",{className:l().roundBall,style:{backgroundColor:a}})};g.Z=v},5041:function(r,g,e){"use strict";e.d(g,{Z:function(){return w}});var Z=e(54421),_=e(38272),u=e(57663),i=e(71577),s=e(2824),l=e(67294),f=e(56131),P=e.n(f),v=e(49111),K=e(19650),A=e(11849),N=e(5882),b=e.n(N),a=e(63097),n=e(85893),H=function(t){var d=(0,A.Z)({},t.label),C=(0,l.useState)(d.invisible),y=(0,s.Z)(C,2),M=y[0],I=y[1],T=(0,l.useState)(0),L=(0,s.Z)(T,2),x=L[0],E=L[1],B=t.hideEye?" ":(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("a",{className:b().eye,style:{backgroundImage:M?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(h){h.stopPropagation(),I(!M),t.onLabelModify(d)}})," "]}),U=t.hideColorPicker?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(a.Z,{color:d.color,changeable:!0,onChange:function(h){d.color=h.hex,t.onLabelModify(d)}}),S=(0,n.jsxs)(_.ZP.Item,{className:"".concat(b().listItem," ").concat(t.active?b().listItemActive:""),unselectable:"on",onClick:function(){t.onClick(d)},children:[(0,n.jsxs)(K.Z,{align:"center",size:5,children:[B,d.name,U]}),(0,n.jsx)("a",{className:b().delete,onClick:function(h){h.stopPropagation();var j=new Date().getTime();j-x<300||(E(j),t.onLabelDelete(d))}})]});return S},o=H,q=e(71194),J=e(50146),G=e(47673),Q=e(24044),k=e(9715),O=e(93766),D=e(48971),X=["#FF0000","#008000","#0000FF","#FFFF00","#FFA500","#00FFFF","#8B00FF","#FFC0CB","#7CFC00","#007FFF","#800080","#36BF36","#DAA520","#800000","#008B8B","#B22222","#E6D933","#000080","#FF00FF","#FFFF99","#87CEEB","#5C50E6","#CD5C5C","#20B2AA","#E680FF","#4D1F00","#006374","#B399FF","#8B4513","#BA55D3","#C0C0C0","#808080","#000000"],$=function(t){var d,C,y=(0,D.YB)().formatMessage({id:"component.PPAddLabelModal.selectColor"}),M=(0,D.YB)().formatMessage({id:"component.PPAddLabelModal.addLabel"}),I=(0,D.YB)().formatMessage({id:"component.PPAddLabelModal.labelName"}),T=(0,D.YB)().formatMessage({id:"component.PPCreater.cancel"}),L=(0,D.YB)().formatMessage({id:"component.PPSegMode.ok"}),x=(0,l.useState)(((d=t.defaultLabel)===null||d===void 0?void 0:d.color)||X[t.order||0]),E=(0,s.Z)(x,2),B=E[0],U=E[1];(0,l.useEffect)(function(){var W;U(((W=t.defaultLabel)===null||W===void 0?void 0:W.color)||X[t.order||0])},[t]);var S=t.hideColorPicker?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(O.Z.Item,{label:y,name:"color",children:(0,n.jsx)(a.Z,{color:B,onChange:function(R){U(R.hex)}})}),F=O.Z.useForm(),h=(0,s.Z)(F,1),j=h[0];return(0,n.jsx)(J.Z,{title:M,visible:t.visible,onCancel:t.onCancel,footer:null,children:(0,n.jsxs)(O.Z,{form:j,name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!1,labelname:(C=t.defaultLabel)===null||C===void 0?void 0:C.name},onFinish:function(R){var p={name:R.labelname,color:B};t.onLabelAdd(p),j.resetFields()},autoComplete:"off",children:[(0,n.jsx)(O.Z.Item,{label:I,name:"labelname",rules:[{required:!0,message:"Please input label name!"}],children:(0,n.jsx)(Q.Z,{})}),S,(0,n.jsx)(O.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,n.jsxs)(K.Z,{children:[(0,n.jsx)(i.Z,{onClick:function(){var R;(R=t.onCancel)===null||R===void 0||R.call(0),j.resetFields()},children:T}),(0,n.jsx)(i.Z,{type:"primary",htmlType:"submit",children:L})]})})]})})},Y=$,V=function(t){var d,C=(0,D.YB)().formatMessage({id:"component.PPLabelList.addLabel"}),y=(0,D.YB)().formatMessage({id:"component.PPLabelList.labelList"}),M=(0,l.useState)(!1),I=(0,s.Z)(M,2),T=I[0],L=I[1];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(_.ZP,{className:P().labelList,size:"large",header:(0,n.jsx)("div",{className:P().listHeader,children:y}),footer:(0,n.jsx)("div",{children:(0,n.jsx)(i.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){L(!0)},block:!0,children:C})}),bordered:!0,dataSource:t.labels,renderItem:function(E){var B;return(0,n.jsx)(o,{hideColorPicker:t.hideColorPicker,hideEye:t.hideEye,onClick:t.onLabelSelect,label:E,active:(B=t.activeIds)===null||B===void 0?void 0:B.has(E.labelId),onLabelDelete:t.onLabelDelete,onLabelModify:t.onLabelModify})}}),(0,n.jsx)(Y,{hideColorPicker:t.hideColorPicker,order:(d=t.labels)===null||d===void 0?void 0:d.length,visible:T,onLabelAdd:function(E){t.onLabelAdd(E),L(!1)},onCancel:function(){L(!1)}})]})},w=V},8088:function(r,g,e){"use strict";var Z=e(67294),_=e(78677),u=e.n(_),i=e(85893),s=function(f){return(0,i.jsx)("div",{className:"".concat(u().container," ").concat(f.className),children:f.children})};g.Z=s},57436:function(r,g,e){"use strict";var Z=e(91220),_=e(2824),u=e(67294),i=e(65031),s=e(84420),l=e.n(s),f=e(83930),P=e.n(f),v=e(85893),K="./pics/basketball.jpg";function A(b){switch(b){case"mover":return"move";case"rectangle":case"polygon":return"crosshair";default:return"default"}}var N=function(a){var n=l()(a.imgSrc||K),H=(0,_.Z)(n,1),o=H[0],q=(o==null?void 0:o.width)||0,J=(o==null?void 0:o.height)||0,G=a.transparency==null?0:a.transparency*.01,Q=(0,u.useState)(0),k=(0,_.Z)(Q,2),O=k[0],D=k[1],X=(0,u.useState)(0),$=(0,_.Z)(X,2),Y=$[0],V=$[1],w=(0,u.useState)({x:0,y:0}),z=(0,_.Z)(w,2),t=z[0],d=z[1],C=(0,u.useRef)(null),y=(0,u.useRef)(null),M=(0,u.useRef)(null);function I(){var m=document.getElementById("dr");m&&(D(m.clientWidth),V(m.clientHeight))}(0,u.useEffect)(function(){window.removeEventListener("resize",I),window.addEventListener("resize",I);var m=document.getElementById("dr");m&&(D(m.clientWidth),V(m.clientHeight))},[]),(0,u.useEffect)(function(){!C.current||(C.current.container().style.cursor=A(a.currentTool))},[a.currentTool]);var T=function(c){return{e:c,mouseX:(c.evt.offsetX-t.x-O/2)/a.scale+q/2,mouseY:(c.evt.offsetY-t.y-Y/2)/a.scale+J/2}},L=function(c){a.drawTool.onMouseDown(T(c))},x=function(c){a.drawTool.onMouseMove(T(c))},E=function(c){a.drawTool.onMouseUp(T(c))},B=function(c){c.cancelBubble=!0,c.evt.preventDefault()},U=[];if(a.annotations){var S,F=(S=M.current)===null||S===void 0?void 0:S.getContext("2d");F&&F.clearRect(0,0,F.canvas.width,F.canvas.height);var h=(0,Z.Z)(a.annotations),j;try{for(h.s();!(j=h.n()).done;){var W=j.value;if(!!W){var R=a.drawTool.createElementsFunc({annotation:W,onDrag:a.onAnnotationModify,onDragEnd:a.onAnnotationModifyComplete,scale:a.scale,currentTool:a.currentTool,onSelect:a.setCurrentAnnotation,stageRef:C,currentAnnotation:a.currentAnnotation,transparency:G,canvasRef:M,layerRef:y});U.push(R)}}}catch(m){h.e(m)}finally{h.f()}}var p=a.currentTool=="mover";return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("canvas",{style:{display:"none"},ref:M,width:o==null?void 0:o.width,height:o==null?void 0:o.height}),(0,v.jsxs)(i.Hf,{width:O,height:Y,offsetX:-O/2,offsetY:-Y/2,className:P().stage,ref:C,draggable:p,onDragMove:function(c){a.currentTool=="mover"},onDragEnd:function(c){a.currentTool=="mover"&&(console.log("dragEndPosX,Y: (".concat(c.target.x(),",").concat(c.target.y(),")")),d({x:c.target.x(),y:c.target.y()}))},children:[(0,v.jsx)(i.mh,{onMouseDown:L,onMouseMove:x,onMouseUp:E,onContextMenu:B,scaleX:a.scale,scaleY:a.scale,draggable:!1,children:(0,v.jsx)(i.Ee,{name:"baseImage",draggable:!1,image:o,x:-((o==null?void 0:o.width)||0)/2,y:-((o==null?void 0:o.height)||0)/2})}),(0,v.jsxs)(i.mh,{ref:y,name:"annotation",scaleX:a.scale,scaleY:a.scale,onMouseDown:L,onMouseMove:x,onMouseUp:E,onContextMenu:B,opacity:G,children:[U,(0,v.jsx)(i.Ee,{x:-((o==null?void 0:o.width)||0)/2,y:-((o==null?void 0:o.height)||0)/2,image:M.current||void 0})]})]})]})};g.Z=N},44434:function(r,g,e){"use strict";var Z=e(67294),_=e(80961),u=e.n(_),i=e(85893),s=function(f){var P=u().leftToolbar;return f.disLoc=="right"&&(P=u().rightToolbar),(0,i.jsx)("div",{className:P,children:f.children})};g.Z=s},61541:function(r,g,e){"use strict";var Z=e(49111),_=e(19650),u=e(67294),i=e(82499),s=e.n(i),l=e(85893),f=function(v){return(0,l.jsx)("div",{unselectable:"on",className:"".concat(s().toolBarButtonContainerWrapper," ").concat(v.active&&s().toolBarButtonContainerWrapperActive),onClick:v.onClick,children:(0,l.jsx)(_.Z,{align:"center",className:s().toolBarButtonContainer,size:0,children:(0,l.jsxs)(_.Z,{align:"center",direction:"vertical",className:s().toolBarButton,size:0,children:[(0,l.jsx)("img",{src:v.imgSrc}),(0,l.jsx)("div",{className:s().buttonText,children:v.children})]})})})};g.Z=f}}]);
