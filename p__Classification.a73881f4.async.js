(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[672],{70830:function(i,v,e){"use strict";e.d(v,{Z:function(){return B}});function B(_){throw new TypeError('"'+_+'" is read-only')}},41435:function(i,v,e){"use strict";e.d(v,{Z:function(){return r}});var B=e(94663),_=e(80112);function C(u){return Function.toString.call(u).indexOf("[native code]")!==-1}var m=e(18597);function l(u,d,P){return(0,m.Z)()?l=Reflect.construct:l=function(E,F,t){var g=[null];g.push.apply(g,F);var o=Function.bind.apply(E,g),M=new o;return t&&(0,_.Z)(M,t.prototype),M},l.apply(null,arguments)}function r(u){var d=typeof Map=="function"?new Map:void 0;return r=function(f){if(f===null||!C(f))return f;if(typeof f!="function")throw new TypeError("Super expression must either be null or a function");if(typeof d!="undefined"){if(d.has(f))return d.get(f);d.set(f,E)}function E(){return l(f,arguments,(0,B.Z)(this).constructor)}return E.prototype=Object.create(f.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),(0,_.Z)(E,f)},r(u)}},52822:function(i){i.exports={roundBall:"roundBall___1pqu1",popover:"popover___1-PR6"}},5882:function(i){i.exports={listItem:"listItem___vtDXn",eye:"eye___AsLBS",roundBall:"roundBall___1J_R3",popover:"popover___1x-2R",delete:"delete___WHPf2",listItemActive:"listItemActive___3FRb7"}},56131:function(i){i.exports={labelList:"labelList___jvD05",listHeader:"listHeader___UM5UF",eye:"eye___II3Po",roundBall:"roundBall___j752J"}},78677:function(i){i.exports={container:"container___G0FNe"}},83930:function(i){i.exports={stage:"stage___3H5QL"}},80961:function(i){i.exports={leftToolbar:"leftToolbar___1xi4t",rightToolbar:"rightToolbar___3dNSB"}},82499:function(i){i.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1SHWL",toolBarButtonContainer:"toolBarButtonContainer___1jKUz",toolBarButton:"toolBarButton___3Ouq1",buttonText:"buttonText___10ls7",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AA28"}},73199:function(){},63097:function(i,v,e){"use strict";var B=e(20136),_=e(55241),C=e(2824),m=e(67294),l=e(52822),r=e.n(l),u=e(63144),d=e(85893),P=function(E){var F=(0,m.useState)(E.color||"#FFF"),t=(0,C.Z)(F,2),g=t[0],o=t[1];return(0,m.useEffect)(function(){o(E.color||"#FFF")},[E]),E.changeable?(0,d.jsx)(_.Z,{getPopupContainer:function(T){return T.parentElement||document.body},overlayClassName:r().popover,openClassName:r().popoverOpenClassName,placement:"bottom",content:(0,d.jsx)(u.xS,{disableAlpha:!0,color:g,onChange:function(T){o(T.hex)},onChangeComplete:E.onChange}),trigger:"click",children:(0,d.jsx)("div",{className:r().roundBall,style:{backgroundColor:g}})}):(0,d.jsx)("div",{className:r().roundBall,style:{backgroundColor:g}})};v.Z=P},5041:function(i,v,e){"use strict";e.d(v,{Z:function(){return y}});var B=e(54421),_=e(38272),C=e(57663),m=e(71577),l=e(2824),r=e(67294),u=e(56131),d=e.n(u),P=e(49111),f=e(19650),E=e(11849),F=e(5882),t=e.n(F),g=e(63097),o=e(85893),M=function(n){var a=(0,E.Z)({},n.label),I=(0,r.useState)(a.invisible),W=(0,l.Z)(I,2),b=W[0],Z=W[1],K=n.hideEye?" ":(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("a",{className:t().eye,style:{backgroundImage:b?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(){Z(!b),n.onLabelModify(a)}})," "]}),c=n.hideColorPicker?(0,o.jsx)(o.Fragment,{}):(0,o.jsx)(g.Z,{color:a.color,changeable:!0,onChange:function(j){a.color=j.hex,n.onLabelModify(a)}}),D=(0,o.jsxs)(_.ZP.Item,{className:"".concat(t().listItem," ").concat(n.active?t().listItemActive:""),unselectable:"on",onClick:function(){n.onClick(a)},children:[(0,o.jsxs)(f.Z,{align:"center",size:5,children:[K,a.name,c]}),(0,o.jsx)("a",{className:t().delete,style:{backgroundImage:"url(./pics/delete.png)"},onClick:function(j){j.stopPropagation(),n.onLabelDelete(a)}})]});return D},T=M,s=e(71194),R=e(50146),$=e(47673),U=e(24044),Y=e(9715),O=e(93766),A=e(48971),S=["#FF0000","#008000","#0000FF","#FFFF00","#FFA500","#00FFFF","#8B00FF","#FFC0CB","#7CFC00","#007FFF","#800080","#36BF36","#DAA520","#800000","#008B8B","#B22222","#E6D933","#000080","#FF00FF","#FFFF99","#87CEEB","#5C50E6","#CD5C5C","#20B2AA","#E680FF","#4D1F00","#006374","#B399FF","#8B4513","#BA55D3","#C0C0C0","#808080","#000000"],p=function(n){var a,I,W=(0,A.YB)().formatMessage({id:"component.PPAddLabelModal.selectColor"}),b=(0,A.YB)().formatMessage({id:"component.PPAddLabelModal.addLabel"}),Z=(0,A.YB)().formatMessage({id:"component.PPAddLabelModal.labelName"}),K=(0,A.YB)().formatMessage({id:"component.PPCreater.cancel"}),c=(0,A.YB)().formatMessage({id:"component.PPSegMode.ok"}),D=(0,r.useState)(((a=n.defaultLabel)===null||a===void 0?void 0:a.color)||S[n.order||0]),x=(0,l.Z)(D,2),j=x[0],V=x[1];(0,r.useEffect)(function(){var z;V(((z=n.defaultLabel)===null||z===void 0?void 0:z.color)||S[n.order||0])},[n]);var X=n.hideColorPicker?(0,o.jsx)(o.Fragment,{}):(0,o.jsx)(O.Z.Item,{label:W,name:"color",children:(0,o.jsx)(g.Z,{color:j,onChange:function(N){V(N.hex)}})}),J=O.Z.useForm(),G=(0,l.Z)(J,1),k=G[0];return(0,o.jsx)(R.Z,{title:b,visible:n.visible,onCancel:n.onCancel,footer:null,children:(0,o.jsxs)(O.Z,{form:k,name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!1,labelname:(I=n.defaultLabel)===null||I===void 0?void 0:I.name},onFinish:function(N){var Q={name:N.labelname,color:j};n.onLabelAdd(Q),k.resetFields()},autoComplete:"off",children:[(0,o.jsx)(O.Z.Item,{label:Z,name:"labelname",rules:[{required:!0,message:"Please input label name!"}],children:(0,o.jsx)(U.Z,{})}),X,(0,o.jsx)(O.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,o.jsxs)(f.Z,{children:[(0,o.jsx)(m.Z,{onClick:function(){var N;(N=n.onCancel)===null||N===void 0||N.call(0),k.resetFields()},children:K}),(0,o.jsx)(m.Z,{type:"primary",htmlType:"submit",children:c})]})})]})})},L=p,H=function(n){var a,I=(0,A.YB)().formatMessage({id:"component.PPLabelList.addLabel"}),W=(0,A.YB)().formatMessage({id:"component.PPLabelList.labelList"}),b=(0,r.useState)(!1),Z=(0,l.Z)(b,2),K=Z[0],c=Z[1];return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(_.ZP,{className:d().labelList,size:"large",header:(0,o.jsx)("div",{className:d().listHeader,children:W}),footer:(0,o.jsx)("div",{children:(0,o.jsx)(m.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){c(!0)},block:!0,children:I})}),bordered:!0,dataSource:n.labels,renderItem:function(x){var j;return(0,o.jsx)(T,{hideColorPicker:n.hideColorPicker,hideEye:n.hideEye,onClick:n.onLabelSelect,label:x,active:(j=n.activeIds)===null||j===void 0?void 0:j.has(x.labelId),onLabelDelete:n.onLabelDelete,onLabelModify:n.onLabelModify})}}),(0,o.jsx)(L,{hideColorPicker:n.hideColorPicker,order:(a=n.labels)===null||a===void 0?void 0:a.length,visible:K,onLabelAdd:function(x){n.onLabelAdd(x),c(!1)},onCancel:function(){c(!1)}})]})},y=H},8088:function(i,v,e){"use strict";var B=e(67294),_=e(78677),C=e.n(_),m=e(85893),l=function(u){return(0,m.jsx)("div",{className:"".concat(C().container," ").concat(u.className),children:u.children})};v.Z=l},57436:function(i,v,e){"use strict";var B=e(91220),_=e(2824),C=e(67294),m=e(65031),l=e(84420),r=e.n(l),u=e(83930),d=e.n(u),P=e(85893),f="./pics/basketball.jpg",E=function(t){var g=r()(t.imgSrc||""),o=(0,_.Z)(g,1),M=o[0],T=(0,C.useState)(0),s=(0,_.Z)(T,2),R=s[0],$=s[1],U=(0,C.useState)(0),Y=(0,_.Z)(U,2),O=Y[0],A=Y[1];console.log("scale: ",t.scale);function S(){var n=document.getElementById("dr");n&&($(n.clientWidth),A(n.clientHeight))}(0,C.useEffect)(function(){window.removeEventListener("resize",S),window.addEventListener("resize",S);var n=document.getElementById("dr");n&&($(n.clientWidth),A(n.clientHeight))},[]);var p=[];if(t.annotations){var L=(0,B.Z)(t.annotations),H;try{for(L.s();!(H=L.n()).done;){var y=H.value;if(!!y){var h=void 0;switch(y.tool){case"polygon":h=t.createPolygonFunc;break;case"brush":h=t.createBrushFunc;break;case"rubber":h=t.createBrushFunc;break;case"rectangle":h=t.createRectangleFunc;break;default:h=null}h&&p.push(h(y,t.onAnnotationModify,t.onAnnotationModifyComplete,t.scale,t.currentTool,t.setCurrentAnnotation,t.currentAnnotation))}}}catch(n){L.e(n)}finally{L.f()}}return(0,P.jsx)(m.Hf,{width:R,height:O,offsetX:-R/2,offsetY:-O/2,className:d().stage,children:(0,P.jsx)(m.mh,{onMouseDown:function(a){t.onMouseDown&&t.onMouseDown(a,-R/2,-O/2,t.scale)},onMouseMove:function(a){t.onMouseMove&&t.onMouseMove(a,t.scale)},onMouseUp:function(a){t.onMouseUp&&t.onMouseUp(a,t.scale)},onContextMenu:function(a){a.evt.preventDefault()},draggable:!1,scaleX:t.scale,scaleY:t.scale,children:(0,P.jsxs)(m.ZA,{draggable:t.currentTool=="mover",onDragEnd:function(a){},children:[(0,P.jsx)(m.Ee,{draggable:!1,image:M,x:-((M==null?void 0:M.width)||0)/2,y:-((M==null?void 0:M.height)||0)/2}),p]})})})};v.Z=E},44434:function(i,v,e){"use strict";var B=e(67294),_=e(80961),C=e.n(_),m=e(85893),l=function(u){var d=C().leftToolbar;return u.disLoc=="right"&&(d=C().rightToolbar),(0,m.jsx)("div",{className:d,children:u.children})};v.Z=l},61541:function(i,v,e){"use strict";var B=e(49111),_=e(19650),C=e(67294),m=e(82499),l=e.n(m),r=e(85893),u=function(P){return(0,r.jsx)("div",{unselectable:"on",className:"".concat(l().toolBarButtonContainerWrapper," ").concat(P.active&&l().toolBarButtonContainerWrapperActive),onClick:P.onClick,children:(0,r.jsx)(_.Z,{align:"center",className:l().toolBarButtonContainer,size:0,children:(0,r.jsxs)(_.Z,{align:"center",direction:"vertical",className:l().toolBarButton,size:0,children:[(0,r.jsx)("img",{src:P.imgSrc}),(0,r.jsx)("div",{className:l().buttonText,children:P.children})]})})})};v.Z=u},29214:function(i,v,e){"use strict";e.r(v);var B=e(11849),_=e(20228),C=e(11382),m=e(34669),l=e(54458),r=e(34792),u=e(48086),d=e(2824),P=e(67294),f=e(73199),E=e.n(f),F=e(8088),t=e(61541),g=e(44434),o=e(5041),M=e(57436),T=e(64322),s=e(85893),R=function(){var U,Y=(0,P.useState)("mover"),O=(0,d.Z)(Y,2),A=O[0],S=O[1],p=(0,T.$L)(P.useState,P.useEffect,{label:{oneHot:!1,postSetCurr:Z},effectTrigger:{postTaskChange:K}}),L=(0,d.Z)(p,8),H=L[0],y=L[1],h=L[2],n=L[3],a=L[4],I=L[5],W=L[6],b=L[7];function Z(c){if(b.isActive(c))n.create({taskId:a.curr.taskId,labelId:c.labelId,dataId:I.curr.dataId});else{var D=n.all.filter(function(x){return x.labelId==c.labelId})[0];n.remove(D.annotationId)}}function K(c,D){y(!0),!(!c||!D)&&(b.initActive(D),y(!1))}return(0,s.jsxs)(F.Z,{className:E().classes,children:[(0,s.jsxs)(g.Z,{children:[(0,s.jsx)(t.Z,{imgSrc:"./pics/buttons/zoom_in.png",onClick:function(){h.change(.1)},children:"Zoom in"}),(0,s.jsx)(t.Z,{imgSrc:"./pics/buttons/zoom_out.png",onClick:function(){h.change(-.1)},children:"Zoom out"}),(0,s.jsx)(t.Z,{imgSrc:"./pics/buttons/save.png",onClick:function(){u.default.info("Annotations are saved automatically. You don't need to click save.")},children:"Save"}),(0,s.jsx)(t.Z,{imgSrc:"./pics/buttons/move.png",onClick:function(){S("mover"),u.default.info("You can move the image now.")},children:"Move"})]}),(0,s.jsx)("div",{id:"dr",className:"mainStage",children:(0,s.jsxs)(C.Z,{tip:"loading",spinning:H,children:[(0,s.jsx)("div",{className:"draw",children:(0,s.jsx)(M.Z,{scale:h.curr,currentTool:A,setCurrentAnnotation:function(){},onAnnotationModify:function(){},onAnnotationModifyComplete:function(){},imgSrc:I.imgSrc})}),(0,s.jsx)("div",{className:"pblock",children:(0,s.jsxs)("div",{className:"progress",children:[(0,s.jsx)(l.Z,{className:"progressBar",percent:a.progress,status:"active",showInfo:!1})," ",(0,s.jsxs)("span",{className:"progressDesc",children:["Current labeling ",a.currIdx?a.currIdx+1:1," of ",(U=a.all)===null||U===void 0?void 0:U.length,". Already labeled ",a.finished||0,"."]})]})}),(0,s.jsx)("div",{className:"prevTask",onClick:a.prevTask}),(0,s.jsx)("div",{className:"nextTask",onClick:a.nextTask})]})}),(0,s.jsxs)(g.Z,{disLoc:"right",children:[(0,s.jsx)(t.Z,{imgSrc:"./pics/buttons/export.png",children:"Export"}),(0,s.jsx)(t.Z,{imgSrc:"./pics/buttons/data_division.png",children:"Split Dataset"})]}),(0,s.jsx)("div",{className:"rightSideBar",children:(0,s.jsx)(o.Z,{labels:b.all,activeIds:b.activeIds,onLabelSelect:b.setCurr,onLabelAdd:function(D){return b.create((0,B.Z)((0,B.Z)({},D),{},{projectId:W.curr.projectId}))},onLabelDelete:b.remove,onLabelModify:function(){},hideColorPicker:!0,hideEye:!0})})]})};v.default=R}}]);
