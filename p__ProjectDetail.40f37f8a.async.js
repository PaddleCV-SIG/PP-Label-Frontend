(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[498],{91220:function(A,b,e){"use strict";e.d(b,{Z:function(){return E}});var L=e(64254);function E(f,P){var m;if(typeof Symbol=="undefined"||f[Symbol.iterator]==null){if(Array.isArray(f)||(m=(0,L.Z)(f))||P&&f&&typeof f.length=="number"){m&&(f=m);var _=0,j=function(){};return{s:j,n:function(){return _>=f.length?{done:!0}:{done:!1,value:f[_++]}},e:function(v){throw v},f:j}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var y=!0,I=!1,d;return{s:function(){m=f[Symbol.iterator]()},n:function(){var v=m.next();return y=v.done,v},e:function(v){I=!0,d=v},f:function(){try{!y&&m.return!=null&&m.return()}finally{if(I)throw d}}}}},41435:function(A,b,e){"use strict";e.d(b,{Z:function(){return _}});var L=e(94663),E=e(80112);function f(j){return Function.toString.call(j).indexOf("[native code]")!==-1}var P=e(18597);function m(j,y,I){return(0,P.Z)()?m=Reflect.construct:m=function(p,v,C){var u=[null];u.push.apply(u,v);var Z=Function.bind.apply(p,u),R=new Z;return C&&(0,E.Z)(R,C.prototype),R},m.apply(null,arguments)}function _(j){var y=typeof Map=="function"?new Map:void 0;return _=function(d){if(d===null||!f(d))return d;if(typeof d!="function")throw new TypeError("Super expression must either be null or a function");if(typeof y!="undefined"){if(y.has(d))return y.get(d);y.set(d,p)}function p(){return m(d,arguments,(0,L.Z)(this).constructor)}return p.prototype=Object.create(d.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),(0,E.Z)(p,d)},_(j)}},48627:function(A){A.exports={container:"container___2RXc3"}},18398:function(A){A.exports={_ppcard:"_ppcard___1sR0b",title:"title___2fjZe",shadow:"shadow___3SaOl",main:"main___IOVJu",block_l:"block_l___1ywNh",block_r:"block_r___Sg4L7",goup:"goup___1vznA"}},11428:function(A,b,e){"use strict";var L=e(67294),E=e(48627),f=e.n(E),P=e(85893),m=function(j){return(0,P.jsx)("div",{className:"".concat(f().container),style:{backgroundImage:"url(./pics/background.png)"},children:j.children})};b.Z=m},68370:function(A,b,e){"use strict";e.r(b),e.d(b,{default:function(){return F}});var L=e(34792),E=e(48086),f=e(67294),P=e(48971),m=e(57663),_=e(71577),j=e(88983),y=e(47933),I=e(36877),d=e(96607),p=e(47673),v=e(24044),C=e(9715),u=e(93766),Z=e(2824),R=e(91220),N=e(89032),V=e(15746),S=e(11849),$=e(13062),B=e(71230),w=e(11700),z=e(18398),x=e.n(z),K=e(37071),D=e(91156),G=e(64322),a=e(85893),J=[{value:"/app",label:"/app",children:[{value:"data",label:"data",children:[{value:"pplabel",label:"pplabel",children:[{value:"clas_single",label:"clas_single",children:[{value:"PetImages",label:"PetImages"}]}]}]}]}],T=function(i){return(0,a.jsxs)("div",{className:x()._ppcard,style:i.style,children:[(0,a.jsx)(B.Z,{className:x().titleRow,style:{display:i.title?void 0:"none"},children:(0,a.jsx)(w.Z,{className:x().title,children:i.title})}),(0,a.jsx)(B.Z,{style:{marginTop:26},children:(0,a.jsx)(V.Z,{span:24,style:(0,S.Z)({paddingLeft:30,paddingRight:30,textAlign:"center"},i.innerStyle),children:i.children})})]})};function k(M){var i="",O=(0,R.Z)(M),t;try{for(O.s();!(t=O.n()).done;){var n=t.value;n.endsWith("/")?i+=n:i+=n+"/"}}catch(o){O.e(o)}finally{O.f()}return i}var U=function(i){console.log("render ppcreater",i);var O=(0,G.Gd)(f.useState),t=K.Z.getQueryVariable("projectId");console.log("projectId",t);var n=function(h){t?O.update(t,{name:h.name,description:h.description,dataDir:k(h.dataDir),labelDir:h.labelDir}).then(function(){P.m8.push("/welcome")}):O.create({name:h.name,description:h.description,taskCategoryId:D.ux[i.taskCategory].id,dataDir:k(h.dataDir),labelDir:h.labelDir}).then(function(g){P.m8.push("/".concat((0,D.LV)(i.taskCategory),"?projectId=").concat(g.projectId))}).catch(function(){})},o=i.taskCategory?D.ux[i.taskCategory].name:null,s=u.Z.useForm(),r=(0,Z.Z)(s,1),c=r[0];return(0,f.useEffect)(function(){O.getCurr(t).then(function(l){console.log("project",l);var h={name:l==null?void 0:l.name,description:l==null?void 0:l.description};c.setFieldsValue(h)})},[]),(0,a.jsxs)("div",{className:x().shadow,style:i.style,children:[(0,a.jsx)("div",{id:"left",className:x().block_l,children:(0,a.jsx)(T,{title:o,style:{height:760,padding:"1.25rem 0"},children:(0,a.jsxs)(u.Z,{form:c,layout:"horizontal",size:"large",style:{marginTop:"5.69rem"},onFinish:function(h){n(h)},children:[(0,a.jsx)(u.Z.Item,{name:"name",label:"Project Name",labelCol:{span:6},wrapperCol:{span:16},rules:[{required:!0,message:"Please input project name!"}],style:{fontSize:"1.5rem"},children:(0,a.jsx)(v.Z,{size:"large",placeholder:"Words or numbers",style:{height:"3.13rem"}})}),(0,a.jsx)(u.Z.Item,{name:"dataDir",label:"Dataset Path",labelCol:{span:6},wrapperCol:{span:16},rules:[{required:!0,message:"Please input dataset path!"}],style:{fontSize:"1.5rem"},children:(0,a.jsx)(d.Z,{options:J,onChange:function(h){console.log(h)},changeOnSelect:!0})}),(0,a.jsx)(u.Z.Item,{name:"description",label:"Description",labelCol:{span:6},wrapperCol:{span:16},rules:[{required:!1}],style:{fontSize:"1.5rem"},children:(0,a.jsx)(v.Z,{size:"large",placeholder:"Words or numbers",style:{height:"3.13rem"}})}),(0,a.jsx)(u.Z.Item,{name:"maxPoints",label:"MaxPoints",labelCol:{span:6},wrapperCol:{span:16},rules:[{required:i.taskCategory=="keypointDetection",message:"Please input max points!"}],style:{fontSize:"1.5rem",display:i.taskCategory=="keypointDetection"?void 0:"none"},children:(0,a.jsx)(v.Z,{size:"large",placeholder:"Numbers (Int)",style:{height:"3.13rem"}})}),(0,a.jsx)(u.Z.Item,{name:"segmentationMode",label:"AnnotationMode",labelCol:{span:6},wrapperCol:{span:16},rules:[{required:i.taskCategory=="semanticSegmentation",message:"Please select task category!"}],style:{fontSize:"1.5rem",display:i.taskCategory=="semanticSegmentation"?void 0:"none"},children:(0,a.jsx)("div",{className:x().goup,children:(0,a.jsxs)(y.ZP.Group,{defaultValue:1,size:"large",style:{height:"3.13rem"},children:[(0,a.jsx)(y.ZP,{value:1,children:"Pixel model"}),(0,a.jsx)(y.ZP,{value:2,children:"Polygon mode"})]})})}),(0,a.jsxs)(u.Z.Item,{wrapperCol:{span:16,offset:6},children:[(0,a.jsx)(_.Z,{htmlType:"submit",type:"primary",style:{height:"2.5rem",width:"48%"},block:!0,children:t?"Update":"Create"}),"\xA0\xA0",(0,a.jsx)(_.Z,{htmlType:"button",style:{height:"2.5rem",width:"48%"},block:!0,onClick:function(){P.m8.push("/welcome")},children:"Cancel"})]})]})})}),(0,a.jsx)("div",{id:"right",className:x().block_r,children:(0,a.jsx)(T,{style:{height:"43.63rem",padding:"0.5rem 0"},children:(0,a.jsx)("img",{src:i.imgSrc,style:{height:"43.63rem",width:"60rem"}})})})]})},H=U,W=e(11428),Q=function(){var i=(0,D.os)(K.Z.getQueryVariable("taskCategory"));return i||(E.default.error("Task Category not present in url"),P.m8.push("/project_creation")),i in D.ux||(E.default.error("Invalid task category "+i),P.m8.push("/project_creation")),(0,a.jsx)(W.Z,{children:(0,a.jsx)(H,{imgSrc:"./pics/illustration.jpg",taskCategory:i})})},F=Q},91156:function(A,b,e){"use strict";e.d(b,{F$:function(){return u},LV:function(){return B},os:function(){return w},ux:function(){return z}});var L=e(34792),E=e(94043),f=e.n(E),P=e(37071),m=e(81139),_=e(63891),j=e(13868),y=e(70676),I=e(54919),d=e(6276),p=e(59124),v=localStorage.getItem("basePath"),C=new m.VK(v?{basePath:v}:void 0),u=new _.U(C),Z=new j.v(C),R=new I.W(C),N=new d.s(C),V=new p.C(C);function S(t){return JSON.parse(JSON.stringify(t))}var $=function(n,o,s){if(!s)return-1;for(var r=0;r<o.length;r++)if(n[s]==o[r][s])return r;return-1};function B(t){return t&&t.replace(/[A-Z]/g,function(n){return"_".concat(n.toLowerCase())})}function w(t){return t&&(t.toLowerCase().replace(/([-_][a-z])/g,function(n){return n.toUpperCase().replace("-","").replace("_","")}),t)}var z={classification:{name:"Image Classification",avatar:"./pics/classification.jpg",id:1},detection:{name:"Detection",avatar:"./pics/object_detection.jpg",id:2},semanticSegmentation:{name:"Semantic Segmentation",avatar:"./pics/semantic_segmentation.jpg",id:3},instanceSegmentation:{name:"Instance Segmentation",avatar:"./pics/instance_segmentation.jpg",id:4},keypointDetection:{name:"Keypoint Detection",avatar:"./pics/keypoint_detection.jpg",id:5}},x=function(n,o){var s=_toConsumableArray(n);for(var r in n)s[r].active=!1;for(var c in n)$(n[c],o,"labelId")!=-1&&(s[c].active=!0);return console.log("activa labs",s),s};function K(t){return D.apply(this,arguments)}function D(){return D=_asyncToGenerator(_regeneratorRuntime.mark(function t(n){return _regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:u.getAll().then(function(r){console.log("get all projects",S(r)),n(S(r))}).catch(function(r){serviceUtils.parseError(r,_message)});case 1:case"end":return s.stop()}},t)})),D.apply(this,arguments)}function G(t){return a.apply(this,arguments)}function a(){return a=_asyncToGenerator(_regeneratorRuntime.mark(function t(n){var o,s=arguments;return _regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:o=s.length>1&&s[1]!==void 0?s[1]:null,console.log("get project id ",n),u.get(n).then(function(l){return console.log("getProject res",l),o&&o(l),l}).catch(function(l){console.log("getProject err",l),serviceUtils.parseError(l,_message)});case 3:case"end":return c.stop()}},t)})),a.apply(this,arguments)}function J(t,n){return T.apply(this,arguments)}function T(){return T=_asyncToGenerator(_regeneratorRuntime.mark(function t(n,o){return _regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:console.log("delete pj, pjid",n),u.remove(n).then(function(c){console.log("delete project",c),K(o)}).catch(function(c){console.log(c),serviceUtils.parseError(c,_message)});case 2:case"end":return r.stop()}},t)})),T.apply(this,arguments)}function k(t){return U.apply(this,arguments)}function U(){return U=_asyncToGenerator(_regeneratorRuntime.mark(function t(n){return _regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:N.getAll().then(function(r){console.log("got tasks",r),n&&n(r)}).catch(function(r){console.log("get tasks err",r),serviceUtils.parseError(r,_message)});case 1:case"end":return s.stop()}},t)})),U.apply(this,arguments)}function H(t,n){return W.apply(this,arguments)}function W(){return W=_asyncToGenerator(_regeneratorRuntime.mark(function t(n,o){return _regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:console.log("get task id",n),N.get(n).then(function(c){console.log("got task ",c),o&&o(c)});case 2:case"end":return r.stop()}},t)})),W.apply(this,arguments)}function Q(t){return F.apply(this,arguments)}function F(){return F=_asyncToGenerator(_regeneratorRuntime.mark(function t(n){var o,s,r,c,l;return _regeneratorRuntime.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(n){g.next=2;break}return g.abrupt("return",0);case 2:return g.prev=2,g.next=5,u.getTasks(n);case 5:o=g.sent,s=0,r=_createForOfIteratorHelper(o);try{for(r.s();!(c=r.n()).done;)l=c.value,l.annotations.length!=0&&s++}catch(X){r.e(X)}finally{r.f()}return console.log("progress",Math.ceil(s/o.length*100)),g.abrupt("return",Math.ceil(s/o.length*100));case 13:return g.prev=13,g.t0=g.catch(2),console.log("get progress err",g.t0),serviceUtils.parseError(g.t0,_message),g.abrupt("return",0);case 18:case"end":return g.stop()}},t,null,[[2,13]])})),F.apply(this,arguments)}function M(t,n){console.log("getLabels projectid",t),!!t&&u.getLabels(t).then(function(o){console.log("got labels ",o),n(S(o))}).catch(function(o){serviceUtils.parseError(o,_message)})}function i(t,n,o){var s=LabelFromJSON(n);s.projectId=t,Z.create(s).then(function(){M(t,o)}).catch(function(r){serviceUtils.parseError(r,_message)})}function O(t,n){console.log("delete label",t),Z.remove(t.labelId).then(function(){_message.error("Label "+t.name+" is deleted!"),M(t.projectId,n)}).catch(function(o){serviceUtils.parseError(o,_message)})}}}]);
