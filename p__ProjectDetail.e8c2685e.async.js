(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[498],{91220:function(F,R,e){"use strict";e.d(R,{Z:function(){return _}});var j=e(64254);function _(a,g){var C;if(typeof Symbol=="undefined"||a[Symbol.iterator]==null){if(Array.isArray(a)||(C=(0,j.Z)(a))||g&&a&&typeof a.length=="number"){C&&(a=C);var Z=0,A=function(){};return{s:A,n:function(){return Z>=a.length?{done:!0}:{done:!1,value:a[Z++]}},e:function(p){throw p},f:A}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var D=!0,T=!1,h;return{s:function(){C=a[Symbol.iterator]()},n:function(){var p=C.next();return D=p.done,p},e:function(p){T=!0,h=p},f:function(){try{!D&&C.return!=null&&C.return()}finally{if(T)throw h}}}}},41435:function(F,R,e){"use strict";e.d(R,{Z:function(){return Z}});var j=e(94663),_=e(80112);function a(A){return Function.toString.call(A).indexOf("[native code]")!==-1}var g=e(18597);function C(A,D,T){return(0,g.Z)()?C=Reflect.construct:C=function(E,p,O){var S=[null];S.push.apply(S,p);var K=Function.bind.apply(E,S),M=new K;return O&&(0,_.Z)(M,O.prototype),M},C.apply(null,arguments)}function Z(A){var D=typeof Map=="function"?new Map:void 0;return Z=function(h){if(h===null||!a(h))return h;if(typeof h!="function")throw new TypeError("Super expression must either be null or a function");if(typeof D!="undefined"){if(D.has(h))return D.get(h);D.set(h,E)}function E(){return C(h,arguments,(0,j.Z)(this).constructor)}return E.prototype=Object.create(h.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),(0,_.Z)(E,h)},Z(A)}},48627:function(F){F.exports={container:"container___2RXc3"}},18398:function(F){F.exports={_ppcard:"_ppcard___1sR0b",title:"title___2fjZe",shadow:"shadow___3SaOl",main:"main___IOVJu",block_l:"block_l___1ywNh",block_r:"block_r___Sg4L7",goup:"goup___1vznA"}},44943:function(){},11428:function(F,R,e){"use strict";var j=e(67294),_=e(48627),a=e.n(_),g=e(85893),C=function(A){return(0,g.jsx)("div",{className:"".concat(a().container),style:{backgroundImage:"url(./pics/background.png)"},children:A.children})};R.Z=C},68370:function(F,R,e){"use strict";e.r(R),e.d(R,{default:function(){return i}});var j=e(34792),_=e(48086),a=e(67294),g=e(48971),C=e(57663),Z=e(71577),A=e(88983),D=e(47933),T=e(47673),h=e(24044),E=e(9715),p=e(93766),O=e(2824),S=e(89032),K=e(15746),M=e(11849),y=e(13062),v=e(71230),b=e(11700),$=e(18398),U=e.n($),w=e(37071),N=e(91156),H=e(64322),c=e(85893),k=function(d){return(0,c.jsxs)("div",{className:U()._ppcard,style:d.style,children:[(0,c.jsx)(v.Z,{className:U().titleRow,style:{display:d.title?void 0:"none"},children:(0,c.jsx)(b.Z,{className:U().title,children:d.title})}),(0,c.jsx)(v.Z,{style:{marginTop:26},children:(0,c.jsx)(K.Z,{span:24,style:(0,M.Z)({paddingLeft:30,paddingRight:30,textAlign:"center"},d.innerStyle),children:d.children})})]})},X=function(d){console.log("render ppcreater",d);var B=(0,H.Gd)(a.useState),I=w.Z.getQueryVariable("projectId");console.log("projectId",I);var L=function(n){I?B.update(I,{name:n.name,description:n.description,dataDir:n.dataDir,labelDir:n.labelDir}).then(function(){g.m8.push("/welcome")}):B.create({name:n.name,description:n.description,taskCategoryId:N.ux[d.taskCategory].id,dataDir:n.dataDir,labelDir:n.labelDir}).then(function(l){g.m8.push("/".concat((0,N.LV)(d.taskCategory),"?projectId=").concat(l.projectId))}).catch(function(){})},G=d.taskCategory?N.ux[d.taskCategory].name:null,J=p.Z.useForm(),V=(0,O.Z)(J,1),r=V[0];return(0,a.useEffect)(function(){B.getCurr(I).then(function(t){console.log("project",t);var n={name:t==null?void 0:t.name,description:t==null?void 0:t.description};r.setFieldsValue(n)})},[]),(0,c.jsxs)("div",{className:U().shadow,style:d.style,children:[(0,c.jsx)("div",{id:"left",className:U().block_l,children:(0,c.jsx)(k,{title:G,style:{height:760,padding:"1.25rem 0"},children:(0,c.jsxs)(p.Z,{form:r,layout:"horizontal",size:"large",style:{marginTop:"5.69rem"},onFinish:function(n){L(n)},children:[(0,c.jsx)(p.Z.Item,{name:"name",label:"Project Name",labelCol:{span:6},wrapperCol:{span:16},rules:[{required:!0,message:"Please input project name!"}],style:{fontSize:"1.5rem"},children:(0,c.jsx)(h.Z,{size:"large",placeholder:"Words or numbers",style:{height:"3.13rem"}})}),(0,c.jsx)(p.Z.Item,{name:"dataDir",label:"Dataset Path",labelCol:{span:6},wrapperCol:{span:16},rules:[{required:!0,message:"Please input dataset path!"}],style:{fontSize:"1.5rem"},children:(0,c.jsx)(h.Z,{size:"large",placeholder:"Dataset Path",style:{height:"3.13rem"}})}),(0,c.jsx)(p.Z.Item,{name:"description",label:"Description",labelCol:{span:6},wrapperCol:{span:16},rules:[{required:!1}],style:{fontSize:"1.5rem"},children:(0,c.jsx)(h.Z,{size:"large",placeholder:"Words or numbers",style:{height:"3.13rem"}})}),(0,c.jsx)(p.Z.Item,{name:"maxPoints",label:"MaxPoints",labelCol:{span:6},wrapperCol:{span:16},rules:[{required:d.taskCategory=="keypointDetection",message:"Please input max points!"}],style:{fontSize:"1.5rem",display:d.taskCategory=="keypointDetection"?void 0:"none"},children:(0,c.jsx)(h.Z,{size:"large",placeholder:"Numbers (Int)",style:{height:"3.13rem"}})}),(0,c.jsx)(p.Z.Item,{name:"segmentationMode",label:"AnnotationMode",labelCol:{span:6},wrapperCol:{span:16},rules:[{required:d.taskCategory=="semanticSegmentation",message:"Please select task category!"}],style:{fontSize:"1.5rem",display:d.taskCategory=="semanticSegmentation"?void 0:"none"},children:(0,c.jsx)("div",{className:U().goup,children:(0,c.jsxs)(D.ZP.Group,{defaultValue:1,size:"large",style:{height:"3.13rem"},children:[(0,c.jsx)(D.ZP,{value:1,children:"Pixel model"}),(0,c.jsx)(D.ZP,{value:2,children:"Polygon mode"})]})})}),(0,c.jsxs)(p.Z.Item,{wrapperCol:{span:16,offset:6},children:[(0,c.jsx)(Z.Z,{htmlType:"submit",type:"primary",style:{height:"2.5rem",width:"48%"},block:!0,children:I?"Update":"Create"}),"\xA0\xA0",(0,c.jsx)(Z.Z,{htmlType:"button",style:{height:"2.5rem",width:"48%"},block:!0,onClick:function(){g.m8.push("/welcome")},children:"Cancel"})]})]})})}),(0,c.jsx)("div",{id:"right",className:U().block_r,children:(0,c.jsx)(k,{style:{height:"43.63rem",padding:"0.5rem 0"},children:(0,c.jsx)("img",{src:d.imgSrc,style:{height:"43.63rem",width:"60rem"}})})})]})},o=X,f=e(11428),P=function(){var d=(0,N.os)(w.Z.getQueryVariable("taskCategory"));return d||(_.default.error("Task Category not present in url"),g.m8.push("/project_creation")),d in N.ux||(_.default.error("Invalid task category "+d),g.m8.push("/project_creation")),(0,c.jsx)(f.Z,{children:(0,c.jsx)(o,{imgSrc:"./pics/illustration.jpg",taskCategory:d})})},i=P},91156:function(F,R,e){"use strict";e.d(R,{F$:function(){return S},LV:function(){return U},os:function(){return w},ux:function(){return N}});var j=e(34792),_=e(94043),a=e.n(_),g=e(37071),C=e(81139),Z=e(63891),A=e(13868),D=e(70676),T=e(54919),h=e(6276),E=e(59124),p=localStorage.getItem("basePath"),O=new C.VK(p?{basePath:p}:void 0),S=new Z.U(O),K=new A.v(O),M=new T.W(O),y=new h.s(O),v=new E.C(O);function b(r){return JSON.parse(JSON.stringify(r))}var $=function(t,n,l){if(!l)return-1;for(var s=0;s<n.length;s++)if(t[l]==n[s][l])return s;return-1};function U(r){return r&&r.replace(/[A-Z]/g,function(t){return"_".concat(t.toLowerCase())})}function w(r){return r&&(r.toLowerCase().replace(/([-_][a-z])/g,function(t){return t.toUpperCase().replace("-","").replace("_","")}),r)}var N={classification:{name:"Image Classification",avatar:"./pics/classification.jpg",id:1},detection:{name:"Detection",avatar:"./pics/object_detection.jpg",id:2},semanticSegmentation:{name:"Semantic Segmentation",avatar:"./pics/semantic_segmentation.jpg",id:3},instanceSegmentation:{name:"Instance Segmentation",avatar:"./pics/instance_segmentation.jpg",id:4},keypointDetection:{name:"Keypoint Detection",avatar:"./pics/keypoint_detection.jpg",id:5}},H=function(t,n){var l=_toConsumableArray(t);for(var s in t)l[s].active=!1;for(var m in t)$(t[m],n,"labelId")!=-1&&(l[m].active=!0);return console.log("activa labs",l),l};function c(r){return k.apply(this,arguments)}function k(){return k=_asyncToGenerator(_regeneratorRuntime.mark(function r(t){return _regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:S.getAll().then(function(s){console.log("get all projects",b(s)),t(b(s))}).catch(function(s){serviceUtils.parseError(s,_message)});case 1:case"end":return l.stop()}},r)})),k.apply(this,arguments)}function X(r){return o.apply(this,arguments)}function o(){return o=_asyncToGenerator(_regeneratorRuntime.mark(function r(t){var n,l=arguments;return _regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:n=l.length>1&&l[1]!==void 0?l[1]:null,console.log("get project id ",t),S.get(t).then(function(W){return console.log("getProject res",W),n&&n(W),W}).catch(function(W){console.log("getProject err",W),serviceUtils.parseError(W,_message)});case 3:case"end":return m.stop()}},r)})),o.apply(this,arguments)}function f(r,t){return P.apply(this,arguments)}function P(){return P=_asyncToGenerator(_regeneratorRuntime.mark(function r(t,n){return _regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:console.log("delete pj, pjid",t),S.remove(t).then(function(m){console.log("delete project",m),c(n)}).catch(function(m){console.log(m),serviceUtils.parseError(m,_message)});case 2:case"end":return s.stop()}},r)})),P.apply(this,arguments)}function i(r){return u.apply(this,arguments)}function u(){return u=_asyncToGenerator(_regeneratorRuntime.mark(function r(t){return _regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:y.getAll().then(function(s){console.log("got tasks",s),t&&t(s)}).catch(function(s){console.log("get tasks err",s),serviceUtils.parseError(s,_message)});case 1:case"end":return l.stop()}},r)})),u.apply(this,arguments)}function d(r,t){return B.apply(this,arguments)}function B(){return B=_asyncToGenerator(_regeneratorRuntime.mark(function r(t,n){return _regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:console.log("get task id",t),y.get(t).then(function(m){console.log("got task ",m),n&&n(m)});case 2:case"end":return s.stop()}},r)})),B.apply(this,arguments)}function I(r){return L.apply(this,arguments)}function L(){return L=_asyncToGenerator(_regeneratorRuntime.mark(function r(t){var n,l,s,m,W;return _regeneratorRuntime.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(t){x.next=2;break}return x.abrupt("return",0);case 2:return x.prev=2,x.next=5,S.getTasks(t);case 5:n=x.sent,l=0,s=_createForOfIteratorHelper(n);try{for(s.s();!(m=s.n()).done;)W=m.value,W.annotations.length!=0&&l++}catch(Q){s.e(Q)}finally{s.f()}return console.log("progress",Math.ceil(l/n.length*100)),x.abrupt("return",Math.ceil(l/n.length*100));case 13:return x.prev=13,x.t0=x.catch(2),console.log("get progress err",x.t0),serviceUtils.parseError(x.t0,_message),x.abrupt("return",0);case 18:case"end":return x.stop()}},r,null,[[2,13]])})),L.apply(this,arguments)}function G(r,t){console.log("getLabels projectid",r),!!r&&S.getLabels(r).then(function(n){console.log("got labels ",n),t(b(n))}).catch(function(n){serviceUtils.parseError(n,_message)})}function J(r,t,n){var l=LabelFromJSON(t);l.projectId=r,K.create(l).then(function(){G(r,n)}).catch(function(s){serviceUtils.parseError(s,_message)})}function V(r,t){console.log("delete label",r),K.remove(r.labelId).then(function(){_message.error("Label "+r.name+" is deleted!"),G(r.projectId,t)}).catch(function(n){serviceUtils.parseError(n,_message)})}},5467:function(F,R,e){"use strict";e.d(R,{Z:function(){return j}});function j(_){return Object.keys(_).reduce(function(a,g){return(g.substr(0,5)==="data-"||g.substr(0,5)==="aria-"||g==="role")&&g.substr(0,7)!=="data-__"&&(a[g]=_[g]),a},{})}},47933:function(F,R,e){"use strict";e.d(R,{ZP:function(){return X}});var j=e(96156),_=e(22122),a=e(67294),g=e(50132),C=e(94184),Z=e.n(C),A=e(42550),D=e(65632),T=a.createContext(null),h=T.Provider,E=T,p=e(21687),O=function(o,f){var P={};for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&f.indexOf(i)<0&&(P[i]=o[i]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,i=Object.getOwnPropertySymbols(o);u<i.length;u++)f.indexOf(i[u])<0&&Object.prototype.propertyIsEnumerable.call(o,i[u])&&(P[i[u]]=o[i[u]]);return P},S=function(f,P){var i,u=a.useContext(E),d=a.useContext(D.E_),B=d.getPrefixCls,I=d.direction,L=a.useRef(),G=(0,A.sQ)(P,L);a.useEffect(function(){(0,p.Z)(!("optionType"in f),"Radio","`optionType` is only support in Radio.Group.")},[]);var J=function(x){var Q,Y;(Q=f.onChange)===null||Q===void 0||Q.call(f,x),(Y=u==null?void 0:u.onChange)===null||Y===void 0||Y.call(u,x)},V=f.prefixCls,r=f.className,t=f.children,n=f.style,l=O(f,["prefixCls","className","children","style"]),s=B("radio",V),m=(0,_.Z)({},l);u&&(m.name=u.name,m.onChange=J,m.checked=f.value===u.value,m.disabled=f.disabled||u.disabled);var W=Z()("".concat(s,"-wrapper"),(i={},(0,j.Z)(i,"".concat(s,"-wrapper-checked"),m.checked),(0,j.Z)(i,"".concat(s,"-wrapper-disabled"),m.disabled),(0,j.Z)(i,"".concat(s,"-wrapper-rtl"),I==="rtl"),i),r);return a.createElement("label",{className:W,style:n,onMouseEnter:f.onMouseEnter,onMouseLeave:f.onMouseLeave},a.createElement(g.Z,(0,_.Z)({},m,{type:"radio",prefixCls:s,ref:G})),t!==void 0?a.createElement("span",null,t):null)},K=a.forwardRef(S);K.displayName="Radio";var M=K,y=e(28481),v=e(21770),b=e(97647),$=e(5467),U=a.forwardRef(function(o,f){var P=a.useContext(D.E_),i=P.getPrefixCls,u=P.direction,d=a.useContext(b.Z),B=(0,v.Z)(o.defaultValue,{value:o.value}),I=(0,y.Z)(B,2),L=I[0],G=I[1],J=function(t){var n=L,l=t.target.value;"value"in o||G(l);var s=o.onChange;s&&l!==n&&s(t)},V=function(){var t,n=o.prefixCls,l=o.className,s=l===void 0?"":l,m=o.options,W=o.optionType,q=o.buttonStyle,x=q===void 0?"outline":q,Q=o.disabled,Y=o.children,oe=o.size,se=o.style,le=o.id,ie=o.onMouseEnter,ce=o.onMouseLeave,te=i("radio",n),ee="".concat(te,"-group"),ne=Y;if(m&&m.length>0){var re=W==="button"?"".concat(te,"-button"):te;ne=m.map(function(z){return typeof z=="string"||typeof z=="number"?a.createElement(M,{key:z.toString(),prefixCls:re,disabled:Q,value:z,checked:L===z},z):a.createElement(M,{key:"radio-group-value-options-".concat(z.value),prefixCls:re,disabled:z.disabled||Q,value:z.value,checked:L===z.value,style:z.style},z.label)})}var ae=oe||d,ue=Z()(ee,"".concat(ee,"-").concat(x),(t={},(0,j.Z)(t,"".concat(ee,"-").concat(ae),ae),(0,j.Z)(t,"".concat(ee,"-rtl"),u==="rtl"),t),s);return a.createElement("div",(0,_.Z)({},(0,$.Z)(o),{className:ue,style:se,onMouseEnter:ie,onMouseLeave:ce,id:le,ref:f}),ne)};return a.createElement(h,{value:{onChange:J,value:L,disabled:o.disabled,name:o.name}},V())}),w=a.memo(U),N=function(o,f){var P={};for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&f.indexOf(i)<0&&(P[i]=o[i]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,i=Object.getOwnPropertySymbols(o);u<i.length;u++)f.indexOf(i[u])<0&&Object.prototype.propertyIsEnumerable.call(o,i[u])&&(P[i[u]]=o[i[u]]);return P},H=function(f,P){var i=a.useContext(E),u=a.useContext(D.E_),d=u.getPrefixCls,B=f.prefixCls,I=N(f,["prefixCls"]),L=d("radio-button",B);return i&&(I.checked=f.value===i.value,I.disabled=f.disabled||i.disabled),a.createElement(M,(0,_.Z)({prefixCls:L},I,{type:"radio",ref:P}))},c=a.forwardRef(H),k=M;k.Button=c,k.Group=w;var X=k},88983:function(F,R,e){"use strict";var j=e(38663),_=e.n(j),a=e(44943),g=e.n(a)},50132:function(F,R,e){"use strict";var j=e(22122),_=e(96156),a=e(81253),g=e(28991),C=e(6610),Z=e(5991),A=e(10379),D=e(81907),T=e(67294),h=e(94184),E=e.n(h),p=function(O){(0,A.Z)(K,O);var S=(0,D.Z)(K);function K(M){var y;(0,C.Z)(this,K),y=S.call(this,M),y.handleChange=function(b){var $=y.props,U=$.disabled,w=$.onChange;U||("checked"in y.props||y.setState({checked:b.target.checked}),w&&w({target:(0,g.Z)((0,g.Z)({},y.props),{},{checked:b.target.checked}),stopPropagation:function(){b.stopPropagation()},preventDefault:function(){b.preventDefault()},nativeEvent:b.nativeEvent}))},y.saveInput=function(b){y.input=b};var v="checked"in M?M.checked:M.defaultChecked;return y.state={checked:v},y}return(0,Z.Z)(K,[{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"render",value:function(){var y,v=this.props,b=v.prefixCls,$=v.className,U=v.style,w=v.name,N=v.id,H=v.type,c=v.disabled,k=v.readOnly,X=v.tabIndex,o=v.onClick,f=v.onFocus,P=v.onBlur,i=v.onKeyDown,u=v.onKeyPress,d=v.onKeyUp,B=v.autoFocus,I=v.value,L=v.required,G=(0,a.Z)(v,["prefixCls","className","style","name","id","type","disabled","readOnly","tabIndex","onClick","onFocus","onBlur","onKeyDown","onKeyPress","onKeyUp","autoFocus","value","required"]),J=Object.keys(G).reduce(function(t,n){return(n.substr(0,5)==="aria-"||n.substr(0,5)==="data-"||n==="role")&&(t[n]=G[n]),t},{}),V=this.state.checked,r=E()(b,$,(y={},(0,_.Z)(y,"".concat(b,"-checked"),V),(0,_.Z)(y,"".concat(b,"-disabled"),c),y));return T.createElement("span",{className:r,style:U},T.createElement("input",(0,j.Z)({name:w,id:N,type:H,required:L,readOnly:k,disabled:c,tabIndex:X,className:"".concat(b,"-input"),checked:!!V,onClick:o,onFocus:f,onBlur:P,onKeyUp:d,onKeyDown:i,onKeyPress:u,onChange:this.handleChange,autoFocus:B,ref:this.saveInput,value:I},J)),T.createElement("span",{className:"".concat(b,"-inner")}))}}],[{key:"getDerivedStateFromProps",value:function(y,v){return"checked"in y?(0,g.Z)((0,g.Z)({},v),{},{checked:y.checked}):null}}]),K}(T.Component);p.defaultProps={prefixCls:"rc-checkbox",className:"",style:{},type:"checkbox",defaultChecked:!1,onFocus:function(){},onBlur:function(){},onChange:function(){},onKeyDown:function(){},onKeyPress:function(){},onKeyUp:function(){}},R.Z=p}}]);
