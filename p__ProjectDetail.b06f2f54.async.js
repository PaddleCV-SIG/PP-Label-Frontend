(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[498],{91220:function(k,K,n){"use strict";n.d(K,{Z:function(){return F}});var N=n(64254);function F(p,W){var u;if(typeof Symbol=="undefined"||p[Symbol.iterator]==null){if(Array.isArray(p)||(u=(0,N.Z)(p))||W&&p&&typeof p.length=="number"){u&&(p=u);var P=0,R=function(){};return{s:R,n:function(){return P>=p.length?{done:!0}:{done:!1,value:p[P++]}},e:function(Z){throw Z},f:R}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,U=!1,y;return{s:function(){u=p[Symbol.iterator]()},n:function(){var Z=u.next();return o=Z.done,Z},e:function(Z){U=!0,y=Z},f:function(){try{!o&&u.return!=null&&u.return()}finally{if(U)throw y}}}}},41435:function(k,K,n){"use strict";n.d(K,{Z:function(){return P}});var N=n(94663),F=n(80112);function p(R){return Function.toString.call(R).indexOf("[native code]")!==-1}var W=n(18597);function u(R,o,U){return(0,W.Z)()?u=Reflect.construct:u=function(C,Z,L){var j=[null];j.push.apply(j,Z);var $=Function.bind.apply(C,j),V=new $;return L&&(0,F.Z)(V,L.prototype),V},u.apply(null,arguments)}function P(R){var o=typeof Map=="function"?new Map:void 0;return P=function(y){if(y===null||!p(y))return y;if(typeof y!="function")throw new TypeError("Super expression must either be null or a function");if(typeof o!="undefined"){if(o.has(y))return o.get(y);o.set(y,C)}function C(){return u(y,arguments,(0,N.Z)(this).constructor)}return C.prototype=Object.create(y.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),(0,F.Z)(C,y)},P(R)}},48627:function(k){k.exports={container:"container___2RXc3"}},18398:function(k){k.exports={_ppcard:"_ppcard___1sR0b",title:"title___2fjZe",shadow:"shadow___3SaOl",main:"main___IOVJu",block_l:"block_l___1ywNh",block_r:"block_r___Sg4L7",goup:"goup___1vznA"}},11428:function(k,K,n){"use strict";var N=n(67294),F=n(48627),p=n.n(F),W=n(85893),u=function(R){return(0,W.jsx)("div",{className:"".concat(p().container),style:{backgroundImage:"url(./pics/background.png)"},children:R.children})};K.Z=u},68370:function(k,K,n){"use strict";n.r(K),n.d(K,{default:function(){return m}});var N=n(34792),F=n(48086),p=n(67294),W=n(48971),u=n(57663),P=n(71577),R=n(88983),o=n(47933),U=n(36877),y=n(96607),C=n(47673),Z=n(24044),L=n(9715),j=n(93766),$=n(2824),V=n(91220),J=n(89032),X=n(15746),z=n(11849),Y=n(13062),G=n(71230),H=n(11700),Q=n(18398),D=n.n(Q),v=n(37071),d=n(91156),b=n(64322),s=n(85893),S=[{value:"/app",label:"/app",children:[{value:"data",label:"data",children:[{value:"pplabel",label:"pplabel",children:[{value:"clas_single",label:"clas_single",children:[{value:"PetImages",label:"PetImages"}]}]}]}]}],E=function(i){return(0,s.jsxs)("div",{className:D()._ppcard,style:i.style,children:[(0,s.jsx)(G.Z,{className:D().titleRow,style:{display:i.title?void 0:"none"},children:(0,s.jsx)(H.Z,{className:D().title,children:i.title})}),(0,s.jsx)(G.Z,{style:{marginTop:26},children:(0,s.jsx)(X.Z,{span:24,style:(0,z.Z)({paddingLeft:30,paddingRight:30,textAlign:"center"},i.innerStyle),children:i.children})})]})};function O(_){var i="",f=(0,V.Z)(_),e;try{for(f.s();!(e=f.n()).done;){var a=e.value;a.endsWith("/")?i+=a:i+=a+"/"}}catch(r){f.e(r)}finally{f.f()}return i}var A=function(i){console.log("render ppcreater",i);var f=(0,b.Gd)(p.useState),e=v.Z.getQueryVariable("projectId");console.log("projectId",e);var a=function(M){e?f.update(e,{name:M.name,description:M.description,dataDir:O(M.dataDir),labelDir:M.labelDir}).then(function(){W.m8.push("/welcome")}):f.create({name:M.name,description:M.description,taskCategoryId:d.ux[i.taskCategory].id,dataDir:O(M.dataDir),labelDir:M.labelDir}).then(function(I){W.m8.push("/".concat((0,d.LV)(i.taskCategory),"?projectId=").concat(I.projectId))}).catch(function(){})},r=i.taskCategory?d.ux[i.taskCategory].name:null,l=j.Z.useForm(),t=(0,$.Z)(l,1),c=t[0];return(0,p.useEffect)(function(){f.getCurr(e).then(function(h){console.log("project",h);var M={name:h==null?void 0:h.name,description:h==null?void 0:h.description};c.setFieldsValue(M)})},[]),(0,s.jsxs)("div",{className:D().shadow,style:i.style,children:[(0,s.jsx)("div",{id:"left",className:D().block_l,children:(0,s.jsx)(E,{title:r,style:{height:760,padding:"1.25rem 0"},children:(0,s.jsxs)(j.Z,{form:c,layout:"horizontal",size:"large",style:{marginTop:"5.69rem"},onFinish:function(M){a(M)},children:[(0,s.jsx)(j.Z.Item,{name:"name",label:"Project Name",labelCol:{span:6},wrapperCol:{span:16},rules:[{required:!0,message:"Please input project name!"}],style:{fontSize:"1.5rem"},children:(0,s.jsx)(Z.Z,{size:"large",placeholder:"Words or numbers",style:{height:"3.13rem"}})}),(0,s.jsx)(j.Z.Item,{name:"dataDir",label:"Dataset Path",labelCol:{span:6},wrapperCol:{span:16},rules:[{required:!0,message:"Please input dataset path!"}],style:{fontSize:"1.5rem"},children:(0,s.jsx)(y.Z,{options:S,onChange:function(M){console.log(M)},changeOnSelect:!0})}),(0,s.jsx)(j.Z.Item,{name:"description",label:"Description",labelCol:{span:6},wrapperCol:{span:16},rules:[{required:!1}],style:{fontSize:"1.5rem"},children:(0,s.jsx)(Z.Z,{size:"large",placeholder:"Words or numbers",style:{height:"3.13rem"}})}),(0,s.jsx)(j.Z.Item,{name:"maxPoints",label:"MaxPoints",labelCol:{span:6},wrapperCol:{span:16},rules:[{required:i.taskCategory=="keypointDetection",message:"Please input max points!"}],style:{fontSize:"1.5rem",display:i.taskCategory=="keypointDetection"?void 0:"none"},children:(0,s.jsx)(Z.Z,{size:"large",placeholder:"Numbers (Int)",style:{height:"3.13rem"}})}),(0,s.jsx)(j.Z.Item,{name:"segmentationMode",label:"AnnotationMode",labelCol:{span:6},wrapperCol:{span:16},rules:[{required:i.taskCategory=="semanticSegmentation",message:"Please select task category!"}],style:{fontSize:"1.5rem",display:i.taskCategory=="semanticSegmentation"?void 0:"none"},children:(0,s.jsx)("div",{className:D().goup,children:(0,s.jsxs)(o.ZP.Group,{defaultValue:1,size:"large",style:{height:"3.13rem"},children:[(0,s.jsx)(o.ZP,{value:1,children:"Pixel model"}),(0,s.jsx)(o.ZP,{value:2,children:"Polygon mode"})]})})}),(0,s.jsxs)(j.Z.Item,{wrapperCol:{span:16,offset:6},children:[(0,s.jsx)(P.Z,{htmlType:"submit",type:"primary",style:{height:"2.5rem",width:"48%"},block:!0,children:e?"Update":"Create"}),"\xA0\xA0",(0,s.jsx)(P.Z,{htmlType:"button",style:{height:"2.5rem",width:"48%"},block:!0,onClick:function(){W.m8.push("/welcome")},children:"Cancel"})]})]})})}),(0,s.jsx)("div",{id:"right",className:D().block_r,children:(0,s.jsx)(E,{style:{height:"43.63rem",padding:"0.5rem 0"},children:(0,s.jsx)("img",{src:i.imgSrc,style:{height:"43.63rem",width:"60rem"}})})})]})},T=A,g=n(11428),B=function(){var i=(0,d.os)(v.Z.getQueryVariable("taskCategory"));return i||(F.default.error("Task Category not present in url"),W.m8.push("/project_creation")),i in d.ux||(F.default.error("Invalid task category "+i),W.m8.push("/project_creation")),(0,s.jsx)(g.Z,{children:(0,s.jsx)(T,{imgSrc:"./pics/illustration.jpg",taskCategory:i})})},m=B},91156:function(k,K,n){"use strict";n.d(K,{F$:function(){return j},LV:function(){return G},os:function(){return H},ux:function(){return Q}});var N=n(34792),F=n(94043),p=n.n(F),W=n(37071),u=n(81139),P=n(63891),R=n(13868),o=n(70676),U=n(54919),y=n(6276),C=n(59124),Z=localStorage.getItem("basePath"),L=new u.VK(Z?{basePath:Z}:void 0),j=new P.U(L),$=new R.v(L),V=new U.W(L),J=new y.s(L),X=new C.C(L);function z(e){return JSON.parse(JSON.stringify(e))}var Y=function(a,r,l){if(!l)return-1;for(var t=0;t<r.length;t++)if(a[l]==r[t][l])return t;return-1};function G(e){return e&&e.replace(/[A-Z]/g,function(a){return"_".concat(a.toLowerCase())})}function H(e){return e&&(e.toLowerCase().replace(/([-_][a-z])/g,function(a){return a.toUpperCase().replace("-","").replace("_","")}),e)}var Q={classification:{name:"Image Classification",avatar:"./pics/classification.jpg",id:1},detection:{name:"Detection",avatar:"./pics/object_detection.jpg",id:2},semanticSegmentation:{name:"Semantic Segmentation",avatar:"./pics/semantic_segmentation.jpg",id:3},instanceSegmentation:{name:"Instance Segmentation",avatar:"./pics/instance_segmentation.jpg",id:4},keypointDetection:{name:"Keypoint Detection",avatar:"./pics/keypoint_detection.jpg",id:5}},D=function(a,r){var l=_toConsumableArray(a);for(var t in a)l[t].active=!1;for(var c in a)Y(a[c],r,"labelId")!=-1&&(l[c].active=!0);return console.log("activa labs",l),l};function v(e){return d.apply(this,arguments)}function d(){return d=_asyncToGenerator(_regeneratorRuntime.mark(function e(a){return _regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:j.getAll().then(function(t){console.log("get all projects",z(t)),a(z(t))}).catch(function(t){serviceUtils.parseError(t,_message)});case 1:case"end":return l.stop()}},e)})),d.apply(this,arguments)}function b(e){return s.apply(this,arguments)}function s(){return s=_asyncToGenerator(_regeneratorRuntime.mark(function e(a){var r,l=arguments;return _regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:r=l.length>1&&l[1]!==void 0?l[1]:null,console.log("get project id ",a),j.get(a).then(function(h){return console.log("getProject res",h),r&&r(h),h}).catch(function(h){console.log("getProject err",h),serviceUtils.parseError(h,_message)});case 3:case"end":return c.stop()}},e)})),s.apply(this,arguments)}function S(e,a){return E.apply(this,arguments)}function E(){return E=_asyncToGenerator(_regeneratorRuntime.mark(function e(a,r){return _regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log("delete pj, pjid",a),j.remove(a).then(function(c){console.log("delete project",c),v(r)}).catch(function(c){console.log(c),serviceUtils.parseError(c,_message)});case 2:case"end":return t.stop()}},e)})),E.apply(this,arguments)}function O(e){return A.apply(this,arguments)}function A(){return A=_asyncToGenerator(_regeneratorRuntime.mark(function e(a){return _regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:J.getAll().then(function(t){console.log("got tasks",t),a&&a(t)}).catch(function(t){console.log("get tasks err",t),serviceUtils.parseError(t,_message)});case 1:case"end":return l.stop()}},e)})),A.apply(this,arguments)}function T(e,a){return g.apply(this,arguments)}function g(){return g=_asyncToGenerator(_regeneratorRuntime.mark(function e(a,r){return _regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log("get task id",a),J.get(a).then(function(c){console.log("got task ",c),r&&r(c)});case 2:case"end":return t.stop()}},e)})),g.apply(this,arguments)}function B(e){return m.apply(this,arguments)}function m(){return m=_asyncToGenerator(_regeneratorRuntime.mark(function e(a){var r,l,t,c,h;return _regeneratorRuntime.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(a){I.next=2;break}return I.abrupt("return",0);case 2:return I.prev=2,I.next=5,j.getTasks(a);case 5:r=I.sent,l=0,t=_createForOfIteratorHelper(r);try{for(t.s();!(c=t.n()).done;)h=c.value,h.annotations.length!=0&&l++}catch(w){t.e(w)}finally{t.f()}return console.log("progress",Math.ceil(l/r.length*100)),I.abrupt("return",Math.ceil(l/r.length*100));case 13:return I.prev=13,I.t0=I.catch(2),console.log("get progress err",I.t0),serviceUtils.parseError(I.t0,_message),I.abrupt("return",0);case 18:case"end":return I.stop()}},e,null,[[2,13]])})),m.apply(this,arguments)}function _(e,a){console.log("getLabels projectid",e),!!e&&j.getLabels(e).then(function(r){console.log("got labels ",r),a(z(r))}).catch(function(r){serviceUtils.parseError(r,_message)})}function i(e,a,r){var l=LabelFromJSON(a);l.projectId=e,$.create(l).then(function(){_(e,r)}).catch(function(t){serviceUtils.parseError(t,_message)})}function f(e,a){console.log("delete label",e),$.remove(e.labelId).then(function(){_message.error("Label "+e.name+" is deleted!"),_(e.projectId,a)}).catch(function(r){serviceUtils.parseError(r,_message)})}},64322:function(k,K,n){"use strict";n.d(K,{gu:function(){return $},_D:function(){return X},Gd:function(){return z},jL:function(){return Y},iA:function(){return G},CV:function(){return H},A5:function(){return Q}});var N=n(86582),F=n(91220),p=n(3182),W=n(34792),u=n(48086),P=n(2824),R=n(94043),o=n.n(R),U=n(37071),y=n(81139),C=localStorage.getItem("basePath"),Z=new y.VK(C?{basePath:C}:void 0),L=new y.U(Z),j=new y.sD(Z),$=function(v){return JSON.parse(JSON.stringify(v))};function V(D){return D&&(D.toLowerCase().replace(/([-_][a-z])/g,function(v){return v.toUpperCase().replace("-","").replace("_","")}),D)}var J=function(v,d,b){if(!!b){for(var s=0;s<d.length;s++)if(v[b]==d[s][b])return s}},X=function(v){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[.1,3],b=v(1),s=(0,P.Z)(b,2),S=s[0],E=s[1],O=function(T){var g=S;g+=T,g<d[0]&&(g=d[0],u.default.error("Smallest scale is "+d[0])),g>d[1]&&(g=d[1],u.default.error("Largest scale is "+d[1])),E(g)};return{change:O,get scale(){return S}}},z=function(v){var d=v([]),b=(0,P.Z)(d,2),s=b[0],S=b[1],E=v(),O=(0,P.Z)(E,2),A=O[0],T=O[1],g=function(){var f=(0,p.Z)(o().mark(function e(){var a;return o().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,L.getAll();case 3:return a=l.sent,S(a),l.abrupt("return",a);case 8:l.prev=8,l.t0=l.catch(0),console.log("project getAll err",l.t0),U.Z.parseError(l.t0,u.default);case 12:case"end":return l.stop()}},e,null,[[0,8]])}));return function(){return f.apply(this,arguments)}}(),B=function(){var f=(0,p.Z)(o().mark(function e(a){var r;return o().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a!=null){t.next=2;break}return t.abrupt("return",void 0);case 2:if(!(s.length>1)){t.next=5;break}return u.default.error("Currently have multiple projects stored, use turnTo instead"),t.abrupt("return");case 5:return t.prev=5,t.next=8,L.get(a);case 8:return r=t.sent,S([r]),T(0),t.abrupt("return",r);case 14:t.prev=14,t.t0=t.catch(5),console.log("prject getcurr err",t.t0),U.Z.parseError(t.t0,u.default);case 18:case"end":return t.stop()}},e,null,[[5,14]])}));return function(a){return f.apply(this,arguments)}}(),m=function(){var f=(0,p.Z)(o().mark(function e(a){return o().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:typeof a=="number"?L.remove(a):L.remove(a.projectId),g();case 2:case"end":return l.stop()}},e)}));return function(a){return f.apply(this,arguments)}}(),_=function(){var f=(0,p.Z)(o().mark(function e(a){var r;return o().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L.create(a);case 3:return r=t.sent,console.log(r),t.abrupt("return",r);case 8:t.prev=8,t.t0=t.catch(0),console.log("project create err",t.t0),U.Z.parseError(t.t0,u.default);case 12:case"end":return t.stop()}},e,null,[[0,8]])}));return function(a){return f.apply(this,arguments)}}(),i=function(){var f=(0,p.Z)(o().mark(function e(a,r){return o().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:L.update(a,r).then(function(c){console.log("project update res",c)}).catch(function(c){console.log("project update err ",c),U.Z.parseError(c,u.default)});case 1:case"end":return t.stop()}},e)}));return function(a,r){return f.apply(this,arguments)}}();return{all:s,getAll:g,getCurr:B,remove:m,create:_,update:i,get curr(){if(A!=null)return s[A]}}},Y=function(v,d){var b=d.pageOnSelect,s=v([]),S=(0,P.Z)(s,2),E=S[0],O=S[1],A=v(),T=(0,P.Z)(A,2),g=T[0],B=T[1],m=function(){var a=(0,p.Z)(o().mark(function r(l){var t,c,h,M;return o().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.prev=0,w.next=3,L.getLabels(l);case 3:t=w.sent,c=(0,F.Z)(t);try{for(c.s();!(h=c.n()).done;)M=h.value,M.active=!1}catch(x){c.e(x)}finally{c.f()}return O(t),w.abrupt("return",t);case 10:w.prev=10,w.t0=w.catch(0),console.log("label getall err ",w.t0),U.Z.parseError(w.t0,u.default);case 14:case"end":return w.stop()}},r,null,[[0,10]])}));return function(l){return a.apply(this,arguments)}}(),_=function(r){B(idx,J(lable,E,"labelId"));var l=E.filter(function(t){return t.labelId==r.labelId})[0];l.active=!l.active,b(l),O((0,N.Z)(E))},i=function(){},f=function(){},e=function(){};return{all:E,getAll:m,onSelect:_,onAdd:i,onDelete:f,onModify:e,get curr(){if(g!=null)return E[g]}}},G=function(v){var d=v([]),b=(0,P.Z)(d,2),s=b[0],S=b[1],E=v(0),O=(0,P.Z)(E,2),A=O[0],T=O[1],g=function(_){if(console.log("turnto",s,_),s.length!=0){if(_==-1){u.default.error("This is the first image. No previous image.");return}if(_==s.length){u.default.error("This is the final image. No next image.");return}T(_)}},B=function(){var m=(0,p.Z)(o().mark(function _(i,f){var e;return o().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,L.getTasks(i);case 3:return e=r.sent,S(e),f!=null&&g(f),r.abrupt("return",e);case 9:r.prev=9,r.t0=r.catch(0),console.log("task getall err ",r.t0),U.Z.parseError(r.t0,u.default);case 13:case"end":return r.stop()}},_,null,[[0,9]])}));return function(i,f){return m.apply(this,arguments)}}();return{currIdx:A,all:s,turnTo:g,getAll:B,get curr(){if(A!=null)return s[A]}}},H=function(v){var d=v([]),b=(0,P.Z)(d,2),s=b[0],S=b[1],E=function(){var O=(0,p.Z)(o().mark(function A(T){var g;return o().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.prev=0,g=dataApi.getAnnotations(T),S(g),m.abrupt("return",g);case 6:m.prev=6,m.t0=m.catch(0),console.log("ann getAll err",m.t0),U.Z.parseError(m.t0,u.default);case 10:case"end":return m.stop()}},A,null,[[0,6]])}));return function(T){return O.apply(this,arguments)}}();return{all:s,getAll:E}},Q=function(v){var d=v(),b=(0,P.Z)(d,2),s=b[0],S=b[1],E=v([]),O=(0,P.Z)(E,2),A=O[0],T=O[1],g=function(){var m=(0,p.Z)(o().mark(function _(i){return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:S(i);case 1:case"end":return e.stop()}},_)}));return function(i){return m.apply(this,arguments)}}(),B=function(){var m=(0,p.Z)(o().mark(function _(i,f){var e;return o().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,j.getDatas(i);case 3:return e=r.sent,f!=null&&g(f),T(e),r.abrupt("return",e);case 9:r.prev=9,r.t0=r.catch(0),console.log("data getall err ",r.t0),U.Z.parseError(r.t0,u.default);case 13:case"end":return r.stop()}},_,null,[[0,9]])}));return function(i,f){return m.apply(this,arguments)}}();return{all:A,getAll:B,turnTo:g,get curr(){if(A.length!=0)return A[s]}}}}}]);
