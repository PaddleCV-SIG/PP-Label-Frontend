(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[672],{41435:function(s,u,e){"use strict";e.d(u,{Z:function(){return _}});var B=e(94663),m=e(80112);function L(g){return Function.toString.call(g).indexOf("[native code]")!==-1}var M=e(18597);function r(g,d,h){return(0,M.Z)()?r=Reflect.construct:r=function(x,j,t){var I=[null];I.push.apply(I,j);var a=Function.bind.apply(x,I),f=new a;return t&&(0,m.Z)(f,t.prototype),f},r.apply(null,arguments)}function _(g){var d=typeof Map=="function"?new Map:void 0;return _=function(E){if(E===null||!L(E))return E;if(typeof E!="function")throw new TypeError("Super expression must either be null or a function");if(typeof d!="undefined"){if(d.has(E))return d.get(E);d.set(E,x)}function x(){return r(E,arguments,(0,B.Z)(this).constructor)}return x.prototype=Object.create(E.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),(0,m.Z)(x,E)},_(g)}},52822:function(s){s.exports={roundBall:"roundBall___1pqu1",popover:"popover___1-PR6"}},6277:function(s){s.exports={modal:"modal___26yNn"}},45092:function(s){s.exports={modal:"modal___1H_FQ"}},5882:function(s){s.exports={listItem:"listItem___vtDXn",eye:"eye___AsLBS",roundBall:"roundBall___1J_R3",popover:"popover___1x-2R",delete:"delete___WHPf2",listItemActive:"listItemActive___3FRb7"}},56131:function(s){s.exports={labelList:"labelList___jvD05",listHeader:"listHeader___UM5UF",eye:"eye___II3Po",roundBall:"roundBall___j752J"}},78677:function(s){s.exports={container:"container___G0FNe"}},83930:function(s){s.exports={stage:"stage___3H5QL"}},80961:function(s){s.exports={leftToolbar:"leftToolbar___1xi4t",rightToolbar:"rightToolbar___3dNSB"}},82499:function(s){s.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1SHWL",toolBarButtonContainer:"toolBarButtonContainer___1jKUz",toolBarButton:"toolBarButton___3Ouq1",buttonText:"buttonText___10ls7",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AA28"}},73199:function(){},63097:function(s,u,e){"use strict";var B=e(20136),m=e(55241),L=e(2824),M=e(67294),r=e(52822),_=e.n(r),g=e(63144),d=e(85893),h=function(x){var j=(0,M.useState)(x.color||"#FFF"),t=(0,L.Z)(j,2),I=t[0],a=t[1];return(0,M.useEffect)(function(){a(x.color||"#FFF")},[x]),x.changeable?(0,d.jsx)(m.Z,{getPopupContainer:function(W){return W.parentElement||document.body},overlayClassName:_().popover,openClassName:_().popoverOpenClassName,placement:"bottom",content:(0,d.jsx)(g.xS,{disableAlpha:!0,color:I,onChange:function(W){a(W.hex)},onChangeComplete:x.onChange}),trigger:"click",children:(0,d.jsx)("div",{className:_().roundBall,style:{backgroundColor:I}})}):(0,d.jsx)("div",{className:_().roundBall,style:{backgroundColor:I}})};u.Z=h},85871:function(s,u,e){"use strict";var B=e(71194),m=e(50146),L=e(49111),M=e(19650),r=e(57663),_=e(71577),g=e(13062),d=e(71230),h=e(89032),E=e(15746),x=e(77883),j=e(70507),t=e(34792),I=e(48086),a=e(9715),f=e(93766),W=e(2824),D=e(67294),R=e(48971),G=e(6277),o=e.n(G),c=e(85893),Z=function(U){var A=(0,R.YB)(),S=(0,D.useState)(60),N=(0,W.Z)(S,2),F=N[0],K=N[1],n=(0,D.useState)(20),l=(0,W.Z)(n,2),C=l[0],v=l[1],b=(0,D.useState)(20),P=(0,W.Z)(b,2),O=P[0],p=P[1],$=(0,D.useState)(!1),y=(0,W.Z)($,2),Y=y[0],X=y[1],k=(0,R.YB)().formatMessage({id:"pages.toolBar.divideData"}),z=(0,R.YB)().formatMessage({id:"component.PPDivideDataModal.train"}),H=(0,R.YB)().formatMessage({id:"component.PPDivideDataModal.validation"}),J=(0,R.YB)().formatMessage({id:"component.PPDivideDataModal.test"}),Q=(0,R.YB)().formatMessage({id:"component.PPCreater.cancel"}),V=(0,R.YB)().formatMessage({id:"component.PPSegMode.ok"}),q=f.Z.useForm(),te=(0,W.Z)(q,1),ee=te[0];return(0,c.jsx)(m.Z,{className:o().modal,title:k,visible:U.visible,onCancel:U.onCancel,footer:null,children:(0,c.jsxs)(f.Z,{form:ee,name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!1},onFinish:function(){if(F+C+O!=100){I.default.error("Train, Validation and Test total percent should equal 100!");return}console.log("x trainData: ".concat(F,", validationData: ").concat(C,", testData: ").concat(O,", props.project.curr.projectId: ").concat(U.project.curr.projectId)),X(!0),U.splitDataset(U.project.curr.projectId,{train:F*.01,validation:C*.01,test:O*.01}).then(function(){var i;console.log("success"),I.default.success(A.formatMessage({id:"component.PPDivideDataModal.success"})),(i=U.onFinish)===null||i===void 0||i.call(0)}).finally(function(){X(!1)})},autoComplete:"off",layout:"vertical",children:[(0,c.jsxs)(d.Z,{children:[(0,c.jsx)(E.Z,{span:8,children:(0,c.jsx)(f.Z.Item,{label:z,name:"train",children:(0,c.jsx)(j.Z,{addonAfter:"%",defaultValue:60,precision:0,min:0,max:100,value:F,onChange:K})})}),(0,c.jsx)(E.Z,{span:8,children:(0,c.jsx)(f.Z.Item,{label:H,name:"validation",children:(0,c.jsx)(j.Z,{addonAfter:"%",defaultValue:20,precision:0,min:0,max:100,value:C,onChange:v})})}),(0,c.jsx)(E.Z,{span:8,children:(0,c.jsx)(f.Z.Item,{label:J,name:"test",children:(0,c.jsx)(j.Z,{addonAfter:"%",defaultValue:20,precision:0,min:0,max:100,value:O,onChange:p})})})]}),(0,c.jsx)(f.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,c.jsxs)(M.Z,{children:[(0,c.jsx)(_.Z,{onClick:function(){var i;(i=U.onCancel)===null||i===void 0||i.call(0),ee.resetFields()},children:Q}),(0,c.jsx)(_.Z,{type:"primary",htmlType:"submit",loading:Y,children:V})]})})]})})};u.Z=Z},62850:function(s,u,e){"use strict";var B=e(71194),m=e(50146),L=e(49111),M=e(19650),r=e(57663),_=e(71577),g=e(47673),d=e(24044),h=e(34792),E=e(48086),x=e(9715),j=e(93766),t=e(2824),I=e(67294),a=e(48971),f=e(45092),W=e.n(f),D=e(85893),R=function(o){var c=(0,a.YB)(),Z=(0,I.useState)(!1),T=(0,t.Z)(Z,2),U=T[0],A=T[1],S=(0,a.YB)().formatMessage({id:"component.PPCreater.cancel"}),N=j.Z.useForm(),F=(0,t.Z)(N,1),K=F[0];return(0,D.jsx)(m.Z,{className:W().modal,title:(0,a.YB)().formatMessage({id:"component.PPExportModal.title"}),visible:o.visible,onCancel:o.onCancel,footer:null,children:(0,D.jsxs)(j.Z,{form:K,name:"basic",labelCol:{span:6},wrapperCol:{span:16},initialValues:{remember:!1},onFinish:function(l){console.log(l);var C=l.path;if(!C){E.default.error(c.formatMessage({id:"component.PPExportModal.pathNotNull"}));return}A(!0),o.exportDataset(o.project.curr.projectId,C).then(function(){var v;E.default.success(c.formatMessage({id:"component.PPExportModal.exportSuccess"})),(v=o.onFinish)===null||v===void 0||v.call(0)}).finally(function(){A(!1)})},autoComplete:"off",children:[(0,D.jsx)(j.Z.Item,{label:c.formatMessage({id:"component.PPExportModal.path"}),name:"path",children:(0,D.jsx)(d.Z,{})}),(0,D.jsx)(j.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,D.jsxs)(M.Z,{children:[(0,D.jsx)(_.Z,{onClick:function(){var l;(l=o.onCancel)===null||l===void 0||l.call(0),K.resetFields()},children:S}),(0,D.jsx)(_.Z,{type:"primary",htmlType:"submit",loading:U,children:c.formatMessage({id:"component.PPExportModal.export"})})]})})]})})};u.Z=R},5041:function(s,u,e){"use strict";e.d(u,{Z:function(){return F}});var B=e(54421),m=e(38272),L=e(57663),M=e(71577),r=e(2824),_=e(67294),g=e(56131),d=e.n(g),h=e(49111),E=e(19650),x=e(11849),j=e(5882),t=e.n(j),I=e(63097),a=e(85893),f=function(n){var l=(0,x.Z)({},n.label),C=(0,_.useState)(l.invisible),v=(0,r.Z)(C,2),b=v[0],P=v[1],O=(0,_.useState)(0),p=(0,r.Z)(O,2),$=p[0],y=p[1],Y=n.hideEye?" ":(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("a",{className:t().eye,style:{backgroundImage:b?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(H){H.stopPropagation(),P(!b),n.onLabelModify(l)}})," "]}),X=n.hideColorPicker?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)(I.Z,{color:l.color,changeable:!0,onChange:function(H){l.color=H.hex,n.onLabelModify(l)}}),k=(0,a.jsxs)(m.ZP.Item,{className:"".concat(t().listItem," ").concat(n.active?t().listItemActive:""),unselectable:"on",onClick:function(){n.onClick(l)},children:[(0,a.jsxs)(E.Z,{align:"center",size:5,children:[Y,l.name,X]}),(0,a.jsx)("a",{className:t().delete,onClick:function(H){H.stopPropagation();var J=new Date().getTime();J-$<300||(y(J),n.onLabelDelete(l))}})]});return k},W=f,D=e(71194),R=e(50146),G=e(47673),o=e(24044),c=e(9715),Z=e(93766),T=e(48971),U=["#FF0000","#008000","#0000FF","#FFFF00","#FFA500","#00FFFF","#8B00FF","#FFC0CB","#7CFC00","#007FFF","#800080","#36BF36","#DAA520","#800000","#008B8B","#B22222","#E6D933","#000080","#FF00FF","#FFFF99","#87CEEB","#5C50E6","#CD5C5C","#20B2AA","#E680FF","#4D1F00","#006374","#B399FF","#8B4513","#BA55D3","#C0C0C0","#808080","#000000"],A=function(n){var l,C,v=(0,T.YB)().formatMessage({id:"component.PPAddLabelModal.selectColor"}),b=(0,T.YB)().formatMessage({id:"component.PPAddLabelModal.addLabel"}),P=(0,T.YB)().formatMessage({id:"component.PPAddLabelModal.labelName"}),O=(0,T.YB)().formatMessage({id:"component.PPCreater.cancel"}),p=(0,T.YB)().formatMessage({id:"component.PPSegMode.ok"}),$=(0,_.useState)(((l=n.defaultLabel)===null||l===void 0?void 0:l.color)||U[n.order||0]),y=(0,r.Z)($,2),Y=y[0],X=y[1];(0,_.useEffect)(function(){var Q;X(((Q=n.defaultLabel)===null||Q===void 0?void 0:Q.color)||U[n.order||0])},[n]);var k=n.hideColorPicker?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)(Z.Z.Item,{label:v,name:"color",children:(0,a.jsx)(I.Z,{color:Y,onChange:function(V){X(V.hex)}})}),z=Z.Z.useForm(),H=(0,r.Z)(z,1),J=H[0];return(0,a.jsx)(R.Z,{title:b,visible:n.visible,onCancel:n.onCancel,footer:null,children:(0,a.jsxs)(Z.Z,{form:J,name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!1,labelname:(C=n.defaultLabel)===null||C===void 0?void 0:C.name},onFinish:function(V){var q={name:V.labelname,color:Y};n.onLabelAdd(q),J.resetFields()},autoComplete:"off",children:[(0,a.jsx)(Z.Z.Item,{label:P,name:"labelname",rules:[{required:!0,message:"Please input label name!"}],children:(0,a.jsx)(o.Z,{})}),k,(0,a.jsx)(Z.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,a.jsxs)(E.Z,{children:[(0,a.jsx)(M.Z,{onClick:function(){var V;(V=n.onCancel)===null||V===void 0||V.call(0),J.resetFields()},children:O}),(0,a.jsx)(M.Z,{type:"primary",htmlType:"submit",children:p})]})})]})})},S=A,N=function(n){var l,C=(0,T.YB)().formatMessage({id:"component.PPLabelList.addLabel"}),v=(0,T.YB)().formatMessage({id:"component.PPLabelList.labelList"}),b=(0,_.useState)(!1),P=(0,r.Z)(b,2),O=P[0],p=P[1];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.ZP,{className:d().labelList,size:"large",header:(0,a.jsx)("div",{className:d().listHeader,children:v}),footer:(0,a.jsx)("div",{children:(0,a.jsx)(M.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){p(!0)},block:!0,children:C})}),bordered:!0,dataSource:n.labels,renderItem:function(y){var Y;return(0,a.jsx)(W,{hideColorPicker:n.hideColorPicker,hideEye:n.hideEye,onClick:n.onLabelSelect,label:y,active:(Y=n.activeIds)===null||Y===void 0?void 0:Y.has(y.labelId),onLabelDelete:n.onLabelDelete,onLabelModify:n.onLabelModify})}}),(0,a.jsx)(S,{hideColorPicker:n.hideColorPicker,order:(l=n.labels)===null||l===void 0?void 0:l.length,visible:O,onLabelAdd:function(y){n.onLabelAdd(y),p(!1)},onCancel:function(){p(!1)}})]})},F=N},8088:function(s,u,e){"use strict";var B=e(67294),m=e(78677),L=e.n(m),M=e(85893),r=function(g){return(0,M.jsx)("div",{className:"".concat(L().container," ").concat(g.className),children:g.children})};u.Z=r},57436:function(s,u,e){"use strict";var B=e(91220),m=e(2824),L=e(67294),M=e(65031),r=e(84420),_=e.n(r),g=e(83930),d=e.n(g),h=e(85893),E="./pics/basketball.jpg",x=function(t){var I=_()(t.imgSrc||""),a=(0,m.Z)(I,1),f=a[0],W=(0,L.useState)(0),D=(0,m.Z)(W,2),R=D[0],G=D[1],o=(0,L.useState)(0),c=(0,m.Z)(o,2),Z=c[0],T=c[1],U=(0,L.useState)({x:0,y:0}),A=(0,m.Z)(U,2),S=A[0],N=A[1],F=(0,L.useRef)(null);function K(){var P=document.getElementById("dr");P&&(G(P.clientWidth),T(P.clientHeight))}(0,L.useEffect)(function(){window.removeEventListener("resize",K),window.addEventListener("resize",K);var P=document.getElementById("dr");P&&(G(P.clientWidth),T(P.clientHeight))},[]);var n=[];if(t.annotations){var l=(0,B.Z)(t.annotations),C;try{for(l.s();!(C=l.n()).done;){var v=C.value;if(!!v){console.log("PPStage rendering annotation:",v,"annotation.tool:",v.tool);var b=void 0;switch(v.type){case"polygon":b=t.createPolygonFunc;break;case"brush":b=t.createBrushFunc;break;case"rubber":b=t.createBrushFunc;break;case"rectangle":b=t.createRectangleFunc;break;default:b=null}b&&n.push(b(v,t.onAnnotationModify,t.onAnnotationModifyComplete,t.scale,t.currentTool,t.setCurrentAnnotation,F,t.currentAnnotation))}}}catch(P){l.e(P)}finally{l.f()}}return(0,h.jsx)(M.Hf,{width:R,height:Z,offsetX:-R/2,offsetY:-Z/2,className:d().stage,ref:F,children:(0,h.jsx)(M.mh,{onMouseDown:function(O){t.onMouseDown&&t.onMouseDown(O,-R/2-S.x,-Z/2-S.y,t.scale)},onMouseMove:function(O){t.onMouseMove&&t.onMouseMove(O,t.scale)},onMouseUp:function(O){t.onMouseUp&&t.onMouseUp(O,t.scale)},onContextMenu:function(O){O.evt.preventDefault()},draggable:!1,children:(0,h.jsxs)(M.ZA,{draggable:t.currentTool=="mover",scaleX:t.scale,scaleY:t.scale,onDragEnd:function(O){t.currentTool=="mover"&&N({x:O.target.x(),y:O.target.y()})},children:[(0,h.jsx)(M.Ee,{name:"baseImage",draggable:!1,image:f,x:-((f==null?void 0:f.width)||0)/2,y:-((f==null?void 0:f.height)||0)/2}),n]})})})};u.Z=x},44434:function(s,u,e){"use strict";var B=e(67294),m=e(80961),L=e.n(m),M=e(85893),r=function(g){var d=L().leftToolbar;return g.disLoc=="right"&&(d=L().rightToolbar),(0,M.jsx)("div",{className:d,children:g.children})};u.Z=r},61541:function(s,u,e){"use strict";var B=e(49111),m=e(19650),L=e(67294),M=e(82499),r=e.n(M),_=e(85893),g=function(h){return(0,_.jsx)("div",{unselectable:"on",className:"".concat(r().toolBarButtonContainerWrapper," ").concat(h.active&&r().toolBarButtonContainerWrapperActive),onClick:h.onClick,children:(0,_.jsx)(m.Z,{align:"center",className:r().toolBarButtonContainer,size:0,children:(0,_.jsxs)(m.Z,{align:"center",direction:"vertical",className:r().toolBarButton,size:0,children:[(0,_.jsx)("img",{src:h.imgSrc}),(0,_.jsx)("div",{className:r().buttonText,children:h.children})]})})})};u.Z=g},29214:function(s,u,e){"use strict";e.r(u);var B=e(11849),m=e(20228),L=e(11382),M=e(34669),r=e(54458),_=e(34792),g=e(48086),d=e(2824),h=e(67294),E=e(73199),x=e.n(E),j=e(8088),t=e(61541),I=e(44434),a=e(5041),f=e(57436),W=e(64322),D=e(48971),R=e(85871),G=e(62850),o=e(85893),c=function(){var T,U=(0,W.$L)(h.useState,h.useEffect,{label:{oneHot:!1,postSetCurr:ee},tool:{defaultTool:"mover"},effectTrigger:{postTaskChange:ne}}),A=(0,d.Z)(U,10),S=A[0],N=A[1],F=A[2],K=A[3],n=A[4],l=A[5],C=A[6],v=A[7],b=A[8],P=A[9],O=(0,h.useState)(!1),p=(0,d.Z)(O,2),$=p[0],y=p[1],Y=(0,h.useState)(!1),X=(0,d.Z)(Y,2),k=X[0],z=X[1],H=(0,D.YB)().formatMessage({id:"pages.toolBar.zoomIn"}),J=(0,D.YB)().formatMessage({id:"pages.toolBar.zoomOut"}),Q=(0,D.YB)().formatMessage({id:"pages.toolBar.move"}),V=(0,D.YB)().formatMessage({id:"pages.toolBar.save"}),q=(0,D.YB)().formatMessage({id:"pages.toolBar.divideData"}),te=(0,D.YB)().formatMessage({id:"pages.toolBar.export"});function ee(i){if(v.isActive(i))K.create({taskId:n.curr.taskId,labelId:i.labelId,dataId:l.curr.dataId});else{var w=K.all.filter(function(ae){return ae.labelId==i.labelId})[0];K.remove(w.annotationId)}}function ne(i,w){N.setCurr(!0),!(!i||!w)&&(v.initActive(w),N.setCurr(!1))}return(0,o.jsxs)(j.Z,{className:x().classes,children:[(0,o.jsxs)(I.Z,{children:[(0,o.jsx)(t.Z,{imgSrc:"./pics/buttons/zoom_in.png",onClick:function(){F.change(.1)},children:H}),(0,o.jsx)(t.Z,{imgSrc:"./pics/buttons/zoom_out.png",onClick:function(){F.change(-.1)},children:J}),(0,o.jsx)(t.Z,{imgSrc:"./pics/buttons/save.png",onClick:function(){g.default.success("Save Success")},children:V}),(0,o.jsx)(t.Z,{imgSrc:"./pics/buttons/move.png",active:S.curr=="mover",onClick:function(){S.setCurr("mover")},children:Q})]}),(0,o.jsx)("div",{id:"dr",className:"mainStage",children:(0,o.jsxs)(L.Z,{tip:"loading",spinning:N.curr,children:[(0,o.jsx)("div",{className:"draw",children:(0,o.jsx)(f.Z,{scale:F.curr,currentTool:S.curr,setCurrentAnnotation:function(){},onAnnotationModify:function(){},onAnnotationModifyComplete:function(){},imgSrc:l.imgSrc})}),(0,o.jsx)("div",{className:"pblock",children:(0,o.jsxs)("div",{className:"progress",children:[(0,o.jsx)(r.Z,{className:"progressBar",percent:C.progress,status:"active",showInfo:!1})," ",(0,o.jsxs)("span",{className:"progressDesc",children:["Current labeling ",n.currIdx==null?1:n.currIdx+1," of"," ",(T=n.all)===null||T===void 0?void 0:T.length,". Already labeled ",n.finished(C.progress)||0,"."]})]})}),(0,o.jsx)("div",{className:"prevTask",onClick:n.prevTask}),(0,o.jsx)("div",{className:"nextTask",onClick:n.nextTask})]})}),(0,o.jsxs)(I.Z,{disLoc:"right",children:[(0,o.jsx)(t.Z,{imgSrc:"./pics/buttons/data_division.png",onClick:function(){y(!0)},children:q}),(0,o.jsx)(t.Z,{imgSrc:"./pics/buttons/export.png",onClick:function(){z(!0)},children:te})]}),(0,o.jsx)("div",{className:"rightSideBar",children:(0,o.jsx)(a.Z,{labels:v.all,activeIds:v.activeIds,onLabelSelect:v.onSelect,onLabelAdd:function(w){return v.create((0,B.Z)((0,B.Z)({},w),{},{projectId:C.curr.projectId}))},onLabelDelete:v.remove,onLabelModify:function(){},hideColorPicker:!0,hideEye:!0})}),(0,o.jsx)(R.Z,{visible:$,splitDataset:b,project:C,onCancel:function(){y(!1)},onFinish:function(){y(!1)}}),(0,o.jsx)(G.Z,{visible:k,exportDataset:P,project:C,onCancel:function(){z(!1)},onFinish:function(){z(!1)}})]})};u.default=c},15746:function(s,u,e){"use strict";var B=e(21584);u.Z=B.Z},89032:function(s,u,e){"use strict";var B=e(38663),m=e.n(B),L=e(6999)},71230:function(s,u,e){"use strict";var B=e(92820);u.Z=B.Z},13062:function(s,u,e){"use strict";var B=e(38663),m=e.n(B),L=e(6999)}}]);
