(self.webpackChunkpp_label_frontend=self.webpackChunkpp_label_frontend||[]).push([[507],{52822:function(_){_.exports={roundBall:"roundBall___1pqu1",popover:"popover___1-PR6"}},5882:function(_){_.exports={listItem:"listItem___vtDXn",eye:"eye___AsLBS",roundBall:"roundBall___1J_R3",popover:"popover___1x-2R",delete:"delete___WHPf2",listItemActive:"listItemActive___3FRb7"}},56131:function(_){_.exports={labelList:"labelList___jvD05",listHeader:"listHeader___UM5UF",eye:"eye___II3Po",roundBall:"roundBall___j752J"}},78677:function(_){_.exports={container:"container___G0FNe"}},80961:function(_){_.exports={leftToolbar:"leftToolbar___1xi4t",rightToolbar:"rightToolbar___3dNSB"}},82499:function(_){_.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1SHWL",toolBarButtonContainer:"toolBarButtonContainer___1jKUz",toolBarButton:"toolBarButton___3Ouq1",buttonText:"buttonText___10ls7",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AA28"}},63097:function(_,C,n){"use strict";var R=n(20136),v=n(55241),c=n(2824),u=n(67294),i=n(52822),r=n.n(i),s=n(63144),m=n(85893),B=function(g){var a=(0,u.useState)(g.color||"#FFF"),x=(0,c.Z)(a,2),O=x[0],e=x[1];return(0,u.useEffect)(function(){e(g.color||"#FFF")},[g]),g.changeable?(0,m.jsx)(v.Z,{getPopupContainer:function(W){return W.parentElement||document.body},overlayClassName:r().popover,openClassName:r().popoverOpenClassName,placement:"bottom",content:(0,m.jsx)(s.xS,{disableAlpha:!0,color:O,onChange:function(W){e(W.hex)},onChangeComplete:g.onChange}),trigger:"click",children:(0,m.jsx)("div",{className:r().roundBall,style:{backgroundColor:O}})}):(0,m.jsx)("div",{className:r().roundBall,style:{backgroundColor:O}})};C.Z=B},5041:function(_,C,n){"use strict";n.d(C,{Z:function(){return X}});var R=n(54421),v=n(38272),c=n(57663),u=n(71577),i=n(2824),r=n(67294),s=n(56131),m=n.n(s),B=n(49111),K=n(19650),g=n(11849),a=n(5882),x=n.n(a),O=n(63097),e=n(85893),N=function(t){var d=(0,g.Z)({},t.label),f=(0,r.useState)(d.invisible),D=(0,i.Z)(f,2),L=D[0],y=D[1],T=(0,r.useState)(0),E=(0,i.Z)(T,2),b=E[0],P=E[1],h=t.hideEye?" ":(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("a",{className:x().eye,style:{backgroundImage:L?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(A){A.stopPropagation(),y(!L),t.onLabelModify(d)}})," "]}),F=t.hideColorPicker?(0,e.jsx)(e.Fragment,{}):(0,e.jsx)(O.Z,{color:d.color,changeable:!0,onChange:function(A){d.color=A.hex,t.onLabelModify(d)}}),S=(0,e.jsxs)(v.ZP.Item,{className:"".concat(x().listItem," ").concat(t.active?x().listItemActive:""),unselectable:"on",onClick:function(){t.onClick(d)},children:[(0,e.jsxs)(K.Z,{align:"center",size:5,children:[h,d.name,F]}),(0,e.jsx)("a",{className:x().delete,onClick:function(A){A.stopPropagation();var I=new Date().getTime();I-b<300||(P(I),t.onLabelDelete(d))}})]});return S},W=N,J=n(71194),k=n(50146),Q=n(47673),H=n(24044),w=n(9715),U=n(93766),M=n(48971),Z=["#FF0000","#008000","#0000FF","#FFFF00","#FFA500","#00FFFF","#8B00FF","#FFC0CB","#7CFC00","#007FFF","#800080","#36BF36","#DAA520","#800000","#008B8B","#B22222","#E6D933","#000080","#FF00FF","#FFFF99","#87CEEB","#5C50E6","#CD5C5C","#20B2AA","#E680FF","#4D1F00","#006374","#B399FF","#8B4513","#BA55D3","#C0C0C0","#808080","#000000"],Y=function(t){var d,f,D=(0,M.YB)().formatMessage({id:"component.PPAddLabelModal.selectColor"}),L=(0,M.YB)().formatMessage({id:"component.PPAddLabelModal.addLabel"}),y=(0,M.YB)().formatMessage({id:"component.PPAddLabelModal.labelName"}),T=(0,M.YB)().formatMessage({id:"component.PPCreater.cancel"}),E=(0,M.YB)().formatMessage({id:"component.PPSegMode.ok"}),b=(0,r.useState)(((d=t.defaultLabel)===null||d===void 0?void 0:d.color)||Z[t.order||0]),P=(0,i.Z)(b,2),h=P[0],F=P[1];(0,r.useEffect)(function(){var o;F(((o=t.defaultLabel)===null||o===void 0?void 0:o.color)||Z[t.order||0])},[t]);var S=t.hideColorPicker?(0,e.jsx)(e.Fragment,{}):(0,e.jsx)(U.Z.Item,{label:D,name:"color",children:(0,e.jsx)(O.Z,{color:h,onChange:function(l){F(l.hex)}})}),j=U.Z.useForm(),A=(0,i.Z)(j,1),I=A[0];return(0,e.jsx)(k.Z,{title:L,visible:t.visible,onCancel:t.onCancel,footer:null,children:(0,e.jsxs)(U.Z,{form:I,name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!1,labelname:(f=t.defaultLabel)===null||f===void 0?void 0:f.name},onFinish:function(l){var V={name:l.labelname,color:h};t.onLabelAdd(V),I.resetFields()},autoComplete:"off",children:[(0,e.jsx)(U.Z.Item,{label:y,name:"labelname",rules:[{required:!0,message:"Please input label name!"}],children:(0,e.jsx)(H.Z,{})}),S,(0,e.jsx)(U.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,e.jsxs)(K.Z,{children:[(0,e.jsx)(u.Z,{onClick:function(){var l;(l=t.onCancel)===null||l===void 0||l.call(0),I.resetFields()},children:T}),(0,e.jsx)(u.Z,{type:"primary",htmlType:"submit",children:E})]})})]})})},p=Y,z=function(t){var d,f=(0,M.YB)().formatMessage({id:"component.PPLabelList.addLabel"}),D=(0,M.YB)().formatMessage({id:"component.PPLabelList.labelList"}),L=(0,r.useState)(!1),y=(0,i.Z)(L,2),T=y[0],E=y[1];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(v.ZP,{className:m().labelList,size:"large",header:(0,e.jsx)("div",{className:m().listHeader,children:D}),footer:(0,e.jsx)("div",{children:(0,e.jsx)(u.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",onClick:function(){E(!0)},block:!0,children:f})}),bordered:!0,dataSource:t.labels,renderItem:function(P){var h;return(0,e.jsx)(W,{hideColorPicker:t.hideColorPicker,hideEye:t.hideEye,onClick:t.onLabelSelect,label:P,active:(h=t.activeIds)===null||h===void 0?void 0:h.has(P.labelId),onLabelDelete:t.onLabelDelete,onLabelModify:t.onLabelModify})}}),(0,e.jsx)(p,{hideColorPicker:t.hideColorPicker,order:(d=t.labels)===null||d===void 0?void 0:d.length,visible:T,onLabelAdd:function(P){t.onLabelAdd(P),E(!1)},onCancel:function(){E(!1)}})]})},X=z},8088:function(_,C,n){"use strict";var R=n(67294),v=n(78677),c=n.n(v),u=n(85893),i=function(s){return(0,u.jsx)("div",{className:"".concat(c().container," ").concat(s.className),children:s.children})};C.Z=i},57436:function(_,C,n){"use strict";var R=n(91220),v=n(2824),c=n(67294),u=n(65031),i=n(84420),r=n.n(i),s=n(85893),m="./pics/basketball.jpg";function B(g){switch(g){case"mover":return"move";case"rectangle":case"polygon":return"crosshair";default:return"default"}}var K=function(a){var x=r()(a.imgSrc||m),O=(0,v.Z)(x,1),e=O[0],N=(e==null?void 0:e.width)||0,W=(e==null?void 0:e.height)||0,J=a.transparency==null?0:a.transparency*.01,k=(0,c.useState)(0),Q=(0,v.Z)(k,2),H=Q[0],w=Q[1],U=(0,c.useState)(0),M=(0,v.Z)(U,2),Z=M[0],Y=M[1],p=(0,c.useState)({x:0,y:0}),z=(0,v.Z)(p,2),X=z[0],$=z[1],t=(0,c.useRef)(null),d=(0,c.useRef)(null),f=(0,c.useRef)(null);function D(){var o=document.getElementById("dr");o&&(w(o.clientWidth),Y(o.clientHeight))}(0,c.useEffect)(function(){console.log("try to decode");var o=new XMLHttpRequest;o.open("GET","/test-10.bin",!0),o.responseType="arraybuffer",o.onload=function(l){console.log("onload");var V=o.response,q=new Uint8Array(V);console.log(V,q);var G=(0,R.Z)(q),ee;try{for(G.s();!(ee=G.n()).done;){var ne=ee.value;console.log(ne)}}catch(te){G.e(te)}finally{G.f()}},o.send()},[]),(0,c.useEffect)(function(){window.removeEventListener("resize",D),window.addEventListener("resize",D);var o=document.getElementById("dr");o&&(w(o.clientWidth),Y(o.clientHeight))},[]),(0,c.useEffect)(function(){!t.current||(t.current.container().style.cursor=B(a.currentTool))},[a.currentTool]);var L=function(l){return{e:l,mouseX:(l.evt.offsetX-X.x-H/2)/a.scale+N/2,mouseY:(l.evt.offsetY-X.y-Z/2)/a.scale+W/2,canvasRef:f,layerRef:d}},y=function(l){a.drawTool.onMouseDown(L(l))},T=function(l){a.drawTool.onMouseMove(L(l))},E=function(l){a.drawTool.onMouseUp(L(l))},b=function(l){l.cancelBubble=!0,l.evt.preventDefault()},P=[];if(a.annotations){var h={onDrag:a.onAnnotationModify,onDragEnd:a.onAnnotationModifyComplete,scale:a.scale,currentTool:a.currentTool,onSelect:a.setCurrentAnnotation,stageRef:t,currentAnnotation:a.currentAnnotation,transparency:J,canvasRef:f},F=(0,R.Z)(a.annotations),S;try{for(F.s();!(S=F.n()).done;){var j=S.value;if(!!j){h.annotation=j;var A=a.drawTool.createElementsFunc(h);P.push(A)}}}catch(o){F.e(o)}finally{F.f()}}var I=a.currentTool=="mover";return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("canvas",{style:{display:"none"},ref:f,width:e==null?void 0:e.width,height:e==null?void 0:e.height}),(0,s.jsxs)(u.Hf,{width:H,height:Z,offsetX:-H/2,offsetY:-Z/2,className:"stage",ref:t,draggable:I,onDragMove:function(l){a.currentTool=="mover"},onDragEnd:function(l){a.currentTool=="mover"&&(console.log("dragEndPosX,Y: (".concat(l.target.x(),",").concat(l.target.y(),")")),$({x:l.target.x(),y:l.target.y()}))},children:[(0,s.jsx)(u.mh,{onMouseDown:y,onMouseMove:T,onMouseUp:E,onContextMenu:b,scaleX:a.scale,scaleY:a.scale,draggable:!1,children:(0,s.jsx)(u.Ee,{name:"baseImage",draggable:!1,image:e,x:-((e==null?void 0:e.width)||0)/2,y:-((e==null?void 0:e.height)||0)/2})}),(0,s.jsxs)(u.mh,{ref:d,name:"annotation",scaleX:a.scale,scaleY:a.scale,onMouseDown:y,onMouseMove:T,onMouseUp:E,onContextMenu:b,opacity:J,children:[P,(0,s.jsx)(u.Ee,{x:-((e==null?void 0:e.width)||0)/2,y:-((e==null?void 0:e.height)||0)/2,image:f.current||void 0})]})]})]})};C.Z=K},44434:function(_,C,n){"use strict";var R=n(67294),v=n(80961),c=n.n(v),u=n(85893),i=function(s){var m=c().leftToolbar;return s.disLoc=="right"&&(m=c().rightToolbar),(0,u.jsx)("div",{className:m,children:s.children})};C.Z=i},61541:function(_,C,n){"use strict";var R=n(49111),v=n(19650),c=n(67294),u=n(82499),i=n.n(u),r=n(85893),s=function(B){return(0,r.jsx)("div",{unselectable:"on",className:"".concat(i().toolBarButtonContainerWrapper," ").concat(B.active&&i().toolBarButtonContainerWrapperActive),onClick:B.onClick,children:(0,r.jsx)(v.Z,{align:"center",className:i().toolBarButtonContainer,size:0,children:(0,r.jsxs)(v.Z,{align:"center",direction:"vertical",className:i().toolBarButton,size:0,children:[(0,r.jsx)("img",{src:B.imgSrc}),(0,r.jsx)("div",{className:i().buttonText,children:B.children})]})})})};C.Z=s}}]);
